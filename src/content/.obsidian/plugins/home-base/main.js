/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/.pnpm/obsidian-daily-notes-interf_8d9fc24b0fc622d94fd11fa5e9b185b3/node_modules/obsidian-daily-notes-interface/dist/main.js
var require_main = __commonJS({
  "node_modules/.pnpm/obsidian-daily-notes-interf_8d9fc24b0fc622d94fd11fa5e9b185b3/node_modules/obsidian-daily-notes-interface/dist/main.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var obsidian = require("obsidian");
    var DEFAULT_DAILY_NOTE_FORMAT = "YYYY-MM-DD";
    var DEFAULT_WEEKLY_NOTE_FORMAT = "gggg-[W]ww";
    var DEFAULT_MONTHLY_NOTE_FORMAT = "YYYY-MM";
    var DEFAULT_QUARTERLY_NOTE_FORMAT = "YYYY-[Q]Q";
    var DEFAULT_YEARLY_NOTE_FORMAT = "YYYY";
    function shouldUsePeriodicNotesSettings(periodicity) {
      var _a, _b;
      const periodicNotes = window.app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a[periodicity]) == null ? void 0 : _b.enabled);
    }
    function getDailyNoteSettings() {
      var _a, _b, _c, _d;
      try {
        const { internalPlugins, plugins } = window.app;
        if (shouldUsePeriodicNotesSettings("daily")) {
          const { format: format2, folder: folder2, template: template2 } = ((_b = (_a = plugins.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.daily) || {};
          return {
            format: format2 || DEFAULT_DAILY_NOTE_FORMAT,
            folder: (folder2 == null ? void 0 : folder2.trim()) || "",
            template: (template2 == null ? void 0 : template2.trim()) || ""
          };
        }
        const { folder, format, template } = ((_d = (_c = internalPlugins.getPluginById("daily-notes")) == null ? void 0 : _c.instance) == null ? void 0 : _d.options) || {};
        return {
          format: format || DEFAULT_DAILY_NOTE_FORMAT,
          folder: (folder == null ? void 0 : folder.trim()) || "",
          template: (template == null ? void 0 : template.trim()) || ""
        };
      } catch (err) {
        console.info("No custom daily note settings found!", err);
      }
    }
    function getWeeklyNoteSettings() {
      var _a, _b, _c, _d, _e, _f, _g;
      try {
        const pluginManager = window.app.plugins;
        const calendarSettings = (_a = pluginManager.getPlugin("calendar")) == null ? void 0 : _a.options;
        const periodicNotesSettings = (_c = (_b = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _b.settings) == null ? void 0 : _c.weekly;
        if (shouldUsePeriodicNotesSettings("weekly")) {
          return {
            format: periodicNotesSettings.format || DEFAULT_WEEKLY_NOTE_FORMAT,
            folder: ((_d = periodicNotesSettings.folder) == null ? void 0 : _d.trim()) || "",
            template: ((_e = periodicNotesSettings.template) == null ? void 0 : _e.trim()) || ""
          };
        }
        const settings = calendarSettings || {};
        return {
          format: settings.weeklyNoteFormat || DEFAULT_WEEKLY_NOTE_FORMAT,
          folder: ((_f = settings.weeklyNoteFolder) == null ? void 0 : _f.trim()) || "",
          template: ((_g = settings.weeklyNoteTemplate) == null ? void 0 : _g.trim()) || ""
        };
      } catch (err) {
        console.info("No custom weekly note settings found!", err);
      }
    }
    function getMonthlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("monthly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.monthly) || {};
        return {
          format: settings.format || DEFAULT_MONTHLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom monthly note settings found!", err);
      }
    }
    function getQuarterlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("quarterly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.quarterly) || {};
        return {
          format: settings.format || DEFAULT_QUARTERLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom quarterly note settings found!", err);
      }
    }
    function getYearlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("yearly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.yearly) || {};
        return {
          format: settings.format || DEFAULT_YEARLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom yearly note settings found!", err);
      }
    }
    function join(...partSegments) {
      let parts = [];
      for (let i = 0, l = partSegments.length; i < l; i++) {
        parts = parts.concat(partSegments[i].split("/"));
      }
      const newParts = [];
      for (let i = 0, l = parts.length; i < l; i++) {
        const part = parts[i];
        if (!part || part === ".")
          continue;
        else
          newParts.push(part);
      }
      if (parts[0] === "")
        newParts.unshift("");
      return newParts.join("/");
    }
    function basename(fullPath) {
      let base = fullPath.substring(fullPath.lastIndexOf("/") + 1);
      if (base.lastIndexOf(".") != -1)
        base = base.substring(0, base.lastIndexOf("."));
      return base;
    }
    async function ensureFolderExists(path) {
      const dirs = path.replace(/\\/g, "/").split("/");
      dirs.pop();
      if (dirs.length) {
        const dir = join(...dirs);
        if (!window.app.vault.getAbstractFileByPath(dir)) {
          await window.app.vault.createFolder(dir);
        }
      }
    }
    async function getNotePath(directory, filename) {
      if (!filename.endsWith(".md")) {
        filename += ".md";
      }
      const path = obsidian.normalizePath(join(directory, filename));
      await ensureFolderExists(path);
      return path;
    }
    async function getTemplateInfo(template) {
      const { metadataCache, vault } = window.app;
      const templatePath = obsidian.normalizePath(template);
      if (templatePath === "/") {
        return Promise.resolve(["", null]);
      }
      try {
        const templateFile = metadataCache.getFirstLinkpathDest(templatePath, "");
        const contents = await vault.cachedRead(templateFile);
        const IFoldInfo = window.app.foldManager.load(templateFile);
        return [contents, IFoldInfo];
      } catch (err) {
        console.error(`Failed to read the daily note template '${templatePath}'`, err);
        new obsidian.Notice("Failed to read the daily note template");
        return ["", null];
      }
    }
    function getDateUID(date, granularity = "day") {
      const ts = date.clone().startOf(granularity).format();
      return `${granularity}-${ts}`;
    }
    function removeEscapedCharacters(format) {
      return format.replace(/\[[^\]]*\]/g, "");
    }
    function isFormatAmbiguous(format, granularity) {
      if (granularity === "week") {
        const cleanFormat = removeEscapedCharacters(format);
        return /w{1,2}/i.test(cleanFormat) && (/M{1,4}/.test(cleanFormat) || /D{1,4}/.test(cleanFormat));
      }
      return false;
    }
    function getDateFromFile(file, granularity) {
      return getDateFromFilename(file.basename, granularity);
    }
    function getDateFromPath(path, granularity) {
      return getDateFromFilename(basename(path), granularity);
    }
    function getDateFromFilename(filename, granularity) {
      const getSettings = {
        day: getDailyNoteSettings,
        week: getWeeklyNoteSettings,
        month: getMonthlyNoteSettings,
        quarter: getQuarterlyNoteSettings,
        year: getYearlyNoteSettings
      };
      const format = getSettings[granularity]().format.split("/").pop();
      const noteDate = window.moment(filename, format, true);
      if (!noteDate.isValid()) {
        return null;
      }
      if (isFormatAmbiguous(format, granularity)) {
        if (granularity === "week") {
          const cleanFormat = removeEscapedCharacters(format);
          if (/w{1,2}/i.test(cleanFormat)) {
            return window.moment(
              filename,
              // If format contains week, remove day & month formatting
              format.replace(/M{1,4}/g, "").replace(/D{1,4}/g, ""),
              false
            );
          }
        }
      }
      return noteDate;
    }
    var DailyNotesFolderMissingError = class extends Error {
    };
    async function createDailyNote2(date) {
      const app = window.app;
      const { vault } = app;
      const moment2 = window.moment;
      const { template, format, folder } = getDailyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, moment2().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = moment2();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*yesterday\s*}}/gi, date.clone().subtract(1, "day").format(format)).replace(/{{\s*tomorrow\s*}}/gi, date.clone().add(1, "d").format(format)));
        app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getDailyNote2(date, dailyNotes) {
      var _a;
      return (_a = dailyNotes[getDateUID(date, "day")]) != null ? _a : null;
    }
    function getAllDailyNotes2() {
      const { vault } = window.app;
      const { folder } = getDailyNoteSettings();
      const dailyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!dailyNotesFolder) {
        throw new DailyNotesFolderMissingError("Failed to find daily notes folder");
      }
      const dailyNotes = {};
      obsidian.Vault.recurseChildren(dailyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "day");
          if (date) {
            const dateString = getDateUID(date, "day");
            dailyNotes[dateString] = note;
          }
        }
      });
      return dailyNotes;
    }
    var WeeklyNotesFolderMissingError = class extends Error {
    };
    function getDaysOfWeek() {
      const { moment: moment2 } = window;
      let weekStart = moment2.localeData()._week.dow;
      const daysOfWeek = [
        "sunday",
        "monday",
        "tuesday",
        "wednesday",
        "thursday",
        "friday",
        "saturday"
      ];
      while (weekStart) {
        daysOfWeek.push(daysOfWeek.shift());
        weekStart--;
      }
      return daysOfWeek;
    }
    function getDayOfWeekNumericalValue(dayOfWeekName) {
      return getDaysOfWeek().indexOf(dayOfWeekName.toLowerCase());
    }
    async function createWeeklyNote2(date) {
      const { vault } = window.app;
      const { template, format, folder } = getWeeklyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*title\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi, (_, dayOfWeek, momentFormat) => {
          const day = getDayOfWeekNumericalValue(dayOfWeek);
          return date.weekday(day).format(momentFormat.trim());
        }));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getWeeklyNote2(date, weeklyNotes) {
      var _a;
      return (_a = weeklyNotes[getDateUID(date, "week")]) != null ? _a : null;
    }
    function getAllWeeklyNotes2() {
      const weeklyNotes = {};
      if (!appHasWeeklyNotesPluginLoaded()) {
        return weeklyNotes;
      }
      const { vault } = window.app;
      const { folder } = getWeeklyNoteSettings();
      const weeklyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!weeklyNotesFolder) {
        throw new WeeklyNotesFolderMissingError("Failed to find weekly notes folder");
      }
      obsidian.Vault.recurseChildren(weeklyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "week");
          if (date) {
            const dateString = getDateUID(date, "week");
            weeklyNotes[dateString] = note;
          }
        }
      });
      return weeklyNotes;
    }
    var MonthlyNotesFolderMissingError = class extends Error {
    };
    async function createMonthlyNote2(date) {
      const { vault } = window.app;
      const { template, format, folder } = getMonthlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getMonthlyNote2(date, monthlyNotes) {
      var _a;
      return (_a = monthlyNotes[getDateUID(date, "month")]) != null ? _a : null;
    }
    function getAllMonthlyNotes2() {
      const monthlyNotes = {};
      if (!appHasMonthlyNotesPluginLoaded()) {
        return monthlyNotes;
      }
      const { vault } = window.app;
      const { folder } = getMonthlyNoteSettings();
      const monthlyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!monthlyNotesFolder) {
        throw new MonthlyNotesFolderMissingError("Failed to find monthly notes folder");
      }
      obsidian.Vault.recurseChildren(monthlyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "month");
          if (date) {
            const dateString = getDateUID(date, "month");
            monthlyNotes[dateString] = note;
          }
        }
      });
      return monthlyNotes;
    }
    var QuarterlyNotesFolderMissingError = class extends Error {
    };
    async function createQuarterlyNote2(date) {
      const { vault } = window.app;
      const { template, format, folder } = getQuarterlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getQuarterlyNote2(date, quarterly) {
      var _a;
      return (_a = quarterly[getDateUID(date, "quarter")]) != null ? _a : null;
    }
    function getAllQuarterlyNotes2() {
      const quarterly = {};
      if (!appHasQuarterlyNotesPluginLoaded()) {
        return quarterly;
      }
      const { vault } = window.app;
      const { folder } = getQuarterlyNoteSettings();
      const quarterlyFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!quarterlyFolder) {
        throw new QuarterlyNotesFolderMissingError("Failed to find quarterly notes folder");
      }
      obsidian.Vault.recurseChildren(quarterlyFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "quarter");
          if (date) {
            const dateString = getDateUID(date, "quarter");
            quarterly[dateString] = note;
          }
        }
      });
      return quarterly;
    }
    var YearlyNotesFolderMissingError = class extends Error {
    };
    async function createYearlyNote2(date) {
      const { vault } = window.app;
      const { template, format, folder } = getYearlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getYearlyNote2(date, yearlyNotes) {
      var _a;
      return (_a = yearlyNotes[getDateUID(date, "year")]) != null ? _a : null;
    }
    function getAllYearlyNotes2() {
      const yearlyNotes = {};
      if (!appHasYearlyNotesPluginLoaded()) {
        return yearlyNotes;
      }
      const { vault } = window.app;
      const { folder } = getYearlyNoteSettings();
      const yearlyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!yearlyNotesFolder) {
        throw new YearlyNotesFolderMissingError("Failed to find yearly notes folder");
      }
      obsidian.Vault.recurseChildren(yearlyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "year");
          if (date) {
            const dateString = getDateUID(date, "year");
            yearlyNotes[dateString] = note;
          }
        }
      });
      return yearlyNotes;
    }
    function appHasDailyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const dailyNotesPlugin = app.internalPlugins.plugins["daily-notes"];
      if (dailyNotesPlugin && dailyNotesPlugin.enabled) {
        return true;
      }
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.daily) == null ? void 0 : _b.enabled);
    }
    function appHasWeeklyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      if (app.plugins.getPlugin("calendar")) {
        return true;
      }
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.weekly) == null ? void 0 : _b.enabled);
    }
    function appHasMonthlyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.monthly) == null ? void 0 : _b.enabled);
    }
    function appHasQuarterlyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.quarterly) == null ? void 0 : _b.enabled);
    }
    function appHasYearlyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.yearly) == null ? void 0 : _b.enabled);
    }
    function getPeriodicNoteSettings(granularity) {
      const getSettings = {
        day: getDailyNoteSettings,
        week: getWeeklyNoteSettings,
        month: getMonthlyNoteSettings,
        quarter: getQuarterlyNoteSettings,
        year: getYearlyNoteSettings
      }[granularity];
      return getSettings();
    }
    function createPeriodicNote(granularity, date) {
      const createFn = {
        day: createDailyNote2,
        month: createMonthlyNote2,
        week: createWeeklyNote2
      };
      return createFn[granularity](date);
    }
    exports.DEFAULT_DAILY_NOTE_FORMAT = DEFAULT_DAILY_NOTE_FORMAT;
    exports.DEFAULT_MONTHLY_NOTE_FORMAT = DEFAULT_MONTHLY_NOTE_FORMAT;
    exports.DEFAULT_QUARTERLY_NOTE_FORMAT = DEFAULT_QUARTERLY_NOTE_FORMAT;
    exports.DEFAULT_WEEKLY_NOTE_FORMAT = DEFAULT_WEEKLY_NOTE_FORMAT;
    exports.DEFAULT_YEARLY_NOTE_FORMAT = DEFAULT_YEARLY_NOTE_FORMAT;
    exports.appHasDailyNotesPluginLoaded = appHasDailyNotesPluginLoaded;
    exports.appHasMonthlyNotesPluginLoaded = appHasMonthlyNotesPluginLoaded;
    exports.appHasQuarterlyNotesPluginLoaded = appHasQuarterlyNotesPluginLoaded;
    exports.appHasWeeklyNotesPluginLoaded = appHasWeeklyNotesPluginLoaded;
    exports.appHasYearlyNotesPluginLoaded = appHasYearlyNotesPluginLoaded;
    exports.createDailyNote = createDailyNote2;
    exports.createMonthlyNote = createMonthlyNote2;
    exports.createPeriodicNote = createPeriodicNote;
    exports.createQuarterlyNote = createQuarterlyNote2;
    exports.createWeeklyNote = createWeeklyNote2;
    exports.createYearlyNote = createYearlyNote2;
    exports.getAllDailyNotes = getAllDailyNotes2;
    exports.getAllMonthlyNotes = getAllMonthlyNotes2;
    exports.getAllQuarterlyNotes = getAllQuarterlyNotes2;
    exports.getAllWeeklyNotes = getAllWeeklyNotes2;
    exports.getAllYearlyNotes = getAllYearlyNotes2;
    exports.getDailyNote = getDailyNote2;
    exports.getDailyNoteSettings = getDailyNoteSettings;
    exports.getDateFromFile = getDateFromFile;
    exports.getDateFromPath = getDateFromPath;
    exports.getDateUID = getDateUID;
    exports.getMonthlyNote = getMonthlyNote2;
    exports.getMonthlyNoteSettings = getMonthlyNoteSettings;
    exports.getPeriodicNoteSettings = getPeriodicNoteSettings;
    exports.getQuarterlyNote = getQuarterlyNote2;
    exports.getQuarterlyNoteSettings = getQuarterlyNoteSettings;
    exports.getTemplateInfo = getTemplateInfo;
    exports.getWeeklyNote = getWeeklyNote2;
    exports.getWeeklyNoteSettings = getWeeklyNoteSettings;
    exports.getYearlyNote = getYearlyNote2;
    exports.getYearlyNoteSettings = getYearlyNoteSettings;
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => HomeBasePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian12 = require("obsidian");

// src/settings.ts
var HomeBaseType = /* @__PURE__ */ ((HomeBaseType2) => {
  HomeBaseType2["File"] = "File";
  HomeBaseType2["Workspace"] = "Workspace";
  HomeBaseType2["Random"] = "Random file";
  HomeBaseType2["RandomFolder"] = "Random in folder";
  HomeBaseType2["Graph"] = "Graph view";
  HomeBaseType2["None"] = "Nothing";
  HomeBaseType2["Journal"] = "Journal";
  HomeBaseType2["NewNote"] = "New note";
  HomeBaseType2["DailyNote"] = "Daily Note";
  HomeBaseType2["WeeklyNote"] = "Weekly Note";
  HomeBaseType2["MonthlyNote"] = "Monthly Note";
  HomeBaseType2["QuarterlyNote"] = "Quarterly Note";
  HomeBaseType2["YearlyNote"] = "Yearly Note";
  return HomeBaseType2;
})(HomeBaseType || {});
var DEFAULT_SETTINGS = {
  // General
  homeBaseType: "File" /* File */,
  homeBaseValue: "",
  openOnStartup: true,
  openViewMode: "default",
  openMode: "replace-all",
  manualOpenMode: "retain",
  // Tab Behavior
  replaceNewTab: false,
  newTabMode: "only-when-empty",
  // Default: only replace when no tabs are open
  openWhenAllTabsClosed: true,
  // Default: open home base when all tabs are closed
  useDifferentFileForNewTab: false,
  newTabType: "File" /* File */,
  newTabValue: "",
  newTabSeparateMobile: false,
  mobileNewTabType: "File" /* File */,
  mobileNewTabValue: "",
  // UI Features
  showStickyHomeIcon: false,
  stickyIconName: "home",
  hideHomeTabHeader: false,
  replaceMobileNewTab: false,
  // Mobile
  separateMobile: false,
  mobileHomeBaseType: "File" /* File */,
  mobileHomeBaseValue: "",
  // Automation
  commandOnOpen: "",
  waitForGitSync: false,
  gitSyncTimeout: 3,
  // Default 3 seconds
  // View behavior
  revertView: false,
  autoScroll: false,
  hideReleaseNotes: false
  // OFF by default
};
var VIEW_MODE_OPTIONS = {
  "default": "Default",
  "preview": "Reading view",
  "source": "Source mode",
  "live": "Live Preview"
};
var NEW_TAB_MODE_OPTIONS = {
  "only-when-empty": "Only when no tabs are open",
  "always": "Always replace new tabs"
};
var OPENING_MODE_OPTIONS = {
  "replace-all": "Replace all open notes",
  "replace-last": "Replace last note",
  "retain": "Keep open notes"
};
var UNCHANGEABLE_TYPES = [
  "Random file" /* Random */,
  "Graph view" /* Graph */,
  "Nothing" /* None */,
  "Daily Note" /* DailyNote */,
  "Weekly Note" /* WeeklyNote */,
  "Monthly Note" /* MonthlyNote */,
  "Quarterly Note" /* QuarterlyNote */,
  "Yearly Note" /* YearlyNote */
];

// src/ui/settings-tab.ts
var import_obsidian5 = require("obsidian");

// src/utils/settings-compat.ts
var import_obsidian = require("obsidian");
var ObsidianModule = __toESM(require("obsidian"), 1);
function createSettingsGroup(containerEl, heading, manifestId) {
  if (manifestId) {
    containerEl.addClass(`${manifestId}-settings-compat`);
  }
  if ((0, import_obsidian.requireApiVersion)("1.11.0")) {
    const SettingGroupClass = ObsidianModule.SettingGroup;
    if (SettingGroupClass) {
      const group = heading ? new SettingGroupClass(containerEl).setHeading(heading) : new SettingGroupClass(containerEl);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  if (heading) {
    const headingEl = containerEl.createDiv("setting-group-heading");
    headingEl.createEl("h3", { text: heading });
  }
  return {
    addSetting(cb) {
      const setting = new import_obsidian.Setting(containerEl);
      cb(setting);
    }
  };
}

// src/ui/file-suggest.ts
var import_obsidian2 = require("obsidian");
var SUPPORTED_EXTENSIONS = ["md", "mdx", "canvas", "base"];
var FilePathSuggest = class extends import_obsidian2.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(query) {
    const lowerQuery = query.toLowerCase();
    const files = [];
    this.app.vault.getAllLoadedFiles().forEach((file) => {
      if (file instanceof import_obsidian2.TFile) {
        if (SUPPORTED_EXTENSIONS.includes(file.extension)) {
          if (file.path.toLowerCase().includes(lowerQuery) || file.basename.toLowerCase().includes(lowerQuery)) {
            files.push(file);
          }
        }
      }
    });
    files.sort((a, b) => {
      const aStartsWith = a.path.toLowerCase().startsWith(lowerQuery);
      const bStartsWith = b.path.toLowerCase().startsWith(lowerQuery);
      if (aStartsWith && !bStartsWith) return -1;
      if (!aStartsWith && bStartsWith) return 1;
      return a.path.localeCompare(b.path);
    });
    return files.slice(0, 20);
  }
  renderSuggestion(file, el) {
    el.createEl("div", {
      text: file.basename,
      cls: "suggestion-title"
    });
    if (file.parent && file.parent.path !== "/") {
      el.createEl("small", {
        text: file.parent.path,
        cls: "suggestion-path"
      });
    }
    if (file.extension !== "md") {
      el.createEl("span", {
        text: file.extension.toUpperCase(),
        cls: "suggestion-flair"
      });
    }
  }
  selectSuggestion(file) {
    this.inputEl.value = file.path;
    this.inputEl.trigger("input");
    this.close();
  }
};
var FolderSuggest = class extends import_obsidian2.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(query) {
    const lowerQuery = query.toLowerCase();
    const folders = [];
    this.app.vault.getAllLoadedFiles().forEach((file) => {
      if (file instanceof import_obsidian2.TFolder) {
        if (file.path.toLowerCase().includes(lowerQuery)) {
          folders.push(file);
        }
      }
    });
    folders.sort((a, b) => a.path.localeCompare(b.path));
    return folders.slice(0, 20);
  }
  renderSuggestion(folder, el) {
    el.createEl("div", { text: folder.path || "/" });
  }
  selectSuggestion(folder) {
    this.inputEl.value = folder.path;
    this.inputEl.trigger("input");
    this.close();
  }
};
var WorkspaceSuggest = class extends import_obsidian2.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(query) {
    var _a, _b, _c;
    const workspacesPlugin = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b.workspaces;
    if (!(workspacesPlugin == null ? void 0 : workspacesPlugin.enabled) || !((_c = workspacesPlugin.instance) == null ? void 0 : _c.workspaces)) {
      return [];
    }
    const workspaces = Object.keys(workspacesPlugin.instance.workspaces);
    const lowerQuery = query.toLowerCase();
    return workspaces.filter(
      (workspace) => workspace.toLowerCase().includes(lowerQuery)
    );
  }
  renderSuggestion(workspace, el) {
    el.createEl("div", { text: workspace });
  }
  selectSuggestion(workspace) {
    this.inputEl.value = workspace;
    this.inputEl.trigger("input");
    this.close();
  }
};

// src/ui/command-suggest.ts
var import_obsidian3 = require("obsidian");
var CommandSuggest = class extends import_obsidian3.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(query) {
    var _a;
    const lowerQuery = query.toLowerCase();
    const commands = [];
    const appWithCommands = this.app;
    const allCommands = (_a = appWithCommands.commands) == null ? void 0 : _a.commands;
    if (allCommands) {
      for (const command of Object.values(allCommands)) {
        if (command.name.toLowerCase().includes(lowerQuery) || command.id.toLowerCase().includes(lowerQuery)) {
          commands.push(command);
        }
      }
    }
    commands.sort((a, b) => a.name.localeCompare(b.name));
    return commands.slice(0, 30);
  }
  renderSuggestion(command, el) {
    el.createEl("div", {
      text: command.name,
      cls: "suggestion-title"
    });
    el.createEl("small", {
      text: command.id,
      cls: "suggestion-note"
    });
  }
  selectSuggestion(command) {
    this.inputEl.value = command.id;
    this.inputEl.trigger("input");
    this.close();
  }
};
function getCommandById(app, commandId) {
  var _a;
  const appWithCommands = app;
  const commands = (_a = appWithCommands.commands) == null ? void 0 : _a.commands;
  return commands == null ? void 0 : commands[commandId];
}
function executeCommand(app, commandId) {
  var _a, _b;
  if (!commandId) return false;
  const appWithCommands = app;
  const result = (_b = (_a = appWithCommands.commands) == null ? void 0 : _a.executeCommandById) == null ? void 0 : _b.call(_a, commandId);
  return result !== false;
}

// src/ui/icon-picker.ts
var import_obsidian4 = require("obsidian");
var IconPicker = class extends import_obsidian4.Modal {
  constructor(app, currentIcon, callback) {
    super(app);
    this.searchResults = [];
    this.selectedIcon = currentIcon;
    this.callback = callback;
  }
  onOpen() {
    this.containerEl.addClass("mod-confirmation");
    this.modalEl.addClass("iconic-icon-picker");
    this.setTitle("Change icon");
    const searchSetting = new import_obsidian4.Setting(this.contentEl);
    if (!import_obsidian4.Platform.isPhone) {
      searchSetting.setName("Search");
    }
    searchSetting.addSearch((searchField) => {
      searchField.setPlaceholder("Search icons...").onChange(() => this.updateSearchResults());
      searchField.inputEl.enterKeyHint = "go";
      this.searchField = searchField;
    });
    if (this.selectedIcon) {
      this.searchField.setValue(this.selectedIcon);
    }
    this.searchResultsSetting = new import_obsidian4.Setting(this.contentEl);
    this.searchResultsSetting.settingEl.addClass("iconic-search-results");
    this.searchResultsSetting.settingEl.tabIndex = 0;
    this.searchResultsSetting.settingEl.addEventListener("wheel", (event) => {
      if (document.body.hasClass("mod-rtl")) {
        this.searchResultsSetting.settingEl.scrollLeft -= event.deltaY;
      } else {
        this.searchResultsSetting.settingEl.scrollLeft += event.deltaY;
      }
    }, { passive: true });
    const buttonContainer = this.modalEl.createDiv({ cls: "modal-button-container" });
    new import_obsidian4.ButtonComponent(buttonContainer).setButtonText("Cancel").onClick(() => this.close()).buttonEl.addClass("mod-cancel");
    new import_obsidian4.ButtonComponent(buttonContainer).setButtonText("Save").setCta().onClick(() => {
      this.callback(this.selectedIcon);
      this.close();
    });
    requestAnimationFrame(() => {
      this.searchField.inputEl.select();
      this.updateSearchResults();
    });
  }
  /**
   * Update search results based on current query
   */
  updateSearchResults() {
    const query = this.searchField.getValue().toLowerCase().trim();
    const fuzzySearch = (0, import_obsidian4.prepareFuzzySearch)(query);
    const matches = [];
    const iconIds = (0, import_obsidian4.getIconIds)();
    if (query) {
      for (const iconId of iconIds) {
        const iconName = this.formatIconName(iconId);
        if (iconId === query || iconId.toLowerCase() === query) {
          matches.push([0, [iconId, iconName]]);
        } else {
          const fuzzyMatch = fuzzySearch(iconName);
          if (fuzzyMatch) {
            matches.push([fuzzyMatch.score, [iconId, iconName]]);
          }
        }
      }
    } else {
      for (const iconId of iconIds) {
        const iconName = this.formatIconName(iconId);
        matches.push([0, [iconId, iconName]]);
      }
    }
    matches.sort(([scoreA], [scoreB]) => scoreA > scoreB ? -1 : 1);
    this.searchResults.length = 0;
    const maxResults = 100;
    for (const [, iconEntry] of matches) {
      this.searchResults.push(iconEntry);
      if (this.searchResults.length >= maxResults) break;
    }
    this.searchResultsSetting.clear();
    for (const [iconId, iconName] of this.searchResults) {
      this.searchResultsSetting.addExtraButton((iconButton) => {
        iconButton.setTooltip(iconName, {
          delay: 300,
          placement: import_obsidian4.Platform.isPhone ? "top" : "bottom"
        });
        const iconEl = iconButton.extraSettingsEl;
        iconEl.addClass("iconic-search-result");
        iconEl.tabIndex = -1;
        (0, import_obsidian4.setIcon)(iconEl, iconId);
        if (iconId === this.selectedIcon) {
          iconEl.addClass("is-selected");
        }
        iconEl.addEventListener("click", () => {
          this.selectedIcon = iconId;
          this.callback(iconId);
          this.close();
        });
        if (import_obsidian4.Platform.isPhone) {
          iconEl.addEventListener("contextmenu", () => {
            var _a;
            (_a = navigator.vibrate) == null ? void 0 : _a.call(navigator, 100);
          });
        }
      });
    }
    if (this.searchResults.length === 0) {
      this.searchResultsSetting.addExtraButton((button) => {
        button.extraSettingsEl.addClasses(["iconic-invisible", "iconic-search-result"]);
      });
    }
  }
  /**
   * Format icon ID into readable name
   */
  formatIconName(iconId) {
    let name = iconId.replace(/^lucide-/, "");
    name = name.replace(/-/g, " ");
    return name.split(" ").map(
      (word) => word.charAt(0).toUpperCase() + word.slice(1)
    ).join(" ");
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/ui/settings-tab.ts
var HomeBaseSettingTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    const isMobile = this.plugin.settings.separateMobile;
    const activeType = isMobile ? this.plugin.settings.mobileHomeBaseType : this.plugin.settings.homeBaseType;
    const activeValue = isMobile ? this.plugin.settings.mobileHomeBaseValue : this.plugin.settings.homeBaseValue;
    const generalGroup = createSettingsGroup(containerEl, void 0, "home-base");
    generalGroup.addSetting((setting) => {
      setting.setName("Type").setDesc("What to open as your home base").addDropdown((dropdown) => {
        let pluginDisabled = false;
        for (const type of Object.values(HomeBaseType)) {
          if (!this.plugin.hasRequiredPlugin(type)) {
            if (type === activeType) {
              pluginDisabled = true;
              dropdown.addOption(type, type);
            } else {
              dropdown.selectEl.createEl("option", {
                text: type,
                attr: { disabled: "true" }
              });
              continue;
            }
          } else {
            dropdown.addOption(type, type);
          }
        }
        dropdown.setValue(activeType || "File" /* File */).onChange(async (value) => {
          if (isMobile) {
            this.plugin.settings.mobileHomeBaseType = value;
          } else {
            this.plugin.settings.homeBaseType = value;
          }
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
        if (pluginDisabled) {
          setting.descEl.createDiv({
            text: "The required plugin has not been enabled or configured for this type.",
            cls: "mod-warning"
          });
        }
      });
    });
    if (!UNCHANGEABLE_TYPES.includes(activeType)) {
      generalGroup.addSetting((setting) => {
        let desc = "";
        let placeholder = "";
        if (activeType === "File" /* File */) {
          desc = "The file to open as your home base (supports .md, .mdx, .canvas, .base)";
          placeholder = "Path to home base file";
        } else if (activeType === "Workspace" /* Workspace */) {
          desc = "The workspace to load as your home base";
          placeholder = "Workspace name";
        } else if (activeType === "Random in folder" /* RandomFolder */ || activeType === "New note" /* NewNote */) {
          desc = activeType === "Random in folder" /* RandomFolder */ ? "The folder to pick a random file from" : "The folder to create new notes in";
          placeholder = "Folder path";
        } else if (activeType === "Journal" /* Journal */) {
          desc = "The journal name";
          placeholder = "Journal name";
        }
        setting.setName(activeType === "File" /* File */ ? "File" : activeType === "Workspace" /* Workspace */ ? "Workspace" : activeType === "Random in folder" /* RandomFolder */ || activeType === "New note" /* NewNote */ ? "Folder" : activeType === "Journal" /* Journal */ ? "Journal" : "Value").setDesc(desc).addText((text) => {
          if (activeType === "File" /* File */) {
            new FilePathSuggest(this.app, text.inputEl);
          } else if (activeType === "Workspace" /* Workspace */) {
            new WorkspaceSuggest(this.app, text.inputEl);
          } else if (activeType === "Random in folder" /* RandomFolder */ || activeType === "New note" /* NewNote */) {
            new FolderSuggest(this.app, text.inputEl);
          }
          text.setPlaceholder(placeholder).setValue(activeValue || "").onChange(async (value) => {
            if (isMobile) {
              this.plugin.settings.mobileHomeBaseValue = value;
            } else {
              this.plugin.settings.homeBaseValue = value;
            }
            await this.plugin.saveSettings();
          });
        });
      });
    }
    generalGroup.addSetting((setting) => {
      setting.setName("Open on startup").setDesc("Open the home base when launching Obsidian").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.openOnStartup).onChange(async (value) => {
          this.plugin.settings.openOnStartup = value;
          await this.plugin.saveSettings();
        });
      });
      if ((0, import_obsidian5.requireApiVersion)("1.11.0")) {
        const nativeOpenBehavior = this.plugin.homeService.getNativeOpenBehavior();
        if (nativeOpenBehavior) {
          setting.descEl.createDiv({
            text: `Note: This will override Obsidian's native "Default file to open" setting (currently set to "${nativeOpenBehavior}").`,
            cls: "mod-warning"
          });
        }
      }
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Opening mode (startup)").setDesc("How to handle existing tabs when opening on startup").addDropdown((dropdown) => {
        for (const [value, label] of Object.entries(OPENING_MODE_OPTIONS)) {
          dropdown.addOption(value, label);
        }
        dropdown.setValue(this.plugin.settings.openMode).onChange(async (value) => {
          this.plugin.settings.openMode = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Opening mode (manual)").setDesc("How to handle existing tabs when opening manually").addDropdown((dropdown) => {
        for (const [value, label] of Object.entries(OPENING_MODE_OPTIONS)) {
          dropdown.addOption(value, label);
        }
        dropdown.setValue(this.plugin.settings.manualOpenMode).onChange(async (value) => {
          this.plugin.settings.manualOpenMode = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("View mode").setDesc("How to open Markdown files").addDropdown((dropdown) => {
        for (const [value, label] of Object.entries(VIEW_MODE_OPTIONS)) {
          dropdown.addOption(value, label);
        }
        dropdown.setValue(this.plugin.settings.openViewMode).onChange(async (value) => {
          this.plugin.settings.openViewMode = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Revert view on close").setDesc("When navigating away from the home base, restore the default view").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.revertView).onChange(async (value) => {
          this.plugin.settings.revertView = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Auto-scroll").setDesc("When opening the home base, scroll to the bottom and focus on the last line").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.autoScroll).onChange(async (value) => {
          this.plugin.settings.autoScroll = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Hide release notes").setDesc("Never display release notes when Obsidian updates").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.hideReleaseNotes).onChange(async (value) => {
          this.plugin.settings.hideReleaseNotes = value;
          await this.plugin.saveSettings();
        });
      });
    });
    const tabGroup = createSettingsGroup(containerEl, "Tab Behavior", "home-base");
    tabGroup.addSetting((setting) => {
      setting.setName("Open home base when all tabs are closed").setDesc("When you close all tabs, automatically open the home base").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.openWhenAllTabsClosed).onChange(async (value) => {
          this.plugin.settings.openWhenAllTabsClosed = value;
          await this.plugin.saveSettings();
        });
      });
    });
    tabGroup.addSetting((setting) => {
      setting.setName("Replace new tabs").setDesc('Open home base instead of new empty tabs (works independently of "open home base when all tabs are closed")').addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.replaceNewTab).onChange(async (value) => {
          this.plugin.settings.replaceNewTab = value;
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.replaceNewTab) {
      tabGroup.addSetting((setting) => {
        setting.setName("New tab replacement mode").setDesc("When to replace new tabs (only when no tabs are open, or always)").addDropdown((dropdown) => {
          for (const [value, label] of Object.entries(NEW_TAB_MODE_OPTIONS)) {
            dropdown.addOption(value, label);
          }
          dropdown.setValue(this.plugin.settings.newTabMode).onChange(async (value) => {
            this.plugin.settings.newTabMode = value;
            await this.plugin.saveSettings();
          });
        });
      });
      tabGroup.addSetting((setting) => {
        setting.setName("Use different home base for new tabs").setDesc("Configure a different home base to open for new tabs (instead of the main home base)").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.useDifferentFileForNewTab).onChange(async (value) => {
            this.plugin.settings.useDifferentFileForNewTab = value;
            await this.plugin.saveSettings();
            const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
            const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
            this.display();
            requestAnimationFrame(() => {
              if (scrollContainer) {
                scrollContainer.scrollTop = scrollTop;
              }
            });
          });
        });
      });
      if (this.plugin.settings.useDifferentFileForNewTab) {
        const desktopType = this.plugin.settings.newTabType || "File" /* File */;
        const desktopValue = this.plugin.settings.newTabValue || "";
        tabGroup.addSetting((setting) => {
          setting.setName("New tab type").setDesc("What to open for new tabs").addDropdown((dropdown) => {
            let pluginDisabled = false;
            for (const type of Object.values(HomeBaseType)) {
              if (!this.plugin.hasRequiredPlugin(type)) {
                if (type === desktopType) {
                  pluginDisabled = true;
                  dropdown.addOption(type, type);
                } else {
                  dropdown.selectEl.createEl("option", {
                    text: type,
                    attr: { disabled: "true" }
                  });
                  continue;
                }
              } else {
                dropdown.addOption(type, type);
              }
            }
            dropdown.setValue(desktopType).onChange(async (value) => {
              this.plugin.settings.newTabType = value;
              await this.plugin.saveSettings();
              const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
              const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
              this.display();
              requestAnimationFrame(() => {
                if (scrollContainer) {
                  scrollContainer.scrollTop = scrollTop;
                }
              });
            });
            if (pluginDisabled) {
              setting.descEl.createDiv({
                text: "The required plugin has not been enabled or configured for this type.",
                cls: "mod-warning"
              });
            }
          });
        });
        if (!UNCHANGEABLE_TYPES.includes(desktopType)) {
          tabGroup.addSetting((setting) => {
            let desc = "";
            let placeholder = "";
            if (desktopType === "File" /* File */) {
              desc = "The file to open for new tabs (supports .md, .mdx, .canvas, .base)";
              placeholder = "Path to new tab file";
            } else if (desktopType === "Workspace" /* Workspace */) {
              desc = "The workspace to load for new tabs";
              placeholder = "Workspace name";
            } else if (desktopType === "Random in folder" /* RandomFolder */) {
              desc = "The folder to pick a random file from for new tabs";
              placeholder = "Folder path";
            } else if (desktopType === "Journal" /* Journal */) {
              desc = "The journal name for new tabs";
              placeholder = "Journal name";
            }
            setting.setName(desktopType === "File" /* File */ ? "New tab file" : desktopType === "Workspace" /* Workspace */ ? "New tab workspace" : desktopType === "Random in folder" /* RandomFolder */ ? "New tab folder" : desktopType === "Journal" /* Journal */ ? "New tab journal" : "New tab value").setDesc(desc).addText((text) => {
              if (desktopType === "File" /* File */) {
                new FilePathSuggest(this.app, text.inputEl);
              } else if (desktopType === "Workspace" /* Workspace */) {
                new WorkspaceSuggest(this.app, text.inputEl);
              } else if (desktopType === "Random in folder" /* RandomFolder */) {
                new FolderSuggest(this.app, text.inputEl);
              }
              text.setPlaceholder(placeholder).setValue(desktopValue || "").onChange(async (value) => {
                this.plugin.settings.newTabValue = value;
                await this.plugin.saveSettings();
              });
            });
          });
        }
      }
    }
    const uiGroup = createSettingsGroup(containerEl, "UI Features", "home-base");
    uiGroup.addSetting((setting) => {
      setting.setName("Sticky home icon").setDesc("Show a home icon in the tab bar that stays pinned to the left (desktop only)").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showStickyHomeIcon).onChange(async (value) => {
          this.plugin.settings.showStickyHomeIcon = value;
          await this.plugin.saveSettings();
          this.plugin.updateStickyTabIcon();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.showStickyHomeIcon) {
      uiGroup.addSetting((setting) => {
        setting.setName("Icon").setDesc("The icon to display in the sticky home icon").addButton((button) => {
          const iconName = this.plugin.settings.stickyIconName || "home";
          button.setButtonText("Change icon").setIcon(iconName).onClick(() => {
            const picker = new IconPicker(
              this.app,
              this.plugin.settings.stickyIconName,
              (icon) => {
                void (async () => {
                  this.plugin.settings.stickyIconName = icon;
                  await this.plugin.saveSettings();
                  this.plugin.stickyTabService.update();
                  this.display();
                })();
              }
            );
            picker.open();
          });
        });
      });
      uiGroup.addSetting((setting) => {
        setting.setName("Hide tab header").setDesc("Hide the sticky home tab header when it's open, using the sticky icon as the tab indicator").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.hideHomeTabHeader).onChange(async (value) => {
            this.plugin.settings.hideHomeTabHeader = value;
            await this.plugin.saveSettings();
            this.plugin.stickyTabService.updateTabHeaders();
          });
        });
      });
    }
    const mobileGroup = createSettingsGroup(containerEl, "Mobile", "home-base");
    mobileGroup.addSetting((setting) => {
      setting.setName("Separate mobile home base").setDesc("Use a different home base on mobile devices").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.separateMobile).onChange(async (value) => {
          this.plugin.settings.separateMobile = value;
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.separateMobile) {
      mobileGroup.addSetting((setting) => {
        setting.setName("Mobile home base").setDesc("What to open as your home base on mobile").addDropdown((dropdown) => {
          const mobileType = this.plugin.settings.mobileHomeBaseType || "File" /* File */;
          let pluginDisabled = false;
          for (const type of Object.values(HomeBaseType)) {
            if (!this.plugin.hasRequiredPlugin(type)) {
              if (type === mobileType) {
                pluginDisabled = true;
                dropdown.addOption(type, type);
              } else {
                dropdown.selectEl.createEl("option", {
                  text: type,
                  attr: { disabled: "true" }
                });
                continue;
              }
            } else {
              dropdown.addOption(type, type);
            }
          }
          dropdown.setValue(mobileType).onChange(async (value) => {
            this.plugin.settings.mobileHomeBaseType = value;
            await this.plugin.saveSettings();
            const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
            const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
            this.display();
            requestAnimationFrame(() => {
              if (scrollContainer) {
                scrollContainer.scrollTop = scrollTop;
              }
            });
          });
          if (pluginDisabled) {
            setting.descEl.createDiv({
              text: "The required plugin has not been enabled or configured for this type.",
              cls: "mod-warning"
            });
          }
        });
      });
      if (!UNCHANGEABLE_TYPES.includes(this.plugin.settings.mobileHomeBaseType)) {
        mobileGroup.addSetting((setting) => {
          const mobileType = this.plugin.settings.mobileHomeBaseType;
          let desc = "";
          let placeholder = "";
          if (mobileType === "File" /* File */) {
            desc = "The file to open as your home base on mobile";
            placeholder = "Path to home base file";
          } else if (mobileType === "Workspace" /* Workspace */) {
            desc = "The workspace to load as your home base on mobile";
            placeholder = "Workspace name";
          } else if (mobileType === "Random in folder" /* RandomFolder */) {
            desc = "The folder to pick a random file from on mobile";
            placeholder = "Folder path";
          } else if (mobileType === "Journal" /* Journal */) {
            desc = "The journal name for mobile";
            placeholder = "Journal name";
          }
          setting.setName(mobileType === "File" /* File */ ? "Mobile file" : mobileType === "Workspace" /* Workspace */ ? "Mobile workspace" : mobileType === "Random in folder" /* RandomFolder */ ? "Mobile folder" : mobileType === "Journal" /* Journal */ ? "Mobile journal" : "Mobile value").setDesc(desc).addText((text) => {
            if (mobileType === "File" /* File */) {
              new FilePathSuggest(this.app, text.inputEl);
            } else if (mobileType === "Workspace" /* Workspace */) {
              new WorkspaceSuggest(this.app, text.inputEl);
            } else if (mobileType === "Random in folder" /* RandomFolder */) {
              new FolderSuggest(this.app, text.inputEl);
            }
            text.setPlaceholder(placeholder).setValue(this.plugin.settings.mobileHomeBaseValue || "").onChange(async (value) => {
              this.plugin.settings.mobileHomeBaseValue = value;
              await this.plugin.saveSettings();
            });
          });
        });
      }
    }
    mobileGroup.addSetting((setting) => {
      setting.setName("Replace mobile new tab button").setDesc("Change the mobile new tab button to a home icon").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.replaceMobileNewTab).onChange(async (value) => {
          this.plugin.settings.replaceMobileNewTab = value;
          await this.plugin.saveSettings();
          this.plugin.updateMobileButton();
        });
      });
    });
    if (this.plugin.settings.useDifferentFileForNewTab) {
      mobileGroup.addSetting((setting) => {
        setting.setName("Separate mobile new tab").setDesc("Use a different new tab file on mobile devices").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.newTabSeparateMobile).onChange(async (value) => {
            this.plugin.settings.newTabSeparateMobile = value;
            await this.plugin.saveSettings();
            const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
            const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
            this.display();
            requestAnimationFrame(() => {
              if (scrollContainer) {
                scrollContainer.scrollTop = scrollTop;
              }
            });
          });
        });
      });
      if (this.plugin.settings.newTabSeparateMobile) {
        const mobileType = this.plugin.settings.mobileNewTabType || "File" /* File */;
        const mobileValue = this.plugin.settings.mobileNewTabValue || "";
        mobileGroup.addSetting((setting) => {
          setting.setName("Mobile new tab type").setDesc("What to open for new tabs on mobile").addDropdown((dropdown) => {
            let pluginDisabled = false;
            for (const type of Object.values(HomeBaseType)) {
              if (!this.plugin.hasRequiredPlugin(type)) {
                if (type === mobileType) {
                  pluginDisabled = true;
                  dropdown.addOption(type, type);
                } else {
                  dropdown.selectEl.createEl("option", {
                    text: type,
                    attr: { disabled: "true" }
                  });
                  continue;
                }
              } else {
                dropdown.addOption(type, type);
              }
            }
            dropdown.setValue(mobileType).onChange(async (value) => {
              this.plugin.settings.mobileNewTabType = value;
              await this.plugin.saveSettings();
              const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
              const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
              this.display();
              requestAnimationFrame(() => {
                if (scrollContainer) {
                  scrollContainer.scrollTop = scrollTop;
                }
              });
            });
            if (pluginDisabled) {
              setting.descEl.createDiv({
                text: "The required plugin has not been enabled or configured for this type.",
                cls: "mod-warning"
              });
            }
          });
        });
        if (!UNCHANGEABLE_TYPES.includes(mobileType)) {
          mobileGroup.addSetting((setting) => {
            let desc = "";
            let placeholder = "";
            if (mobileType === "File" /* File */) {
              desc = "The file to open for new tabs on mobile";
              placeholder = "Path to mobile new tab file";
            } else if (mobileType === "Workspace" /* Workspace */) {
              desc = "The workspace to load for new tabs on mobile";
              placeholder = "Workspace name";
            } else if (mobileType === "Random in folder" /* RandomFolder */) {
              desc = "The folder to pick a random file from for new tabs on mobile";
              placeholder = "Folder path";
            } else if (mobileType === "Journal" /* Journal */) {
              desc = "The journal name for new tabs on mobile";
              placeholder = "Journal name";
            }
            setting.setName(mobileType === "File" /* File */ ? "Mobile new tab file" : mobileType === "Workspace" /* Workspace */ ? "Mobile new tab workspace" : mobileType === "Random in folder" /* RandomFolder */ ? "Mobile new tab folder" : mobileType === "Journal" /* Journal */ ? "Mobile new tab journal" : "Mobile new tab value").setDesc(desc).addText((text) => {
              if (mobileType === "File" /* File */) {
                new FilePathSuggest(this.app, text.inputEl);
              } else if (mobileType === "Workspace" /* Workspace */) {
                new WorkspaceSuggest(this.app, text.inputEl);
              } else if (mobileType === "Random in folder" /* RandomFolder */) {
                new FolderSuggest(this.app, text.inputEl);
              }
              text.setPlaceholder(placeholder).setValue(mobileValue || "").onChange(async (value) => {
                this.plugin.settings.mobileNewTabValue = value;
                await this.plugin.saveSettings();
              });
            });
          });
        }
      }
    }
    const automationGroup = createSettingsGroup(containerEl, "Automation", "home-base");
    automationGroup.addSetting((setting) => {
      const commandId = this.plugin.settings.commandOnOpen;
      const command = commandId ? getCommandById(this.app, commandId) : void 0;
      const displayValue = command ? command.name : commandId;
      setting.setName("Command on open").setDesc("Run an Obsidian command when opening home base").addText((text) => {
        new CommandSuggest(this.app, text.inputEl);
        text.setPlaceholder("Search for a command...").setValue(displayValue || "").onChange(async (value) => {
          this.plugin.settings.commandOnOpen = value;
          await this.plugin.saveSettings();
        });
      }).addExtraButton((btn) => {
        btn.setIcon("x").setTooltip("Clear command").onClick(async () => {
          this.plugin.settings.commandOnOpen = "";
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    automationGroup.addSetting((setting) => {
      setting.setName("Wait for git sync").setDesc("Wait before creating periodic or journal notes to allow git sync to finish pulling existing notes. Only applies when a note doesn't already exist.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.waitForGitSync).onChange(async (value) => {
          this.plugin.settings.waitForGitSync = value;
          await this.plugin.saveSettings();
          this.display();
        });
      });
    });
    if (this.plugin.settings.waitForGitSync) {
      automationGroup.addSetting((setting) => {
        setting.setName("Git sync timeout (seconds)").setDesc("How long to wait for git sync to finish before creating a new note").addText((text) => {
          var _a;
          text.inputEl.type = "number";
          text.setPlaceholder("3").setValue(((_a = this.plugin.settings.gitSyncTimeout) == null ? void 0 : _a.toString()) || "3").onChange(async (value) => {
            const numValue = parseInt(value);
            if (!isNaN(numValue) && numValue >= 0) {
              this.plugin.settings.gitSyncTimeout = numValue;
              await this.plugin.saveSettings();
            }
          });
        });
      });
    }
  }
};

// src/services/home-service.ts
var import_obsidian8 = require("obsidian");

// src/utils/file-utils.ts
var import_obsidian6 = require("obsidian");
var SUPPORTED_EXTENSIONS2 = ["md", "mdx", "canvas", "base", "kanban"];
function isSupportedExtension(extension) {
  return SUPPORTED_EXTENSIONS2.includes(extension);
}
function isMarkdownLike(file) {
  const ext = file.extension.toLowerCase();
  return ext === "md" || ext === "mdx";
}
function getFileByPath(app, path) {
  const exactMatch = app.vault.getAbstractFileByPath(path);
  if (exactMatch instanceof import_obsidian6.TFile) {
    return exactMatch;
  }
  const file = app.metadataCache.getFirstLinkpathDest(path, "/");
  return file;
}
function trimFileExtension(path) {
  const lastDot = path.lastIndexOf(".");
  if (lastDot > 0) {
    const ext = path.slice(lastDot + 1).toLowerCase();
    if (SUPPORTED_EXTENSIONS2.includes(ext)) {
      return path.slice(0, lastDot);
    }
  }
  return path;
}
function pathsEqual(path1, path2) {
  const norm1 = trimFileExtension(path1).toLowerCase();
  const norm2 = trimFileExtension(path2).toLowerCase();
  return norm1 === norm2;
}
function leafHasFile(leaf, filePath) {
  var _a, _b;
  const state = (_b = (_a = leaf.view) == null ? void 0 : _a.getState) == null ? void 0 : _b.call(_a);
  const leafFile = state == null ? void 0 : state.file;
  if (!leafFile) return false;
  return pathsEqual(leafFile, filePath);
}

// src/utils/homebase-resolver.ts
var import_obsidian7 = require("obsidian");
var import_obsidian_daily_notes_interface = __toESM(require_main(), 1);
function randomFile(app, root) {
  let files = [];
  if (root) {
    const resolvedRoot = app.vault.getFolderByPath(root);
    if (resolvedRoot) {
      files = getFilesInFolder(resolvedRoot);
    } else {
      const allFiles = app.vault.getFiles();
      const pattern = root.toLowerCase();
      files = allFiles.filter((f) => {
        const fileName = f.name.toLowerCase();
        return fileName === pattern || fileName === pattern.replace(/\.md$/, "");
      });
    }
  } else {
    files = app.vault.getFiles();
  }
  files = files.filter((f) => ["md", "canvas", "base"].includes(f.extension));
  if (files.length) {
    const index = Math.floor(Math.random() * files.length);
    return files[index] || null;
  }
  return null;
}
function getFilesInFolder(folder) {
  let files = [];
  for (const item of folder.children) {
    if (item instanceof import_obsidian7.TFile) {
      files.push(item);
    } else if (item instanceof import_obsidian7.TFolder) {
      files.push(...getFilesInFolder(item));
    }
  }
  return files;
}
function trimFile(file) {
  if (!file) return "";
  return file.extension === "md" ? file.path.slice(0, -3) : file.path;
}
var PERIODIC_INFO = {
  ["Daily Note" /* DailyNote */]: {
    noun: "day",
    adjective: "daily",
    create: import_obsidian_daily_notes_interface.createDailyNote,
    get: import_obsidian_daily_notes_interface.getDailyNote,
    getAll: import_obsidian_daily_notes_interface.getAllDailyNotes
  },
  ["Weekly Note" /* WeeklyNote */]: {
    noun: "week",
    adjective: "weekly",
    create: import_obsidian_daily_notes_interface.createWeeklyNote,
    get: import_obsidian_daily_notes_interface.getWeeklyNote,
    getAll: import_obsidian_daily_notes_interface.getAllWeeklyNotes
  },
  ["Monthly Note" /* MonthlyNote */]: {
    noun: "month",
    adjective: "monthly",
    create: import_obsidian_daily_notes_interface.createMonthlyNote,
    get: import_obsidian_daily_notes_interface.getMonthlyNote,
    getAll: import_obsidian_daily_notes_interface.getAllMonthlyNotes
  },
  ["Quarterly Note" /* QuarterlyNote */]: {
    noun: "quarter",
    adjective: "quarterly",
    create: import_obsidian_daily_notes_interface.createQuarterlyNote,
    get: import_obsidian_daily_notes_interface.getQuarterlyNote,
    getAll: import_obsidian_daily_notes_interface.getAllQuarterlyNotes
  },
  ["Yearly Note" /* YearlyNote */]: {
    noun: "year",
    adjective: "yearly",
    create: import_obsidian_daily_notes_interface.createYearlyNote,
    get: import_obsidian_daily_notes_interface.getYearlyNote,
    getAll: import_obsidian_daily_notes_interface.getAllYearlyNotes
  },
  ["File" /* File */]: null,
  ["Random file" /* Random */]: null,
  ["Random in folder" /* RandomFolder */]: null,
  ["Workspace" /* Workspace */]: null,
  ["Graph view" /* Graph */]: null,
  ["Nothing" /* None */]: null,
  ["Journal" /* Journal */]: null,
  ["New note" /* NewNote */]: null
};
async function getPeriodicNote(kind, plugin) {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l;
  if (!window.moment) {
    return null;
  }
  const info = PERIODIC_INFO[kind];
  if (!info) {
    return null;
  }
  const date = (0, import_obsidian7.moment)().startOf(info.noun);
  const communityPlugins = ((_a = plugin.app.plugins) == null ? void 0 : _a.plugins) || {};
  const periodicNotesPlugin = communityPlugins["periodic-notes"];
  const isLegacy = !periodicNotesPlugin || (((_b = periodicNotesPlugin.manifest) == null ? void 0 : _b.version) || "0").startsWith("0");
  let note = null;
  if (isLegacy) {
    let all = info.getAll();
    note = info.get(date, all);
    if (!note && plugin.settings.waitForGitSync) {
      new import_obsidian7.Notice(`Home Base: Waiting for git sync (${plugin.settings.gitSyncTimeout}s)...`, 5e3);
      await delay(plugin.settings.gitSyncTimeout * 1e3);
      all = info.getAll();
      note = info.get(date, all);
    }
    if (!note) {
      note = await info.create(date);
    }
  } else {
    (_d = (_c = periodicNotesPlugin.cache) == null ? void 0 : _c.initialize) == null ? void 0 : _d.call(_c);
    note = (_f = (_e = periodicNotesPlugin.getPeriodicNote) == null ? void 0 : _e.call(periodicNotesPlugin, info.noun, date)) != null ? _f : null;
    if (!note && plugin.settings.waitForGitSync) {
      new import_obsidian7.Notice(`Home Base: Waiting for git sync (${plugin.settings.gitSyncTimeout}s)...`, 5e3);
      await delay(plugin.settings.gitSyncTimeout * 1e3);
      (_h = (_g = periodicNotesPlugin.cache) == null ? void 0 : _g.initialize) == null ? void 0 : _h.call(_g);
      note = (_j = (_i = periodicNotesPlugin.getPeriodicNote) == null ? void 0 : _i.call(periodicNotesPlugin, info.noun, date)) != null ? _j : null;
    }
    if (!note) {
      note = (_l = await ((_k = periodicNotesPlugin.createPeriodicNote) == null ? void 0 : _k.call(periodicNotesPlugin, info.noun, date))) != null ? _l : null;
    }
  }
  return note ? trimFile(note) : null;
}
async function getJournalNote(journalName, plugin) {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l;
  const communityPlugins = ((_a = plugin.app.plugins) == null ? void 0 : _a.plugins) || {};
  const journals = communityPlugins["journals"];
  if (!journals) return null;
  try {
    const journal = (_b = journals.getJournal) == null ? void 0 : _b.call(journals, journalName);
    if (!journal) return null;
    const origAutoCreate = (_d = (_c = journal.config) == null ? void 0 : _c.value) == null ? void 0 : _d.autoCreate;
    (_e = journals.reprocessNotes) == null ? void 0 : _e.call(journals);
    if ((_f = journal.config) == null ? void 0 : _f.value) {
      journal.config.value.autoCreate = true;
    }
    await ((_g = journal.autoCreate) == null ? void 0 : _g.call(journal));
    if ((_h = journal.config) == null ? void 0 : _h.value) {
      journal.config.value.autoCreate = origAutoCreate;
    }
    const today = (0, import_obsidian7.moment)().locale("custom-journal-locale").startOf("day");
    let note = (_i = journal.get) == null ? void 0 : _i.call(journal, today);
    if (!note && plugin.settings.waitForGitSync) {
      new import_obsidian7.Notice(`Home Base: Waiting for git sync (${plugin.settings.gitSyncTimeout}s)...`, 5e3);
      await delay(plugin.settings.gitSyncTimeout * 1e3);
      (_j = journals.reprocessNotes) == null ? void 0 : _j.call(journals);
      note = (_k = journal.get) == null ? void 0 : _k.call(journal, today);
    }
    if (!note) return null;
    const path = (_l = journal.getNotePath) == null ? void 0 : _l.call(journal, note);
    return path ? path.replace(/\.md$/, "") : null;
  } catch (e) {
    return null;
  }
}
function resolvePathSync(type, value, app) {
  switch (type) {
    case "File" /* File */:
      return value || null;
    case "Daily Note" /* DailyNote */:
    case "Weekly Note" /* WeeklyNote */:
    case "Monthly Note" /* MonthlyNote */:
    case "Quarterly Note" /* QuarterlyNote */:
    case "Yearly Note" /* YearlyNote */: {
      const info = PERIODIC_INFO[type];
      if (info) {
        const date = (0, import_obsidian7.moment)().startOf(info.noun);
        const all = info.getAll();
        const note = info.get(date, all);
        return note ? trimFile(note) : null;
      }
      return null;
    }
    default:
      return type === "Random in folder" /* RandomFolder */ || type === "New note" /* NewNote */ ? null : value || null;
  }
}
async function computeHomeBasePath(type, value, plugin) {
  switch (type) {
    case "File" /* File */:
      return value || null;
    case "Random file" /* Random */: {
      const file = randomFile(plugin.app);
      return file ? trimFile(file) : null;
    }
    case "Random in folder" /* RandomFolder */: {
      const file = randomFile(plugin.app, value);
      return file ? trimFile(file) : null;
    }
    case "Daily Note" /* DailyNote */:
    case "Weekly Note" /* WeeklyNote */:
    case "Monthly Note" /* MonthlyNote */:
    case "Quarterly Note" /* QuarterlyNote */:
    case "Yearly Note" /* YearlyNote */:
      return await getPeriodicNote(type, plugin);
    case "Journal" /* Journal */:
      return await getJournalNote(value, plugin);
    case "New note" /* NewNote */: {
      const fileManager = plugin.app.fileManager;
      if (fileManager.createNewFile) {
        const file = await fileManager.createNewFile(plugin.app.vault.getRoot(), value || "Untitled");
        return file ? trimFile(file) : null;
      }
      return null;
    }
    case "Workspace" /* Workspace */:
    case "Graph view" /* Graph */:
    case "Nothing" /* None */:
      return null;
    default:
      return value || null;
  }
}
function delay(ms) {
  return new Promise((resolve) => setTimeout(resolve, ms));
}

// src/services/home-service.ts
var LEAF_TYPES = ["markdown", "canvas", "bases", "kanban"];
function equalsCaseless(path1, path2) {
  const normalize = (p) => p.toLowerCase().replace(/\.md$/, "");
  return normalize(path1) === normalize(path2);
}
var HomeBaseService = class {
  constructor(plugin) {
    this.ghostLeaves = /* @__PURE__ */ new WeakSet();
    this.plugin = plugin;
    this.app = plugin.app;
  }
  /**
   * Open home base with a specific mode (for startup/manual opens)
   */
  async openHomeBaseWithMode(mode, runCommand = true) {
    var _a;
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    if (homeBaseSettings.type === "Workspace" /* Workspace */) {
      return this.openWorkspace(homeBaseSettings.value);
    }
    if (homeBaseSettings.type === "Graph view" /* Graph */) {
      return this.openGraph();
    }
    if (homeBaseSettings.type === "Nothing" /* None */) {
      if (runCommand) {
        this.runCommandOnOpen();
      }
      return true;
    }
    const resolvedPath = await computeHomeBasePath(
      homeBaseSettings.type,
      homeBaseSettings.value,
      this.plugin
    );
    if (!resolvedPath) {
      return false;
    }
    let file = this.app.metadataCache.getFirstLinkpathDest(resolvedPath, "/");
    if (!file) {
      file = getFileByPath(this.app, resolvedPath);
    }
    if (!file) {
      const untrimmedPath = resolvedPath.endsWith(".md") ? resolvedPath : `${resolvedPath}.md`;
      file = getFileByPath(this.app, untrimmedPath);
      if (!file && homeBaseSettings.type === "File" /* File */) {
        return false;
      }
    }
    if (!file) {
      return false;
    }
    if (mode === "replace-all") {
      await this.detachAllLeaves();
    } else if (mode === "replace-last") {
      const activeLeaf = (_a = this.app.workspace.getActiveViewOfType(import_obsidian8.View)) == null ? void 0 : _a.leaf;
      if (activeLeaf) {
        const viewState = activeLeaf.getViewState();
        if (viewState.pinned !== true) {
          void activeLeaf.detach();
          await new Promise((resolve) => setTimeout(resolve, 100));
        }
      }
    }
    const existingLeaf = this.findExistingHomeBaseLeaf(file);
    if (existingLeaf && mode !== "replace-all") {
      const viewState = existingLeaf.getViewState();
      if (viewState.pinned === true && this.plugin.settings.showStickyHomeIcon) {
      } else {
        this.app.workspace.setActiveLeaf(existingLeaf);
        await this.configureView(existingLeaf, file);
        if (runCommand) {
          this.runCommandOnOpen();
        }
        return true;
      }
    }
    const newLeaf = mode === "retain" ? this.app.workspace.getLeaf("tab") : this.app.workspace.getLeaf(false);
    if (!newLeaf) {
      return false;
    }
    await newLeaf.openFile(file);
    this.app.workspace.setActiveLeaf(newLeaf);
    await this.configureView(newLeaf, file);
    if (runCommand) {
      this.runCommandOnOpen();
    }
    return true;
  }
  /**
   * Open workspace
   */
  async openWorkspace(workspaceName) {
    var _a, _b, _c;
    const workspacePlugin = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b.workspaces;
    if (!(workspacePlugin == null ? void 0 : workspacePlugin.enabled) || !((_c = workspacePlugin.instance) == null ? void 0 : _c.loadWorkspace)) {
      return false;
    }
    workspacePlugin.instance.loadWorkspace(workspaceName);
    await new Promise((resolve) => setTimeout(resolve, 100));
    return true;
  }
  /**
   * Open graph view
   */
  async openGraph() {
    var _a, _b;
    await ((_b = (_a = this.app.commands) == null ? void 0 : _a.executeCommandById) == null ? void 0 : _b.call(_a, "graph:open"));
    return true;
  }
  /**
   * Open graph view in ghost tab
   * DEPRECATED: Graph view ghost tab detection is unreliable, so this is no longer used
   * Graph views now just open normally like random files
   */
  async openGraphInGhostTab(runCommand) {
    if (this.isSettingsModalOpen()) {
      return false;
    }
    let graphLeaves = this.app.workspace.getLeavesOfType("graph");
    if (graphLeaves.length === 0) {
      graphLeaves = [];
      this.app.workspace.iterateAllLeaves((leaf) => {
        try {
          const viewState = leaf.getViewState();
          if (viewState.type === "graph") {
            graphLeaves.push(leaf);
          }
        } catch (e) {
        }
      });
    }
    let ghostTab = null;
    if (graphLeaves.length === 1) {
      ghostTab = graphLeaves[0] || null;
    } else if (graphLeaves.length > 1) {
      for (const leaf of graphLeaves) {
        if (!leaf) continue;
        try {
          const viewState = leaf.getViewState();
          if (viewState.pinned === true) {
            ghostTab = leaf;
            break;
          }
        } catch (e) {
          continue;
        }
      }
      if (!ghostTab && graphLeaves[0]) {
        ghostTab = graphLeaves[0] || null;
      }
    }
    if (ghostTab) {
      const allGraphLeavesForCleanup = [];
      this.app.workspace.iterateAllLeaves((leaf) => {
        const viewState = leaf.getViewState();
        if (viewState.type === "graph") {
          allGraphLeavesForCleanup.push(leaf);
        }
      });
      const otherGraphLeaves = allGraphLeavesForCleanup.filter((leaf) => leaf !== ghostTab);
      for (const leaf of otherGraphLeaves) {
        void leaf.detach();
      }
      await new Promise((resolve) => setTimeout(resolve, 150));
      const remainingGraphLeaves = [];
      this.app.workspace.iterateAllLeaves((leaf) => {
        const viewState = leaf.getViewState();
        if (viewState.type === "graph") {
          remainingGraphLeaves.push(leaf);
        }
      });
      if (remainingGraphLeaves.length > 1) {
        for (const leaf of remainingGraphLeaves) {
          if (leaf !== ghostTab) {
            void leaf.detach();
          }
        }
        await new Promise((resolve) => setTimeout(resolve, 100));
      }
      const shouldFocus = !this.isSettingsModalOpen();
      this.app.workspace.setActiveLeaf(ghostTab, { focus: shouldFocus });
      if (runCommand) {
        this.runCommandOnOpen();
      }
      return true;
    }
    const allExistingGraphLeaves = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      const viewState = leaf.getViewState();
      if (viewState.type === "graph") {
        allExistingGraphLeaves.push(leaf);
      }
    });
    for (const leaf of allExistingGraphLeaves) {
      void leaf.detach();
    }
    await new Promise((resolve) => setTimeout(resolve, 100));
    let existingGraphLeaves = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      const viewState = leaf.getViewState();
      if (viewState.type === "graph") {
        existingGraphLeaves.push(leaf);
      }
    });
    let newGhostTab = null;
    if (existingGraphLeaves.length > 0) {
      newGhostTab = existingGraphLeaves[0] || null;
    } else {
      const newLeaf = this.app.workspace.getLeaf("tab");
      if (newLeaf) {
        await newLeaf.setViewState({
          type: "graph",
          state: {}
        });
        await new Promise((resolve) => setTimeout(resolve, 200));
        newGhostTab = newLeaf;
      } else {
        await this.openGraph();
        await new Promise((resolve) => setTimeout(resolve, 300));
        existingGraphLeaves = [];
        this.app.workspace.iterateAllLeaves((leaf) => {
          const viewState = leaf.getViewState();
          if (viewState.type === "graph") {
            existingGraphLeaves.push(leaf);
          }
        });
        if (existingGraphLeaves.length > 0) {
          newGhostTab = existingGraphLeaves[0] || null;
        }
      }
    }
    if (newGhostTab) {
      newGhostTab.setPinned(true);
      const allGraphLeaves = [];
      this.app.workspace.iterateAllLeaves((leaf) => {
        const viewState = leaf.getViewState();
        if (viewState.type === "graph") {
          allGraphLeaves.push(leaf);
        }
      });
      for (const leaf of allGraphLeaves) {
        if (leaf !== newGhostTab) {
          void leaf.detach();
        }
      }
      await new Promise((resolve) => setTimeout(resolve, 100));
      const shouldFocus = !this.isSettingsModalOpen();
      this.app.workspace.setActiveLeaf(newGhostTab, { focus: shouldFocus });
      if (runCommand) {
        this.runCommandOnOpen();
      }
      return true;
    }
    return false;
  }
  /**
   * Open the home base file
   * @param options Options for opening
   */
  async openHomeBase(options = {}) {
    const { runCommand = true } = options;
    const mode = this.plugin.settings.manualOpenMode;
    return this.openHomeBaseWithMode(mode, runCommand);
  }
  /**
   * Open home base in an empty leaf (for new tab replacement)
   */
  async openInLeaf(leaf) {
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    return this.openInLeafWithSettings(leaf, homeBaseSettings);
  }
  /**
   * Open a file in an empty leaf with custom settings
   * @param leaf The leaf to open the file in
   * @param settings Settings object with type and value
   * @param isNewTab Whether this is for new tab replacement (skips pinning/ghost tab logic)
   */
  async openInLeafWithSettings(leaf, settings, isNewTab = false) {
    if (settings.type === "Workspace" /* Workspace */) {
      await this.openWorkspace(settings.value);
      return true;
    }
    if (settings.type === "Graph view" /* Graph */) {
      await this.openGraph();
      return true;
    }
    if (settings.type === "Nothing" /* None */) {
      this.runCommandOnOpen();
      return true;
    }
    const resolvedPath = await computeHomeBasePath(
      settings.type,
      settings.value,
      this.plugin
    );
    if (!resolvedPath) {
      console.warn("[Home Base] Could not resolve path for new tab:", settings.type, settings.value);
      return false;
    }
    let file = this.app.metadataCache.getFirstLinkpathDest(resolvedPath, "/");
    if (!file) {
      file = getFileByPath(this.app, resolvedPath);
    }
    if (!file && !resolvedPath.endsWith(".md") && !resolvedPath.endsWith(".canvas") && !resolvedPath.endsWith(".base")) {
      const untrimmedPath = `${resolvedPath}.md`;
      file = getFileByPath(this.app, untrimmedPath);
    }
    if (!file) {
      console.warn("[Home Base] File not found for new tab:", resolvedPath);
      return false;
    }
    if (isNewTab) {
      console.debug("[Home Base] openInLeafWithSettings: isNewTab=true, bypassing ghost tab logic", {
        file: file.path,
        settings
      });
      await leaf.openFile(file);
      await this.configureView(leaf, file);
      this.runCommandOnOpen();
      return true;
    }
    const isTrulyEmpty = !leaf.view || leaf.view.getViewType() === "empty";
    if (this.plugin.settings.showStickyHomeIcon && isTrulyEmpty) {
      const isRandom = settings.type === "Random file" /* Random */ || settings.type === "Random in folder" /* RandomFolder */ || settings.type === "Daily Note" /* DailyNote */ || settings.type === "Weekly Note" /* WeeklyNote */ || settings.type === "Monthly Note" /* MonthlyNote */ || settings.type === "Yearly Note" /* YearlyNote */;
      const ghostTab = this.findGhostTab(file, isRandom);
      if (ghostTab) {
        void leaf.detach();
        this.app.workspace.setActiveLeaf(ghostTab);
        await this.configureView(ghostTab, file);
        this.runCommandOnOpen();
        return true;
      }
      this.ghostLeaves.add(leaf);
      if (!isRandom) {
        leaf.setPinned(true);
      }
    }
    await leaf.openFile(file);
    await this.configureView(leaf, file);
    this.runCommandOnOpen();
    return true;
  }
  /**
   * Configure the view mode for a leaf
   */
  async configureView(leaf, file) {
    const settings = this.plugin.settings;
    const view = leaf.view;
    if (!isMarkdownLike(file) || !(view instanceof import_obsidian8.MarkdownView)) {
      return;
    }
    const state = view.getState();
    if (settings.revertView) {
      this.lastView = new WeakRef(view);
    }
    if (settings.autoScroll) {
      const count = view.editor.lineCount();
      if (state.mode === "preview") {
        view.previewMode.applyScroll(count - 4);
      } else {
        view.editor.setCursor(count);
        view.editor.focus();
      }
    }
    if (settings.openViewMode !== "default") {
      switch (settings.openViewMode) {
        case "preview":
          state.mode = "preview";
          break;
        case "source":
          state.mode = "source";
          state.source = true;
          break;
        case "live":
          state.mode = "source";
          state.source = false;
          break;
      }
      await leaf.setViewState({
        type: "markdown",
        state
      });
    }
  }
  /**
   * Revert view to default when navigating away from home base
   */
  async revertView() {
    const settings = this.plugin.settings;
    if (!settings.revertView || !this.lastView || settings.openViewMode === "default") {
      return;
    }
    const view = this.lastView.deref();
    if (!view) {
      this.lastView = void 0;
      return;
    }
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const resolvedPath = await computeHomeBasePath(
      homeBaseSettings.type,
      homeBaseSettings.value,
      this.plugin
    );
    if (!resolvedPath) {
      this.lastView = void 0;
      return;
    }
    const currentFile = view.file;
    if (currentFile && equalsCaseless(trimFile(currentFile), resolvedPath)) {
      return;
    }
    const state = view.getState();
    const config = this.app.vault.config;
    const mode = (config == null ? void 0 : config.defaultViewMode) || "source";
    const source = (config == null ? void 0 : config.livePreview) !== void 0 ? !config.livePreview : false;
    if (view.leaf.getViewState().type === "markdown" && (mode !== state.mode || source !== state.source)) {
      state.mode = mode;
      state.source = source;
      await view.leaf.setViewState({ type: "markdown", state, active: true });
    }
    this.lastView = void 0;
  }
  /**
   * Run the configured command after opening
   */
  runCommandOnOpen() {
    const commandId = this.plugin.settings.commandOnOpen;
    if (commandId) {
      setTimeout(() => {
        executeCommand(this.app, commandId);
      }, 100);
    }
  }
  /**
   * Find an existing leaf that has the home base file open
   */
  findExistingHomeBaseLeaf(file) {
    if (!file) return null;
    const homeBasePath = file.path;
    const leaves = LEAF_TYPES.flatMap(
      (type) => this.app.workspace.getLeavesOfType(type)
    );
    for (const leaf of leaves) {
      if (leafHasFile(leaf, homeBasePath)) {
        return leaf;
      }
    }
    return null;
  }
  /**
   * Check if a leaf is a ghost tab
   * Ghost tab is identified by being in our internal ghostLeaves set
   * Only tabs specifically created for the sticky icon are ghost tabs
   */
  isGhostLeaf(leaf) {
    return this.ghostLeaves.has(leaf);
  }
  /**
   * Find the ghost tab (the one opened via sticky icon)
   * Ghost tab is identified by being in our internal ghostLeaves set
   * Only returns existing ghost tabs, doesn't create new ones
   */
  findGhostTab(file, isRandom = false) {
    if (!file) return null;
    const homeBasePath = file.path;
    const leaves = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      var _a;
      const viewType = (_a = leaf.view) == null ? void 0 : _a.getViewType();
      if (viewType && LEAF_TYPES.includes(viewType)) {
        leaves.push(leaf);
      }
    });
    for (const leaf of leaves) {
      if (this.ghostLeaves.has(leaf) && leafHasFile(leaf, homeBasePath)) {
        return leaf;
      }
    }
    return null;
  }
  /**
   * Open home base in ghost tab (for sticky icon)
   * Ghost tab is pinned and hidden (if setting enabled)
   * Only one ghost tab should exist at a time
   * Works for file-based types and Graph view
   * Note: Random types don't pin (since file changes each time)
   * Note: Workspace and None don't work (workspace changes layout, None doesn't open anything)
   */
  async openHomeBaseInGhostTab(options = {}) {
    const { runCommand = true } = options;
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    if (homeBaseSettings.type === "Workspace" /* Workspace */ || homeBaseSettings.type === "Nothing" /* None */) {
      return this.openHomeBaseWithMode("retain", runCommand);
    }
    if (homeBaseSettings.type === "Graph view" /* Graph */) {
      return this.openGraph();
    }
    const isRandom = homeBaseSettings.type === "Random file" /* Random */ || homeBaseSettings.type === "Random in folder" /* RandomFolder */ || homeBaseSettings.type === "Daily Note" /* DailyNote */ || homeBaseSettings.type === "Weekly Note" /* WeeklyNote */ || homeBaseSettings.type === "Monthly Note" /* MonthlyNote */ || homeBaseSettings.type === "Yearly Note" /* YearlyNote */;
    if (this.isSettingsModalOpen()) {
      return false;
    }
    const resolvedPath = await computeHomeBasePath(
      homeBaseSettings.type,
      homeBaseSettings.value,
      this.plugin
    );
    if (!resolvedPath) {
      return false;
    }
    let file = this.app.metadataCache.getFirstLinkpathDest(resolvedPath, "/");
    if (!file) {
      file = getFileByPath(this.app, resolvedPath);
    }
    if (!file && !resolvedPath.endsWith(".md") && !resolvedPath.endsWith(".canvas") && !resolvedPath.endsWith(".base")) {
      const untrimmedPath = `${resolvedPath}.md`;
      file = getFileByPath(this.app, untrimmedPath);
    }
    if (!file) {
      return false;
    }
    const ghostTab = this.findGhostTab(file, isRandom);
    console.debug("[Home Base] openHomeBaseInGhostTab:", {
      file: file.path,
      ghostTabFound: !!ghostTab,
      isRandom,
      zenMode: document.body.classList.contains("zenmode-active")
    });
    if (ghostTab) {
      const shouldFocus2 = !this.isSettingsModalOpen();
      this.app.workspace.setActiveLeaf(ghostTab, { focus: shouldFocus2 });
      await this.configureView(ghostTab, file);
      if (runCommand) {
        this.runCommandOnOpen();
      }
      return true;
    }
    const newGhostTab = this.app.workspace.getLeaf("tab");
    this.ghostLeaves.add(newGhostTab);
    await newGhostTab.openFile(file);
    if (!isRandom) {
      newGhostTab.setPinned(true);
    }
    setTimeout(() => {
      this.plugin.stickyTabService.updateTabHeaders();
    }, 50);
    const shouldFocus = !this.isSettingsModalOpen();
    this.app.workspace.setActiveLeaf(newGhostTab, { focus: shouldFocus });
    await this.configureView(newGhostTab, file);
    if (runCommand) {
      this.runCommandOnOpen();
    }
    return true;
  }
  /**
   * Find an empty leaf
   */
  findEmptyLeaf() {
    const leaves = this.app.workspace.getLeavesOfType("empty");
    return leaves[0] || null;
  }
  /**
   * Get the home base file
   */
  getHomeBaseFile() {
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const path = resolvePathSync(homeBaseSettings.type, homeBaseSettings.value, this.app);
    if (!path) return null;
    return getFileByPath(this.app, path);
  }
  /**
   * Fast detach all leaves using changeLayout (like homepage plugin)
   * This is much faster than iterating and detaching leaves individually
   */
  async detachAllLeaves() {
    var _a, _b;
    const layout = this.app.workspace.getLayout();
    layout.main = {
      "id": "5324373015726ba8",
      "type": "split",
      "children": [{
        "id": "4509724f8bf84da7",
        "type": "tabs",
        "children": [{
          "id": "e7a7b303c61786dc",
          "type": "leaf",
          "state": { "type": "empty", "state": {}, "icon": "lucide-file", "title": "New tab" }
        }]
      }],
      "direction": "vertical"
    };
    layout.active = "e7a7b303c61786dc";
    await this.app.workspace.changeLayout(layout);
    if (import_obsidian8.Platform.isMobile) {
      (_b = (_a = this.app.workspace.rightSplit) == null ? void 0 : _a.updateInfo) == null ? void 0 : _b.call(_a);
    }
  }
  /**
   * Close all leaves in the main workspace except the specified one
   * Simplified approach: iterate all leaves and close those in main workspace
   */
  async closeAllLeavesExcept(exceptLeaf) {
    const leavesToClose = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      if (leaf === exceptLeaf) {
        return;
      }
      const view = leaf.view;
      let container = null;
      if (view) {
        const viewAny = view;
        container = viewAny.containerEl || null;
      }
      if (!container) {
        const leafAny = leaf;
        container = leafAny.containerEl || null;
      }
      if (container) {
        const rootWorkspace = container.closest(".workspace-split.mod-vertical.mod-root");
        const leftSidebar = container.closest(".workspace-split.mod-left-split");
        const rightSidebar = container.closest(".workspace-split.mod-right-split");
        if (rootWorkspace && !leftSidebar && !rightSidebar) {
          leavesToClose.push(leaf);
        }
      } else {
        if (exceptLeaf === null) {
          try {
            const viewState = leaf.getViewState();
            if (viewState) {
              leavesToClose.push(leaf);
            }
          } catch (e) {
          }
        }
      }
    });
    for (const leaf of leavesToClose) {
      void leaf.detach();
    }
    await new Promise((resolve) => setTimeout(resolve, 200));
  }
  /**
   * Check if the focused tab is the home base
   */
  isFocusedOnHomeBase() {
    const activeLeaf = this.app.workspace.getMostRecentLeaf();
    if (!activeLeaf) return false;
    if (this.ghostLeaves.has(activeLeaf)) {
      return true;
    }
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) return false;
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const homeBasePath = resolvePathSync(homeBaseSettings.type, homeBaseSettings.value, this.app);
    if (homeBasePath) {
      return activeFile.path === homeBasePath || pathsEqual(activeFile.path, homeBasePath);
    }
    return false;
  }
  /**
   * Check if home base file exists
   */
  homeBaseExists() {
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const path = resolvePathSync(homeBaseSettings.type, homeBaseSettings.value, this.app);
    if (!path) return false;
    return getFileByPath(this.app, path) !== null;
  }
  /**
   * Get the native Obsidian open behavior setting (from app.json)
   * @returns The native setting value or undefined if not supported/found
   */
  getNativeOpenBehavior() {
    const config = this.app.vault.config;
    if (!config) return void 0;
    return config.openBehavior;
  }
  /**
   * Check if the settings modal is currently open
   */
  isSettingsModalOpen() {
    const settingsModal = document.querySelector(".modal-container.mod-settings") || document.querySelector(".modal.mod-settings") || document.querySelector(".vertical-tab-content");
    if (!settingsModal) {
      const allModals = document.querySelectorAll(".modal-container");
      for (const modal of Array.from(allModals)) {
        if (modal.querySelector(".vertical-tab-content") || modal.querySelector(".settings-content") || modal.classList.contains("mod-settings")) {
          return true;
        }
      }
    }
    return settingsModal !== null;
  }
  /**
   * Set the active file as home base
   */
  async setActiveFileAsHomeBase() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) return false;
    if (!isSupportedExtension(activeFile.extension.toLowerCase())) {
      return false;
    }
    if (this.plugin.settings.separateMobile && import_obsidian8.Platform.isMobile) {
      this.plugin.settings.mobileHomeBaseType = "File" /* File */;
      this.plugin.settings.mobileHomeBaseValue = activeFile.path;
    } else {
      this.plugin.settings.homeBaseType = "File" /* File */;
      this.plugin.settings.homeBaseValue = activeFile.path;
    }
    await this.plugin.saveSettings();
    return true;
  }
  /**
   * Check if active file can be set as home base
   */
  canSetActiveFileAsHomeBase() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) return false;
    return isSupportedExtension(activeFile.extension.toLowerCase());
  }
  /**
   * Restore ghost leaves from previous session
   * This identifies pinned home base tabs that should be treated as ghost leaves
   */
  restoreGhostLeaves() {
    if (!this.plugin.settings.showStickyHomeIcon) {
      return;
    }
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const homeBasePath = resolvePathSync(homeBaseSettings.type, homeBaseSettings.value, this.app);
    if (!homeBasePath) return;
    const isRandom = homeBaseSettings.type === "Random file" /* Random */ || homeBaseSettings.type === "Random in folder" /* RandomFolder */ || homeBaseSettings.type === "Daily Note" /* DailyNote */ || homeBaseSettings.type === "Weekly Note" /* WeeklyNote */ || homeBaseSettings.type === "Monthly Note" /* MonthlyNote */ || homeBaseSettings.type === "Yearly Note" /* YearlyNote */;
    if (isRandom) return;
    const leaves = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      var _a;
      const viewType = (_a = leaf.view) == null ? void 0 : _a.getViewType();
      if (viewType && LEAF_TYPES.includes(viewType)) {
        leaves.push(leaf);
      }
    });
    for (const leaf of leaves) {
      if (leafHasFile(leaf, homeBasePath)) {
        const viewState = leaf.getViewState();
        if (viewState.pinned === true && !this.ghostLeaves.has(leaf)) {
          this.ghostLeaves.add(leaf);
          break;
        }
      }
    }
  }
};

// src/services/new-tab-service.ts
var import_obsidian9 = require("obsidian");
var NewTabService = class {
  constructor(plugin) {
    this.existingLeaves = /* @__PURE__ */ new WeakSet();
    this.isStartup = true;
    this.startupCompleted = false;
    this.plugin = plugin;
    this.app = plugin.app;
  }
  /**
   * Track all existing leaves (for new tab detection)
   * This must be called even when startup is handled elsewhere
   */
  trackExistingLeaves() {
    this.app.workspace.iterateAllLeaves((leaf) => {
      this.existingLeaves.add(leaf);
    });
    this.startupCompleted = true;
    this.isStartup = false;
  }
  /**
   * Initialize the service - called when layout is ready
   */
  initialize() {
    this.trackExistingLeaves();
    void this.handleStartup();
  }
  /**
   * Handle app startup - open home base if needed
   * Only called on actual app startup, not plugin reloads
   */
  async handleStartup() {
    const settings = this.plugin.settings;
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    if (!settings.openOnStartup || !homeBaseSettings.value && homeBaseSettings.type === "File" /* File */) {
      this.startupCompleted = true;
      this.isStartup = false;
      return;
    }
    if (await this.hasUrlParams()) {
      this.startupCompleted = true;
      this.isStartup = false;
      return;
    }
    await new Promise((resolve) => setTimeout(resolve, 500));
    if (settings.openMode === "replace-all") {
      let exceptLeaf = null;
      if (!settings.hideReleaseNotes) {
        const allLeaves = this.app.workspace.getLeavesOfType("markdown");
        for (const leaf of allLeaves) {
          const view = leaf.view;
          const markdownView = view;
          if (markdownView.file) {
            const file = markdownView.file;
            const configDir = this.app.vault.configDir;
            if (file.path.includes("release") || file.path.includes(configDir)) {
              const container = markdownView.containerEl;
              if (container && container.querySelector(".release-notes")) {
                exceptLeaf = leaf;
                break;
              }
            }
          }
        }
      }
      await this.plugin.homeService.closeAllLeavesExcept(exceptLeaf);
      await new Promise((resolve) => setTimeout(resolve, 200));
    }
    if (settings.showStickyHomeIcon) {
      await this.plugin.homeService.openHomeBaseInGhostTab({
        runCommand: true
      });
    } else {
      await this.plugin.homeService.openHomeBase({
        replaceActiveLeaf: false,
        runCommand: true
      });
    }
    this.startupCompleted = true;
    this.isStartup = false;
  }
  /**
   * Check if the settings modal is currently open
   */
  isSettingsModalOpen() {
    const settingsModal = document.querySelector(".modal-container.mod-settings") || document.querySelector(".modal.mod-settings") || document.querySelector(".vertical-tab-content");
    if (!settingsModal) {
      const allModals = document.querySelectorAll(".modal-container");
      for (const modal of Array.from(allModals)) {
        if (modal.querySelector(".vertical-tab-content") || modal.querySelector(".settings-content") || modal.classList.contains("mod-settings")) {
          return true;
        }
      }
    }
    return settingsModal !== null;
  }
  /**
   * Check for URL parameters that indicate Obsidian was opened via a link
   * Based on obsidian-homepage implementation
   */
  async hasUrlParams() {
    var _a;
    const windowAny = window;
    const capacitor = windowAny.Capacitor;
    if ((_a = capacitor == null ? void 0 : capacitor.Plugins) == null ? void 0 : _a.App) {
      try {
        const launchUrl = await capacitor.Plugins.App.getLaunchUrl();
        if (launchUrl == null ? void 0 : launchUrl.url) {
          const url = new URL(launchUrl.url);
          const params = Array.from(url.searchParams.keys());
          const action = url.hostname;
          if (["open", "advanced-uri"].includes(action) && ["file", "filepath", "workspace"].some((e) => params.includes(e))) {
            return true;
          }
        }
      } catch (e) {
      }
    }
    const obsAct = windowAny.OBS_ACT;
    if (obsAct) {
      const params = Object.keys(obsAct);
      const action = obsAct.action;
      if (action && ["open", "advanced-uri"].includes(action) && ["file", "filepath", "workspace"].some((e) => params.includes(e))) {
        return true;
      }
    }
    return false;
  }
  /**
   * Handle layout change event - check for new empty tabs
   * Based on new-tab-default-page implementation
   */
  handleLayoutChange() {
    if (this.isStartup || !this.startupCompleted) {
      return;
    }
    this.app.workspace.iterateAllLeaves((leaf) => {
      if (this.existingLeaves.has(leaf)) {
        return;
      }
      this.existingLeaves.add(leaf);
      if (!this.isEmptyTab(leaf)) {
        return;
      }
      const isOnlyTab = this.isOnlyTab(leaf);
      if (isOnlyTab && this.plugin.settings.openWhenAllTabsClosed === true) {
        void this.replaceEmptyTab(leaf, true);
        return;
      }
      if (this.plugin.settings.replaceNewTab !== true) {
        return;
      }
      if (this.plugin.settings.replaceNewTab !== true) {
        return;
      }
      if (this.plugin.settings.newTabMode === "only-when-empty") {
        if (!isOnlyTab) {
          return;
        }
      }
      void this.replaceEmptyTab(leaf, false);
    });
  }
  /**
   * Check if a leaf is an empty tab
   * IMPORTANT: Only returns true if the leaf is truly empty (no file opened)
   * If a file is already opened in the leaf, it's not empty and should NOT be replaced
   */
  isEmptyTab(leaf) {
    if (!leaf.view) return true;
    if (leaf.view.getViewType() !== "empty") {
      return false;
    }
    const viewState = leaf.getViewState();
    if (viewState && viewState.file) {
      return false;
    }
    return true;
  }
  /**
   * Check if this is the only tab in the main workspace
   * Only counts root leaves (main workspace tabs), not sidebar tabs
   * Based on obsidian-disable-tabs pattern using iterateRootLeaves
   */
  isOnlyTab(leaf) {
    let tabCount = 0;
    this.app.workspace.iterateRootLeaves((l) => {
      tabCount++;
    });
    const result = tabCount === 1;
    console.debug("[Home Base] isOnlyTab:", {
      leaf,
      tabCount,
      isOnlyTab: result
    });
    return result;
  }
  /**
   * Replace an empty tab with the home base or new tab file
   * @param leaf The leaf to replace
   * @param isAllTabsClosed Whether this is triggered by "all tabs closed" (true) or "new tab replacement" (false)
   */
  async replaceEmptyTab(leaf, isAllTabsClosed = false) {
    if (!isAllTabsClosed) {
      if (this.plugin.settings.replaceNewTab !== true) {
        console.debug("[Home Base] replaceEmptyTab: replaceNewTab is not true, aborting");
        return;
      }
    }
    await new Promise((resolve) => setTimeout(resolve, 50));
    if (!isAllTabsClosed) {
      if (this.plugin.settings.replaceNewTab !== true) {
        console.debug("[Home Base] replaceEmptyTab: replaceNewTab changed during delay, aborting");
        return;
      }
    } else {
      if (this.plugin.settings.openWhenAllTabsClosed !== true) {
        console.debug("[Home Base] replaceEmptyTab: openWhenAllTabsClosed changed during delay, aborting");
        return;
      }
    }
    if (!this.isEmptyTab(leaf)) {
      console.debug("[Home Base] replaceEmptyTab: Tab is no longer empty, skipping");
      return;
    }
    const settings = isAllTabsClosed ? this.plugin.getHomeBaseSettings() : this.plugin.getNewTabSettings();
    console.debug("[Home Base] replaceEmptyTab:", {
      leaf,
      isAllTabsClosed,
      settings,
      replaceNewTab: this.plugin.settings.replaceNewTab,
      newTabMode: this.plugin.settings.newTabMode,
      useDifferentFileForNewTab: this.plugin.settings.useDifferentFileForNewTab
    });
    const success = await this.plugin.homeService.openInLeafWithSettings(leaf, settings, true);
    if (!success) {
      console.warn("[Home Base] Failed to open file:", settings);
    } else {
      console.debug("[Home Base] replaceEmptyTab: Successfully opened file");
    }
  }
  /**
   * Force check for empty workspace and open home base
   */
  async openIfEmpty() {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian9.View);
    const activeLeaf = activeView == null ? void 0 : activeView.leaf;
    if (!activeLeaf) return;
    if (this.isEmptyTab(activeLeaf) && this.isOnlyTab(activeLeaf)) {
      await this.plugin.homeService.openInLeaf(activeLeaf);
    }
  }
};

// src/services/sticky-tab-service.ts
var import_obsidian10 = require("obsidian");
var STICKY_ICON_CLASS = "home-base-sticky-icon";
var STICKY_ICON_ACTIVE_CLASS = "home-base-sticky-icon-active";
var StickyTabService = class {
  constructor(plugin) {
    this.stickyIconEl = null;
    this.layoutChangeHandler = null;
    this.tabHeaderUpdateTimeout = null;
    this.sidebarObserver = null;
    this.tabHeaderObserver = null;
    this.plugin = plugin;
  }
  /**
   * Update the sticky tab icon based on settings
   */
  update() {
    if (import_obsidian10.Platform.isMobile) {
      this.remove();
      this.updateTabHeaders();
      this.updateWorkspaceClass(false);
      return;
    }
    if (this.plugin.settings.showStickyHomeIcon) {
      if (this.stickyIconEl) {
        const iconName = this.plugin.settings.stickyIconName || "home";
        (0, import_obsidian10.setIcon)(this.stickyIconEl, iconName);
      } else {
        this.create();
      }
      this.updateWorkspaceClass(true);
    } else {
      this.remove();
      this.updateTabHeaders();
      this.updateWorkspaceClass(false);
    }
  }
  /**
   * Add/remove CSS class on all workspaces to conditionally apply styles
   */
  updateWorkspaceClass(enabled) {
    const applyToDocument = (doc) => {
      const mainWorkspace = doc.querySelector(".workspace-split.mod-vertical.mod-root");
      if (!mainWorkspace) return;
      if (enabled) {
        mainWorkspace.classList.add("home-base-sticky-icon-enabled");
      } else {
        mainWorkspace.classList.remove("home-base-sticky-icon-enabled");
      }
    };
    applyToDocument(document);
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      var _a, _b;
      const doc = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.ownerDocument;
      if (doc && doc !== document) {
        applyToDocument(doc);
      }
    });
  }
  /**
   * Create the sticky home icon
   */
  create() {
    this.remove();
    this.stickyIconEl = document.createElement("div");
    this.stickyIconEl.className = `${STICKY_ICON_CLASS} clickable-icon`;
    this.stickyIconEl.setAttribute("aria-label", "Open home base");
    this.stickyIconEl.setAttribute("data-tooltip-position", "bottom");
    const iconName = this.plugin.settings.stickyIconName || "home";
    (0, import_obsidian10.setIcon)(this.stickyIconEl, iconName);
    this.stickyIconEl.addEventListener("click", (e) => {
      e.preventDefault();
      e.stopPropagation();
      void this.plugin.homeService.openHomeBaseInGhostTab({
        runCommand: true
      }).then(() => {
        setTimeout(() => {
          this.updateTabHeaders();
        }, 150);
      });
    });
    this.stickyIconEl.addEventListener("contextmenu", (e) => {
      e.preventDefault();
      e.stopPropagation();
      const menu = new import_obsidian10.Menu();
      menu.addItem((item) => {
        item.setTitle("Close home base").setIcon("x").onClick(() => {
          void this.closeHomeBase(true);
        });
      });
      menu.addItem((item) => {
        item.setTitle("Change icon").setIcon("lucide-image-plus").onClick(() => {
          const picker = new IconPicker(
            this.plugin.app,
            this.plugin.settings.stickyIconName,
            (icon) => {
              void (async () => {
                this.plugin.settings.stickyIconName = icon;
                await this.plugin.saveSettings();
                if (this.stickyIconEl) {
                  (0, import_obsidian10.setIcon)(this.stickyIconEl, icon || "home");
                }
              })();
            }
          );
          picker.open();
        });
      });
      menu.showAtMouseEvent(e);
    });
    const ensureIconInPlace = () => {
      if (!this.stickyIconEl) return;
      const mainWorkspace2 = document.querySelector(".workspace-split.mod-vertical.mod-root");
      if (!mainWorkspace2) return;
      const tabHeaderContainerInner = mainWorkspace2.querySelector(".workspace-tab-header-container-inner");
      if (!tabHeaderContainerInner) return;
      const allIcons = tabHeaderContainerInner.querySelectorAll(`.${STICKY_ICON_CLASS}`);
      allIcons.forEach((icon) => {
        if (icon !== this.stickyIconEl) {
          icon.remove();
        }
      });
      if (tabHeaderContainerInner.contains(this.stickyIconEl)) {
        return;
      }
      tabHeaderContainerInner.insertBefore(this.stickyIconEl, tabHeaderContainerInner.firstChild);
      this.updateActiveState();
      this.updateTabHeaders();
      this.updateWorkspaceClass(true);
      this.updateIconPositionForSidebar();
      this.watchSidebarState();
    };
    ensureIconInPlace();
    const checkInterval = setInterval(() => {
      if (!this.stickyIconEl || !this.plugin.settings.showStickyHomeIcon) {
        clearInterval(checkInterval);
        return;
      }
      ensureIconInPlace();
    }, 100);
    this.stickyIconEl._checkInterval = checkInterval;
    if (!this.layoutChangeHandler) {
      this.layoutChangeHandler = () => {
        if (this.stickyIconEl && this.plugin.settings.showStickyHomeIcon) {
          ensureIconInPlace();
          this.updateTabHeaders();
        }
      };
      this.plugin.registerEvent(
        this.plugin.app.workspace.on("layout-change", this.layoutChangeHandler)
      );
    }
    const mainWorkspace = document.querySelector(".workspace-split.mod-vertical.mod-root");
    if (mainWorkspace) {
      const containerObserver = new MutationObserver(() => {
        if (!this.stickyIconEl || !this.plugin.settings.showStickyHomeIcon) return;
        const tabHeaderContainerInner = mainWorkspace.querySelector(".workspace-tab-header-container-inner");
        if (tabHeaderContainerInner) {
          const allIcons = tabHeaderContainerInner.querySelectorAll(`.${STICKY_ICON_CLASS}`);
          allIcons.forEach((icon) => {
            if (icon !== this.stickyIconEl) {
              icon.remove();
            }
          });
          if (!tabHeaderContainerInner.contains(this.stickyIconEl)) {
            tabHeaderContainerInner.insertBefore(this.stickyIconEl, tabHeaderContainerInner.firstChild);
            this.updateActiveState();
          }
        }
      });
      containerObserver.observe(mainWorkspace, {
        childList: true,
        subtree: true
        // Watch subtree to catch tab container recreation
      });
      this.stickyIconEl._containerObserver = containerObserver;
    }
    this.setupTabHeaderObserver();
  }
  /**
   * Set up MutationObserver to watch for tab header changes and remove ghost tabs immediately
   * This prevents the flash when tabs are opened/closed
   */
  setupTabHeaderObserver() {
    if (this.tabHeaderObserver) {
      return;
    }
    this.tabHeaderObserver = new MutationObserver((mutations) => {
      if (!this.plugin.settings.showStickyHomeIcon || !this.plugin.settings.hideHomeTabHeader) {
        return;
      }
      let hasNewHeaders = false;
      for (const mutation of mutations) {
        if (mutation.type === "childList" && mutation.addedNodes.length > 0) {
          for (const node of Array.from(mutation.addedNodes)) {
            if (node instanceof HTMLElement && node.classList.contains("workspace-tab-header")) {
              hasNewHeaders = true;
              break;
            }
          }
        }
        if (hasNewHeaders) break;
      }
      if (hasNewHeaders) {
        this.plugin.app.workspace.iterateAllLeaves((leaf) => {
          const view = leaf.view;
          let container = null;
          if (view) {
            const viewAny = view;
            container = viewAny.containerEl || null;
          }
          if (!container) {
            const leafAny = leaf;
            container = leafAny.containerEl || null;
          }
          if (container) {
            const rootWorkspace = container.closest(".workspace-split.mod-vertical.mod-root");
            const leftSidebar = container.closest(".workspace-split.mod-left-split");
            const rightSidebar = container.closest(".workspace-split.mod-right-split");
            if (rootWorkspace && !leftSidebar && !rightSidebar) {
              if (this.plugin.homeService.isGhostLeaf(leaf)) {
                const tabHeader = this.getTabHeaderForLeaf(leaf);
                if (tabHeader && tabHeader.parentElement) {
                  const parent = tabHeader.parentElement;
                  if (parent && parent.classList.contains("workspace-tab-header-container-inner")) {
                    const tabHeaderExtended = tabHeader;
                    if (parent.contains(tabHeader)) {
                      tabHeaderExtended._homeBaseParent = parent;
                      tabHeaderExtended._homeBaseNextSibling = tabHeader.nextSibling;
                      tabHeader.remove();
                    }
                  }
                }
              }
            }
          }
        });
      }
    });
    const observeContainer = (container) => {
      var _a;
      (_a = this.tabHeaderObserver) == null ? void 0 : _a.observe(container, {
        childList: true,
        subtree: false
      });
    };
    const observeAllWindows = () => {
      const containers = document.querySelectorAll(".workspace-tab-header-container-inner");
      containers.forEach(observeContainer);
      this.plugin.app.workspace.iterateAllLeaves((leaf) => {
        var _a, _b;
        const doc = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.ownerDocument;
        if (doc && doc !== document) {
          const windowContainers = doc.querySelectorAll(".workspace-tab-header-container-inner");
          windowContainers.forEach(observeContainer);
        }
      });
    };
    observeAllWindows();
    const setupWorkspaceObserver = (win) => {
      const doc = win.document;
      const workspaceObserver = new MutationObserver(() => {
        const newContainers = doc.querySelectorAll(".workspace-tab-header-container-inner");
        newContainers.forEach(observeContainer);
      });
      const mainWorkspace = doc.querySelector(".workspace-split.mod-vertical.mod-root");
      if (mainWorkspace) {
        workspaceObserver.observe(mainWorkspace, {
          childList: true,
          subtree: true
        });
      }
    };
    setupWorkspaceObserver(window);
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("window-open", (win) => {
        const actualWindow = win.win;
        if (actualWindow instanceof Window) {
          setupWorkspaceObserver(actualWindow);
          setTimeout(observeAllWindows, 100);
        }
      })
    );
  }
  /**
   * Remove the sticky home icon
   */
  remove() {
    if (this.tabHeaderUpdateTimeout) {
      clearTimeout(this.tabHeaderUpdateTimeout);
      this.tabHeaderUpdateTimeout = null;
    }
    if (this.stickyIconEl && this.stickyIconEl._checkInterval) {
      clearInterval(this.stickyIconEl._checkInterval);
    }
    if (this.stickyIconEl && this.stickyIconEl._containerObserver) {
      this.stickyIconEl._containerObserver.disconnect();
    }
    if (this.sidebarObserver) {
      this.sidebarObserver.disconnect();
      this.sidebarObserver = null;
    }
    if (this.tabHeaderObserver) {
      this.tabHeaderObserver.disconnect();
      this.tabHeaderObserver = null;
    }
    this.updateWorkspaceClass(false);
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      const view = leaf.view;
      let container = null;
      if (view) {
        const viewAny = view;
        container = viewAny.containerEl || null;
      }
      if (!container) {
        const leafAny = leaf;
        container = leafAny.containerEl || null;
      }
      if (container) {
        const rootWorkspace = container.closest(".workspace-split.mod-vertical.mod-root");
        const leftSidebar = container.closest(".workspace-split.mod-left-split");
        const rightSidebar = container.closest(".workspace-split.mod-right-split");
        if (rootWorkspace && !leftSidebar && !rightSidebar) {
          const tabHeader = this.getTabHeaderForLeaf(leaf);
          if (tabHeader) {
            tabHeader.classList.remove("is-home-base-tab");
            tabHeader.removeAttribute("data-home-base-ghost");
            tabHeader.removeAttribute("aria-hidden");
            const tabHeaderExtended = tabHeader;
            if (tabHeaderExtended._homeBaseParent && !tabHeaderExtended._homeBaseParent.contains(tabHeader)) {
              const parent = tabHeaderExtended._homeBaseParent;
              const nextSibling = tabHeaderExtended._homeBaseNextSibling;
              if (parent) {
                if (nextSibling && nextSibling.parentElement === parent) {
                  parent.insertBefore(tabHeader, nextSibling);
                } else {
                  parent.appendChild(tabHeader);
                }
              }
              delete tabHeaderExtended._homeBaseParent;
              delete tabHeaderExtended._homeBaseNextSibling;
            }
          }
        }
      }
    });
    if (this.stickyIconEl) {
      if (this.stickyIconEl.parentElement) {
        this.stickyIconEl.remove();
      }
      this.stickyIconEl = null;
    }
    const cleanupOrphans = (doc) => {
      doc.querySelectorAll(`.${STICKY_ICON_CLASS}`).forEach((el) => {
        const stickyEl = el;
        if (stickyEl._checkInterval) {
          clearInterval(stickyEl._checkInterval);
        }
        if (stickyEl._containerObserver) {
          stickyEl._containerObserver.disconnect();
        }
        el.remove();
      });
    };
    cleanupOrphans(document);
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      var _a, _b;
      const doc = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.ownerDocument;
      if (doc && doc !== document) {
        cleanupOrphans(doc);
      }
    });
  }
  /**
   * Update the active state of the sticky icon
   */
  updateActiveState() {
    if (!this.stickyIconEl) return;
    const isActive = this.plugin.homeService.isFocusedOnHomeBase();
    if (isActive) {
      this.stickyIconEl.classList.add(STICKY_ICON_ACTIVE_CLASS);
    } else {
      this.stickyIconEl.classList.remove(STICKY_ICON_ACTIVE_CLASS);
    }
    this.updateTabHeaders();
  }
  /**
   * Check if the left sidebar is collapsed
   * Based on obsidian-oxygen-settings implementation
   */
  isLeftSidebarCollapsed() {
    const leftSidebar = document.querySelector(".workspace-split.mod-left-split") || document.querySelector(".mod-left-split");
    if (!leftSidebar) return false;
    return leftSidebar.classList.contains("is-sidedock-collapsed");
  }
  /**
   * Update icon position based on sidebar state
   * Note: With inline positioning, icon flows naturally with tabs, so no special positioning needed
   */
  updateIconPositionForSidebar() {
  }
  /**
   * Update icon visibility based on tab bar visibility
   * REMOVED: JavaScript-based visibility checking was causing issues
   * Now relies entirely on CSS which is more reliable
   */
  updateIconVisibility() {
  }
  /**
   * Watch for sidebar state changes and update icon position
   * Based on obsidian-oxygen-settings implementation
   */
  watchSidebarState() {
    if (this.sidebarObserver) {
      this.sidebarObserver.disconnect();
    }
    const leftSidebar = document.querySelector(".workspace-split.mod-left-split") || document.querySelector(".mod-left-split");
    if (!leftSidebar) return;
    this.sidebarObserver = new MutationObserver((mutations) => {
      let shouldUpdate = false;
      mutations.forEach((mutation) => {
        if (mutation.type === "attributes" && mutation.attributeName === "class") {
          shouldUpdate = true;
        }
      });
      if (shouldUpdate) {
        this.updateIconPositionForSidebar();
      }
    });
    this.sidebarObserver.observe(leftSidebar, {
      attributes: true,
      attributeFilter: ["class"]
    });
  }
  /**
   * Watch for tab bar visibility changes (Oxygen theme auto-hide, focus mode, etc.)
   * REMOVED: No longer needed - CSS handles all visibility automatically
   */
  watchTabBarVisibility() {
  }
  /**
   * Toggle the sticky icon visibility
   */
  async toggle() {
    this.plugin.settings.showStickyHomeIcon = !this.plugin.settings.showStickyHomeIcon;
    await this.plugin.saveSettings();
    this.update();
    this.updateTabHeaders();
  }
  /**
   * Update tab headers to hide/show ghost tab
   * Only works when sticky icon is enabled
   * Removed debounce - must be immediate to prevent flash
   */
  updateTabHeaders() {
    if (this.tabHeaderUpdateTimeout) {
      clearTimeout(this.tabHeaderUpdateTimeout);
      this.tabHeaderUpdateTimeout = null;
    }
    this._doUpdateTabHeaders();
  }
  /**
   * Internal method that actually updates the tab headers
   */
  _doUpdateTabHeaders() {
    if (!this.plugin.settings.showStickyHomeIcon || !this.plugin.settings.hideHomeTabHeader) {
      this.plugin.app.workspace.iterateAllLeaves((leaf) => {
        const tabHeader = this.getTabHeaderForLeaf(leaf);
        if (tabHeader) {
          tabHeader.classList.remove("is-home-base-tab");
          tabHeader.removeAttribute("data-home-base-ghost");
          tabHeader.removeAttribute("aria-hidden");
          const tabHeaderExtended = tabHeader;
          if (tabHeaderExtended._homeBaseParent && !tabHeaderExtended._homeBaseParent.contains(tabHeader)) {
            const parent = tabHeaderExtended._homeBaseParent;
            const nextSibling = tabHeaderExtended._homeBaseNextSibling;
            if (parent) {
              if (nextSibling && nextSibling.parentElement === parent) {
                parent.insertBefore(tabHeader, nextSibling);
              } else {
                parent.appendChild(tabHeader);
              }
            }
            delete tabHeaderExtended._homeBaseParent;
            delete tabHeaderExtended._homeBaseNextSibling;
          }
        }
      });
      return;
    }
    const ghostTabHeadersToRemove = [];
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      const view = leaf.view;
      let container = null;
      if (view) {
        const viewAny = view;
        container = viewAny.containerEl || null;
      }
      if (!container) {
        const leafAny = leaf;
        container = leafAny.containerEl || null;
      }
      if (container) {
        const rootWorkspace = container.closest(".workspace-split.mod-vertical.mod-root");
        const leftSidebar = container.closest(".workspace-split.mod-left-split");
        const rightSidebar = container.closest(".workspace-split.mod-right-split");
        if (rootWorkspace && !leftSidebar && !rightSidebar) {
          if (this.plugin.homeService.isGhostLeaf(leaf)) {
            const tabHeader = this.getTabHeaderForLeaf(leaf);
            if (tabHeader && tabHeader.parentElement) {
              ghostTabHeadersToRemove.push({ tabHeader, leaf });
            }
          }
        }
      }
    });
    ghostTabHeadersToRemove.forEach(({ tabHeader }) => {
      const parent = tabHeader.parentElement;
      if (parent && parent.classList.contains("workspace-tab-header-container-inner")) {
        const tabHeaderExtended = tabHeader;
        if (parent.contains(tabHeader)) {
          tabHeaderExtended._homeBaseParent = parent;
          tabHeaderExtended._homeBaseNextSibling = tabHeader.nextSibling;
          tabHeader.remove();
        }
      }
    });
    requestAnimationFrame(() => {
      const homeBaseSettings = this.plugin.getHomeBaseSettings();
      const homeBasePath = resolvePathSync(homeBaseSettings.type, homeBaseSettings.value, this.plugin.app);
      this.plugin.app.workspace.iterateAllLeaves((leaf) => {
        const view = leaf.view;
        let container = null;
        if (view) {
          const viewAny = view;
          container = viewAny.containerEl || null;
        }
        if (!container) {
          const leafAny = leaf;
          container = leafAny.containerEl || null;
        }
        if (container) {
          const rootWorkspace = container.closest(".workspace-split.mod-vertical.mod-root");
          const leftSidebar = container.closest(".workspace-split.mod-left-split");
          const rightSidebar = container.closest(".workspace-split.mod-right-split");
          if (rootWorkspace && !leftSidebar && !rightSidebar) {
            const isGhostTab = this.plugin.homeService.isGhostLeaf(leaf);
            const tabHeader = this.getTabHeaderForLeaf(leaf);
            if (!tabHeader) return;
            const tabHeaderExtended = tabHeader;
            const isRemoved = tabHeaderExtended._homeBaseParent && !tabHeaderExtended._homeBaseParent.contains(tabHeader);
            if (!isGhostTab) {
              if (isRemoved) {
                const parent = tabHeaderExtended._homeBaseParent;
                const nextSibling = tabHeaderExtended._homeBaseNextSibling;
                if (parent) {
                  if (nextSibling && nextSibling.parentElement === parent) {
                    parent.insertBefore(tabHeader, nextSibling);
                  } else {
                    parent.appendChild(tabHeader);
                  }
                  delete tabHeaderExtended._homeBaseParent;
                  delete tabHeaderExtended._homeBaseNextSibling;
                }
              }
              if (homeBasePath && leafHasFile(leaf, homeBasePath)) {
                tabHeader.classList.add("is-home-base-tab");
              } else {
                tabHeader.classList.remove("is-home-base-tab");
              }
              tabHeader.removeAttribute("data-home-base-ghost");
              tabHeader.removeAttribute("aria-hidden");
            }
          }
        }
      });
    });
  }
  /**
   * Get the tab header element for a given leaf
   */
  getTabHeaderForLeaf(leaf) {
    var _a, _b, _c;
    const leafAny = leaf;
    if (leafAny.tabHeaderEl) {
      return leafAny.tabHeaderEl;
    }
    const viewType = (_a = leaf.view) == null ? void 0 : _a.getViewType();
    if (!viewType) return null;
    const doc = ((_c = (_b = leaf.view) == null ? void 0 : _b.containerEl) == null ? void 0 : _c.ownerDocument) || document;
    const activeLeaf = this.plugin.app.workspace.getMostRecentLeaf();
    const isActive = leaf === activeLeaf;
    const tabHeaders = doc.querySelectorAll(`.workspace-tab-header[data-type="${viewType}"]`);
    if (isActive) {
      const activeHeader = doc.querySelector(".workspace-tab-header.is-active");
      if (activeHeader && activeHeader.getAttribute("data-type") === viewType) {
        return activeHeader;
      }
    }
    for (const header of Array.from(tabHeaders)) {
      const headerEl = header;
      const headerElWithLeaf = headerEl;
      const headerLeaf = headerElWithLeaf.leaf;
      if (headerLeaf === leaf) {
        return headerEl;
      }
    }
    if (tabHeaders.length === 1) {
      return tabHeaders[0];
    }
    if (isActive) {
      const activeHeader = doc.querySelector(".workspace-tab-header.is-active");
      if (activeHeader) {
        return activeHeader;
      }
    }
    return null;
  }
  /**
   * Close the home base tab
   * When called from context menu: Only closes the ghost tab (the "occupied" slot)
   * Other home base tabs are left alone
   */
  closeHomeBase(actuallyClose = false) {
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const homeBasePath = resolvePathSync(homeBaseSettings.type, homeBaseSettings.value, this.plugin.app);
    const ghostTabs = [];
    const allHomeBaseLeaves = [];
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      const isGhost = this.plugin.homeService.isGhostLeaf(leaf);
      if (isGhost) {
        ghostTabs.push(leaf);
      }
      if (homeBasePath && leafHasFile(leaf, homeBasePath)) {
        allHomeBaseLeaves.push(leaf);
      }
    });
    if (this.plugin.settings.showStickyHomeIcon) {
      for (const ghostTab of ghostTabs) {
        void ghostTab.detach();
      }
    } else {
      for (const leaf of allHomeBaseLeaves) {
        void leaf.detach();
      }
    }
    this.updateTabHeaders();
  }
  /**
   * Pin the home base tab
   */
  pinHomeBaseTab() {
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const homeBasePath = resolvePathSync(homeBaseSettings.type, homeBaseSettings.value, this.plugin.app);
    if (!homeBasePath) return;
    const homeBaseFile = getFileByPath(this.plugin.app, homeBasePath);
    if (!homeBaseFile) return;
    const homeBaseLeaf = this.plugin.homeService.findExistingHomeBaseLeaf(homeBaseFile);
    if (homeBaseLeaf) {
      homeBaseLeaf.setPinned(true);
    }
  }
  /**
   * Unpin the home base tab
   */
  unpinHomeBaseTab() {
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const homeBasePath = resolvePathSync(homeBaseSettings.type, homeBaseSettings.value, this.plugin.app);
    if (!homeBasePath) return;
    const homeBaseFile = getFileByPath(this.plugin.app, homeBasePath);
    if (!homeBaseFile) return;
    const homeBaseLeaf = this.plugin.homeService.findExistingHomeBaseLeaf(homeBaseFile);
    if (homeBaseLeaf) {
      homeBaseLeaf.setPinned(false);
    }
  }
  /**
   * Check if the home base tab is pinned
   */
  isHomeBaseTabPinned() {
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const homeBasePath = resolvePathSync(homeBaseSettings.type, homeBaseSettings.value, this.plugin.app);
    if (!homeBasePath) return false;
    const homeBaseFile = getFileByPath(this.plugin.app, homeBasePath);
    if (!homeBaseFile) return false;
    const homeBaseLeaf = this.plugin.homeService.findExistingHomeBaseLeaf(homeBaseFile);
    if (!homeBaseLeaf) return false;
    const viewState = homeBaseLeaf.getViewState();
    return viewState.pinned === true;
  }
};

// src/services/mobile-button-service.ts
var import_obsidian11 = require("obsidian");
var MOBILE_HOME_CLASS = "home-base-mobile-enabled";
var MobileButtonService = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  /**
   * Update the mobile button based on settings
   */
  update() {
    if (!import_obsidian11.Platform.isMobile) {
      this.remove();
      return;
    }
    if (this.plugin.settings.replaceMobileNewTab) {
      this.apply();
    } else {
      this.remove();
    }
  }
  /**
   * Apply the mobile button replacement
   */
  apply() {
    document.body.classList.add(MOBILE_HOME_CLASS);
  }
  /**
   * Remove the mobile button replacement
   */
  remove() {
    document.body.classList.remove(MOBILE_HOME_CLASS);
  }
};

// src/main.ts
var HOME_ICON = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>`;
var HomeBasePlugin = class extends import_obsidian12.Plugin {
  constructor() {
    super(...arguments);
    // Release notes tracking
    this.newRelease = false;
    // Track if patched opening behavior already ran
    this.openingBehaviorRan = false;
    // Track if we're currently in startup (to prevent handleOpenWhenEmpty from firing)
    this.isStartup = true;
  }
  async onload() {
    await this.loadSettings();
    await this.migrateLegacySettings();
    this.patchOpeningBehavior();
    (0, import_obsidian12.addIcon)("home-base", HOME_ICON);
    this.homeService = new HomeBaseService(this);
    this.newTabService = new NewTabService(this);
    this.stickyTabService = new StickyTabService(this);
    this.mobileButtonService = new MobileButtonService(this);
    this.addRibbonIcon("home", "Open home base", () => {
      void this.homeService.openHomeBase({
        replaceActiveLeaf: false,
        runCommand: true
      });
    });
    this.registerCommands();
    this.addSettingTab(new HomeBaseSettingTab(this.app, this));
    this.app.workspace.onLayoutReady(() => {
      setTimeout(() => {
        if (this.isSettingsModalOpen()) {
          this.updateStickyTabIcon();
          this.updateMobileButton();
          this.stickyTabService.updateTabHeaders();
          return;
        }
        if (!this.openingBehaviorRan) {
          this.newTabService.initialize();
        } else {
          this.newTabService.trackExistingLeaves();
        }
        this.homeService.restoreGhostLeaves();
        setTimeout(() => {
          this.isStartup = false;
        }, 1e3);
        this.updateStickyTabIcon();
        this.updateMobileButton();
        this.stickyTabService.updateTabHeaders();
      }, 100);
    });
    this.registerEvent(
      this.app.workspace.on("layout-change", async () => {
        this.newTabService.handleLayoutChange();
        if (this.settings.revertView) {
          await this.homeService.revertView();
        }
        setTimeout(() => {
          this.stickyTabService.updateActiveState();
          this.stickyTabService.updateTabHeaders();
          this.stickyTabService.updateIconPositionForSidebar();
        }, 150);
      })
    );
    this.registerEvent(
      this.app.workspace.on("file-open", () => {
        setTimeout(() => {
          this.stickyTabService.updateActiveState();
          this.stickyTabService.updateTabHeaders();
        }, 100);
      })
    );
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", () => {
        setTimeout(() => {
          this.stickyTabService.updateTabHeaders();
        }, 100);
      })
    );
  }
  onunload() {
    this.unpatchReleaseNotes();
    this.unpatchOpeningBehavior();
    this.stickyTabService.remove();
    this.mobileButtonService.remove();
  }
  /**
   * Register plugin commands
   */
  registerCommands() {
    this.addCommand({
      id: "open",
      name: "Open",
      callback: () => {
        const homeBaseSettings = this.getHomeBaseSettings();
        if (!homeBaseSettings.value && homeBaseSettings.type === "File" /* File */) {
          new import_obsidian12.Notice("No home base configured. Set one in settings.");
          return;
        }
        void this.homeService.openHomeBase({
          replaceActiveLeaf: false,
          runCommand: true
        });
      }
    });
    this.addCommand({
      id: "set-current-file",
      name: "Set current file as home",
      checkCallback: (checking) => {
        if (!this.homeService.canSetActiveFileAsHomeBase()) {
          return false;
        }
        if (!checking) {
          void this.homeService.setActiveFileAsHomeBase().then((success) => {
            if (success) {
              const activeFile = this.app.workspace.getActiveFile();
              new import_obsidian12.Notice(`Home base set to "${activeFile == null ? void 0 : activeFile.name}"`);
            }
          });
        }
        return true;
      }
    });
    this.addCommand({
      id: "toggle-sticky-icon",
      name: "Toggle sticky home icon",
      callback: async () => {
        await this.stickyTabService.toggle();
        const state = this.settings.showStickyHomeIcon ? "enabled" : "disabled";
        new import_obsidian12.Notice(`Sticky home icon ${state}`);
      }
    });
    this.addCommand({
      id: "close",
      name: "Close",
      callback: () => {
        this.stickyTabService.closeHomeBase();
      }
    });
  }
  /**
   * Load plugin settings
   */
  async loadSettings() {
    const data = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, data != null ? data : {});
  }
  /**
   * Migrate legacy settings to new format
   */
  async migrateLegacySettings() {
    let needsSave = false;
    const settings = this.settings;
    if (settings.homeBasePath && !this.settings.homeBaseValue) {
      this.settings.homeBaseType = "File" /* File */;
      this.settings.homeBaseValue = settings.homeBasePath;
      needsSave = true;
    }
    if (settings.keepExistingTabs !== void 0) {
      if (this.settings.openMode === DEFAULT_SETTINGS.openMode) {
        this.settings.openMode = settings.keepExistingTabs ? "retain" : "replace-all";
        needsSave = true;
      }
      delete settings.keepExistingTabs;
      needsSave = true;
    }
    if (settings.mobileHomeBasePath && !this.settings.mobileHomeBaseValue) {
      this.settings.mobileHomeBaseType = "File" /* File */;
      this.settings.mobileHomeBaseValue = settings.mobileHomeBasePath;
      needsSave = true;
    }
    if (settings.mobileHomeBasePath !== void 0) {
      delete settings.mobileHomeBasePath;
      needsSave = true;
    }
    if (settings.homeBasePath !== void 0) {
      delete settings.homeBasePath;
      needsSave = true;
    }
    if (needsSave) {
      await this.saveSettings();
    }
  }
  /**
   * Get the active home base settings (mobile or desktop)
   */
  getHomeBaseSettings() {
    if (this.settings.separateMobile && import_obsidian12.Platform.isMobile) {
      return {
        type: this.settings.mobileHomeBaseType || "File" /* File */,
        value: this.settings.mobileHomeBaseValue || ""
      };
    }
    return {
      type: this.settings.homeBaseType || "File" /* File */,
      value: this.settings.homeBaseValue || ""
    };
  }
  /**
   * Get the active new tab settings (mobile or desktop)
   * Falls back to home base settings if useDifferentFileForNewTab is disabled
   */
  getNewTabSettings() {
    if (!this.settings.useDifferentFileForNewTab) {
      return this.getHomeBaseSettings();
    }
    if (this.settings.newTabSeparateMobile && import_obsidian12.Platform.isMobile) {
      return {
        type: this.settings.mobileNewTabType || "File" /* File */,
        value: this.settings.mobileNewTabValue || ""
      };
    }
    return {
      type: this.settings.newTabType || "File" /* File */,
      value: this.settings.newTabValue || ""
    };
  }
  /**
   * Save plugin settings
   */
  async saveSettings() {
    await this.saveData(this.settings);
  }
  /**
   * Update the sticky tab icon based on current settings
   */
  updateStickyTabIcon() {
    this.stickyTabService.update();
    this.stickyTabService.updateTabHeaders();
  }
  /**
   * Update the mobile button based on current settings
   */
  updateMobileButton() {
    this.mobileButtonService.update();
  }
  /**
   * Check if we should skip startup logic (e.g., plugin reload, settings modal open)
   * This prevents destructive behavior when the plugin is reloaded or settings are open
   */
  shouldSkipStartupLogic() {
    if (this.isSettingsModalOpen()) {
      return true;
    }
    const hasOpenFiles = this.app.workspace.getLeavesOfType("markdown").length > 0 || this.app.workspace.getLeavesOfType("canvas").length > 0 || this.app.workspace.getLeavesOfType("bases").length > 0 || this.app.workspace.getLeavesOfType("empty").length > 0;
    return hasOpenFiles;
  }
  /**
   * Check if the settings modal is currently open
   */
  isSettingsModalOpen() {
    const settingsModal = document.querySelector(".modal-container.mod-settings") || document.querySelector(".modal.mod-settings") || document.querySelector(".vertical-tab-content");
    if (!settingsModal) {
      const allModals = document.querySelectorAll(".modal-container");
      for (const modal of Array.from(allModals)) {
        if (modal.querySelector(".vertical-tab-content") || modal.querySelector(".settings-content") || modal.classList.contains("mod-settings")) {
          return true;
        }
      }
    }
    return settingsModal !== null;
  }
  /**
   * Patch runOpeningBehavior for fast startup (like homepage plugin)
   */
  patchOpeningBehavior() {
    this.app.nvOrig_runOpeningBehavior = this.app.runOpeningBehavior;
    this.app.runOpeningBehavior = async (path) => {
      const openInitially = this.settings.openOnStartup && !this.hasUrlParams();
      if (openInitially) {
        this.openingBehaviorRan = true;
        const mode = this.settings.openMode;
        if (mode === "replace-all") {
          await this.homeService.detachAllLeaves();
        }
        if (this.settings.showStickyHomeIcon) {
          void this.homeService.openHomeBaseInGhostTab({
            runCommand: true
          });
        } else {
          void this.homeService.openHomeBaseWithMode(mode, true);
        }
      } else {
        if (this.app.nvOrig_runOpeningBehavior) {
          await this.app.nvOrig_runOpeningBehavior(path);
        }
      }
      this.unpatchReleaseNotes();
    };
  }
  /**
   * Unpatch runOpeningBehavior
   */
  unpatchOpeningBehavior() {
    if (this.app.nvOrig_runOpeningBehavior) {
      this.app.runOpeningBehavior = this.app.nvOrig_runOpeningBehavior;
    }
  }
  /**
   * Patch showReleaseNotes to track new releases
   */
  patchReleaseNotes() {
    const appAny = this.app;
    appAny.nvOrig_showReleaseNotes = appAny.showReleaseNotes;
    appAny.showReleaseNotes = () => {
      this.newRelease = true;
    };
  }
  /**
   * Unpatch showReleaseNotes
   */
  unpatchReleaseNotes() {
    var _a;
    const appAny = this.app;
    if (this.newRelease && !this.settings.hideReleaseNotes) {
      (_a = appAny.nvOrig_showReleaseNotes) == null ? void 0 : _a.call(appAny);
    }
    if (appAny.nvOrig_showReleaseNotes) {
      appAny.showReleaseNotes = appAny.nvOrig_showReleaseNotes;
    }
  }
  /**
   * Check if a home base type has its required plugin enabled
   */
  hasRequiredPlugin(type) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    switch (type) {
      case "Workspace" /* Workspace */:
        return ((_c = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b.workspaces) == null ? void 0 : _c.enabled) === true;
      case "Graph view" /* Graph */:
        return ((_f = (_e = (_d = this.app.internalPlugins) == null ? void 0 : _d.plugins) == null ? void 0 : _e.graph) == null ? void 0 : _f.enabled) === true;
      case "Journal" /* Journal */:
        return !!((_h = (_g = this.app.plugins) == null ? void 0 : _g.plugins) == null ? void 0 : _h["journals"]);
      case "Daily Note" /* DailyNote */:
      case "Weekly Note" /* WeeklyNote */:
      case "Monthly Note" /* MonthlyNote */:
      case "Quarterly Note" /* QuarterlyNote */:
      case "Yearly Note" /* YearlyNote */:
        return this.hasRequiredPeriodicity(type);
      default:
        return true;
    }
  }
  /**
   * Check if periodic notes are available for the given type
   */
  hasRequiredPeriodicity(type) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s;
    if (type === "Daily Note" /* DailyNote */) {
      const coreDailyNotes = ((_c = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["daily-notes"]) == null ? void 0 : _c.enabled) === true;
      if (coreDailyNotes) {
        return true;
      }
      const periodicNotes2 = (_e = (_d = this.app.plugins) == null ? void 0 : _d.plugins) == null ? void 0 : _e["periodic-notes"];
      if (periodicNotes2) {
        const version2 = ((_f = periodicNotes2 == null ? void 0 : periodicNotes2.manifest) == null ? void 0 : _f.version) || "0";
        const isLegacy2 = version2.startsWith("0");
        if (isLegacy2) {
          return ((_h = (_g = periodicNotes2 == null ? void 0 : periodicNotes2.settings) == null ? void 0 : _g["daily"]) == null ? void 0 : _h.enabled) === true;
        } else {
          const calendarSet = (_j = (_i = periodicNotes2 == null ? void 0 : periodicNotes2.calendarSetManager) == null ? void 0 : _i.getActiveSet) == null ? void 0 : _j.call(_i);
          return ((_k = calendarSet == null ? void 0 : calendarSet["day"]) == null ? void 0 : _k.enabled) === true;
        }
      }
      return false;
    }
    const periodicNotes = (_m = (_l = this.app.plugins) == null ? void 0 : _l.plugins) == null ? void 0 : _m["periodic-notes"];
    if (!periodicNotes) return false;
    const version = ((_n = periodicNotes == null ? void 0 : periodicNotes.manifest) == null ? void 0 : _n.version) || "0";
    const isLegacy = version.startsWith("0");
    if (isLegacy) {
      const periodMap = {
        ["Weekly Note" /* WeeklyNote */]: "weekly",
        ["Monthly Note" /* MonthlyNote */]: "monthly",
        ["Quarterly Note" /* QuarterlyNote */]: "quarterly",
        ["Yearly Note" /* YearlyNote */]: "yearly"
      };
      const adjective = periodMap[type];
      if (!adjective) return false;
      return ((_p = (_o = periodicNotes == null ? void 0 : periodicNotes.settings) == null ? void 0 : _o[adjective]) == null ? void 0 : _p.enabled) === true;
    } else {
      const nounMap = {
        ["Weekly Note" /* WeeklyNote */]: "week",
        ["Monthly Note" /* MonthlyNote */]: "month",
        ["Quarterly Note" /* QuarterlyNote */]: "quarter",
        ["Yearly Note" /* YearlyNote */]: "year"
      };
      const noun = nounMap[type];
      if (!noun) return false;
      const calendarSet = (_r = (_q = periodicNotes == null ? void 0 : periodicNotes.calendarSetManager) == null ? void 0 : _q.getActiveSet) == null ? void 0 : _r.call(_q);
      return ((_s = calendarSet == null ? void 0 : calendarSet[noun]) == null ? void 0 : _s.enabled) === true;
    }
  }
  /**
   * Check if URL params indicate a file/workspace should be opened (skip homepage)
   */
  hasUrlParams() {
    if (typeof window !== "undefined" && window.OBS_ACT) {
      const params = Object.keys(window.OBS_ACT);
      const action = window.OBS_ACT.action;
      return action !== void 0 && ["open", "advanced-uri"].includes(action) && ["file", "filepath", "workspace"].some((e) => params.includes(e));
    }
    return false;
  }
  // "Open when empty" feature removed - redundant with "New tab replacement: only when empty"
  // Since Obsidian auto-creates an empty tab when you close the last one, they do the same thing
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzLy5wbnBtL29ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZl84ZDlmYzI0YjBmYzYyMmQ5NGZkMTFmYTVlOWIxODViMy9ub2RlX21vZHVsZXMvb2JzaWRpYW4tZGFpbHktbm90ZXMtaW50ZXJmYWNlL2Rpc3QvbWFpbi5qcyIsICJzcmMvbWFpbi50cyIsICJzcmMvc2V0dGluZ3MudHMiLCAic3JjL3VpL3NldHRpbmdzLXRhYi50cyIsICJzcmMvdXRpbHMvc2V0dGluZ3MtY29tcGF0LnRzIiwgInNyYy91aS9maWxlLXN1Z2dlc3QudHMiLCAic3JjL3VpL2NvbW1hbmQtc3VnZ2VzdC50cyIsICJzcmMvdWkvaWNvbi1waWNrZXIudHMiLCAic3JjL3NlcnZpY2VzL2hvbWUtc2VydmljZS50cyIsICJzcmMvdXRpbHMvZmlsZS11dGlscy50cyIsICJzcmMvdXRpbHMvaG9tZWJhc2UtcmVzb2x2ZXIudHMiLCAic3JjL3NlcnZpY2VzL25ldy10YWItc2VydmljZS50cyIsICJzcmMvc2VydmljZXMvc3RpY2t5LXRhYi1zZXJ2aWNlLnRzIiwgInNyYy9zZXJ2aWNlcy9tb2JpbGUtYnV0dG9uLXNlcnZpY2UudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxudmFyIG9ic2lkaWFuID0gcmVxdWlyZSgnb2JzaWRpYW4nKTtcblxuY29uc3QgREVGQVVMVF9EQUlMWV9OT1RFX0ZPUk1BVCA9IFwiWVlZWS1NTS1ERFwiO1xuY29uc3QgREVGQVVMVF9XRUVLTFlfTk9URV9GT1JNQVQgPSBcImdnZ2ctW1ddd3dcIjtcbmNvbnN0IERFRkFVTFRfTU9OVEhMWV9OT1RFX0ZPUk1BVCA9IFwiWVlZWS1NTVwiO1xuY29uc3QgREVGQVVMVF9RVUFSVEVSTFlfTk9URV9GT1JNQVQgPSBcIllZWVktW1FdUVwiO1xuY29uc3QgREVGQVVMVF9ZRUFSTFlfTk9URV9GT1JNQVQgPSBcIllZWVlcIjtcblxuZnVuY3Rpb24gc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKHBlcmlvZGljaXR5KSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gd2luZG93LmFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpO1xuICAgIHJldHVybiBwZXJpb2RpY05vdGVzICYmIHBlcmlvZGljTm90ZXMuc2V0dGluZ3M/LltwZXJpb2RpY2l0eV0/LmVuYWJsZWQ7XG59XG4vKipcbiAqIFJlYWQgdGhlIHVzZXIgc2V0dGluZ3MgZm9yIHRoZSBgZGFpbHktbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldERhaWx5Tm90ZVNldHRpbmdzKCkge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IHsgaW50ZXJuYWxQbHVnaW5zLCBwbHVnaW5zIH0gPSB3aW5kb3cuYXBwO1xuICAgICAgICBpZiAoc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKFwiZGFpbHlcIikpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgZm9ybWF0LCBmb2xkZXIsIHRlbXBsYXRlIH0gPSBwbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpPy5zZXR0aW5ncz8uZGFpbHkgfHwge307XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0IHx8IERFRkFVTFRfREFJTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICAgICAgZm9sZGVyOiBmb2xkZXI/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgZm9sZGVyLCBmb3JtYXQsIHRlbXBsYXRlIH0gPSBpbnRlcm5hbFBsdWdpbnMuZ2V0UGx1Z2luQnlJZChcImRhaWx5LW5vdGVzXCIpPy5pbnN0YW5jZT8ub3B0aW9ucyB8fCB7fTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0IHx8IERFRkFVTFRfREFJTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICBmb2xkZXI6IGZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSBkYWlseSBub3RlIHNldHRpbmdzIGZvdW5kIVwiLCBlcnIpO1xuICAgIH1cbn1cbi8qKlxuICogUmVhZCB0aGUgdXNlciBzZXR0aW5ncyBmb3IgdGhlIGB3ZWVrbHktbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldFdlZWtseU5vdGVTZXR0aW5ncygpIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCBwbHVnaW5NYW5hZ2VyID0gd2luZG93LmFwcC5wbHVnaW5zO1xuICAgICAgICBjb25zdCBjYWxlbmRhclNldHRpbmdzID0gcGx1Z2luTWFuYWdlci5nZXRQbHVnaW4oXCJjYWxlbmRhclwiKT8ub3B0aW9ucztcbiAgICAgICAgY29uc3QgcGVyaW9kaWNOb3Rlc1NldHRpbmdzID0gcGx1Z2luTWFuYWdlci5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKT8uc2V0dGluZ3M/LndlZWtseTtcbiAgICAgICAgaWYgKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcIndlZWtseVwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IHBlcmlvZGljTm90ZXNTZXR0aW5ncy5mb3JtYXQgfHwgREVGQVVMVF9XRUVLTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICAgICAgZm9sZGVyOiBwZXJpb2RpY05vdGVzU2V0dGluZ3MuZm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogcGVyaW9kaWNOb3Rlc1NldHRpbmdzLnRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSBjYWxlbmRhclNldHRpbmdzIHx8IHt9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZm9ybWF0OiBzZXR0aW5ncy53ZWVrbHlOb3RlRm9ybWF0IHx8IERFRkFVTFRfV0VFS0xZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgZm9sZGVyOiBzZXR0aW5ncy53ZWVrbHlOb3RlRm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBzZXR0aW5ncy53ZWVrbHlOb3RlVGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSB3ZWVrbHkgbm90ZSBzZXR0aW5ncyBmb3VuZCFcIiwgZXJyKTtcbiAgICB9XG59XG4vKipcbiAqIFJlYWQgdGhlIHVzZXIgc2V0dGluZ3MgZm9yIHRoZSBgcGVyaW9kaWMtbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldE1vbnRobHlOb3RlU2V0dGluZ3MoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwbHVnaW5NYW5hZ2VyID0gd2luZG93LmFwcC5wbHVnaW5zO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcIm1vbnRobHlcIikgJiZcbiAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LnNldHRpbmdzPy5tb250aGx5KSB8fFxuICAgICAgICAgICAge307XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHNldHRpbmdzLmZvcm1hdCB8fCBERUZBVUxUX01PTlRITFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICBmb2xkZXI6IHNldHRpbmdzLmZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogc2V0dGluZ3MudGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSBtb250aGx5IG5vdGUgc2V0dGluZ3MgZm91bmQhXCIsIGVycik7XG4gICAgfVxufVxuLyoqXG4gKiBSZWFkIHRoZSB1c2VyIHNldHRpbmdzIGZvciB0aGUgYHBlcmlvZGljLW5vdGVzYCBwbHVnaW5cbiAqIHRvIGtlZXAgYmVoYXZpb3Igb2YgY3JlYXRpbmcgYSBuZXcgbm90ZSBpbi1zeW5jLlxuICovXG5mdW5jdGlvbiBnZXRRdWFydGVybHlOb3RlU2V0dGluZ3MoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwbHVnaW5NYW5hZ2VyID0gd2luZG93LmFwcC5wbHVnaW5zO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcInF1YXJ0ZXJseVwiKSAmJlxuICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKT8uc2V0dGluZ3M/LnF1YXJ0ZXJseSkgfHxcbiAgICAgICAgICAgIHt9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZm9ybWF0OiBzZXR0aW5ncy5mb3JtYXQgfHwgREVGQVVMVF9RVUFSVEVSTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICBmb2xkZXI6IHNldHRpbmdzLmZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogc2V0dGluZ3MudGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSBxdWFydGVybHkgbm90ZSBzZXR0aW5ncyBmb3VuZCFcIiwgZXJyKTtcbiAgICB9XG59XG4vKipcbiAqIFJlYWQgdGhlIHVzZXIgc2V0dGluZ3MgZm9yIHRoZSBgcGVyaW9kaWMtbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldFllYXJseU5vdGVTZXR0aW5ncygpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBsdWdpbk1hbmFnZXIgPSB3aW5kb3cuYXBwLnBsdWdpbnM7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSAoc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKFwieWVhcmx5XCIpICYmXG4gICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpPy5zZXR0aW5ncz8ueWVhcmx5KSB8fFxuICAgICAgICAgICAge307XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHNldHRpbmdzLmZvcm1hdCB8fCBERUZBVUxUX1lFQVJMWV9OT1RFX0ZPUk1BVCxcbiAgICAgICAgICAgIGZvbGRlcjogc2V0dGluZ3MuZm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBzZXR0aW5ncy50ZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5pbmZvKFwiTm8gY3VzdG9tIHllYXJseSBub3RlIHNldHRpbmdzIGZvdW5kIVwiLCBlcnIpO1xuICAgIH1cbn1cblxuLy8gQ3JlZGl0OiBAY3JlYXRpb25peC9wYXRoLmpzXG5mdW5jdGlvbiBqb2luKC4uLnBhcnRTZWdtZW50cykge1xuICAgIC8vIFNwbGl0IHRoZSBpbnB1dHMgaW50byBhIGxpc3Qgb2YgcGF0aCBjb21tYW5kcy5cbiAgICBsZXQgcGFydHMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IHBhcnRTZWdtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgcGFydHMgPSBwYXJ0cy5jb25jYXQocGFydFNlZ21lbnRzW2ldLnNwbGl0KFwiL1wiKSk7XG4gICAgfVxuICAgIC8vIEludGVycHJldCB0aGUgcGF0aCBjb21tYW5kcyB0byBnZXQgdGhlIG5ldyByZXNvbHZlZCBwYXRoLlxuICAgIGNvbnN0IG5ld1BhcnRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSBwYXJ0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgY29uc3QgcGFydCA9IHBhcnRzW2ldO1xuICAgICAgICAvLyBSZW1vdmUgbGVhZGluZyBhbmQgdHJhaWxpbmcgc2xhc2hlc1xuICAgICAgICAvLyBBbHNvIHJlbW92ZSBcIi5cIiBzZWdtZW50c1xuICAgICAgICBpZiAoIXBhcnQgfHwgcGFydCA9PT0gXCIuXCIpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgLy8gUHVzaCBuZXcgcGF0aCBzZWdtZW50cy5cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbmV3UGFydHMucHVzaChwYXJ0KTtcbiAgICB9XG4gICAgLy8gUHJlc2VydmUgdGhlIGluaXRpYWwgc2xhc2ggaWYgdGhlcmUgd2FzIG9uZS5cbiAgICBpZiAocGFydHNbMF0gPT09IFwiXCIpXG4gICAgICAgIG5ld1BhcnRzLnVuc2hpZnQoXCJcIik7XG4gICAgLy8gVHVybiBiYWNrIGludG8gYSBzaW5nbGUgc3RyaW5nIHBhdGguXG4gICAgcmV0dXJuIG5ld1BhcnRzLmpvaW4oXCIvXCIpO1xufVxuZnVuY3Rpb24gYmFzZW5hbWUoZnVsbFBhdGgpIHtcbiAgICBsZXQgYmFzZSA9IGZ1bGxQYXRoLnN1YnN0cmluZyhmdWxsUGF0aC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICBpZiAoYmFzZS5sYXN0SW5kZXhPZihcIi5cIikgIT0gLTEpXG4gICAgICAgIGJhc2UgPSBiYXNlLnN1YnN0cmluZygwLCBiYXNlLmxhc3RJbmRleE9mKFwiLlwiKSk7XG4gICAgcmV0dXJuIGJhc2U7XG59XG5hc3luYyBmdW5jdGlvbiBlbnN1cmVGb2xkZXJFeGlzdHMocGF0aCkge1xuICAgIGNvbnN0IGRpcnMgPSBwYXRoLnJlcGxhY2UoL1xcXFwvZywgXCIvXCIpLnNwbGl0KFwiL1wiKTtcbiAgICBkaXJzLnBvcCgpOyAvLyByZW1vdmUgYmFzZW5hbWVcbiAgICBpZiAoZGlycy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgZGlyID0gam9pbiguLi5kaXJzKTtcbiAgICAgICAgaWYgKCF3aW5kb3cuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChkaXIpKSB7XG4gICAgICAgICAgICBhd2FpdCB3aW5kb3cuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihkaXIpO1xuICAgICAgICB9XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gZ2V0Tm90ZVBhdGgoZGlyZWN0b3J5LCBmaWxlbmFtZSkge1xuICAgIGlmICghZmlsZW5hbWUuZW5kc1dpdGgoXCIubWRcIikpIHtcbiAgICAgICAgZmlsZW5hbWUgKz0gXCIubWRcIjtcbiAgICB9XG4gICAgY29uc3QgcGF0aCA9IG9ic2lkaWFuLm5vcm1hbGl6ZVBhdGgoam9pbihkaXJlY3RvcnksIGZpbGVuYW1lKSk7XG4gICAgYXdhaXQgZW5zdXJlRm9sZGVyRXhpc3RzKHBhdGgpO1xuICAgIHJldHVybiBwYXRoO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0VGVtcGxhdGVJbmZvKHRlbXBsYXRlKSB7XG4gICAgY29uc3QgeyBtZXRhZGF0YUNhY2hlLCB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB0ZW1wbGF0ZVBhdGggPSBvYnNpZGlhbi5ub3JtYWxpemVQYXRoKHRlbXBsYXRlKTtcbiAgICBpZiAodGVtcGxhdGVQYXRoID09PSBcIi9cIikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtcIlwiLCBudWxsXSk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlRmlsZSA9IG1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QodGVtcGxhdGVQYXRoLCBcIlwiKTtcbiAgICAgICAgY29uc3QgY29udGVudHMgPSBhd2FpdCB2YXVsdC5jYWNoZWRSZWFkKHRlbXBsYXRlRmlsZSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IElGb2xkSW5mbyA9IHdpbmRvdy5hcHAuZm9sZE1hbmFnZXIubG9hZCh0ZW1wbGF0ZUZpbGUpO1xuICAgICAgICByZXR1cm4gW2NvbnRlbnRzLCBJRm9sZEluZm9dO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byByZWFkIHRoZSBkYWlseSBub3RlIHRlbXBsYXRlICcke3RlbXBsYXRlUGF0aH0nYCwgZXJyKTtcbiAgICAgICAgbmV3IG9ic2lkaWFuLk5vdGljZShcIkZhaWxlZCB0byByZWFkIHRoZSBkYWlseSBub3RlIHRlbXBsYXRlXCIpO1xuICAgICAgICByZXR1cm4gW1wiXCIsIG51bGxdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBkYXRlVUlEIGlzIGEgd2F5IG9mIHdlZWtseSBpZGVudGlmeWluZyBkYWlseS93ZWVrbHkvbW9udGhseSBub3Rlcy5cbiAqIFRoZXkgYXJlIHByZWZpeGVkIHdpdGggdGhlIGdyYW51bGFyaXR5IHRvIGF2b2lkIGFtYmlndWl0eS5cbiAqL1xuZnVuY3Rpb24gZ2V0RGF0ZVVJRChkYXRlLCBncmFudWxhcml0eSA9IFwiZGF5XCIpIHtcbiAgICBjb25zdCB0cyA9IGRhdGUuY2xvbmUoKS5zdGFydE9mKGdyYW51bGFyaXR5KS5mb3JtYXQoKTtcbiAgICByZXR1cm4gYCR7Z3JhbnVsYXJpdHl9LSR7dHN9YDtcbn1cbmZ1bmN0aW9uIHJlbW92ZUVzY2FwZWRDaGFyYWN0ZXJzKGZvcm1hdCkge1xuICAgIHJldHVybiBmb3JtYXQucmVwbGFjZSgvXFxbW15cXF1dKlxcXS9nLCBcIlwiKTsgLy8gcmVtb3ZlIGV2ZXJ5dGhpbmcgd2l0aGluIGJyYWNrZXRzXG59XG4vKipcbiAqIFhYWDogV2hlbiBwYXJzaW5nIGRhdGVzIHRoYXQgY29udGFpbiBib3RoIHdlZWsgbnVtYmVycyBhbmQgbW9udGhzLFxuICogTW9tZW50IGNob3NlcyB0byBpZ25vcmUgdGhlIHdlZWsgbnVtYmVycy4gRm9yIHRoZSB3ZWVrIGRhdGVVSUQsIHdlXG4gKiB3YW50IHRoZSBvcHBvc2l0ZSBiZWhhdmlvci4gU3RyaXAgdGhlIE1NTSBmcm9tIHRoZSBmb3JtYXQgdG8gcGF0Y2guXG4gKi9cbmZ1bmN0aW9uIGlzRm9ybWF0QW1iaWd1b3VzKGZvcm1hdCwgZ3JhbnVsYXJpdHkpIHtcbiAgICBpZiAoZ3JhbnVsYXJpdHkgPT09IFwid2Vla1wiKSB7XG4gICAgICAgIGNvbnN0IGNsZWFuRm9ybWF0ID0gcmVtb3ZlRXNjYXBlZENoYXJhY3RlcnMoZm9ybWF0KTtcbiAgICAgICAgcmV0dXJuICgvd3sxLDJ9L2kudGVzdChjbGVhbkZvcm1hdCkgJiZcbiAgICAgICAgICAgICgvTXsxLDR9Ly50ZXN0KGNsZWFuRm9ybWF0KSB8fCAvRHsxLDR9Ly50ZXN0KGNsZWFuRm9ybWF0KSkpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBnZXREYXRlRnJvbUZpbGUoZmlsZSwgZ3JhbnVsYXJpdHkpIHtcbiAgICByZXR1cm4gZ2V0RGF0ZUZyb21GaWxlbmFtZShmaWxlLmJhc2VuYW1lLCBncmFudWxhcml0eSk7XG59XG5mdW5jdGlvbiBnZXREYXRlRnJvbVBhdGgocGF0aCwgZ3JhbnVsYXJpdHkpIHtcbiAgICByZXR1cm4gZ2V0RGF0ZUZyb21GaWxlbmFtZShiYXNlbmFtZShwYXRoKSwgZ3JhbnVsYXJpdHkpO1xufVxuZnVuY3Rpb24gZ2V0RGF0ZUZyb21GaWxlbmFtZShmaWxlbmFtZSwgZ3JhbnVsYXJpdHkpIHtcbiAgICBjb25zdCBnZXRTZXR0aW5ncyA9IHtcbiAgICAgICAgZGF5OiBnZXREYWlseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgd2VlazogZ2V0V2Vla2x5Tm90ZVNldHRpbmdzLFxuICAgICAgICBtb250aDogZ2V0TW9udGhseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgcXVhcnRlcjogZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzLFxuICAgICAgICB5ZWFyOiBnZXRZZWFybHlOb3RlU2V0dGluZ3MsXG4gICAgfTtcbiAgICBjb25zdCBmb3JtYXQgPSBnZXRTZXR0aW5nc1tncmFudWxhcml0eV0oKS5mb3JtYXQuc3BsaXQoXCIvXCIpLnBvcCgpO1xuICAgIGNvbnN0IG5vdGVEYXRlID0gd2luZG93Lm1vbWVudChmaWxlbmFtZSwgZm9ybWF0LCB0cnVlKTtcbiAgICBpZiAoIW5vdGVEYXRlLmlzVmFsaWQoKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKGlzRm9ybWF0QW1iaWd1b3VzKGZvcm1hdCwgZ3JhbnVsYXJpdHkpKSB7XG4gICAgICAgIGlmIChncmFudWxhcml0eSA9PT0gXCJ3ZWVrXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsZWFuRm9ybWF0ID0gcmVtb3ZlRXNjYXBlZENoYXJhY3RlcnMoZm9ybWF0KTtcbiAgICAgICAgICAgIGlmICgvd3sxLDJ9L2kudGVzdChjbGVhbkZvcm1hdCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93Lm1vbWVudChmaWxlbmFtZSwgXG4gICAgICAgICAgICAgICAgLy8gSWYgZm9ybWF0IGNvbnRhaW5zIHdlZWssIHJlbW92ZSBkYXkgJiBtb250aCBmb3JtYXR0aW5nXG4gICAgICAgICAgICAgICAgZm9ybWF0LnJlcGxhY2UoL017MSw0fS9nLCBcIlwiKS5yZXBsYWNlKC9EezEsNH0vZywgXCJcIiksIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm90ZURhdGU7XG59XG5cbmNsYXNzIERhaWx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gbWltaWNzIHRoZSBiZWhhdmlvciBvZiB0aGUgZGFpbHktbm90ZXMgcGx1Z2luXG4gKiBzbyBpdCB3aWxsIHJlcGxhY2Uge3tkYXRlfX0sIHt7dGl0bGV9fSwgYW5kIHt7dGltZX19IHdpdGggdGhlXG4gKiBmb3JtYXR0ZWQgdGltZXN0YW1wLlxuICpcbiAqIE5vdGU6IGl0IGhhcyBhbiBhZGRlZCBib251cyB0aGF0IGl0J3Mgbm90ICd0b2RheScgc3BlY2lmaWMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURhaWx5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgYXBwID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSBhcHA7XG4gICAgY29uc3QgbW9tZW50ID0gd2luZG93Lm1vbWVudDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0RGFpbHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBbdGVtcGxhdGVDb250ZW50cywgSUZvbGRJbmZvXSA9IGF3YWl0IGdldFRlbXBsYXRlSW5mbyh0ZW1wbGF0ZSk7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBkYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gYXdhaXQgZ2V0Tm90ZVBhdGgoZm9sZGVyLCBmaWxlbmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3JlYXRlZEZpbGUgPSBhd2FpdCB2YXVsdC5jcmVhdGUobm9ybWFsaXplZFBhdGgsIHRlbXBsYXRlQ29udGVudHNcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccypkYXRlXFxzKn19L2dpLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aW1lXFxzKn19L2dpLCBtb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aXRsZVxccyp9fS9naSwgZmlsZW5hbWUpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSwgKF8sIF90aW1lT3JEYXRlLCBjYWxjLCB0aW1lRGVsdGEsIHVuaXQsIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gbW9tZW50KCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGRhdGUuY2xvbmUoKS5zZXQoe1xuICAgICAgICAgICAgICAgIGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxuICAgICAgICAgICAgICAgIG1pbnV0ZTogbm93LmdldChcIm1pbnV0ZVwiKSxcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IG5vdy5nZXQoXCJzZWNvbmRcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjYWxjKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudERhdGUuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb21lbnRGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KG1vbWVudEZvcm1hdC5zdWJzdHJpbmcoMSkudHJpbSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp5ZXN0ZXJkYXlcXHMqfX0vZ2ksIGRhdGUuY2xvbmUoKS5zdWJ0cmFjdCgxLCBcImRheVwiKS5mb3JtYXQoZm9ybWF0KSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0b21vcnJvd1xccyp9fS9naSwgZGF0ZS5jbG9uZSgpLmFkZCgxLCBcImRcIikuZm9ybWF0KGZvcm1hdCkpKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgYXBwLmZvbGRNYW5hZ2VyLnNhdmUoY3JlYXRlZEZpbGUsIElGb2xkSW5mbyk7XG4gICAgICAgIHJldHVybiBjcmVhdGVkRmlsZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGZpbGU6ICcke25vcm1hbGl6ZWRQYXRofSdgLCBlcnIpO1xuICAgICAgICBuZXcgb2JzaWRpYW4uTm90aWNlKFwiVW5hYmxlIHRvIGNyZWF0ZSBuZXcgZmlsZS5cIik7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0RGFpbHlOb3RlKGRhdGUsIGRhaWx5Tm90ZXMpIHtcbiAgICByZXR1cm4gZGFpbHlOb3Rlc1tnZXREYXRlVUlEKGRhdGUsIFwiZGF5XCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsRGFpbHlOb3RlcygpIHtcbiAgICAvKipcbiAgICAgKiBGaW5kIGFsbCBkYWlseSBub3RlcyBpbiB0aGUgZGFpbHkgbm90ZSBmb2xkZXJcbiAgICAgKi9cbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgZm9sZGVyIH0gPSBnZXREYWlseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IGRhaWx5Tm90ZXNGb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2JzaWRpYW4ubm9ybWFsaXplUGF0aChmb2xkZXIpKTtcbiAgICBpZiAoIWRhaWx5Tm90ZXNGb2xkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IERhaWx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IoXCJGYWlsZWQgdG8gZmluZCBkYWlseSBub3RlcyBmb2xkZXJcIik7XG4gICAgfVxuICAgIGNvbnN0IGRhaWx5Tm90ZXMgPSB7fTtcbiAgICBvYnNpZGlhbi5WYXVsdC5yZWN1cnNlQ2hpbGRyZW4oZGFpbHlOb3Rlc0ZvbGRlciwgKG5vdGUpID0+IHtcbiAgICAgICAgaWYgKG5vdGUgaW5zdGFuY2VvZiBvYnNpZGlhbi5URmlsZSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldERhdGVGcm9tRmlsZShub3RlLCBcImRheVwiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJkYXlcIik7XG4gICAgICAgICAgICAgICAgZGFpbHlOb3Rlc1tkYXRlU3RyaW5nXSA9IG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZGFpbHlOb3Rlcztcbn1cblxuY2xhc3MgV2Vla2x5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG5mdW5jdGlvbiBnZXREYXlzT2ZXZWVrKCkge1xuICAgIGNvbnN0IHsgbW9tZW50IH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBsZXQgd2Vla1N0YXJ0ID0gbW9tZW50LmxvY2FsZURhdGEoKS5fd2Vlay5kb3c7XG4gICAgY29uc3QgZGF5c09mV2VlayA9IFtcbiAgICAgICAgXCJzdW5kYXlcIixcbiAgICAgICAgXCJtb25kYXlcIixcbiAgICAgICAgXCJ0dWVzZGF5XCIsXG4gICAgICAgIFwid2VkbmVzZGF5XCIsXG4gICAgICAgIFwidGh1cnNkYXlcIixcbiAgICAgICAgXCJmcmlkYXlcIixcbiAgICAgICAgXCJzYXR1cmRheVwiLFxuICAgIF07XG4gICAgd2hpbGUgKHdlZWtTdGFydCkge1xuICAgICAgICBkYXlzT2ZXZWVrLnB1c2goZGF5c09mV2Vlay5zaGlmdCgpKTtcbiAgICAgICAgd2Vla1N0YXJ0LS07XG4gICAgfVxuICAgIHJldHVybiBkYXlzT2ZXZWVrO1xufVxuZnVuY3Rpb24gZ2V0RGF5T2ZXZWVrTnVtZXJpY2FsVmFsdWUoZGF5T2ZXZWVrTmFtZSkge1xuICAgIHJldHVybiBnZXREYXlzT2ZXZWVrKCkuaW5kZXhPZihkYXlPZldlZWtOYW1lLnRvTG93ZXJDYXNlKCkpO1xufVxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlV2Vla2x5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0V2Vla2x5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgW3RlbXBsYXRlQ29udGVudHMsIElGb2xkSW5mb10gPSBhd2FpdCBnZXRUZW1wbGF0ZUluZm8odGVtcGxhdGUpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IGF3YWl0IGdldE5vdGVQYXRoKGZvbGRlciwgZmlsZW5hbWUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRGaWxlID0gYXdhaXQgdmF1bHQuY3JlYXRlKG5vcm1hbGl6ZWRQYXRoLCB0ZW1wbGF0ZUNvbnRlbnRzXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSwgKF8sIF90aW1lT3JEYXRlLCBjYWxjLCB0aW1lRGVsdGEsIHVuaXQsIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gd2luZG93Lm1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBkYXRlLmNsb25lKCkuc2V0KHtcbiAgICAgICAgICAgICAgICBob3VyOiBub3cuZ2V0KFwiaG91clwiKSxcbiAgICAgICAgICAgICAgICBtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXG4gICAgICAgICAgICAgICAgc2Vjb25kOiBub3cuZ2V0KFwic2Vjb25kXCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2FsYykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLmFkZChwYXJzZUludCh0aW1lRGVsdGEsIDEwKSwgdW5pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9tZW50Rm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChtb21lbnRGb3JtYXQuc3Vic3RyaW5nKDEpLnRyaW0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGl0bGVcXHMqfX0vZ2ksIGZpbGVuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpbWVcXHMqfX0vZ2ksIHdpbmRvdy5tb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyooc3VuZGF5fG1vbmRheXx0dWVzZGF5fHdlZG5lc2RheXx0aHVyc2RheXxmcmlkYXl8c2F0dXJkYXkpXFxzKjooLio/KX19L2dpLCAoXywgZGF5T2ZXZWVrLCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRheSA9IGdldERheU9mV2Vla051bWVyaWNhbFZhbHVlKGRheU9mV2Vlayk7XG4gICAgICAgICAgICByZXR1cm4gZGF0ZS53ZWVrZGF5KGRheSkuZm9ybWF0KG1vbWVudEZvcm1hdC50cmltKCkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHdpbmRvdy5hcHAuZm9sZE1hbmFnZXIuc2F2ZShjcmVhdGVkRmlsZSwgSUZvbGRJbmZvKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRGaWxlO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgZmlsZTogJyR7bm9ybWFsaXplZFBhdGh9J2AsIGVycik7XG4gICAgICAgIG5ldyBvYnNpZGlhbi5Ob3RpY2UoXCJVbmFibGUgdG8gY3JlYXRlIG5ldyBmaWxlLlwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRXZWVrbHlOb3RlKGRhdGUsIHdlZWtseU5vdGVzKSB7XG4gICAgcmV0dXJuIHdlZWtseU5vdGVzW2dldERhdGVVSUQoZGF0ZSwgXCJ3ZWVrXCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsV2Vla2x5Tm90ZXMoKSB7XG4gICAgY29uc3Qgd2Vla2x5Tm90ZXMgPSB7fTtcbiAgICBpZiAoIWFwcEhhc1dlZWtseU5vdGVzUGx1Z2luTG9hZGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIHdlZWtseU5vdGVzO1xuICAgIH1cbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgZm9sZGVyIH0gPSBnZXRXZWVrbHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCB3ZWVrbHlOb3Rlc0ZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICghd2Vla2x5Tm90ZXNGb2xkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFdlZWtseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yKFwiRmFpbGVkIHRvIGZpbmQgd2Vla2x5IG5vdGVzIGZvbGRlclwiKTtcbiAgICB9XG4gICAgb2JzaWRpYW4uVmF1bHQucmVjdXJzZUNoaWxkcmVuKHdlZWtseU5vdGVzRm9sZGVyLCAobm90ZSkgPT4ge1xuICAgICAgICBpZiAobm90ZSBpbnN0YW5jZW9mIG9ic2lkaWFuLlRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gZ2V0RGF0ZUZyb21GaWxlKG5vdGUsIFwid2Vla1wiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJ3ZWVrXCIpO1xuICAgICAgICAgICAgICAgIHdlZWtseU5vdGVzW2RhdGVTdHJpbmddID0gbm90ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB3ZWVrbHlOb3Rlcztcbn1cblxuY2xhc3MgTW9udGhseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIG1pbWljcyB0aGUgYmVoYXZpb3Igb2YgdGhlIGRhaWx5LW5vdGVzIHBsdWdpblxuICogc28gaXQgd2lsbCByZXBsYWNlIHt7ZGF0ZX19LCB7e3RpdGxlfX0sIGFuZCB7e3RpbWV9fSB3aXRoIHRoZVxuICogZm9ybWF0dGVkIHRpbWVzdGFtcC5cbiAqXG4gKiBOb3RlOiBpdCBoYXMgYW4gYWRkZWQgYm9udXMgdGhhdCBpdCdzIG5vdCAndG9kYXknIHNwZWNpZmljLlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVNb250aGx5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0TW9udGhseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IFt0ZW1wbGF0ZUNvbnRlbnRzLCBJRm9sZEluZm9dID0gYXdhaXQgZ2V0VGVtcGxhdGVJbmZvKHRlbXBsYXRlKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGRhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFBhdGggPSBhd2FpdCBnZXROb3RlUGF0aChmb2xkZXIsIGZpbGVuYW1lKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjcmVhdGVkRmlsZSA9IGF3YWl0IHZhdWx0LmNyZWF0ZShub3JtYWxpemVkUGF0aCwgdGVtcGxhdGVDb250ZW50c1xuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKihkYXRlfHRpbWUpXFxzKigoWystXVxcZCspKFt5cW13ZGhzXSkpP1xccyooOi4rPyk/fX0vZ2ksIChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IHdpbmRvdy5tb21lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gZGF0ZS5jbG9uZSgpLnNldCh7XG4gICAgICAgICAgICAgICAgaG91cjogbm93LmdldChcImhvdXJcIiksXG4gICAgICAgICAgICAgICAgbWludXRlOiBub3cuZ2V0KFwibWludXRlXCIpLFxuICAgICAgICAgICAgICAgIHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNhbGMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZS5hZGQocGFyc2VJbnQodGltZURlbHRhLCAxMCksIHVuaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vbWVudEZvcm1hdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKmRhdGVcXHMqfX0vZ2ksIGZpbGVuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpbWVcXHMqfX0vZ2ksIHdpbmRvdy5tb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aXRsZVxccyp9fS9naSwgZmlsZW5hbWUpKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgd2luZG93LmFwcC5mb2xkTWFuYWdlci5zYXZlKGNyZWF0ZWRGaWxlLCBJRm9sZEluZm8pO1xuICAgICAgICByZXR1cm4gY3JlYXRlZEZpbGU7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBmaWxlOiAnJHtub3JtYWxpemVkUGF0aH0nYCwgZXJyKTtcbiAgICAgICAgbmV3IG9ic2lkaWFuLk5vdGljZShcIlVuYWJsZSB0byBjcmVhdGUgbmV3IGZpbGUuXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldE1vbnRobHlOb3RlKGRhdGUsIG1vbnRobHlOb3Rlcykge1xuICAgIHJldHVybiBtb250aGx5Tm90ZXNbZ2V0RGF0ZVVJRChkYXRlLCBcIm1vbnRoXCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsTW9udGhseU5vdGVzKCkge1xuICAgIGNvbnN0IG1vbnRobHlOb3RlcyA9IHt9O1xuICAgIGlmICghYXBwSGFzTW9udGhseU5vdGVzUGx1Z2luTG9hZGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIG1vbnRobHlOb3RlcztcbiAgICB9XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IGZvbGRlciB9ID0gZ2V0TW9udGhseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IG1vbnRobHlOb3Rlc0ZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICghbW9udGhseU5vdGVzRm9sZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBNb250aGx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IoXCJGYWlsZWQgdG8gZmluZCBtb250aGx5IG5vdGVzIGZvbGRlclwiKTtcbiAgICB9XG4gICAgb2JzaWRpYW4uVmF1bHQucmVjdXJzZUNoaWxkcmVuKG1vbnRobHlOb3Rlc0ZvbGRlciwgKG5vdGUpID0+IHtcbiAgICAgICAgaWYgKG5vdGUgaW5zdGFuY2VvZiBvYnNpZGlhbi5URmlsZSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldERhdGVGcm9tRmlsZShub3RlLCBcIm1vbnRoXCIpO1xuICAgICAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gZ2V0RGF0ZVVJRChkYXRlLCBcIm1vbnRoXCIpO1xuICAgICAgICAgICAgICAgIG1vbnRobHlOb3Rlc1tkYXRlU3RyaW5nXSA9IG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbW9udGhseU5vdGVzO1xufVxuXG5jbGFzcyBRdWFydGVybHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvciBleHRlbmRzIEVycm9yIHtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBtaW1pY3MgdGhlIGJlaGF2aW9yIG9mIHRoZSBkYWlseS1ub3RlcyBwbHVnaW5cbiAqIHNvIGl0IHdpbGwgcmVwbGFjZSB7e2RhdGV9fSwge3t0aXRsZX19LCBhbmQge3t0aW1lfX0gd2l0aCB0aGVcbiAqIGZvcm1hdHRlZCB0aW1lc3RhbXAuXG4gKlxuICogTm90ZTogaXQgaGFzIGFuIGFkZGVkIGJvbnVzIHRoYXQgaXQncyBub3QgJ3RvZGF5JyBzcGVjaWZpYy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlUXVhcnRlcmx5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgW3RlbXBsYXRlQ29udGVudHMsIElGb2xkSW5mb10gPSBhd2FpdCBnZXRUZW1wbGF0ZUluZm8odGVtcGxhdGUpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IGF3YWl0IGdldE5vdGVQYXRoKGZvbGRlciwgZmlsZW5hbWUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRGaWxlID0gYXdhaXQgdmF1bHQuY3JlYXRlKG5vcm1hbGl6ZWRQYXRoLCB0ZW1wbGF0ZUNvbnRlbnRzXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSwgKF8sIF90aW1lT3JEYXRlLCBjYWxjLCB0aW1lRGVsdGEsIHVuaXQsIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gd2luZG93Lm1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBkYXRlLmNsb25lKCkuc2V0KHtcbiAgICAgICAgICAgICAgICBob3VyOiBub3cuZ2V0KFwiaG91clwiKSxcbiAgICAgICAgICAgICAgICBtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXG4gICAgICAgICAgICAgICAgc2Vjb25kOiBub3cuZ2V0KFwic2Vjb25kXCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2FsYykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLmFkZChwYXJzZUludCh0aW1lRGVsdGEsIDEwKSwgdW5pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9tZW50Rm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChtb21lbnRGb3JtYXQuc3Vic3RyaW5nKDEpLnRyaW0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqZGF0ZVxccyp9fS9naSwgZmlsZW5hbWUpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGltZVxccyp9fS9naSwgd2luZG93Lm1vbWVudCgpLmZvcm1hdChcIkhIOm1tXCIpKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpdGxlXFxzKn19L2dpLCBmaWxlbmFtZSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB3aW5kb3cuYXBwLmZvbGRNYW5hZ2VyLnNhdmUoY3JlYXRlZEZpbGUsIElGb2xkSW5mbyk7XG4gICAgICAgIHJldHVybiBjcmVhdGVkRmlsZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGZpbGU6ICcke25vcm1hbGl6ZWRQYXRofSdgLCBlcnIpO1xuICAgICAgICBuZXcgb2JzaWRpYW4uTm90aWNlKFwiVW5hYmxlIHRvIGNyZWF0ZSBuZXcgZmlsZS5cIik7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0UXVhcnRlcmx5Tm90ZShkYXRlLCBxdWFydGVybHkpIHtcbiAgICByZXR1cm4gcXVhcnRlcmx5W2dldERhdGVVSUQoZGF0ZSwgXCJxdWFydGVyXCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsUXVhcnRlcmx5Tm90ZXMoKSB7XG4gICAgY29uc3QgcXVhcnRlcmx5ID0ge307XG4gICAgaWYgKCFhcHBIYXNRdWFydGVybHlOb3Rlc1BsdWdpbkxvYWRlZCgpKSB7XG4gICAgICAgIHJldHVybiBxdWFydGVybHk7XG4gICAgfVxuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyBmb2xkZXIgfSA9IGdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IHF1YXJ0ZXJseUZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICghcXVhcnRlcmx5Rm9sZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBRdWFydGVybHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvcihcIkZhaWxlZCB0byBmaW5kIHF1YXJ0ZXJseSBub3RlcyBmb2xkZXJcIik7XG4gICAgfVxuICAgIG9ic2lkaWFuLlZhdWx0LnJlY3Vyc2VDaGlsZHJlbihxdWFydGVybHlGb2xkZXIsIChub3RlKSA9PiB7XG4gICAgICAgIGlmIChub3RlIGluc3RhbmNlb2Ygb2JzaWRpYW4uVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBnZXREYXRlRnJvbUZpbGUobm90ZSwgXCJxdWFydGVyXCIpO1xuICAgICAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gZ2V0RGF0ZVVJRChkYXRlLCBcInF1YXJ0ZXJcIik7XG4gICAgICAgICAgICAgICAgcXVhcnRlcmx5W2RhdGVTdHJpbmddID0gbm90ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBxdWFydGVybHk7XG59XG5cbmNsYXNzIFllYXJseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIG1pbWljcyB0aGUgYmVoYXZpb3Igb2YgdGhlIGRhaWx5LW5vdGVzIHBsdWdpblxuICogc28gaXQgd2lsbCByZXBsYWNlIHt7ZGF0ZX19LCB7e3RpdGxlfX0sIGFuZCB7e3RpbWV9fSB3aXRoIHRoZVxuICogZm9ybWF0dGVkIHRpbWVzdGFtcC5cbiAqXG4gKiBOb3RlOiBpdCBoYXMgYW4gYWRkZWQgYm9udXMgdGhhdCBpdCdzIG5vdCAndG9kYXknIHNwZWNpZmljLlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVZZWFybHlOb3RlKGRhdGUpIHtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgdGVtcGxhdGUsIGZvcm1hdCwgZm9sZGVyIH0gPSBnZXRZZWFybHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBbdGVtcGxhdGVDb250ZW50cywgSUZvbGRJbmZvXSA9IGF3YWl0IGdldFRlbXBsYXRlSW5mbyh0ZW1wbGF0ZSk7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBkYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gYXdhaXQgZ2V0Tm90ZVBhdGgoZm9sZGVyLCBmaWxlbmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3JlYXRlZEZpbGUgPSBhd2FpdCB2YXVsdC5jcmVhdGUobm9ybWFsaXplZFBhdGgsIHRlbXBsYXRlQ29udGVudHNcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyooZGF0ZXx0aW1lKVxccyooKFsrLV1cXGQrKShbeXFtd2Roc10pKT9cXHMqKDouKz8pP319L2dpLCAoXywgX3RpbWVPckRhdGUsIGNhbGMsIHRpbWVEZWx0YSwgdW5pdCwgbW9tZW50Rm9ybWF0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSB3aW5kb3cubW9tZW50KCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGRhdGUuY2xvbmUoKS5zZXQoe1xuICAgICAgICAgICAgICAgIGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxuICAgICAgICAgICAgICAgIG1pbnV0ZTogbm93LmdldChcIm1pbnV0ZVwiKSxcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IG5vdy5nZXQoXCJzZWNvbmRcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjYWxjKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudERhdGUuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb21lbnRGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KG1vbWVudEZvcm1hdC5zdWJzdHJpbmcoMSkudHJpbSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccypkYXRlXFxzKn19L2dpLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aW1lXFxzKn19L2dpLCB3aW5kb3cubW9tZW50KCkuZm9ybWF0KFwiSEg6bW1cIikpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGl0bGVcXHMqfX0vZ2ksIGZpbGVuYW1lKSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHdpbmRvdy5hcHAuZm9sZE1hbmFnZXIuc2F2ZShjcmVhdGVkRmlsZSwgSUZvbGRJbmZvKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRGaWxlO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgZmlsZTogJyR7bm9ybWFsaXplZFBhdGh9J2AsIGVycik7XG4gICAgICAgIG5ldyBvYnNpZGlhbi5Ob3RpY2UoXCJVbmFibGUgdG8gY3JlYXRlIG5ldyBmaWxlLlwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRZZWFybHlOb3RlKGRhdGUsIHllYXJseU5vdGVzKSB7XG4gICAgcmV0dXJuIHllYXJseU5vdGVzW2dldERhdGVVSUQoZGF0ZSwgXCJ5ZWFyXCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsWWVhcmx5Tm90ZXMoKSB7XG4gICAgY29uc3QgeWVhcmx5Tm90ZXMgPSB7fTtcbiAgICBpZiAoIWFwcEhhc1llYXJseU5vdGVzUGx1Z2luTG9hZGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIHllYXJseU5vdGVzO1xuICAgIH1cbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgZm9sZGVyIH0gPSBnZXRZZWFybHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCB5ZWFybHlOb3Rlc0ZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICgheWVhcmx5Tm90ZXNGb2xkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFllYXJseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yKFwiRmFpbGVkIHRvIGZpbmQgeWVhcmx5IG5vdGVzIGZvbGRlclwiKTtcbiAgICB9XG4gICAgb2JzaWRpYW4uVmF1bHQucmVjdXJzZUNoaWxkcmVuKHllYXJseU5vdGVzRm9sZGVyLCAobm90ZSkgPT4ge1xuICAgICAgICBpZiAobm90ZSBpbnN0YW5jZW9mIG9ic2lkaWFuLlRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gZ2V0RGF0ZUZyb21GaWxlKG5vdGUsIFwieWVhclwiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJ5ZWFyXCIpO1xuICAgICAgICAgICAgICAgIHllYXJseU5vdGVzW2RhdGVTdHJpbmddID0gbm90ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB5ZWFybHlOb3Rlcztcbn1cblxuZnVuY3Rpb24gYXBwSGFzRGFpbHlOb3Rlc1BsdWdpbkxvYWRlZCgpIHtcbiAgICBjb25zdCB7IGFwcCB9ID0gd2luZG93O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgZGFpbHlOb3Rlc1BsdWdpbiA9IGFwcC5pbnRlcm5hbFBsdWdpbnMucGx1Z2luc1tcImRhaWx5LW5vdGVzXCJdO1xuICAgIGlmIChkYWlseU5vdGVzUGx1Z2luICYmIGRhaWx5Tm90ZXNQbHVnaW4uZW5hYmxlZCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8uZGFpbHk/LmVuYWJsZWQ7XG59XG4vKipcbiAqIFhYWDogXCJXZWVrbHkgTm90ZXNcIiBsaXZlIGluIGVpdGhlciB0aGUgQ2FsZW5kYXIgcGx1Z2luIG9yIHRoZSBwZXJpb2RpYy1ub3RlcyBwbHVnaW4uXG4gKiBDaGVjayBib3RoIHVudGlsIHRoZSB3ZWVrbHkgbm90ZXMgZmVhdHVyZSBpcyByZW1vdmVkIGZyb20gdGhlIENhbGVuZGFyIHBsdWdpbi5cbiAqL1xuZnVuY3Rpb24gYXBwSGFzV2Vla2x5Tm90ZXNQbHVnaW5Mb2FkZWQoKSB7XG4gICAgY29uc3QgeyBhcHAgfSA9IHdpbmRvdztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGlmIChhcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJjYWxlbmRhclwiKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8ud2Vla2x5Py5lbmFibGVkO1xufVxuZnVuY3Rpb24gYXBwSGFzTW9udGhseU5vdGVzUGx1Z2luTG9hZGVkKCkge1xuICAgIGNvbnN0IHsgYXBwIH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8ubW9udGhseT8uZW5hYmxlZDtcbn1cbmZ1bmN0aW9uIGFwcEhhc1F1YXJ0ZXJseU5vdGVzUGx1Z2luTG9hZGVkKCkge1xuICAgIGNvbnN0IHsgYXBwIH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8ucXVhcnRlcmx5Py5lbmFibGVkO1xufVxuZnVuY3Rpb24gYXBwSGFzWWVhcmx5Tm90ZXNQbHVnaW5Mb2FkZWQoKSB7XG4gICAgY29uc3QgeyBhcHAgfSA9IHdpbmRvdztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBlcmlvZGljTm90ZXMgPSBhcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKTtcbiAgICByZXR1cm4gcGVyaW9kaWNOb3RlcyAmJiBwZXJpb2RpY05vdGVzLnNldHRpbmdzPy55ZWFybHk/LmVuYWJsZWQ7XG59XG5mdW5jdGlvbiBnZXRQZXJpb2RpY05vdGVTZXR0aW5ncyhncmFudWxhcml0eSkge1xuICAgIGNvbnN0IGdldFNldHRpbmdzID0ge1xuICAgICAgICBkYXk6IGdldERhaWx5Tm90ZVNldHRpbmdzLFxuICAgICAgICB3ZWVrOiBnZXRXZWVrbHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIG1vbnRoOiBnZXRNb250aGx5Tm90ZVNldHRpbmdzLFxuICAgICAgICBxdWFydGVyOiBnZXRRdWFydGVybHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIHllYXI6IGdldFllYXJseU5vdGVTZXR0aW5ncyxcbiAgICB9W2dyYW51bGFyaXR5XTtcbiAgICByZXR1cm4gZ2V0U2V0dGluZ3MoKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVBlcmlvZGljTm90ZShncmFudWxhcml0eSwgZGF0ZSkge1xuICAgIGNvbnN0IGNyZWF0ZUZuID0ge1xuICAgICAgICBkYXk6IGNyZWF0ZURhaWx5Tm90ZSxcbiAgICAgICAgbW9udGg6IGNyZWF0ZU1vbnRobHlOb3RlLFxuICAgICAgICB3ZWVrOiBjcmVhdGVXZWVrbHlOb3RlLFxuICAgIH07XG4gICAgcmV0dXJuIGNyZWF0ZUZuW2dyYW51bGFyaXR5XShkYXRlKTtcbn1cblxuZXhwb3J0cy5ERUZBVUxUX0RBSUxZX05PVEVfRk9STUFUID0gREVGQVVMVF9EQUlMWV9OT1RFX0ZPUk1BVDtcbmV4cG9ydHMuREVGQVVMVF9NT05USExZX05PVEVfRk9STUFUID0gREVGQVVMVF9NT05USExZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5ERUZBVUxUX1FVQVJURVJMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfUVVBUlRFUkxZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5ERUZBVUxUX1dFRUtMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfV0VFS0xZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5ERUZBVUxUX1lFQVJMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfWUVBUkxZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5hcHBIYXNEYWlseU5vdGVzUGx1Z2luTG9hZGVkID0gYXBwSGFzRGFpbHlOb3Rlc1BsdWdpbkxvYWRlZDtcbmV4cG9ydHMuYXBwSGFzTW9udGhseU5vdGVzUGx1Z2luTG9hZGVkID0gYXBwSGFzTW9udGhseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5hcHBIYXNRdWFydGVybHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc1F1YXJ0ZXJseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5hcHBIYXNXZWVrbHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc1dlZWtseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5hcHBIYXNZZWFybHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc1llYXJseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5jcmVhdGVEYWlseU5vdGUgPSBjcmVhdGVEYWlseU5vdGU7XG5leHBvcnRzLmNyZWF0ZU1vbnRobHlOb3RlID0gY3JlYXRlTW9udGhseU5vdGU7XG5leHBvcnRzLmNyZWF0ZVBlcmlvZGljTm90ZSA9IGNyZWF0ZVBlcmlvZGljTm90ZTtcbmV4cG9ydHMuY3JlYXRlUXVhcnRlcmx5Tm90ZSA9IGNyZWF0ZVF1YXJ0ZXJseU5vdGU7XG5leHBvcnRzLmNyZWF0ZVdlZWtseU5vdGUgPSBjcmVhdGVXZWVrbHlOb3RlO1xuZXhwb3J0cy5jcmVhdGVZZWFybHlOb3RlID0gY3JlYXRlWWVhcmx5Tm90ZTtcbmV4cG9ydHMuZ2V0QWxsRGFpbHlOb3RlcyA9IGdldEFsbERhaWx5Tm90ZXM7XG5leHBvcnRzLmdldEFsbE1vbnRobHlOb3RlcyA9IGdldEFsbE1vbnRobHlOb3RlcztcbmV4cG9ydHMuZ2V0QWxsUXVhcnRlcmx5Tm90ZXMgPSBnZXRBbGxRdWFydGVybHlOb3RlcztcbmV4cG9ydHMuZ2V0QWxsV2Vla2x5Tm90ZXMgPSBnZXRBbGxXZWVrbHlOb3RlcztcbmV4cG9ydHMuZ2V0QWxsWWVhcmx5Tm90ZXMgPSBnZXRBbGxZZWFybHlOb3RlcztcbmV4cG9ydHMuZ2V0RGFpbHlOb3RlID0gZ2V0RGFpbHlOb3RlO1xuZXhwb3J0cy5nZXREYWlseU5vdGVTZXR0aW5ncyA9IGdldERhaWx5Tm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXREYXRlRnJvbUZpbGUgPSBnZXREYXRlRnJvbUZpbGU7XG5leHBvcnRzLmdldERhdGVGcm9tUGF0aCA9IGdldERhdGVGcm9tUGF0aDtcbmV4cG9ydHMuZ2V0RGF0ZVVJRCA9IGdldERhdGVVSUQ7XG5leHBvcnRzLmdldE1vbnRobHlOb3RlID0gZ2V0TW9udGhseU5vdGU7XG5leHBvcnRzLmdldE1vbnRobHlOb3RlU2V0dGluZ3MgPSBnZXRNb250aGx5Tm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXRQZXJpb2RpY05vdGVTZXR0aW5ncyA9IGdldFBlcmlvZGljTm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXRRdWFydGVybHlOb3RlID0gZ2V0UXVhcnRlcmx5Tm90ZTtcbmV4cG9ydHMuZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzID0gZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXRUZW1wbGF0ZUluZm8gPSBnZXRUZW1wbGF0ZUluZm87XG5leHBvcnRzLmdldFdlZWtseU5vdGUgPSBnZXRXZWVrbHlOb3RlO1xuZXhwb3J0cy5nZXRXZWVrbHlOb3RlU2V0dGluZ3MgPSBnZXRXZWVrbHlOb3RlU2V0dGluZ3M7XG5leHBvcnRzLmdldFllYXJseU5vdGUgPSBnZXRZZWFybHlOb3RlO1xuZXhwb3J0cy5nZXRZZWFybHlOb3RlU2V0dGluZ3MgPSBnZXRZZWFybHlOb3RlU2V0dGluZ3M7XG4iLCAiLyoqXHJcbiAqIEhvbWUgQmFzZSBQbHVnaW5cclxuICogWW91ciBkZWRpY2F0ZWQgaG9tZSBpbiB5b3VyIHZhdWx0XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTm90aWNlLCBQbGF0Zm9ybSwgUGx1Z2luLCBhZGRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTLCBIb21lQmFzZVNldHRpbmdzLCBIb21lQmFzZVR5cGUgfSBmcm9tICcuL3NldHRpbmdzJztcclxuaW1wb3J0IHsgSG9tZUJhc2VTZXR0aW5nVGFiIH0gZnJvbSAnLi91aS9zZXR0aW5ncy10YWInO1xyXG5pbXBvcnQgeyBIb21lQmFzZVNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL2hvbWUtc2VydmljZSc7XHJcbmltcG9ydCB7IE5ld1RhYlNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL25ldy10YWItc2VydmljZSc7XHJcbmltcG9ydCB7IFN0aWNreVRhYlNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL3N0aWNreS10YWItc2VydmljZSc7XHJcbmltcG9ydCB7IE1vYmlsZUJ1dHRvblNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL21vYmlsZS1idXR0b24tc2VydmljZSc7XHJcblxyXG4vKipcclxuICogRXh0ZW5kZWQgQXBwIGludGVyZmFjZSBmb3IgcmVsZWFzZSBub3RlcyBwYXRjaGluZ1xyXG4gKi9cclxuaW50ZXJmYWNlIEFwcFdpdGhSZWxlYXNlTm90ZXMge1xyXG5cdHNob3dSZWxlYXNlTm90ZXM/OiAoKSA9PiB2b2lkO1xyXG5cdG52T3JpZ19zaG93UmVsZWFzZU5vdGVzPzogKCkgPT4gdm9pZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEN1c3RvbSBob21lIGljb24gU1ZHIChMdWNpZGUgaG91c2UgaWNvbilcclxuICovXHJcbmNvbnN0IEhPTUVfSUNPTiA9IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+PHBhdGggZD1cIk0xNSAyMXYtOGExIDEgMCAwIDAtMS0xaC00YTEgMSAwIDAgMC0xIDF2OFwiLz48cGF0aCBkPVwiTTMgMTBhMiAyIDAgMCAxIC43MDktMS41MjhsNy02YTIgMiAwIDAgMSAyLjU4MiAwbDcgNkEyIDIgMCAwIDEgMjEgMTB2OWEyIDIgMCAwIDEtMiAySDVhMiAyIDAgMCAxLTItMnpcIi8+PC9zdmc+YDtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhvbWVCYXNlUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRzZXR0aW5ncyE6IEhvbWVCYXNlU2V0dGluZ3M7XHJcblx0XHJcblx0Ly8gU2VydmljZXNcclxuXHRob21lU2VydmljZSE6IEhvbWVCYXNlU2VydmljZTtcclxuXHRuZXdUYWJTZXJ2aWNlITogTmV3VGFiU2VydmljZTtcclxuXHRzdGlja3lUYWJTZXJ2aWNlITogU3RpY2t5VGFiU2VydmljZTtcclxuXHRtb2JpbGVCdXR0b25TZXJ2aWNlITogTW9iaWxlQnV0dG9uU2VydmljZTtcclxuXHRcclxuXHQvLyBSZWxlYXNlIG5vdGVzIHRyYWNraW5nXHJcblx0cHJpdmF0ZSBuZXdSZWxlYXNlOiBib29sZWFuID0gZmFsc2U7XHJcblx0XHJcblx0Ly8gVHJhY2sgaWYgcGF0Y2hlZCBvcGVuaW5nIGJlaGF2aW9yIGFscmVhZHkgcmFuXHJcblx0cHJpdmF0ZSBvcGVuaW5nQmVoYXZpb3JSYW46IGJvb2xlYW4gPSBmYWxzZTtcclxuXHRcclxuXHQvLyBUcmFjayBpZiB3ZSdyZSBjdXJyZW50bHkgaW4gc3RhcnR1cCAodG8gcHJldmVudCBoYW5kbGVPcGVuV2hlbkVtcHR5IGZyb20gZmlyaW5nKVxyXG5cdHByaXZhdGUgaXNTdGFydHVwOiBib29sZWFuID0gdHJ1ZTtcclxuXHJcblx0YXN5bmMgb25sb2FkKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHRcdFxyXG5cdFx0Ly8gTWlncmF0ZSBsZWdhY3kgc2V0dGluZ3Mgb24gZmlyc3QgbG9hZFxyXG5cdFx0YXdhaXQgdGhpcy5taWdyYXRlTGVnYWN5U2V0dGluZ3MoKTtcclxuXHJcblx0XHQvLyBQYXRjaCBvcGVuaW5nIGJlaGF2aW9yIGZvciBmYXN0IHN0YXJ0dXAgKGJlZm9yZSBvdGhlciBpbml0aWFsaXphdGlvbilcclxuXHRcdHRoaXMucGF0Y2hPcGVuaW5nQmVoYXZpb3IoKTtcclxuXHJcblx0XHQvLyBSZWdpc3RlciBjdXN0b20gaWNvblxyXG5cdFx0YWRkSWNvbignaG9tZS1iYXNlJywgSE9NRV9JQ09OKTtcclxuXHJcblx0XHQvLyBJbml0aWFsaXplIHNlcnZpY2VzXHJcblx0XHR0aGlzLmhvbWVTZXJ2aWNlID0gbmV3IEhvbWVCYXNlU2VydmljZSh0aGlzKTtcclxuXHRcdHRoaXMubmV3VGFiU2VydmljZSA9IG5ldyBOZXdUYWJTZXJ2aWNlKHRoaXMpO1xyXG5cdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlID0gbmV3IFN0aWNreVRhYlNlcnZpY2UodGhpcyk7XHJcblx0XHR0aGlzLm1vYmlsZUJ1dHRvblNlcnZpY2UgPSBuZXcgTW9iaWxlQnV0dG9uU2VydmljZSh0aGlzKTtcclxuXHJcblx0XHQvLyBBZGQgcmliYm9uIGljb25cclxuXHRcdHRoaXMuYWRkUmliYm9uSWNvbignaG9tZScsICdPcGVuIGhvbWUgYmFzZScsICgpID0+IHtcclxuXHRcdFx0dm9pZCB0aGlzLmhvbWVTZXJ2aWNlLm9wZW5Ib21lQmFzZSh7XHJcblx0XHRcdFx0cmVwbGFjZUFjdGl2ZUxlYWY6IGZhbHNlLFxyXG5cdFx0XHRcdHJ1bkNvbW1hbmQ6IHRydWUsXHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gUmVnaXN0ZXIgY29tbWFuZHNcclxuXHRcdHRoaXMucmVnaXN0ZXJDb21tYW5kcygpO1xyXG5cclxuXHRcdC8vIEFkZCBzZXR0aW5ncyB0YWJcclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgSG9tZUJhc2VTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG5cdFx0Ly8gV2FpdCBmb3IgbGF5b3V0IHRvIGJlIHJlYWR5XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XHJcblx0XHRcdC8vIFVzZSBhIHNtYWxsIGRlbGF5IHRvIGVuc3VyZSBET00gaXMgcmVhZHkgKGVzcGVjaWFsbHkgZm9yIHNldHRpbmdzIG1vZGFsIGRldGVjdGlvbilcclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgc2V0dGluZ3MgbW9kYWwgaXMgb3BlbiAtIGlmIHNvLCBza2lwIHN0YXJ0dXAgbG9naWNcclxuXHRcdFx0XHRpZiAodGhpcy5pc1NldHRpbmdzTW9kYWxPcGVuKCkpIHtcclxuXHRcdFx0XHRcdC8vIFN0aWxsIHVwZGF0ZSBVSSBmZWF0dXJlcywganVzdCBkb24ndCBydW4gc3RhcnR1cCBsb2dpY1xyXG5cdFx0XHRcdFx0dGhpcy51cGRhdGVTdGlja3lUYWJJY29uKCk7XHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZU1vYmlsZUJ1dHRvbigpO1xyXG5cdFx0XHRcdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlLnVwZGF0ZVRhYkhlYWRlcnMoKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIEFsd2F5cyBpbml0aWFsaXplIHRoZSBuZXcgdGFiIHNlcnZpY2UgdG8gdHJhY2sgZXhpc3RpbmcgbGVhdmVzXHJcblx0XHRcdFx0Ly8gVGhpcyBpcyBuZWVkZWQgZm9yIG5ldyB0YWIgcmVwbGFjZW1lbnQgdG8gd29ya1xyXG5cdFx0XHRcdC8vIEJ1dCBvbmx5IHJ1biBzdGFydHVwIGxvZ2ljIGlmIG9wZW5pbmcgYmVoYXZpb3IgZGlkbid0IGFscmVhZHkgcnVuXHJcblx0XHRcdFx0aWYgKCF0aGlzLm9wZW5pbmdCZWhhdmlvclJhbikge1xyXG5cdFx0XHRcdFx0Ly8gT3BlbmluZyBiZWhhdmlvciBkaWRuJ3QgcnVuLCBzbyBpbml0aWFsaXplIG5vcm1hbGx5IChpbmNsdWRlcyBzdGFydHVwKVxyXG5cdFx0XHRcdFx0dGhpcy5uZXdUYWJTZXJ2aWNlLmluaXRpYWxpemUoKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gT3BlbmluZyBiZWhhdmlvciBhbHJlYWR5IHJhbiwgYnV0IHdlIHN0aWxsIG5lZWQgdG8gdHJhY2sgZXhpc3RpbmcgbGVhdmVzXHJcblx0XHRcdFx0XHQvLyBmb3IgbmV3IHRhYiByZXBsYWNlbWVudCB0byB3b3JrXHJcblx0XHRcdFx0XHR0aGlzLm5ld1RhYlNlcnZpY2UudHJhY2tFeGlzdGluZ0xlYXZlcygpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gUmVzdG9yZSBnaG9zdCBsZWF2ZXMgZnJvbSBwcmV2aW91cyBzZXNzaW9uIGJlZm9yZSB1cGRhdGluZyBVSVxyXG5cdFx0XHRcdHRoaXMuaG9tZVNlcnZpY2UucmVzdG9yZUdob3N0TGVhdmVzKCk7XHJcblxyXG5cdFx0XHRcdC8vIE1hcmsgc3RhcnR1cCBhcyBjb21wbGV0ZSBhZnRlciBhIGRlbGF5IHRvIGFsbG93IGV2ZXJ5dGhpbmcgdG8gc2V0dGxlXHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLmlzU3RhcnR1cCA9IGZhbHNlO1xyXG5cdFx0XHRcdH0sIDEwMDApO1xyXG5cclxuXHRcdFx0XHQvLyBVcGRhdGUgVUkgZmVhdHVyZXNcclxuXHRcdFx0XHR0aGlzLnVwZGF0ZVN0aWNreVRhYkljb24oKTtcclxuXHRcdFx0XHR0aGlzLnVwZGF0ZU1vYmlsZUJ1dHRvbigpO1xyXG5cclxuXHRcdFx0XHQvLyBVcGRhdGUgdGFiIGhlYWRlcnMgYWZ0ZXIgbGF5b3V0IGlzIHJlYWR5XHJcblx0XHRcdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlLnVwZGF0ZVRhYkhlYWRlcnMoKTtcclxuXHRcdFx0fSwgMTAwKTsgLy8gU21hbGwgZGVsYXkgdG8gZW5zdXJlIERPTSBpcyByZWFkeVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gUmVnaXN0ZXIgbGF5b3V0IGNoYW5nZSBoYW5kbGVyXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbignbGF5b3V0LWNoYW5nZScsIGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHR0aGlzLm5ld1RhYlNlcnZpY2UuaGFuZGxlTGF5b3V0Q2hhbmdlKCk7XHJcblx0XHRcdFx0Ly8gSGFuZGxlIHJldmVydCB2aWV3IG9uIGNsb3NlXHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MucmV2ZXJ0Vmlldykge1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5ob21lU2VydmljZS5yZXZlcnRWaWV3KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFwiT3BlbiB3aGVuIGVtcHR5XCIgZmVhdHVyZSByZW1vdmVkIC0gdXNlIFwiTmV3IHRhYiByZXBsYWNlbWVudDogb25seSB3aGVuIGVtcHR5XCIgaW5zdGVhZFxyXG5cdFx0XHRcdC8vIFRoZXkgZG8gdGhlIHNhbWUgdGhpbmcgc2luY2UgT2JzaWRpYW4gYXV0by1jcmVhdGVzIGFuIGVtcHR5IHRhYiB3aGVuIHlvdSBjbG9zZSB0aGUgbGFzdCBvbmVcclxuXHRcdFx0XHQvLyBEZWxheSB0YWIgaGVhZGVyIHVwZGF0ZXMgdG8gYXZvaWQgZmxpY2tlcmluZyBkdXJpbmcgdGFiIHRyYW5zaXRpb25zXHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlQWN0aXZlU3RhdGUoKTtcclxuXHRcdFx0XHRcdHRoaXMuc3RpY2t5VGFiU2VydmljZS51cGRhdGVUYWJIZWFkZXJzKCk7XHJcblx0XHRcdFx0XHQvLyBBbHNvIHVwZGF0ZSBpY29uIHBvc2l0aW9uIGluIGNhc2Ugc2lkZWJhciBzdGF0ZSBjaGFuZ2VkXHJcblx0XHRcdFx0XHR0aGlzLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlSWNvblBvc2l0aW9uRm9yU2lkZWJhcigpO1xyXG5cdFx0XHRcdH0sIDE1MCk7XHJcblx0XHRcdH0pXHJcblx0XHQpO1xyXG5cclxuXHRcdC8vIFJlZ2lzdGVyIGZpbGUgb3BlbiBoYW5kbGVyIGZvciBhY3RpdmUgc3RhdGUgdXBkYXRlc1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtb3BlbicsICgpID0+IHtcclxuXHRcdFx0XHQvLyBEZWxheSB1cGRhdGVzIHRvIGxldCBmaWxlIG9wZW4gYW5pbWF0aW9uIGNvbXBsZXRlXHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlQWN0aXZlU3RhdGUoKTtcclxuXHRcdFx0XHRcdHRoaXMuc3RpY2t5VGFiU2VydmljZS51cGRhdGVUYWJIZWFkZXJzKCk7XHJcblx0XHRcdFx0fSwgMTAwKTtcclxuXHRcdFx0fSlcclxuXHRcdCk7XHJcblxyXG5cdFx0Ly8gUmVnaXN0ZXIgYWN0aXZlIGxlYWYgY2hhbmdlIGhhbmRsZXIgZm9yIHRhYiBoZWFkZXIgdXBkYXRlc1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2FjdGl2ZS1sZWFmLWNoYW5nZScsICgpID0+IHtcclxuXHRcdFx0XHQvLyBEZWxheSB0byBsZXQgdGFiIHN3aXRjaCBhbmltYXRpb24gY29tcGxldGVcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMuc3RpY2t5VGFiU2VydmljZS51cGRhdGVUYWJIZWFkZXJzKCk7XHJcblx0XHRcdFx0fSwgMTAwKTtcclxuXHRcdFx0fSlcclxuXHRcdCk7XHJcblxyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKTogdm9pZCB7XHJcblx0XHQvLyBVbnBhdGNoIHJlbGVhc2Ugbm90ZXNcclxuXHRcdHRoaXMudW5wYXRjaFJlbGVhc2VOb3RlcygpO1xyXG5cdFx0XHJcblx0XHQvLyBVbnBhdGNoIG9wZW5pbmcgYmVoYXZpb3JcclxuXHRcdHRoaXMudW5wYXRjaE9wZW5pbmdCZWhhdmlvcigpO1xyXG5cdFx0XHJcblx0XHQvLyBDbGVhbiB1cCBzZXJ2aWNlc1xyXG5cdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlLnJlbW92ZSgpO1xyXG5cdFx0dGhpcy5tb2JpbGVCdXR0b25TZXJ2aWNlLnJlbW92ZSgpO1xyXG5cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlZ2lzdGVyIHBsdWdpbiBjb21tYW5kc1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgcmVnaXN0ZXJDb21tYW5kcygpOiB2b2lkIHtcclxuXHRcdC8vIE9wZW4gaG9tZSBiYXNlXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ29wZW4nLFxyXG5cdFx0XHRuYW1lOiAnT3BlbicsXHJcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMuZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xyXG5cdFx0XHRcdGlmICghaG9tZUJhc2VTZXR0aW5ncy52YWx1ZSAmJiBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XHJcblx0XHRcdFx0XHRuZXcgTm90aWNlKCdObyBob21lIGJhc2UgY29uZmlndXJlZC4gU2V0IG9uZSBpbiBzZXR0aW5ncy4nKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dm9pZCB0aGlzLmhvbWVTZXJ2aWNlLm9wZW5Ib21lQmFzZSh7XHJcblx0XHRcdFx0XHRyZXBsYWNlQWN0aXZlTGVhZjogZmFsc2UsXHJcblx0XHRcdFx0XHRydW5Db21tYW5kOiB0cnVlLFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gU2V0IGN1cnJlbnQgZmlsZSBhcyBob21lIGJhc2VcclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnc2V0LWN1cnJlbnQtZmlsZScsXHJcblx0XHRcdG5hbWU6ICdTZXQgY3VycmVudCBmaWxlIGFzIGhvbWUnLFxyXG5cdFx0XHRjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmcpID0+IHtcclxuXHRcdFx0XHRpZiAoIXRoaXMuaG9tZVNlcnZpY2UuY2FuU2V0QWN0aXZlRmlsZUFzSG9tZUJhc2UoKSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIWNoZWNraW5nKSB7XHJcblx0XHRcdFx0XHR2b2lkIHRoaXMuaG9tZVNlcnZpY2Uuc2V0QWN0aXZlRmlsZUFzSG9tZUJhc2UoKS50aGVuKChzdWNjZXNzKSA9PiB7XHJcblx0XHRcdFx0XHRcdGlmIChzdWNjZXNzKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShgSG9tZSBiYXNlIHNldCB0byBcIiR7YWN0aXZlRmlsZT8ubmFtZX1cImApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBUb2dnbGUgc3RpY2t5IGhvbWUgaWNvblxyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICd0b2dnbGUtc3RpY2t5LWljb24nLFxyXG5cdFx0XHRuYW1lOiAnVG9nZ2xlIHN0aWNreSBob21lIGljb24nLFxyXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuc3RpY2t5VGFiU2VydmljZS50b2dnbGUoKTtcclxuXHRcdFx0XHRjb25zdCBzdGF0ZSA9IHRoaXMuc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uID8gJ2VuYWJsZWQnIDogJ2Rpc2FibGVkJztcclxuXHRcdFx0XHRuZXcgTm90aWNlKGBTdGlja3kgaG9tZSBpY29uICR7c3RhdGV9YCk7XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBDbG9zZSBob21lIGJhc2VcclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnY2xvc2UnLFxyXG5cdFx0XHRuYW1lOiAnQ2xvc2UnLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuc3RpY2t5VGFiU2VydmljZS5jbG9zZUhvbWVCYXNlKCk7XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIExvYWQgcGx1Z2luIHNldHRpbmdzXHJcblx0ICovXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Y29uc3QgZGF0YSA9IChhd2FpdCB0aGlzLmxvYWREYXRhKCkpIGFzIFBhcnRpYWw8SG9tZUJhc2VTZXR0aW5ncz4gfCBudWxsO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGRhdGEgPz8ge30pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogTWlncmF0ZSBsZWdhY3kgc2V0dGluZ3MgdG8gbmV3IGZvcm1hdFxyXG5cdCAqL1xyXG5cdGFzeW5jIG1pZ3JhdGVMZWdhY3lTZXR0aW5ncygpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGxldCBuZWVkc1NhdmUgPSBmYWxzZTtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5zZXR0aW5ncyBhcyB1bmtub3duIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4gfCBIb21lQmFzZVR5cGUgfCB1bmRlZmluZWQ+O1xyXG5cdFx0XHJcblx0XHQvLyBNaWdyYXRlIGhvbWVCYXNlUGF0aCB0byBob21lQmFzZVR5cGUvaG9tZUJhc2VWYWx1ZVxyXG5cdFx0aWYgKHNldHRpbmdzLmhvbWVCYXNlUGF0aCAmJiAhdGhpcy5zZXR0aW5ncy5ob21lQmFzZVZhbHVlKSB7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MuaG9tZUJhc2VUeXBlID0gSG9tZUJhc2VUeXBlLkZpbGU7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MuaG9tZUJhc2VWYWx1ZSA9IHNldHRpbmdzLmhvbWVCYXNlUGF0aCBhcyBzdHJpbmc7XHJcblx0XHRcdG5lZWRzU2F2ZSA9IHRydWU7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIE1pZ3JhdGUga2VlcEV4aXN0aW5nVGFicyB0byBvcGVuTW9kZVxyXG5cdFx0aWYgKHNldHRpbmdzLmtlZXBFeGlzdGluZ1RhYnMgIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHQvLyBPbmx5IG1pZ3JhdGUgaWYgb3Blbk1vZGUgaXMgc3RpbGwgYXQgZGVmYXVsdCAoaGFzbid0IGJlZW4gc2V0IGJ5IHVzZXIpXHJcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLm9wZW5Nb2RlID09PSBERUZBVUxUX1NFVFRJTkdTLm9wZW5Nb2RlKSB7XHJcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5vcGVuTW9kZSA9IHNldHRpbmdzLmtlZXBFeGlzdGluZ1RhYnMgPyAncmV0YWluJyA6ICdyZXBsYWNlLWFsbCc7XHJcblx0XHRcdFx0bmVlZHNTYXZlID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBEZWxldGUgbGVnYWN5IHByb3BlcnR5IHNvIGl0IGRvZXNuJ3QgdHJpZ2dlciBhZ2FpblxyXG5cdFx0XHRkZWxldGUgc2V0dGluZ3Mua2VlcEV4aXN0aW5nVGFicztcclxuXHRcdFx0bmVlZHNTYXZlID0gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gTWlncmF0ZSBtb2JpbGUgaG9tZUJhc2VQYXRoXHJcblx0XHRpZiAoc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VQYXRoICYmICF0aGlzLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVmFsdWUpIHtcclxuXHRcdFx0dGhpcy5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVR5cGUgPSBIb21lQmFzZVR5cGUuRmlsZTtcclxuXHRcdFx0dGhpcy5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVZhbHVlID0gc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VQYXRoIGFzIHN0cmluZztcclxuXHRcdFx0bmVlZHNTYXZlID0gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBBbHNvIGNsZWFuIHVwIG1vYmlsZSBob21lIGJhc2UgcGF0aCBsZWdhY3kgcHJvcGVydHlcclxuXHRcdGlmIChzZXR0aW5ncy5tb2JpbGVIb21lQmFzZVBhdGggIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRkZWxldGUgc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VQYXRoO1xyXG5cdFx0XHRuZWVkc1NhdmUgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENsZWFuIHVwIGxlZ2FjeSBob21lQmFzZVBhdGggaWYgaXQgbWF0Y2hlcyBob21lQmFzZVZhbHVlXHJcblx0XHRpZiAoc2V0dGluZ3MuaG9tZUJhc2VQYXRoICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0ZGVsZXRlIHNldHRpbmdzLmhvbWVCYXNlUGF0aDtcclxuXHRcdFx0bmVlZHNTYXZlID0gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKG5lZWRzU2F2ZSkge1xyXG5cdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IHRoZSBhY3RpdmUgaG9tZSBiYXNlIHNldHRpbmdzIChtb2JpbGUgb3IgZGVza3RvcClcclxuXHQgKi9cclxuXHRnZXRIb21lQmFzZVNldHRpbmdzKCk6IHtcclxuXHRcdHR5cGU6IEhvbWVCYXNlVHlwZTtcclxuXHRcdHZhbHVlOiBzdHJpbmc7XHJcblx0fSB7XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5zZXBhcmF0ZU1vYmlsZSAmJiBQbGF0Zm9ybS5pc01vYmlsZSkge1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdHR5cGU6IHRoaXMuc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VUeXBlIHx8IEhvbWVCYXNlVHlwZS5GaWxlLFxyXG5cdFx0XHRcdHZhbHVlOiB0aGlzLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVmFsdWUgfHwgJycsXHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHR5cGU6IHRoaXMuc2V0dGluZ3MuaG9tZUJhc2VUeXBlIHx8IEhvbWVCYXNlVHlwZS5GaWxlLFxyXG5cdFx0XHR2YWx1ZTogdGhpcy5zZXR0aW5ncy5ob21lQmFzZVZhbHVlIHx8ICcnLFxyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCB0aGUgYWN0aXZlIG5ldyB0YWIgc2V0dGluZ3MgKG1vYmlsZSBvciBkZXNrdG9wKVxyXG5cdCAqIEZhbGxzIGJhY2sgdG8gaG9tZSBiYXNlIHNldHRpbmdzIGlmIHVzZURpZmZlcmVudEZpbGVGb3JOZXdUYWIgaXMgZGlzYWJsZWRcclxuXHQgKi9cclxuXHRnZXROZXdUYWJTZXR0aW5ncygpOiB7XHJcblx0XHR0eXBlOiBIb21lQmFzZVR5cGU7XHJcblx0XHR2YWx1ZTogc3RyaW5nO1xyXG5cdH0ge1xyXG5cdFx0Ly8gSWYgbm90IHVzaW5nIGRpZmZlcmVudCBmaWxlIGZvciBuZXcgdGFiLCBmYWxsIGJhY2sgdG8gaG9tZSBiYXNlIHNldHRpbmdzXHJcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3MudXNlRGlmZmVyZW50RmlsZUZvck5ld1RhYikge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5nZXRIb21lQmFzZVNldHRpbmdzKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gVXNlIG5ldyB0YWIgc2V0dGluZ3MsIGNoZWNraW5nIGZvciBtb2JpbGUgaWYgc2VwYXJhdGUgbW9iaWxlIGlzIGVuYWJsZWRcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLm5ld1RhYlNlcGFyYXRlTW9iaWxlICYmIFBsYXRmb3JtLmlzTW9iaWxlKSB7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0dHlwZTogdGhpcy5zZXR0aW5ncy5tb2JpbGVOZXdUYWJUeXBlIHx8IEhvbWVCYXNlVHlwZS5GaWxlLFxyXG5cdFx0XHRcdHZhbHVlOiB0aGlzLnNldHRpbmdzLm1vYmlsZU5ld1RhYlZhbHVlIHx8ICcnLFxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHR0eXBlOiB0aGlzLnNldHRpbmdzLm5ld1RhYlR5cGUgfHwgSG9tZUJhc2VUeXBlLkZpbGUsXHJcblx0XHRcdHZhbHVlOiB0aGlzLnNldHRpbmdzLm5ld1RhYlZhbHVlIHx8ICcnLFxyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNhdmUgcGx1Z2luIHNldHRpbmdzXHJcblx0ICovXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSB0aGUgc3RpY2t5IHRhYiBpY29uIGJhc2VkIG9uIGN1cnJlbnQgc2V0dGluZ3NcclxuXHQgKi9cclxuXHR1cGRhdGVTdGlja3lUYWJJY29uKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlLnVwZGF0ZSgpO1xyXG5cdFx0Ly8gQWxzbyB1cGRhdGUgdGFiIGhlYWRlcnMgd2hlbiBzdGlja3kgaWNvbiBzZXR0aW5nIGNoYW5nZXNcclxuXHRcdHRoaXMuc3RpY2t5VGFiU2VydmljZS51cGRhdGVUYWJIZWFkZXJzKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgdGhlIG1vYmlsZSBidXR0b24gYmFzZWQgb24gY3VycmVudCBzZXR0aW5nc1xyXG5cdCAqL1xyXG5cdHVwZGF0ZU1vYmlsZUJ1dHRvbigpOiB2b2lkIHtcclxuXHRcdHRoaXMubW9iaWxlQnV0dG9uU2VydmljZS51cGRhdGUoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIHdlIHNob3VsZCBza2lwIHN0YXJ0dXAgbG9naWMgKGUuZy4sIHBsdWdpbiByZWxvYWQsIHNldHRpbmdzIG1vZGFsIG9wZW4pXHJcblx0ICogVGhpcyBwcmV2ZW50cyBkZXN0cnVjdGl2ZSBiZWhhdmlvciB3aGVuIHRoZSBwbHVnaW4gaXMgcmVsb2FkZWQgb3Igc2V0dGluZ3MgYXJlIG9wZW5cclxuXHQgKi9cclxuXHRwcml2YXRlIHNob3VsZFNraXBTdGFydHVwTG9naWMoKTogYm9vbGVhbiB7XHJcblx0XHQvLyBDaGVjayBpZiBzZXR0aW5ncyBtb2RhbCBpcyBvcGVuIC0gbmV2ZXIgcnVuIHN0YXJ0dXAgbG9naWMgaWYgaXQgaXNcclxuXHRcdGlmICh0aGlzLmlzU2V0dGluZ3NNb2RhbE9wZW4oKSkge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBpZiB0aGlzIGlzIGEgcGx1Z2luIHJlbG9hZCB2cyBhY3R1YWwgYXBwIHN0YXJ0dXBcclxuXHRcdC8vIE9uIGFjdHVhbCBzdGFydHVwLCBPYnNpZGlhbiBoYXNuJ3QgcmVzdG9yZWQgdGhlIHdvcmtzcGFjZSB5ZXRcclxuXHRcdC8vIE9uIHBsdWdpbiByZWxvYWQsIGZpbGVzIGFyZSBhbHJlYWR5IG9wZW4gYW5kIHdvcmtzcGFjZSBpcyByZXN0b3JlZFxyXG5cdFx0Y29uc3QgaGFzT3BlbkZpbGVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnbWFya2Rvd24nKS5sZW5ndGggPiAwIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdjYW52YXMnKS5sZW5ndGggPiAwIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdiYXNlcycpLmxlbmd0aCA+IDAgfHxcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2VtcHR5JykubGVuZ3RoID4gMDtcclxuXHRcdFxyXG5cdFx0Ly8gSWYgZmlsZXMgYXJlIG9wZW4sIHRoaXMgaXMgbGlrZWx5IGEgcGx1Z2luIHJlbG9hZCwgbm90IGFjdHVhbCBzdGFydHVwXHJcblx0XHRyZXR1cm4gaGFzT3BlbkZpbGVzO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgdGhlIHNldHRpbmdzIG1vZGFsIGlzIGN1cnJlbnRseSBvcGVuXHJcblx0ICovXHJcblx0cHJpdmF0ZSBpc1NldHRpbmdzTW9kYWxPcGVuKCk6IGJvb2xlYW4ge1xyXG5cdFx0Ly8gQ2hlY2sgZm9yIHNldHRpbmdzIG1vZGFsIGJ5IGxvb2tpbmcgZm9yIHRoZSBtb2RhbCBjb250YWluZXJcclxuXHRcdC8vIFRyeSBtdWx0aXBsZSBzZWxlY3RvcnMgdG8gYmUgbW9yZSByb2J1c3RcclxuXHRcdGNvbnN0IHNldHRpbmdzTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGFpbmVyLm1vZC1zZXR0aW5ncycpIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLm1vZC1zZXR0aW5ncycpIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZlcnRpY2FsLXRhYi1jb250ZW50Jyk7XHJcblx0XHRcclxuXHRcdC8vIEFsc28gY2hlY2sgaWYgYW55IG1vZGFsIGlzIG9wZW4gYW5kIGNvbnRhaW5zIHNldHRpbmdzIGNvbnRlbnRcclxuXHRcdGlmICghc2V0dGluZ3NNb2RhbCkge1xyXG5cdFx0XHRjb25zdCBhbGxNb2RhbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWwtY29udGFpbmVyJyk7XHJcblx0XHRcdGZvciAoY29uc3QgbW9kYWwgb2YgQXJyYXkuZnJvbShhbGxNb2RhbHMpKSB7XHJcblx0XHRcdFx0aWYgKG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8IFxyXG5cdFx0XHRcdCAgICBtb2RhbC5xdWVyeVNlbGVjdG9yKCcuc2V0dGluZ3MtY29udGVudCcpIHx8XHJcblx0XHRcdFx0ICAgIG1vZGFsLmNsYXNzTGlzdC5jb250YWlucygnbW9kLXNldHRpbmdzJykpIHtcclxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gc2V0dGluZ3NNb2RhbCAhPT0gbnVsbDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFBhdGNoIHJ1bk9wZW5pbmdCZWhhdmlvciBmb3IgZmFzdCBzdGFydHVwIChsaWtlIGhvbWVwYWdlIHBsdWdpbilcclxuXHQgKi9cclxuXHRwcml2YXRlIHBhdGNoT3BlbmluZ0JlaGF2aW9yKCk6IHZvaWQge1xyXG5cdFx0Ly8gU3RvcmUgb3JpZ2luYWwgbWV0aG9kXHJcblx0XHQgXHJcblx0XHR0aGlzLmFwcC5udk9yaWdfcnVuT3BlbmluZ0JlaGF2aW9yID0gdGhpcy5hcHAucnVuT3BlbmluZ0JlaGF2aW9yO1xyXG5cdFx0XHJcblx0XHQvLyBQYXRjaCB0aGUgbWV0aG9kXHJcblx0XHQgXHJcblx0XHR0aGlzLmFwcC5ydW5PcGVuaW5nQmVoYXZpb3IgPSBhc3luYyAocGF0aDogc3RyaW5nKSA9PiB7XHJcblx0XHRjb25zdCBvcGVuSW5pdGlhbGx5ID0gKFxyXG5cdFx0XHR0aGlzLnNldHRpbmdzLm9wZW5PblN0YXJ0dXAgJiYgXHJcblx0XHRcdCF0aGlzLmhhc1VybFBhcmFtcygpXHJcblx0XHQpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKG9wZW5Jbml0aWFsbHkpIHtcclxuXHRcdFx0XHQvLyBNYXJrIHRoYXQgd2UndmUgcnVuIG9wZW5pbmcgYmVoYXZpb3JcclxuXHRcdFx0XHR0aGlzLm9wZW5pbmdCZWhhdmlvclJhbiA9IHRydWU7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gVXNlIGZhc3Qgc3RhcnR1cCAtIGRldGFjaCBhbGwgbGVhdmVzIGFuZCBvcGVuIGhvbWUgYmFzZVxyXG5cdFx0XHRcdGNvbnN0IG1vZGUgPSB0aGlzLnNldHRpbmdzLm9wZW5Nb2RlO1xyXG5cdFx0XHRcdGlmIChtb2RlID09PSAncmVwbGFjZS1hbGwnKSB7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmhvbWVTZXJ2aWNlLmRldGFjaEFsbExlYXZlcygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBVc2UgZ2hvc3QgdGFiIGlmIHN0aWNreSBpY29uIGlzIGVuYWJsZWQsIG90aGVyd2lzZSB1c2Ugbm9ybWFsIG9wZW5cclxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHtcclxuXHRcdFx0XHRcdHZvaWQgdGhpcy5ob21lU2VydmljZS5vcGVuSG9tZUJhc2VJbkdob3N0VGFiKHtcclxuXHRcdFx0XHRcdFx0cnVuQ29tbWFuZDogdHJ1ZSxcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR2b2lkIHRoaXMuaG9tZVNlcnZpY2Uub3BlbkhvbWVCYXNlV2l0aE1vZGUobW9kZSwgdHJ1ZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIENhbGwgb3JpZ2luYWwgYmVoYXZpb3JcclxuXHRcdFx0XHQgXHJcblx0XHRcdFx0aWYgKHRoaXMuYXBwLm52T3JpZ19ydW5PcGVuaW5nQmVoYXZpb3IpIHtcclxuXHRcdFx0XHRcdCBcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLm52T3JpZ19ydW5PcGVuaW5nQmVoYXZpb3IocGF0aCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBVbnBhdGNoIHJlbGVhc2Ugbm90ZXMgYWZ0ZXIgb3BlbmluZyBiZWhhdmlvciBjb21wbGV0ZXNcclxuXHRcdFx0dGhpcy51bnBhdGNoUmVsZWFzZU5vdGVzKCk7XHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVW5wYXRjaCBydW5PcGVuaW5nQmVoYXZpb3JcclxuXHQgKi9cclxuXHRwcml2YXRlIHVucGF0Y2hPcGVuaW5nQmVoYXZpb3IoKTogdm9pZCB7XHJcblx0XHQgXHJcblx0XHRpZiAodGhpcy5hcHAubnZPcmlnX3J1bk9wZW5pbmdCZWhhdmlvcikge1xyXG5cdFx0XHQgXHJcblx0XHRcdHRoaXMuYXBwLnJ1bk9wZW5pbmdCZWhhdmlvciA9IHRoaXMuYXBwLm52T3JpZ19ydW5PcGVuaW5nQmVoYXZpb3I7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBQYXRjaCBzaG93UmVsZWFzZU5vdGVzIHRvIHRyYWNrIG5ldyByZWxlYXNlc1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgcGF0Y2hSZWxlYXNlTm90ZXMoKTogdm9pZCB7XHJcblx0XHRjb25zdCBhcHBBbnkgPSB0aGlzLmFwcCBhcyB1bmtub3duIGFzIEFwcFdpdGhSZWxlYXNlTm90ZXM7XHJcblx0XHQgXHJcblx0XHRhcHBBbnkubnZPcmlnX3Nob3dSZWxlYXNlTm90ZXMgPSBhcHBBbnkuc2hvd1JlbGVhc2VOb3RlcztcclxuXHRcdCBcclxuXHRcdGFwcEFueS5zaG93UmVsZWFzZU5vdGVzID0gKCkgPT4ge1xyXG5cdFx0XHR0aGlzLm5ld1JlbGVhc2UgPSB0cnVlO1xyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVucGF0Y2ggc2hvd1JlbGVhc2VOb3Rlc1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgdW5wYXRjaFJlbGVhc2VOb3RlcygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGFwcEFueSA9IHRoaXMuYXBwIGFzIHVua25vd24gYXMgQXBwV2l0aFJlbGVhc2VOb3RlcztcclxuXHRcdCBcclxuXHRcdGlmICh0aGlzLm5ld1JlbGVhc2UgJiYgIXRoaXMuc2V0dGluZ3MuaGlkZVJlbGVhc2VOb3Rlcykge1xyXG5cdFx0XHQgXHJcblx0XHRcdGFwcEFueS5udk9yaWdfc2hvd1JlbGVhc2VOb3Rlcz8uKCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdCBcclxuXHRcdGlmIChhcHBBbnkubnZPcmlnX3Nob3dSZWxlYXNlTm90ZXMpIHtcclxuXHRcdFx0IFxyXG5cdFx0XHRhcHBBbnkuc2hvd1JlbGVhc2VOb3RlcyA9IGFwcEFueS5udk9yaWdfc2hvd1JlbGVhc2VOb3RlcztcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIGEgaG9tZSBiYXNlIHR5cGUgaGFzIGl0cyByZXF1aXJlZCBwbHVnaW4gZW5hYmxlZFxyXG5cdCAqL1xyXG5cdGhhc1JlcXVpcmVkUGx1Z2luKHR5cGU6IEhvbWVCYXNlVHlwZSk6IGJvb2xlYW4ge1xyXG5cdFx0c3dpdGNoICh0eXBlKSB7XHJcblx0XHRcdGNhc2UgSG9tZUJhc2VUeXBlLldvcmtzcGFjZTpcclxuXHRcdFx0XHQgXHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuYXBwLmludGVybmFsUGx1Z2lucz8ucGx1Z2lucz8ud29ya3NwYWNlcz8uZW5hYmxlZCA9PT0gdHJ1ZTtcclxuXHRcdFx0Y2FzZSBIb21lQmFzZVR5cGUuR3JhcGg6XHJcblx0XHRcdFx0IFxyXG5cdFx0XHRcdHJldHVybiB0aGlzLmFwcC5pbnRlcm5hbFBsdWdpbnM/LnBsdWdpbnM/LmdyYXBoPy5lbmFibGVkID09PSB0cnVlO1xyXG5cdFx0XHRjYXNlIEhvbWVCYXNlVHlwZS5Kb3VybmFsOlxyXG5cdFx0XHRcdCBcclxuXHRcdFx0XHRyZXR1cm4gISF0aGlzLmFwcC5wbHVnaW5zPy5wbHVnaW5zPy5bJ2pvdXJuYWxzJ107XHJcblx0XHRcdGNhc2UgSG9tZUJhc2VUeXBlLkRhaWx5Tm90ZTpcclxuXHRcdFx0Y2FzZSBIb21lQmFzZVR5cGUuV2Vla2x5Tm90ZTpcclxuXHRcdFx0Y2FzZSBIb21lQmFzZVR5cGUuTW9udGhseU5vdGU6XHJcblx0XHRcdGNhc2UgSG9tZUJhc2VUeXBlLlF1YXJ0ZXJseU5vdGU6XHJcblx0XHRcdGNhc2UgSG9tZUJhc2VUeXBlLlllYXJseU5vdGU6XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuaGFzUmVxdWlyZWRQZXJpb2RpY2l0eSh0eXBlKTtcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIHBlcmlvZGljIG5vdGVzIGFyZSBhdmFpbGFibGUgZm9yIHRoZSBnaXZlbiB0eXBlXHJcblx0ICovXHJcblx0cHJpdmF0ZSBoYXNSZXF1aXJlZFBlcmlvZGljaXR5KHR5cGU6IEhvbWVCYXNlVHlwZSk6IGJvb2xlYW4ge1xyXG5cdFx0aWYgKHR5cGUgPT09IEhvbWVCYXNlVHlwZS5EYWlseU5vdGUpIHtcclxuXHRcdFx0Ly8gRGFpbHkgbm90ZXMgY2FuIGNvbWUgZnJvbSBlaXRoZXIgY29yZSBwbHVnaW4gT1IgcGVyaW9kaWMgbm90ZXMgcGx1Z2luXHJcblx0XHRcdGNvbnN0IGNvcmVEYWlseU5vdGVzID0gdGhpcy5hcHAuaW50ZXJuYWxQbHVnaW5zPy5wbHVnaW5zPy5bJ2RhaWx5LW5vdGVzJ10/LmVuYWJsZWQgPT09IHRydWU7XHJcblx0XHRcdGlmIChjb3JlRGFpbHlOb3Rlcykge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIENoZWNrIHBlcmlvZGljIG5vdGVzIHBsdWdpbiBmb3IgZGFpbHkgbm90ZSBzdXBwb3J0XHJcblx0XHRcdGNvbnN0IHBlcmlvZGljTm90ZXMgPSB0aGlzLmFwcC5wbHVnaW5zPy5wbHVnaW5zPy5bJ3BlcmlvZGljLW5vdGVzJ107XHJcblx0XHRcdGlmIChwZXJpb2RpY05vdGVzKSB7XHJcblx0XHRcdFx0Y29uc3QgdmVyc2lvbiA9IChwZXJpb2RpY05vdGVzIGFzIHsgbWFuaWZlc3Q/OiB7IHZlcnNpb24/OiBzdHJpbmcgfSB9KT8ubWFuaWZlc3Q/LnZlcnNpb24gfHwgJzAnO1xyXG5cdFx0XHRcdGNvbnN0IGlzTGVnYWN5ID0gdmVyc2lvbi5zdGFydHNXaXRoKCcwJyk7XHJcblx0XHRcdCBcclxuXHRcdFx0XHRpZiAoaXNMZWdhY3kpIHtcclxuXHRcdFx0XHRcdHJldHVybiAocGVyaW9kaWNOb3RlcyBhcyB7IHNldHRpbmdzPzogUmVjb3JkPHN0cmluZywgeyBlbmFibGVkPzogYm9vbGVhbiB9PiB9KT8uc2V0dGluZ3M/LlsnZGFpbHknXT8uZW5hYmxlZCA9PT0gdHJ1ZTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Y29uc3QgY2FsZW5kYXJTZXQgPSAocGVyaW9kaWNOb3RlcyBhcyB7IGNhbGVuZGFyU2V0TWFuYWdlcj86IHsgZ2V0QWN0aXZlU2V0PzogKCkgPT4gUmVjb3JkPHN0cmluZywgeyBlbmFibGVkPzogYm9vbGVhbiB9PiB9IH0pPy5jYWxlbmRhclNldE1hbmFnZXI/LmdldEFjdGl2ZVNldD8uKCk7XHJcblx0XHRcdFx0XHRyZXR1cm4gY2FsZW5kYXJTZXQ/LlsnZGF5J10/LmVuYWJsZWQgPT09IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0IFxyXG5cdFx0Y29uc3QgcGVyaW9kaWNOb3RlcyA9IHRoaXMuYXBwLnBsdWdpbnM/LnBsdWdpbnM/LlsncGVyaW9kaWMtbm90ZXMnXTtcclxuXHRcdGlmICghcGVyaW9kaWNOb3RlcykgcmV0dXJuIGZhbHNlO1xyXG5cdFx0XHJcblx0XHQvLyBDaGVjayBpZiBwZXJpb2RpYyBub3RlcyBwbHVnaW4gaGFzIHRoZSByZXF1aXJlZCBwZXJpb2QgZW5hYmxlZFxyXG5cdFx0IFxyXG5cdFx0Y29uc3QgdmVyc2lvbiA9IChwZXJpb2RpY05vdGVzIGFzIHsgbWFuaWZlc3Q/OiB7IHZlcnNpb24/OiBzdHJpbmcgfSB9KT8ubWFuaWZlc3Q/LnZlcnNpb24gfHwgJzAnO1xyXG5cdFx0Y29uc3QgaXNMZWdhY3kgPSB2ZXJzaW9uLnN0YXJ0c1dpdGgoJzAnKTtcclxuXHRcdFxyXG5cdFx0aWYgKGlzTGVnYWN5KSB7XHJcblx0XHRcdC8vIExlZ2FjeSBwZXJpb2RpYyBub3Rlc1xyXG5cdFx0XHRjb25zdCBwZXJpb2RNYXA6IFBhcnRpYWw8UmVjb3JkPEhvbWVCYXNlVHlwZSwgc3RyaW5nPj4gPSB7XHJcblx0XHRcdFx0W0hvbWVCYXNlVHlwZS5XZWVrbHlOb3RlXTogJ3dlZWtseScsXHJcblx0XHRcdFx0W0hvbWVCYXNlVHlwZS5Nb250aGx5Tm90ZV06ICdtb250aGx5JyxcclxuXHRcdFx0XHRbSG9tZUJhc2VUeXBlLlF1YXJ0ZXJseU5vdGVdOiAncXVhcnRlcmx5JyxcclxuXHRcdFx0XHRbSG9tZUJhc2VUeXBlLlllYXJseU5vdGVdOiAneWVhcmx5JyxcclxuXHRcdFx0fTtcclxuXHRcdFx0IFxyXG5cdFx0XHRjb25zdCBhZGplY3RpdmUgPSBwZXJpb2RNYXBbdHlwZV07XHJcblx0XHRcdGlmICghYWRqZWN0aXZlKSByZXR1cm4gZmFsc2U7XHJcblx0XHRcdCBcclxuXHRcdFx0cmV0dXJuIChwZXJpb2RpY05vdGVzIGFzIHsgc2V0dGluZ3M/OiBSZWNvcmQ8c3RyaW5nLCB7IGVuYWJsZWQ/OiBib29sZWFuIH0+IH0pPy5zZXR0aW5ncz8uW2FkamVjdGl2ZV0/LmVuYWJsZWQgPT09IHRydWU7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBOZXcgcGVyaW9kaWMgbm90ZXNcclxuXHRcdFx0Y29uc3Qgbm91bk1hcDogUGFydGlhbDxSZWNvcmQ8SG9tZUJhc2VUeXBlLCBzdHJpbmc+PiA9IHtcclxuXHRcdFx0XHRbSG9tZUJhc2VUeXBlLldlZWtseU5vdGVdOiAnd2VlaycsXHJcblx0XHRcdFx0W0hvbWVCYXNlVHlwZS5Nb250aGx5Tm90ZV06ICdtb250aCcsXHJcblx0XHRcdFx0W0hvbWVCYXNlVHlwZS5RdWFydGVybHlOb3RlXTogJ3F1YXJ0ZXInLFxyXG5cdFx0XHRcdFtIb21lQmFzZVR5cGUuWWVhcmx5Tm90ZV06ICd5ZWFyJyxcclxuXHRcdFx0fTtcclxuXHRcdFx0IFxyXG5cdFx0XHRjb25zdCBub3VuID0gbm91bk1hcFt0eXBlXTtcclxuXHRcdFx0aWYgKCFub3VuKSByZXR1cm4gZmFsc2U7XHJcblx0XHRcdCBcclxuXHRcdFx0Y29uc3QgY2FsZW5kYXJTZXQgPSAocGVyaW9kaWNOb3RlcyBhcyB7IGNhbGVuZGFyU2V0TWFuYWdlcj86IHsgZ2V0QWN0aXZlU2V0PzogKCkgPT4gUmVjb3JkPHN0cmluZywgeyBlbmFibGVkPzogYm9vbGVhbiB9PiB9IH0pPy5jYWxlbmRhclNldE1hbmFnZXI/LmdldEFjdGl2ZVNldD8uKCk7XHJcblx0XHRcdCBcclxuXHRcdFx0cmV0dXJuIGNhbGVuZGFyU2V0Py5bbm91bl0/LmVuYWJsZWQgPT09IHRydWU7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiBVUkwgcGFyYW1zIGluZGljYXRlIGEgZmlsZS93b3Jrc3BhY2Ugc2hvdWxkIGJlIG9wZW5lZCAoc2tpcCBob21lcGFnZSlcclxuXHQgKi9cclxuXHRwcml2YXRlIGhhc1VybFBhcmFtcygpOiBib29sZWFuIHtcclxuXHRcdC8vIENoZWNrIGZvciBVUkwgcGFyYW1zIHRoYXQgaW5kaWNhdGUgYSBzcGVjaWZpYyBmaWxlL3dvcmtzcGFjZSBzaG91bGQgYmUgb3BlbmVkXHJcblx0XHQvLyBUaGlzIHByZXZlbnRzIGhvbWVwYWdlIGZyb20gb3BlbmluZyB3aGVuIE9ic2lkaWFuIGlzIG9wZW5lZCB3aXRoIGEgc3BlY2lmaWMgZmlsZVxyXG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5PQlNfQUNUKSB7XHJcblx0XHRcdGNvbnN0IHBhcmFtcyA9IE9iamVjdC5rZXlzKHdpbmRvdy5PQlNfQUNUKTtcclxuXHRcdFx0Y29uc3QgYWN0aW9uID0gd2luZG93Lk9CU19BQ1QuYWN0aW9uO1xyXG5cdFx0XHRyZXR1cm4gKFxyXG5cdFx0XHRcdGFjdGlvbiAhPT0gdW5kZWZpbmVkICYmXHJcblx0XHRcdFx0WydvcGVuJywgJ2FkdmFuY2VkLXVyaSddLmluY2x1ZGVzKGFjdGlvbikgJiZcclxuXHRcdFx0XHRbJ2ZpbGUnLCAnZmlsZXBhdGgnLCAnd29ya3NwYWNlJ10uc29tZShlID0+IHBhcmFtcy5pbmNsdWRlcyhlKSlcclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8vIFwiT3BlbiB3aGVuIGVtcHR5XCIgZmVhdHVyZSByZW1vdmVkIC0gcmVkdW5kYW50IHdpdGggXCJOZXcgdGFiIHJlcGxhY2VtZW50OiBvbmx5IHdoZW4gZW1wdHlcIlxyXG5cdC8vIFNpbmNlIE9ic2lkaWFuIGF1dG8tY3JlYXRlcyBhbiBlbXB0eSB0YWIgd2hlbiB5b3UgY2xvc2UgdGhlIGxhc3Qgb25lLCB0aGV5IGRvIHRoZSBzYW1lIHRoaW5nXHJcbn1cclxuIiwgIi8qKlxyXG4gKiBIb21lIEJhc2UgUGx1Z2luIFNldHRpbmdzXHJcbiAqL1xyXG5cclxuZXhwb3J0IHR5cGUgVmlld01vZGUgPSAnZGVmYXVsdCcgfCAncHJldmlldycgfCAnc291cmNlJyB8ICdsaXZlJztcclxuZXhwb3J0IHR5cGUgTmV3VGFiTW9kZSA9ICdvbmx5LXdoZW4tZW1wdHknIHwgJ2Fsd2F5cyc7XHJcbmV4cG9ydCB0eXBlIE9wZW5pbmdNb2RlID0gJ3JlcGxhY2UtYWxsJyB8ICdyZXBsYWNlLWxhc3QnIHwgJ3JldGFpbic7XHJcblxyXG4vKipcclxuICogSG9tZXBhZ2UgdHlwZSBlbnVtIC0gbWF0Y2hlcyBob21lcGFnZSBwbHVnaW4ncyBLaW5kIGVudW1cclxuICovXHJcbmV4cG9ydCBlbnVtIEhvbWVCYXNlVHlwZSB7XHJcblx0RmlsZSA9ICdGaWxlJyxcclxuXHRXb3Jrc3BhY2UgPSAnV29ya3NwYWNlJyxcclxuXHRSYW5kb20gPSAnUmFuZG9tIGZpbGUnLFxyXG5cdFJhbmRvbUZvbGRlciA9ICdSYW5kb20gaW4gZm9sZGVyJyxcclxuXHRHcmFwaCA9ICdHcmFwaCB2aWV3JyxcclxuXHROb25lID0gJ05vdGhpbmcnLFxyXG5cdEpvdXJuYWwgPSAnSm91cm5hbCcsXHJcblx0TmV3Tm90ZSA9ICdOZXcgbm90ZScsXHJcblx0RGFpbHlOb3RlID0gJ0RhaWx5IE5vdGUnLFxyXG5cdFdlZWtseU5vdGUgPSAnV2Vla2x5IE5vdGUnLFxyXG5cdE1vbnRobHlOb3RlID0gJ01vbnRobHkgTm90ZScsXHJcblx0UXVhcnRlcmx5Tm90ZSA9ICdRdWFydGVybHkgTm90ZScsXHJcblx0WWVhcmx5Tm90ZSA9ICdZZWFybHkgTm90ZScsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSG9tZUJhc2VTZXR0aW5ncyB7XHJcblx0Ly8gR2VuZXJhbFxyXG5cdGhvbWVCYXNlVHlwZTogSG9tZUJhc2VUeXBlO1xyXG5cdGhvbWVCYXNlVmFsdWU6IHN0cmluZzsgLy8gVHlwZS1zcGVjaWZpYyB2YWx1ZSAoZmlsZSBwYXRoLCB3b3Jrc3BhY2UgbmFtZSwgZm9sZGVyIHBhdGgsIGV0Yy4pXHJcblx0b3Blbk9uU3RhcnR1cDogYm9vbGVhbjtcclxuXHRvcGVuVmlld01vZGU6IFZpZXdNb2RlO1xyXG5cdG9wZW5Nb2RlOiBPcGVuaW5nTW9kZTtcclxuXHRtYW51YWxPcGVuTW9kZTogT3BlbmluZ01vZGU7XHJcblxyXG5cdC8vIFRhYiBCZWhhdmlvclxyXG5cdHJlcGxhY2VOZXdUYWI6IGJvb2xlYW47XHJcblx0bmV3VGFiTW9kZTogTmV3VGFiTW9kZTtcclxuXHRvcGVuV2hlbkFsbFRhYnNDbG9zZWQ6IGJvb2xlYW47IC8vIE9wZW4gaG9tZSBiYXNlIHdoZW4gYWxsIHRhYnMgYXJlIGNsb3NlZCAoaW5kZXBlbmRlbnQgb2YgcmVwbGFjZU5ld1RhYilcclxuXHR1c2VEaWZmZXJlbnRGaWxlRm9yTmV3VGFiOiBib29sZWFuOyAvLyBVc2Ugc2VwYXJhdGUgbmV3IHRhYiBzZXR0aW5ncyB2cyBob21lIGJhc2VcclxuXHRuZXdUYWJUeXBlOiBIb21lQmFzZVR5cGU7XHJcblx0bmV3VGFiVmFsdWU6IHN0cmluZztcclxuXHRuZXdUYWJTZXBhcmF0ZU1vYmlsZTogYm9vbGVhbjtcclxuXHRtb2JpbGVOZXdUYWJUeXBlOiBIb21lQmFzZVR5cGU7XHJcblx0bW9iaWxlTmV3VGFiVmFsdWU6IHN0cmluZztcclxuXHJcblx0Ly8gVUkgRmVhdHVyZXMgKG9mZiBieSBkZWZhdWx0KVxyXG5cdHNob3dTdGlja3lIb21lSWNvbjogYm9vbGVhbjtcclxuXHRzdGlja3lJY29uTmFtZTogc3RyaW5nIHwgbnVsbDtcclxuXHRoaWRlSG9tZVRhYkhlYWRlcjogYm9vbGVhbjtcclxuXHRyZXBsYWNlTW9iaWxlTmV3VGFiOiBib29sZWFuO1xyXG5cdFxyXG5cdC8vIE1vYmlsZVxyXG5cdHNlcGFyYXRlTW9iaWxlOiBib29sZWFuO1xyXG5cdG1vYmlsZUhvbWVCYXNlVHlwZTogSG9tZUJhc2VUeXBlO1xyXG5cdG1vYmlsZUhvbWVCYXNlVmFsdWU6IHN0cmluZztcclxuXHJcblx0Ly8gQXV0b21hdGlvblxyXG5cdGNvbW1hbmRPbk9wZW46IHN0cmluZztcclxuXHR3YWl0Rm9yR2l0U3luYzogYm9vbGVhbjtcclxuXHRnaXRTeW5jVGltZW91dDogbnVtYmVyO1xyXG5cdFxyXG5cdC8vIFZpZXcgYmVoYXZpb3JcclxuXHRyZXZlcnRWaWV3OiBib29sZWFuO1xyXG5cdGF1dG9TY3JvbGw6IGJvb2xlYW47XHJcblx0aGlkZVJlbGVhc2VOb3RlczogYm9vbGVhbjtcclxuXHJcblx0Ly8gTGVnYWN5IC0ga2VwdCBpbiB0eXBlIGZvciBtaWdyYXRpb24gYnV0IHJlbW92ZWQgZnJvbSBkZWZhdWx0c1xyXG5cdGhvbWVCYXNlUGF0aD86IHN0cmluZztcclxuXHRrZWVwRXhpc3RpbmdUYWJzPzogYm9vbGVhbjtcclxuXHRtb2JpbGVIb21lQmFzZVBhdGg/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBIb21lQmFzZVNldHRpbmdzID0ge1xyXG5cdC8vIEdlbmVyYWxcclxuXHRob21lQmFzZVR5cGU6IEhvbWVCYXNlVHlwZS5GaWxlLFxyXG5cdGhvbWVCYXNlVmFsdWU6ICcnLFxyXG5cdG9wZW5PblN0YXJ0dXA6IHRydWUsXHJcblx0b3BlblZpZXdNb2RlOiAnZGVmYXVsdCcsXHJcblx0b3Blbk1vZGU6ICdyZXBsYWNlLWFsbCcsXHJcblx0bWFudWFsT3Blbk1vZGU6ICdyZXRhaW4nLFxyXG5cclxuXHQvLyBUYWIgQmVoYXZpb3JcclxuXHRyZXBsYWNlTmV3VGFiOiBmYWxzZSxcclxuXHRuZXdUYWJNb2RlOiAnb25seS13aGVuLWVtcHR5JywgLy8gRGVmYXVsdDogb25seSByZXBsYWNlIHdoZW4gbm8gdGFicyBhcmUgb3BlblxyXG5cdG9wZW5XaGVuQWxsVGFic0Nsb3NlZDogdHJ1ZSwgLy8gRGVmYXVsdDogb3BlbiBob21lIGJhc2Ugd2hlbiBhbGwgdGFicyBhcmUgY2xvc2VkXHJcblx0dXNlRGlmZmVyZW50RmlsZUZvck5ld1RhYjogZmFsc2UsXHJcblx0bmV3VGFiVHlwZTogSG9tZUJhc2VUeXBlLkZpbGUsXHJcblx0bmV3VGFiVmFsdWU6ICcnLFxyXG5cdG5ld1RhYlNlcGFyYXRlTW9iaWxlOiBmYWxzZSxcclxuXHRtb2JpbGVOZXdUYWJUeXBlOiBIb21lQmFzZVR5cGUuRmlsZSxcclxuXHRtb2JpbGVOZXdUYWJWYWx1ZTogJycsXHJcblxyXG5cdC8vIFVJIEZlYXR1cmVzXHJcblx0c2hvd1N0aWNreUhvbWVJY29uOiBmYWxzZSxcclxuXHRzdGlja3lJY29uTmFtZTogJ2hvbWUnLFxyXG5cdGhpZGVIb21lVGFiSGVhZGVyOiBmYWxzZSxcclxuXHRyZXBsYWNlTW9iaWxlTmV3VGFiOiBmYWxzZSxcclxuXHRcclxuXHQvLyBNb2JpbGVcclxuXHRzZXBhcmF0ZU1vYmlsZTogZmFsc2UsXHJcblx0bW9iaWxlSG9tZUJhc2VUeXBlOiBIb21lQmFzZVR5cGUuRmlsZSxcclxuXHRtb2JpbGVIb21lQmFzZVZhbHVlOiAnJyxcclxuXHJcblx0Ly8gQXV0b21hdGlvblxyXG5cdGNvbW1hbmRPbk9wZW46ICcnLFxyXG5cdHdhaXRGb3JHaXRTeW5jOiBmYWxzZSxcclxuXHRnaXRTeW5jVGltZW91dDogMywgLy8gRGVmYXVsdCAzIHNlY29uZHNcclxuXHRcclxuXHQvLyBWaWV3IGJlaGF2aW9yXHJcblx0cmV2ZXJ0VmlldzogZmFsc2UsXHJcblx0YXV0b1Njcm9sbDogZmFsc2UsXHJcblx0aGlkZVJlbGVhc2VOb3RlczogZmFsc2UsIC8vIE9GRiBieSBkZWZhdWx0XHJcbn07XHJcblxyXG4vKipcclxuICogVmlldyBtb2RlIGRpc3BsYXkgbmFtZXMgZm9yIHNldHRpbmdzIGRyb3Bkb3duXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgVklFV19NT0RFX09QVElPTlM6IFJlY29yZDxWaWV3TW9kZSwgc3RyaW5nPiA9IHtcclxuXHQnZGVmYXVsdCc6ICdEZWZhdWx0JyxcclxuXHQncHJldmlldyc6ICdSZWFkaW5nIHZpZXcnLFxyXG5cdCdzb3VyY2UnOiAnU291cmNlIG1vZGUnLFxyXG5cdCdsaXZlJzogJ0xpdmUgUHJldmlldycsXHJcbn07XHJcblxyXG4vKipcclxuICogTmV3IHRhYiBtb2RlIGRpc3BsYXkgbmFtZXMgZm9yIHNldHRpbmdzIGRyb3Bkb3duXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgTkVXX1RBQl9NT0RFX09QVElPTlM6IFJlY29yZDxOZXdUYWJNb2RlLCBzdHJpbmc+ID0ge1xyXG5cdCdvbmx5LXdoZW4tZW1wdHknOiAnT25seSB3aGVuIG5vIHRhYnMgYXJlIG9wZW4nLFxyXG5cdCdhbHdheXMnOiAnQWx3YXlzIHJlcGxhY2UgbmV3IHRhYnMnLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIE9wZW5pbmcgbW9kZSBkaXNwbGF5IG5hbWVzIGZvciBzZXR0aW5ncyBkcm9wZG93blxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IE9QRU5JTkdfTU9ERV9PUFRJT05TOiBSZWNvcmQ8T3BlbmluZ01vZGUsIHN0cmluZz4gPSB7XHJcblx0J3JlcGxhY2UtYWxsJzogJ1JlcGxhY2UgYWxsIG9wZW4gbm90ZXMnLFxyXG5cdCdyZXBsYWNlLWxhc3QnOiAnUmVwbGFjZSBsYXN0IG5vdGUnLFxyXG5cdCdyZXRhaW4nOiAnS2VlcCBvcGVuIG5vdGVzJyxcclxufTtcclxuXHJcbi8qKlxyXG4gKiBIb21lcGFnZSB0eXBlcyB0aGF0IGRvbid0IHJlcXVpcmUgYSB2YWx1ZSBpbnB1dFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFVOQ0hBTkdFQUJMRV9UWVBFUzogSG9tZUJhc2VUeXBlW10gPSBbXHJcblx0SG9tZUJhc2VUeXBlLlJhbmRvbSxcclxuXHRIb21lQmFzZVR5cGUuR3JhcGgsXHJcblx0SG9tZUJhc2VUeXBlLk5vbmUsXHJcblx0SG9tZUJhc2VUeXBlLkRhaWx5Tm90ZSxcclxuXHRIb21lQmFzZVR5cGUuV2Vla2x5Tm90ZSxcclxuXHRIb21lQmFzZVR5cGUuTW9udGhseU5vdGUsXHJcblx0SG9tZUJhc2VUeXBlLlF1YXJ0ZXJseU5vdGUsXHJcblx0SG9tZUJhc2VUeXBlLlllYXJseU5vdGUsXHJcbl07XHJcbiIsICIvKipcbiAqIEhvbWUgQmFzZSBTZXR0aW5ncyBUYWJcbiAqL1xuXG5pbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIHJlcXVpcmVBcGlWZXJzaW9uIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgSG9tZUJhc2VQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBcblx0VklFV19NT0RFX09QVElPTlMsIFxuXHRORVdfVEFCX01PREVfT1BUSU9OUywgXG5cdE9QRU5JTkdfTU9ERV9PUFRJT05TLFxuXHRWaWV3TW9kZSwgXG5cdE5ld1RhYk1vZGUsXG5cdE9wZW5pbmdNb2RlLFxuXHRIb21lQmFzZVR5cGUsXG5cdFVOQ0hBTkdFQUJMRV9UWVBFUyxcbn0gZnJvbSAnLi4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgY3JlYXRlU2V0dGluZ3NHcm91cCB9IGZyb20gJy4uL3V0aWxzL3NldHRpbmdzLWNvbXBhdCc7XG5pbXBvcnQgeyBGaWxlUGF0aFN1Z2dlc3QsIEZvbGRlclN1Z2dlc3QsIFdvcmtzcGFjZVN1Z2dlc3QgfSBmcm9tICcuL2ZpbGUtc3VnZ2VzdCc7XG5pbXBvcnQgeyBDb21tYW5kU3VnZ2VzdCwgZ2V0Q29tbWFuZEJ5SWQgfSBmcm9tICcuL2NvbW1hbmQtc3VnZ2VzdCc7XG5pbXBvcnQgeyBJY29uUGlja2VyIH0gZnJvbSAnLi9pY29uLXBpY2tlcic7XG5cbmV4cG9ydCBjbGFzcyBIb21lQmFzZVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBIb21lQmFzZVBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBIb21lQmFzZVBsdWdpbikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0Ly8gR2V0IGFjdGl2ZSBzZXR0aW5ncyAobW9iaWxlIG9yIGRlc2t0b3ApXG5cdFx0Y29uc3QgaXNNb2JpbGUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZXBhcmF0ZU1vYmlsZTtcblx0XHRjb25zdCBhY3RpdmVUeXBlID0gaXNNb2JpbGUgPyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVR5cGUgOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVR5cGU7XG5cdFx0Y29uc3QgYWN0aXZlVmFsdWUgPSBpc01vYmlsZSA/IHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVmFsdWUgOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVZhbHVlO1xuXG5cdFx0Ly8gR2VuZXJhbCBTZXR0aW5ncyAobm8gaGVhZGluZyBmb3IgZmlyc3QgZ3JvdXApXG5cdFx0Y29uc3QgZ2VuZXJhbEdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgdW5kZWZpbmVkLCAnaG9tZS1iYXNlJyk7XG5cblx0XHQvLyBIb21lIHBhZ2UgdHlwZSBkcm9wZG93blxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdUeXBlJylcblx0XHRcdFx0LnNldERlc2MoJ1doYXQgdG8gb3BlbiBhcyB5b3VyIGhvbWUgYmFzZScpXG5cdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcblx0XHRcdFx0XHRsZXQgcGx1Z2luRGlzYWJsZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRmb3IgKGNvbnN0IHR5cGUgb2YgT2JqZWN0LnZhbHVlcyhIb21lQmFzZVR5cGUpKSB7XG5cdFx0XHRcdFx0XHRpZiAoIXRoaXMucGx1Z2luLmhhc1JlcXVpcmVkUGx1Z2luKHR5cGUpKSB7XG5cdFx0XHRcdFx0XHRcdC8vIElmIGN1cnJlbnQgdHlwZSBpcyBkaXNhYmxlZCwgbWFyayBpdCBidXQgc3RpbGwgYWxsb3cgaXRcblx0XHRcdFx0XHRcdFx0aWYgKHR5cGUgPT09IGFjdGl2ZVR5cGUpIHtcblx0XHRcdFx0XHRcdFx0XHRwbHVnaW5EaXNhYmxlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKHR5cGUsIHR5cGUpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdC8vIEFkZCBkaXNhYmxlZCBvcHRpb25cblx0XHRcdFx0XHRcdFx0XHRkcm9wZG93bi5zZWxlY3RFbC5jcmVhdGVFbCgnb3B0aW9uJywgeyBcblx0XHRcdFx0XHRcdFx0XHRcdHRleHQ6IHR5cGUsIFxuXHRcdFx0XHRcdFx0XHRcdFx0YXR0cjogeyBkaXNhYmxlZDogJ3RydWUnIH0gXG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih0eXBlLCB0eXBlKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShhY3RpdmVUeXBlIHx8IEhvbWVCYXNlVHlwZS5GaWxlKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpZiAoaXNNb2JpbGUpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVR5cGUgPSB2YWx1ZSBhcyBIb21lQmFzZVR5cGU7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaG9tZUJhc2VUeXBlID0gdmFsdWUgYXMgSG9tZUJhc2VUeXBlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIHRvIHNob3cvaGlkZSB2YWx1ZSBpbnB1dFxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwucGFyZW50RWxlbWVudDtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gc2Nyb2xsQ29udGFpbmVyPy5zY3JvbGxUb3AgfHwgMDtcblx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gU2hvdyB3YXJuaW5nIGlmIGN1cnJlbnQgdHlwZSByZXF1aXJlcyBhIGRpc2FibGVkIHBsdWdpblxuXHRcdFx0XHRcdGlmIChwbHVnaW5EaXNhYmxlZCkge1xuXHRcdFx0XHRcdFx0c2V0dGluZy5kZXNjRWwuY3JlYXRlRGl2KHtcblx0XHRcdFx0XHRcdFx0dGV4dDogJ1RoZSByZXF1aXJlZCBwbHVnaW4gaGFzIG5vdCBiZWVuIGVuYWJsZWQgb3IgY29uZmlndXJlZCBmb3IgdGhpcyB0eXBlLicsXG5cdFx0XHRcdFx0XHRcdGNsczogJ21vZC13YXJuaW5nJ1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vIFZhbHVlIGlucHV0IChjb25kaXRpb25hbCBvbiB0eXBlKVxuXHRcdGlmICghVU5DSEFOR0VBQkxFX1RZUEVTLmluY2x1ZGVzKGFjdGl2ZVR5cGUpKSB7XG5cdFx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRsZXQgZGVzYyA9ICcnO1xuXHRcdFx0XHRsZXQgcGxhY2Vob2xkZXIgPSAnJztcblxuXHRcdFx0XHRpZiAoYWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUpIHtcblx0XHRcdFx0XHRkZXNjID0gJ1RoZSBmaWxlIHRvIG9wZW4gYXMgeW91ciBob21lIGJhc2UgKHN1cHBvcnRzIC5tZCwgLm1keCwgLmNhbnZhcywgLmJhc2UpJztcblx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdQYXRoIHRvIGhvbWUgYmFzZSBmaWxlJztcblx0XHRcdFx0fSBlbHNlIGlmIChhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlKSB7XG5cdFx0XHRcdFx0ZGVzYyA9ICdUaGUgd29ya3NwYWNlIHRvIGxvYWQgYXMgeW91ciBob21lIGJhc2UnO1xuXHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ1dvcmtzcGFjZSBuYW1lJztcblx0XHRcdFx0fSBlbHNlIGlmIChhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyIHx8IGFjdGl2ZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5OZXdOb3RlKSB7XG5cdFx0XHRcdFx0ZGVzYyA9IGFjdGl2ZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXIgPyAnVGhlIGZvbGRlciB0byBwaWNrIGEgcmFuZG9tIGZpbGUgZnJvbScgOiAnVGhlIGZvbGRlciB0byBjcmVhdGUgbmV3IG5vdGVzIGluJztcblx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdGb2xkZXIgcGF0aCc7XG5cdFx0XHRcdH0gZWxzZSBpZiAoYWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkpvdXJuYWwpIHtcblx0XHRcdFx0XHRkZXNjID0gJ1RoZSBqb3VybmFsIG5hbWUnO1xuXHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ0pvdXJuYWwgbmFtZSc7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0LnNldE5hbWUoYWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUgPyAnRmlsZScgOiBcblx0XHRcdFx0XHRcdFx0YWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSA/ICdXb3Jrc3BhY2UnIDpcblx0XHRcdFx0XHRcdFx0KGFjdGl2ZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXIgfHwgYWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLk5ld05vdGUpID8gJ0ZvbGRlcicgOlxuXHRcdFx0XHRcdFx0XHRhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuSm91cm5hbCA/ICdKb3VybmFsJyA6ICdWYWx1ZScpXG5cdFx0XHRcdFx0LnNldERlc2MoZGVzYylcblx0XHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xuXHRcdFx0XHRcdFx0Ly8gQWRkIGFwcHJvcHJpYXRlIHN1Z2dlc3RlclxuXHRcdFx0XHRcdFx0aWYgKGFjdGl2ZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XG5cdFx0XHRcdFx0XHRcdG5ldyBGaWxlUGF0aFN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGFjdGl2ZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UpIHtcblx0XHRcdFx0XHRcdFx0bmV3IFdvcmtzcGFjZVN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGFjdGl2ZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXIgfHwgYWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLk5ld05vdGUpIHtcblx0XHRcdFx0XHRcdFx0bmV3IEZvbGRlclN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKHBsYWNlaG9sZGVyKVxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUoYWN0aXZlVmFsdWUgfHwgJycpXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoaXNNb2JpbGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVmFsdWUgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaG9tZUJhc2VWYWx1ZSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnT3BlbiBvbiBzdGFydHVwJylcblx0XHRcdFx0LnNldERlc2MoJ09wZW4gdGhlIGhvbWUgYmFzZSB3aGVuIGxhdW5jaGluZyBPYnNpZGlhbicpXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5PblN0YXJ0dXApXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5PblN0YXJ0dXAgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdC8vIEFkZCB3YXJuaW5nIGlmIE9ic2lkaWFuIDEuMTEuMCsgYW5kIG5hdGl2ZSBzZXR0aW5nIGV4aXN0c1xuXHRcdFx0aWYgKHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjAnKSkge1xuXHRcdFx0XHRjb25zdCBuYXRpdmVPcGVuQmVoYXZpb3IgPSB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5nZXROYXRpdmVPcGVuQmVoYXZpb3IoKTtcblx0XHRcdFx0aWYgKG5hdGl2ZU9wZW5CZWhhdmlvcikge1xuXHRcdFx0XHRcdHNldHRpbmcuZGVzY0VsLmNyZWF0ZURpdih7XG5cdFx0XHRcdFx0XHR0ZXh0OiBgTm90ZTogVGhpcyB3aWxsIG92ZXJyaWRlIE9ic2lkaWFuJ3MgbmF0aXZlIFwiRGVmYXVsdCBmaWxlIHRvIG9wZW5cIiBzZXR0aW5nIChjdXJyZW50bHkgc2V0IHRvIFwiJHtuYXRpdmVPcGVuQmVoYXZpb3J9XCIpLmAsXG5cdFx0XHRcdFx0XHRjbHM6ICdtb2Qtd2FybmluZydcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gXCJPcGVuIHdoZW4gZW1wdHlcIiBzZXR0aW5nIHJlbW92ZWQgLSByZWR1bmRhbnQgd2l0aCBcIk5ldyB0YWIgcmVwbGFjZW1lbnQ6IG9ubHkgd2hlbiBlbXB0eVwiXG5cdFx0Ly8gU2luY2UgT2JzaWRpYW4gYXV0by1jcmVhdGVzIGFuIGVtcHR5IHRhYiB3aGVuIHlvdSBjbG9zZSB0aGUgbGFzdCBvbmUsIHRoZXkgZG8gdGhlIHNhbWUgdGhpbmdcblxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdPcGVuaW5nIG1vZGUgKHN0YXJ0dXApJylcblx0XHRcdFx0LnNldERlc2MoJ0hvdyB0byBoYW5kbGUgZXhpc3RpbmcgdGFicyB3aGVuIG9wZW5pbmcgb24gc3RhcnR1cCcpXG5cdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IFt2YWx1ZSwgbGFiZWxdIG9mIE9iamVjdC5lbnRyaWVzKE9QRU5JTkdfTU9ERV9PUFRJT05TKSkge1xuXHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKHZhbHVlLCBsYWJlbCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGRyb3Bkb3duXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3Blbk1vZGUpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5Nb2RlID0gdmFsdWUgYXMgT3BlbmluZ01vZGU7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Z2VuZXJhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ09wZW5pbmcgbW9kZSAobWFudWFsKScpXG5cdFx0XHRcdC5zZXREZXNjKCdIb3cgdG8gaGFuZGxlIGV4aXN0aW5nIHRhYnMgd2hlbiBvcGVuaW5nIG1hbnVhbGx5Jylcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgW3ZhbHVlLCBsYWJlbF0gb2YgT2JqZWN0LmVudHJpZXMoT1BFTklOR19NT0RFX09QVElPTlMpKSB7XG5cdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24odmFsdWUsIGxhYmVsKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYW51YWxPcGVuTW9kZSlcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubWFudWFsT3Blbk1vZGUgPSB2YWx1ZSBhcyBPcGVuaW5nTW9kZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnVmlldyBtb2RlJylcblx0XHRcdFx0LnNldERlc2MoJ0hvdyB0byBvcGVuIE1hcmtkb3duIGZpbGVzJylcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgW3ZhbHVlLCBsYWJlbF0gb2YgT2JqZWN0LmVudHJpZXMoVklFV19NT0RFX09QVElPTlMpKSB7XG5cdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24odmFsdWUsIGxhYmVsKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuVmlld01vZGUpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5WaWV3TW9kZSA9IHZhbHVlIGFzIFZpZXdNb2RlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdSZXZlcnQgdmlldyBvbiBjbG9zZScpXG5cdFx0XHRcdC5zZXREZXNjKCdXaGVuIG5hdmlnYXRpbmcgYXdheSBmcm9tIHRoZSBob21lIGJhc2UsIHJlc3RvcmUgdGhlIGRlZmF1bHQgdmlldycpXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJldmVydFZpZXcpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnJldmVydFZpZXcgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnQXV0by1zY3JvbGwnKVxuXHRcdFx0XHQuc2V0RGVzYygnV2hlbiBvcGVuaW5nIHRoZSBob21lIGJhc2UsIHNjcm9sbCB0byB0aGUgYm90dG9tIGFuZCBmb2N1cyBvbiB0aGUgbGFzdCBsaW5lJylcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1Njcm9sbClcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1Njcm9sbCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdIaWRlIHJlbGVhc2Ugbm90ZXMnKVxuXHRcdFx0XHQuc2V0RGVzYygnTmV2ZXIgZGlzcGxheSByZWxlYXNlIG5vdGVzIHdoZW4gT2JzaWRpYW4gdXBkYXRlcycpXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVSZWxlYXNlTm90ZXMpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVSZWxlYXNlTm90ZXMgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQvLyBUYWIgQmVoYXZpb3IgU2V0dGluZ3Ncblx0XHRjb25zdCB0YWJHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsICdUYWIgQmVoYXZpb3InLCAnaG9tZS1iYXNlJyk7XG5cblx0XHR0YWJHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdPcGVuIGhvbWUgYmFzZSB3aGVuIGFsbCB0YWJzIGFyZSBjbG9zZWQnKVxuXHRcdFx0XHQuc2V0RGVzYygnV2hlbiB5b3UgY2xvc2UgYWxsIHRhYnMsIGF1dG9tYXRpY2FsbHkgb3BlbiB0aGUgaG9tZSBiYXNlJylcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbldoZW5BbGxUYWJzQ2xvc2VkKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuV2hlbkFsbFRhYnNDbG9zZWQgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHR0YWJHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdSZXBsYWNlIG5ldyB0YWJzJylcblx0XHRcdFx0LnNldERlc2MoJ09wZW4gaG9tZSBiYXNlIGluc3RlYWQgb2YgbmV3IGVtcHR5IHRhYnMgKHdvcmtzIGluZGVwZW5kZW50bHkgb2YgXCJvcGVuIGhvbWUgYmFzZSB3aGVuIGFsbCB0YWJzIGFyZSBjbG9zZWRcIiknKVxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcblx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBsYWNlTmV3VGFiKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBsYWNlTmV3VGFiID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gUHJlc2VydmUgc2Nyb2xsIHBvc2l0aW9uIGJlZm9yZSByZS1yZW5kZXJpbmdcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IHNjcm9sbENvbnRhaW5lcj8uc2Nyb2xsVG9wIHx8IDA7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTsgLy8gUmUtcmVuZGVyIHRvIHNob3cvaGlkZSBkZXBlbmRlbnQgc2V0dGluZ1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyaW5nXG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Ly8gT25seSBzaG93IG5ldyB0YWIgbW9kZSBpZiByZXBsYWNlIG5ldyB0YWIgaXMgZW5hYmxlZFxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBsYWNlTmV3VGFiKSB7XG5cdFx0XHR0YWJHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRcdHNldHRpbmdcblx0XHRcdFx0XHQuc2V0TmFtZSgnTmV3IHRhYiByZXBsYWNlbWVudCBtb2RlJylcblx0XHRcdFx0XHQuc2V0RGVzYygnV2hlbiB0byByZXBsYWNlIG5ldyB0YWJzIChvbmx5IHdoZW4gbm8gdGFicyBhcmUgb3Blbiwgb3IgYWx3YXlzKScpXG5cdFx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBbdmFsdWUsIGxhYmVsXSBvZiBPYmplY3QuZW50cmllcyhORVdfVEFCX01PREVfT1BUSU9OUykpIHtcblx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKHZhbHVlLCBsYWJlbCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3VGFiTW9kZSlcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm5ld1RhYk1vZGUgPSB2YWx1ZSBhcyBOZXdUYWJNb2RlO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBVc2UgZGlmZmVyZW50IGZpbGUgZm9yIG5ldyB0YWJzIHRvZ2dsZVxuXHRcdFx0dGFiR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0LnNldE5hbWUoJ1VzZSBkaWZmZXJlbnQgaG9tZSBiYXNlIGZvciBuZXcgdGFicycpXG5cdFx0XHRcdFx0LnNldERlc2MoJ0NvbmZpZ3VyZSBhIGRpZmZlcmVudCBob21lIGJhc2UgdG8gb3BlbiBmb3IgbmV3IHRhYnMgKGluc3RlYWQgb2YgdGhlIG1haW4gaG9tZSBiYXNlKScpXG5cdFx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZURpZmZlcmVudEZpbGVGb3JOZXdUYWIpXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VEaWZmZXJlbnRGaWxlRm9yTmV3VGFiID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gUHJlc2VydmUgc2Nyb2xsIHBvc2l0aW9uIGJlZm9yZSByZS1yZW5kZXJpbmdcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gc2Nyb2xsQ29udGFpbmVyPy5zY3JvbGxUb3AgfHwgMDtcblx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTsgLy8gUmUtcmVuZGVyIHRvIHNob3cvaGlkZSBkZXBlbmRlbnQgc2V0dGluZ3Ncblx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXJpbmdcblx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBTaG93IG5ldyB0YWIgY29uZmlndXJhdGlvbiBpZiBlbmFibGVkIChhbHdheXMgZGVza3RvcCBzZXR0aW5ncylcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VEaWZmZXJlbnRGaWxlRm9yTmV3VGFiKSB7XG5cdFx0XHRcdGNvbnN0IGRlc2t0b3BUeXBlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3VGFiVHlwZSB8fCBIb21lQmFzZVR5cGUuRmlsZTtcblx0XHRcdFx0Y29uc3QgZGVza3RvcFZhbHVlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3VGFiVmFsdWUgfHwgJyc7XG5cblx0XHRcdFx0Ly8gTmV3IHRhYiB0eXBlIGRyb3Bkb3duXG5cdFx0XHRcdHRhYkdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0XHQuc2V0TmFtZSgnTmV3IHRhYiB0eXBlJylcblx0XHRcdFx0XHRcdC5zZXREZXNjKCdXaGF0IHRvIG9wZW4gZm9yIG5ldyB0YWJzJylcblx0XHRcdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcblx0XHRcdFx0XHRcdFx0bGV0IHBsdWdpbkRpc2FibGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRmb3IgKGNvbnN0IHR5cGUgb2YgT2JqZWN0LnZhbHVlcyhIb21lQmFzZVR5cGUpKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5oYXNSZXF1aXJlZFBsdWdpbih0eXBlKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSWYgY3VycmVudCB0eXBlIGlzIGRpc2FibGVkLCBtYXJrIGl0IGJ1dCBzdGlsbCBhbGxvdyBpdFxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHR5cGUgPT09IGRlc2t0b3BUeXBlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHBsdWdpbkRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKHR5cGUsIHR5cGUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWRkIGRpc2FibGVkIG9wdGlvblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkcm9wZG93bi5zZWxlY3RFbC5jcmVhdGVFbCgnb3B0aW9uJywgeyBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0ZXh0OiB0eXBlLCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7IGRpc2FibGVkOiAndHJ1ZScgfSBcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24odHlwZSwgdHlwZSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZShkZXNrdG9wVHlwZSlcblx0XHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZXdUYWJUeXBlID0gdmFsdWUgYXMgSG9tZUJhc2VUeXBlO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciB0byBzaG93L2hpZGUgdmFsdWUgaW5wdXRcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2Nyb2xsQ29udGFpbmVyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHQvLyBTaG93IHdhcm5pbmcgaWYgY3VycmVudCB0eXBlIHJlcXVpcmVzIGEgZGlzYWJsZWQgcGx1Z2luXG5cdFx0XHRcdFx0XHRcdGlmIChwbHVnaW5EaXNhYmxlZCkge1xuXHRcdFx0XHRcdFx0XHRcdHNldHRpbmcuZGVzY0VsLmNyZWF0ZURpdih7XG5cdFx0XHRcdFx0XHRcdFx0XHR0ZXh0OiAnVGhlIHJlcXVpcmVkIHBsdWdpbiBoYXMgbm90IGJlZW4gZW5hYmxlZCBvciBjb25maWd1cmVkIGZvciB0aGlzIHR5cGUuJyxcblx0XHRcdFx0XHRcdFx0XHRcdGNsczogJ21vZC13YXJuaW5nJ1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Ly8gVmFsdWUgaW5wdXQgKGNvbmRpdGlvbmFsIG9uIHR5cGUpXG5cdFx0XHRcdGlmICghVU5DSEFOR0VBQkxFX1RZUEVTLmluY2x1ZGVzKGRlc2t0b3BUeXBlKSkge1xuXHRcdFx0XHRcdHRhYkdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0XHRcdGxldCBkZXNjID0gJyc7XG5cdFx0XHRcdFx0XHRsZXQgcGxhY2Vob2xkZXIgPSAnJztcblxuXHRcdFx0XHRcdFx0aWYgKGRlc2t0b3BUeXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkge1xuXHRcdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSBmaWxlIHRvIG9wZW4gZm9yIG5ldyB0YWJzIChzdXBwb3J0cyAubWQsIC5tZHgsIC5jYW52YXMsIC5iYXNlKSc7XG5cdFx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ1BhdGggdG8gbmV3IHRhYiBmaWxlJztcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoZGVza3RvcFR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UpIHtcblx0XHRcdFx0XHRcdFx0ZGVzYyA9ICdUaGUgd29ya3NwYWNlIHRvIGxvYWQgZm9yIG5ldyB0YWJzJztcblx0XHRcdFx0XHRcdFx0cGxhY2Vob2xkZXIgPSAnV29ya3NwYWNlIG5hbWUnO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChkZXNrdG9wVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlcikge1xuXHRcdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSBmb2xkZXIgdG8gcGljayBhIHJhbmRvbSBmaWxlIGZyb20gZm9yIG5ldyB0YWJzJztcblx0XHRcdFx0XHRcdFx0cGxhY2Vob2xkZXIgPSAnRm9sZGVyIHBhdGgnO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChkZXNrdG9wVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkpvdXJuYWwpIHtcblx0XHRcdFx0XHRcdFx0ZGVzYyA9ICdUaGUgam91cm5hbCBuYW1lIGZvciBuZXcgdGFicyc7XG5cdFx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ0pvdXJuYWwgbmFtZSc7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHNldHRpbmdcblx0XHRcdFx0XHRcdFx0LnNldE5hbWUoZGVza3RvcFR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlID8gJ05ldyB0YWIgZmlsZScgOiBcblx0XHRcdFx0XHRcdFx0XHRcdGRlc2t0b3BUeXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlID8gJ05ldyB0YWIgd29ya3NwYWNlJyA6XG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNrdG9wVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlciA/ICdOZXcgdGFiIGZvbGRlcicgOlxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVza3RvcFR5cGUgPT09IEhvbWVCYXNlVHlwZS5Kb3VybmFsID8gJ05ldyB0YWIgam91cm5hbCcgOiAnTmV3IHRhYiB2YWx1ZScpXG5cdFx0XHRcdFx0XHRcdC5zZXREZXNjKGRlc2MpXG5cdFx0XHRcdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gQWRkIGFwcHJvcHJpYXRlIHN1Z2dlc3RlclxuXHRcdFx0XHRcdFx0XHRcdGlmIChkZXNrdG9wVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdG5ldyBGaWxlUGF0aFN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChkZXNrdG9wVHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bmV3IFdvcmtzcGFjZVN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChkZXNrdG9wVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0bmV3IEZvbGRlclN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihwbGFjZWhvbGRlcilcblx0XHRcdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZShkZXNrdG9wVmFsdWUgfHwgJycpXG5cdFx0XHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm5ld1RhYlZhbHVlID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gTGVnYWN5IFwiS2VlcCBleGlzdGluZyB0YWJzXCIgLSBrZXB0IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IGJ1dCBoaWRkZW5cblx0XHQvLyAoZnVuY3Rpb25hbGl0eSBub3cgaGFuZGxlZCBieSBcIk9wZW5pbmcgbW9kZSAoc3RhcnR1cClcIilcblxuXHRcdC8vIFVJIEZlYXR1cmVzIFNldHRpbmdzXG5cdFx0Y29uc3QgdWlHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsICdVSSBGZWF0dXJlcycsICdob21lLWJhc2UnKTtcblxuXHRcdHVpR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnU3RpY2t5IGhvbWUgaWNvbicpXG5cdFx0XHRcdC5zZXREZXNjKCdTaG93IGEgaG9tZSBpY29uIGluIHRoZSB0YWIgYmFyIHRoYXQgc3RheXMgcGlubmVkIHRvIHRoZSBsZWZ0IChkZXNrdG9wIG9ubHkpJylcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24gPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnVwZGF0ZVN0aWNreVRhYkljb24oKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdC8vIFByZXNlcnZlIHNjcm9sbCBwb3NpdGlvbiBiZWZvcmUgcmUtcmVuZGVyaW5nXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5wYXJlbnRFbGVtZW50O1xuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7IC8vIFJlLXJlbmRlciB0byBzaG93L2hpZGUgZGVwZW5kZW50IHNldHRpbmdcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIHJlbmRlcmluZ1xuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vIE9ubHkgc2hvdyBzdGlja3kgaWNvbiBzZXR0aW5ncyBpZiBzdGlja3kgaWNvbiBpcyBlbmFibGVkXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTdGlja3lIb21lSWNvbikge1xuXHRcdFx0dWlHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRcdHNldHRpbmdcblx0XHRcdFx0XHQuc2V0TmFtZSgnSWNvbicpXG5cdFx0XHRcdFx0LnNldERlc2MoJ1RoZSBpY29uIHRvIGRpc3BsYXkgaW4gdGhlIHN0aWNreSBob21lIGljb24nKVxuXHRcdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgaWNvbk5hbWUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGlja3lJY29uTmFtZSB8fCAnaG9tZSc7XG5cdFx0XHRcdFx0XHRidXR0b25cblx0XHRcdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ0NoYW5nZSBpY29uJylcblx0XHRcdFx0XHRcdFx0LnNldEljb24oaWNvbk5hbWUpXG5cdFx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBwaWNrZXIgPSBuZXcgSWNvblBpY2tlcihcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RpY2t5SWNvbk5hbWUsXG5cdFx0XHRcdFx0XHRcdFx0XHQoaWNvbjogc3RyaW5nIHwgbnVsbCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RpY2t5SWNvbk5hbWUgPSBpY29uO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSB0aGUgaWNvbiBkaXNwbGF5XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc3RpY2t5VGFiU2VydmljZS51cGRhdGUoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIgc2V0dGluZ3MgdG8gdXBkYXRlIGJ1dHRvbiBpY29uXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHRwaWNrZXIub3BlbigpO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHR1aUdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdC5zZXROYW1lKCdIaWRlIHRhYiBoZWFkZXInKVxuXHRcdFx0XHRcdC5zZXREZXNjKCdIaWRlIHRoZSBzdGlja3kgaG9tZSB0YWIgaGVhZGVyIHdoZW4gaXRcXCdzIG9wZW4sIHVzaW5nIHRoZSBzdGlja3kgaWNvbiBhcyB0aGUgdGFiIGluZGljYXRvcicpXG5cdFx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVIb21lVGFiSGVhZGVyKVxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUhvbWVUYWJIZWFkZXIgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zdGlja3lUYWJTZXJ2aWNlLnVwZGF0ZVRhYkhlYWRlcnMoKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblxuXHRcdC8vIE1vYmlsZSBTZXR0aW5nc1xuXHRcdGNvbnN0IG1vYmlsZUdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ01vYmlsZScsICdob21lLWJhc2UnKTtcblxuXHRcdG1vYmlsZUdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdC5zZXROYW1lKCdTZXBhcmF0ZSBtb2JpbGUgaG9tZSBiYXNlJylcblx0XHRcdFx0XHQuc2V0RGVzYygnVXNlIGEgZGlmZmVyZW50IGhvbWUgYmFzZSBvbiBtb2JpbGUgZGV2aWNlcycpXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNlcGFyYXRlTW9iaWxlKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZXBhcmF0ZU1vYmlsZSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciB0byBzaG93IG1vYmlsZSBzZXR0aW5nc1xuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwucGFyZW50RWxlbWVudDtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gc2Nyb2xsQ29udGFpbmVyPy5zY3JvbGxUb3AgfHwgMDtcblx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Ly8gU2hvdyBtb2JpbGUtc3BlY2lmaWMgc2V0dGluZ3MgaWYgc2VwYXJhdGUgbW9iaWxlIGlzIGVuYWJsZWRcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VwYXJhdGVNb2JpbGUpIHtcblx0XHRcdG1vYmlsZUdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdC5zZXROYW1lKCdNb2JpbGUgaG9tZSBiYXNlJylcblx0XHRcdFx0XHQuc2V0RGVzYygnV2hhdCB0byBvcGVuIGFzIHlvdXIgaG9tZSBiYXNlIG9uIG1vYmlsZScpXG5cdFx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgbW9iaWxlVHlwZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVHlwZSB8fCBIb21lQmFzZVR5cGUuRmlsZTtcblx0XHRcdFx0XHRcdGxldCBwbHVnaW5EaXNhYmxlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IHR5cGUgb2YgT2JqZWN0LnZhbHVlcyhIb21lQmFzZVR5cGUpKSB7XG5cdFx0XHRcdFx0XHRcdGlmICghdGhpcy5wbHVnaW4uaGFzUmVxdWlyZWRQbHVnaW4odHlwZSkpIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBJZiBjdXJyZW50IHR5cGUgaXMgZGlzYWJsZWQsIG1hcmsgaXQgYnV0IHN0aWxsIGFsbG93IGl0XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHR5cGUgPT09IG1vYmlsZVR5cGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHBsdWdpbkRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih0eXBlLCB0eXBlKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWRkIGRpc2FibGVkIG9wdGlvblxuXHRcdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uc2VsZWN0RWwuY3JlYXRlRWwoJ29wdGlvbicsIHsgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRleHQ6IHR5cGUsIFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7IGRpc2FibGVkOiAndHJ1ZScgfSBcblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih0eXBlLCB0eXBlKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUobW9iaWxlVHlwZSlcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVHlwZSA9IHZhbHVlIGFzIEhvbWVCYXNlVHlwZTtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gc2Nyb2xsQ29udGFpbmVyPy5zY3JvbGxUb3AgfHwgMDtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gU2hvdyB3YXJuaW5nIGlmIGN1cnJlbnQgdHlwZSByZXF1aXJlcyBhIGRpc2FibGVkIHBsdWdpblxuXHRcdFx0XHRcdFx0aWYgKHBsdWdpbkRpc2FibGVkKSB7XG5cdFx0XHRcdFx0XHRcdHNldHRpbmcuZGVzY0VsLmNyZWF0ZURpdih7XG5cdFx0XHRcdFx0XHRcdFx0dGV4dDogJ1RoZSByZXF1aXJlZCBwbHVnaW4gaGFzIG5vdCBiZWVuIGVuYWJsZWQgb3IgY29uZmlndXJlZCBmb3IgdGhpcyB0eXBlLicsXG5cdFx0XHRcdFx0XHRcdFx0Y2xzOiAnbW9kLXdhcm5pbmcnXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRcdGlmICghVU5DSEFOR0VBQkxFX1RZUEVTLmluY2x1ZGVzKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVHlwZSkpIHtcblx0XHRcdFx0bW9iaWxlR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IG1vYmlsZVR5cGUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVR5cGU7XG5cdFx0XHRcdFx0bGV0IGRlc2MgPSAnJztcblx0XHRcdFx0XHRsZXQgcGxhY2Vob2xkZXIgPSAnJztcblxuXHRcdFx0XHRcdGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkge1xuXHRcdFx0XHRcdFx0ZGVzYyA9ICdUaGUgZmlsZSB0byBvcGVuIGFzIHlvdXIgaG9tZSBiYXNlIG9uIG1vYmlsZSc7XG5cdFx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdQYXRoIHRvIGhvbWUgYmFzZSBmaWxlJztcblx0XHRcdFx0XHR9IGVsc2UgaWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UpIHtcblx0XHRcdFx0XHRcdGRlc2MgPSAnVGhlIHdvcmtzcGFjZSB0byBsb2FkIGFzIHlvdXIgaG9tZSBiYXNlIG9uIG1vYmlsZSc7XG5cdFx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdXb3Jrc3BhY2UgbmFtZSc7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyKSB7XG5cdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSBmb2xkZXIgdG8gcGljayBhIHJhbmRvbSBmaWxlIGZyb20gb24gbW9iaWxlJztcblx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ0ZvbGRlciBwYXRoJztcblx0XHRcdFx0XHR9IGVsc2UgaWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Kb3VybmFsKSB7XG5cdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSBqb3VybmFsIG5hbWUgZm9yIG1vYmlsZSc7XG5cdFx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdKb3VybmFsIG5hbWUnO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHNldHRpbmdcblx0XHRcdFx0XHRcdC5zZXROYW1lKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlID8gJ01vYmlsZSBmaWxlJyA6IFxuXHRcdFx0XHRcdFx0XHRcdG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UgPyAnTW9iaWxlIHdvcmtzcGFjZScgOlxuXHRcdFx0XHRcdFx0XHRcdG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXIgPyAnTW9iaWxlIGZvbGRlcicgOlxuXHRcdFx0XHRcdFx0XHRcdG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Kb3VybmFsID8gJ01vYmlsZSBqb3VybmFsJyA6ICdNb2JpbGUgdmFsdWUnKVxuXHRcdFx0XHRcdFx0LnNldERlc2MoZGVzYylcblx0XHRcdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkge1xuXHRcdFx0XHRcdFx0XHRcdG5ldyBGaWxlUGF0aFN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSkge1xuXHRcdFx0XHRcdFx0XHRcdG5ldyBXb3Jrc3BhY2VTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXIpIHtcblx0XHRcdFx0XHRcdFx0XHRuZXcgRm9sZGVyU3VnZ2VzdCh0aGlzLmFwcCwgdGV4dC5pbnB1dEVsKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihwbGFjZWhvbGRlcilcblx0XHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VWYWx1ZSB8fCAnJylcblx0XHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVZhbHVlID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZXBsYWNlIG1vYmlsZSBuZXcgdGFiIGJ1dHRvbiAoYWx3YXlzIGF2YWlsYWJsZSwgbm90IGRlcGVuZGVudCBvbiBcIlVzZSBkaWZmZXJlbnQgaG9tZSBiYXNlIGZvciBuZXcgdGFic1wiKVxuXHRcdG1vYmlsZUdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ1JlcGxhY2UgbW9iaWxlIG5ldyB0YWIgYnV0dG9uJylcblx0XHRcdFx0LnNldERlc2MoJ0NoYW5nZSB0aGUgbW9iaWxlIG5ldyB0YWIgYnV0dG9uIHRvIGEgaG9tZSBpY29uJylcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU1vYmlsZU5ld1RhYilcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU1vYmlsZU5ld1RhYiA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4udXBkYXRlTW9iaWxlQnV0dG9uKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQvLyBNb2JpbGUgbmV3IHRhYiBzZXR0aW5ncyAob25seSBzaG93IGlmIFwiVXNlIGRpZmZlcmVudCBmaWxlIGZvciBuZXcgdGFic1wiIGlzIGVuYWJsZWQpXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZURpZmZlcmVudEZpbGVGb3JOZXdUYWIpIHtcblx0XHRcdC8vIFNlcGFyYXRlIG1vYmlsZSBuZXcgdGFiIHRvZ2dsZVxuXHRcdFx0bW9iaWxlR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0LnNldE5hbWUoJ1NlcGFyYXRlIG1vYmlsZSBuZXcgdGFiJylcblx0XHRcdFx0XHQuc2V0RGVzYygnVXNlIGEgZGlmZmVyZW50IG5ldyB0YWIgZmlsZSBvbiBtb2JpbGUgZGV2aWNlcycpXG5cdFx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm5ld1RhYlNlcGFyYXRlTW9iaWxlKVxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3VGFiU2VwYXJhdGVNb2JpbGUgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIgdG8gc2hvdyBtb2JpbGUgc2V0dGluZ3Ncblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gc2Nyb2xsQ29udGFpbmVyPy5zY3JvbGxUb3AgfHwgMDtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBTaG93IG1vYmlsZS1zcGVjaWZpYyBuZXcgdGFiIHNldHRpbmdzIGlmIHNlcGFyYXRlIG1vYmlsZSBpcyBlbmFibGVkXG5cdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3VGFiU2VwYXJhdGVNb2JpbGUpIHtcblx0XHRcdFx0Y29uc3QgbW9iaWxlVHlwZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZU5ld1RhYlR5cGUgfHwgSG9tZUJhc2VUeXBlLkZpbGU7XG5cdFx0XHRcdGNvbnN0IG1vYmlsZVZhbHVlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlTmV3VGFiVmFsdWUgfHwgJyc7XG5cblx0XHRcdFx0Ly8gTW9iaWxlIG5ldyB0YWIgdHlwZSBkcm9wZG93blxuXHRcdFx0XHRtb2JpbGVHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdFx0LnNldE5hbWUoJ01vYmlsZSBuZXcgdGFiIHR5cGUnKVxuXHRcdFx0XHRcdFx0LnNldERlc2MoJ1doYXQgdG8gb3BlbiBmb3IgbmV3IHRhYnMgb24gbW9iaWxlJylcblx0XHRcdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcblx0XHRcdFx0XHRcdFx0bGV0IHBsdWdpbkRpc2FibGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRmb3IgKGNvbnN0IHR5cGUgb2YgT2JqZWN0LnZhbHVlcyhIb21lQmFzZVR5cGUpKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5oYXNSZXF1aXJlZFBsdWdpbih0eXBlKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSWYgY3VycmVudCB0eXBlIGlzIGRpc2FibGVkLCBtYXJrIGl0IGJ1dCBzdGlsbCBhbGxvdyBpdFxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHR5cGUgPT09IG1vYmlsZVR5cGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cGx1Z2luRGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24odHlwZSwgdHlwZSk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBBZGQgZGlzYWJsZWQgb3B0aW9uXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duLnNlbGVjdEVsLmNyZWF0ZUVsKCdvcHRpb24nLCB7IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRleHQ6IHR5cGUsIFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgZGlzYWJsZWQ6ICd0cnVlJyB9IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih0eXBlLCB0eXBlKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdGRyb3Bkb3duXG5cdFx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKG1vYmlsZVR5cGUpXG5cdFx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlTmV3VGFiVHlwZSA9IHZhbHVlIGFzIEhvbWVCYXNlVHlwZTtcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5wYXJlbnRFbGVtZW50O1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gc2Nyb2xsQ29udGFpbmVyPy5zY3JvbGxUb3AgfHwgMDtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gU2hvdyB3YXJuaW5nIGlmIGN1cnJlbnQgdHlwZSByZXF1aXJlcyBhIGRpc2FibGVkIHBsdWdpblxuXHRcdFx0XHRcdFx0XHRpZiAocGx1Z2luRGlzYWJsZWQpIHtcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5nLmRlc2NFbC5jcmVhdGVEaXYoe1xuXHRcdFx0XHRcdFx0XHRcdFx0dGV4dDogJ1RoZSByZXF1aXJlZCBwbHVnaW4gaGFzIG5vdCBiZWVuIGVuYWJsZWQgb3IgY29uZmlndXJlZCBmb3IgdGhpcyB0eXBlLicsXG5cdFx0XHRcdFx0XHRcdFx0XHRjbHM6ICdtb2Qtd2FybmluZydcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdC8vIE1vYmlsZSB2YWx1ZSBpbnB1dCAoY29uZGl0aW9uYWwgb24gdHlwZSlcblx0XHRcdFx0aWYgKCFVTkNIQU5HRUFCTEVfVFlQRVMuaW5jbHVkZXMobW9iaWxlVHlwZSkpIHtcblx0XHRcdFx0XHRtb2JpbGVHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRcdFx0XHRsZXQgZGVzYyA9ICcnO1xuXHRcdFx0XHRcdFx0bGV0IHBsYWNlaG9sZGVyID0gJyc7XG5cblx0XHRcdFx0XHRcdGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkge1xuXHRcdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSBmaWxlIHRvIG9wZW4gZm9yIG5ldyB0YWJzIG9uIG1vYmlsZSc7XG5cdFx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ1BhdGggdG8gbW9iaWxlIG5ldyB0YWIgZmlsZSc7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UpIHtcblx0XHRcdFx0XHRcdFx0ZGVzYyA9ICdUaGUgd29ya3NwYWNlIHRvIGxvYWQgZm9yIG5ldyB0YWJzIG9uIG1vYmlsZSc7XG5cdFx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ1dvcmtzcGFjZSBuYW1lJztcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlcikge1xuXHRcdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSBmb2xkZXIgdG8gcGljayBhIHJhbmRvbSBmaWxlIGZyb20gZm9yIG5ldyB0YWJzIG9uIG1vYmlsZSc7XG5cdFx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ0ZvbGRlciBwYXRoJztcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkpvdXJuYWwpIHtcblx0XHRcdFx0XHRcdFx0ZGVzYyA9ICdUaGUgam91cm5hbCBuYW1lIGZvciBuZXcgdGFicyBvbiBtb2JpbGUnO1xuXHRcdFx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdKb3VybmFsIG5hbWUnO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0XHRcdC5zZXROYW1lKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlID8gJ01vYmlsZSBuZXcgdGFiIGZpbGUnIDogXG5cdFx0XHRcdFx0XHRcdFx0XHRtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlID8gJ01vYmlsZSBuZXcgdGFiIHdvcmtzcGFjZScgOlxuXHRcdFx0XHRcdFx0XHRcdFx0bW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlciA/ICdNb2JpbGUgbmV3IHRhYiBmb2xkZXInIDpcblx0XHRcdFx0XHRcdFx0XHRcdG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Kb3VybmFsID8gJ01vYmlsZSBuZXcgdGFiIGpvdXJuYWwnIDogJ01vYmlsZSBuZXcgdGFiIHZhbHVlJylcblx0XHRcdFx0XHRcdFx0LnNldERlc2MoZGVzYylcblx0XHRcdFx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdG5ldyBGaWxlUGF0aFN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuZXcgV29ya3NwYWNlU3VnZ2VzdCh0aGlzLmFwcCwgdGV4dC5pbnB1dEVsKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdG5ldyBGb2xkZXJTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIocGxhY2Vob2xkZXIpXG5cdFx0XHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUobW9iaWxlVmFsdWUgfHwgJycpXG5cdFx0XHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZU5ld1RhYlZhbHVlID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQXV0b21hdGlvbiBTZXR0aW5nc1xuXHRcdGNvbnN0IGF1dG9tYXRpb25Hcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsICdBdXRvbWF0aW9uJywgJ2hvbWUtYmFzZScpO1xuXG5cdFx0YXV0b21hdGlvbkdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdGNvbnN0IGNvbW1hbmRJZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbW1hbmRPbk9wZW47XG5cdFx0XHRjb25zdCBjb21tYW5kID0gY29tbWFuZElkID8gZ2V0Q29tbWFuZEJ5SWQodGhpcy5hcHAsIGNvbW1hbmRJZCkgOiB1bmRlZmluZWQ7XG5cdFx0XHRjb25zdCBkaXNwbGF5VmFsdWUgPSBjb21tYW5kID8gY29tbWFuZC5uYW1lIDogY29tbWFuZElkO1xuXG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdDb21tYW5kIG9uIG9wZW4nKVxuXHRcdFx0XHQuc2V0RGVzYygnUnVuIGFuIE9ic2lkaWFuIGNvbW1hbmQgd2hlbiBvcGVuaW5nIGhvbWUgYmFzZScpXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG5cdFx0XHRcdFx0Ly8gQWRkIGNvbW1hbmQgc3VnZ2VzdGVyXG5cdFx0XHRcdFx0bmV3IENvbW1hbmRTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignU2VhcmNoIGZvciBhIGNvbW1hbmQuLi4nKVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKGRpc3BsYXlWYWx1ZSB8fCAnJylcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY29tbWFuZE9uT3BlbiA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGJ0bikgPT4ge1xuXHRcdFx0XHRcdGJ0blxuXHRcdFx0XHRcdFx0LnNldEljb24oJ3gnKVxuXHRcdFx0XHRcdFx0LnNldFRvb2x0aXAoJ0NsZWFyIGNvbW1hbmQnKVxuXHRcdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb21tYW5kT25PcGVuID0gJyc7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gUHJlc2VydmUgc2Nyb2xsIHBvc2l0aW9uIGJlZm9yZSByZS1yZW5kZXJpbmdcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IHNjcm9sbENvbnRhaW5lcj8uc2Nyb2xsVG9wIHx8IDA7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIHJlbmRlcmluZ1xuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdGF1dG9tYXRpb25Hcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdXYWl0IGZvciBnaXQgc3luYycpXG5cdFx0XHRcdC5zZXREZXNjKCdXYWl0IGJlZm9yZSBjcmVhdGluZyBwZXJpb2RpYyBvciBqb3VybmFsIG5vdGVzIHRvIGFsbG93IGdpdCBzeW5jIHRvIGZpbmlzaCBwdWxsaW5nIGV4aXN0aW5nIG5vdGVzLiBPbmx5IGFwcGxpZXMgd2hlbiBhIG5vdGUgZG9lc25cXCd0IGFscmVhZHkgZXhpc3QuJylcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mud2FpdEZvckdpdFN5bmMpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLndhaXRGb3JHaXRTeW5jID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTsgLy8gUmUtcmVuZGVyIHRvIHNob3cvaGlkZSB0aW1lb3V0IHNldHRpbmdcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy53YWl0Rm9yR2l0U3luYykge1xuXHRcdFx0YXV0b21hdGlvbkdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdC5zZXROYW1lKCdHaXQgc3luYyB0aW1lb3V0IChzZWNvbmRzKScpXG5cdFx0XHRcdFx0LnNldERlc2MoJ0hvdyBsb25nIHRvIHdhaXQgZm9yIGdpdCBzeW5jIHRvIGZpbmlzaCBiZWZvcmUgY3JlYXRpbmcgYSBuZXcgbm90ZScpXG5cdFx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcblx0XHRcdFx0XHRcdHRleHQuaW5wdXRFbC50eXBlID0gJ251bWJlcic7XG5cdFx0XHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignMycpXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5naXRTeW5jVGltZW91dD8udG9TdHJpbmcoKSB8fCAnMycpXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBudW1WYWx1ZSA9IHBhcnNlSW50KHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIWlzTmFOKG51bVZhbHVlKSAmJiBudW1WYWx1ZSA+PSAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5naXRTeW5jVGltZW91dCA9IG51bVZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxufVxuIiwgIi8qKlxyXG4gKiBDb21wYXRpYmlsaXR5IHV0aWxpdGllcyBmb3Igc2V0dGluZ3NcclxuICogUHJvdmlkZXMgYmFja3dhcmQgY29tcGF0aWJpbGl0eSBmb3IgU2V0dGluZ0dyb3VwIChyZXF1aXJlcyBBUEkgMS4xMS4wKylcclxuICovXHJcblxyXG5pbXBvcnQgeyBTZXR0aW5nLCByZXF1aXJlQXBpVmVyc2lvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0ICogYXMgT2JzaWRpYW5Nb2R1bGUgZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuLyoqXHJcbiAqIEludGVyZmFjZSB0aGF0IHdvcmtzIHdpdGggYm90aCBTZXR0aW5nR3JvdXAgYW5kIGZhbGxiYWNrIGNvbnRhaW5lclxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTZXR0aW5nc0NvbnRhaW5lciB7XHJcblx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIHNldHRpbmdzIGNvbnRhaW5lciB0aGF0IHVzZXMgU2V0dGluZ0dyb3VwIGlmIGF2YWlsYWJsZSAoQVBJIDEuMTEuMCspLFxyXG4gKiBvdGhlcndpc2UgZmFsbHMgYmFjayB0byBjcmVhdGluZyBhIGhlYWRpbmcgYW5kIHVzaW5nIHRoZSBjb250YWluZXIgZGlyZWN0bHkuXHJcbiAqIFxyXG4gKiBVc2VzIHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjAnKSB0byBjaGVjayBpZiBTZXR0aW5nR3JvdXAgaXMgYXZhaWxhYmxlLlxyXG4gKiBUaGlzIGlzIHRoZSBvZmZpY2lhbCBPYnNpZGlhbiBBUEkgbWV0aG9kIGZvciB2ZXJzaW9uIGNoZWNraW5nLlxyXG4gKiBcclxuICogQHBhcmFtIGNvbnRhaW5lckVsIC0gVGhlIGNvbnRhaW5lciBlbGVtZW50IGZvciBzZXR0aW5nc1xyXG4gKiBAcGFyYW0gaGVhZGluZyAtIFRoZSBoZWFkaW5nIHRleHQgZm9yIHRoZSBzZXR0aW5ncyBncm91cCAob3B0aW9uYWwpXHJcbiAqIEBwYXJhbSBtYW5pZmVzdElkIC0gVGhlIHBsdWdpbidzIG1hbmlmZXN0IElEIGZvciBDU1Mgc2NvcGluZyAocmVxdWlyZWQgZm9yIGZhbGxiYWNrIG1vZGUpXHJcbiAqIEByZXR1cm5zIEEgY29udGFpbmVyIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIHNldHRpbmdzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2V0dGluZ3NHcm91cChcclxuXHRjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXHJcblx0aGVhZGluZz86IHN0cmluZyxcclxuXHRtYW5pZmVzdElkPzogc3RyaW5nXHJcbik6IFNldHRpbmdzQ29udGFpbmVyIHtcclxuXHQvLyBBbHdheXMgYWRkIHNjb3BpbmcgY2xhc3MgdG8gY29udGFpbmVyRWwgdG8gc2NvcGUgQ1NTIHRvIG9ubHkgdGhpcyBwbHVnaW4ncyBzZXR0aW5nc1xyXG5cdGlmIChtYW5pZmVzdElkKSB7XHJcblx0XHRjb250YWluZXJFbC5hZGRDbGFzcyhgJHttYW5pZmVzdElkfS1zZXR0aW5ncy1jb21wYXRgKTtcclxuXHR9XHJcblxyXG5cdC8vIENoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUgKEFQSSAxLjExLjArKVxyXG5cdGlmIChyZXF1aXJlQXBpVmVyc2lvbignMS4xMS4wJykpIHtcclxuXHRcdC8vIEFjY2VzcyBTZXR0aW5nR3JvdXAgdmlhIHR5cGUgYXNzZXJ0aW9uIHNpbmNlIGl0IG1heSBub3QgYmUgaW4gdHlwZSBkZWZpbml0aW9uc1xyXG5cdFx0Y29uc3QgU2V0dGluZ0dyb3VwQ2xhc3MgPSAoT2JzaWRpYW5Nb2R1bGUgYXMgdW5rbm93biBhcyB7IFNldHRpbmdHcm91cD86IG5ldyAoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSA9PiB7XHJcblx0XHRcdHNldEhlYWRpbmcoaGVhZGluZzogc3RyaW5nKToge1xyXG5cdFx0XHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKTogdm9pZDtcclxuXHRcdFx0fTtcclxuXHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xyXG5cdFx0fSB9KS5TZXR0aW5nR3JvdXA7XHJcblxyXG5cdFx0aWYgKFNldHRpbmdHcm91cENsYXNzKSB7XHJcblx0XHRcdGNvbnN0IGdyb3VwID0gaGVhZGluZ1xyXG5cdFx0XHRcdD8gbmV3IFNldHRpbmdHcm91cENsYXNzKGNvbnRhaW5lckVsKS5zZXRIZWFkaW5nKGhlYWRpbmcpXHJcblx0XHRcdFx0OiBuZXcgU2V0dGluZ0dyb3VwQ2xhc3MoY29udGFpbmVyRWwpO1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKSB7XHJcblx0XHRcdFx0XHRncm91cC5hZGRTZXR0aW5nKGNiKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBGYWxsYmFjayBwYXRoIChlaXRoZXIgQVBJIDwgMS4xMS4wIG9yIFNldHRpbmdHcm91cCBub3QgZm91bmQpXHJcblx0XHJcblx0aWYgKGhlYWRpbmcpIHtcclxuXHRcdGNvbnN0IGhlYWRpbmdFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdignc2V0dGluZy1ncm91cC1oZWFkaW5nJyk7XHJcblx0XHRoZWFkaW5nRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiBoZWFkaW5nIH0pO1xyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4ge1xyXG5cdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpIHtcclxuXHRcdFx0Y29uc3Qgc2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKTtcclxuXHRcdFx0Y2Ioc2V0dGluZyk7XHJcblx0XHR9XHJcblx0fTtcclxufVxyXG4iLCAiLyoqXHJcbiAqIEZpbGUgUGF0aCBTdWdnZXN0ZXIgQ29tcG9uZW50XHJcbiAqIFByb3ZpZGVzIGF1dG9jb21wbGV0ZSBmb3IgZmlsZSBwYXRocyBpbiBzZXR0aW5nc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFic3RyYWN0SW5wdXRTdWdnZXN0LCBBcHAsIFRGaWxlLCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuLyoqXHJcbiAqIFN1cHBvcnRlZCBmaWxlIGV4dGVuc2lvbnMgZm9yIGhvbWUgYmFzZVxyXG4gKi9cclxuY29uc3QgU1VQUE9SVEVEX0VYVEVOU0lPTlMgPSBbJ21kJywgJ21keCcsICdjYW52YXMnLCAnYmFzZSddO1xyXG5cclxuLyoqXHJcbiAqIEZpbGUgcGF0aCBzdWdnZXN0ZXIgdGhhdCBwcm92aWRlcyBhdXRvY29tcGxldGUgZm9yIHZhdWx0IGZpbGVzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRmlsZVBhdGhTdWdnZXN0IGV4dGVuZHMgQWJzdHJhY3RJbnB1dFN1Z2dlc3Q8VEZpbGU+IHtcclxuXHRwcml2YXRlIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50KSB7XHJcblx0XHRzdXBlcihhcHAsIGlucHV0RWwpO1xyXG5cdFx0dGhpcy5pbnB1dEVsID0gaW5wdXRFbDtcclxuXHR9XHJcblxyXG5cdGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBURmlsZVtdIHtcclxuXHRcdGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0Y29uc3QgZmlsZXM6IFRGaWxlW10gPSBbXTtcclxuXHJcblx0XHQvLyBHZXQgYWxsIGZpbGVzIGZyb20gdmF1bHRcclxuXHRcdHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkuZm9yRWFjaCgoZmlsZSkgPT4ge1xyXG5cdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRcdFx0Ly8gT25seSBpbmNsdWRlIHN1cHBvcnRlZCBmaWxlIHR5cGVzXHJcblx0XHRcdFx0aWYgKFNVUFBPUlRFRF9FWFRFTlNJT05TLmluY2x1ZGVzKGZpbGUuZXh0ZW5zaW9uKSkge1xyXG5cdFx0XHRcdFx0Ly8gTWF0Y2ggYWdhaW5zdCBwYXRoIG9yIG5hbWVcclxuXHRcdFx0XHRcdGlmIChcclxuXHRcdFx0XHRcdFx0ZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSkgfHxcclxuXHRcdFx0XHRcdFx0ZmlsZS5iYXNlbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyUXVlcnkpXHJcblx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0ZmlsZXMucHVzaChmaWxlKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFNvcnQgYnkgcmVsZXZhbmNlIChleGFjdCBtYXRjaGVzIGZpcnN0LCB0aGVuIGFscGhhYmV0aWNhbGx5KVxyXG5cdFx0ZmlsZXMuc29ydCgoYSwgYikgPT4ge1xyXG5cdFx0XHRjb25zdCBhU3RhcnRzV2l0aCA9IGEucGF0aC50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgobG93ZXJRdWVyeSk7XHJcblx0XHRcdGNvbnN0IGJTdGFydHNXaXRoID0gYi5wYXRoLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChsb3dlclF1ZXJ5KTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChhU3RhcnRzV2l0aCAmJiAhYlN0YXJ0c1dpdGgpIHJldHVybiAtMTtcclxuXHRcdFx0aWYgKCFhU3RhcnRzV2l0aCAmJiBiU3RhcnRzV2l0aCkgcmV0dXJuIDE7XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gYS5wYXRoLmxvY2FsZUNvbXBhcmUoYi5wYXRoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIExpbWl0IHJlc3VsdHNcclxuXHRcdHJldHVybiBmaWxlcy5zbGljZSgwLCAyMCk7XHJcblx0fVxyXG5cclxuXHRyZW5kZXJTdWdnZXN0aW9uKGZpbGU6IFRGaWxlLCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdC8vIFNob3cgZmlsZSBuYW1lIHByb21pbmVudGx5XHJcblx0XHRlbC5jcmVhdGVFbCgnZGl2JywgeyBcclxuXHRcdFx0dGV4dDogZmlsZS5iYXNlbmFtZSxcclxuXHRcdFx0Y2xzOiAnc3VnZ2VzdGlvbi10aXRsZSdcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHQvLyBTaG93IHBhdGggaW4gc21hbGxlciB0ZXh0IGlmIGRpZmZlcmVudCBmcm9tIGJhc2VuYW1lXHJcblx0XHRpZiAoZmlsZS5wYXJlbnQgJiYgZmlsZS5wYXJlbnQucGF0aCAhPT0gJy8nKSB7XHJcblx0XHRcdGVsLmNyZWF0ZUVsKCdzbWFsbCcsIHsgXHJcblx0XHRcdFx0dGV4dDogZmlsZS5wYXJlbnQucGF0aCxcclxuXHRcdFx0XHRjbHM6ICdzdWdnZXN0aW9uLXBhdGgnXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNob3cgZmlsZSB0eXBlIGluZGljYXRvclxyXG5cdFx0aWYgKGZpbGUuZXh0ZW5zaW9uICE9PSAnbWQnKSB7XHJcblx0XHRcdGVsLmNyZWF0ZUVsKCdzcGFuJywge1xyXG5cdFx0XHRcdHRleHQ6IGZpbGUuZXh0ZW5zaW9uLnRvVXBwZXJDYXNlKCksXHJcblx0XHRcdFx0Y2xzOiAnc3VnZ2VzdGlvbi1mbGFpcidcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRzZWxlY3RTdWdnZXN0aW9uKGZpbGU6IFRGaWxlKTogdm9pZCB7XHJcblx0XHR0aGlzLmlucHV0RWwudmFsdWUgPSBmaWxlLnBhdGg7XHJcblx0XHR0aGlzLmlucHV0RWwudHJpZ2dlcignaW5wdXQnKTtcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGb2xkZXIgcGF0aCBzdWdnZXN0ZXIgZm9yIHNlbGVjdGluZyBmb2xkZXJzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRm9sZGVyU3VnZ2VzdCBleHRlbmRzIEFic3RyYWN0SW5wdXRTdWdnZXN0PFRGb2xkZXI+IHtcclxuXHRwcml2YXRlIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50KSB7XHJcblx0XHRzdXBlcihhcHAsIGlucHV0RWwpO1xyXG5cdFx0dGhpcy5pbnB1dEVsID0gaW5wdXRFbDtcclxuXHR9XHJcblxyXG5cdGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBURm9sZGVyW10ge1xyXG5cdFx0Y29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XHJcblx0XHRjb25zdCBmb2xkZXJzOiBURm9sZGVyW10gPSBbXTtcclxuXHJcblx0XHR0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpLmZvckVhY2goKGZpbGUpID0+IHtcclxuXHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcblx0XHRcdFx0aWYgKGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyUXVlcnkpKSB7XHJcblx0XHRcdFx0XHRmb2xkZXJzLnB1c2goZmlsZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRmb2xkZXJzLnNvcnQoKGEsIGIpID0+IGEucGF0aC5sb2NhbGVDb21wYXJlKGIucGF0aCkpO1xyXG5cdFx0cmV0dXJuIGZvbGRlcnMuc2xpY2UoMCwgMjApO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyU3VnZ2VzdGlvbihmb2xkZXI6IFRGb2xkZXIsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG5cdFx0ZWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogZm9sZGVyLnBhdGggfHwgJy8nIH0pO1xyXG5cdH1cclxuXHJcblx0c2VsZWN0U3VnZ2VzdGlvbihmb2xkZXI6IFRGb2xkZXIpOiB2b2lkIHtcclxuXHRcdHRoaXMuaW5wdXRFbC52YWx1ZSA9IGZvbGRlci5wYXRoO1xyXG5cdFx0dGhpcy5pbnB1dEVsLnRyaWdnZXIoJ2lucHV0Jyk7XHJcblx0XHR0aGlzLmNsb3NlKCk7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogV29ya3NwYWNlIHN1Z2dlc3RlciBmb3Igc2VsZWN0aW5nIE9ic2lkaWFuIHdvcmtzcGFjZXNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBXb3Jrc3BhY2VTdWdnZXN0IGV4dGVuZHMgQWJzdHJhY3RJbnB1dFN1Z2dlc3Q8c3RyaW5nPiB7XHJcblx0cHJpdmF0ZSBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudCkge1xyXG5cdFx0c3VwZXIoYXBwLCBpbnB1dEVsKTtcclxuXHRcdHRoaXMuaW5wdXRFbCA9IGlucHV0RWw7XHJcblx0fVxyXG5cclxuXHRnZXRTdWdnZXN0aW9ucyhxdWVyeTogc3RyaW5nKTogc3RyaW5nW10ge1xyXG5cdFx0IFxyXG5cdFx0Y29uc3Qgd29ya3NwYWNlc1BsdWdpbiA9IHRoaXMuYXBwLmludGVybmFsUGx1Z2lucz8ucGx1Z2lucz8ud29ya3NwYWNlcztcclxuXHRcdCBcclxuXHRcdGlmICghd29ya3NwYWNlc1BsdWdpbj8uZW5hYmxlZCB8fCAhd29ya3NwYWNlc1BsdWdpbi5pbnN0YW5jZT8ud29ya3NwYWNlcykge1xyXG5cdFx0XHRyZXR1cm4gW107XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdCBcclxuXHRcdGNvbnN0IHdvcmtzcGFjZXMgPSBPYmplY3Qua2V5cyh3b3Jrc3BhY2VzUGx1Z2luLmluc3RhbmNlLndvcmtzcGFjZXMpO1xyXG5cdFx0Y29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcclxuXHRcdHJldHVybiB3b3Jrc3BhY2VzLmZpbHRlcigod29ya3NwYWNlOiBzdHJpbmcpID0+IFxyXG5cdFx0XHR3b3Jrc3BhY2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclF1ZXJ5KVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdHJlbmRlclN1Z2dlc3Rpb24od29ya3NwYWNlOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG5cdFx0ZWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogd29ya3NwYWNlIH0pO1xyXG5cdH1cclxuXHJcblx0c2VsZWN0U3VnZ2VzdGlvbih3b3Jrc3BhY2U6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0dGhpcy5pbnB1dEVsLnZhbHVlID0gd29ya3NwYWNlO1xyXG5cdFx0dGhpcy5pbnB1dEVsLnRyaWdnZXIoJ2lucHV0Jyk7XHJcblx0XHR0aGlzLmNsb3NlKCk7XHJcblx0fVxyXG59IiwgIi8qKlxyXG4gKiBDb21tYW5kIFN1Z2dlc3RlciBDb21wb25lbnRcclxuICogUHJvdmlkZXMgYXV0b2NvbXBsZXRlIGZvciBPYnNpZGlhbiBjb21tYW5kcyBpbiBzZXR0aW5nc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFic3RyYWN0SW5wdXRTdWdnZXN0LCBBcHAsIENvbW1hbmQgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vKipcclxuICogQ29tbWFuZCBzdWdnZXN0ZXIgdGhhdCBwcm92aWRlcyBhdXRvY29tcGxldGUgZm9yIE9ic2lkaWFuIGNvbW1hbmRzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29tbWFuZFN1Z2dlc3QgZXh0ZW5kcyBBYnN0cmFjdElucHV0U3VnZ2VzdDxDb21tYW5kPiB7XHJcblx0cHJpdmF0ZSBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudCkge1xyXG5cdFx0c3VwZXIoYXBwLCBpbnB1dEVsKTtcclxuXHRcdHRoaXMuaW5wdXRFbCA9IGlucHV0RWw7XHJcblx0fVxyXG5cclxuXHRnZXRTdWdnZXN0aW9ucyhxdWVyeTogc3RyaW5nKTogQ29tbWFuZFtdIHtcclxuXHRcdGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0Y29uc3QgY29tbWFuZHM6IENvbW1hbmRbXSA9IFtdO1xyXG5cclxuXHRcdC8vIEdldCBhbGwgY29tbWFuZHMgZnJvbSB0aGUgYXBwXHJcblx0XHRjb25zdCBhcHBXaXRoQ29tbWFuZHMgPSB0aGlzLmFwcCBhcyBBcHAgJiB7IFxyXG5cdFx0XHRjb21tYW5kcz86IHsgY29tbWFuZHM/OiBSZWNvcmQ8c3RyaW5nLCBDb21tYW5kPiB9IFxyXG5cdFx0fTtcclxuXHRcdGNvbnN0IGFsbENvbW1hbmRzID0gYXBwV2l0aENvbW1hbmRzLmNvbW1hbmRzPy5jb21tYW5kcztcclxuXHRcdFxyXG5cdFx0aWYgKGFsbENvbW1hbmRzKSB7XHJcblx0XHRcdGZvciAoY29uc3QgY29tbWFuZCBvZiBPYmplY3QudmFsdWVzKGFsbENvbW1hbmRzKSkge1xyXG5cdFx0XHRcdGlmIChjb21tYW5kLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclF1ZXJ5KSB8fFxyXG5cdFx0XHRcdFx0Y29tbWFuZC5pZC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyUXVlcnkpKSB7XHJcblx0XHRcdFx0XHRjb21tYW5kcy5wdXNoKGNvbW1hbmQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNvcnQgYWxwaGFiZXRpY2FsbHkgYnkgbmFtZVxyXG5cdFx0Y29tbWFuZHMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSk7XHJcblxyXG5cdFx0Ly8gTGltaXQgcmVzdWx0c1xyXG5cdFx0cmV0dXJuIGNvbW1hbmRzLnNsaWNlKDAsIDMwKTtcclxuXHR9XHJcblxyXG5cdHJlbmRlclN1Z2dlc3Rpb24oY29tbWFuZDogQ29tbWFuZCwgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRlbC5jcmVhdGVFbCgnZGl2JywgeyBcclxuXHRcdFx0dGV4dDogY29tbWFuZC5uYW1lLFxyXG5cdFx0XHRjbHM6ICdzdWdnZXN0aW9uLXRpdGxlJ1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdGVsLmNyZWF0ZUVsKCdzbWFsbCcsIHsgXHJcblx0XHRcdHRleHQ6IGNvbW1hbmQuaWQsXHJcblx0XHRcdGNsczogJ3N1Z2dlc3Rpb24tbm90ZSdcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0c2VsZWN0U3VnZ2VzdGlvbihjb21tYW5kOiBDb21tYW5kKTogdm9pZCB7XHJcblx0XHR0aGlzLmlucHV0RWwudmFsdWUgPSBjb21tYW5kLmlkO1xyXG5cdFx0dGhpcy5pbnB1dEVsLnRyaWdnZXIoJ2lucHV0Jyk7XHJcblx0XHR0aGlzLmNsb3NlKCk7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogRXh0ZW5kZWQgQXBwIGludGVyZmFjZSB3aXRoIGNvbW1hbmRzXHJcbiAqL1xyXG5pbnRlcmZhY2UgQXBwV2l0aENvbW1hbmRzIGV4dGVuZHMgQXBwIHtcclxuXHRjb21tYW5kcz86IHtcclxuXHRcdGNvbW1hbmRzPzogUmVjb3JkPHN0cmluZywgQ29tbWFuZD47XHJcblx0XHRleGVjdXRlQ29tbWFuZEJ5SWQ/OiAoY29tbWFuZElkOiBzdHJpbmcpID0+IGJvb2xlYW4gfCBQcm9taXNlPHZvaWQ+O1xyXG5cdH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgYSBjb21tYW5kIGJ5IGl0cyBJRFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbW1hbmRCeUlkKGFwcDogQXBwLCBjb21tYW5kSWQ6IHN0cmluZyk6IENvbW1hbmQgfCB1bmRlZmluZWQge1xyXG5cdGNvbnN0IGFwcFdpdGhDb21tYW5kcyA9IGFwcCBhcyBBcHBXaXRoQ29tbWFuZHM7XHJcblx0Y29uc3QgY29tbWFuZHMgPSBhcHBXaXRoQ29tbWFuZHMuY29tbWFuZHM/LmNvbW1hbmRzO1xyXG5cdHJldHVybiBjb21tYW5kcz8uW2NvbW1hbmRJZF07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFeGVjdXRlIGEgY29tbWFuZCBieSBpdHMgSURcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBleGVjdXRlQ29tbWFuZChhcHA6IEFwcCwgY29tbWFuZElkOiBzdHJpbmcpOiBib29sZWFuIHtcclxuXHRpZiAoIWNvbW1hbmRJZCkgcmV0dXJuIGZhbHNlO1xyXG5cdFxyXG5cdGNvbnN0IGFwcFdpdGhDb21tYW5kcyA9IGFwcCBhcyBBcHBXaXRoQ29tbWFuZHM7XHJcblx0Y29uc3QgcmVzdWx0ID0gYXBwV2l0aENvbW1hbmRzLmNvbW1hbmRzPy5leGVjdXRlQ29tbWFuZEJ5SWQ/Lihjb21tYW5kSWQpO1xyXG5cdHJldHVybiByZXN1bHQgIT09IGZhbHNlO1xyXG59XHJcbiIsICIvKipcclxuICogSWNvbiBQaWNrZXIgTW9kYWxcclxuICogU2ltcGxpZmllZCBpY29uIHBpY2tlciBmb3Igc2VsZWN0aW5nIHN0aWNreSBpY29uXHJcbiAqIEJhc2VkIG9uIGljb25pYyBwbHVnaW4ncyBpY29uIHBpY2tlclxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgQnV0dG9uQ29tcG9uZW50LCBNb2RhbCwgUGxhdGZvcm0sIFNldHRpbmcsIFRleHRDb21wb25lbnQsIHByZXBhcmVGdXp6eVNlYXJjaCwgc2V0SWNvbiwgZ2V0SWNvbklkcyB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSWNvblBpY2tlckNhbGxiYWNrIHtcclxuXHQoaWNvbjogc3RyaW5nIHwgbnVsbCk6IHZvaWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTaW1wbGlmaWVkIGljb24gcGlja2VyIG1vZGFsXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSWNvblBpY2tlciBleHRlbmRzIE1vZGFsIHtcclxuXHRwcml2YXRlIHNlbGVjdGVkSWNvbjogc3RyaW5nIHwgbnVsbDtcclxuXHRwcml2YXRlIGNhbGxiYWNrOiBJY29uUGlja2VyQ2FsbGJhY2s7XHJcblx0cHJpdmF0ZSBzZWFyY2hGaWVsZDogVGV4dENvbXBvbmVudDtcclxuXHRwcml2YXRlIHNlYXJjaFJlc3VsdHM6IFtpY29uOiBzdHJpbmcsIGljb25OYW1lOiBzdHJpbmddW10gPSBbXTtcclxuXHRwcml2YXRlIHNlYXJjaFJlc3VsdHNTZXR0aW5nOiBTZXR0aW5nO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgY3VycmVudEljb246IHN0cmluZyB8IG51bGwsIGNhbGxiYWNrOiBJY29uUGlja2VyQ2FsbGJhY2spIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLnNlbGVjdGVkSWNvbiA9IGN1cnJlbnRJY29uO1xyXG5cdFx0dGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG5cdH1cclxuXHJcblx0b25PcGVuKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5jb250YWluZXJFbC5hZGRDbGFzcygnbW9kLWNvbmZpcm1hdGlvbicpO1xyXG5cdFx0dGhpcy5tb2RhbEVsLmFkZENsYXNzKCdpY29uaWMtaWNvbi1waWNrZXInKTtcclxuXHRcdHRoaXMuc2V0VGl0bGUoJ0NoYW5nZSBpY29uJyk7XHJcblxyXG5cdFx0Ly8gU2VhcmNoIGZpZWxkXHJcblx0XHRjb25zdCBzZWFyY2hTZXR0aW5nID0gbmV3IFNldHRpbmcodGhpcy5jb250ZW50RWwpO1xyXG5cdFx0aWYgKCFQbGF0Zm9ybS5pc1Bob25lKSB7XHJcblx0XHRcdHNlYXJjaFNldHRpbmcuc2V0TmFtZSgnU2VhcmNoJyk7XHJcblx0XHR9XHJcblx0XHRzZWFyY2hTZXR0aW5nLmFkZFNlYXJjaCgoc2VhcmNoRmllbGQpID0+IHtcclxuXHRcdFx0c2VhcmNoRmllbGRcclxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ1NlYXJjaCBpY29ucy4uLicpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKCgpID0+IHRoaXMudXBkYXRlU2VhcmNoUmVzdWx0cygpKTtcclxuXHRcdFx0c2VhcmNoRmllbGQuaW5wdXRFbC5lbnRlcktleUhpbnQgPSAnZ28nO1xyXG5cdFx0XHR0aGlzLnNlYXJjaEZpZWxkID0gc2VhcmNoRmllbGQ7XHJcblx0XHR9KTtcclxuXHRcdGlmICh0aGlzLnNlbGVjdGVkSWNvbikge1xyXG5cdFx0XHR0aGlzLnNlYXJjaEZpZWxkLnNldFZhbHVlKHRoaXMuc2VsZWN0ZWRJY29uKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBTZWFyY2ggcmVzdWx0c1xyXG5cdFx0dGhpcy5zZWFyY2hSZXN1bHRzU2V0dGluZyA9IG5ldyBTZXR0aW5nKHRoaXMuY29udGVudEVsKTtcclxuXHRcdHRoaXMuc2VhcmNoUmVzdWx0c1NldHRpbmcuc2V0dGluZ0VsLmFkZENsYXNzKCdpY29uaWMtc2VhcmNoLXJlc3VsdHMnKTtcclxuXHRcdHRoaXMuc2VhcmNoUmVzdWx0c1NldHRpbmcuc2V0dGluZ0VsLnRhYkluZGV4ID0gMDtcclxuXHRcdFxyXG5cdFx0Ly8gQWxsb3cgdmVydGljYWwgc2Nyb2xsaW5nIHRvIHdvcmsgaG9yaXpvbnRhbGx5XHJcblx0XHR0aGlzLnNlYXJjaFJlc3VsdHNTZXR0aW5nLnNldHRpbmdFbC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIChldmVudCkgPT4ge1xyXG5cdFx0XHRpZiAoZG9jdW1lbnQuYm9keS5oYXNDbGFzcygnbW9kLXJ0bCcpKSB7XHJcblx0XHRcdFx0dGhpcy5zZWFyY2hSZXN1bHRzU2V0dGluZy5zZXR0aW5nRWwuc2Nyb2xsTGVmdCAtPSBldmVudC5kZWx0YVk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5zZWFyY2hSZXN1bHRzU2V0dGluZy5zZXR0aW5nRWwuc2Nyb2xsTGVmdCArPSBldmVudC5kZWx0YVk7XHJcblx0XHRcdH1cclxuXHRcdH0sIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcclxuXHJcblx0XHQvLyBCdXR0b25zIC0gbWF0Y2ggaWNvbmljJ3MgYnV0dG9uIGxheW91dFxyXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gdGhpcy5tb2RhbEVsLmNyZWF0ZURpdih7IGNsczogJ21vZGFsLWJ1dHRvbi1jb250YWluZXInIH0pO1xyXG5cclxuXHRcdC8vIENhbmNlbFxyXG5cdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChidXR0b25Db250YWluZXIpXHJcblx0XHRcdC5zZXRCdXR0b25UZXh0KCdDYW5jZWwnKVxyXG5cdFx0XHQub25DbGljaygoKSA9PiB0aGlzLmNsb3NlKCkpXHJcblx0XHRcdC5idXR0b25FbC5hZGRDbGFzcygnbW9kLWNhbmNlbCcpO1xyXG5cclxuXHRcdC8vIFNhdmVcclxuXHRcdG5ldyBCdXR0b25Db21wb25lbnQoYnV0dG9uQ29udGFpbmVyKVxyXG5cdFx0XHQuc2V0QnV0dG9uVGV4dCgnU2F2ZScpXHJcblx0XHRcdC5zZXRDdGEoKVxyXG5cdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5jYWxsYmFjayh0aGlzLnNlbGVjdGVkSWNvbik7XHJcblx0XHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHQvLyBBdXRvLWZvY3VzIHNlYXJjaCBmaWVsZFxyXG5cdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0dGhpcy5zZWFyY2hGaWVsZC5pbnB1dEVsLnNlbGVjdCgpO1xyXG5cdFx0XHR0aGlzLnVwZGF0ZVNlYXJjaFJlc3VsdHMoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlIHNlYXJjaCByZXN1bHRzIGJhc2VkIG9uIGN1cnJlbnQgcXVlcnlcclxuXHQgKi9cclxuXHRwcml2YXRlIHVwZGF0ZVNlYXJjaFJlc3VsdHMoKTogdm9pZCB7XHJcblx0XHRjb25zdCBxdWVyeSA9IHRoaXMuc2VhcmNoRmllbGQuZ2V0VmFsdWUoKS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcclxuXHRcdGNvbnN0IGZ1enp5U2VhcmNoID0gcHJlcGFyZUZ1enp5U2VhcmNoKHF1ZXJ5KTtcclxuXHRcdGNvbnN0IG1hdGNoZXM6IFtzY29yZTogbnVtYmVyLCBpY29uRW50cnk6IFtzdHJpbmcsIHN0cmluZ11dW10gPSBbXTtcclxuXHJcblx0XHQvLyBHZXQgYWxsIGF2YWlsYWJsZSBpY29uc1xyXG5cdFx0Y29uc3QgaWNvbklkcyA9IGdldEljb25JZHMoKTtcclxuXHJcblx0XHQvLyBTZWFyY2ggaWNvbnNcclxuXHRcdGlmIChxdWVyeSkge1xyXG5cdFx0XHRmb3IgKGNvbnN0IGljb25JZCBvZiBpY29uSWRzKSB7XHJcblx0XHRcdFx0Ly8gQ3JlYXRlIGEgcmVhZGFibGUgbmFtZSBmcm9tIGljb24gSURcclxuXHRcdFx0XHRjb25zdCBpY29uTmFtZSA9IHRoaXMuZm9ybWF0SWNvbk5hbWUoaWNvbklkKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoaWNvbklkID09PSBxdWVyeSB8fCBpY29uSWQudG9Mb3dlckNhc2UoKSA9PT0gcXVlcnkpIHtcclxuXHRcdFx0XHRcdG1hdGNoZXMucHVzaChbMCwgW2ljb25JZCwgaWNvbk5hbWVdXSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGNvbnN0IGZ1enp5TWF0Y2ggPSBmdXp6eVNlYXJjaChpY29uTmFtZSk7XHJcblx0XHRcdFx0XHRpZiAoZnV6enlNYXRjaCkge1xyXG5cdFx0XHRcdFx0XHRtYXRjaGVzLnB1c2goW2Z1enp5TWF0Y2guc2NvcmUsIFtpY29uSWQsIGljb25OYW1lXV0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gU2hvdyBhbGwgaWNvbnMgaWYgbm8gcXVlcnlcclxuXHRcdFx0Zm9yIChjb25zdCBpY29uSWQgb2YgaWNvbklkcykge1xyXG5cdFx0XHRcdGNvbnN0IGljb25OYW1lID0gdGhpcy5mb3JtYXRJY29uTmFtZShpY29uSWQpO1xyXG5cdFx0XHRcdG1hdGNoZXMucHVzaChbMCwgW2ljb25JZCwgaWNvbk5hbWVdXSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBTb3J0IGJ5IHNjb3JlXHJcblx0XHRtYXRjaGVzLnNvcnQoKFtzY29yZUFdLCBbc2NvcmVCXSkgPT4gc2NvcmVBID4gc2NvcmVCID8gLTEgOiArMSk7XHJcblxyXG5cdFx0Ly8gTGltaXQgcmVzdWx0c1xyXG5cdFx0dGhpcy5zZWFyY2hSZXN1bHRzLmxlbmd0aCA9IDA7XHJcblx0XHRjb25zdCBtYXhSZXN1bHRzID0gMTAwO1xyXG5cdFx0Zm9yIChjb25zdCBbLCBpY29uRW50cnldIG9mIG1hdGNoZXMpIHtcclxuXHRcdFx0dGhpcy5zZWFyY2hSZXN1bHRzLnB1c2goaWNvbkVudHJ5KTtcclxuXHRcdFx0aWYgKHRoaXMuc2VhcmNoUmVzdWx0cy5sZW5ndGggPj0gbWF4UmVzdWx0cykgYnJlYWs7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gVXBkYXRlIFVJIC0gdXNlIEV4dHJhQnV0dG9uQ29tcG9uZW50IGxpa2UgaWNvbmljXHJcblx0XHR0aGlzLnNlYXJjaFJlc3VsdHNTZXR0aW5nLmNsZWFyKCk7XHJcblx0XHRmb3IgKGNvbnN0IFtpY29uSWQsIGljb25OYW1lXSBvZiB0aGlzLnNlYXJjaFJlc3VsdHMpIHtcclxuXHRcdFx0dGhpcy5zZWFyY2hSZXN1bHRzU2V0dGluZy5hZGRFeHRyYUJ1dHRvbigoaWNvbkJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdGljb25CdXR0b24uc2V0VG9vbHRpcChpY29uTmFtZSwge1xyXG5cdFx0XHRcdFx0ZGVsYXk6IDMwMCxcclxuXHRcdFx0XHRcdHBsYWNlbWVudDogUGxhdGZvcm0uaXNQaG9uZSA/ICd0b3AnIDogJ2JvdHRvbScsXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0Y29uc3QgaWNvbkVsID0gaWNvbkJ1dHRvbi5leHRyYVNldHRpbmdzRWw7XHJcblx0XHRcdFx0aWNvbkVsLmFkZENsYXNzKCdpY29uaWMtc2VhcmNoLXJlc3VsdCcpO1xyXG5cdFx0XHRcdGljb25FbC50YWJJbmRleCA9IC0xO1xyXG5cclxuXHRcdFx0XHRzZXRJY29uKGljb25FbCwgaWNvbklkKTtcclxuXHJcblx0XHRcdFx0Ly8gSGlnaGxpZ2h0IHNlbGVjdGVkIGljb25cclxuXHRcdFx0XHRpZiAoaWNvbklkID09PSB0aGlzLnNlbGVjdGVkSWNvbikge1xyXG5cdFx0XHRcdFx0aWNvbkVsLmFkZENsYXNzKCdpcy1zZWxlY3RlZCcpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWNvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RlZEljb24gPSBpY29uSWQ7XHJcblx0XHRcdFx0XHR0aGlzLmNhbGxiYWNrKGljb25JZCk7XHJcblx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdC8vIE1vYmlsZTogc2hvdyB0b29sdGlwIG9uIGxvbmcgcHJlc3NcclxuXHRcdFx0XHRpZiAoUGxhdGZvcm0uaXNQaG9uZSkge1xyXG5cdFx0XHRcdFx0aWNvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRuYXZpZ2F0b3IudmlicmF0ZT8uKDEwMCk7XHJcblx0XHRcdFx0XHRcdC8vIFRvb2x0aXAgaXMgYWxyZWFkeSBzZXQgYWJvdmVcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gVXNlIGFuIGludmlzaWJsZSBidXR0b24gdG8gcHJlc2VydmUgaGVpZ2h0IGlmIG5vIHJlc3VsdHNcclxuXHRcdGlmICh0aGlzLnNlYXJjaFJlc3VsdHMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdHRoaXMuc2VhcmNoUmVzdWx0c1NldHRpbmcuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3NlcyhbJ2ljb25pYy1pbnZpc2libGUnLCAnaWNvbmljLXNlYXJjaC1yZXN1bHQnXSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRm9ybWF0IGljb24gSUQgaW50byByZWFkYWJsZSBuYW1lXHJcblx0ICovXHJcblx0cHJpdmF0ZSBmb3JtYXRJY29uTmFtZShpY29uSWQ6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHQvLyBSZW1vdmUgbHVjaWRlLSBwcmVmaXggaWYgcHJlc2VudFxyXG5cdFx0bGV0IG5hbWUgPSBpY29uSWQucmVwbGFjZSgvXmx1Y2lkZS0vLCAnJyk7XHJcblx0XHQvLyBSZXBsYWNlIGRhc2hlcyB3aXRoIHNwYWNlc1xyXG5cdFx0bmFtZSA9IG5hbWUucmVwbGFjZSgvLS9nLCAnICcpO1xyXG5cdFx0Ly8gQ2FwaXRhbGl6ZSBmaXJzdCBsZXR0ZXIgb2YgZWFjaCB3b3JkXHJcblx0XHRyZXR1cm4gbmFtZS5zcGxpdCgnICcpLm1hcCh3b3JkID0+IFxyXG5cdFx0XHR3b3JkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgd29yZC5zbGljZSgxKVxyXG5cdFx0KS5qb2luKCcgJyk7XHJcblx0fVxyXG5cclxuXHRvbkNsb3NlKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcclxuXHR9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBIb21lIEJhc2UgU2VydmljZVxyXG4gKiBDb3JlIGxvZ2ljIGZvciBvcGVuaW5nIGFuZCBtYW5hZ2luZyB0aGUgaG9tZSBiYXNlIGZpbGVcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBXb3Jrc3BhY2VMZWFmLCBNYXJrZG93blZpZXcsIFBsYXRmb3JtLCBWaWV3IGFzIE9WaWV3IH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgdHlwZSBIb21lQmFzZVBsdWdpbiBmcm9tICcuLi9tYWluJztcclxuaW1wb3J0IHsgSG9tZUJhc2VUeXBlLCBPcGVuaW5nTW9kZSB9IGZyb20gJy4uL3NldHRpbmdzJztcclxuaW1wb3J0IHsgZ2V0RmlsZUJ5UGF0aCwgaXNNYXJrZG93bkxpa2UsIGxlYWZIYXNGaWxlLCBpc1N1cHBvcnRlZEV4dGVuc2lvbiwgcGF0aHNFcXVhbCB9IGZyb20gJy4uL3V0aWxzL2ZpbGUtdXRpbHMnO1xyXG5pbXBvcnQgeyBleGVjdXRlQ29tbWFuZCB9IGZyb20gJy4uL3VpL2NvbW1hbmQtc3VnZ2VzdCc7XHJcbmltcG9ydCB7IGNvbXB1dGVIb21lQmFzZVBhdGgsIHRyaW1GaWxlLCByZXNvbHZlUGF0aFN5bmMgfSBmcm9tICcuLi91dGlscy9ob21lYmFzZS1yZXNvbHZlcic7XHJcblxyXG4vKipcclxuICogVmlldyB0eXBlcyB0aGF0IGNhbiBiZSBob21lIGJhc2UgZmlsZXNcclxuICovXHJcbmNvbnN0IExFQUZfVFlQRVMgPSBbJ21hcmtkb3duJywgJ2NhbnZhcycsICdiYXNlcycsICdrYW5iYW4nXTtcclxuXHJcbi8qKlxyXG4gKiBIZWxwZXIgdG8gY2hlY2sgaWYgdHdvIGZpbGUgcGF0aHMgYXJlIGVxdWFsIChjYXNlLWluc2Vuc2l0aXZlLCBpZ25vcmluZyBleHRlbnNpb24pXHJcbiAqL1xyXG5mdW5jdGlvbiBlcXVhbHNDYXNlbGVzcyhwYXRoMTogc3RyaW5nLCBwYXRoMjogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0Y29uc3Qgbm9ybWFsaXplID0gKHA6IHN0cmluZykgPT4gcC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xcLm1kJC8sICcnKTtcclxuXHRyZXR1cm4gbm9ybWFsaXplKHBhdGgxKSA9PT0gbm9ybWFsaXplKHBhdGgyKTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEhvbWVCYXNlU2VydmljZSB7XHJcblx0cHJpdmF0ZSBhcHA6IEFwcDtcclxuXHRwcml2YXRlIHBsdWdpbjogSG9tZUJhc2VQbHVnaW47XHJcblx0cHJpdmF0ZSBnaG9zdExlYXZlczogV2Vha1NldDxXb3Jrc3BhY2VMZWFmPiA9IG5ldyBXZWFrU2V0KCk7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogSG9tZUJhc2VQbHVnaW4pIHtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdFx0dGhpcy5hcHAgPSBwbHVnaW4uYXBwO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogT3BlbiBob21lIGJhc2Ugd2l0aCBhIHNwZWNpZmljIG1vZGUgKGZvciBzdGFydHVwL21hbnVhbCBvcGVucylcclxuXHQgKi9cclxuXHRhc3luYyBvcGVuSG9tZUJhc2VXaXRoTW9kZShtb2RlOiBPcGVuaW5nTW9kZSwgcnVuQ29tbWFuZDogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRcdGNvbnN0IGhvbWVCYXNlU2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5nZXRIb21lQmFzZVNldHRpbmdzKCk7XHJcblx0XHRcclxuXHRcdC8vIEhhbmRsZSBub24tZmlsZSB0eXBlcyAoV29ya3NwYWNlLCBHcmFwaCwgTm9uZSlcclxuXHRcdGlmIChob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMub3BlbldvcmtzcGFjZShob21lQmFzZVNldHRpbmdzLnZhbHVlKTtcclxuXHRcdH1cclxuXHRcdGlmIChob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5HcmFwaCkge1xyXG5cdFx0XHQvLyBHcmFwaCB2aWV3OiBqdXN0IG9wZW4gaXQgKG5vIGdob3N0IHRhYiBzdXBwb3J0IGR1ZSB0byB1bnJlbGlhYmxlIGRldGVjdGlvbilcclxuXHRcdFx0cmV0dXJuIHRoaXMub3BlbkdyYXBoKCk7XHJcblx0XHR9XHJcblx0XHRpZiAoaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuTm9uZSkge1xyXG5cdFx0XHQvLyBKdXN0IHJ1biBjb21tYW5kLCBkb24ndCBvcGVuIGFueXRoaW5nXHJcblx0XHRcdGlmIChydW5Db21tYW5kKSB7XHJcblx0XHRcdFx0dGhpcy5ydW5Db21tYW5kT25PcGVuKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmVzb2x2ZSB0aGUgYWN0dWFsIGZpbGUgcGF0aCBiYXNlZCBvbiB0eXBlXHJcblx0XHRjb25zdCByZXNvbHZlZFBhdGggPSBhd2FpdCBjb21wdXRlSG9tZUJhc2VQYXRoKFxyXG5cdFx0XHRob21lQmFzZVNldHRpbmdzLnR5cGUsXHJcblx0XHRcdGhvbWVCYXNlU2V0dGluZ3MudmFsdWUsXHJcblx0XHRcdHRoaXMucGx1Z2luXHJcblx0XHQpO1xyXG5cdFx0XHJcblx0XHRpZiAoIXJlc29sdmVkUGF0aCkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gR2V0IHRoZSBmaWxlIC0gdXNlIG1ldGFkYXRhQ2FjaGUgZm9yIGJldHRlciBwYXRoIHJlc29sdXRpb24gKGxpa2UgaG9tZXBhZ2UgcGx1Z2luKVxyXG5cdFx0bGV0IGZpbGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHJlc29sdmVkUGF0aCwgJy8nKTtcclxuXHRcdFxyXG5cdFx0Ly8gSWYgbm90IGZvdW5kIGFuZCBhdXRvLWNyZWF0ZSBpcyBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIHR5cGUsIHJldHVyblxyXG5cdFx0Ly8gRm9yIG5vdywgd2UnbGwgdHJ5IGdldEZpbGVCeVBhdGggYXMgZmFsbGJhY2tcclxuXHRcdGlmICghZmlsZSkge1xyXG5cdFx0XHRmaWxlID0gZ2V0RmlsZUJ5UGF0aCh0aGlzLmFwcCwgcmVzb2x2ZWRQYXRoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKCFmaWxlKSB7XHJcblx0XHRcdC8vIFRyeSB0byBjcmVhdGUgaWYgaXQncyBhIG1hcmtkb3duIGZpbGUgYW5kIHBhdGggZG9lc24ndCBoYXZlIGV4dGVuc2lvblxyXG5cdFx0XHRjb25zdCB1bnRyaW1tZWRQYXRoID0gcmVzb2x2ZWRQYXRoLmVuZHNXaXRoKCcubWQnKSA/IHJlc29sdmVkUGF0aCA6IGAke3Jlc29sdmVkUGF0aH0ubWRgO1xyXG5cdFx0XHRmaWxlID0gZ2V0RmlsZUJ5UGF0aCh0aGlzLmFwcCwgdW50cmltbWVkUGF0aCk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoIWZpbGUgJiYgaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkge1xyXG5cdFx0XHRcdC8vIENvdWxkIGNyZWF0ZSBmaWxlIGhlcmUgaWYgYXV0b0NyZWF0ZSBzZXR0aW5nIGV4aXN0cywgYnV0IGZvciBub3cganVzdCByZXR1cm5cclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKCFmaWxlKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBIYW5kbGUgb3BlbmluZyBtb2RlXHJcblx0XHRpZiAobW9kZSA9PT0gJ3JlcGxhY2UtYWxsJykge1xyXG5cdFx0XHRhd2FpdCB0aGlzLmRldGFjaEFsbExlYXZlcygpO1xyXG5cdFx0fSBlbHNlIGlmIChtb2RlID09PSAncmVwbGFjZS1sYXN0Jykge1xyXG5cdFx0XHQvLyBSZXBsYWNlIHRoZSBhY3RpdmUgbGVhZiAoY2xvc2UgaXQgYW5kIG9wZW4gaG9tZSBiYXNlIGluIGl0cyBwbGFjZSlcclxuXHRcdFx0Y29uc3QgYWN0aXZlTGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE9WaWV3KT8ubGVhZjtcclxuXHRcdFx0aWYgKGFjdGl2ZUxlYWYpIHtcclxuXHRcdFx0XHRjb25zdCB2aWV3U3RhdGUgPSBhY3RpdmVMZWFmLmdldFZpZXdTdGF0ZSgpO1xyXG5cdFx0XHRcdC8vIE9ubHkgY2xvc2UgaWYgbm90IHBpbm5lZFxyXG5cdFx0XHRcdGlmICh2aWV3U3RhdGUucGlubmVkICE9PSB0cnVlKSB7XHJcblx0XHRcdFx0XHR2b2lkIGFjdGl2ZUxlYWYuZGV0YWNoKCk7XHJcblx0XHRcdFx0XHQvLyBXYWl0IGEgYml0IGZvciBkZXRhY2htZW50XHJcblx0XHRcdFx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgZm9yIGV4aXN0aW5nIGxlYWYgKGJ1dCBleGNsdWRlIGdob3N0IHRhYiBmb3IgbWFudWFsIG9wZW5zKVxyXG5cdFx0Y29uc3QgZXhpc3RpbmdMZWFmID0gdGhpcy5maW5kRXhpc3RpbmdIb21lQmFzZUxlYWYoZmlsZSk7XHJcblx0XHRpZiAoZXhpc3RpbmdMZWFmICYmIG1vZGUgIT09ICdyZXBsYWNlLWFsbCcpIHtcclxuXHRcdFx0Ly8gRm9yIHJlcGxhY2UtbGFzdCwgd2Ugc3RpbGwgd2FudCB0byByZXVzZSBleGlzdGluZyBpZiBmb3VuZCAoYWZ0ZXIgY2xvc2luZyBhY3RpdmUpXHJcblx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGV4aXN0aW5nTGVhZi5nZXRWaWV3U3RhdGUoKTtcclxuXHRcdFx0aWYgKHZpZXdTdGF0ZS5waW5uZWQgPT09IHRydWUgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uKSB7XHJcblx0XHRcdFx0Ly8gRG9uJ3QgdXNlIGdob3N0IHRhYiBmb3IgbWFudWFsIG9wZW5zIC0gd2lsbCBjcmVhdGUgbmV3IHRhYiBiZWxvd1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGV4aXN0aW5nTGVhZik7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5jb25maWd1cmVWaWV3KGV4aXN0aW5nTGVhZiwgZmlsZSk7XHJcblx0XHRcdFx0aWYgKHJ1bkNvbW1hbmQpIHtcclxuXHRcdFx0XHRcdHRoaXMucnVuQ29tbWFuZE9uT3BlbigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIE9wZW4gaW4gbmV3IGxlYWZcclxuXHRcdGNvbnN0IG5ld0xlYWYgPSBtb2RlID09PSAncmV0YWluJyBcclxuXHRcdFx0PyB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigndGFiJylcclxuXHRcdFx0OiB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSk7XHJcblx0XHRcclxuXHRcdGlmICghbmV3TGVhZikge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRhd2FpdCBuZXdMZWFmLm9wZW5GaWxlKGZpbGUpO1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYobmV3TGVhZik7XHJcblx0XHRhd2FpdCB0aGlzLmNvbmZpZ3VyZVZpZXcobmV3TGVhZiwgZmlsZSk7XHJcblxyXG5cdFx0aWYgKHJ1bkNvbW1hbmQpIHtcclxuXHRcdFx0dGhpcy5ydW5Db21tYW5kT25PcGVuKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBPcGVuIHdvcmtzcGFjZVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgYXN5bmMgb3BlbldvcmtzcGFjZSh3b3Jrc3BhY2VOYW1lOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRcdCBcclxuXHRcdGNvbnN0IHdvcmtzcGFjZVBsdWdpbiA9IHRoaXMuYXBwLmludGVybmFsUGx1Z2lucz8ucGx1Z2lucz8ud29ya3NwYWNlcztcclxuXHRcdCBcclxuXHRcdGlmICghd29ya3NwYWNlUGx1Z2luPy5lbmFibGVkIHx8ICF3b3Jrc3BhY2VQbHVnaW4uaW5zdGFuY2U/LmxvYWRXb3Jrc3BhY2UpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0IFxyXG5cdFx0d29ya3NwYWNlUGx1Z2luLmluc3RhbmNlLmxvYWRXb3Jrc3BhY2Uod29ya3NwYWNlTmFtZSk7XHJcblx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSk7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE9wZW4gZ3JhcGggdmlld1xyXG5cdCAqL1xyXG5cdGFzeW5jIG9wZW5HcmFwaCgpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRcdCBcclxuXHRcdGF3YWl0IHRoaXMuYXBwLmNvbW1hbmRzPy5leGVjdXRlQ29tbWFuZEJ5SWQ/LignZ3JhcGg6b3BlbicpO1xyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBPcGVuIGdyYXBoIHZpZXcgaW4gZ2hvc3QgdGFiXHJcblx0ICogREVQUkVDQVRFRDogR3JhcGggdmlldyBnaG9zdCB0YWIgZGV0ZWN0aW9uIGlzIHVucmVsaWFibGUsIHNvIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcclxuXHQgKiBHcmFwaCB2aWV3cyBub3cganVzdCBvcGVuIG5vcm1hbGx5IGxpa2UgcmFuZG9tIGZpbGVzXHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyBvcGVuR3JhcGhJbkdob3N0VGFiKHJ1bkNvbW1hbmQ6IGJvb2xlYW4pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRcdC8vIENoZWNrIGlmIHNldHRpbmdzIG1vZGFsIGlzIG9wZW5cclxuXHRcdGlmICh0aGlzLmlzU2V0dGluZ3NNb2RhbE9wZW4oKSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgZ2hvc3QgdGFiIGFscmVhZHkgZXhpc3RzIChwaW5uZWQgZ3JhcGggdmlldylcclxuXHRcdC8vIFVzZSB0aGUgc2FtZSBhcHByb2FjaCBhcyBmaWxlLWJhc2VkIHRhYnM6IGZpbmQgaXQgZWFjaCB0aW1lXHJcblx0XHQvLyBUcnkgZ2V0TGVhdmVzT2ZUeXBlIGZpcnN0LCB0aGVuIGl0ZXJhdGVBbGxMZWF2ZXMgYXMgZmFsbGJhY2tcclxuXHRcdGxldCBncmFwaExlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2dyYXBoJyk7XHJcblx0XHRcclxuXHRcdC8vIElmIGdldExlYXZlc09mVHlwZSBkb2Vzbid0IHdvcmsgKHJldHVybnMgMCksIHVzZSBpdGVyYXRlQWxsTGVhdmVzXHJcblx0XHRpZiAoZ3JhcGhMZWF2ZXMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdGdyYXBoTGVhdmVzID0gW107XHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRcdFx0XHRpZiAodmlld1N0YXRlLnR5cGUgPT09ICdncmFwaCcpIHtcclxuXHRcdFx0XHRcdFx0Z3JhcGhMZWF2ZXMucHVzaChsZWFmKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHRcdC8vIExlYWYgbWlnaHQgYmUgZGV0YWNoZWQsIHNraXAgaXRcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRcclxuXHRcdC8vIElmIHRoZXJlJ3MgZXhhY3RseSBvbmUgZ3JhcGggdmlldywgdXNlIGl0IGFzIHRoZSBnaG9zdCB0YWJcclxuXHRcdC8vIChzaW5jZSB3ZSBzaG91bGQgb25seSBoYXZlIG9uZSBnaG9zdCB0YWIgYXQgYSB0aW1lKVxyXG5cdFx0bGV0IGdob3N0VGFiOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCA9IG51bGw7XHJcblx0XHRcclxuXHRcdGlmIChncmFwaExlYXZlcy5sZW5ndGggPT09IDEpIHtcclxuXHRcdFx0Ly8gT25seSBvbmUgZ3JhcGggdmlldyBleGlzdHMgLSB0aGlzIGlzIG91ciBnaG9zdCB0YWJcclxuXHRcdFx0Z2hvc3RUYWIgPSBncmFwaExlYXZlc1swXSB8fCBudWxsO1xyXG5cdFx0fSBlbHNlIGlmIChncmFwaExlYXZlcy5sZW5ndGggPiAxKSB7XHJcblx0XHRcdC8vIE11bHRpcGxlIGdyYXBoIHZpZXdzIC0gZmluZCB0aGUgcGlubmVkIG9uZVxyXG5cdFx0XHRmb3IgKGNvbnN0IGxlYWYgb2YgZ3JhcGhMZWF2ZXMpIHtcclxuXHRcdFx0XHRpZiAoIWxlYWYpIGNvbnRpbnVlO1xyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRjb25zdCB2aWV3U3RhdGUgPSBsZWFmLmdldFZpZXdTdGF0ZSgpO1xyXG5cdFx0XHRcdFx0aWYgKHZpZXdTdGF0ZS5waW5uZWQgPT09IHRydWUpIHtcclxuXHRcdFx0XHRcdFx0Z2hvc3RUYWIgPSBsZWFmO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHRcdC8vIExlYWYgbWlnaHQgYmUgZGV0YWNoZWQsIHNraXAgaXRcclxuXHRcdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gSWYgbm8gcGlubmVkIG9uZSBmb3VuZCwgdXNlIHRoZSBmaXJzdCBvbmUgKHNob3VsZG4ndCBoYXBwZW4sIGJ1dCBmYWxsYmFjaylcclxuXHRcdFx0aWYgKCFnaG9zdFRhYiAmJiBncmFwaExlYXZlc1swXSkge1xyXG5cdFx0XHRcdGdob3N0VGFiID0gZ3JhcGhMZWF2ZXNbMF0gfHwgbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoZ2hvc3RUYWIpIHtcclxuXHRcdFx0Ly8gR2hvc3QgdGFiIGV4aXN0cyAtIGNsb3NlIEFMTCBvdGhlciBncmFwaCB2aWV3cyAocGlubmVkIG9yIG5vdCksIHRoZW4gZm9jdXMgZ2hvc3QgdGFiXHJcblx0XHRcdC8vIEZpbmQgYWxsIGdyYXBoIGxlYXZlcyBhZ2FpbiB0byBnZXQgdGhlIGN1cnJlbnQgbGlzdFxyXG5cdFx0XHRjb25zdCBhbGxHcmFwaExlYXZlc0ZvckNsZWFudXA6IFdvcmtzcGFjZUxlYWZbXSA9IFtdO1xyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRcdFx0aWYgKHZpZXdTdGF0ZS50eXBlID09PSAnZ3JhcGgnKSB7XHJcblx0XHRcdFx0XHRhbGxHcmFwaExlYXZlc0ZvckNsZWFudXAucHVzaChsZWFmKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRjb25zdCBvdGhlckdyYXBoTGVhdmVzID0gYWxsR3JhcGhMZWF2ZXNGb3JDbGVhbnVwLmZpbHRlcihsZWFmID0+IGxlYWYgIT09IGdob3N0VGFiKTtcclxuXHRcdFx0XHJcblx0XHRcdGZvciAoY29uc3QgbGVhZiBvZiBvdGhlckdyYXBoTGVhdmVzKSB7XHJcblx0XHRcdFx0dm9pZCBsZWFmLmRldGFjaCgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBXYWl0IGZvciBkZXRhY2htZW50cyB0byBjb21wbGV0ZVxyXG5cdFx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTUwKSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBEb3VibGUtY2hlY2sgLSBtYWtlIHN1cmUgbm8gb3RoZXIgZ3JhcGggdmlld3MgZXhpc3RcclxuXHRcdFx0Ly8gVXNlIGl0ZXJhdGVBbGxMZWF2ZXMgaW5zdGVhZCBvZiBnZXRMZWF2ZXNPZlR5cGUgZm9yIGdyYXBoIHZpZXdzXHJcblx0XHRcdGNvbnN0IHJlbWFpbmluZ0dyYXBoTGVhdmVzOiBXb3Jrc3BhY2VMZWFmW10gPSBbXTtcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0XHRjb25zdCB2aWV3U3RhdGUgPSBsZWFmLmdldFZpZXdTdGF0ZSgpO1xyXG5cdFx0XHRcdGlmICh2aWV3U3RhdGUudHlwZSA9PT0gJ2dyYXBoJykge1xyXG5cdFx0XHRcdFx0cmVtYWluaW5nR3JhcGhMZWF2ZXMucHVzaChsZWFmKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRpZiAocmVtYWluaW5nR3JhcGhMZWF2ZXMubGVuZ3RoID4gMSkge1xyXG5cdFx0XHRcdC8vIFN0aWxsIGhhdmUgZHVwbGljYXRlcywgY2xvc2UgYWxsIGV4Y2VwdCBnaG9zdCB0YWJcclxuXHRcdFx0XHRmb3IgKGNvbnN0IGxlYWYgb2YgcmVtYWluaW5nR3JhcGhMZWF2ZXMpIHtcclxuXHRcdFx0XHRcdGlmIChsZWFmICE9PSBnaG9zdFRhYikge1xyXG5cdFx0XHRcdFx0XHR2b2lkIGxlYWYuZGV0YWNoKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3Qgc2hvdWxkRm9jdXMgPSAhdGhpcy5pc1NldHRpbmdzTW9kYWxPcGVuKCk7XHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGdob3N0VGFiLCB7IGZvY3VzOiBzaG91bGRGb2N1cyB9KTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChydW5Db21tYW5kKSB7XHJcblx0XHRcdFx0dGhpcy5ydW5Db21tYW5kT25PcGVuKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gTm8gZ2hvc3QgdGFiIGV4aXN0cyAtIGNsb3NlIEFMTCBleGlzdGluZyBncmFwaCB2aWV3cyBmaXJzdFxyXG5cdFx0Ly8gRmluZCBhbGwgZ3JhcGggbGVhdmVzXHJcblx0XHRjb25zdCBhbGxFeGlzdGluZ0dyYXBoTGVhdmVzOiBXb3Jrc3BhY2VMZWFmW10gPSBbXTtcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRcdGlmICh2aWV3U3RhdGUudHlwZSA9PT0gJ2dyYXBoJykge1xyXG5cdFx0XHRcdGFsbEV4aXN0aW5nR3JhcGhMZWF2ZXMucHVzaChsZWFmKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRmb3IgKGNvbnN0IGxlYWYgb2YgYWxsRXhpc3RpbmdHcmFwaExlYXZlcykge1xyXG5cdFx0XHR2b2lkIGxlYWYuZGV0YWNoKCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIFdhaXQgZm9yIGRldGFjaG1lbnRzIHRvIGNvbXBsZXRlXHJcblx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSk7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgdGhlcmUncyBhbHJlYWR5IGEgZ3JhcGggdmlldyAobWlnaHQgaGF2ZSBiZWVuIG9wZW5lZCBieSBhbm90aGVyIGFjdGlvbilcclxuXHRcdC8vIFVzZSBpdGVyYXRlQWxsTGVhdmVzIGluc3RlYWQgb2YgZ2V0TGVhdmVzT2ZUeXBlIGZvciBncmFwaCB2aWV3cyAoZ2V0TGVhdmVzT2ZUeXBlIGRvZXNuJ3Qgd29yayBmb3IgZ3JhcGgpXHJcblx0XHRsZXQgZXhpc3RpbmdHcmFwaExlYXZlczogV29ya3NwYWNlTGVhZltdID0gW107XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHRjb25zdCB2aWV3U3RhdGUgPSBsZWFmLmdldFZpZXdTdGF0ZSgpO1xyXG5cdFx0XHRpZiAodmlld1N0YXRlLnR5cGUgPT09ICdncmFwaCcpIHtcclxuXHRcdFx0XHRleGlzdGluZ0dyYXBoTGVhdmVzLnB1c2gobGVhZik7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRsZXQgbmV3R2hvc3RUYWI6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcclxuXHRcdFxyXG5cdFx0aWYgKGV4aXN0aW5nR3JhcGhMZWF2ZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHQvLyBVc2UgdGhlIGZpcnN0IGV4aXN0aW5nIGdyYXBoIHZpZXdcclxuXHRcdFx0bmV3R2hvc3RUYWIgPSBleGlzdGluZ0dyYXBoTGVhdmVzWzBdIHx8IG51bGw7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBObyBleGlzdGluZyBncmFwaCB2aWV3LCBvcGVuIGEgbmV3IG9uZVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gT3BlbiBncmFwaCB2aWV3IGluIGEgbmV3IGxlYWYgZGlyZWN0bHkgaW5zdGVhZCBvZiB1c2luZyB0aGUgY29tbWFuZFxyXG5cdFx0XHQvLyBUaGUgY29tbWFuZCBtaWdodCBjbG9zZSBleGlzdGluZyB2aWV3c1xyXG5cdFx0XHRjb25zdCBuZXdMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3RhYicpO1xyXG5cdFx0XHRpZiAobmV3TGVhZikge1xyXG5cdFx0XHRcdGF3YWl0IG5ld0xlYWYuc2V0Vmlld1N0YXRlKHtcclxuXHRcdFx0XHRcdHR5cGU6ICdncmFwaCcsXHJcblx0XHRcdFx0XHRzdGF0ZToge30sXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gV2FpdCBmb3IgZ3JhcGggdG8gaW5pdGlhbGl6ZVxyXG5cdFx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAyMDApKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRuZXdHaG9zdFRhYiA9IG5ld0xlYWY7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gRmFsbGJhY2sgdG8gY29tbWFuZCBpZiB3ZSBjYW4ndCBjcmVhdGUgbGVhZlxyXG5cdFx0XHRcdGF3YWl0IHRoaXMub3BlbkdyYXBoKCk7XHJcblx0XHRcdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDMwMCkpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGV4aXN0aW5nR3JhcGhMZWF2ZXMgPSBbXTtcclxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcclxuXHRcdFx0XHRcdGlmICh2aWV3U3RhdGUudHlwZSA9PT0gJ2dyYXBoJykge1xyXG5cdFx0XHRcdFx0XHRleGlzdGluZ0dyYXBoTGVhdmVzLnB1c2gobGVhZik7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKGV4aXN0aW5nR3JhcGhMZWF2ZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0bmV3R2hvc3RUYWIgPSBleGlzdGluZ0dyYXBoTGVhdmVzWzBdIHx8IG51bGw7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmIChuZXdHaG9zdFRhYikge1xyXG5cdFx0XHRuZXdHaG9zdFRhYi5zZXRQaW5uZWQodHJ1ZSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDbG9zZSBhbnkgb3RoZXIgZ3JhcGggdmlld3MgdGhhdCBtaWdodCBoYXZlIGJlZW4gY3JlYXRlZFxyXG5cdFx0XHQvLyBVc2UgaXRlcmF0ZUFsbExlYXZlcyB0byBmaW5kIGFsbCBncmFwaCB2aWV3c1xyXG5cdFx0XHRjb25zdCBhbGxHcmFwaExlYXZlczogV29ya3NwYWNlTGVhZltdID0gW107XHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcclxuXHRcdFx0XHRpZiAodmlld1N0YXRlLnR5cGUgPT09ICdncmFwaCcpIHtcclxuXHRcdFx0XHRcdGFsbEdyYXBoTGVhdmVzLnB1c2gobGVhZik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdGZvciAoY29uc3QgbGVhZiBvZiBhbGxHcmFwaExlYXZlcykge1xyXG5cdFx0XHRcdGlmIChsZWFmICE9PSBuZXdHaG9zdFRhYikge1xyXG5cdFx0XHRcdFx0dm9pZCBsZWFmLmRldGFjaCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gV2FpdCBmb3IgY2xlYW51cFxyXG5cdFx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSk7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBzaG91bGRGb2N1cyA9ICF0aGlzLmlzU2V0dGluZ3NNb2RhbE9wZW4oKTtcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYobmV3R2hvc3RUYWIsIHsgZm9jdXM6IHNob3VsZEZvY3VzIH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHJ1bkNvbW1hbmQpIHtcclxuXHRcdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBPcGVuIHRoZSBob21lIGJhc2UgZmlsZVxyXG5cdCAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgZm9yIG9wZW5pbmdcclxuXHQgKi9cclxuXHRhc3luYyBvcGVuSG9tZUJhc2Uob3B0aW9uczoge1xyXG5cdFx0cmVwbGFjZUFjdGl2ZUxlYWY/OiBib29sZWFuO1xyXG5cdFx0cnVuQ29tbWFuZD86IGJvb2xlYW47XHJcblx0fSA9IHt9KTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHRjb25zdCB7IHJ1bkNvbW1hbmQgPSB0cnVlIH0gPSBvcHRpb25zO1xyXG5cdFx0Y29uc3QgbW9kZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm1hbnVhbE9wZW5Nb2RlO1xyXG5cdFx0XHJcblx0XHRcclxuXHRcdC8vIFVzZSB0aGUgbmV3IG1ldGhvZCB3aXRoIG1hbnVhbCBtb2RlXHJcblx0XHRyZXR1cm4gdGhpcy5vcGVuSG9tZUJhc2VXaXRoTW9kZShtb2RlLCBydW5Db21tYW5kKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE9wZW4gaG9tZSBiYXNlIGluIGFuIGVtcHR5IGxlYWYgKGZvciBuZXcgdGFiIHJlcGxhY2VtZW50KVxyXG5cdCAqL1xyXG5cdGFzeW5jIG9wZW5JbkxlYWYobGVhZjogV29ya3NwYWNlTGVhZik6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMucGx1Z2luLmdldEhvbWVCYXNlU2V0dGluZ3MoKTtcclxuXHRcdHJldHVybiB0aGlzLm9wZW5JbkxlYWZXaXRoU2V0dGluZ3MobGVhZiwgaG9tZUJhc2VTZXR0aW5ncyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBPcGVuIGEgZmlsZSBpbiBhbiBlbXB0eSBsZWFmIHdpdGggY3VzdG9tIHNldHRpbmdzXHJcblx0ICogQHBhcmFtIGxlYWYgVGhlIGxlYWYgdG8gb3BlbiB0aGUgZmlsZSBpblxyXG5cdCAqIEBwYXJhbSBzZXR0aW5ncyBTZXR0aW5ncyBvYmplY3Qgd2l0aCB0eXBlIGFuZCB2YWx1ZVxyXG5cdCAqIEBwYXJhbSBpc05ld1RhYiBXaGV0aGVyIHRoaXMgaXMgZm9yIG5ldyB0YWIgcmVwbGFjZW1lbnQgKHNraXBzIHBpbm5pbmcvZ2hvc3QgdGFiIGxvZ2ljKVxyXG5cdCAqL1xyXG5cdGFzeW5jIG9wZW5JbkxlYWZXaXRoU2V0dGluZ3MobGVhZjogV29ya3NwYWNlTGVhZiwgc2V0dGluZ3M6IHsgdHlwZTogSG9tZUJhc2VUeXBlOyB2YWx1ZTogc3RyaW5nIH0sIGlzTmV3VGFiOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRcdC8vIEhhbmRsZSBub24tZmlsZSB0eXBlc1xyXG5cdFx0aWYgKHNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UpIHtcclxuXHRcdFx0YXdhaXQgdGhpcy5vcGVuV29ya3NwYWNlKHNldHRpbmdzLnZhbHVlKTtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblx0XHRpZiAoc2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLkdyYXBoKSB7XHJcblx0XHRcdGF3YWl0IHRoaXMub3BlbkdyYXBoKCk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5Ob25lKSB7XHJcblx0XHRcdHRoaXMucnVuQ29tbWFuZE9uT3BlbigpO1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBSZXNvbHZlIHRoZSBhY3R1YWwgZmlsZSBwYXRoIGJhc2VkIG9uIHR5cGVcclxuXHRcdGNvbnN0IHJlc29sdmVkUGF0aCA9IGF3YWl0IGNvbXB1dGVIb21lQmFzZVBhdGgoXHJcblx0XHRcdHNldHRpbmdzLnR5cGUsXHJcblx0XHRcdHNldHRpbmdzLnZhbHVlLFxyXG5cdFx0XHR0aGlzLnBsdWdpblxyXG5cdFx0KTtcclxuXHRcdFxyXG5cdFx0aWYgKCFyZXNvbHZlZFBhdGgpIHtcclxuXHRcdFx0Ly8gTG9nIHdhcm5pbmcgZm9yIGRlYnVnZ2luZyAtIGZpbGUgcGF0aCBjb3VsZG4ndCBiZSByZXNvbHZlZFxyXG5cdFx0XHRjb25zb2xlLndhcm4oJ1tIb21lIEJhc2VdIENvdWxkIG5vdCByZXNvbHZlIHBhdGggZm9yIG5ldyB0YWI6Jywgc2V0dGluZ3MudHlwZSwgc2V0dGluZ3MudmFsdWUpO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gR2V0IHRoZSBmaWxlIC0gdXNlIG1ldGFkYXRhQ2FjaGUgZm9yIGJldHRlciBwYXRoIHJlc29sdXRpb24gKGxpa2UgaG9tZXBhZ2UgcGx1Z2luKVxyXG5cdFx0Ly8gVGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCBmb3IgcGVyaW9kaWMgbm90ZXMgd2hpY2ggbWF5IGhhdmUgYmVlbiBqdXN0IGNyZWF0ZWRcclxuXHRcdGxldCBmaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChyZXNvbHZlZFBhdGgsICcvJyk7XHJcblx0XHRcclxuXHRcdC8vIElmIG5vdCBmb3VuZCwgdHJ5IGdldEZpbGVCeVBhdGggYXMgZmFsbGJhY2tcclxuXHRcdGlmICghZmlsZSkge1xyXG5cdFx0XHRmaWxlID0gZ2V0RmlsZUJ5UGF0aCh0aGlzLmFwcCwgcmVzb2x2ZWRQYXRoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gRm9yIHBlcmlvZGljIG5vdGVzLCB0aGUgcGF0aCBtaWdodCBiZSB0cmltbWVkIChubyBleHRlbnNpb24pXHJcblx0XHQvLyBUcnkgd2l0aCAubWQgZXh0ZW5zaW9uIGlmIHN0aWxsIG5vdCBmb3VuZFxyXG5cdFx0aWYgKCFmaWxlICYmICFyZXNvbHZlZFBhdGguZW5kc1dpdGgoJy5tZCcpICYmICFyZXNvbHZlZFBhdGguZW5kc1dpdGgoJy5jYW52YXMnKSAmJiAhcmVzb2x2ZWRQYXRoLmVuZHNXaXRoKCcuYmFzZScpKSB7XHJcblx0XHRcdGNvbnN0IHVudHJpbW1lZFBhdGggPSBgJHtyZXNvbHZlZFBhdGh9Lm1kYDtcclxuXHRcdFx0ZmlsZSA9IGdldEZpbGVCeVBhdGgodGhpcy5hcHAsIHVudHJpbW1lZFBhdGgpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoIWZpbGUpIHtcclxuXHRcdFx0Ly8gTG9nIHdhcm5pbmcgZm9yIGRlYnVnZ2luZyAtIGZpbGUgbm90IGZvdW5kXHJcblx0XHRcdGNvbnNvbGUud2FybignW0hvbWUgQmFzZV0gRmlsZSBub3QgZm91bmQgZm9yIG5ldyB0YWI6JywgcmVzb2x2ZWRQYXRoKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZvciBuZXcgdGFiIHJlcGxhY2VtZW50OiBqdXN0IG9wZW4gdGhlIGZpbGUsIG5vIHBpbm5pbmcsIG5vIGdob3N0IHRhYiBsb2dpY1xyXG5cdFx0Ly8gTXVsdGlwbGUgdGFicyB3aXRoIHRoZSBzYW1lIGZpbGUgYXJlIGZpbmVcclxuXHRcdC8vIENSSVRJQ0FMOiBXaGVuIGlzTmV3VGFiPXRydWUsIGNvbXBsZXRlbHkgYnlwYXNzIEFMTCBnaG9zdCB0YWIgbG9naWNcclxuXHRcdGlmIChpc05ld1RhYikge1xyXG5cdFx0XHRjb25zb2xlLmRlYnVnKCdbSG9tZSBCYXNlXSBvcGVuSW5MZWFmV2l0aFNldHRpbmdzOiBpc05ld1RhYj10cnVlLCBieXBhc3NpbmcgZ2hvc3QgdGFiIGxvZ2ljJywge1xyXG5cdFx0XHRcdGZpbGU6IGZpbGUucGF0aCxcclxuXHRcdFx0XHRzZXR0aW5nczogc2V0dGluZ3NcclxuXHRcdFx0fSk7XHJcblx0XHRcdGF3YWl0IGxlYWYub3BlbkZpbGUoZmlsZSk7XHJcblx0XHRcdGF3YWl0IHRoaXMuY29uZmlndXJlVmlldyhsZWFmLCBmaWxlKTtcclxuXHRcdFx0dGhpcy5ydW5Db21tYW5kT25PcGVuKCk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZvciBob21lIGJhc2U6IHVzZSBnaG9zdCB0YWIvcGlubmluZyBsb2dpYyAoZXhpc3RpbmcgYmVoYXZpb3IpXHJcblx0XHQvLyBJZiBzdGlja3kgaWNvbiBpcyBlbmFibGVkIEFORCB0aGlzIGlzIGEgdHJ1bHkgZW1wdHkgdGFiIChub3QgYSBmaWxlIG9wZW5lZCBmcm9tIGV4cGxvcmVyKSxcclxuXHRcdC8vIGNoZWNrIGlmIHRoZXJlJ3MgYSBnaG9zdCB0YWIgYW5kIG1lcmdlIHdpdGggaXQuXHJcblx0XHQvLyBUaGlzIGVuc3VyZXMgdGhhdCB3aGVuIHlvdSBjbG9zZSB0aGUgbGFzdCB0YWIgYW5kIE9ic2lkaWFuIGNyZWF0ZXMgYSBuZXcgZW1wdHkgb25lLFxyXG5cdFx0Ly8gaXQgbWVyZ2VzIHdpdGggdGhlIGdob3N0IHRhYiBpbnN0ZWFkIG9mIGNyZWF0aW5nIGEgZHVwbGljYXRlLlxyXG5cdFx0Ly8gQlVUOiBJZiB0aGUgdXNlciBtYW51YWxseSBvcGVuZWQgYSBmaWxlIGZyb20gZXhwbG9yZXIsIHdlIHNob3VsZCBOT1QgbWVyZ2UgLSBsZXQgdGhlbSBoYXZlIHRoZWlyIHRhYi5cclxuXHRcdGNvbnN0IGlzVHJ1bHlFbXB0eSA9ICFsZWFmLnZpZXcgfHwgbGVhZi52aWV3LmdldFZpZXdUeXBlKCkgPT09ICdlbXB0eSc7XHJcblx0XHRcclxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24gJiYgaXNUcnVseUVtcHR5KSB7XHJcblx0XHRcdC8vIFJhbmRvbSB0eXBlcyBhbmQgcGVyaW9kaWMgbm90ZXM6IGRvbid0IHBpbiwgYnV0IGNhbiBzdGlsbCBtZXJnZVxyXG5cdFx0XHRjb25zdCBpc1JhbmRvbSA9IHNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5SYW5kb20gfHwgXHJcblx0XHRcdCAgICAgICAgICAgICAgICAgc2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlciB8fFxyXG5cdFx0XHQgICAgICAgICAgICAgICAgIHNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5EYWlseU5vdGUgfHxcclxuXHRcdFx0ICAgICAgICAgICAgICAgICBzZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuV2Vla2x5Tm90ZSB8fFxyXG5cdFx0XHQgICAgICAgICAgICAgICAgIHNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5Nb250aGx5Tm90ZSB8fFxyXG5cdFx0XHQgICAgICAgICAgICAgICAgIHNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5ZZWFybHlOb3RlO1xyXG5cdFx0XHRjb25zdCBnaG9zdFRhYiA9IHRoaXMuZmluZEdob3N0VGFiKGZpbGUsIGlzUmFuZG9tKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChnaG9zdFRhYikge1xyXG5cdFx0XHRcdC8vIENsb3NlIHRoZSBuZXcgZW1wdHkgbGVhZiBzaW5jZSB3ZSdyZSBtZXJnaW5nIHdpdGggZ2hvc3QgdGFiXHJcblx0XHRcdFx0dm9pZCBsZWFmLmRldGFjaCgpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIEZvY3VzIHRoZSBnaG9zdCB0YWIgYW5kIGNvbmZpZ3VyZSBpdFxyXG5cdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGdob3N0VGFiKTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLmNvbmZpZ3VyZVZpZXcoZ2hvc3RUYWIsIGZpbGUpO1xyXG5cdFx0XHRcdHRoaXMucnVuQ29tbWFuZE9uT3BlbigpO1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBObyBnaG9zdCB0YWIgZm91bmQsIGJ1dCBzdGlja3kgaWNvbiBpcyBlbmFibGVkIC0gdGhpcyB0YWIgc2hvdWxkIGJlY29tZSB0aGUgZ2hvc3QgdGFiXHJcblx0XHRcdC8vIFBpbiBpdCBzbyBpdCdzIHJlY29nbml6ZWQgYXMgdGhlIGdob3N0IHRhYlxyXG5cdFx0XHR0aGlzLmdob3N0TGVhdmVzLmFkZChsZWFmKTtcclxuXHRcdFx0aWYgKCFpc1JhbmRvbSkge1xyXG5cdFx0XHRcdGxlYWYuc2V0UGlubmVkKHRydWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xyXG5cdFx0YXdhaXQgdGhpcy5jb25maWd1cmVWaWV3KGxlYWYsIGZpbGUpO1xyXG5cdFx0XHJcblx0XHQvLyBSdW4gY29tbWFuZCBpZiBjb25maWd1cmVkXHJcblx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIExhc3QgdmlldyByZWZlcmVuY2UgZm9yIHJldmVydFZpZXcgZnVuY3Rpb25hbGl0eVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgbGFzdFZpZXc6IFdlYWtSZWY8TWFya2Rvd25WaWV3PiB8IHVuZGVmaW5lZDtcclxuXHJcblx0LyoqXHJcblx0ICogQ29uZmlndXJlIHRoZSB2aWV3IG1vZGUgZm9yIGEgbGVhZlxyXG5cdCAqL1xyXG5cdHByaXZhdGUgYXN5bmMgY29uZmlndXJlVmlldyhsZWFmOiBXb3Jrc3BhY2VMZWFmLCBmaWxlOiBURmlsZSk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcclxuXHRcdGNvbnN0IHZpZXcgPSBsZWFmLnZpZXc7XHJcblxyXG5cdFx0Ly8gT25seSBjb25maWd1cmUgdmlldyBtb2RlIGZvciBtYXJrZG93bi1saWtlIGZpbGVzXHJcblx0XHRpZiAoIWlzTWFya2Rvd25MaWtlKGZpbGUpIHx8ICEodmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldykpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHN0YXRlID0gdmlldy5nZXRTdGF0ZSgpO1xyXG5cclxuXHRcdC8vIFRyYWNrIHZpZXcgZm9yIHJldmVydFZpZXcgaWYgZW5hYmxlZFxyXG5cdFx0aWYgKHNldHRpbmdzLnJldmVydFZpZXcpIHtcclxuXHRcdFx0dGhpcy5sYXN0VmlldyA9IG5ldyBXZWFrUmVmKHZpZXcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEF1dG8tc2Nyb2xsIHRvIGJvdHRvbSBpZiBlbmFibGVkXHJcblx0XHRpZiAoc2V0dGluZ3MuYXV0b1Njcm9sbCkge1xyXG5cdFx0XHRjb25zdCBjb3VudCA9IHZpZXcuZWRpdG9yLmxpbmVDb3VudCgpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHN0YXRlLm1vZGUgPT09ICdwcmV2aWV3Jykge1xyXG5cdFx0XHRcdHZpZXcucHJldmlld01vZGUuYXBwbHlTY3JvbGwoY291bnQgLSA0KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR2aWV3LmVkaXRvci5zZXRDdXJzb3IoY291bnQpO1xyXG5cdFx0XHRcdHZpZXcuZWRpdG9yLmZvY3VzKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBTZXQgdmlldyBtb2RlXHJcblx0XHRpZiAoc2V0dGluZ3Mub3BlblZpZXdNb2RlICE9PSAnZGVmYXVsdCcpIHtcclxuXHRcdFx0c3dpdGNoIChzZXR0aW5ncy5vcGVuVmlld01vZGUpIHtcclxuXHRcdFx0XHRjYXNlICdwcmV2aWV3JzpcclxuXHRcdFx0XHRcdHN0YXRlLm1vZGUgPSAncHJldmlldyc7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlICdzb3VyY2UnOlxyXG5cdFx0XHRcdFx0c3RhdGUubW9kZSA9ICdzb3VyY2UnO1xyXG5cdFx0XHRcdFx0c3RhdGUuc291cmNlID0gdHJ1ZTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ2xpdmUnOlxyXG5cdFx0XHRcdFx0c3RhdGUubW9kZSA9ICdzb3VyY2UnO1xyXG5cdFx0XHRcdFx0c3RhdGUuc291cmNlID0gZmFsc2U7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0YXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xyXG5cdFx0XHRcdHR5cGU6ICdtYXJrZG93bicsXHJcblx0XHRcdFx0c3RhdGU6IHN0YXRlLFxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJldmVydCB2aWV3IHRvIGRlZmF1bHQgd2hlbiBuYXZpZ2F0aW5nIGF3YXkgZnJvbSBob21lIGJhc2VcclxuXHQgKi9cclxuXHRhc3luYyByZXZlcnRWaWV3KCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcclxuXHRcdGlmICghc2V0dGluZ3MucmV2ZXJ0VmlldyB8fCAhdGhpcy5sYXN0VmlldyB8fCBzZXR0aW5ncy5vcGVuVmlld01vZGUgPT09ICdkZWZhdWx0Jykge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgdmlldyA9IHRoaXMubGFzdFZpZXcuZGVyZWYoKTtcclxuXHRcdGlmICghdmlldykge1xyXG5cdFx0XHR0aGlzLmxhc3RWaWV3ID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMucGx1Z2luLmdldEhvbWVCYXNlU2V0dGluZ3MoKTtcclxuXHRcdGNvbnN0IHJlc29sdmVkUGF0aCA9IGF3YWl0IGNvbXB1dGVIb21lQmFzZVBhdGgoXHJcblx0XHRcdGhvbWVCYXNlU2V0dGluZ3MudHlwZSxcclxuXHRcdFx0aG9tZUJhc2VTZXR0aW5ncy52YWx1ZSxcclxuXHRcdFx0dGhpcy5wbHVnaW5cclxuXHRcdCk7XHJcblxyXG5cdFx0aWYgKCFyZXNvbHZlZFBhdGgpIHtcclxuXHRcdFx0dGhpcy5sYXN0VmlldyA9IHVuZGVmaW5lZDtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIHdlJ3JlIHN0aWxsIG9uIHRoZSBob21lIGJhc2UgZmlsZVxyXG5cdFx0Y29uc3QgY3VycmVudEZpbGUgPSB2aWV3LmZpbGU7XHJcblx0XHRpZiAoY3VycmVudEZpbGUgJiYgZXF1YWxzQ2FzZWxlc3ModHJpbUZpbGUoY3VycmVudEZpbGUpLCByZXNvbHZlZFBhdGgpKSB7XHJcblx0XHRcdHJldHVybjsgLy8gU3RpbGwgb24gaG9tZSBiYXNlLCBkb24ndCByZXZlcnRcclxuXHRcdH1cclxuXHJcblx0XHQvLyBSZXZlcnQgdG8gZGVmYXVsdCB2aWV3XHJcblx0XHRjb25zdCBzdGF0ZSA9IHZpZXcuZ2V0U3RhdGUoKTtcclxuXHRcdCBcclxuXHRcdGNvbnN0IGNvbmZpZyA9IHRoaXMuYXBwLnZhdWx0LmNvbmZpZztcclxuXHRcdGNvbnN0IG1vZGUgPSBjb25maWc/LmRlZmF1bHRWaWV3TW9kZSB8fCAnc291cmNlJztcclxuXHRcdGNvbnN0IHNvdXJjZSA9IGNvbmZpZz8ubGl2ZVByZXZpZXcgIT09IHVuZGVmaW5lZCA/ICFjb25maWcubGl2ZVByZXZpZXcgOiBmYWxzZTtcclxuXHJcblx0XHRpZiAoXHJcblx0XHRcdHZpZXcubGVhZi5nZXRWaWV3U3RhdGUoKS50eXBlID09PSAnbWFya2Rvd24nICYmXHJcblx0XHRcdChtb2RlICE9PSBzdGF0ZS5tb2RlIHx8IHNvdXJjZSAhPT0gc3RhdGUuc291cmNlKVxyXG5cdFx0KSB7XHJcblx0XHRcdHN0YXRlLm1vZGUgPSBtb2RlO1xyXG5cdFx0XHRzdGF0ZS5zb3VyY2UgPSBzb3VyY2U7XHJcblx0XHRcdGF3YWl0IHZpZXcubGVhZi5zZXRWaWV3U3RhdGUoeyB0eXBlOiAnbWFya2Rvd24nLCBzdGF0ZSwgYWN0aXZlOiB0cnVlIH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMubGFzdFZpZXcgPSB1bmRlZmluZWQ7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSdW4gdGhlIGNvbmZpZ3VyZWQgY29tbWFuZCBhZnRlciBvcGVuaW5nXHJcblx0ICovXHJcblx0cHJpdmF0ZSBydW5Db21tYW5kT25PcGVuKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgY29tbWFuZElkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29tbWFuZE9uT3BlbjtcclxuXHRcdGlmIChjb21tYW5kSWQpIHtcclxuXHRcdFx0Ly8gU21hbGwgZGVsYXkgdG8gZW5zdXJlIHRoZSB2aWV3IGlzIHJlYWR5XHJcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdGV4ZWN1dGVDb21tYW5kKHRoaXMuYXBwLCBjb21tYW5kSWQpO1xyXG5cdFx0XHR9LCAxMDApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRmluZCBhbiBleGlzdGluZyBsZWFmIHRoYXQgaGFzIHRoZSBob21lIGJhc2UgZmlsZSBvcGVuXHJcblx0ICovXHJcblx0ZmluZEV4aXN0aW5nSG9tZUJhc2VMZWFmKGZpbGU/OiBURmlsZSk6IFdvcmtzcGFjZUxlYWYgfCBudWxsIHtcclxuXHRcdGlmICghZmlsZSkgcmV0dXJuIG51bGw7XHJcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSBmaWxlLnBhdGg7XHJcblxyXG5cdFx0Y29uc3QgbGVhdmVzID0gTEVBRl9UWVBFUy5mbGF0TWFwKHR5cGUgPT4gXHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUodHlwZSlcclxuXHRcdCk7XHJcblxyXG5cdFx0Zm9yIChjb25zdCBsZWFmIG9mIGxlYXZlcykge1xyXG5cdFx0XHRpZiAobGVhZkhhc0ZpbGUobGVhZiwgaG9tZUJhc2VQYXRoKSkge1xyXG5cdFx0XHRcdHJldHVybiBsZWFmO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiBhIGxlYWYgaXMgYSBnaG9zdCB0YWJcclxuXHQgKiBHaG9zdCB0YWIgaXMgaWRlbnRpZmllZCBieSBiZWluZyBpbiBvdXIgaW50ZXJuYWwgZ2hvc3RMZWF2ZXMgc2V0XHJcblx0ICogT25seSB0YWJzIHNwZWNpZmljYWxseSBjcmVhdGVkIGZvciB0aGUgc3RpY2t5IGljb24gYXJlIGdob3N0IHRhYnNcclxuXHQgKi9cclxuXHRpc0dob3N0TGVhZihsZWFmOiBXb3Jrc3BhY2VMZWFmKTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gdGhpcy5naG9zdExlYXZlcy5oYXMobGVhZik7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBGaW5kIHRoZSBnaG9zdCB0YWIgKHRoZSBvbmUgb3BlbmVkIHZpYSBzdGlja3kgaWNvbilcclxuXHQgKiBHaG9zdCB0YWIgaXMgaWRlbnRpZmllZCBieSBiZWluZyBpbiBvdXIgaW50ZXJuYWwgZ2hvc3RMZWF2ZXMgc2V0XHJcblx0ICogT25seSByZXR1cm5zIGV4aXN0aW5nIGdob3N0IHRhYnMsIGRvZXNuJ3QgY3JlYXRlIG5ldyBvbmVzXHJcblx0ICovXHJcblx0ZmluZEdob3N0VGFiKGZpbGU/OiBURmlsZSwgaXNSYW5kb206IGJvb2xlYW4gPSBmYWxzZSk6IFdvcmtzcGFjZUxlYWYgfCBudWxsIHtcclxuXHRcdGlmICghZmlsZSkgcmV0dXJuIG51bGw7XHJcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSBmaWxlLnBhdGg7XHJcblxyXG5cdFx0Ly8gVXNlIGl0ZXJhdGVBbGxMZWF2ZXMgaW5zdGVhZCBvZiBnZXRMZWF2ZXNPZlR5cGUgdG8gZmluZCB0YWJzIGV2ZW4gd2hlbiBoaWRkZW4gKHplbiBtb2RlLCBldGMuKVxyXG5cdFx0Y29uc3QgbGVhdmVzOiBXb3Jrc3BhY2VMZWFmW10gPSBbXTtcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdGNvbnN0IHZpZXdUeXBlID0gbGVhZi52aWV3Py5nZXRWaWV3VHlwZSgpO1xyXG5cdFx0XHRpZiAodmlld1R5cGUgJiYgTEVBRl9UWVBFUy5pbmNsdWRlcyh2aWV3VHlwZSkpIHtcclxuXHRcdFx0XHRsZWF2ZXMucHVzaChsZWFmKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgZm9yIGEgbWF0Y2ggaW4gb3VyIFdlYWtTZXRcclxuXHRcdGZvciAoY29uc3QgbGVhZiBvZiBsZWF2ZXMpIHtcclxuXHRcdFx0aWYgKHRoaXMuZ2hvc3RMZWF2ZXMuaGFzKGxlYWYpICYmIGxlYWZIYXNGaWxlKGxlYWYsIGhvbWVCYXNlUGF0aCkpIHtcclxuXHRcdFx0XHRyZXR1cm4gbGVhZjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogT3BlbiBob21lIGJhc2UgaW4gZ2hvc3QgdGFiIChmb3Igc3RpY2t5IGljb24pXHJcblx0ICogR2hvc3QgdGFiIGlzIHBpbm5lZCBhbmQgaGlkZGVuIChpZiBzZXR0aW5nIGVuYWJsZWQpXHJcblx0ICogT25seSBvbmUgZ2hvc3QgdGFiIHNob3VsZCBleGlzdCBhdCBhIHRpbWVcclxuXHQgKiBXb3JrcyBmb3IgZmlsZS1iYXNlZCB0eXBlcyBhbmQgR3JhcGggdmlld1xyXG5cdCAqIE5vdGU6IFJhbmRvbSB0eXBlcyBkb24ndCBwaW4gKHNpbmNlIGZpbGUgY2hhbmdlcyBlYWNoIHRpbWUpXHJcblx0ICogTm90ZTogV29ya3NwYWNlIGFuZCBOb25lIGRvbid0IHdvcmsgKHdvcmtzcGFjZSBjaGFuZ2VzIGxheW91dCwgTm9uZSBkb2Vzbid0IG9wZW4gYW55dGhpbmcpXHJcblx0ICovXHJcblx0YXN5bmMgb3BlbkhvbWVCYXNlSW5HaG9zdFRhYihvcHRpb25zOiB7XHJcblx0XHRydW5Db21tYW5kPzogYm9vbGVhbjtcclxuXHR9ID0ge30pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRcdGNvbnN0IHsgcnVuQ29tbWFuZCA9IHRydWUgfSA9IG9wdGlvbnM7XHJcblx0XHRjb25zdCBob21lQmFzZVNldHRpbmdzID0gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xyXG5cdFx0XHJcblx0XHQvLyBXb3Jrc3BhY2UgYW5kIE5vbmUgZG9uJ3Qgd29yayB3aXRoIGdob3N0IHRhYlxyXG5cdFx0aWYgKGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSB8fCBcclxuXHRcdCAgICBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5Ob25lKSB7XHJcblx0XHRcdC8vIEZvciB0aGVzZSB0eXBlcywganVzdCB1c2Ugbm9ybWFsIG9wZW5cclxuXHRcdFx0cmV0dXJuIHRoaXMub3BlbkhvbWVCYXNlV2l0aE1vZGUoJ3JldGFpbicsIHJ1bkNvbW1hbmQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEdyYXBoIHZpZXc6IGRvbid0IHVzZSBnaG9zdCB0YWIgKGZpbmRpbmcgaXQgaXMgdW5yZWxpYWJsZSlcclxuXHRcdC8vIEp1c3Qgb3BlbiBpdCBub3JtYWxseSBsaWtlIHJhbmRvbSBmaWxlc1xyXG5cdFx0aWYgKGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLkdyYXBoKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLm9wZW5HcmFwaCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFJhbmRvbSB0eXBlcyBhbmQgcGVyaW9kaWMgbm90ZXM6IGRvbid0IHBpbiAoZmlsZSBjaGFuZ2VzIGVhY2ggdGltZSlcclxuXHRcdC8vIEJ1dCBzdGlsbCBhbGxvdyBtZXJnaW5nIHdpdGggZXhpc3RpbmcgdGFicyBpZiBzdGlja3kgaWNvbiBpcyBlbmFibGVkXHJcblx0XHRjb25zdCBpc1JhbmRvbSA9IGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbSB8fCBcclxuXHRcdCAgICAgICAgICAgICAgICAgaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgIGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLkRhaWx5Tm90ZSB8fFxyXG5cdFx0ICAgICAgICAgICAgICAgICBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5XZWVrbHlOb3RlIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgIGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLk1vbnRobHlOb3RlIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgIGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLlllYXJseU5vdGU7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgc2V0dGluZ3MgbW9kYWwgaXMgb3BlblxyXG5cdFx0aWYgKHRoaXMuaXNTZXR0aW5nc01vZGFsT3BlbigpKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBSZXNvbHZlIHRoZSBhY3R1YWwgZmlsZSBwYXRoIGJhc2VkIG9uIHR5cGVcclxuXHRcdGNvbnN0IHJlc29sdmVkUGF0aCA9IGF3YWl0IGNvbXB1dGVIb21lQmFzZVBhdGgoXHJcblx0XHRcdGhvbWVCYXNlU2V0dGluZ3MudHlwZSxcclxuXHRcdFx0aG9tZUJhc2VTZXR0aW5ncy52YWx1ZSxcclxuXHRcdFx0dGhpcy5wbHVnaW5cclxuXHRcdCk7XHJcblx0XHRcclxuXHRcdGlmICghcmVzb2x2ZWRQYXRoKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBHZXQgdGhlIGhvbWUgYmFzZSBmaWxlIC0gdXNlIG1ldGFkYXRhQ2FjaGUgZm9yIGJldHRlciBwYXRoIHJlc29sdXRpb24gKGxpa2UgaG9tZXBhZ2UgcGx1Z2luKVxyXG5cdFx0Ly8gVGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCBmb3IgcGVyaW9kaWMgbm90ZXMgd2hpY2ggbWF5IGhhdmUgYmVlbiBqdXN0IGNyZWF0ZWRcclxuXHRcdGxldCBmaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChyZXNvbHZlZFBhdGgsICcvJyk7XHJcblx0XHRcclxuXHRcdC8vIElmIG5vdCBmb3VuZCwgdHJ5IGdldEZpbGVCeVBhdGggYXMgZmFsbGJhY2tcclxuXHRcdGlmICghZmlsZSkge1xyXG5cdFx0XHRmaWxlID0gZ2V0RmlsZUJ5UGF0aCh0aGlzLmFwcCwgcmVzb2x2ZWRQYXRoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gRm9yIHBlcmlvZGljIG5vdGVzLCB0aGUgcGF0aCBtaWdodCBiZSB0cmltbWVkIChubyBleHRlbnNpb24pXHJcblx0XHQvLyBUcnkgd2l0aCAubWQgZXh0ZW5zaW9uIGlmIHN0aWxsIG5vdCBmb3VuZFxyXG5cdFx0aWYgKCFmaWxlICYmICFyZXNvbHZlZFBhdGguZW5kc1dpdGgoJy5tZCcpICYmICFyZXNvbHZlZFBhdGguZW5kc1dpdGgoJy5jYW52YXMnKSAmJiAhcmVzb2x2ZWRQYXRoLmVuZHNXaXRoKCcuYmFzZScpKSB7XHJcblx0XHRcdGNvbnN0IHVudHJpbW1lZFBhdGggPSBgJHtyZXNvbHZlZFBhdGh9Lm1kYDtcclxuXHRcdFx0ZmlsZSA9IGdldEZpbGVCeVBhdGgodGhpcy5hcHAsIHVudHJpbW1lZFBhdGgpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoIWZpbGUpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIGdob3N0IHRhYiBhbHJlYWR5IGV4aXN0c1xyXG5cdFx0Y29uc3QgZ2hvc3RUYWIgPSB0aGlzLmZpbmRHaG9zdFRhYihmaWxlLCBpc1JhbmRvbSk7XHJcblx0XHRcclxuXHRcdGNvbnNvbGUuZGVidWcoJ1tIb21lIEJhc2VdIG9wZW5Ib21lQmFzZUluR2hvc3RUYWI6Jywge1xyXG5cdFx0XHRmaWxlOiBmaWxlLnBhdGgsXHJcblx0XHRcdGdob3N0VGFiRm91bmQ6ICEhZ2hvc3RUYWIsXHJcblx0XHRcdGlzUmFuZG9tOiBpc1JhbmRvbSxcclxuXHRcdFx0emVuTW9kZTogZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3plbm1vZGUtYWN0aXZlJylcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRpZiAoZ2hvc3RUYWIpIHtcclxuXHRcdFx0Ly8gR2hvc3QgdGFiIGV4aXN0cyAtIGp1c3QganVtcCB0byBpdCwgZG9uJ3QgY2xvc2Ugb3RoZXIgdGFic1xyXG5cdFx0XHQvLyBVc2VyIGNhbiBoYXZlIG11bHRpcGxlIGhvbWUgYmFzZSB0YWJzIG9wZW4sIGJ1dCBjbGlja2luZyBzdGlja3kgaWNvbiBqdW1wcyB0byB0aGUgXCJvY2N1cGllZFwiIG9uZVxyXG5cdFx0XHRjb25zdCBzaG91bGRGb2N1cyA9ICF0aGlzLmlzU2V0dGluZ3NNb2RhbE9wZW4oKTtcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYoZ2hvc3RUYWIsIHsgZm9jdXM6IHNob3VsZEZvY3VzIH0pO1xyXG5cdFx0XHRhd2FpdCB0aGlzLmNvbmZpZ3VyZVZpZXcoZ2hvc3RUYWIsIGZpbGUpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHJ1bkNvbW1hbmQpIHtcclxuXHRcdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBHaG9zdCB0YWIgZG9lc24ndCBleGlzdCAtIGNyZWF0ZSBpdFxyXG5cdFx0Ly8gRG9uJ3QgY2xvc2UgZXhpc3RpbmcgdGFicyAtIHVzZXIgY2FuIGhhdmUgbXVsdGlwbGUgaG9tZSBiYXNlIHRhYnNcclxuXHRcdC8vIFRoZSBmaXJzdCBvbmUgd2UgY3JlYXRlIHdpbGwgXCJvY2N1cHlcIiB0aGUgZ2hvc3QgdGFiIHNsb3QgKGJlIHBpbm5lZCBhbmQgaGlkZGVuKVxyXG5cclxuXHRcdC8vIENyZWF0ZSBuZXcgZ2hvc3QgdGFiXHJcblx0XHRjb25zdCBuZXdHaG9zdFRhYiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd0YWInKTtcclxuXHRcdHRoaXMuZ2hvc3RMZWF2ZXMuYWRkKG5ld0dob3N0VGFiKTtcclxuXHRcdGF3YWl0IG5ld0dob3N0VGFiLm9wZW5GaWxlKGZpbGUpO1xyXG5cdFx0XHJcblx0XHQvLyBQaW4gdGhlIGdob3N0IHRhYiAodW5sZXNzIGl0J3MgcmFuZG9tIC0gZmlsZSBjaGFuZ2VzIGVhY2ggdGltZSlcclxuXHRcdGlmICghaXNSYW5kb20pIHtcclxuXHRcdFx0bmV3R2hvc3RUYWIuc2V0UGlubmVkKHRydWUpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBNYXJrIHRoZSB0YWIgaGVhZGVyIGltbWVkaWF0ZWx5IGFmdGVyIHBpbm5pbmcgKGZvciBhdXRvLWhpZGUgdGFiIGNvdW50aW5nKVxyXG5cdFx0Ly8gVXNlIGEgc21hbGwgZGVsYXkgdG8gZW5zdXJlIHRoZSB0YWIgaGVhZGVyIGV4aXN0c1xyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdHRoaXMucGx1Z2luLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlVGFiSGVhZGVycygpO1xyXG5cdFx0fSwgNTApO1xyXG5cdFx0XHJcblx0XHQvLyBGb2N1cyBpdFxyXG5cdFx0Y29uc3Qgc2hvdWxkRm9jdXMgPSAhdGhpcy5pc1NldHRpbmdzTW9kYWxPcGVuKCk7XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uuc2V0QWN0aXZlTGVhZihuZXdHaG9zdFRhYiwgeyBmb2N1czogc2hvdWxkRm9jdXMgfSk7XHJcblx0XHRcclxuXHRcdC8vIENvbmZpZ3VyZSB0aGUgdmlld1xyXG5cdFx0YXdhaXQgdGhpcy5jb25maWd1cmVWaWV3KG5ld0dob3N0VGFiLCBmaWxlKTtcclxuXHJcblx0XHQvLyBSdW4gY29tbWFuZCBpZiBjb25maWd1cmVkXHJcblx0XHRpZiAocnVuQ29tbWFuZCkge1xyXG5cdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEZpbmQgYW4gZW1wdHkgbGVhZlxyXG5cdCAqL1xyXG5cdHByaXZhdGUgZmluZEVtcHR5TGVhZigpOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCB7XHJcblx0XHRjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdlbXB0eScpO1xyXG5cdFx0cmV0dXJuIGxlYXZlc1swXSB8fCBudWxsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IHRoZSBob21lIGJhc2UgZmlsZVxyXG5cdCAqL1xyXG5cdGdldEhvbWVCYXNlRmlsZSgpOiBURmlsZSB8IG51bGwge1xyXG5cdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMucGx1Z2luLmdldEhvbWVCYXNlU2V0dGluZ3MoKTtcclxuXHRcdGNvbnN0IHBhdGggPSByZXNvbHZlUGF0aFN5bmMoaG9tZUJhc2VTZXR0aW5ncy50eXBlLCBob21lQmFzZVNldHRpbmdzLnZhbHVlLCB0aGlzLmFwcCk7XHJcblx0XHRpZiAoIXBhdGgpIHJldHVybiBudWxsO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gZ2V0RmlsZUJ5UGF0aCh0aGlzLmFwcCwgcGF0aCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBGYXN0IGRldGFjaCBhbGwgbGVhdmVzIHVzaW5nIGNoYW5nZUxheW91dCAobGlrZSBob21lcGFnZSBwbHVnaW4pXHJcblx0ICogVGhpcyBpcyBtdWNoIGZhc3RlciB0aGFuIGl0ZXJhdGluZyBhbmQgZGV0YWNoaW5nIGxlYXZlcyBpbmRpdmlkdWFsbHlcclxuXHQgKi9cclxuXHRhc3luYyBkZXRhY2hBbGxMZWF2ZXMoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRjb25zdCBsYXlvdXQgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGF5b3V0KCk7XHJcblx0XHRsYXlvdXQubWFpbiA9IHtcclxuXHRcdFx0XCJpZFwiOiBcIjUzMjQzNzMwMTU3MjZiYThcIixcclxuXHRcdFx0XCJ0eXBlXCI6IFwic3BsaXRcIixcclxuXHRcdFx0XCJjaGlsZHJlblwiOiBbeyBcclxuXHRcdFx0XHRcImlkXCI6IFwiNDUwOTcyNGY4YmY4NGRhN1wiLFxyXG5cdFx0XHRcdFwidHlwZVwiOiBcInRhYnNcIixcclxuXHRcdFx0XHRcImNoaWxkcmVuXCI6IFt7XHJcblx0XHRcdFx0XHRcImlkXCI6IFwiZTdhN2IzMDNjNjE3ODZkY1wiLFxyXG5cdFx0XHRcdFx0XCJ0eXBlXCI6IFwibGVhZlwiLFxyXG5cdFx0XHRcdFx0XCJzdGF0ZVwiOiB7XCJ0eXBlXCI6IFwiZW1wdHlcIiwgXCJzdGF0ZVwiOiB7fSwgXCJpY29uXCI6IFwibHVjaWRlLWZpbGVcIiwgXCJ0aXRsZVwiOiBcIk5ldyB0YWJcIn1cclxuXHRcdFx0XHR9XVxyXG5cdFx0XHR9XSxcclxuXHRcdFx0XCJkaXJlY3Rpb25cIjogXCJ2ZXJ0aWNhbFwiXHJcblx0XHR9O1xyXG5cdFx0bGF5b3V0LmFjdGl2ZSA9IFwiZTdhN2IzMDNjNjE3ODZkY1wiO1xyXG5cdFx0YXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmNoYW5nZUxheW91dChsYXlvdXQpO1xyXG5cdFx0XHJcblx0XHRpZiAoUGxhdGZvcm0uaXNNb2JpbGUpIHtcclxuXHRcdFx0IFxyXG5cdFx0XHQodGhpcy5hcHAud29ya3NwYWNlLnJpZ2h0U3BsaXQgYXMgeyB1cGRhdGVJbmZvPzogKCkgPT4gdm9pZCB9KT8udXBkYXRlSW5mbz8uKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDbG9zZSBhbGwgbGVhdmVzIGluIHRoZSBtYWluIHdvcmtzcGFjZSBleGNlcHQgdGhlIHNwZWNpZmllZCBvbmVcclxuXHQgKiBTaW1wbGlmaWVkIGFwcHJvYWNoOiBpdGVyYXRlIGFsbCBsZWF2ZXMgYW5kIGNsb3NlIHRob3NlIGluIG1haW4gd29ya3NwYWNlXHJcblx0ICovXHJcblx0YXN5bmMgY2xvc2VBbGxMZWF2ZXNFeGNlcHQoZXhjZXB0TGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdC8vIFVzZSBpdGVyYXRlQWxsTGVhdmVzIHRvIGdldCBBTEwgbGVhdmVzXHJcblx0XHRjb25zdCBsZWF2ZXNUb0Nsb3NlOiBXb3Jrc3BhY2VMZWFmW10gPSBbXTtcclxuXHRcdFxyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0Ly8gU2tpcCB0aGUgZXhjZXB0aW9uIGxlYWZcclxuXHRcdFx0aWYgKGxlYWYgPT09IGV4Y2VwdExlYWYpIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFRyeSB0byBkZXRlcm1pbmUgaWYgdGhpcyBpcyBhIG1haW4gd29ya3NwYWNlIGxlYWZcclxuXHRcdFx0Ly8gR2V0IHRoZSB2aWV3J3MgY29udGFpbmVyIGVsZW1lbnRcclxuXHRcdFx0Y29uc3QgdmlldyA9IGxlYWYudmlldztcclxuXHRcdFx0bGV0IGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRcdFx0XHJcblx0XHRcdGlmICh2aWV3KSB7XHJcblx0XHRcdFx0Y29uc3Qgdmlld0FueSA9IHZpZXcgYXMgdW5rbm93biBhcyB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfTtcclxuXHRcdFx0XHRjb250YWluZXIgPSB2aWV3QW55LmNvbnRhaW5lckVsIHx8IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIElmIG5vIGNvbnRhaW5lciBmcm9tIHZpZXcsIHRyeSBsZWFmJ3MgY29udGFpbmVyRWxcclxuXHRcdFx0aWYgKCFjb250YWluZXIpIHtcclxuXHRcdFx0XHRjb25zdCBsZWFmQW55ID0gbGVhZiBhcyB1bmtub3duIGFzIHsgY29udGFpbmVyRWw/OiBIVE1MRWxlbWVudCB9O1xyXG5cdFx0XHRcdGNvbnRhaW5lciA9IGxlYWZBbnkuY29udGFpbmVyRWwgfHwgbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGNvbnRhaW5lcikge1xyXG5cdFx0XHRcdC8vIENoZWNrIGlmIGl0J3MgaW4gdGhlIG1haW4gd29ya3NwYWNlIChyb290LCBub3Qgc2lkZWJhcilcclxuXHRcdFx0XHRjb25zdCByb290V29ya3NwYWNlID0gY29udGFpbmVyLmNsb3Nlc3QoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXZlcnRpY2FsLm1vZC1yb290Jyk7XHJcblx0XHRcdFx0Y29uc3QgbGVmdFNpZGViYXIgPSBjb250YWluZXIuY2xvc2VzdCgnLndvcmtzcGFjZS1zcGxpdC5tb2QtbGVmdC1zcGxpdCcpO1xyXG5cdFx0XHRcdGNvbnN0IHJpZ2h0U2lkZWJhciA9IGNvbnRhaW5lci5jbG9zZXN0KCcud29ya3NwYWNlLXNwbGl0Lm1vZC1yaWdodC1zcGxpdCcpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChyb290V29ya3NwYWNlICYmICFsZWZ0U2lkZWJhciAmJiAhcmlnaHRTaWRlYmFyKSB7XHJcblx0XHRcdFx0XHRsZWF2ZXNUb0Nsb3NlLnB1c2gobGVhZik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIElmIHdlIGNhbid0IGZpbmQgY29udGFpbmVyLCBzdGlsbCB0cnkgdG8gY2xvc2UgaXQgaWYgaXQncyBpbiBtYWluIHdvcmtzcGFjZVxyXG5cdFx0XHRcdC8vIFRoaXMgaGFuZGxlcyBlZGdlIGNhc2VzIHdoZXJlIGNvbnRhaW5lciBkZXRlY3Rpb24gZmFpbHNcclxuXHRcdFx0XHQvLyBPbmx5IGNsb3NlIGlmIHdlJ3JlIGNsb3NpbmcgZXZlcnl0aGluZyAoZXhjZXB0TGVhZiBpcyBudWxsKVxyXG5cdFx0XHRcdGlmIChleGNlcHRMZWFmID09PSBudWxsKSB7XHJcblx0XHRcdFx0XHQvLyBUcnkgdG8gZ2V0IGxlYWYncyB2aWV3IHN0YXRlIHRvIGNoZWNrIGlmIGl0J3MgYSBtYWluIHdvcmtzcGFjZSB0YWJcclxuXHRcdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRcdFx0XHRcdC8vIElmIGl0IGhhcyBhIHZpZXcgc3RhdGUsIGl0J3MgbGlrZWx5IGEgbWFpbiB3b3Jrc3BhY2UgdGFiXHJcblx0XHRcdFx0XHRcdGlmICh2aWV3U3RhdGUpIHtcclxuXHRcdFx0XHRcdFx0XHRsZWF2ZXNUb0Nsb3NlLnB1c2gobGVhZik7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0XHQvLyBJZiB3ZSBjYW4ndCBnZXQgdmlldyBzdGF0ZSwgc2tpcCBpdFxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdFxyXG5cdFx0Ly8gQ2xvc2UgYWxsIGlkZW50aWZpZWQgbGVhdmVzXHJcblx0XHRmb3IgKGNvbnN0IGxlYWYgb2YgbGVhdmVzVG9DbG9zZSkge1xyXG5cdFx0XHR2b2lkIGxlYWYuZGV0YWNoKCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIFdhaXQgZm9yIGRldGFjaG1lbnRzIHRvIGNvbXBsZXRlXHJcblx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwKSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiB0aGUgZm9jdXNlZCB0YWIgaXMgdGhlIGhvbWUgYmFzZVxyXG5cdCAqL1xyXG5cdGlzRm9jdXNlZE9uSG9tZUJhc2UoKTogYm9vbGVhbiB7XHJcblx0XHRjb25zdCBhY3RpdmVMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldE1vc3RSZWNlbnRMZWFmKCk7XHJcblx0XHRpZiAoIWFjdGl2ZUxlYWYpIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHQvLyBJZiBpdCdzIGEgZ2hvc3QgbGVhZiwgaXQncyBkZWZpbml0ZWx5IHRoZSBob21lIGJhc2VcclxuXHRcdGlmICh0aGlzLmdob3N0TGVhdmVzLmhhcyhhY3RpdmVMZWFmKSkge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuXHRcdGlmICghYWN0aXZlRmlsZSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdGNvbnN0IGhvbWVCYXNlU2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5nZXRIb21lQmFzZVNldHRpbmdzKCk7XHJcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSByZXNvbHZlUGF0aFN5bmMoaG9tZUJhc2VTZXR0aW5ncy50eXBlLCBob21lQmFzZVNldHRpbmdzLnZhbHVlLCB0aGlzLmFwcCk7XHJcblx0XHRcclxuXHRcdGlmIChob21lQmFzZVBhdGgpIHtcclxuXHRcdFx0cmV0dXJuIGFjdGl2ZUZpbGUucGF0aCA9PT0gaG9tZUJhc2VQYXRoIHx8IHBhdGhzRXF1YWwoYWN0aXZlRmlsZS5wYXRoLCBob21lQmFzZVBhdGgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIGhvbWUgYmFzZSBmaWxlIGV4aXN0c1xyXG5cdCAqL1xyXG5cdGhvbWVCYXNlRXhpc3RzKCk6IGJvb2xlYW4ge1xyXG5cdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMucGx1Z2luLmdldEhvbWVCYXNlU2V0dGluZ3MoKTtcclxuXHRcdGNvbnN0IHBhdGggPSByZXNvbHZlUGF0aFN5bmMoaG9tZUJhc2VTZXR0aW5ncy50eXBlLCBob21lQmFzZVNldHRpbmdzLnZhbHVlLCB0aGlzLmFwcCk7XHJcblx0XHRpZiAoIXBhdGgpIHJldHVybiBmYWxzZTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIGdldEZpbGVCeVBhdGgodGhpcy5hcHAsIHBhdGgpICE9PSBudWxsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IHRoZSBuYXRpdmUgT2JzaWRpYW4gb3BlbiBiZWhhdmlvciBzZXR0aW5nIChmcm9tIGFwcC5qc29uKVxyXG5cdCAqIEByZXR1cm5zIFRoZSBuYXRpdmUgc2V0dGluZyB2YWx1ZSBvciB1bmRlZmluZWQgaWYgbm90IHN1cHBvcnRlZC9mb3VuZFxyXG5cdCAqL1xyXG5cdGdldE5hdGl2ZU9wZW5CZWhhdmlvcigpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG5cdFx0Ly8gVGhlIGNvbmZpZyBwcm9wZXJ0eSBpcyBhZGRlZCB2aWEgaW50ZXJuYWwgdHlwZSBhdWdtZW50YXRpb25cclxuXHRcdGNvbnN0IGNvbmZpZyA9IHRoaXMuYXBwLnZhdWx0LmNvbmZpZztcclxuXHRcdGlmICghY29uZmlnKSByZXR1cm4gdW5kZWZpbmVkO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gY29uZmlnLm9wZW5CZWhhdmlvcjtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIHRoZSBzZXR0aW5ncyBtb2RhbCBpcyBjdXJyZW50bHkgb3BlblxyXG5cdCAqL1xyXG5cdHByaXZhdGUgaXNTZXR0aW5nc01vZGFsT3BlbigpOiBib29sZWFuIHtcclxuXHRcdC8vIENoZWNrIGZvciBzZXR0aW5ncyBtb2RhbCBieSBsb29raW5nIGZvciB0aGUgbW9kYWwgY29udGFpbmVyXHJcblx0XHQvLyBUcnkgbXVsdGlwbGUgc2VsZWN0b3JzIHRvIGJlIG1vcmUgcm9idXN0XHJcblx0XHRjb25zdCBzZXR0aW5nc01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRhaW5lci5tb2Qtc2V0dGluZ3MnKSB8fFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC5tb2Qtc2V0dGluZ3MnKSB8fFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52ZXJ0aWNhbC10YWItY29udGVudCcpO1xyXG5cdFx0XHJcblx0XHQvLyBBbHNvIGNoZWNrIGlmIGFueSBtb2RhbCBpcyBvcGVuIGFuZCBjb250YWlucyBzZXR0aW5ncyBjb250ZW50XHJcblx0XHRpZiAoIXNldHRpbmdzTW9kYWwpIHtcclxuXHRcdFx0Y29uc3QgYWxsTW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsLWNvbnRhaW5lcicpO1xyXG5cdFx0XHRmb3IgKGNvbnN0IG1vZGFsIG9mIEFycmF5LmZyb20oYWxsTW9kYWxzKSkge1xyXG5cdFx0XHRcdGlmIChtb2RhbC5xdWVyeVNlbGVjdG9yKCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcclxuXHRcdFx0XHQgICAgbW9kYWwucXVlcnlTZWxlY3RvcignLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdCAgICBtb2RhbC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZC1zZXR0aW5ncycpKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHNldHRpbmdzTW9kYWwgIT09IG51bGw7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXQgdGhlIGFjdGl2ZSBmaWxlIGFzIGhvbWUgYmFzZVxyXG5cdCAqL1xyXG5cdGFzeW5jIHNldEFjdGl2ZUZpbGVBc0hvbWVCYXNlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRpZiAoIWFjdGl2ZUZpbGUpIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHQvLyBDaGVjayBpZiB0aGUgZmlsZSB0eXBlIGlzIHN1cHBvcnRlZFxyXG5cdFx0aWYgKCFpc1N1cHBvcnRlZEV4dGVuc2lvbihhY3RpdmVGaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpKSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNlcGFyYXRlTW9iaWxlICYmIFBsYXRmb3JtLmlzTW9iaWxlKSB7XHJcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVHlwZSA9IEhvbWVCYXNlVHlwZS5GaWxlO1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVZhbHVlID0gYWN0aXZlRmlsZS5wYXRoO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaG9tZUJhc2VUeXBlID0gSG9tZUJhc2VUeXBlLkZpbGU7XHJcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhvbWVCYXNlVmFsdWUgPSBhY3RpdmVGaWxlLnBhdGg7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiBhY3RpdmUgZmlsZSBjYW4gYmUgc2V0IGFzIGhvbWUgYmFzZVxyXG5cdCAqL1xyXG5cdGNhblNldEFjdGl2ZUZpbGVBc0hvbWVCYXNlKCk6IGJvb2xlYW4ge1xyXG5cdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRpZiAoIWFjdGl2ZUZpbGUpIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHRyZXR1cm4gaXNTdXBwb3J0ZWRFeHRlbnNpb24oYWN0aXZlRmlsZS5leHRlbnNpb24udG9Mb3dlckNhc2UoKSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZXN0b3JlIGdob3N0IGxlYXZlcyBmcm9tIHByZXZpb3VzIHNlc3Npb25cclxuXHQgKiBUaGlzIGlkZW50aWZpZXMgcGlubmVkIGhvbWUgYmFzZSB0YWJzIHRoYXQgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgZ2hvc3QgbGVhdmVzXHJcblx0ICovXHJcblx0cmVzdG9yZUdob3N0TGVhdmVzKCk6IHZvaWQge1xyXG5cdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGhvbWVCYXNlU2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5nZXRIb21lQmFzZVNldHRpbmdzKCk7XHJcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSByZXNvbHZlUGF0aFN5bmMoaG9tZUJhc2VTZXR0aW5ncy50eXBlLCBob21lQmFzZVNldHRpbmdzLnZhbHVlLCB0aGlzLmFwcCk7XHJcblx0XHRpZiAoIWhvbWVCYXNlUGF0aCkgcmV0dXJuO1xyXG5cclxuXHRcdC8vIEZvciByYW5kb20vZHluYW1pYyB0eXBlcywgd2UgZG9uJ3QgcmVzdG9yZSBnaG9zdCBsZWF2ZXNcclxuXHRcdGNvbnN0IGlzUmFuZG9tID0gaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgIGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlciB8fFxyXG5cdFx0ICAgICAgICAgICAgICAgICBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5EYWlseU5vdGUgfHxcclxuXHRcdCAgICAgICAgICAgICAgICAgaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuV2Vla2x5Tm90ZSB8fFxyXG5cdFx0ICAgICAgICAgICAgICAgICBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5Nb250aGx5Tm90ZSB8fFxyXG5cdFx0ICAgICAgICAgICAgICAgICBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5ZZWFybHlOb3RlO1xyXG5cclxuXHRcdGlmIChpc1JhbmRvbSkgcmV0dXJuO1xyXG5cclxuXHRcdC8vIEZpbmQgcGlubmVkIGhvbWUgYmFzZSB0YWJzIGFuZCBtYXJrIHRoZSBmaXJzdCBvbmUgYXMgYSBnaG9zdCBsZWFmXHJcblx0XHRjb25zdCBsZWF2ZXM6IFdvcmtzcGFjZUxlYWZbXSA9IFtdO1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0Y29uc3Qgdmlld1R5cGUgPSBsZWFmLnZpZXc/LmdldFZpZXdUeXBlKCk7XHJcblx0XHRcdGlmICh2aWV3VHlwZSAmJiBMRUFGX1RZUEVTLmluY2x1ZGVzKHZpZXdUeXBlKSkge1xyXG5cdFx0XHRcdGxlYXZlcy5wdXNoKGxlYWYpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRmb3IgKGNvbnN0IGxlYWYgb2YgbGVhdmVzKSB7XHJcblx0XHRcdGlmIChsZWFmSGFzRmlsZShsZWFmLCBob21lQmFzZVBhdGgpKSB7XHJcblx0XHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcclxuXHRcdFx0XHRpZiAodmlld1N0YXRlLnBpbm5lZCA9PT0gdHJ1ZSAmJiAhdGhpcy5naG9zdExlYXZlcy5oYXMobGVhZikpIHtcclxuXHRcdFx0XHRcdC8vIEZvdW5kIGEgcGlubmVkIGhvbWUgYmFzZSB0YWIgLSBtYXJrIGl0IGFzIGdob3N0XHJcblx0XHRcdFx0XHR0aGlzLmdob3N0TGVhdmVzLmFkZChsZWFmKTtcclxuXHRcdFx0XHRcdC8vIE9ubHkgcmVzdG9yZSBvbmUgZ2hvc3QgbGVhZiAodGhlIGZpcnN0IHBpbm5lZCBob21lIGJhc2UgdGFiKVxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsICIvKipcclxuICogRmlsZSBVdGlsaXRpZXNcclxuICogSGVscGVyIGZ1bmN0aW9ucyBmb3IgZmlsZSB0eXBlIGRldGVjdGlvbiBhbmQgaGFuZGxpbmdcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBXb3Jrc3BhY2VMZWFmIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuLyoqXHJcbiAqIFN1cHBvcnRlZCBmaWxlIGV4dGVuc2lvbnMgZm9yIGhvbWUgYmFzZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFNVUFBPUlRFRF9FWFRFTlNJT05TID0gWydtZCcsICdtZHgnLCAnY2FudmFzJywgJ2Jhc2UnLCAna2FuYmFuJ10gYXMgY29uc3Q7XHJcbmV4cG9ydCB0eXBlIFN1cHBvcnRlZEV4dGVuc2lvbiA9IHR5cGVvZiBTVVBQT1JURURfRVhURU5TSU9OU1tudW1iZXJdO1xyXG5cclxuLyoqXHJcbiAqIFZpZXcgdHlwZXMgY29ycmVzcG9uZGluZyB0byBmaWxlIGV4dGVuc2lvbnNcclxuICovXHJcbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfTUFQOiBSZWNvcmQ8U3VwcG9ydGVkRXh0ZW5zaW9uLCBzdHJpbmc+ID0ge1xyXG5cdCdtZCc6ICdtYXJrZG93bicsXHJcblx0J21keCc6ICdtYXJrZG93bicsXHJcblx0J2NhbnZhcyc6ICdjYW52YXMnLFxyXG5cdCdiYXNlJzogJ2Jhc2VzJyxcclxuXHQna2FuYmFuJzogJ2thbmJhbicsXHJcbn07XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBmaWxlIGV4dGVuc2lvbiBpcyBzdXBwb3J0ZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1N1cHBvcnRlZEV4dGVuc2lvbihleHRlbnNpb246IHN0cmluZyk6IGV4dGVuc2lvbiBpcyBTdXBwb3J0ZWRFeHRlbnNpb24ge1xyXG5cdHJldHVybiBTVVBQT1JURURfRVhURU5TSU9OUy5pbmNsdWRlcyhleHRlbnNpb24gYXMgU3VwcG9ydGVkRXh0ZW5zaW9uKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgZmlsZSBleHRlbnNpb24gZnJvbSBhIHBhdGhcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWxlRXh0ZW5zaW9uKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0Y29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcuJyk7XHJcblx0cmV0dXJuIHBhcnRzLmxlbmd0aCA+IDEgPyAocGFydHNbcGFydHMubGVuZ3RoIC0gMV0gPz8gJycpLnRvTG93ZXJDYXNlKCkgOiAnJztcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgdmlldyB0eXBlIGZvciBhIGZpbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRWaWV3VHlwZUZvckZpbGUoZmlsZTogVEZpbGUpOiBzdHJpbmcge1xyXG5cdGNvbnN0IGV4dCA9IGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCk7XHJcblx0aWYgKGlzU3VwcG9ydGVkRXh0ZW5zaW9uKGV4dCkpIHtcclxuXHRcdHJldHVybiBWSUVXX1RZUEVfTUFQW2V4dF07XHJcblx0fVxyXG5cdHJldHVybiAnbWFya2Rvd24nOyAvLyBEZWZhdWx0IGZhbGxiYWNrXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGZpbGUgaXMgYSBtYXJrZG93bi1saWtlIGZpbGUgKG1kIG9yIG1keClcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc01hcmtkb3duTGlrZShmaWxlOiBURmlsZSk6IGJvb2xlYW4ge1xyXG5cdGNvbnN0IGV4dCA9IGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCk7XHJcblx0cmV0dXJuIGV4dCA9PT0gJ21kJyB8fCBleHQgPT09ICdtZHgnO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBmaWxlIGlzIGFuIE1EWCBmaWxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNNZHhGaWxlKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkgPT09ICdtZHgnO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBmaWxlIGlzIGEgY2FudmFzIGZpbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0NhbnZhc0ZpbGUoZmlsZTogVEZpbGUpOiBib29sZWFuIHtcclxuXHRyZXR1cm4gZmlsZS5leHRlbnNpb24udG9Mb3dlckNhc2UoKSA9PT0gJ2NhbnZhcyc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGZpbGUgaXMgYSBiYXNlIGZpbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0Jhc2VGaWxlKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkgPT09ICdiYXNlJztcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBhIGZpbGUgYnkgcGF0aCwgdHJ5aW5nIHdpdGggYW5kIHdpdGhvdXQgZXh0ZW5zaW9uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZUJ5UGF0aChhcHA6IEFwcCwgcGF0aDogc3RyaW5nKTogVEZpbGUgfCBudWxsIHtcclxuXHQvLyBUcnkgZXhhY3QgcGF0aCBmaXJzdFxyXG5cdGNvbnN0IGV4YWN0TWF0Y2ggPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xyXG5cdGlmIChleGFjdE1hdGNoIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdHJldHVybiBleGFjdE1hdGNoO1xyXG5cdH1cclxuXHJcblx0Ly8gVHJ5IHVzaW5nIG1ldGFkYXRhQ2FjaGUgZm9yIGZ1enp5IG1hdGNoaW5nXHJcblx0Y29uc3QgZmlsZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHBhdGgsICcvJyk7XHJcblx0cmV0dXJuIGZpbGU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUcmltIHRoZSBmaWxlIGV4dGVuc2lvbiBmcm9tIGEgcGF0aCBmb3IgY29tcGFyaXNvblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHRyaW1GaWxlRXh0ZW5zaW9uKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0Y29uc3QgbGFzdERvdCA9IHBhdGgubGFzdEluZGV4T2YoJy4nKTtcclxuXHRpZiAobGFzdERvdCA+IDApIHtcclxuXHRcdGNvbnN0IGV4dCA9IHBhdGguc2xpY2UobGFzdERvdCArIDEpLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRpZiAoU1VQUE9SVEVEX0VYVEVOU0lPTlMuaW5jbHVkZXMoZXh0IGFzIFN1cHBvcnRlZEV4dGVuc2lvbikpIHtcclxuXHRcdFx0cmV0dXJuIHBhdGguc2xpY2UoMCwgbGFzdERvdCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBwYXRoO1xyXG59XHJcblxyXG4vKipcclxuICogQ29tcGFyZSB0d28gcGF0aHMsIGlnbm9yaW5nIGNhc2UgYW5kIGV4dGVuc2lvbiBkaWZmZXJlbmNlc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHBhdGhzRXF1YWwocGF0aDE6IHN0cmluZywgcGF0aDI6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdGNvbnN0IG5vcm0xID0gdHJpbUZpbGVFeHRlbnNpb24ocGF0aDEpLnRvTG93ZXJDYXNlKCk7XHJcblx0Y29uc3Qgbm9ybTIgPSB0cmltRmlsZUV4dGVuc2lvbihwYXRoMikudG9Mb3dlckNhc2UoKTtcclxuXHRyZXR1cm4gbm9ybTEgPT09IG5vcm0yO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBsZWFmIGlzIHNob3dpbmcgYSBzcGVjaWZpYyBmaWxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbGVhZkhhc0ZpbGUobGVhZjogV29ya3NwYWNlTGVhZiwgZmlsZVBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdGNvbnN0IHN0YXRlID0gbGVhZi52aWV3Py5nZXRTdGF0ZT8uKCk7XHJcblx0Y29uc3QgbGVhZkZpbGUgPSBzdGF0ZT8uZmlsZSBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcblx0XHJcblx0aWYgKCFsZWFmRmlsZSkgcmV0dXJuIGZhbHNlO1xyXG5cdFxyXG5cdHJldHVybiBwYXRoc0VxdWFsKGxlYWZGaWxlLCBmaWxlUGF0aCk7XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBIb21lIEJhc2UgVHlwZSBSZXNvbHV0aW9uIFV0aWxpdGllc1xyXG4gKiBSZXNvbHZlcyBob21lIGJhc2UgcGF0aHMgYmFzZWQgb24gdHlwZSAoRmlsZSwgV29ya3NwYWNlLCBSYW5kb20sIGV0Yy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBURmlsZSwgVEZvbGRlciwgbW9tZW50LCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEhvbWVCYXNlVHlwZSB9IGZyb20gJy4uL3NldHRpbmdzJztcclxuaW1wb3J0IHR5cGUgSG9tZUJhc2VQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7XHJcblx0Y3JlYXRlRGFpbHlOb3RlLCBnZXREYWlseU5vdGUsIGdldEFsbERhaWx5Tm90ZXMsXHJcblx0Y3JlYXRlV2Vla2x5Tm90ZSwgZ2V0V2Vla2x5Tm90ZSwgZ2V0QWxsV2Vla2x5Tm90ZXMsXHJcblx0Y3JlYXRlTW9udGhseU5vdGUsIGdldE1vbnRobHlOb3RlLCBnZXRBbGxNb250aGx5Tm90ZXMsXHJcblx0Y3JlYXRlUXVhcnRlcmx5Tm90ZSwgZ2V0UXVhcnRlcmx5Tm90ZSwgZ2V0QWxsUXVhcnRlcmx5Tm90ZXMsXHJcblx0Y3JlYXRlWWVhcmx5Tm90ZSwgZ2V0WWVhcmx5Tm90ZSwgZ2V0QWxsWWVhcmx5Tm90ZXMsXHJcbn0gZnJvbSAnb2JzaWRpYW4tZGFpbHktbm90ZXMtaW50ZXJmYWNlJztcclxuXHJcbi8qKlxyXG4gKiBHZXQgYSByYW5kb20gZmlsZSBmcm9tIHRoZSB2YXVsdFxyXG4gKiBAcGFyYW0gYXBwIFRoZSBPYnNpZGlhbiBhcHAgaW5zdGFuY2VcclxuICogQHBhcmFtIHJvb3QgT3B0aW9uYWwgZm9sZGVyIHBhdGggT1IgZmlsZW5hbWUgcGF0dGVybiAoZS5nLiwgXCJpbmRleC5tZFwiIHRvIGZpbmQgYWxsIGZpbGVzIG5hbWVkIGluZGV4Lm1kKVxyXG4gKi9cclxuZnVuY3Rpb24gcmFuZG9tRmlsZShhcHA6IEFwcCwgcm9vdD86IHN0cmluZyk6IFRGaWxlIHwgbnVsbCB7XHJcblx0bGV0IGZpbGVzOiBURmlsZVtdID0gW107XHJcblx0XHJcblx0aWYgKHJvb3QpIHtcclxuXHRcdC8vIEZpcnN0IHRyeSBhcyBhIGZvbGRlciBwYXRoXHJcblx0XHRjb25zdCByZXNvbHZlZFJvb3QgPSBhcHAudmF1bHQuZ2V0Rm9sZGVyQnlQYXRoKHJvb3QpO1xyXG5cdFx0aWYgKHJlc29sdmVkUm9vdCkge1xyXG5cdFx0XHQvLyBJdCdzIGEgZm9sZGVyIC0gZ2V0IGFsbCBmaWxlcyBpbiBpdFxyXG5cdFx0XHRmaWxlcyA9IGdldEZpbGVzSW5Gb2xkZXIocmVzb2x2ZWRSb290KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIE5vdCBhIGZvbGRlciAtIHRyZWF0IGFzIGZpbGVuYW1lIHBhdHRlcm4gKGUuZy4sIFwiaW5kZXgubWRcIilcclxuXHRcdFx0Ly8gU2VhcmNoIGZvciBhbGwgZmlsZXMgbWF0Y2hpbmcgdGhpcyBuYW1lIGluIHRoZSB2YXVsdFxyXG5cdFx0XHRjb25zdCBhbGxGaWxlcyA9IGFwcC52YXVsdC5nZXRGaWxlcygpO1xyXG5cdFx0XHRjb25zdCBwYXR0ZXJuID0gcm9vdC50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0XHRmaWxlcyA9IGFsbEZpbGVzLmZpbHRlcigoZjogVEZpbGUpID0+IHtcclxuXHRcdFx0XHRjb25zdCBmaWxlTmFtZSA9IGYubmFtZS50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0XHRcdHJldHVybiBmaWxlTmFtZSA9PT0gcGF0dGVybiB8fCBmaWxlTmFtZSA9PT0gcGF0dGVybi5yZXBsYWNlKC9cXC5tZCQvLCAnJyk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSB7XHJcblx0XHQvLyBObyByb290IHNwZWNpZmllZCAtIGdldCBhbGwgZmlsZXNcclxuXHRcdGZpbGVzID0gYXBwLnZhdWx0LmdldEZpbGVzKCk7XHJcblx0fVxyXG5cclxuXHQvLyBGaWx0ZXIgdG8gc3VwcG9ydGVkIGZpbGUgdHlwZXNcclxuXHRmaWxlcyA9IGZpbGVzLmZpbHRlcigoZjogVEZpbGUpID0+IFsnbWQnLCAnY2FudmFzJywgJ2Jhc2UnXS5pbmNsdWRlcyhmLmV4dGVuc2lvbikpO1xyXG5cdFxyXG5cdGlmIChmaWxlcy5sZW5ndGgpIHtcclxuXHRcdGNvbnN0IGluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZmlsZXMubGVuZ3RoKTtcclxuXHRcdHJldHVybiBmaWxlc1tpbmRleF0gfHwgbnVsbDtcclxuXHR9XHJcblxyXG5cdHJldHVybiBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGFsbCBmaWxlcyBpbiBhIGZvbGRlciByZWN1cnNpdmVseVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0RmlsZXNJbkZvbGRlcihmb2xkZXI6IFRGb2xkZXIpOiBURmlsZVtdIHtcclxuXHRsZXQgZmlsZXM6IFRGaWxlW10gPSBbXTtcclxuXHRcclxuXHRmb3IgKGNvbnN0IGl0ZW0gb2YgZm9sZGVyLmNoaWxkcmVuKSB7XHJcblx0XHRpZiAoaXRlbSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRcdGZpbGVzLnB1c2goaXRlbSk7XHJcblx0XHR9IGVsc2UgaWYgKGl0ZW0gaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcblx0XHRcdGZpbGVzLnB1c2goLi4uZ2V0RmlsZXNJbkZvbGRlcihpdGVtKSk7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiBmaWxlcztcclxufVxyXG5cclxuLyoqXHJcbiAqIFRyaW0gZmlsZSBleHRlbnNpb24gZm9yIC5tZCBmaWxlcyAobGlrZSBob21lcGFnZSBwbHVnaW4pXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdHJpbUZpbGUoZmlsZTogVEZpbGUpOiBzdHJpbmcge1xyXG5cdGlmICghZmlsZSkgcmV0dXJuICcnO1xyXG5cdHJldHVybiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJyA/IGZpbGUucGF0aC5zbGljZSgwLCAtMykgOiBmaWxlLnBhdGg7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUGVyaW9kaWMgbm90ZSBpbmZvIChsaWtlIGhvbWVwYWdlIHBsdWdpbilcclxuICovXHJcbmludGVyZmFjZSBQZXJpb2RpY0luZm8ge1xyXG5cdG5vdW46IHN0cmluZztcclxuXHRhZGplY3RpdmU6IHN0cmluZztcclxuXHRjcmVhdGU6IChkYXRlOiBtb21lbnQuTW9tZW50KSA9PiBQcm9taXNlPFRGaWxlPjtcclxuXHRnZXQ6IChkYXRlOiBtb21lbnQuTW9tZW50LCBhbGw6IFJlY29yZDxzdHJpbmcsIFRGaWxlPikgPT4gVEZpbGU7XHJcblx0Z2V0QWxsOiAoKSA9PiBSZWNvcmQ8c3RyaW5nLCBURmlsZT47XHJcbn1cclxuXHJcbmNvbnN0IFBFUklPRElDX0lORk86IFJlY29yZDxIb21lQmFzZVR5cGUsIFBlcmlvZGljSW5mbyB8IG51bGw+ID0ge1xyXG5cdFtIb21lQmFzZVR5cGUuRGFpbHlOb3RlXToge1xyXG5cdFx0bm91bjogJ2RheScsXHJcblx0XHRhZGplY3RpdmU6ICdkYWlseScsXHJcblx0XHRjcmVhdGU6IGNyZWF0ZURhaWx5Tm90ZSxcclxuXHRcdGdldDogZ2V0RGFpbHlOb3RlLFxyXG5cdFx0Z2V0QWxsOiBnZXRBbGxEYWlseU5vdGVzLFxyXG5cdH0sXHJcblx0W0hvbWVCYXNlVHlwZS5XZWVrbHlOb3RlXToge1xyXG5cdFx0bm91bjogJ3dlZWsnLFxyXG5cdFx0YWRqZWN0aXZlOiAnd2Vla2x5JyxcclxuXHRcdGNyZWF0ZTogY3JlYXRlV2Vla2x5Tm90ZSxcclxuXHRcdGdldDogZ2V0V2Vla2x5Tm90ZSxcclxuXHRcdGdldEFsbDogZ2V0QWxsV2Vla2x5Tm90ZXMsXHJcblx0fSxcclxuXHRbSG9tZUJhc2VUeXBlLk1vbnRobHlOb3RlXToge1xyXG5cdFx0bm91bjogJ21vbnRoJyxcclxuXHRcdGFkamVjdGl2ZTogJ21vbnRobHknLFxyXG5cdFx0Y3JlYXRlOiBjcmVhdGVNb250aGx5Tm90ZSxcclxuXHRcdGdldDogZ2V0TW9udGhseU5vdGUsXHJcblx0XHRnZXRBbGw6IGdldEFsbE1vbnRobHlOb3RlcyxcclxuXHR9LFxyXG5cdFtIb21lQmFzZVR5cGUuUXVhcnRlcmx5Tm90ZV06IHtcclxuXHRcdG5vdW46ICdxdWFydGVyJyxcclxuXHRcdGFkamVjdGl2ZTogJ3F1YXJ0ZXJseScsXHJcblx0XHRjcmVhdGU6IGNyZWF0ZVF1YXJ0ZXJseU5vdGUsXHJcblx0XHRnZXQ6IGdldFF1YXJ0ZXJseU5vdGUsXHJcblx0XHRnZXRBbGw6IGdldEFsbFF1YXJ0ZXJseU5vdGVzLFxyXG5cdH0sXHJcblx0W0hvbWVCYXNlVHlwZS5ZZWFybHlOb3RlXToge1xyXG5cdFx0bm91bjogJ3llYXInLFxyXG5cdFx0YWRqZWN0aXZlOiAneWVhcmx5JyxcclxuXHRcdGNyZWF0ZTogY3JlYXRlWWVhcmx5Tm90ZSxcclxuXHRcdGdldDogZ2V0WWVhcmx5Tm90ZSxcclxuXHRcdGdldEFsbDogZ2V0QWxsWWVhcmx5Tm90ZXMsXHJcblx0fSxcclxuXHRbSG9tZUJhc2VUeXBlLkZpbGVdOiBudWxsLFxyXG5cdFtIb21lQmFzZVR5cGUuUmFuZG9tXTogbnVsbCxcclxuXHRbSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlcl06IG51bGwsXHJcblx0W0hvbWVCYXNlVHlwZS5Xb3Jrc3BhY2VdOiBudWxsLFxyXG5cdFtIb21lQmFzZVR5cGUuR3JhcGhdOiBudWxsLFxyXG5cdFtIb21lQmFzZVR5cGUuTm9uZV06IG51bGwsXHJcblx0W0hvbWVCYXNlVHlwZS5Kb3VybmFsXTogbnVsbCxcclxuXHRbSG9tZUJhc2VUeXBlLk5ld05vdGVdOiBudWxsLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdldCBwZXJpb2RpYyBub3RlIHBhdGggKERhaWx5LCBXZWVrbHksIE1vbnRobHksIFllYXJseSlcclxuICogQmFzZWQgb24gaG9tZXBhZ2UgcGx1Z2luIGltcGxlbWVudGF0aW9uXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRQZXJpb2RpY05vdGUoa2luZDogSG9tZUJhc2VUeXBlLCBwbHVnaW46IEhvbWVCYXNlUGx1Z2luKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XHJcblx0aWYgKCF3aW5kb3cubW9tZW50KSB7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcblx0XHJcblx0Y29uc3QgaW5mbyA9IFBFUklPRElDX0lORk9ba2luZF07XHJcblx0aWYgKCFpbmZvKSB7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcblx0XHJcblx0Y29uc3QgZGF0ZSA9IG1vbWVudCgpLnN0YXJ0T2YoaW5mby5ub3VuIGFzIG1vbWVudC51bml0T2ZUaW1lLlN0YXJ0T2YpO1xyXG5cdGNvbnN0IGNvbW11bml0eVBsdWdpbnMgPSBwbHVnaW4uYXBwLnBsdWdpbnM/LnBsdWdpbnMgfHwge307XHJcblx0Y29uc3QgcGVyaW9kaWNOb3Rlc1BsdWdpbiA9IGNvbW11bml0eVBsdWdpbnNbJ3BlcmlvZGljLW5vdGVzJ107XHJcblx0Y29uc3QgaXNMZWdhY3kgPSAhcGVyaW9kaWNOb3Rlc1BsdWdpbiB8fCAocGVyaW9kaWNOb3Rlc1BsdWdpbi5tYW5pZmVzdD8udmVyc2lvbiB8fCAnMCcpLnN0YXJ0c1dpdGgoJzAnKTtcclxuXHRcclxuXHRsZXQgbm90ZTogVEZpbGUgfCBudWxsID0gbnVsbDtcclxuXHRcclxuXHRpZiAoaXNMZWdhY3kpIHtcclxuXHRcdC8vIExlZ2FjeSBQZXJpb2RpYyBOb3RlcyBvciBDb3JlIERhaWx5IE5vdGVzICh2aWEgaW50ZXJmYWNlKVxyXG5cdFx0bGV0IGFsbCA9IGluZm8uZ2V0QWxsKCk7XHJcblx0XHRub3RlID0gaW5mby5nZXQoZGF0ZSwgYWxsKTtcclxuXHRcdFxyXG5cdFx0Ly8gSWYgbm90ZSBkb2Vzbid0IGV4aXN0IGFuZCB3YWl0IGZvciBnaXQgc3luYyBpcyBlbmFibGVkLCB3YWl0IGJlZm9yZSBjcmVhdGluZ1xyXG5cdFx0aWYgKCFub3RlICYmIHBsdWdpbi5zZXR0aW5ncy53YWl0Rm9yR2l0U3luYykge1xyXG5cdFx0XHRuZXcgTm90aWNlKGBIb21lIEJhc2U6IFdhaXRpbmcgZm9yIGdpdCBzeW5jICgke3BsdWdpbi5zZXR0aW5ncy5naXRTeW5jVGltZW91dH1zKS4uLmAsIDUwMDApO1xyXG5cdFx0XHRhd2FpdCBkZWxheShwbHVnaW4uc2V0dGluZ3MuZ2l0U3luY1RpbWVvdXQgKiAxMDAwKTtcclxuXHRcdFx0YWxsID0gaW5mby5nZXRBbGwoKTtcclxuXHRcdFx0bm90ZSA9IGluZm8uZ2V0KGRhdGUsIGFsbCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmICghbm90ZSkge1xyXG5cdFx0XHRub3RlID0gYXdhaXQgaW5mby5jcmVhdGUoZGF0ZSk7XHJcblx0XHR9XHJcblx0fSBlbHNlIHtcclxuXHRcdC8vIHYxLjAuMCsgUGVyaW9kaWMgTm90ZXMgQVBJXHJcblx0XHRwZXJpb2RpY05vdGVzUGx1Z2luLmNhY2hlPy5pbml0aWFsaXplPy4oKTtcclxuXHRcdG5vdGUgPSBwZXJpb2RpY05vdGVzUGx1Z2luLmdldFBlcmlvZGljTm90ZT8uKGluZm8ubm91biBhcyAnZGF5JyB8ICd3ZWVrJyB8ICdtb250aCcgfCAneWVhcicsIGRhdGUpID8/IG51bGw7XHJcblx0XHRcclxuXHRcdC8vIElmIG5vdGUgZG9lc24ndCBleGlzdCBhbmQgd2FpdCBmb3IgZ2l0IHN5bmMgaXMgZW5hYmxlZCwgd2FpdCBiZWZvcmUgY3JlYXRpbmdcclxuXHRcdGlmICghbm90ZSAmJiBwbHVnaW4uc2V0dGluZ3Mud2FpdEZvckdpdFN5bmMpIHtcclxuXHRcdFx0bmV3IE5vdGljZShgSG9tZSBCYXNlOiBXYWl0aW5nIGZvciBnaXQgc3luYyAoJHtwbHVnaW4uc2V0dGluZ3MuZ2l0U3luY1RpbWVvdXR9cykuLi5gLCA1MDAwKTtcclxuXHRcdFx0YXdhaXQgZGVsYXkocGx1Z2luLnNldHRpbmdzLmdpdFN5bmNUaW1lb3V0ICogMTAwMCk7XHJcblx0XHRcdHBlcmlvZGljTm90ZXNQbHVnaW4uY2FjaGU/LmluaXRpYWxpemU/LigpO1xyXG5cdFx0XHRub3RlID0gcGVyaW9kaWNOb3Rlc1BsdWdpbi5nZXRQZXJpb2RpY05vdGU/LihpbmZvLm5vdW4gYXMgJ2RheScgfCAnd2VlaycgfCAnbW9udGgnIHwgJ3llYXInLCBkYXRlKSA/PyBudWxsO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoIW5vdGUpIHtcclxuXHRcdFx0bm90ZSA9IGF3YWl0IHBlcmlvZGljTm90ZXNQbHVnaW4uY3JlYXRlUGVyaW9kaWNOb3RlPy4oaW5mby5ub3VuIGFzICdkYXknIHwgJ3dlZWsnIHwgJ21vbnRoJyB8ICd5ZWFyJywgZGF0ZSkgPz8gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0cmV0dXJuIG5vdGUgPyB0cmltRmlsZShub3RlKSA6IG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgam91cm5hbCBub3RlIHBhdGhcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdldEpvdXJuYWxOb3RlKGpvdXJuYWxOYW1lOiBzdHJpbmcsIHBsdWdpbjogSG9tZUJhc2VQbHVnaW4pOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcclxuXHRjb25zdCBjb21tdW5pdHlQbHVnaW5zID0gcGx1Z2luLmFwcC5wbHVnaW5zPy5wbHVnaW5zIHx8IHt9O1xyXG5cdGNvbnN0IGpvdXJuYWxzID0gY29tbXVuaXR5UGx1Z2luc1snam91cm5hbHMnXTtcclxuXHRpZiAoIWpvdXJuYWxzKSByZXR1cm4gbnVsbDtcclxuXHRcclxuXHR0cnkge1xyXG5cdFx0Y29uc3Qgam91cm5hbCA9IGpvdXJuYWxzLmdldEpvdXJuYWw/Lihqb3VybmFsTmFtZSk7XHJcblx0XHRpZiAoIWpvdXJuYWwpIHJldHVybiBudWxsO1xyXG5cdFx0XHJcblx0XHRjb25zdCBvcmlnQXV0b0NyZWF0ZSA9IGpvdXJuYWwuY29uZmlnPy52YWx1ZT8uYXV0b0NyZWF0ZTtcclxuXHRcdFxyXG5cdFx0Ly8gVHJpZ2dlciBhdXRvLWNyZWF0ZSAoaGFja3kgbG9naWMgZnJvbSBob21lcGFnZSBwbHVnaW4pXHJcblx0XHRqb3VybmFscy5yZXByb2Nlc3NOb3Rlcz8uKCk7XHJcblx0XHRpZiAoam91cm5hbC5jb25maWc/LnZhbHVlKSB7XHJcblx0XHRcdGpvdXJuYWwuY29uZmlnLnZhbHVlLmF1dG9DcmVhdGUgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRhd2FpdCBqb3VybmFsLmF1dG9DcmVhdGU/LigpO1xyXG5cdFx0XHJcblx0XHRpZiAoam91cm5hbC5jb25maWc/LnZhbHVlKSB7XHJcblx0XHRcdGpvdXJuYWwuY29uZmlnLnZhbHVlLmF1dG9DcmVhdGUgPSBvcmlnQXV0b0NyZWF0ZTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Y29uc3QgdG9kYXkgPSBtb21lbnQoKS5sb2NhbGUoJ2N1c3RvbS1qb3VybmFsLWxvY2FsZScpLnN0YXJ0T2YoJ2RheScpO1xyXG5cdFx0XHJcblx0XHQvLyBJZiBub3RlIGRvZXNuJ3QgZXhpc3QgYW5kIHdhaXQgZm9yIGdpdCBzeW5jIGlzIGVuYWJsZWQsIHdhaXRcclxuXHRcdGxldCBub3RlID0gam91cm5hbC5nZXQ/Lih0b2RheSk7XHJcblx0XHRpZiAoIW5vdGUgJiYgcGx1Z2luLnNldHRpbmdzLndhaXRGb3JHaXRTeW5jKSB7XHJcblx0XHRcdG5ldyBOb3RpY2UoYEhvbWUgQmFzZTogV2FpdGluZyBmb3IgZ2l0IHN5bmMgKCR7cGx1Z2luLnNldHRpbmdzLmdpdFN5bmNUaW1lb3V0fXMpLi4uYCwgNTAwMCk7XHJcblx0XHRcdGF3YWl0IGRlbGF5KHBsdWdpbi5zZXR0aW5ncy5naXRTeW5jVGltZW91dCAqIDEwMDApO1xyXG5cdFx0XHRqb3VybmFscy5yZXByb2Nlc3NOb3Rlcz8uKCk7XHJcblx0XHRcdG5vdGUgPSBqb3VybmFsLmdldD8uKHRvZGF5KTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKCFub3RlKSByZXR1cm4gbnVsbDtcclxuXHRcdFxyXG5cdFx0Y29uc3QgcGF0aCA9IGpvdXJuYWwuZ2V0Tm90ZVBhdGg/Lihub3RlKTtcclxuXHRcdHJldHVybiBwYXRoID8gcGF0aC5yZXBsYWNlKC9cXC5tZCQvLCAnJykgOiBudWxsO1xyXG5cdH0gY2F0Y2gge1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogQ29tcHV0ZSB0aGUgYWN0dWFsIGZpbGUgcGF0aCBiYXNlZCBvbiBob21lIGJhc2UgdHlwZSBzeW5jaHJvbm91c2x5XHJcbiAqIFVzZWQgZm9yIGNvbXBhcmlzb24gYW5kIFVJIHVwZGF0ZXMgd2hlcmUgYXN5bmMgaXMgbm90IHBvc3NpYmxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZVBhdGhTeW5jKFxyXG5cdHR5cGU6IEhvbWVCYXNlVHlwZSxcclxuXHR2YWx1ZTogc3RyaW5nLFxyXG5cdGFwcDogQXBwXHJcbik6IHN0cmluZyB8IG51bGwge1xyXG5cdHN3aXRjaCAodHlwZSkge1xyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuRmlsZTpcclxuXHRcdFx0cmV0dXJuIHZhbHVlIHx8IG51bGw7XHJcblx0XHRcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLkRhaWx5Tm90ZTpcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLldlZWtseU5vdGU6XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5Nb250aGx5Tm90ZTpcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLlF1YXJ0ZXJseU5vdGU6XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5ZZWFybHlOb3RlOiB7XHJcblx0XHRcdGNvbnN0IGluZm8gPSBQRVJJT0RJQ19JTkZPW3R5cGVdO1xyXG5cdFx0XHRpZiAoaW5mbykge1xyXG5cdFx0XHRcdGNvbnN0IGRhdGUgPSBtb21lbnQoKS5zdGFydE9mKGluZm8ubm91biBhcyBtb21lbnQudW5pdE9mVGltZS5TdGFydE9mKTtcclxuXHRcdFx0XHRjb25zdCBhbGwgPSBpbmZvLmdldEFsbCgpO1xyXG5cdFx0XHRcdGNvbnN0IG5vdGUgPSBpbmZvLmdldChkYXRlLCBhbGwpO1xyXG5cdFx0XHRcdHJldHVybiBub3RlID8gdHJpbUZpbGUobm90ZSkgOiBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdGRlZmF1bHQ6XHJcblx0XHRcdC8vIEZvciBSYW5kb20sIEpvdXJuYWwsIE5ld05vdGUsIGV0Yy4sIHdlIGNhbid0IHJlbGlhYmx5IHJlc29sdmUgc3luY2hyb25vdXNseVxyXG5cdFx0XHQvLyBidXQgd2UgbWlnaHQgcmV0dXJuIHRoZSB2YWx1ZSBpZiBpdCdzIGEgcGF0aFxyXG5cdFx0XHRyZXR1cm4gKHR5cGUgPT09IEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXIgfHwgdHlwZSA9PT0gSG9tZUJhc2VUeXBlLk5ld05vdGUpID8gbnVsbCA6ICh2YWx1ZSB8fCBudWxsKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb21wdXRlIHRoZSBhY3R1YWwgZmlsZSBwYXRoIGJhc2VkIG9uIGhvbWUgYmFzZSB0eXBlXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tcHV0ZUhvbWVCYXNlUGF0aChcclxuXHR0eXBlOiBIb21lQmFzZVR5cGUsXHJcblx0dmFsdWU6IHN0cmluZyxcclxuXHRwbHVnaW46IEhvbWVCYXNlUGx1Z2luXHJcbik6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xyXG5cdHN3aXRjaCAodHlwZSkge1xyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuRmlsZTpcclxuXHRcdFx0cmV0dXJuIHZhbHVlIHx8IG51bGw7XHJcblx0XHRcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLlJhbmRvbToge1xyXG5cdFx0XHRjb25zdCBmaWxlID0gcmFuZG9tRmlsZShwbHVnaW4uYXBwKTtcclxuXHRcdFx0cmV0dXJuIGZpbGUgPyB0cmltRmlsZShmaWxlKSA6IG51bGw7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlcjoge1xyXG5cdFx0XHRjb25zdCBmaWxlID0gcmFuZG9tRmlsZShwbHVnaW4uYXBwLCB2YWx1ZSk7XHJcblx0XHRcdHJldHVybiBmaWxlID8gdHJpbUZpbGUoZmlsZSkgOiBudWxsO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5EYWlseU5vdGU6XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5XZWVrbHlOb3RlOlxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuTW9udGhseU5vdGU6XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5RdWFydGVybHlOb3RlOlxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuWWVhcmx5Tm90ZTpcclxuXHRcdFx0cmV0dXJuIGF3YWl0IGdldFBlcmlvZGljTm90ZSh0eXBlLCBwbHVnaW4pO1xyXG5cdFx0XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5Kb3VybmFsOlxyXG5cdFx0XHRyZXR1cm4gYXdhaXQgZ2V0Sm91cm5hbE5vdGUodmFsdWUsIHBsdWdpbik7XHJcblx0XHRcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLk5ld05vdGU6IHtcclxuXHRcdFx0Y29uc3QgZmlsZU1hbmFnZXIgPSBwbHVnaW4uYXBwLmZpbGVNYW5hZ2VyO1xyXG5cdFx0XHRpZiAoZmlsZU1hbmFnZXIuY3JlYXRlTmV3RmlsZSkge1xyXG5cdFx0XHRcdGNvbnN0IGZpbGUgPSBhd2FpdCBmaWxlTWFuYWdlci5jcmVhdGVOZXdGaWxlKHBsdWdpbi5hcHAudmF1bHQuZ2V0Um9vdCgpLCB2YWx1ZSB8fCAnVW50aXRsZWQnKTtcclxuXHRcdFx0XHRyZXR1cm4gZmlsZSA/IHRyaW1GaWxlKGZpbGUpIDogbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuV29ya3NwYWNlOlxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuR3JhcGg6XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5Ob25lOlxyXG5cdFx0XHQvLyBUaGVzZSBkb24ndCByZXNvbHZlIHRvIGEgZmlsZSBwYXRoXHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0XHJcblx0XHRkZWZhdWx0OlxyXG5cdFx0XHRyZXR1cm4gdmFsdWUgfHwgbnVsbDtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGhvbWUgYmFzZSB0eXBlIHJlcXVpcmVzIGEgZmlsZSB0byBiZSBvcGVuZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZXF1aXJlc0ZpbGUodHlwZTogSG9tZUJhc2VUeXBlKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIHR5cGUgIT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UgJiYgXHJcblx0ICAgICAgIHR5cGUgIT09IEhvbWVCYXNlVHlwZS5HcmFwaCAmJiBcclxuXHQgICAgICAgdHlwZSAhPT0gSG9tZUJhc2VUeXBlLk5vbmU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIZWxwZXIgdG8gd2FpdCBmb3IgYSBzcGVjaWZpZWQgZHVyYXRpb25cclxuICovXHJcbmZ1bmN0aW9uIGRlbGF5KG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRyZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XHJcbn1cclxuXHJcbiIsICIvKipcclxuICogTmV3IFRhYiBTZXJ2aWNlXHJcbiAqIEhhbmRsZXMgc3RhcnR1cCBkZXRlY3Rpb24gYW5kIG5ldyB0YWIgcmVwbGFjZW1lbnRcclxuICogSW5zcGlyZWQgYnkgb2JzaWRpYW4taG9tZXBhZ2UgYW5kIG5ldy10YWItZGVmYXVsdC1wYWdlXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBXb3Jrc3BhY2VMZWFmLCBWaWV3LCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHR5cGUgSG9tZUJhc2VQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IEhvbWVCYXNlVHlwZSB9IGZyb20gJy4uL3NldHRpbmdzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBOZXdUYWJTZXJ2aWNlIHtcclxuXHRwcml2YXRlIGFwcDogQXBwO1xyXG5cdHByaXZhdGUgcGx1Z2luOiBIb21lQmFzZVBsdWdpbjtcclxuXHRwcml2YXRlIGV4aXN0aW5nTGVhdmVzOiBXZWFrU2V0PFdvcmtzcGFjZUxlYWY+ID0gbmV3IFdlYWtTZXQoKTtcclxuXHRwcml2YXRlIGlzU3RhcnR1cDogYm9vbGVhbiA9IHRydWU7XHJcblx0cHJpdmF0ZSBzdGFydHVwQ29tcGxldGVkOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogSG9tZUJhc2VQbHVnaW4pIHtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdFx0dGhpcy5hcHAgPSBwbHVnaW4uYXBwO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVHJhY2sgYWxsIGV4aXN0aW5nIGxlYXZlcyAoZm9yIG5ldyB0YWIgZGV0ZWN0aW9uKVxyXG5cdCAqIFRoaXMgbXVzdCBiZSBjYWxsZWQgZXZlbiB3aGVuIHN0YXJ0dXAgaXMgaGFuZGxlZCBlbHNld2hlcmVcclxuXHQgKi9cclxuXHR0cmFja0V4aXN0aW5nTGVhdmVzKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0dGhpcy5leGlzdGluZ0xlYXZlcy5hZGQobGVhZik7XHJcblx0XHR9KTtcclxuXHRcdC8vIE1hcmsgc3RhcnR1cCBhcyBjb21wbGV0ZWQgc28gbGF5b3V0IGNoYW5nZSBoYW5kbGVyIHdvcmtzXHJcblx0XHR0aGlzLnN0YXJ0dXBDb21wbGV0ZWQgPSB0cnVlO1xyXG5cdFx0dGhpcy5pc1N0YXJ0dXAgPSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEluaXRpYWxpemUgdGhlIHNlcnZpY2UgLSBjYWxsZWQgd2hlbiBsYXlvdXQgaXMgcmVhZHlcclxuXHQgKi9cclxuXHRpbml0aWFsaXplKCk6IHZvaWQge1xyXG5cdFx0Ly8gVHJhY2sgYWxsIGV4aXN0aW5nIGxlYXZlc1xyXG5cdFx0dGhpcy50cmFja0V4aXN0aW5nTGVhdmVzKCk7XHJcblxyXG5cdFx0Ly8gSGFuZGxlIHN0YXJ0dXBcclxuXHRcdHZvaWQgdGhpcy5oYW5kbGVTdGFydHVwKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGUgYXBwIHN0YXJ0dXAgLSBvcGVuIGhvbWUgYmFzZSBpZiBuZWVkZWRcclxuXHQgKiBPbmx5IGNhbGxlZCBvbiBhY3R1YWwgYXBwIHN0YXJ0dXAsIG5vdCBwbHVnaW4gcmVsb2Fkc1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgXHRhc3luYyBoYW5kbGVTdGFydHVwKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcclxuXHJcblx0XHQvLyBDaGVjayBpZiB3ZSBzaG91bGQgc2tpcCAob3Blbk9uU3RhcnR1cCBpcyBmYWxzZSwgb3Igbm8gaG9tZSBiYXNlIGNvbmZpZ3VyZWQpXHJcblx0XHRjb25zdCBob21lQmFzZVNldHRpbmdzID0gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xyXG5cdFx0aWYgKCFzZXR0aW5ncy5vcGVuT25TdGFydHVwIHx8ICghaG9tZUJhc2VTZXR0aW5ncy52YWx1ZSAmJiBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSkge1xyXG5cdFx0XHR0aGlzLnN0YXJ0dXBDb21wbGV0ZWQgPSB0cnVlO1xyXG5cdFx0XHR0aGlzLmlzU3RhcnR1cCA9IGZhbHNlO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgZm9yIFVSTCBwYXJhbXMgKGxpa2Ugb2JzaWRpYW46Ly9vcGVuIGxpbmtzKSAtIGlmIHByZXNlbnQsIHNraXAgZXZlcnl0aGluZ1xyXG5cdFx0aWYgKGF3YWl0IHRoaXMuaGFzVXJsUGFyYW1zKCkpIHtcclxuXHRcdFx0dGhpcy5zdGFydHVwQ29tcGxldGVkID0gdHJ1ZTtcclxuXHRcdFx0dGhpcy5pc1N0YXJ0dXAgPSBmYWxzZTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFdhaXQgYSBiaXQgZm9yIE9ic2lkaWFuIHRvIGZpbmlzaCByZXN0b3JpbmcgdGhlIHdvcmtzcGFjZVxyXG5cdFx0Ly8gVGhpcyBlbnN1cmVzIGFsbCB0YWJzIGFyZSBsb2FkZWQgYmVmb3JlIHdlIHRyeSB0byBjbG9zZSB0aGVtXHJcblx0XHQvLyBOZWVkIGxvbmdlciBkZWxheSB0byBlbnN1cmUgd29ya3NwYWNlIGlzIGZ1bGx5IHJlc3RvcmVkXHJcblx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwKSk7XHJcblxyXG5cdFx0Ly8gSWYgb3Blbk1vZGUgaXMgcmVwbGFjZS1hbGwsIGNsb3NlIEFMTCB0YWJzIGZpcnN0LCB0aGVuIG9wZW4gaG9tZSBiYXNlXHJcblx0XHQvLyBUaGlzIHNob3VsZCBPTkxZIGhhcHBlbiBvbiBzdGFydHVwLCBub3Qgd2hlbiBtYW51YWxseSBvcGVuaW5nXHJcblx0XHQvLyBXZSBjbG9zZSBldmVyeXRoaW5nIGZpcnN0LCB0aGVuIG9wZW4gZnJlc2ggLSBkb24ndCB0cnkgdG8gZmluZCB0YWJzIHRvIGtlZXBcclxuXHRcdC8vIEV4Y2VwdGlvbjogSWYgaGlkZVJlbGVhc2VOb3RlcyBpcyBPRkYsIHByZXNlcnZlIHJlbGVhc2Ugbm90ZXMgdGFiXHJcblx0XHRpZiAoc2V0dGluZ3Mub3Blbk1vZGUgPT09ICdyZXBsYWNlLWFsbCcpIHtcclxuXHRcdFx0Ly8gSWYgaGlkZVJlbGVhc2VOb3RlcyBpcyBPRkYsIHdlIHNob3VsZCBwcmVzZXJ2ZSByZWxlYXNlIG5vdGVzIHRhYlxyXG5cdFx0XHRsZXQgZXhjZXB0TGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xyXG5cdFx0XHRpZiAoIXNldHRpbmdzLmhpZGVSZWxlYXNlTm90ZXMpIHtcclxuXHRcdFx0XHQvLyBUcnkgdG8gZmluZCByZWxlYXNlIG5vdGVzIHRhYlxyXG5cdFx0XHRcdGNvbnN0IGFsbExlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ21hcmtkb3duJyk7XHJcblx0XHRcdFx0Zm9yIChjb25zdCBsZWFmIG9mIGFsbExlYXZlcykge1xyXG5cdFx0XHRcdFx0Y29uc3QgdmlldyA9IGxlYWYudmlldztcclxuXHRcdFx0XHRcdCBcclxuXHRcdFx0XHRcdGNvbnN0IG1hcmtkb3duVmlldyA9IHZpZXcgYXMgdW5rbm93biBhcyB7IGZpbGU/OiBURmlsZTsgY29udGFpbmVyRWw/OiBIVE1MRWxlbWVudCB9O1xyXG5cdFx0XHRcdFx0aWYgKG1hcmtkb3duVmlldy5maWxlKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGUgPSBtYXJrZG93blZpZXcuZmlsZTtcclxuXHRcdFx0XHRcdC8vIFJlbGVhc2Ugbm90ZXMgYXJlIHR5cGljYWxseSBpbiBjb25maWcgZm9sZGVyIG9yIGhhdmUgc3BlY2lmaWMgbmFtaW5nXHJcblx0XHRcdFx0XHQvLyBDaGVjayBpZiBpdCdzIGEgcmVsZWFzZSBub3RlcyB0YWIgYnkgbG9va2luZyBhdCB0aGUgZmlsZSBwYXRoXHJcblx0XHRcdFx0XHRjb25zdCBjb25maWdEaXIgPSB0aGlzLmFwcC52YXVsdC5jb25maWdEaXI7XHJcblx0XHRcdFx0XHRpZiAoZmlsZS5wYXRoLmluY2x1ZGVzKCdyZWxlYXNlJykgfHwgZmlsZS5wYXRoLmluY2x1ZGVzKGNvbmZpZ0RpcikpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBpdCdzIGFjdHVhbGx5IGEgcmVsZWFzZSBub3RlcyB2aWV3XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29udGFpbmVyID0gbWFya2Rvd25WaWV3LmNvbnRhaW5lckVsO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChjb250YWluZXIgJiYgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5yZWxlYXNlLW5vdGVzJykpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGV4Y2VwdExlYWYgPSBsZWFmO1xyXG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDbG9zZSBBTEwgdGFicyAtIGRvbid0IHRyeSB0byBrZWVwIGFueSwganVzdCBjbG9zZSBldmVyeXRoaW5nIChleGNlcHQgcmVsZWFzZSBub3RlcyBpZiBhcHBsaWNhYmxlKVxyXG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5jbG9zZUFsbExlYXZlc0V4Y2VwdChleGNlcHRMZWFmKTtcclxuXHRcdFx0Ly8gV2FpdCBsb25nZXIgdG8gZW5zdXJlIGFsbCBkZXRhY2htZW50cyBhcmUgcHJvY2Vzc2VkXHJcblx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAyMDApKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBPbiBzdGFydHVwLCB1c2UgZ2hvc3QgdGFiIGlmIHN0aWNreSBpY29uIGlzIGVuYWJsZWQsIG90aGVyd2lzZSB1c2Ugbm9ybWFsIG9wZW5Ib21lQmFzZVxyXG5cdFx0aWYgKHNldHRpbmdzLnNob3dTdGlja3lIb21lSWNvbikge1xyXG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5vcGVuSG9tZUJhc2VJbkdob3N0VGFiKHtcclxuXHRcdFx0XHRydW5Db21tYW5kOiB0cnVlLFxyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIEFsd2F5cyBjYWxsIG9wZW5Ib21lQmFzZSAtIGl0IHdpbGwgb3BlbiBob21lIGJhc2UgaWYgbm90IGFscmVhZHkgb3BlblxyXG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5vcGVuSG9tZUJhc2Uoe1xyXG5cdFx0XHRcdHJlcGxhY2VBY3RpdmVMZWFmOiBmYWxzZSxcclxuXHRcdFx0XHRydW5Db21tYW5kOiB0cnVlLFxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnN0YXJ0dXBDb21wbGV0ZWQgPSB0cnVlO1xyXG5cdFx0dGhpcy5pc1N0YXJ0dXAgPSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIHRoZSBzZXR0aW5ncyBtb2RhbCBpcyBjdXJyZW50bHkgb3BlblxyXG5cdCAqL1xyXG5cdHByaXZhdGUgaXNTZXR0aW5nc01vZGFsT3BlbigpOiBib29sZWFuIHtcclxuXHRcdC8vIENoZWNrIGZvciBzZXR0aW5ncyBtb2RhbCBieSBsb29raW5nIGZvciB0aGUgbW9kYWwgY29udGFpbmVyXHJcblx0XHQvLyBUcnkgbXVsdGlwbGUgc2VsZWN0b3JzIHRvIGJlIG1vcmUgcm9idXN0XHJcblx0XHRjb25zdCBzZXR0aW5nc01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRhaW5lci5tb2Qtc2V0dGluZ3MnKSB8fFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC5tb2Qtc2V0dGluZ3MnKSB8fFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52ZXJ0aWNhbC10YWItY29udGVudCcpO1xyXG5cdFx0XHJcblx0XHQvLyBBbHNvIGNoZWNrIGlmIGFueSBtb2RhbCBpcyBvcGVuIGFuZCBjb250YWlucyBzZXR0aW5ncyBjb250ZW50XHJcblx0XHRpZiAoIXNldHRpbmdzTW9kYWwpIHtcclxuXHRcdFx0Y29uc3QgYWxsTW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsLWNvbnRhaW5lcicpO1xyXG5cdFx0XHRmb3IgKGNvbnN0IG1vZGFsIG9mIEFycmF5LmZyb20oYWxsTW9kYWxzKSkge1xyXG5cdFx0XHRcdGlmIChtb2RhbC5xdWVyeVNlbGVjdG9yKCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcclxuXHRcdFx0XHQgICAgbW9kYWwucXVlcnlTZWxlY3RvcignLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdCAgICBtb2RhbC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZC1zZXR0aW5ncycpKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHNldHRpbmdzTW9kYWwgIT09IG51bGw7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBmb3IgVVJMIHBhcmFtZXRlcnMgdGhhdCBpbmRpY2F0ZSBPYnNpZGlhbiB3YXMgb3BlbmVkIHZpYSBhIGxpbmtcclxuXHQgKiBCYXNlZCBvbiBvYnNpZGlhbi1ob21lcGFnZSBpbXBsZW1lbnRhdGlvblxyXG5cdCAqL1xyXG5cdHByaXZhdGUgYXN5bmMgaGFzVXJsUGFyYW1zKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0Ly8gQ2hlY2sgZm9yIG1vYmlsZSBVUkwgcGFyYW1zIChDYXBhY2l0b3IgQVBJKVxyXG5cdFx0Y29uc3Qgd2luZG93QW55ID0gd2luZG93IGFzIHVua25vd24gYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XHJcblx0XHRcclxuXHRcdGNvbnN0IGNhcGFjaXRvciA9IHdpbmRvd0FueS5DYXBhY2l0b3IgYXMgeyBQbHVnaW5zPzogeyBBcHA/OiB7IGdldExhdW5jaFVybDogKCkgPT4gUHJvbWlzZTx7IHVybD86IHN0cmluZyB9IHwgbnVsbD4gfSB9IH0gfCB1bmRlZmluZWQ7XHJcblx0XHRpZiAoY2FwYWNpdG9yPy5QbHVnaW5zPy5BcHApIHtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRjb25zdCBsYXVuY2hVcmwgPSBhd2FpdCBjYXBhY2l0b3IuUGx1Z2lucy5BcHAuZ2V0TGF1bmNoVXJsKCk7XHJcblx0XHRcdFx0aWYgKGxhdW5jaFVybD8udXJsKSB7XHJcblx0XHRcdFx0XHRjb25zdCB1cmwgPSBuZXcgVVJMKGxhdW5jaFVybC51cmwpO1xyXG5cdFx0XHRcdFx0Y29uc3QgcGFyYW1zID0gQXJyYXkuZnJvbSh1cmwuc2VhcmNoUGFyYW1zLmtleXMoKSk7XHJcblx0XHRcdFx0XHRjb25zdCBhY3Rpb24gPSB1cmwuaG9zdG5hbWU7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmIChbJ29wZW4nLCAnYWR2YW5jZWQtdXJpJ10uaW5jbHVkZXMoYWN0aW9uKSAmJlxyXG5cdFx0XHRcdFx0XHRbJ2ZpbGUnLCAnZmlsZXBhdGgnLCAnd29ya3NwYWNlJ10uc29tZShlID0+IHBhcmFtcy5pbmNsdWRlcyhlKSkpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHQvLyBJZ25vcmUgZXJyb3JzXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBmb3IgZGVza3RvcCBVUkwgcGFyYW1zXHJcblx0XHRjb25zdCBvYnNBY3QgPSB3aW5kb3dBbnkuT0JTX0FDVCBhcyB7IGFjdGlvbj86IHN0cmluZyB9IHwgdW5kZWZpbmVkO1xyXG5cdFx0aWYgKG9ic0FjdCkge1xyXG5cdFx0XHRjb25zdCBwYXJhbXMgPSBPYmplY3Qua2V5cyhvYnNBY3QpO1xyXG5cdFx0XHRjb25zdCBhY3Rpb24gPSBvYnNBY3QuYWN0aW9uO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGFjdGlvbiAmJiBbJ29wZW4nLCAnYWR2YW5jZWQtdXJpJ10uaW5jbHVkZXMoYWN0aW9uKSAmJlxyXG5cdFx0XHRcdFsnZmlsZScsICdmaWxlcGF0aCcsICd3b3Jrc3BhY2UnXS5zb21lKGUgPT4gcGFyYW1zLmluY2x1ZGVzKGUpKSkge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlIGxheW91dCBjaGFuZ2UgZXZlbnQgLSBjaGVjayBmb3IgbmV3IGVtcHR5IHRhYnNcclxuXHQgKiBCYXNlZCBvbiBuZXctdGFiLWRlZmF1bHQtcGFnZSBpbXBsZW1lbnRhdGlvblxyXG5cdCAqL1xyXG5cdGhhbmRsZUxheW91dENoYW5nZSgpOiB2b2lkIHtcclxuXHRcdC8vIFNraXAgZHVyaW5nIHN0YXJ0dXBcclxuXHRcdGlmICh0aGlzLmlzU3RhcnR1cCB8fCAhdGhpcy5zdGFydHVwQ29tcGxldGVkKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBhbGwgbGVhdmVzIGZvciBuZXcgZW1wdHkgb25lc1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0Ly8gU2tpcCBpZiB3ZSd2ZSBhbHJlYWR5IHNlZW4gdGhpcyBsZWFmXHJcblx0XHRcdGlmICh0aGlzLmV4aXN0aW5nTGVhdmVzLmhhcyhsZWFmKSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gTWFyayBhcyBzZWVuIEJFRk9SRSBjaGVja2luZyBpZiBpdCdzIGVtcHR5XHJcblx0XHRcdC8vIFRoaXMgcHJldmVudHMgcHJvY2Vzc2luZyB0aGUgc2FtZSBsZWFmIG11bHRpcGxlIHRpbWVzXHJcblx0XHRcdHRoaXMuZXhpc3RpbmdMZWF2ZXMuYWRkKGxlYWYpO1xyXG5cclxuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBpcyBhbiBlbXB0eSB0YWJcclxuXHRcdFx0aWYgKCF0aGlzLmlzRW1wdHlUYWIobGVhZikpIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgdGhlIG9ubHkgdGFiIChhbGwgdGFicyB3ZXJlIGNsb3NlZClcclxuXHRcdFx0Y29uc3QgaXNPbmx5VGFiID0gdGhpcy5pc09ubHlUYWIobGVhZik7XHJcblxyXG5cdFx0XHQvLyBIYW5kbGUgXCJPcGVuIHdoZW4gYWxsIHRhYnMgYXJlIGNsb3NlZFwiIC0gd29ya3MgaW5kZXBlbmRlbnRseSBvZiByZXBsYWNlTmV3VGFiXHJcblx0XHRcdGlmIChpc09ubHlUYWIgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbldoZW5BbGxUYWJzQ2xvc2VkID09PSB0cnVlKSB7XHJcblx0XHRcdFx0Ly8gT3BlbiBob21lIGJhc2Ugd2hlbiBhbGwgdGFicyBhcmUgY2xvc2VkXHJcblx0XHRcdFx0dm9pZCB0aGlzLnJlcGxhY2VFbXB0eVRhYihsZWFmLCB0cnVlKTsgLy8gUGFzcyB0cnVlIHRvIGluZGljYXRlIHRoaXMgaXMgZm9yIFwiYWxsIHRhYnMgY2xvc2VkXCJcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEhhbmRsZSBcIlJlcGxhY2UgbmV3IHRhYnNcIiAtIG9ubHkgaWYgZW5hYmxlZFxyXG5cdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU5ld1RhYiAhPT0gdHJ1ZSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gRG91YmxlLWNoZWNrIHJlcGxhY2VOZXdUYWIgaXMgc3RpbGwgdHJ1ZSAoaW4gY2FzZSBpdCBjaGFuZ2VkIGR1cmluZyBwcm9jZXNzaW5nKVxyXG5cdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU5ld1RhYiAhPT0gdHJ1ZSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSGFuZGxlIGJhc2VkIG9uIG1vZGVcclxuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm5ld1RhYk1vZGUgPT09ICdvbmx5LXdoZW4tZW1wdHknKSB7XHJcblx0XHRcdFx0Ly8gT25seSByZXBsYWNlIGlmIHRoaXMgaXMgdGhlIG9ubHkgdGFiXHJcblx0XHRcdFx0aWYgKCFpc09ubHlUYWIpIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFJlcGxhY2UgdGhlIGVtcHR5IHRhYiB3aXRoIGhvbWUgYmFzZSAoZm9yIG5ldyB0YWIgcmVwbGFjZW1lbnQpXHJcblx0XHRcdHZvaWQgdGhpcy5yZXBsYWNlRW1wdHlUYWIobGVhZiwgZmFsc2UpOyAvLyBQYXNzIGZhbHNlIHRvIGluZGljYXRlIHRoaXMgaXMgZm9yIFwibmV3IHRhYiByZXBsYWNlbWVudFwiXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIGEgbGVhZiBpcyBhbiBlbXB0eSB0YWJcclxuXHQgKiBJTVBPUlRBTlQ6IE9ubHkgcmV0dXJucyB0cnVlIGlmIHRoZSBsZWFmIGlzIHRydWx5IGVtcHR5IChubyBmaWxlIG9wZW5lZClcclxuXHQgKiBJZiBhIGZpbGUgaXMgYWxyZWFkeSBvcGVuZWQgaW4gdGhlIGxlYWYsIGl0J3Mgbm90IGVtcHR5IGFuZCBzaG91bGQgTk9UIGJlIHJlcGxhY2VkXHJcblx0ICovXHJcblx0cHJpdmF0ZSBpc0VtcHR5VGFiKGxlYWY6IFdvcmtzcGFjZUxlYWYpOiBib29sZWFuIHtcclxuXHRcdGlmICghbGVhZi52aWV3KSByZXR1cm4gdHJ1ZTtcclxuXHRcdFxyXG5cdFx0Ly8gQ2hlY2sgaWYgdmlldyB0eXBlIGlzIGVtcHR5XHJcblx0XHRpZiAobGVhZi52aWV3LmdldFZpZXdUeXBlKCkgIT09ICdlbXB0eScpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBEb3VibGUtY2hlY2s6IGlmIHRoZSB2aWV3IGhhcyBhIHN0YXRlIHdpdGggYSBmaWxlLCBpdCdzIG5vdCBlbXB0eVxyXG5cdFx0Ly8gVGhpcyBwcmV2ZW50cyByZXBsYWNpbmcgdGFicyB0aGF0IHdlcmUganVzdCBvcGVuZWQgd2l0aCBmaWxlcyBmcm9tIGV4cGxvcmVyXHJcblx0XHRjb25zdCB2aWV3U3RhdGUgPSBsZWFmLmdldFZpZXdTdGF0ZSgpO1xyXG5cdFx0aWYgKHZpZXdTdGF0ZSAmJiAodmlld1N0YXRlIGFzIHsgZmlsZT86IHN0cmluZyB9KS5maWxlKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiB0aGlzIGlzIHRoZSBvbmx5IHRhYiBpbiB0aGUgbWFpbiB3b3Jrc3BhY2VcclxuXHQgKiBPbmx5IGNvdW50cyByb290IGxlYXZlcyAobWFpbiB3b3Jrc3BhY2UgdGFicyksIG5vdCBzaWRlYmFyIHRhYnNcclxuXHQgKiBCYXNlZCBvbiBvYnNpZGlhbi1kaXNhYmxlLXRhYnMgcGF0dGVybiB1c2luZyBpdGVyYXRlUm9vdExlYXZlc1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgaXNPbmx5VGFiKGxlYWY6IFdvcmtzcGFjZUxlYWYpOiBib29sZWFuIHtcclxuXHRcdGxldCB0YWJDb3VudCA9IDA7XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZVJvb3RMZWF2ZXMoKGwpID0+IHtcclxuXHRcdFx0dGFiQ291bnQrKztcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRjb25zdCByZXN1bHQgPSB0YWJDb3VudCA9PT0gMTtcclxuXHRcdGNvbnNvbGUuZGVidWcoJ1tIb21lIEJhc2VdIGlzT25seVRhYjonLCB7XHJcblx0XHRcdGxlYWY6IGxlYWYsXHJcblx0XHRcdHRhYkNvdW50OiB0YWJDb3VudCxcclxuXHRcdFx0aXNPbmx5VGFiOiByZXN1bHRcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gcmVzdWx0O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVwbGFjZSBhbiBlbXB0eSB0YWIgd2l0aCB0aGUgaG9tZSBiYXNlIG9yIG5ldyB0YWIgZmlsZVxyXG5cdCAqIEBwYXJhbSBsZWFmIFRoZSBsZWFmIHRvIHJlcGxhY2VcclxuXHQgKiBAcGFyYW0gaXNBbGxUYWJzQ2xvc2VkIFdoZXRoZXIgdGhpcyBpcyB0cmlnZ2VyZWQgYnkgXCJhbGwgdGFicyBjbG9zZWRcIiAodHJ1ZSkgb3IgXCJuZXcgdGFiIHJlcGxhY2VtZW50XCIgKGZhbHNlKVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgYXN5bmMgcmVwbGFjZUVtcHR5VGFiKGxlYWY6IFdvcmtzcGFjZUxlYWYsIGlzQWxsVGFic0Nsb3NlZDogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHQvLyBJZiB0aGlzIGlzIGZvciBuZXcgdGFiIHJlcGxhY2VtZW50IChub3QgYWxsIHRhYnMgY2xvc2VkKSwgY2hlY2sgcmVwbGFjZU5ld1RhYlxyXG5cdFx0aWYgKCFpc0FsbFRhYnNDbG9zZWQpIHtcclxuXHRcdFx0Ly8gQ1JJVElDQUw6IENoZWNrIHJlcGxhY2VOZXdUYWIgb25lIG1vcmUgdGltZSBiZWZvcmUgYWN0dWFsbHkgcmVwbGFjaW5nXHJcblx0XHRcdC8vIFRoaXMgcHJldmVudHMgcmFjZSBjb25kaXRpb25zIHdoZXJlIHRoZSBzZXR0aW5nIGNoYW5nZWQgYmV0d2VlbiBjaGVja3NcclxuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGxhY2VOZXdUYWIgIT09IHRydWUpIHtcclxuXHRcdFx0XHRjb25zb2xlLmRlYnVnKCdbSG9tZSBCYXNlXSByZXBsYWNlRW1wdHlUYWI6IHJlcGxhY2VOZXdUYWIgaXMgbm90IHRydWUsIGFib3J0aW5nJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU21hbGwgZGVsYXkgdG8gaGFuZGxlIHJhY2UgY29uZGl0aW9ucyB3aXRoIG90aGVyIHBsdWdpbnNcclxuXHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MCkpO1xyXG5cclxuXHRcdC8vIElmIHRoaXMgaXMgZm9yIG5ldyB0YWIgcmVwbGFjZW1lbnQsIGNoZWNrIGFnYWluIGFmdGVyIGRlbGF5XHJcblx0XHRpZiAoIWlzQWxsVGFic0Nsb3NlZCkge1xyXG5cdFx0XHQvLyBGaW5hbCBjaGVjayBhZnRlciBkZWxheSAtIHNldHRpbmcgbWlnaHQgaGF2ZSBjaGFuZ2VkXHJcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBsYWNlTmV3VGFiICE9PSB0cnVlKSB7XHJcblx0XHRcdFx0Y29uc29sZS5kZWJ1ZygnW0hvbWUgQmFzZV0gcmVwbGFjZUVtcHR5VGFiOiByZXBsYWNlTmV3VGFiIGNoYW5nZWQgZHVyaW5nIGRlbGF5LCBhYm9ydGluZycpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gSWYgdGhpcyBpcyBmb3IgYWxsIHRhYnMgY2xvc2VkLCBjaGVjayB0aGF0IHNldHRpbmcgaW5zdGVhZFxyXG5cdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbldoZW5BbGxUYWJzQ2xvc2VkICE9PSB0cnVlKSB7XHJcblx0XHRcdFx0Y29uc29sZS5kZWJ1ZygnW0hvbWUgQmFzZV0gcmVwbGFjZUVtcHR5VGFiOiBvcGVuV2hlbkFsbFRhYnNDbG9zZWQgY2hhbmdlZCBkdXJpbmcgZGVsYXksIGFib3J0aW5nJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRG91YmxlLWNoZWNrIHRoZSB0YWIgaXMgc3RpbGwgZW1wdHlcclxuXHRcdGlmICghdGhpcy5pc0VtcHR5VGFiKGxlYWYpKSB7XHJcblx0XHRcdGNvbnNvbGUuZGVidWcoJ1tIb21lIEJhc2VdIHJlcGxhY2VFbXB0eVRhYjogVGFiIGlzIG5vIGxvbmdlciBlbXB0eSwgc2tpcHBpbmcnKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIElmIHRoaXMgaXMgZm9yIFwiYWxsIHRhYnMgY2xvc2VkXCIsIHVzZSBob21lIGJhc2Ugc2V0dGluZ3NcclxuXHRcdC8vIE90aGVyd2lzZSwgdXNlIG5ldyB0YWIgc2V0dGluZ3MgKGZvciBcInJlcGxhY2UgbmV3IHRhYnNcIiBmZWF0dXJlKVxyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSBpc0FsbFRhYnNDbG9zZWQgXHJcblx0XHRcdD8gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpXHJcblx0XHRcdDogdGhpcy5wbHVnaW4uZ2V0TmV3VGFiU2V0dGluZ3MoKTtcclxuXHRcdFxyXG5cdFx0Y29uc29sZS5kZWJ1ZygnW0hvbWUgQmFzZV0gcmVwbGFjZUVtcHR5VGFiOicsIHtcclxuXHRcdFx0bGVhZjogbGVhZixcclxuXHRcdFx0aXNBbGxUYWJzQ2xvc2VkOiBpc0FsbFRhYnNDbG9zZWQsXHJcblx0XHRcdHNldHRpbmdzOiBzZXR0aW5ncyxcclxuXHRcdFx0cmVwbGFjZU5ld1RhYjogdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU5ld1RhYixcclxuXHRcdFx0bmV3VGFiTW9kZTogdGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3VGFiTW9kZSxcclxuXHRcdFx0dXNlRGlmZmVyZW50RmlsZUZvck5ld1RhYjogdGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlRGlmZmVyZW50RmlsZUZvck5ld1RhYlxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdC8vIE9wZW4gZmlsZSBpbiB0aGlzIGxlYWZcclxuXHRcdC8vIFBhc3MgaXNOZXdUYWI9dHJ1ZSB0byBza2lwIHBpbm5pbmcvZ2hvc3QgdGFiIGxvZ2ljIC0gbmV3IHRhYnMgc2hvdWxkIHdvcmsgaW5kZXBlbmRlbnRseVxyXG5cdFx0Y29uc3Qgc3VjY2VzcyA9IGF3YWl0IHRoaXMucGx1Z2luLmhvbWVTZXJ2aWNlLm9wZW5JbkxlYWZXaXRoU2V0dGluZ3MobGVhZiwgc2V0dGluZ3MsIHRydWUpO1xyXG5cdFx0XHJcblx0XHRpZiAoIXN1Y2Nlc3MpIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKCdbSG9tZSBCYXNlXSBGYWlsZWQgdG8gb3BlbiBmaWxlOicsIHNldHRpbmdzKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNvbnNvbGUuZGVidWcoJ1tIb21lIEJhc2VdIHJlcGxhY2VFbXB0eVRhYjogU3VjY2Vzc2Z1bGx5IG9wZW5lZCBmaWxlJyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBGb3JjZSBjaGVjayBmb3IgZW1wdHkgd29ya3NwYWNlIGFuZCBvcGVuIGhvbWUgYmFzZVxyXG5cdCAqL1xyXG5cdGFzeW5jIG9wZW5JZkVtcHR5KCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Ly8gQ2hlY2sgaWYgdGhlcmUncyBhbiBlbXB0eSB2aWV3XHJcblx0XHRjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoVmlldyk7XHJcblx0XHRjb25zdCBhY3RpdmVMZWFmID0gYWN0aXZlVmlldz8ubGVhZjtcclxuXHJcblx0XHRpZiAoIWFjdGl2ZUxlYWYpIHJldHVybjtcclxuXHJcblx0XHQvLyBDaGVjayBpZiBpdCdzIGVtcHR5IGFuZCBpcyB0aGUgb25seSB0YWJcclxuXHRcdGlmICh0aGlzLmlzRW1wdHlUYWIoYWN0aXZlTGVhZikgJiYgdGhpcy5pc09ubHlUYWIoYWN0aXZlTGVhZikpIHtcclxuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uaG9tZVNlcnZpY2Uub3BlbkluTGVhZihhY3RpdmVMZWFmKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwgIi8qKlxuICogU3RpY2t5IFRhYiBTZXJ2aWNlXG4gKiBNYW5hZ2VzIHRoZSBzdGlja3kgaG9tZSBpY29uIGluIHRoZSB0YWIgYmFyXG4gKi9cblxuaW1wb3J0IHsgTWVudSwgUGxhdGZvcm0sIHNldEljb24sIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBIb21lQmFzZVBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IGdldEZpbGVCeVBhdGgsIGxlYWZIYXNGaWxlIH0gZnJvbSAnLi4vdXRpbHMvZmlsZS11dGlscyc7XG5pbXBvcnQgeyByZXNvbHZlUGF0aFN5bmMgfSBmcm9tICcuLi91dGlscy9ob21lYmFzZS1yZXNvbHZlcic7XG5pbXBvcnQgeyBJY29uUGlja2VyIH0gZnJvbSAnLi4vdWkvaWNvbi1waWNrZXInO1xuXG4vKipcbiAqIENTUyBjbGFzcyBmb3IgdGhlIHN0aWNreSBob21lIGljb24gY29udGFpbmVyXG4gKi9cbmNvbnN0IFNUSUNLWV9JQ09OX0NMQVNTID0gJ2hvbWUtYmFzZS1zdGlja3ktaWNvbic7XG5jb25zdCBTVElDS1lfSUNPTl9BQ1RJVkVfQ0xBU1MgPSAnaG9tZS1iYXNlLXN0aWNreS1pY29uLWFjdGl2ZSc7XG5cbi8qKlxuICogRXh0ZW5kZWQgSFRNTEVsZW1lbnQgaW50ZXJmYWNlIGZvciBzdGlja3kgaWNvbiB3aXRoIGN1c3RvbSBwcm9wZXJ0aWVzXG4gKi9cbmludGVyZmFjZSBTdGlja3lJY29uRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcblx0X2NoZWNrSW50ZXJ2YWw/OiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRJbnRlcnZhbD47XG5cdF9jb250YWluZXJPYnNlcnZlcj86IE11dGF0aW9uT2JzZXJ2ZXI7XG59XG5cbi8qKlxuICogRXh0ZW5kZWQgSFRNTEVsZW1lbnQgaW50ZXJmYWNlIGZvciB0YWIgaGVhZGVyIHdpdGggaG9tZSBiYXNlIHByb3BlcnRpZXNcbiAqL1xuaW50ZXJmYWNlIFRhYkhlYWRlckVsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG5cdF9ob21lQmFzZVBhcmVudD86IEhUTUxFbGVtZW50O1xuXHRfaG9tZUJhc2VOZXh0U2libGluZz86IE5vZGUgfCBudWxsO1xufVxuXG5leHBvcnQgY2xhc3MgU3RpY2t5VGFiU2VydmljZSB7XG5cdHByaXZhdGUgcGx1Z2luOiBIb21lQmFzZVBsdWdpbjtcblx0cHJpdmF0ZSBzdGlja3lJY29uRWw6IFN0aWNreUljb25FbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgbGF5b3V0Q2hhbmdlSGFuZGxlcjogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgdGFiSGVhZGVyVXBkYXRlVGltZW91dDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBzaWRlYmFyT2JzZXJ2ZXI6IE11dGF0aW9uT2JzZXJ2ZXIgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSB0YWJIZWFkZXJPYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlciB8IG51bGwgPSBudWxsO1xuXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogSG9tZUJhc2VQbHVnaW4pIHtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgdGhlIHN0aWNreSB0YWIgaWNvbiBiYXNlZCBvbiBzZXR0aW5nc1xuXHQgKi9cblx0dXBkYXRlKCk6IHZvaWQge1xuXHRcdC8vIE9ubHkgc2hvdyBvbiBkZXNrdG9wXG5cdFx0aWYgKFBsYXRmb3JtLmlzTW9iaWxlKSB7XG5cdFx0XHR0aGlzLnJlbW92ZSgpO1xuXHRcdFx0dGhpcy51cGRhdGVUYWJIZWFkZXJzKCk7IC8vIENsZWFuIHVwIHRhYiBoZWFkZXJzXG5cdFx0XHR0aGlzLnVwZGF0ZVdvcmtzcGFjZUNsYXNzKGZhbHNlKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uKSB7XG5cdFx0XHRpZiAodGhpcy5zdGlja3lJY29uRWwpIHtcblx0XHRcdFx0Ly8gSWNvbiBhbHJlYWR5IGV4aXN0cywganVzdCB1cGRhdGUgdGhlIGljb25cblx0XHRcdFx0Y29uc3QgaWNvbk5hbWUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGlja3lJY29uTmFtZSB8fCAnaG9tZSc7XG5cdFx0XHRcdHNldEljb24odGhpcy5zdGlja3lJY29uRWwsIGljb25OYW1lKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEljb24gZG9lc24ndCBleGlzdCwgY3JlYXRlIGl0XG5cdFx0XHRcdHRoaXMuY3JlYXRlKCk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLnVwZGF0ZVdvcmtzcGFjZUNsYXNzKHRydWUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnJlbW92ZSgpO1xuXHRcdFx0dGhpcy51cGRhdGVUYWJIZWFkZXJzKCk7IC8vIENsZWFuIHVwIHRhYiBoZWFkZXJzIHdoZW4gcmVtb3ZpbmcgaWNvblxuXHRcdFx0dGhpcy51cGRhdGVXb3Jrc3BhY2VDbGFzcyhmYWxzZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEFkZC9yZW1vdmUgQ1NTIGNsYXNzIG9uIGFsbCB3b3Jrc3BhY2VzIHRvIGNvbmRpdGlvbmFsbHkgYXBwbHkgc3R5bGVzXG5cdCAqL1xuXHRwcml2YXRlIHVwZGF0ZVdvcmtzcGFjZUNsYXNzKGVuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcblx0XHRjb25zdCBhcHBseVRvRG9jdW1lbnQgPSAoZG9jOiBEb2N1bWVudCkgPT4ge1xuXHRcdFx0Y29uc3QgbWFpbldvcmtzcGFjZSA9IGRvYy5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLXNwbGl0Lm1vZC12ZXJ0aWNhbC5tb2Qtcm9vdCcpO1xuXHRcdGlmICghbWFpbldvcmtzcGFjZSkgcmV0dXJuO1xuXG5cdFx0aWYgKGVuYWJsZWQpIHtcblx0XHRcdG1haW5Xb3Jrc3BhY2UuY2xhc3NMaXN0LmFkZCgnaG9tZS1iYXNlLXN0aWNreS1pY29uLWVuYWJsZWQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bWFpbldvcmtzcGFjZS5jbGFzc0xpc3QucmVtb3ZlKCdob21lLWJhc2Utc3RpY2t5LWljb24tZW5hYmxlZCcpO1xuXHRcdH1cblx0XHR9O1xuXG5cdFx0Ly8gQXBwbHkgdG8gbWFpbiB3aW5kb3dcblx0XHRhcHBseVRvRG9jdW1lbnQoZG9jdW1lbnQpO1xuXG5cdFx0Ly8gQXBwbHkgdG8gYWxsIG90aGVyIHdpbmRvd3Ncblx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcblx0XHRcdGNvbnN0IGRvYyA9IGxlYWYudmlldz8uY29udGFpbmVyRWw/Lm93bmVyRG9jdW1lbnQ7XG5cdFx0XHRpZiAoZG9jICYmIGRvYyAhPT0gZG9jdW1lbnQpIHtcblx0XHRcdFx0YXBwbHlUb0RvY3VtZW50KGRvYyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlIHRoZSBzdGlja3kgaG9tZSBpY29uXG5cdCAqL1xuXHRwcml2YXRlIGNyZWF0ZSgpOiB2b2lkIHtcblx0XHQvLyBSZW1vdmUgZXhpc3RpbmcgaWNvbiBmaXJzdFxuXHRcdHRoaXMucmVtb3ZlKCk7XG5cblx0XHQvLyBDcmVhdGUgdGhlIHN0aWNreSBpY29uIGVsZW1lbnQgb25jZVxuXHRcdHRoaXMuc3RpY2t5SWNvbkVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0dGhpcy5zdGlja3lJY29uRWwuY2xhc3NOYW1lID0gYCR7U1RJQ0tZX0lDT05fQ0xBU1N9IGNsaWNrYWJsZS1pY29uYDtcblx0XHR0aGlzLnN0aWNreUljb25FbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnT3BlbiBob21lIGJhc2UnKTtcblx0XHR0aGlzLnN0aWNreUljb25FbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdG9vbHRpcC1wb3NpdGlvbicsICdib3R0b20nKTtcblxuXHRcdC8vIEFkZCB0aGUgaWNvbiBmcm9tIHNldHRpbmdzIChkZWZhdWx0IHRvICdob21lJylcblx0XHRjb25zdCBpY29uTmFtZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnN0aWNreUljb25OYW1lIHx8ICdob21lJztcblx0XHRzZXRJY29uKHRoaXMuc3RpY2t5SWNvbkVsLCBpY29uTmFtZSk7XG5cblx0XHQvLyBBZGQgY2xpY2sgaGFuZGxlclxuXHRcdHRoaXMuc3RpY2t5SWNvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcblx0XHRcdC8vIE9wZW4gaG9tZSBiYXNlIGluIGdob3N0IHRhYiAoYWx3YXlzIHVzZSBnaG9zdCB0YWIgZm9yIHN0aWNreSBpY29uKVxuXHRcdFx0dm9pZCB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5vcGVuSG9tZUJhc2VJbkdob3N0VGFiKHtcblx0XHRcdFx0cnVuQ29tbWFuZDogdHJ1ZSxcblx0XHRcdH0pLnRoZW4oKCkgPT4ge1xuXHRcdFx0XHQvLyBVcGRhdGUgdGFiIGhlYWRlcnMgYWZ0ZXIgb3BlbmluZywgd2l0aCBhIHNsaWdodCBkZWxheSB0byBsZXQgYW5pbWF0aW9ucyBjb21wbGV0ZVxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZVRhYkhlYWRlcnMoKTtcblx0XHRcdFx0fSwgMTUwKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Ly8gQWRkIGNvbnRleHQgbWVudSBmb3IgY2hhbmdpbmcgaWNvbiBhbmQgY2xvc2luZyBob21lIGJhc2Vcblx0XHR0aGlzLnN0aWNreUljb25FbC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChlKSA9PiB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XG5cdFx0XHRjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcblx0XHRcdFxuXHRcdFx0Ly8gQWRkIENsb3NlIGhvbWUgYmFzZSBvcHRpb24gKGZpcnN0KVxuXHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG5cdFx0XHRcdGl0ZW1cblx0XHRcdFx0XHQuc2V0VGl0bGUoJ0Nsb3NlIGhvbWUgYmFzZScpXG5cdFx0XHRcdFx0LnNldEljb24oJ3gnKVxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdC8vIEFjdHVhbGx5IGNsb3NlIGl0IChpbmNsdWRpbmcgZ2hvc3QgdGFiIGlmIHN0aWNreSBpY29uIGlzIGVuYWJsZWQpXG5cdFx0XHRcdFx0XHQvLyBJZiBuZXcgdGFiIHJlcGxhY2VtZW50IGlzIGVuYWJsZWQsIGl0IHdpbGwgcmVvcGVuIHdoZW4geW91IGNyZWF0ZSBhIG5ldyB0YWJcblx0XHRcdFx0XHRcdHZvaWQgdGhpcy5jbG9zZUhvbWVCYXNlKHRydWUpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdC8vIEFkZCBDaGFuZ2UgaWNvbiBvcHRpb24gKHNlY29uZClcblx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuXHRcdFx0XHRpdGVtXG5cdFx0XHRcdFx0LnNldFRpdGxlKCdDaGFuZ2UgaWNvbicpXG5cdFx0XHRcdFx0LnNldEljb24oJ2x1Y2lkZS1pbWFnZS1wbHVzJylcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBwaWNrZXIgPSBuZXcgSWNvblBpY2tlcihcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uYXBwLFxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGlja3lJY29uTmFtZSxcblx0XHRcdFx0XHRcdFx0KGljb246IHN0cmluZyB8IG51bGwpID0+IHtcblx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGlja3lJY29uTmFtZSA9IGljb247XG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSB0aGUgaWNvbiBkaXNwbGF5XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5zdGlja3lJY29uRWwpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0SWNvbih0aGlzLnN0aWNreUljb25FbCwgaWNvbiB8fCAnaG9tZScpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRwaWNrZXIub3BlbigpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0XHRtZW51LnNob3dBdE1vdXNlRXZlbnQoZSk7XG5cdFx0fSk7XG5cblx0XHQvLyBGdW5jdGlvbiB0byBlbnN1cmUgaWNvbiBpcyBpbiB0aGUgcmlnaHQgcGxhY2Vcblx0XHQvLyBJbnNlcnQgaXQgaW50byB0aGUgd29ya3NwYWNlLXRhYi1oZWFkZXItY29udGFpbmVyLWlubmVyIHNvIGl0J3MgcGFydCBvZiB0aGUgdGFiIGJhciBzdHJ1Y3R1cmVcblx0XHQvLyBUaGlzIG1ha2VzIGl0IGF1dG9tYXRpY2FsbHkgaGlkZSB3aGVuIHBsdWdpbnMvdGhlbWVzIGhpZGUgdGhlIHRhYiBiYXJcblx0XHRjb25zdCBlbnN1cmVJY29uSW5QbGFjZSA9ICgpID0+IHtcblx0XHRcdGlmICghdGhpcy5zdGlja3lJY29uRWwpIHJldHVybjtcblxuXHRcdFx0Y29uc3QgbWFpbldvcmtzcGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXZlcnRpY2FsLm1vZC1yb290Jyk7XG5cdFx0XHRpZiAoIW1haW5Xb3Jrc3BhY2UpIHJldHVybjtcblxuXHRcdFx0Ly8gRmluZCB0aGUgd29ya3NwYWNlLXRhYi1oZWFkZXItY29udGFpbmVyLWlubmVyIChpbnNpZGUgdGhlIHRhYiBjb250YWluZXIpXG5cdFx0XHRjb25zdCB0YWJIZWFkZXJDb250YWluZXJJbm5lciA9IG1haW5Xb3Jrc3BhY2UucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS10YWItaGVhZGVyLWNvbnRhaW5lci1pbm5lcicpO1xuXHRcdFx0aWYgKCF0YWJIZWFkZXJDb250YWluZXJJbm5lcikgcmV0dXJuO1xuXG5cdFx0XHQvLyBSZW1vdmUgYW55IGR1cGxpY2F0ZSBpY29ucyBmaXJzdCAoaW4gY2FzZSBtdXRhdGlvbiBvYnNlcnZlciBvciBvdGhlciBjb2RlIGNyZWF0ZWQgdGhlbSlcblx0XHRcdGNvbnN0IGFsbEljb25zID0gdGFiSGVhZGVyQ29udGFpbmVySW5uZXIucXVlcnlTZWxlY3RvckFsbChgLiR7U1RJQ0tZX0lDT05fQ0xBU1N9YCk7XG5cdFx0XHRhbGxJY29ucy5mb3JFYWNoKChpY29uKSA9PiB7XG5cdFx0XHRcdGlmIChpY29uICE9PSB0aGlzLnN0aWNreUljb25FbCkge1xuXHRcdFx0XHRcdGljb24ucmVtb3ZlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBDaGVjayBpZiBvdXIgaWNvbiBpcyBhbHJlYWR5IGluIHRoZSBjb250YWluZXJcblx0XHRcdGlmICh0YWJIZWFkZXJDb250YWluZXJJbm5lci5jb250YWlucyh0aGlzLnN0aWNreUljb25FbCkpIHtcblx0XHRcdFx0Ly8gQWxyZWFkeSBpbiBwbGFjZSwgbm90aGluZyB0byBkb1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIEljb24gaXMgbWlzc2luZyAtIHByZXBlbmQgaXQgdG8gdGhlIHRhYiBoZWFkZXIgY29udGFpbmVyIGlubmVyXG5cdFx0XHQvLyBUaGlzIG1ha2VzIGl0IHBhcnQgb2YgdGhlIHRhYiBiYXIgc3RydWN0dXJlLCBzbyBpdCBoaWRlcyBhdXRvbWF0aWNhbGx5IHdoZW4gdGFicyBhcmUgaGlkZGVuXG5cdFx0XHR0YWJIZWFkZXJDb250YWluZXJJbm5lci5pbnNlcnRCZWZvcmUodGhpcy5zdGlja3lJY29uRWwsIHRhYkhlYWRlckNvbnRhaW5lcklubmVyLmZpcnN0Q2hpbGQpO1xuXG5cdFx0XHQvLyBVcGRhdGUgYWN0aXZlIHN0YXRlIGFmdGVyIGluc2VydGlvblxuXHRcdFx0dGhpcy51cGRhdGVBY3RpdmVTdGF0ZSgpO1xuXHRcdFx0XG5cdFx0XHQvLyBVcGRhdGUgdGFiIGhlYWRlcnMgd2hlbiBpY29uIGlzIGNyZWF0ZWRcblx0XHRcdHRoaXMudXBkYXRlVGFiSGVhZGVycygpO1xuXHRcdFx0XG5cdFx0XHQvLyBFbnN1cmUgd29ya3NwYWNlIGNsYXNzIGlzIHNldFxuXHRcdFx0dGhpcy51cGRhdGVXb3Jrc3BhY2VDbGFzcyh0cnVlKTtcblx0XHRcdFxuXHRcdFx0Ly8gVXBkYXRlIGljb24gcG9zaXRpb24gYmFzZWQgb24gc2lkZWJhciBzdGF0ZVxuXHRcdFx0dGhpcy51cGRhdGVJY29uUG9zaXRpb25Gb3JTaWRlYmFyKCk7XG5cdFx0XHRcblx0XHRcdC8vIFdhdGNoIGZvciBzaWRlYmFyIGNvbGxhcHNlL2V4cGFuZCBjaGFuZ2VzXG5cdFx0XHR0aGlzLndhdGNoU2lkZWJhclN0YXRlKCk7XG5cdFx0fTtcblxuXHRcdC8vIFRyeSB0byBpbnNlcnQgaW1tZWRpYXRlbHlcblx0XHRlbnN1cmVJY29uSW5QbGFjZSgpO1xuXG5cdFx0Ly8gU2V0IHVwIGEgcmVsaWFibGUgY2hlY2sgdGhhdCBydW5zIHBlcmlvZGljYWxseSB0byBlbnN1cmUgaWNvbiBpcyBhbHdheXMgdGhlcmVcblx0XHQvLyBUaGlzIGlzIHNpbXBsZSBhbmQgcmVsaWFibGUgLSBqdXN0IGNoZWNrIGlmIGl0J3MgdGhlcmUsIGlmIG5vdCwgcHV0IGl0IGJhY2tcblx0XHRjb25zdCBjaGVja0ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuXHRcdFx0aWYgKCF0aGlzLnN0aWNreUljb25FbCB8fCAhdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uKSB7XG5cdFx0XHRcdGNsZWFySW50ZXJ2YWwoY2hlY2tJbnRlcnZhbCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGVuc3VyZUljb25JblBsYWNlKCk7XG5cdFx0fSwgMTAwKTsgLy8gQ2hlY2sgZXZlcnkgMTAwbXMgLSBtb3JlIGZyZXF1ZW50IHRvIGNhdGNoIGNvbnRhaW5lciByZWNyZWF0aW9uIGltbWVkaWF0ZWx5XG5cblx0XHQvLyBTdG9yZSBpbnRlcnZhbCBzbyB3ZSBjYW4gY2xlYXIgaXQgbGF0ZXJcblx0XHR0aGlzLnN0aWNreUljb25FbC5fY2hlY2tJbnRlcnZhbCA9IGNoZWNrSW50ZXJ2YWw7XG5cblx0XHQvLyBBbHNvIGNoZWNrIG9uIGxheW91dCBjaGFuZ2VzIC0gYnV0IGRvIGl0IGltbWVkaWF0ZWx5LCBubyBkZWxheVxuXHRcdGlmICghdGhpcy5sYXlvdXRDaGFuZ2VIYW5kbGVyKSB7XG5cdFx0XHR0aGlzLmxheW91dENoYW5nZUhhbmRsZXIgPSAoKSA9PiB7XG5cdFx0XHRcdGlmICh0aGlzLnN0aWNreUljb25FbCAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHtcblx0XHRcdFx0XHQvLyBDaGVjayBpbW1lZGlhdGVseSAtIGRvbid0IHdhaXQgZm9yIGxheW91dCB0byBzZXR0bGVcblx0XHRcdFx0XHQvLyBUaGlzIHByZXZlbnRzIGZsaWNrZXJpbmcgd2hlbiB0YWJzIGNsb3NlXG5cdFx0XHRcdFx0ZW5zdXJlSWNvbkluUGxhY2UoKTtcblx0XHRcdFx0XHQvLyBVcGRhdGUgdGFiIGhlYWRlcnMgb24gbGF5b3V0IGNoYW5nZVxuXHRcdFx0XHRcdHRoaXMudXBkYXRlVGFiSGVhZGVycygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KFxuXHRcdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKCdsYXlvdXQtY2hhbmdlJywgdGhpcy5sYXlvdXRDaGFuZ2VIYW5kbGVyKVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBBbHNvIHdhdGNoIGZvciB3aGVuIHdvcmtzcGFjZS10YWItaGVhZGVyLWNvbnRhaW5lci1pbm5lciBpcyBhZGRlZCBiYWNrIChhZnRlciBhbGwgdGFicyBjbG9zZWQpXG5cdFx0Ly8gVXNlIGEgTXV0YXRpb25PYnNlcnZlciBvbiB0aGUgd29ya3NwYWNlIHNwbGl0IHRvIGNhdGNoIGNvbnRhaW5lciByZWNyZWF0aW9uXG5cdFx0Y29uc3QgbWFpbldvcmtzcGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXZlcnRpY2FsLm1vZC1yb290Jyk7XG5cdFx0aWYgKG1haW5Xb3Jrc3BhY2UpIHtcblx0XHRcdGNvbnN0IGNvbnRhaW5lck9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuXHRcdFx0XHRpZiAoIXRoaXMuc3RpY2t5SWNvbkVsIHx8ICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHJldHVybjtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIENoZWNrIGlmIHRhYiBoZWFkZXIgY29udGFpbmVyIGlubmVyIGV4aXN0cyBhbmQgaWNvbiBpcyBtaXNzaW5nXG5cdFx0XHRcdGNvbnN0IHRhYkhlYWRlckNvbnRhaW5lcklubmVyID0gbWFpbldvcmtzcGFjZS5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLXRhYi1oZWFkZXItY29udGFpbmVyLWlubmVyJyk7XG5cdFx0XHRcdGlmICh0YWJIZWFkZXJDb250YWluZXJJbm5lcikge1xuXHRcdFx0XHRcdC8vIFJlbW92ZSBhbnkgZHVwbGljYXRlIGljb25zIGZpcnN0XG5cdFx0XHRcdFx0Y29uc3QgYWxsSWNvbnMgPSB0YWJIZWFkZXJDb250YWluZXJJbm5lci5xdWVyeVNlbGVjdG9yQWxsKGAuJHtTVElDS1lfSUNPTl9DTEFTU31gKTtcblx0XHRcdFx0XHRhbGxJY29ucy5mb3JFYWNoKChpY29uKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoaWNvbiAhPT0gdGhpcy5zdGlja3lJY29uRWwpIHtcblx0XHRcdFx0XHRcdFx0aWNvbi5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vIE9ubHkgcmUtaW5zZXJ0IGlmIG91ciBpY29uIGlzIG5vdCBhbHJlYWR5IGluIHRoZSBjb250YWluZXJcblx0XHRcdFx0XHRpZiAoIXRhYkhlYWRlckNvbnRhaW5lcklubmVyLmNvbnRhaW5zKHRoaXMuc3RpY2t5SWNvbkVsKSkge1xuXHRcdFx0XHRcdFx0Ly8gQ29udGFpbmVyIGV4aXN0cyBidXQgaWNvbiBpcyBtaXNzaW5nIC0gcmUtaW5zZXJ0IGltbWVkaWF0ZWx5XG5cdFx0XHRcdFx0XHR0YWJIZWFkZXJDb250YWluZXJJbm5lci5pbnNlcnRCZWZvcmUodGhpcy5zdGlja3lJY29uRWwsIHRhYkhlYWRlckNvbnRhaW5lcklubmVyLmZpcnN0Q2hpbGQpO1xuXHRcdFx0XHRcdFx0dGhpcy51cGRhdGVBY3RpdmVTdGF0ZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdGNvbnRhaW5lck9ic2VydmVyLm9ic2VydmUobWFpbldvcmtzcGFjZSwge1xuXHRcdFx0XHRjaGlsZExpc3Q6IHRydWUsXG5cdFx0XHRcdHN1YnRyZWU6IHRydWUsIC8vIFdhdGNoIHN1YnRyZWUgdG8gY2F0Y2ggdGFiIGNvbnRhaW5lciByZWNyZWF0aW9uXG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gU3RvcmUgb2JzZXJ2ZXIgc28gd2UgY2FuIGNsZWFuIGl0IHVwXG5cdFx0XHR0aGlzLnN0aWNreUljb25FbC5fY29udGFpbmVyT2JzZXJ2ZXIgPSBjb250YWluZXJPYnNlcnZlcjtcblx0XHR9XG5cblx0XHQvLyBTZXQgdXAgTXV0YXRpb25PYnNlcnZlciB0byB3YXRjaCBmb3IgbmV3IHRhYiBoZWFkZXJzIGFuZCByZW1vdmUgZ2hvc3QgdGFicyBpbW1lZGlhdGVseVxuXHRcdHRoaXMuc2V0dXBUYWJIZWFkZXJPYnNlcnZlcigpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNldCB1cCBNdXRhdGlvbk9ic2VydmVyIHRvIHdhdGNoIGZvciB0YWIgaGVhZGVyIGNoYW5nZXMgYW5kIHJlbW92ZSBnaG9zdCB0YWJzIGltbWVkaWF0ZWx5XG5cdCAqIFRoaXMgcHJldmVudHMgdGhlIGZsYXNoIHdoZW4gdGFicyBhcmUgb3BlbmVkL2Nsb3NlZFxuXHQgKi9cblx0cHJpdmF0ZSBzZXR1cFRhYkhlYWRlck9ic2VydmVyKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLnRhYkhlYWRlck9ic2VydmVyKSB7XG5cdFx0XHRyZXR1cm47IC8vIEFscmVhZHkgc2V0IHVwXG5cdFx0fVxuXG5cdFx0dGhpcy50YWJIZWFkZXJPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHtcblx0XHRcdC8vIE9ubHkgcHJvY2VzcyBpZiBzZXR0aW5ncyBhcmUgZW5hYmxlZFxuXHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24gfHwgIXRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVIb21lVGFiSGVhZGVyKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2hlY2sgaWYgYW55IG5ldyB0YWIgaGVhZGVycyB3ZXJlIGFkZGVkXG5cdFx0XHRsZXQgaGFzTmV3SGVhZGVycyA9IGZhbHNlO1xuXHRcdFx0Zm9yIChjb25zdCBtdXRhdGlvbiBvZiBtdXRhdGlvbnMpIHtcblx0XHRcdFx0aWYgKG11dGF0aW9uLnR5cGUgPT09ICdjaGlsZExpc3QnICYmIG11dGF0aW9uLmFkZGVkTm9kZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGZvciAoY29uc3Qgbm9kZSBvZiBBcnJheS5mcm9tKG11dGF0aW9uLmFkZGVkTm9kZXMpKSB7XG5cdFx0XHRcdFx0XHRpZiAobm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmIG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCd3b3Jrc3BhY2UtdGFiLWhlYWRlcicpKSB7XG5cdFx0XHRcdFx0XHRcdGhhc05ld0hlYWRlcnMgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGhhc05ld0hlYWRlcnMpIGJyZWFrO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoaGFzTmV3SGVhZGVycykge1xuXHRcdFx0XHQvLyBJbW1lZGlhdGVseSByZW1vdmUgYW55IGdob3N0IHRhYiBoZWFkZXJzIHRoYXQgYXBwZWFyZWRcblx0XHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XG5cdFx0XHRcdFx0Ly8gT25seSBwcm9jZXNzIGxlYXZlcyBpbiB0aGUgbWFpbiB3b3Jrc3BhY2UgKG5vdCBzaWRlYmFycylcblx0XHRcdFx0XHRjb25zdCB2aWV3ID0gbGVhZi52aWV3O1xuXHRcdFx0XHRcdGxldCBjb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cblx0XHRcdFx0XHRpZiAodmlldykge1xuXHRcdFx0XHRcdFx0Y29uc3Qgdmlld0FueSA9IHZpZXcgYXMgdW5rbm93biBhcyB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfTtcblx0XHRcdFx0XHRcdGNvbnRhaW5lciA9IHZpZXdBbnkuY29udGFpbmVyRWwgfHwgbnVsbDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoIWNvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0Y29uc3QgbGVhZkFueSA9IGxlYWYgYXMgdW5rbm93biBhcyB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfTtcblx0XHRcdFx0XHRcdGNvbnRhaW5lciA9IGxlYWZBbnkuY29udGFpbmVyRWwgfHwgbnVsbDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoY29udGFpbmVyKSB7XG5cdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBpdCdzIGluIHRoZSBtYWluIHdvcmtzcGFjZSAocm9vdCwgbm90IHNpZGViYXIpXG5cdFx0XHRcdFx0XHRjb25zdCByb290V29ya3NwYWNlID0gY29udGFpbmVyLmNsb3Nlc3QoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXZlcnRpY2FsLm1vZC1yb290Jyk7XG5cdFx0XHRcdFx0XHRjb25zdCBsZWZ0U2lkZWJhciA9IGNvbnRhaW5lci5jbG9zZXN0KCcud29ya3NwYWNlLXNwbGl0Lm1vZC1sZWZ0LXNwbGl0Jyk7XG5cdFx0XHRcdFx0XHRjb25zdCByaWdodFNpZGViYXIgPSBjb250YWluZXIuY2xvc2VzdCgnLndvcmtzcGFjZS1zcGxpdC5tb2QtcmlnaHQtc3BsaXQnKTtcblxuXHRcdFx0XHRcdFx0Ly8gT25seSBwcm9jZXNzIG1haW4gd29ya3NwYWNlIGxlYXZlc1xuXHRcdFx0XHRcdFx0aWYgKHJvb3RXb3Jrc3BhY2UgJiYgIWxlZnRTaWRlYmFyICYmICFyaWdodFNpZGViYXIpIHtcblx0XHRcdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLmhvbWVTZXJ2aWNlLmlzR2hvc3RMZWFmKGxlYWYpKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgdGFiSGVhZGVyID0gdGhpcy5nZXRUYWJIZWFkZXJGb3JMZWFmKGxlYWYpO1xuXHRcdFx0XHRcdFx0XHRcdGlmICh0YWJIZWFkZXIgJiYgdGFiSGVhZGVyLnBhcmVudEVsZW1lbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHBhcmVudCA9IHRhYkhlYWRlci5wYXJlbnRFbGVtZW50O1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHBhcmVudCAmJiBwYXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCd3b3Jrc3BhY2UtdGFiLWhlYWRlci1jb250YWluZXItaW5uZXInKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCB0YWJIZWFkZXJFeHRlbmRlZCA9IHRhYkhlYWRlciBhcyBUYWJIZWFkZXJFbGVtZW50O1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBPbmx5IHJlbW92ZSBpZiBub3QgYWxyZWFkeSByZW1vdmVkXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChwYXJlbnQuY29udGFpbnModGFiSGVhZGVyKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZVBhcmVudCA9IHBhcmVudDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VOZXh0U2libGluZyA9IHRhYkhlYWRlci5uZXh0U2libGluZztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0YWJIZWFkZXIucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Y29uc3Qgb2JzZXJ2ZUNvbnRhaW5lciA9IChjb250YWluZXI6IEVsZW1lbnQpID0+IHtcblx0XHRcdHRoaXMudGFiSGVhZGVyT2JzZXJ2ZXI/Lm9ic2VydmUoY29udGFpbmVyLCB7XG5cdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcblx0XHRcdFx0c3VidHJlZTogZmFsc2Vcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHQvLyBPYnNlcnZlIGFsbCBleGlzdGluZyBjb250YWluZXJzIGluIGFsbCB3aW5kb3dzXG5cdFx0Y29uc3Qgb2JzZXJ2ZUFsbFdpbmRvd3MgPSAoKSA9PiB7XG5cdFx0XHRjb25zdCBjb250YWluZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLndvcmtzcGFjZS10YWItaGVhZGVyLWNvbnRhaW5lci1pbm5lcicpO1xuXHRcdFx0Y29udGFpbmVycy5mb3JFYWNoKG9ic2VydmVDb250YWluZXIpO1xuXG5cdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcblx0XHRcdFx0Y29uc3QgZG9jID0gbGVhZi52aWV3Py5jb250YWluZXJFbD8ub3duZXJEb2N1bWVudDtcblx0XHRcdFx0aWYgKGRvYyAmJiBkb2MgIT09IGRvY3VtZW50KSB7XG5cdFx0XHRcdFx0Y29uc3Qgd2luZG93Q29udGFpbmVycyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCcud29ya3NwYWNlLXRhYi1oZWFkZXItY29udGFpbmVyLWlubmVyJyk7XG5cdFx0XHRcdFx0d2luZG93Q29udGFpbmVycy5mb3JFYWNoKG9ic2VydmVDb250YWluZXIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0b2JzZXJ2ZUFsbFdpbmRvd3MoKTtcblxuXHRcdC8vIEFsc28gd2F0Y2ggZm9yIG5ldyBjb250YWluZXJzIGJlaW5nIGFkZGVkIGluIGFsbCB3aW5kb3dzXG5cdFx0Y29uc3Qgc2V0dXBXb3Jrc3BhY2VPYnNlcnZlciA9ICh3aW46IFdpbmRvdykgPT4ge1xuXHRcdFx0Y29uc3QgZG9jID0gd2luLmRvY3VtZW50O1xuXHRcdFx0Y29uc3Qgd29ya3NwYWNlT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IG5ld0NvbnRhaW5lcnMgPSBkb2MucXVlcnlTZWxlY3RvckFsbCgnLndvcmtzcGFjZS10YWItaGVhZGVyLWNvbnRhaW5lci1pbm5lcicpO1xuXHRcdFx0XHRuZXdDb250YWluZXJzLmZvckVhY2gob2JzZXJ2ZUNvbnRhaW5lcik7XG5cdFx0fSk7XG5cblx0XHRcdGNvbnN0IG1haW5Xb3Jrc3BhY2UgPSBkb2MucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1zcGxpdC5tb2QtdmVydGljYWwubW9kLXJvb3QnKTtcblx0XHRpZiAobWFpbldvcmtzcGFjZSkge1xuXHRcdFx0d29ya3NwYWNlT2JzZXJ2ZXIub2JzZXJ2ZShtYWluV29ya3NwYWNlLCB7XG5cdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcblx0XHRcdFx0c3VidHJlZTogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdH07XG5cblx0XHRzZXR1cFdvcmtzcGFjZU9ic2VydmVyKHdpbmRvdyk7XG5cdFx0XG5cdFx0Ly8gUmVnaXN0ZXIgZm9yIGZ1dHVyZSB3aW5kb3dzXG5cdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ3dpbmRvdy1vcGVuJywgKHdpbikgPT4ge1xuXHRcdFx0XHRjb25zdCBhY3R1YWxXaW5kb3cgPSB3aW4ud2luO1xuXHRcdFx0XHRpZiAoYWN0dWFsV2luZG93IGluc3RhbmNlb2YgV2luZG93KSB7XG5cdFx0XHRcdFx0c2V0dXBXb3Jrc3BhY2VPYnNlcnZlcihhY3R1YWxXaW5kb3cpO1xuXHRcdFx0XHRcdC8vIFJlLXJ1biBvYnNlcnZlIGFsbCB0byBjYXRjaCBjb250YWluZXJzIGluIHRoZSBuZXcgd2luZG93XG5cdFx0XHRcdFx0c2V0VGltZW91dChvYnNlcnZlQWxsV2luZG93cywgMTAwKTtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlbW92ZSB0aGUgc3RpY2t5IGhvbWUgaWNvblxuXHQgKi9cblx0cmVtb3ZlKCk6IHZvaWQge1xuXHRcdC8vIENsZWFyIGFueSBwZW5kaW5nIHRhYiBoZWFkZXIgdXBkYXRlc1xuXHRcdGlmICh0aGlzLnRhYkhlYWRlclVwZGF0ZVRpbWVvdXQpIHtcblx0XHRcdGNsZWFyVGltZW91dCh0aGlzLnRhYkhlYWRlclVwZGF0ZVRpbWVvdXQpO1xuXHRcdFx0dGhpcy50YWJIZWFkZXJVcGRhdGVUaW1lb3V0ID0gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBDbGVhciBhbnkgY2hlY2sgaW50ZXJ2YWxzXG5cdFx0aWYgKHRoaXMuc3RpY2t5SWNvbkVsICYmIHRoaXMuc3RpY2t5SWNvbkVsLl9jaGVja0ludGVydmFsKSB7XG5cdFx0XHRjbGVhckludGVydmFsKHRoaXMuc3RpY2t5SWNvbkVsLl9jaGVja0ludGVydmFsKTtcblx0XHR9XG5cblx0XHQvLyBEaXNjb25uZWN0IGNvbnRhaW5lciBvYnNlcnZlclxuXHRcdGlmICh0aGlzLnN0aWNreUljb25FbCAmJiB0aGlzLnN0aWNreUljb25FbC5fY29udGFpbmVyT2JzZXJ2ZXIpIHtcblx0XHRcdHRoaXMuc3RpY2t5SWNvbkVsLl9jb250YWluZXJPYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0fVxuXG5cdFx0Ly8gRGlzY29ubmVjdCBzaWRlYmFyIG9ic2VydmVyXG5cdFx0aWYgKHRoaXMuc2lkZWJhck9ic2VydmVyKSB7XG5cdFx0XHR0aGlzLnNpZGViYXJPYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0XHR0aGlzLnNpZGViYXJPYnNlcnZlciA9IG51bGw7XG5cdFx0fVxuXG5cdFx0Ly8gRGlzY29ubmVjdCB0YWIgaGVhZGVyIG9ic2VydmVyXG5cdFx0aWYgKHRoaXMudGFiSGVhZGVyT2JzZXJ2ZXIpIHtcblx0XHRcdHRoaXMudGFiSGVhZGVyT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuXHRcdFx0dGhpcy50YWJIZWFkZXJPYnNlcnZlciA9IG51bGw7XG5cdFx0fVxuXG5cdFx0Ly8gUkVTVE9SRSBFVkVSWVRISU5HIGJlZm9yZSBmdWxseSByZW1vdmluZ1xuXHRcdC8vIFRoaXMgZW5zdXJlcyB0YWIgaGVhZGVycyBhcmUgdmlzaWJsZSBhZ2FpbiBhbmQgd29ya3NwYWNlIGNsYXNzZXMgYXJlIHJlbW92ZWRcblx0XHR0aGlzLnVwZGF0ZVdvcmtzcGFjZUNsYXNzKGZhbHNlKTtcblx0XHRcblx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcblx0XHRcdC8vIE9ubHkgcHJvY2VzcyBsZWF2ZXMgaW4gdGhlIG1haW4gd29ya3NwYWNlIChub3Qgc2lkZWJhcnMpXG5cdFx0XHRjb25zdCB2aWV3ID0gbGVhZi52aWV3O1xuXHRcdFx0bGV0IGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblxuXHRcdFx0aWYgKHZpZXcpIHtcblx0XHRcdFx0Y29uc3Qgdmlld0FueSA9IHZpZXcgYXMgdW5rbm93biBhcyB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfTtcblx0XHRcdFx0Y29udGFpbmVyID0gdmlld0FueS5jb250YWluZXJFbCB8fCBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIWNvbnRhaW5lcikge1xuXHRcdFx0XHRjb25zdCBsZWFmQW55ID0gbGVhZiBhcyB1bmtub3duIGFzIHsgY29udGFpbmVyRWw/OiBIVE1MRWxlbWVudCB9O1xuXHRcdFx0XHRjb250YWluZXIgPSBsZWFmQW55LmNvbnRhaW5lckVsIHx8IG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChjb250YWluZXIpIHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgaXQncyBpbiB0aGUgbWFpbiB3b3Jrc3BhY2UgKHJvb3QsIG5vdCBzaWRlYmFyKVxuXHRcdFx0XHRjb25zdCByb290V29ya3NwYWNlID0gY29udGFpbmVyLmNsb3Nlc3QoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXZlcnRpY2FsLm1vZC1yb290Jyk7XG5cdFx0XHRcdGNvbnN0IGxlZnRTaWRlYmFyID0gY29udGFpbmVyLmNsb3Nlc3QoJy53b3Jrc3BhY2Utc3BsaXQubW9kLWxlZnQtc3BsaXQnKTtcblx0XHRcdFx0Y29uc3QgcmlnaHRTaWRlYmFyID0gY29udGFpbmVyLmNsb3Nlc3QoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXJpZ2h0LXNwbGl0Jyk7XG5cblx0XHRcdFx0Ly8gT25seSBwcm9jZXNzIG1haW4gd29ya3NwYWNlIGxlYXZlc1xuXHRcdFx0XHRpZiAocm9vdFdvcmtzcGFjZSAmJiAhbGVmdFNpZGViYXIgJiYgIXJpZ2h0U2lkZWJhcikge1xuXHRcdFx0XHRcdGNvbnN0IHRhYkhlYWRlciA9IHRoaXMuZ2V0VGFiSGVhZGVyRm9yTGVhZihsZWFmKTtcblx0XHRcdFx0XHRpZiAodGFiSGVhZGVyKSB7XG5cdFx0XHRcdFx0XHR0YWJIZWFkZXIuY2xhc3NMaXN0LnJlbW92ZSgnaXMtaG9tZS1iYXNlLXRhYicpO1xuXHRcdFx0XHRcdFx0dGFiSGVhZGVyLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1ob21lLWJhc2UtZ2hvc3QnKTtcblx0XHRcdFx0XHRcdHRhYkhlYWRlci5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJyk7XG5cblx0XHRcdFx0XHRcdGNvbnN0IHRhYkhlYWRlckV4dGVuZGVkID0gdGFiSGVhZGVyIGFzIFRhYkhlYWRlckVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRpZiAodGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlUGFyZW50ICYmICF0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VQYXJlbnQuY29udGFpbnModGFiSGVhZGVyKSkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBwYXJlbnQgPSB0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VQYXJlbnQ7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IG5leHRTaWJsaW5nID0gdGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlTmV4dFNpYmxpbmc7XG5cdFx0XHRcdFx0XHRcdGlmIChwYXJlbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAobmV4dFNpYmxpbmcgJiYgbmV4dFNpYmxpbmcucGFyZW50RWxlbWVudCA9PT0gcGFyZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwYXJlbnQuaW5zZXJ0QmVmb3JlKHRhYkhlYWRlciwgbmV4dFNpYmxpbmcpO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwYXJlbnQuYXBwZW5kQ2hpbGQodGFiSGVhZGVyKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZGVsZXRlIHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZVBhcmVudDtcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZU5leHRTaWJsaW5nO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0aWYgKHRoaXMuc3RpY2t5SWNvbkVsKSB7XG5cdFx0XHQvLyBPbmx5IHJlbW92ZSBpZiBpdCdzIGFjdHVhbGx5IGluIHRoZSBET01cblx0XHRcdGlmICh0aGlzLnN0aWNreUljb25FbC5wYXJlbnRFbGVtZW50KSB7XG5cdFx0XHRcdHRoaXMuc3RpY2t5SWNvbkVsLnJlbW92ZSgpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5zdGlja3lJY29uRWwgPSBudWxsO1xuXHRcdH1cblxuXHRcdC8vIEFsc28gY2xlYW4gdXAgYW55IG9ycGhhbmVkIGljb25zIGluIGFsbCB3aW5kb3dzXG5cdFx0Y29uc3QgY2xlYW51cE9ycGhhbnMgPSAoZG9jOiBEb2N1bWVudCkgPT4ge1xuXHRcdFx0ZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke1NUSUNLWV9JQ09OX0NMQVNTfWApLmZvckVhY2goZWwgPT4ge1xuXHRcdFx0XHRjb25zdCBzdGlja3lFbCA9IGVsIGFzIFN0aWNreUljb25FbGVtZW50O1xuXHRcdFx0XHRpZiAoc3RpY2t5RWwuX2NoZWNrSW50ZXJ2YWwpIHtcblx0XHRcdFx0XHRjbGVhckludGVydmFsKHN0aWNreUVsLl9jaGVja0ludGVydmFsKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoc3RpY2t5RWwuX2NvbnRhaW5lck9ic2VydmVyKSB7XG5cdFx0XHRcdFx0c3RpY2t5RWwuX2NvbnRhaW5lck9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbC5yZW1vdmUoKTtcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRjbGVhbnVwT3JwaGFucyhkb2N1bWVudCk7XG5cdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XG5cdFx0XHRjb25zdCBkb2MgPSBsZWFmLnZpZXc/LmNvbnRhaW5lckVsPy5vd25lckRvY3VtZW50O1xuXHRcdFx0aWYgKGRvYyAmJiBkb2MgIT09IGRvY3VtZW50KSB7XG5cdFx0XHRcdGNsZWFudXBPcnBoYW5zKGRvYyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogVXBkYXRlIHRoZSBhY3RpdmUgc3RhdGUgb2YgdGhlIHN0aWNreSBpY29uXG5cdCAqL1xuXHR1cGRhdGVBY3RpdmVTdGF0ZSgpOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMuc3RpY2t5SWNvbkVsKSByZXR1cm47XG5cblx0XHRjb25zdCBpc0FjdGl2ZSA9IHRoaXMucGx1Z2luLmhvbWVTZXJ2aWNlLmlzRm9jdXNlZE9uSG9tZUJhc2UoKTtcblx0XHRcblx0XHRpZiAoaXNBY3RpdmUpIHtcblx0XHRcdHRoaXMuc3RpY2t5SWNvbkVsLmNsYXNzTGlzdC5hZGQoU1RJQ0tZX0lDT05fQUNUSVZFX0NMQVNTKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5zdGlja3lJY29uRWwuY2xhc3NMaXN0LnJlbW92ZShTVElDS1lfSUNPTl9BQ1RJVkVfQ0xBU1MpO1xuXHRcdH1cblxuXHRcdC8vIEFsc28gdXBkYXRlIHRhYiBoZWFkZXJzIHdoZW4gYWN0aXZlIHN0YXRlIGNoYW5nZXMgKGRlYm91bmNlZClcblx0XHR0aGlzLnVwZGF0ZVRhYkhlYWRlcnMoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDaGVjayBpZiB0aGUgbGVmdCBzaWRlYmFyIGlzIGNvbGxhcHNlZFxuXHQgKiBCYXNlZCBvbiBvYnNpZGlhbi1veHlnZW4tc2V0dGluZ3MgaW1wbGVtZW50YXRpb25cblx0ICovXG5cdHByaXZhdGUgaXNMZWZ0U2lkZWJhckNvbGxhcHNlZCgpOiBib29sZWFuIHtcblx0XHQvLyBVc2UgdGhlIGNvcnJlY3Qgc2VsZWN0b3IgZm9yIGxlZnQgc2lkZWJhclxuXHRcdGNvbnN0IGxlZnRTaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1zcGxpdC5tb2QtbGVmdC1zcGxpdCcpIHx8IFxuXHRcdCAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZC1sZWZ0LXNwbGl0Jyk7XG5cdFx0XG5cdFx0aWYgKCFsZWZ0U2lkZWJhcikgcmV0dXJuIGZhbHNlO1xuXHRcdFxuXHRcdC8vIENoZWNrIGZvciB0aGUgaXMtc2lkZWRvY2stY29sbGFwc2VkIGNsYXNzIC0gdGhpcyBpcyB0aGUgbW9zdCByZWxpYWJsZSBpbmRpY2F0b3Jcblx0XHRyZXR1cm4gbGVmdFNpZGViYXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1zaWRlZG9jay1jb2xsYXBzZWQnKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgaWNvbiBwb3NpdGlvbiBiYXNlZCBvbiBzaWRlYmFyIHN0YXRlXG5cdCAqIE5vdGU6IFdpdGggaW5saW5lIHBvc2l0aW9uaW5nLCBpY29uIGZsb3dzIG5hdHVyYWxseSB3aXRoIHRhYnMsIHNvIG5vIHNwZWNpYWwgcG9zaXRpb25pbmcgbmVlZGVkXG5cdCAqL1xuXHR1cGRhdGVJY29uUG9zaXRpb25Gb3JTaWRlYmFyKCk6IHZvaWQge1xuXHRcdC8vIEljb24gbm93IGZsb3dzIG5hdHVyYWxseSB3aXRoIHRhYnMsIG5vIHNwZWNpYWwgcG9zaXRpb25pbmcgbmVlZGVkXG5cdFx0Ly8gVGhpcyBtZXRob2QgaXMga2VwdCBmb3IgcG90ZW50aWFsIGZ1dHVyZSB1c2UgYnV0IGN1cnJlbnRseSBkb2VzIG5vdGhpbmdcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgaWNvbiB2aXNpYmlsaXR5IGJhc2VkIG9uIHRhYiBiYXIgdmlzaWJpbGl0eVxuXHQgKiBSRU1PVkVEOiBKYXZhU2NyaXB0LWJhc2VkIHZpc2liaWxpdHkgY2hlY2tpbmcgd2FzIGNhdXNpbmcgaXNzdWVzXG5cdCAqIE5vdyByZWxpZXMgZW50aXJlbHkgb24gQ1NTIHdoaWNoIGlzIG1vcmUgcmVsaWFibGVcblx0ICovXG5cdHVwZGF0ZUljb25WaXNpYmlsaXR5KCk6IHZvaWQge1xuXHRcdC8vIERvIG5vdGhpbmcgLSBsZXQgQ1NTIGhhbmRsZSBhbGwgdmlzaWJpbGl0eVxuXHRcdC8vIFRoZSBpY29uIGlzIGluc2lkZSB0aGUgdGFiIGNvbnRhaW5lciwgc28gaXQgd2lsbCBoaWRlIGF1dG9tYXRpY2FsbHlcblx0XHQvLyB3aGVuIHRoZSBjb250YWluZXIgaXMgaGlkZGVuIGJ5IGFueSB0aGVtZS9wbHVnaW5cblx0fVxuXG5cdC8qKlxuXHQgKiBXYXRjaCBmb3Igc2lkZWJhciBzdGF0ZSBjaGFuZ2VzIGFuZCB1cGRhdGUgaWNvbiBwb3NpdGlvblxuXHQgKiBCYXNlZCBvbiBvYnNpZGlhbi1veHlnZW4tc2V0dGluZ3MgaW1wbGVtZW50YXRpb25cblx0ICovXG5cdHByaXZhdGUgd2F0Y2hTaWRlYmFyU3RhdGUoKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuc2lkZWJhck9ic2VydmVyKSB7XG5cdFx0XHR0aGlzLnNpZGViYXJPYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0fVxuXHRcdFxuXHRcdGNvbnN0IGxlZnRTaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1zcGxpdC5tb2QtbGVmdC1zcGxpdCcpIHx8IFxuXHRcdCAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZC1sZWZ0LXNwbGl0Jyk7XG5cdFx0XG5cdFx0aWYgKCFsZWZ0U2lkZWJhcikgcmV0dXJuO1xuXHRcdFxuXHRcdC8vIFdhdGNoIGZvciBjbGFzcyBjaGFuZ2VzIG9uIHRoZSBzaWRlYmFyIGVsZW1lbnRcblx0XHR0aGlzLnNpZGViYXJPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHtcblx0XHRcdGxldCBzaG91bGRVcGRhdGUgPSBmYWxzZTtcblx0XHRcdG11dGF0aW9ucy5mb3JFYWNoKChtdXRhdGlvbikgPT4ge1xuXHRcdFx0XHRpZiAobXV0YXRpb24udHlwZSA9PT0gJ2F0dHJpYnV0ZXMnICYmIG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09ICdjbGFzcycpIHtcblx0XHRcdFx0XHRzaG91bGRVcGRhdGUgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGlmIChzaG91bGRVcGRhdGUpIHtcblx0XHRcdFx0dGhpcy51cGRhdGVJY29uUG9zaXRpb25Gb3JTaWRlYmFyKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0XG5cdFx0dGhpcy5zaWRlYmFyT2JzZXJ2ZXIub2JzZXJ2ZShsZWZ0U2lkZWJhciwge1xuXHRcdFx0YXR0cmlidXRlczogdHJ1ZSxcblx0XHRcdGF0dHJpYnV0ZUZpbHRlcjogWydjbGFzcyddLFxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIFdhdGNoIGZvciB0YWIgYmFyIHZpc2liaWxpdHkgY2hhbmdlcyAoT3h5Z2VuIHRoZW1lIGF1dG8taGlkZSwgZm9jdXMgbW9kZSwgZXRjLilcblx0ICogUkVNT1ZFRDogTm8gbG9uZ2VyIG5lZWRlZCAtIENTUyBoYW5kbGVzIGFsbCB2aXNpYmlsaXR5IGF1dG9tYXRpY2FsbHlcblx0ICovXG5cdHByaXZhdGUgd2F0Y2hUYWJCYXJWaXNpYmlsaXR5KCk6IHZvaWQge1xuXHRcdC8vIERvIG5vdGhpbmcgLSBDU1MgaGFuZGxlcyBhbGwgdmlzaWJpbGl0eVxuXHRcdC8vIFRoZSBpY29uIGlzIGluc2lkZSB0aGUgdGFiIGNvbnRhaW5lciwgc28gaXQgaGlkZXMgYXV0b21hdGljYWxseVxuXHR9XG5cblx0LyoqXG5cdCAqIFRvZ2dsZSB0aGUgc3RpY2t5IGljb24gdmlzaWJpbGl0eVxuXHQgKi9cblx0YXN5bmMgdG9nZ2xlKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTdGlja3lIb21lSWNvbiA9ICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb247XG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0dGhpcy51cGRhdGUoKTtcblx0XHQvLyBVcGRhdGUgdGFiIGhlYWRlcnMgd2hlbiB0b2dnbGluZyBzdGlja3kgaWNvblxuXHRcdHRoaXMudXBkYXRlVGFiSGVhZGVycygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSB0YWIgaGVhZGVycyB0byBoaWRlL3Nob3cgZ2hvc3QgdGFiXG5cdCAqIE9ubHkgd29ya3Mgd2hlbiBzdGlja3kgaWNvbiBpcyBlbmFibGVkXG5cdCAqIFJlbW92ZWQgZGVib3VuY2UgLSBtdXN0IGJlIGltbWVkaWF0ZSB0byBwcmV2ZW50IGZsYXNoXG5cdCAqL1xuXHR1cGRhdGVUYWJIZWFkZXJzKCk6IHZvaWQge1xuXHRcdC8vIENsZWFyIGFueSBwZW5kaW5nIHVwZGF0ZVxuXHRcdGlmICh0aGlzLnRhYkhlYWRlclVwZGF0ZVRpbWVvdXQpIHtcblx0XHRcdGNsZWFyVGltZW91dCh0aGlzLnRhYkhlYWRlclVwZGF0ZVRpbWVvdXQpO1xuXHRcdFx0dGhpcy50YWJIZWFkZXJVcGRhdGVUaW1lb3V0ID0gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBFeGVjdXRlIGltbWVkaWF0ZWx5IC0gbm8gZGVib3VuY2UgdG8gcHJldmVudCBmbGFzaFxuXHRcdHRoaXMuX2RvVXBkYXRlVGFiSGVhZGVycygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEludGVybmFsIG1ldGhvZCB0aGF0IGFjdHVhbGx5IHVwZGF0ZXMgdGhlIHRhYiBoZWFkZXJzXG5cdCAqL1xuXHRwcml2YXRlIF9kb1VwZGF0ZVRhYkhlYWRlcnMoKTogdm9pZCB7XG5cdFx0Ly8gT25seSBoaWRlIGdob3N0IHRhYiBpZiBCT1RIIHN0aWNreSBpY29uIEFORCBoaWRlIHRhYiBoZWFkZXIgYXJlIGVuYWJsZWRcblx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTdGlja3lIb21lSWNvbiB8fCAhdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUhvbWVUYWJIZWFkZXIpIHtcblx0XHRcdC8vIFJlbW92ZSBhbGwgaG9tZSBiYXNlIHRhYiBjbGFzc2VzIGZyb20gQUxMIHdpbmRvd3Ncblx0XHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xuXHRcdFx0XHRjb25zdCB0YWJIZWFkZXIgPSB0aGlzLmdldFRhYkhlYWRlckZvckxlYWYobGVhZik7XG5cdFx0XHRcdGlmICh0YWJIZWFkZXIpIHtcblx0XHRcdFx0XHR0YWJIZWFkZXIuY2xhc3NMaXN0LnJlbW92ZSgnaXMtaG9tZS1iYXNlLXRhYicpO1xuXHRcdFx0XHRcdHRhYkhlYWRlci5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtaG9tZS1iYXNlLWdob3N0Jyk7XG5cdFx0XHRcdFx0dGFiSGVhZGVyLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0Y29uc3QgdGFiSGVhZGVyRXh0ZW5kZWQgPSB0YWJIZWFkZXIgYXMgVGFiSGVhZGVyRWxlbWVudDtcblx0XHRcdFx0aWYgKHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZVBhcmVudCAmJiAhdGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlUGFyZW50LmNvbnRhaW5zKHRhYkhlYWRlcikpIHtcblx0XHRcdFx0XHRjb25zdCBwYXJlbnQgPSB0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VQYXJlbnQ7XG5cdFx0XHRcdFx0Y29uc3QgbmV4dFNpYmxpbmcgPSB0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VOZXh0U2libGluZztcblx0XHRcdFx0XHRpZiAocGFyZW50KSB7XG5cdFx0XHRcdFx0XHRpZiAobmV4dFNpYmxpbmcgJiYgbmV4dFNpYmxpbmcucGFyZW50RWxlbWVudCA9PT0gcGFyZW50KSB7XG5cdFx0XHRcdFx0XHRcdHBhcmVudC5pbnNlcnRCZWZvcmUodGFiSGVhZGVyLCBuZXh0U2libGluZyk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRwYXJlbnQuYXBwZW5kQ2hpbGQodGFiSGVhZGVyKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZGVsZXRlIHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZVBhcmVudDtcblx0XHRcdFx0XHRkZWxldGUgdGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlTmV4dFNpYmxpbmc7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBDUklUSUNBTDogUmVtb3ZlIGdob3N0IHRhYiBoZWFkZXJzIFNZTkNIUk9OT1VTTFkgYmVmb3JlIGFueSBhbmltYXRpb24gZnJhbWVzXG5cdFx0Ly8gVGhpcyBwcmV2ZW50cyB0aGVtIGZyb20gYnJpZWZseSBhcHBlYXJpbmcgd2hlbiB0YWJzIGNoYW5nZVxuXHRcdGNvbnN0IGdob3N0VGFiSGVhZGVyc1RvUmVtb3ZlOiBBcnJheTx7dGFiSGVhZGVyOiBIVE1MRWxlbWVudDsgbGVhZjogV29ya3NwYWNlTGVhZn0+ID0gW107XG5cblx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcblx0XHRcdC8vIE9ubHkgcHJvY2VzcyBsZWF2ZXMgaW4gdGhlIG1haW4gd29ya3NwYWNlIChub3Qgc2lkZWJhcnMpXG5cdFx0XHRjb25zdCB2aWV3ID0gbGVhZi52aWV3O1xuXHRcdFx0bGV0IGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblxuXHRcdFx0aWYgKHZpZXcpIHtcblx0XHRcdFx0Y29uc3Qgdmlld0FueSA9IHZpZXcgYXMgdW5rbm93biBhcyB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfTtcblx0XHRcdFx0Y29udGFpbmVyID0gdmlld0FueS5jb250YWluZXJFbCB8fCBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIWNvbnRhaW5lcikge1xuXHRcdFx0XHRjb25zdCBsZWFmQW55ID0gbGVhZiBhcyB1bmtub3duIGFzIHsgY29udGFpbmVyRWw/OiBIVE1MRWxlbWVudCB9O1xuXHRcdFx0XHRjb250YWluZXIgPSBsZWFmQW55LmNvbnRhaW5lckVsIHx8IG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChjb250YWluZXIpIHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgaXQncyBpbiB0aGUgbWFpbiB3b3Jrc3BhY2UgKHJvb3QsIG5vdCBzaWRlYmFyKVxuXHRcdFx0XHRjb25zdCByb290V29ya3NwYWNlID0gY29udGFpbmVyLmNsb3Nlc3QoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXZlcnRpY2FsLm1vZC1yb290Jyk7XG5cdFx0XHRcdGNvbnN0IGxlZnRTaWRlYmFyID0gY29udGFpbmVyLmNsb3Nlc3QoJy53b3Jrc3BhY2Utc3BsaXQubW9kLWxlZnQtc3BsaXQnKTtcblx0XHRcdFx0Y29uc3QgcmlnaHRTaWRlYmFyID0gY29udGFpbmVyLmNsb3Nlc3QoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXJpZ2h0LXNwbGl0Jyk7XG5cblx0XHRcdFx0Ly8gT25seSBwcm9jZXNzIG1haW4gd29ya3NwYWNlIGxlYXZlc1xuXHRcdFx0XHRpZiAocm9vdFdvcmtzcGFjZSAmJiAhbGVmdFNpZGViYXIgJiYgIXJpZ2h0U2lkZWJhcikge1xuXHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5ob21lU2VydmljZS5pc0dob3N0TGVhZihsZWFmKSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgdGFiSGVhZGVyID0gdGhpcy5nZXRUYWJIZWFkZXJGb3JMZWFmKGxlYWYpO1xuXHRcdFx0XHRcdFx0aWYgKHRhYkhlYWRlciAmJiB0YWJIZWFkZXIucGFyZW50RWxlbWVudCkge1xuXHRcdFx0XHRcdFx0XHRnaG9zdFRhYkhlYWRlcnNUb1JlbW92ZS5wdXNoKHt0YWJIZWFkZXIsIGxlYWZ9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0XHRcblx0XHQvLyBSZW1vdmUgYWxsIGdob3N0IHRhYiBoZWFkZXJzIHN5bmNocm9ub3VzbHkgQkVGT1JFIGFueSByZW5kZXJpbmdcblx0XHRnaG9zdFRhYkhlYWRlcnNUb1JlbW92ZS5mb3JFYWNoKCh7dGFiSGVhZGVyfSkgPT4ge1xuXHRcdFx0Y29uc3QgcGFyZW50ID0gdGFiSGVhZGVyLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRpZiAocGFyZW50ICYmIHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3dvcmtzcGFjZS10YWItaGVhZGVyLWNvbnRhaW5lci1pbm5lcicpKSB7XG5cdFx0XHRcdGNvbnN0IHRhYkhlYWRlckV4dGVuZGVkID0gdGFiSGVhZGVyIGFzIFRhYkhlYWRlckVsZW1lbnQ7XG5cdFx0XHRcdC8vIE9ubHkgcmVtb3ZlIGlmIG5vdCBhbHJlYWR5IHJlbW92ZWRcblx0XHRcdFx0aWYgKHBhcmVudC5jb250YWlucyh0YWJIZWFkZXIpKSB7XG5cdFx0XHRcdFx0dGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlUGFyZW50ID0gcGFyZW50O1xuXHRcdFx0XHRcdHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZU5leHRTaWJsaW5nID0gdGFiSGVhZGVyLm5leHRTaWJsaW5nO1xuXHRcdFx0XHRcdHRhYkhlYWRlci5yZW1vdmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gTm93IHVwZGF0ZSBvdGhlciB0YWIgaGVhZGVycyBpbiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgKG5vbi1jcml0aWNhbClcblx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMucGx1Z2luLmdldEhvbWVCYXNlU2V0dGluZ3MoKTtcblx0XHRcdGNvbnN0IGhvbWVCYXNlUGF0aCA9IHJlc29sdmVQYXRoU3luYyhob21lQmFzZVNldHRpbmdzLnR5cGUsIGhvbWVCYXNlU2V0dGluZ3MudmFsdWUsIHRoaXMucGx1Z2luLmFwcCk7XG5cblx0XHRcdC8vIFJlc3RvcmUgYW55IG5vbi1naG9zdCB0YWJzIHRoYXQgd2VyZSBpbmNvcnJlY3RseSByZW1vdmVkXG5cdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcblx0XHRcdFx0Ly8gT25seSBwcm9jZXNzIGxlYXZlcyBpbiB0aGUgbWFpbiB3b3Jrc3BhY2UgKG5vdCBzaWRlYmFycylcblx0XHRcdFx0Y29uc3QgdmlldyA9IGxlYWYudmlldztcblx0XHRcdFx0bGV0IGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblxuXHRcdFx0XHRpZiAodmlldykge1xuXHRcdFx0XHRcdGNvbnN0IHZpZXdBbnkgPSB2aWV3IGFzIHVua25vd24gYXMgeyBjb250YWluZXJFbD86IEhUTUxFbGVtZW50IH07XG5cdFx0XHRcdFx0Y29udGFpbmVyID0gdmlld0FueS5jb250YWluZXJFbCB8fCBudWxsO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCFjb250YWluZXIpIHtcblx0XHRcdFx0XHRjb25zdCBsZWFmQW55ID0gbGVhZiBhcyB1bmtub3duIGFzIHsgY29udGFpbmVyRWw/OiBIVE1MRWxlbWVudCB9O1xuXHRcdFx0XHRcdGNvbnRhaW5lciA9IGxlYWZBbnkuY29udGFpbmVyRWwgfHwgbnVsbDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChjb250YWluZXIpIHtcblx0XHRcdFx0XHQvLyBDaGVjayBpZiBpdCdzIGluIHRoZSBtYWluIHdvcmtzcGFjZSAocm9vdCwgbm90IHNpZGViYXIpXG5cdFx0XHRcdFx0Y29uc3Qgcm9vdFdvcmtzcGFjZSA9IGNvbnRhaW5lci5jbG9zZXN0KCcud29ya3NwYWNlLXNwbGl0Lm1vZC12ZXJ0aWNhbC5tb2Qtcm9vdCcpO1xuXHRcdFx0XHRcdGNvbnN0IGxlZnRTaWRlYmFyID0gY29udGFpbmVyLmNsb3Nlc3QoJy53b3Jrc3BhY2Utc3BsaXQubW9kLWxlZnQtc3BsaXQnKTtcblx0XHRcdFx0XHRjb25zdCByaWdodFNpZGViYXIgPSBjb250YWluZXIuY2xvc2VzdCgnLndvcmtzcGFjZS1zcGxpdC5tb2QtcmlnaHQtc3BsaXQnKTtcblxuXHRcdFx0XHRcdC8vIE9ubHkgcHJvY2VzcyBtYWluIHdvcmtzcGFjZSBsZWF2ZXNcblx0XHRcdFx0XHRpZiAocm9vdFdvcmtzcGFjZSAmJiAhbGVmdFNpZGViYXIgJiYgIXJpZ2h0U2lkZWJhcikge1xuXHRcdFx0XHRcdFx0Y29uc3QgaXNHaG9zdFRhYiA9IHRoaXMucGx1Z2luLmhvbWVTZXJ2aWNlLmlzR2hvc3RMZWFmKGxlYWYpO1xuXHRcdFx0XHRcdFx0Y29uc3QgdGFiSGVhZGVyID0gdGhpcy5nZXRUYWJIZWFkZXJGb3JMZWFmKGxlYWYpO1xuXHRcdFx0XHRcdFx0aWYgKCF0YWJIZWFkZXIpIHJldHVybjtcblxuXHRcdFx0XHRcdFx0Y29uc3QgdGFiSGVhZGVyRXh0ZW5kZWQgPSB0YWJIZWFkZXIgYXMgVGFiSGVhZGVyRWxlbWVudDtcblx0XHRcdFx0XHRcdGNvbnN0IGlzUmVtb3ZlZCA9IHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZVBhcmVudCAmJiAhdGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlUGFyZW50LmNvbnRhaW5zKHRhYkhlYWRlcik7XG5cblx0XHRcdFx0XHRcdGlmICghaXNHaG9zdFRhYikge1xuXHRcdFx0XHRcdFx0XHQvLyBOb3QgYSBnaG9zdCB0YWIgLSByZXN0b3JlIGlmIGl0IHdhcyByZW1vdmVkXG5cdFx0XHRcdFx0XHRcdGlmIChpc1JlbW92ZWQpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBwYXJlbnQgPSB0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VQYXJlbnQ7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbmV4dFNpYmxpbmcgPSB0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VOZXh0U2libGluZztcblx0XHRcdFx0XHRcdFx0XHRpZiAocGFyZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAobmV4dFNpYmxpbmcgJiYgbmV4dFNpYmxpbmcucGFyZW50RWxlbWVudCA9PT0gcGFyZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHBhcmVudC5pbnNlcnRCZWZvcmUodGFiSGVhZGVyLCBuZXh0U2libGluZyk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRwYXJlbnQuYXBwZW5kQ2hpbGQodGFiSGVhZGVyKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdGRlbGV0ZSB0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VQYXJlbnQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRkZWxldGUgdGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlTmV4dFNpYmxpbmc7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBpcyBhIG5vcm1hbCBob21lIGJhc2UgdGFiIChub3QgZ2hvc3QpIHRvIGFwcGx5IGFjdGl2ZSBzdGF0ZSBzdHlsaW5nIGlmIG5lZWRlZFxuXHRcdFx0XHRcdFx0XHQvLyBXZSBvbmx5IGRvIHRoaXMgaWYgd2UgaGF2ZSBhIHBhdGggdG8gY29tcGFyZSBhZ2FpbnN0XG5cdFx0XHRcdFx0XHRcdGlmIChob21lQmFzZVBhdGggJiYgbGVhZkhhc0ZpbGUobGVhZiwgaG9tZUJhc2VQYXRoKSkge1xuXHRcdFx0XHRcdFx0XHRcdHRhYkhlYWRlci5jbGFzc0xpc3QuYWRkKCdpcy1ob21lLWJhc2UtdGFiJyk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0dGFiSGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWhvbWUtYmFzZS10YWInKTtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdHRhYkhlYWRlci5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtaG9tZS1iYXNlLWdob3N0Jyk7XG5cdFx0XHRcdFx0XHRcdHRhYkhlYWRlci5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgdGhlIHRhYiBoZWFkZXIgZWxlbWVudCBmb3IgYSBnaXZlbiBsZWFmXG5cdCAqL1xuXHRwcml2YXRlIGdldFRhYkhlYWRlckZvckxlYWYobGVhZjogV29ya3NwYWNlTGVhZik6IEhUTUxFbGVtZW50IHwgbnVsbCB7XG5cdFx0Ly8gVHJ5IHRvIGdldCBmcm9tIGxlYWYncyBpbnRlcm5hbCBwcm9wZXJ0eSBmaXJzdCAoaWYgYXZhaWxhYmxlKVxuXHRcdGNvbnN0IGxlYWZBbnkgPSBsZWFmIGFzIHVua25vd24gYXMgeyB0YWJIZWFkZXJFbD86IEhUTUxFbGVtZW50IH07XG5cdFx0aWYgKGxlYWZBbnkudGFiSGVhZGVyRWwpIHtcblx0XHRcdHJldHVybiBsZWFmQW55LnRhYkhlYWRlckVsO1xuXHRcdH1cblxuXHRcdC8vIEZhbGxiYWNrOiBmaW5kIGJ5IHF1ZXJ5aW5nIERPTSB3aXRoaW4gdGhlIGxlYWYncyB3aW5kb3dcblx0XHRjb25zdCB2aWV3VHlwZSA9IGxlYWYudmlldz8uZ2V0Vmlld1R5cGUoKTtcblx0XHRpZiAoIXZpZXdUeXBlKSByZXR1cm4gbnVsbDtcblxuXHRcdC8vIEdldCB0aGUgZG9jdW1lbnQgZm9yIHRoaXMgbGVhZlxuXHRcdGNvbnN0IGRvYyA9IGxlYWYudmlldz8uY29udGFpbmVyRWw/Lm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQ7XG5cblx0XHQvLyBHZXQgdGhlIGFjdGl2ZSBsZWFmIHRvIGhlbHAgd2l0aCBtYXRjaGluZ1xuXHRcdGNvbnN0IGFjdGl2ZUxlYWYgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldE1vc3RSZWNlbnRMZWFmKCk7XG5cdFx0Y29uc3QgaXNBY3RpdmUgPSBsZWFmID09PSBhY3RpdmVMZWFmO1xuXG5cdFx0Ly8gRmluZCBhbGwgdGFiIGhlYWRlcnMgd2l0aCBtYXRjaGluZyB2aWV3IHR5cGUgaW4gVEhJUyB3aW5kb3dcblx0XHRjb25zdCB0YWJIZWFkZXJzID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoYC53b3Jrc3BhY2UtdGFiLWhlYWRlcltkYXRhLXR5cGU9XCIke3ZpZXdUeXBlfVwiXWApO1xuXHRcdFxuXHRcdC8vIElmIHRoaXMgaXMgdGhlIGFjdGl2ZSBsZWFmLCBwcmVmZXIgdGhlIGFjdGl2ZSB0YWIgaGVhZGVyIGluIFRISVMgd2luZG93XG5cdFx0aWYgKGlzQWN0aXZlKSB7XG5cdFx0XHRjb25zdCBhY3RpdmVIZWFkZXIgPSBkb2MucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS10YWItaGVhZGVyLmlzLWFjdGl2ZScpO1xuXHRcdFx0aWYgKGFjdGl2ZUhlYWRlciAmJiBhY3RpdmVIZWFkZXIuZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKSA9PT0gdmlld1R5cGUpIHtcblx0XHRcdFx0cmV0dXJuIGFjdGl2ZUhlYWRlciBhcyBIVE1MRWxlbWVudDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBUcnkgdG8gbWF0Y2ggYnkgY2hlY2tpbmcgaWYgaGVhZGVyJ3MgbGVhZiBwcm9wZXJ0eSBtYXRjaGVzXG5cdFx0Zm9yIChjb25zdCBoZWFkZXIgb2YgQXJyYXkuZnJvbSh0YWJIZWFkZXJzKSkge1xuXHRcdFx0Y29uc3QgaGVhZGVyRWwgPSBoZWFkZXIgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRjb25zdCBoZWFkZXJFbFdpdGhMZWFmID0gaGVhZGVyRWwgYXMgdW5rbm93biBhcyB7IGxlYWY/OiBXb3Jrc3BhY2VMZWFmIH07XG5cdFx0XHRjb25zdCBoZWFkZXJMZWFmID0gaGVhZGVyRWxXaXRoTGVhZi5sZWFmO1xuXHRcdFx0aWYgKGhlYWRlckxlYWYgPT09IGxlYWYpIHtcblx0XHRcdFx0cmV0dXJuIGhlYWRlckVsO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIElmIG9ubHkgb25lIHRhYiBoZWFkZXIgbWF0Y2hlcyB0aGUgdmlldyB0eXBlIGluIHRoaXMgd2luZG93LCBpdCdzIGxpa2VseSB0aGUgb25lXG5cdFx0aWYgKHRhYkhlYWRlcnMubGVuZ3RoID09PSAxKSB7XG5cdFx0XHRyZXR1cm4gdGFiSGVhZGVyc1swXSBhcyBIVE1MRWxlbWVudDtcblx0XHR9XG5cblx0XHQvLyBMYXN0IHJlc29ydDogaWYgdGhpcyBpcyBhY3RpdmUgYW5kIHdlIGZvdW5kIGFuIGFjdGl2ZSBoZWFkZXIgaW4gdGhpcyB3aW5kb3csIHVzZSBpdFxuXHRcdGlmIChpc0FjdGl2ZSkge1xuXHRcdFx0Y29uc3QgYWN0aXZlSGVhZGVyID0gZG9jLnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2UtdGFiLWhlYWRlci5pcy1hY3RpdmUnKTtcblx0XHRcdGlmIChhY3RpdmVIZWFkZXIpIHtcblx0XHRcdFx0cmV0dXJuIGFjdGl2ZUhlYWRlciBhcyBIVE1MRWxlbWVudDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDbG9zZSB0aGUgaG9tZSBiYXNlIHRhYlxuXHQgKiBXaGVuIGNhbGxlZCBmcm9tIGNvbnRleHQgbWVudTogT25seSBjbG9zZXMgdGhlIGdob3N0IHRhYiAodGhlIFwib2NjdXBpZWRcIiBzbG90KVxuXHQgKiBPdGhlciBob21lIGJhc2UgdGFicyBhcmUgbGVmdCBhbG9uZVxuXHQgKi9cblx0Y2xvc2VIb21lQmFzZShhY3R1YWxseUNsb3NlOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcblx0XHRjb25zdCBob21lQmFzZVNldHRpbmdzID0gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xuXHRcdGNvbnN0IGhvbWVCYXNlUGF0aCA9IHJlc29sdmVQYXRoU3luYyhob21lQmFzZVNldHRpbmdzLnR5cGUsIGhvbWVCYXNlU2V0dGluZ3MudmFsdWUsIHRoaXMucGx1Z2luLmFwcCk7XG5cdFx0XG5cdFx0Ly8gRmluZCB0aGUgZ2hvc3QgdGFiICh0aGUgXCJvY2N1cGllZFwiIHNsb3QgLSBwaW5uZWQgaG9tZSBiYXNlIHRhYilcblx0XHRjb25zdCBnaG9zdFRhYnM6IFdvcmtzcGFjZUxlYWZbXSA9IFtdO1xuXHRcdGNvbnN0IGFsbEhvbWVCYXNlTGVhdmVzOiBXb3Jrc3BhY2VMZWFmW10gPSBbXTtcblx0XHRcblx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcblx0XHRcdGNvbnN0IGlzR2hvc3QgPSB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5pc0dob3N0TGVhZihsZWFmKTtcblx0XHRcdGlmIChpc0dob3N0KSB7XG5cdFx0XHRcdGdob3N0VGFicy5wdXNoKGxlYWYpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRpZiAoaG9tZUJhc2VQYXRoICYmIGxlYWZIYXNGaWxlKGxlYWYsIGhvbWVCYXNlUGF0aCkpIHtcblx0XHRcdFx0YWxsSG9tZUJhc2VMZWF2ZXMucHVzaChsZWFmKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHtcblx0XHRcdC8vIFN0aWNreSBpY29uIGVuYWJsZWQ6IG9ubHkgY2xvc2UgdGhlIGdob3N0IHRhYihzKVxuXHRcdFx0Zm9yIChjb25zdCBnaG9zdFRhYiBvZiBnaG9zdFRhYnMpIHtcblx0XHRcdFx0dm9pZCBnaG9zdFRhYi5kZXRhY2goKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gU3RpY2t5IGljb24gZGlzYWJsZWQ6IGNsb3NlIGFsbCBob21lIGJhc2UgdGFic1xuXHRcdFx0Zm9yIChjb25zdCBsZWFmIG9mIGFsbEhvbWVCYXNlTGVhdmVzKSB7XG5cdFx0XHRcdHZvaWQgbGVhZi5kZXRhY2goKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBVcGRhdGUgdGFiIGhlYWRlcnMgYWZ0ZXIgY2xvc2luZ1xuXHRcdHRoaXMudXBkYXRlVGFiSGVhZGVycygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFBpbiB0aGUgaG9tZSBiYXNlIHRhYlxuXHQgKi9cblx0cGluSG9tZUJhc2VUYWIoKTogdm9pZCB7XG5cdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMucGx1Z2luLmdldEhvbWVCYXNlU2V0dGluZ3MoKTtcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSByZXNvbHZlUGF0aFN5bmMoaG9tZUJhc2VTZXR0aW5ncy50eXBlLCBob21lQmFzZVNldHRpbmdzLnZhbHVlLCB0aGlzLnBsdWdpbi5hcHApO1xuXHRcdGlmICghaG9tZUJhc2VQYXRoKSByZXR1cm47XG5cblx0XHRjb25zdCBob21lQmFzZUZpbGUgPSBnZXRGaWxlQnlQYXRoKHRoaXMucGx1Z2luLmFwcCwgaG9tZUJhc2VQYXRoKTtcblx0XHRpZiAoIWhvbWVCYXNlRmlsZSkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgaG9tZUJhc2VMZWFmID0gdGhpcy5wbHVnaW4uaG9tZVNlcnZpY2UuZmluZEV4aXN0aW5nSG9tZUJhc2VMZWFmKGhvbWVCYXNlRmlsZSk7XG5cdFx0aWYgKGhvbWVCYXNlTGVhZikge1xuXHRcdFx0aG9tZUJhc2VMZWFmLnNldFBpbm5lZCh0cnVlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogVW5waW4gdGhlIGhvbWUgYmFzZSB0YWJcblx0ICovXG5cdHVucGluSG9tZUJhc2VUYWIoKTogdm9pZCB7XG5cdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMucGx1Z2luLmdldEhvbWVCYXNlU2V0dGluZ3MoKTtcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSByZXNvbHZlUGF0aFN5bmMoaG9tZUJhc2VTZXR0aW5ncy50eXBlLCBob21lQmFzZVNldHRpbmdzLnZhbHVlLCB0aGlzLnBsdWdpbi5hcHApO1xuXHRcdGlmICghaG9tZUJhc2VQYXRoKSByZXR1cm47XG5cblx0XHRjb25zdCBob21lQmFzZUZpbGUgPSBnZXRGaWxlQnlQYXRoKHRoaXMucGx1Z2luLmFwcCwgaG9tZUJhc2VQYXRoKTtcblx0XHRpZiAoIWhvbWVCYXNlRmlsZSkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgaG9tZUJhc2VMZWFmID0gdGhpcy5wbHVnaW4uaG9tZVNlcnZpY2UuZmluZEV4aXN0aW5nSG9tZUJhc2VMZWFmKGhvbWVCYXNlRmlsZSk7XG5cdFx0aWYgKGhvbWVCYXNlTGVhZikge1xuXHRcdFx0aG9tZUJhc2VMZWFmLnNldFBpbm5lZChmYWxzZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIENoZWNrIGlmIHRoZSBob21lIGJhc2UgdGFiIGlzIHBpbm5lZFxuXHQgKi9cblx0aXNIb21lQmFzZVRhYlBpbm5lZCgpOiBib29sZWFuIHtcblx0XHRjb25zdCBob21lQmFzZVNldHRpbmdzID0gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xuXHRcdGNvbnN0IGhvbWVCYXNlUGF0aCA9IHJlc29sdmVQYXRoU3luYyhob21lQmFzZVNldHRpbmdzLnR5cGUsIGhvbWVCYXNlU2V0dGluZ3MudmFsdWUsIHRoaXMucGx1Z2luLmFwcCk7XG5cdFx0aWYgKCFob21lQmFzZVBhdGgpIHJldHVybiBmYWxzZTtcblxuXHRcdGNvbnN0IGhvbWVCYXNlRmlsZSA9IGdldEZpbGVCeVBhdGgodGhpcy5wbHVnaW4uYXBwLCBob21lQmFzZVBhdGgpO1xuXHRcdGlmICghaG9tZUJhc2VGaWxlKSByZXR1cm4gZmFsc2U7XG5cblx0XHRjb25zdCBob21lQmFzZUxlYWYgPSB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5maW5kRXhpc3RpbmdIb21lQmFzZUxlYWYoaG9tZUJhc2VGaWxlKTtcblx0XHRpZiAoIWhvbWVCYXNlTGVhZikgcmV0dXJuIGZhbHNlO1xuXG5cdFx0Y29uc3Qgdmlld1N0YXRlID0gaG9tZUJhc2VMZWFmLmdldFZpZXdTdGF0ZSgpO1xuXHRcdHJldHVybiB2aWV3U3RhdGUucGlubmVkID09PSB0cnVlO1xuXHR9XG59XG4iLCAiLyoqXHJcbiAqIE1vYmlsZSBCdXR0b24gU2VydmljZVxyXG4gKiBNYW5hZ2VzIHRoZSBtb2JpbGUgbmV3IHRhYiBidXR0b24gcmVwbGFjZW1lbnRcclxuICovXHJcblxyXG5pbXBvcnQgeyBQbGF0Zm9ybSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHR5cGUgSG9tZUJhc2VQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcblxyXG4vKipcclxuICogQ1NTIGNsYXNzIGZvciB3aGVuIG1vYmlsZSBidXR0b24gaXMgcmVwbGFjZWRcclxuICovXHJcbmNvbnN0IE1PQklMRV9IT01FX0NMQVNTID0gJ2hvbWUtYmFzZS1tb2JpbGUtZW5hYmxlZCc7XHJcblxyXG5leHBvcnQgY2xhc3MgTW9iaWxlQnV0dG9uU2VydmljZSB7XHJcblx0cHJpdmF0ZSBwbHVnaW46IEhvbWVCYXNlUGx1Z2luO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IEhvbWVCYXNlUGx1Z2luKSB7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSB0aGUgbW9iaWxlIGJ1dHRvbiBiYXNlZCBvbiBzZXR0aW5nc1xyXG5cdCAqL1xyXG5cdHVwZGF0ZSgpOiB2b2lkIHtcclxuXHRcdC8vIE9ubHkgYXBwbHkgb24gbW9iaWxlXHJcblx0XHRpZiAoIVBsYXRmb3JtLmlzTW9iaWxlKSB7XHJcblx0XHRcdHRoaXMucmVtb3ZlKCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU1vYmlsZU5ld1RhYikge1xyXG5cdFx0XHR0aGlzLmFwcGx5KCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQXBwbHkgdGhlIG1vYmlsZSBidXR0b24gcmVwbGFjZW1lbnRcclxuXHQgKi9cclxuXHRwcml2YXRlIGFwcGx5KCk6IHZvaWQge1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKE1PQklMRV9IT01FX0NMQVNTKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbW92ZSB0aGUgbW9iaWxlIGJ1dHRvbiByZXBsYWNlbWVudFxyXG5cdCAqL1xyXG5cdHJlbW92ZSgpOiB2b2lkIHtcclxuXHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShNT0JJTEVfSE9NRV9DTEFTUyk7XHJcblx0fVxyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFFQSxXQUFPLGVBQWUsU0FBUyxjQUFjLEVBQUUsT0FBTyxLQUFLLENBQUM7QUFFNUQsUUFBSSxXQUFXLFFBQVEsVUFBVTtBQUVqQyxRQUFNLDRCQUE0QjtBQUNsQyxRQUFNLDZCQUE2QjtBQUNuQyxRQUFNLDhCQUE4QjtBQUNwQyxRQUFNLGdDQUFnQztBQUN0QyxRQUFNLDZCQUE2QjtBQUVuQyxhQUFTLCtCQUErQixhQUFhO0FBWnJEO0FBY0ksWUFBTSxnQkFBZ0IsT0FBTyxJQUFJLFFBQVEsVUFBVSxnQkFBZ0I7QUFDbkUsYUFBTyxtQkFBaUIseUJBQWMsYUFBZCxtQkFBeUIsaUJBQXpCLG1CQUF1QztBQUFBLElBQ25FO0FBS0EsYUFBUyx1QkFBdUI7QUFyQmhDO0FBc0JJLFVBQUk7QUFFQSxjQUFNLEVBQUUsaUJBQWlCLFFBQVEsSUFBSSxPQUFP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QUFXLEdBQUc7QUFFdkMsUUFBSSxVQUFVO0FBRWIsWUFBTSxZQUFtRDtBQUFBLFFBQ3hELCtCQUF3QixHQUFHO0FBQUEsUUFDM0IsaUNBQXlCLEdBQUc7QUFBQSxRQUM1QixxQ0FBMkIsR0FBRztBQUFBLFFBQzlCLCtCQUF3QixHQUFHO0FBQUEsTUFDNUI7QUFFQSxZQUFNLFlBQVksVUFBVSxJQUFJO0FBQ2hDLFVBQUksQ0FBQyxVQUFXLFFBQU87QUFFdkIsZUFBUSwwREFBd0UsYUFBeEUsbUJBQW1GLGVBQW5GLG1CQUErRixhQUFZO0FBQUEsSUFDcEgsT0FBTztBQUVOLFlBQU0sVUFBaUQ7QUFBQSxRQUN0RCwrQkFBd0IsR0FBRztBQUFBLFFBQzNCLGlDQUF5QixHQUFHO0FBQUEsUUFDNUIscUNBQTJCLEdBQUc7QUFBQSxRQUM5QiwrQkFBd0IsR0FBRztBQUFBLE1BQzVCO0FBRUEsWUFBTSxPQUFPLFFBQVEsSUFBSTtBQUN6QixVQUFJLENBQUMsS0FBTSxRQUFPO0FBRWxCLFlBQU0sZUFBZSwwREFBMkcsdUJBQTNHLG1CQUErSCxpQkFBL0g7QUFFckIsZUFBTyxnREFBYyxVQUFkLG1CQUFxQixhQUFZO0FBQUEsSUFDekM7QUFBQSxFQUNEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxlQUF3QjtBQUcvQixRQUFJLE9BQU8sV0FBVyxlQUFlLE9BQU8sU0FBUztBQUNwRCxZQUFNLFNBQVMsT0FBTyxLQUFLLE9BQU8sT0FBTztBQUN6QyxZQUFNLFNBQVMsT0FBTyxRQUFRO0FBQzlCLGFBQ0MsV0FBVyxVQUNYLENBQUMsUUFBUSxjQUFjLEVBQUUsU0FBUyxNQUFNLEtBQ3hDLENBQUMsUUFBUSxZQUFZLFdBQVcsRUFBRSxLQUFLLE9BQUssT0FBTyxTQUFTLENBQUMsQ0FBQztBQUFBLElBRWhFO0FBQ0EsV0FBTztBQUFBLEVBQ1I7QUFBQTtBQUFBO0FBSUQ7IiwKICAibmFtZXMiOiBbImZvcm1hdCIsICJmb2xkZXIiLCAidGVtcGxhdGUiLCAiY3JlYXRlRGFpbHlOb3RlIiwgIm1vbWVudCIsICJnZXREYWlseU5vdGUiLCAiZ2V0QWxsRGFpbHlOb3RlcyIsICJjcmVhdGVXZWVrbHlOb3RlIiwgImdldFdlZWtseU5vdGUiLCAiZ2V0QWxsV2Vla2x5Tm90ZXMiLCAiY3JlYXRlTW9udGhseU5vdGUiLCAiZ2V0TW9udGhseU5vdGUiLCAiZ2V0QWxsTW9udGhseU5vdGVzIiwgImNyZWF0ZVF1YXJ0ZXJseU5vdGUiLCAiZ2V0UXVhcnRlcmx5Tm90ZSIsICJnZXRBbGxRdWFydGVybHlOb3RlcyIsICJjcmVhdGVZZWFybHlOb3RlIiwgImdldFllYXJseU5vdGUiLCAiZ2V0QWxsWWVhcmx5Tm90ZXMiLCAiaW1wb3J0X29ic2lkaWFuIiwgIkhvbWVCYXNlVHlwZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJTVVBQT1JURURfRVhURU5TSU9OUyIsICJTVVBQT1JURURfRVhURU5TSU9OUyIsICJTVVBQT1JURURfRVhURU5TSU9OUyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiT1ZpZXciLCAic2hvdWxkRm9jdXMiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJtYWluV29ya3NwYWNlIiwgImltcG9ydF9vYnNpZGlhbiIsICJwZXJpb2RpY05vdGVzIiwgInZlcnNpb24iLCAiaXNMZWdhY3kiXQp9Cg==
