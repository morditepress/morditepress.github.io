/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/utils/file-utils.ts
var file_utils_exports = {};
__export(file_utils_exports, {
  SUPPORTED_EXTENSIONS: () => SUPPORTED_EXTENSIONS2,
  VIEW_TYPE_MAP: () => VIEW_TYPE_MAP,
  getFileByPath: () => getFileByPath,
  getFileExtension: () => getFileExtension,
  getViewTypeForFile: () => getViewTypeForFile,
  isBaseFile: () => isBaseFile,
  isCanvasFile: () => isCanvasFile,
  isMarkdownLike: () => isMarkdownLike,
  isMdxFile: () => isMdxFile,
  isSupportedExtension: () => isSupportedExtension,
  leafHasFile: () => leafHasFile,
  pathsEqual: () => pathsEqual,
  trimFileExtension: () => trimFileExtension
});
function isSupportedExtension(extension) {
  return SUPPORTED_EXTENSIONS2.includes(extension);
}
function getFileExtension(path) {
  var _a;
  const parts = path.split(".");
  return parts.length > 1 ? ((_a = parts[parts.length - 1]) != null ? _a : "").toLowerCase() : "";
}
function getViewTypeForFile(file) {
  const ext = file.extension.toLowerCase();
  if (isSupportedExtension(ext)) {
    return VIEW_TYPE_MAP[ext];
  }
  return "markdown";
}
function isMarkdownLike(file) {
  const ext = file.extension.toLowerCase();
  return ext === "md" || ext === "mdx";
}
function isMdxFile(file) {
  return file.extension.toLowerCase() === "mdx";
}
function isCanvasFile(file) {
  return file.extension.toLowerCase() === "canvas";
}
function isBaseFile(file) {
  return file.extension.toLowerCase() === "base";
}
function getFileByPath(app, path) {
  const exactMatch = app.vault.getAbstractFileByPath(path);
  if (exactMatch instanceof import_obsidian6.TFile) {
    return exactMatch;
  }
  const file = app.metadataCache.getFirstLinkpathDest(path, "/");
  return file;
}
function trimFileExtension(path) {
  const lastDot = path.lastIndexOf(".");
  if (lastDot > 0) {
    const ext = path.slice(lastDot + 1).toLowerCase();
    if (SUPPORTED_EXTENSIONS2.includes(ext)) {
      return path.slice(0, lastDot);
    }
  }
  return path;
}
function pathsEqual(path1, path2) {
  const norm1 = trimFileExtension(path1).toLowerCase();
  const norm2 = trimFileExtension(path2).toLowerCase();
  return norm1 === norm2;
}
function leafHasFile(leaf, filePath) {
  var _a, _b;
  const state = (_b = (_a = leaf.view) == null ? void 0 : _a.getState) == null ? void 0 : _b.call(_a);
  const leafFile = state == null ? void 0 : state.file;
  if (!leafFile) return false;
  return pathsEqual(leafFile, filePath);
}
var import_obsidian6, SUPPORTED_EXTENSIONS2, VIEW_TYPE_MAP;
var init_file_utils = __esm({
  "src/utils/file-utils.ts"() {
    import_obsidian6 = require("obsidian");
    SUPPORTED_EXTENSIONS2 = ["md", "mdx", "canvas", "base"];
    VIEW_TYPE_MAP = {
      "md": "markdown",
      "mdx": "markdown",
      "canvas": "canvas",
      "base": "bases"
    };
  }
});

// node_modules/.pnpm/obsidian-daily-notes-interf_8d9fc24b0fc622d94fd11fa5e9b185b3/node_modules/obsidian-daily-notes-interface/dist/main.js
var require_main = __commonJS({
  "node_modules/.pnpm/obsidian-daily-notes-interf_8d9fc24b0fc622d94fd11fa5e9b185b3/node_modules/obsidian-daily-notes-interface/dist/main.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var obsidian = require("obsidian");
    var DEFAULT_DAILY_NOTE_FORMAT = "YYYY-MM-DD";
    var DEFAULT_WEEKLY_NOTE_FORMAT = "gggg-[W]ww";
    var DEFAULT_MONTHLY_NOTE_FORMAT = "YYYY-MM";
    var DEFAULT_QUARTERLY_NOTE_FORMAT = "YYYY-[Q]Q";
    var DEFAULT_YEARLY_NOTE_FORMAT = "YYYY";
    function shouldUsePeriodicNotesSettings(periodicity) {
      var _a, _b;
      const periodicNotes = window.app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a[periodicity]) == null ? void 0 : _b.enabled);
    }
    function getDailyNoteSettings() {
      var _a, _b, _c, _d;
      try {
        const { internalPlugins, plugins } = window.app;
        if (shouldUsePeriodicNotesSettings("daily")) {
          const { format: format2, folder: folder2, template: template2 } = ((_b = (_a = plugins.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.daily) || {};
          return {
            format: format2 || DEFAULT_DAILY_NOTE_FORMAT,
            folder: (folder2 == null ? void 0 : folder2.trim()) || "",
            template: (template2 == null ? void 0 : template2.trim()) || ""
          };
        }
        const { folder, format, template } = ((_d = (_c = internalPlugins.getPluginById("daily-notes")) == null ? void 0 : _c.instance) == null ? void 0 : _d.options) || {};
        return {
          format: format || DEFAULT_DAILY_NOTE_FORMAT,
          folder: (folder == null ? void 0 : folder.trim()) || "",
          template: (template == null ? void 0 : template.trim()) || ""
        };
      } catch (err) {
        console.info("No custom daily note settings found!", err);
      }
    }
    function getWeeklyNoteSettings() {
      var _a, _b, _c, _d, _e, _f, _g;
      try {
        const pluginManager = window.app.plugins;
        const calendarSettings = (_a = pluginManager.getPlugin("calendar")) == null ? void 0 : _a.options;
        const periodicNotesSettings = (_c = (_b = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _b.settings) == null ? void 0 : _c.weekly;
        if (shouldUsePeriodicNotesSettings("weekly")) {
          return {
            format: periodicNotesSettings.format || DEFAULT_WEEKLY_NOTE_FORMAT,
            folder: ((_d = periodicNotesSettings.folder) == null ? void 0 : _d.trim()) || "",
            template: ((_e = periodicNotesSettings.template) == null ? void 0 : _e.trim()) || ""
          };
        }
        const settings = calendarSettings || {};
        return {
          format: settings.weeklyNoteFormat || DEFAULT_WEEKLY_NOTE_FORMAT,
          folder: ((_f = settings.weeklyNoteFolder) == null ? void 0 : _f.trim()) || "",
          template: ((_g = settings.weeklyNoteTemplate) == null ? void 0 : _g.trim()) || ""
        };
      } catch (err) {
        console.info("No custom weekly note settings found!", err);
      }
    }
    function getMonthlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("monthly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.monthly) || {};
        return {
          format: settings.format || DEFAULT_MONTHLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom monthly note settings found!", err);
      }
    }
    function getQuarterlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("quarterly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.quarterly) || {};
        return {
          format: settings.format || DEFAULT_QUARTERLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom quarterly note settings found!", err);
      }
    }
    function getYearlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("yearly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.yearly) || {};
        return {
          format: settings.format || DEFAULT_YEARLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom yearly note settings found!", err);
      }
    }
    function join(...partSegments) {
      let parts = [];
      for (let i = 0, l = partSegments.length; i < l; i++) {
        parts = parts.concat(partSegments[i].split("/"));
      }
      const newParts = [];
      for (let i = 0, l = parts.length; i < l; i++) {
        const part = parts[i];
        if (!part || part === ".")
          continue;
        else
          newParts.push(part);
      }
      if (parts[0] === "")
        newParts.unshift("");
      return newParts.join("/");
    }
    function basename(fullPath) {
      let base = fullPath.substring(fullPath.lastIndexOf("/") + 1);
      if (base.lastIndexOf(".") != -1)
        base = base.substring(0, base.lastIndexOf("."));
      return base;
    }
    async function ensureFolderExists(path) {
      const dirs = path.replace(/\\/g, "/").split("/");
      dirs.pop();
      if (dirs.length) {
        const dir = join(...dirs);
        if (!window.app.vault.getAbstractFileByPath(dir)) {
          await window.app.vault.createFolder(dir);
        }
      }
    }
    async function getNotePath(directory, filename) {
      if (!filename.endsWith(".md")) {
        filename += ".md";
      }
      const path = obsidian.normalizePath(join(directory, filename));
      await ensureFolderExists(path);
      return path;
    }
    async function getTemplateInfo(template) {
      const { metadataCache, vault } = window.app;
      const templatePath = obsidian.normalizePath(template);
      if (templatePath === "/") {
        return Promise.resolve(["", null]);
      }
      try {
        const templateFile = metadataCache.getFirstLinkpathDest(templatePath, "");
        const contents = await vault.cachedRead(templateFile);
        const IFoldInfo = window.app.foldManager.load(templateFile);
        return [contents, IFoldInfo];
      } catch (err) {
        console.error(`Failed to read the daily note template '${templatePath}'`, err);
        new obsidian.Notice("Failed to read the daily note template");
        return ["", null];
      }
    }
    function getDateUID(date, granularity = "day") {
      const ts = date.clone().startOf(granularity).format();
      return `${granularity}-${ts}`;
    }
    function removeEscapedCharacters(format) {
      return format.replace(/\[[^\]]*\]/g, "");
    }
    function isFormatAmbiguous(format, granularity) {
      if (granularity === "week") {
        const cleanFormat = removeEscapedCharacters(format);
        return /w{1,2}/i.test(cleanFormat) && (/M{1,4}/.test(cleanFormat) || /D{1,4}/.test(cleanFormat));
      }
      return false;
    }
    function getDateFromFile(file, granularity) {
      return getDateFromFilename(file.basename, granularity);
    }
    function getDateFromPath(path, granularity) {
      return getDateFromFilename(basename(path), granularity);
    }
    function getDateFromFilename(filename, granularity) {
      const getSettings = {
        day: getDailyNoteSettings,
        week: getWeeklyNoteSettings,
        month: getMonthlyNoteSettings,
        quarter: getQuarterlyNoteSettings,
        year: getYearlyNoteSettings
      };
      const format = getSettings[granularity]().format.split("/").pop();
      const noteDate = window.moment(filename, format, true);
      if (!noteDate.isValid()) {
        return null;
      }
      if (isFormatAmbiguous(format, granularity)) {
        if (granularity === "week") {
          const cleanFormat = removeEscapedCharacters(format);
          if (/w{1,2}/i.test(cleanFormat)) {
            return window.moment(
              filename,
              // If format contains week, remove day & month formatting
              format.replace(/M{1,4}/g, "").replace(/D{1,4}/g, ""),
              false
            );
          }
        }
      }
      return noteDate;
    }
    var DailyNotesFolderMissingError = class extends Error {
    };
    async function createDailyNote2(date) {
      const app = window.app;
      const { vault } = app;
      const moment = window.moment;
      const { template, format, folder } = getDailyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*yesterday\s*}}/gi, date.clone().subtract(1, "day").format(format)).replace(/{{\s*tomorrow\s*}}/gi, date.clone().add(1, "d").format(format)));
        app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getDailyNote2(date, dailyNotes) {
      var _a;
      return (_a = dailyNotes[getDateUID(date, "day")]) != null ? _a : null;
    }
    function getAllDailyNotes2() {
      const { vault } = window.app;
      const { folder } = getDailyNoteSettings();
      const dailyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!dailyNotesFolder) {
        throw new DailyNotesFolderMissingError("Failed to find daily notes folder");
      }
      const dailyNotes = {};
      obsidian.Vault.recurseChildren(dailyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "day");
          if (date) {
            const dateString = getDateUID(date, "day");
            dailyNotes[dateString] = note;
          }
        }
      });
      return dailyNotes;
    }
    var WeeklyNotesFolderMissingError = class extends Error {
    };
    function getDaysOfWeek() {
      const { moment } = window;
      let weekStart = moment.localeData()._week.dow;
      const daysOfWeek = [
        "sunday",
        "monday",
        "tuesday",
        "wednesday",
        "thursday",
        "friday",
        "saturday"
      ];
      while (weekStart) {
        daysOfWeek.push(daysOfWeek.shift());
        weekStart--;
      }
      return daysOfWeek;
    }
    function getDayOfWeekNumericalValue(dayOfWeekName) {
      return getDaysOfWeek().indexOf(dayOfWeekName.toLowerCase());
    }
    async function createWeeklyNote2(date) {
      const { vault } = window.app;
      const { template, format, folder } = getWeeklyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*title\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi, (_, dayOfWeek, momentFormat) => {
          const day = getDayOfWeekNumericalValue(dayOfWeek);
          return date.weekday(day).format(momentFormat.trim());
        }));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getWeeklyNote2(date, weeklyNotes) {
      var _a;
      return (_a = weeklyNotes[getDateUID(date, "week")]) != null ? _a : null;
    }
    function getAllWeeklyNotes2() {
      const weeklyNotes = {};
      if (!appHasWeeklyNotesPluginLoaded()) {
        return weeklyNotes;
      }
      const { vault } = window.app;
      const { folder } = getWeeklyNoteSettings();
      const weeklyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!weeklyNotesFolder) {
        throw new WeeklyNotesFolderMissingError("Failed to find weekly notes folder");
      }
      obsidian.Vault.recurseChildren(weeklyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "week");
          if (date) {
            const dateString = getDateUID(date, "week");
            weeklyNotes[dateString] = note;
          }
        }
      });
      return weeklyNotes;
    }
    var MonthlyNotesFolderMissingError = class extends Error {
    };
    async function createMonthlyNote2(date) {
      const { vault } = window.app;
      const { template, format, folder } = getMonthlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getMonthlyNote2(date, monthlyNotes) {
      var _a;
      return (_a = monthlyNotes[getDateUID(date, "month")]) != null ? _a : null;
    }
    function getAllMonthlyNotes2() {
      const monthlyNotes = {};
      if (!appHasMonthlyNotesPluginLoaded()) {
        return monthlyNotes;
      }
      const { vault } = window.app;
      const { folder } = getMonthlyNoteSettings();
      const monthlyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!monthlyNotesFolder) {
        throw new MonthlyNotesFolderMissingError("Failed to find monthly notes folder");
      }
      obsidian.Vault.recurseChildren(monthlyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "month");
          if (date) {
            const dateString = getDateUID(date, "month");
            monthlyNotes[dateString] = note;
          }
        }
      });
      return monthlyNotes;
    }
    var QuarterlyNotesFolderMissingError = class extends Error {
    };
    async function createQuarterlyNote(date) {
      const { vault } = window.app;
      const { template, format, folder } = getQuarterlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getQuarterlyNote(date, quarterly) {
      var _a;
      return (_a = quarterly[getDateUID(date, "quarter")]) != null ? _a : null;
    }
    function getAllQuarterlyNotes() {
      const quarterly = {};
      if (!appHasQuarterlyNotesPluginLoaded()) {
        return quarterly;
      }
      const { vault } = window.app;
      const { folder } = getQuarterlyNoteSettings();
      const quarterlyFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!quarterlyFolder) {
        throw new QuarterlyNotesFolderMissingError("Failed to find quarterly notes folder");
      }
      obsidian.Vault.recurseChildren(quarterlyFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "quarter");
          if (date) {
            const dateString = getDateUID(date, "quarter");
            quarterly[dateString] = note;
          }
        }
      });
      return quarterly;
    }
    var YearlyNotesFolderMissingError = class extends Error {
    };
    async function createYearlyNote2(date) {
      const { vault } = window.app;
      const { template, format, folder } = getYearlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getYearlyNote2(date, yearlyNotes) {
      var _a;
      return (_a = yearlyNotes[getDateUID(date, "year")]) != null ? _a : null;
    }
    function getAllYearlyNotes2() {
      const yearlyNotes = {};
      if (!appHasYearlyNotesPluginLoaded()) {
        return yearlyNotes;
      }
      const { vault } = window.app;
      const { folder } = getYearlyNoteSettings();
      const yearlyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!yearlyNotesFolder) {
        throw new YearlyNotesFolderMissingError("Failed to find yearly notes folder");
      }
      obsidian.Vault.recurseChildren(yearlyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "year");
          if (date) {
            const dateString = getDateUID(date, "year");
            yearlyNotes[dateString] = note;
          }
        }
      });
      return yearlyNotes;
    }
    function appHasDailyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const dailyNotesPlugin = app.internalPlugins.plugins["daily-notes"];
      if (dailyNotesPlugin && dailyNotesPlugin.enabled) {
        return true;
      }
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.daily) == null ? void 0 : _b.enabled);
    }
    function appHasWeeklyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      if (app.plugins.getPlugin("calendar")) {
        return true;
      }
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.weekly) == null ? void 0 : _b.enabled);
    }
    function appHasMonthlyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.monthly) == null ? void 0 : _b.enabled);
    }
    function appHasQuarterlyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.quarterly) == null ? void 0 : _b.enabled);
    }
    function appHasYearlyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.yearly) == null ? void 0 : _b.enabled);
    }
    function getPeriodicNoteSettings(granularity) {
      const getSettings = {
        day: getDailyNoteSettings,
        week: getWeeklyNoteSettings,
        month: getMonthlyNoteSettings,
        quarter: getQuarterlyNoteSettings,
        year: getYearlyNoteSettings
      }[granularity];
      return getSettings();
    }
    function createPeriodicNote(granularity, date) {
      const createFn = {
        day: createDailyNote2,
        month: createMonthlyNote2,
        week: createWeeklyNote2
      };
      return createFn[granularity](date);
    }
    exports.DEFAULT_DAILY_NOTE_FORMAT = DEFAULT_DAILY_NOTE_FORMAT;
    exports.DEFAULT_MONTHLY_NOTE_FORMAT = DEFAULT_MONTHLY_NOTE_FORMAT;
    exports.DEFAULT_QUARTERLY_NOTE_FORMAT = DEFAULT_QUARTERLY_NOTE_FORMAT;
    exports.DEFAULT_WEEKLY_NOTE_FORMAT = DEFAULT_WEEKLY_NOTE_FORMAT;
    exports.DEFAULT_YEARLY_NOTE_FORMAT = DEFAULT_YEARLY_NOTE_FORMAT;
    exports.appHasDailyNotesPluginLoaded = appHasDailyNotesPluginLoaded;
    exports.appHasMonthlyNotesPluginLoaded = appHasMonthlyNotesPluginLoaded;
    exports.appHasQuarterlyNotesPluginLoaded = appHasQuarterlyNotesPluginLoaded;
    exports.appHasWeeklyNotesPluginLoaded = appHasWeeklyNotesPluginLoaded;
    exports.appHasYearlyNotesPluginLoaded = appHasYearlyNotesPluginLoaded;
    exports.createDailyNote = createDailyNote2;
    exports.createMonthlyNote = createMonthlyNote2;
    exports.createPeriodicNote = createPeriodicNote;
    exports.createQuarterlyNote = createQuarterlyNote;
    exports.createWeeklyNote = createWeeklyNote2;
    exports.createYearlyNote = createYearlyNote2;
    exports.getAllDailyNotes = getAllDailyNotes2;
    exports.getAllMonthlyNotes = getAllMonthlyNotes2;
    exports.getAllQuarterlyNotes = getAllQuarterlyNotes;
    exports.getAllWeeklyNotes = getAllWeeklyNotes2;
    exports.getAllYearlyNotes = getAllYearlyNotes2;
    exports.getDailyNote = getDailyNote2;
    exports.getDailyNoteSettings = getDailyNoteSettings;
    exports.getDateFromFile = getDateFromFile;
    exports.getDateFromPath = getDateFromPath;
    exports.getDateUID = getDateUID;
    exports.getMonthlyNote = getMonthlyNote2;
    exports.getMonthlyNoteSettings = getMonthlyNoteSettings;
    exports.getPeriodicNoteSettings = getPeriodicNoteSettings;
    exports.getQuarterlyNote = getQuarterlyNote;
    exports.getQuarterlyNoteSettings = getQuarterlyNoteSettings;
    exports.getTemplateInfo = getTemplateInfo;
    exports.getWeeklyNote = getWeeklyNote2;
    exports.getWeeklyNoteSettings = getWeeklyNoteSettings;
    exports.getYearlyNote = getYearlyNote2;
    exports.getYearlyNoteSettings = getYearlyNoteSettings;
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => HomeBasePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian12 = require("obsidian");

// src/settings.ts
var HomeBaseType = /* @__PURE__ */ ((HomeBaseType2) => {
  HomeBaseType2["File"] = "File";
  HomeBaseType2["Workspace"] = "Workspace";
  HomeBaseType2["Random"] = "Random file";
  HomeBaseType2["RandomFolder"] = "Random in folder";
  HomeBaseType2["Graph"] = "Graph view";
  HomeBaseType2["None"] = "Nothing";
  HomeBaseType2["Journal"] = "Journal";
  HomeBaseType2["DailyNote"] = "Daily Note";
  HomeBaseType2["WeeklyNote"] = "Weekly Note";
  HomeBaseType2["MonthlyNote"] = "Monthly Note";
  HomeBaseType2["YearlyNote"] = "Yearly Note";
  return HomeBaseType2;
})(HomeBaseType || {});
var DEFAULT_SETTINGS = {
  // General
  homeBaseType: "File" /* File */,
  homeBaseValue: "",
  openOnStartup: true,
  openViewMode: "default",
  openMode: "replace-all",
  manualOpenMode: "retain",
  // Tab Behavior
  replaceNewTab: false,
  newTabMode: "only-when-empty",
  // Default: only replace when no tabs are open
  openWhenAllTabsClosed: true,
  // Default: open home base when all tabs are closed
  useDifferentFileForNewTab: false,
  newTabType: "File" /* File */,
  newTabValue: "",
  newTabSeparateMobile: false,
  mobileNewTabType: "File" /* File */,
  mobileNewTabValue: "",
  // UI Features
  showStickyHomeIcon: false,
  stickyIconName: "home",
  hideHomeTabHeader: false,
  replaceMobileNewTab: false,
  // Mobile
  separateMobile: false,
  mobileHomeBaseType: "File" /* File */,
  mobileHomeBaseValue: "",
  // Automation
  commandOnOpen: "",
  // View behavior
  revertView: false,
  autoScroll: false,
  hideReleaseNotes: false
  // OFF by default
};
var VIEW_MODE_OPTIONS = {
  "default": "Default",
  "preview": "Reading view",
  "source": "Source mode",
  "live": "Live Preview"
};
var NEW_TAB_MODE_OPTIONS = {
  "only-when-empty": "Only when no tabs are open",
  "always": "Always replace new tabs"
};
var OPENING_MODE_OPTIONS = {
  "replace-all": "Replace all open notes",
  "replace-last": "Replace last note",
  "retain": "Keep open notes"
};
var UNCHANGEABLE_TYPES = [
  "Random file" /* Random */,
  "Graph view" /* Graph */,
  "Nothing" /* None */,
  "Daily Note" /* DailyNote */,
  "Weekly Note" /* WeeklyNote */,
  "Monthly Note" /* MonthlyNote */,
  "Yearly Note" /* YearlyNote */
];

// src/ui/settings-tab.ts
var import_obsidian5 = require("obsidian");

// src/utils/settings-compat.ts
var import_obsidian = require("obsidian");
var ObsidianModule = __toESM(require("obsidian"), 1);
function createSettingsGroup(containerEl, heading, manifestId) {
  if ((0, import_obsidian.requireApiVersion)("1.11.0")) {
    const SettingGroupClass = ObsidianModule.SettingGroup;
    if (SettingGroupClass) {
      const group = heading ? new SettingGroupClass(containerEl).setHeading(heading) : new SettingGroupClass(containerEl);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  if (manifestId) {
    containerEl.addClass(`${manifestId}-settings-compat`);
  }
  if (heading) {
    const headingEl = containerEl.createDiv("setting-group-heading");
    headingEl.createEl("h3", { text: heading });
  }
  return {
    addSetting(cb) {
      const setting = new import_obsidian.Setting(containerEl);
      cb(setting);
    }
  };
}

// src/ui/file-suggest.ts
var import_obsidian2 = require("obsidian");
var SUPPORTED_EXTENSIONS = ["md", "mdx", "canvas", "base"];
var FilePathSuggest = class extends import_obsidian2.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(query) {
    const lowerQuery = query.toLowerCase();
    const files = [];
    this.app.vault.getAllLoadedFiles().forEach((file) => {
      if (file instanceof import_obsidian2.TFile) {
        if (SUPPORTED_EXTENSIONS.includes(file.extension)) {
          if (file.path.toLowerCase().includes(lowerQuery) || file.basename.toLowerCase().includes(lowerQuery)) {
            files.push(file);
          }
        }
      }
    });
    files.sort((a, b) => {
      const aStartsWith = a.path.toLowerCase().startsWith(lowerQuery);
      const bStartsWith = b.path.toLowerCase().startsWith(lowerQuery);
      if (aStartsWith && !bStartsWith) return -1;
      if (!aStartsWith && bStartsWith) return 1;
      return a.path.localeCompare(b.path);
    });
    return files.slice(0, 20);
  }
  renderSuggestion(file, el) {
    el.createEl("div", {
      text: file.basename,
      cls: "suggestion-title"
    });
    if (file.parent && file.parent.path !== "/") {
      el.createEl("small", {
        text: file.parent.path,
        cls: "suggestion-path"
      });
    }
    if (file.extension !== "md") {
      el.createEl("span", {
        text: file.extension.toUpperCase(),
        cls: "suggestion-flair"
      });
    }
  }
  selectSuggestion(file) {
    this.inputEl.value = file.path;
    this.inputEl.trigger("input");
    this.close();
  }
};
var FolderSuggest = class extends import_obsidian2.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(query) {
    const lowerQuery = query.toLowerCase();
    const folders = [];
    this.app.vault.getAllLoadedFiles().forEach((file) => {
      if (file instanceof import_obsidian2.TFolder) {
        if (file.path.toLowerCase().includes(lowerQuery)) {
          folders.push(file);
        }
      }
    });
    folders.sort((a, b) => a.path.localeCompare(b.path));
    return folders.slice(0, 20);
  }
  renderSuggestion(folder, el) {
    el.createEl("div", { text: folder.path || "/" });
  }
  selectSuggestion(folder) {
    this.inputEl.value = folder.path;
    this.inputEl.trigger("input");
    this.close();
  }
};
var WorkspaceSuggest = class extends import_obsidian2.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(query) {
    var _a, _b, _c;
    const workspacesPlugin = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b.workspaces;
    if (!(workspacesPlugin == null ? void 0 : workspacesPlugin.enabled) || !((_c = workspacesPlugin.instance) == null ? void 0 : _c.workspaces)) {
      return [];
    }
    const workspaces = Object.keys(workspacesPlugin.instance.workspaces);
    const lowerQuery = query.toLowerCase();
    return workspaces.filter(
      (workspace) => workspace.toLowerCase().includes(lowerQuery)
    );
  }
  renderSuggestion(workspace, el) {
    el.createEl("div", { text: workspace });
  }
  selectSuggestion(workspace) {
    this.inputEl.value = workspace;
    this.inputEl.trigger("input");
    this.close();
  }
};

// src/ui/command-suggest.ts
var import_obsidian3 = require("obsidian");
var CommandSuggest = class extends import_obsidian3.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(query) {
    var _a;
    const lowerQuery = query.toLowerCase();
    const commands = [];
    const appWithCommands = this.app;
    const allCommands = (_a = appWithCommands.commands) == null ? void 0 : _a.commands;
    if (allCommands) {
      for (const command of Object.values(allCommands)) {
        if (command.name.toLowerCase().includes(lowerQuery) || command.id.toLowerCase().includes(lowerQuery)) {
          commands.push(command);
        }
      }
    }
    commands.sort((a, b) => a.name.localeCompare(b.name));
    return commands.slice(0, 30);
  }
  renderSuggestion(command, el) {
    el.createEl("div", {
      text: command.name,
      cls: "suggestion-title"
    });
    el.createEl("small", {
      text: command.id,
      cls: "suggestion-note"
    });
  }
  selectSuggestion(command) {
    this.inputEl.value = command.id;
    this.inputEl.trigger("input");
    this.close();
  }
};
function getCommandById(app, commandId) {
  var _a;
  const appWithCommands = app;
  const commands = (_a = appWithCommands.commands) == null ? void 0 : _a.commands;
  return commands == null ? void 0 : commands[commandId];
}
function executeCommand(app, commandId) {
  var _a, _b;
  if (!commandId) return false;
  const appWithCommands = app;
  const result = (_b = (_a = appWithCommands.commands) == null ? void 0 : _a.executeCommandById) == null ? void 0 : _b.call(_a, commandId);
  return result !== false;
}

// src/ui/icon-picker.ts
var import_obsidian4 = require("obsidian");
var IconPicker = class extends import_obsidian4.Modal {
  constructor(app, currentIcon, callback) {
    super(app);
    this.searchResults = [];
    this.selectedIcon = currentIcon;
    this.callback = callback;
  }
  onOpen() {
    this.containerEl.addClass("mod-confirmation");
    this.modalEl.addClass("iconic-icon-picker");
    this.setTitle("Change icon");
    const searchSetting = new import_obsidian4.Setting(this.contentEl);
    if (!import_obsidian4.Platform.isPhone) {
      searchSetting.setName("Search");
    }
    searchSetting.addSearch((searchField) => {
      searchField.setPlaceholder("Search icons...").onChange(() => this.updateSearchResults());
      searchField.inputEl.enterKeyHint = "go";
      this.searchField = searchField;
    });
    if (this.selectedIcon) {
      this.searchField.setValue(this.selectedIcon);
    }
    this.searchResultsSetting = new import_obsidian4.Setting(this.contentEl);
    this.searchResultsSetting.settingEl.addClass("iconic-search-results");
    this.searchResultsSetting.settingEl.tabIndex = 0;
    this.searchResultsSetting.settingEl.addEventListener("wheel", (event) => {
      if (document.body.hasClass("mod-rtl")) {
        this.searchResultsSetting.settingEl.scrollLeft -= event.deltaY;
      } else {
        this.searchResultsSetting.settingEl.scrollLeft += event.deltaY;
      }
    }, { passive: true });
    const buttonContainer = this.modalEl.createDiv({ cls: "modal-button-container" });
    new import_obsidian4.ButtonComponent(buttonContainer).setButtonText("Cancel").onClick(() => this.close()).buttonEl.addClass("mod-cancel");
    new import_obsidian4.ButtonComponent(buttonContainer).setButtonText("Save").setCta().onClick(() => {
      this.callback(this.selectedIcon);
      this.close();
    });
    requestAnimationFrame(() => {
      this.searchField.inputEl.select();
      this.updateSearchResults();
    });
  }
  /**
   * Update search results based on current query
   */
  updateSearchResults() {
    const query = this.searchField.getValue().toLowerCase().trim();
    const fuzzySearch = (0, import_obsidian4.prepareFuzzySearch)(query);
    const matches = [];
    const iconIds = (0, import_obsidian4.getIconIds)();
    if (query) {
      for (const iconId of iconIds) {
        const iconName = this.formatIconName(iconId);
        if (iconId === query || iconId.toLowerCase() === query) {
          matches.push([0, [iconId, iconName]]);
        } else {
          const fuzzyMatch = fuzzySearch(iconName);
          if (fuzzyMatch) {
            matches.push([fuzzyMatch.score, [iconId, iconName]]);
          }
        }
      }
    } else {
      for (const iconId of iconIds) {
        const iconName = this.formatIconName(iconId);
        matches.push([0, [iconId, iconName]]);
      }
    }
    matches.sort(([scoreA], [scoreB]) => scoreA > scoreB ? -1 : 1);
    this.searchResults.length = 0;
    const maxResults = 100;
    for (const [, iconEntry] of matches) {
      this.searchResults.push(iconEntry);
      if (this.searchResults.length >= maxResults) break;
    }
    this.searchResultsSetting.clear();
    for (const [iconId, iconName] of this.searchResults) {
      this.searchResultsSetting.addExtraButton((iconButton) => {
        iconButton.setTooltip(iconName, {
          delay: 300,
          placement: import_obsidian4.Platform.isPhone ? "top" : "bottom"
        });
        const iconEl = iconButton.extraSettingsEl;
        iconEl.addClass("iconic-search-result");
        iconEl.tabIndex = -1;
        (0, import_obsidian4.setIcon)(iconEl, iconId);
        if (iconId === this.selectedIcon) {
          iconEl.addClass("is-selected");
        }
        iconEl.addEventListener("click", () => {
          this.selectedIcon = iconId;
          this.callback(iconId);
          this.close();
        });
        if (import_obsidian4.Platform.isPhone) {
          iconEl.addEventListener("contextmenu", () => {
            var _a;
            (_a = navigator.vibrate) == null ? void 0 : _a.call(navigator, 100);
          });
        }
      });
    }
    if (this.searchResults.length === 0) {
      this.searchResultsSetting.addExtraButton((button) => {
        button.extraSettingsEl.addClasses(["iconic-invisible", "iconic-search-result"]);
      });
    }
  }
  /**
   * Format icon ID into readable name
   */
  formatIconName(iconId) {
    let name = iconId.replace(/^lucide-/, "");
    name = name.replace(/-/g, " ");
    return name.split(" ").map(
      (word) => word.charAt(0).toUpperCase() + word.slice(1)
    ).join(" ");
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/ui/settings-tab.ts
var HomeBaseSettingTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    const isMobile = this.plugin.settings.separateMobile;
    const activeType = isMobile ? this.plugin.settings.mobileHomeBaseType : this.plugin.settings.homeBaseType;
    const activeValue = isMobile ? this.plugin.settings.mobileHomeBaseValue : this.plugin.settings.homeBaseValue;
    const generalGroup = createSettingsGroup(containerEl, void 0, "home-base");
    generalGroup.addSetting((setting) => {
      setting.setName("Type").setDesc("What to open as your home base").addDropdown((dropdown) => {
        let pluginDisabled = false;
        for (const type of Object.values(HomeBaseType)) {
          if (!this.plugin.hasRequiredPlugin(type)) {
            if (type === activeType) {
              pluginDisabled = true;
              dropdown.addOption(type, type);
            } else {
              dropdown.selectEl.createEl("option", {
                text: type,
                attr: { disabled: "true" }
              });
              continue;
            }
          } else {
            dropdown.addOption(type, type);
          }
        }
        dropdown.setValue(activeType || "File" /* File */).onChange(async (value) => {
          if (isMobile) {
            this.plugin.settings.mobileHomeBaseType = value;
          } else {
            this.plugin.settings.homeBaseType = value;
          }
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
        if (pluginDisabled) {
          setting.descEl.createDiv({
            text: "The plugin required for this home page type isn't available.",
            cls: "mod-warning"
          });
        }
      });
    });
    if (!UNCHANGEABLE_TYPES.includes(activeType)) {
      generalGroup.addSetting((setting) => {
        let desc = "";
        let placeholder = "";
        if (activeType === "File" /* File */) {
          desc = "The file to open as your home base (supports .md, .mdx, .canvas, .base)";
          placeholder = "Path to home base file";
        } else if (activeType === "Workspace" /* Workspace */) {
          desc = "The workspace to load as your home base";
          placeholder = "Workspace name";
        } else if (activeType === "Random in folder" /* RandomFolder */) {
          desc = "The folder to pick a random file from";
          placeholder = "Folder path";
        } else if (activeType === "Journal" /* Journal */) {
          desc = "The journal name";
          placeholder = "Journal name";
        }
        setting.setName(activeType === "File" /* File */ ? "File" : activeType === "Workspace" /* Workspace */ ? "Workspace" : activeType === "Random in folder" /* RandomFolder */ ? "Folder" : activeType === "Journal" /* Journal */ ? "Journal" : "Value").setDesc(desc).addText((text) => {
          if (activeType === "File" /* File */) {
            new FilePathSuggest(this.app, text.inputEl);
          } else if (activeType === "Workspace" /* Workspace */) {
            new WorkspaceSuggest(this.app, text.inputEl);
          } else if (activeType === "Random in folder" /* RandomFolder */) {
            new FolderSuggest(this.app, text.inputEl);
          }
          text.setPlaceholder(placeholder).setValue(activeValue || "").onChange(async (value) => {
            if (isMobile) {
              this.plugin.settings.mobileHomeBaseValue = value;
              if (activeType === "File" /* File */) {
                this.plugin.settings.mobileHomeBasePath = value;
              }
            } else {
              this.plugin.settings.homeBaseValue = value;
              if (activeType === "File" /* File */) {
                this.plugin.settings.homeBasePath = value;
              }
            }
            await this.plugin.saveSettings();
          });
        });
      });
    }
    generalGroup.addSetting((setting) => {
      setting.setName("Open on startup").setDesc("Open the home base when launching Obsidian").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.openOnStartup).onChange(async (value) => {
          this.plugin.settings.openOnStartup = value;
          await this.plugin.saveSettings();
        });
      });
      if ((0, import_obsidian5.requireApiVersion)("1.11.0")) {
        const nativeOpenBehavior = this.plugin.homeService.getNativeOpenBehavior();
        if (nativeOpenBehavior) {
          setting.descEl.createDiv({
            text: `Note: This will override Obsidian's native "Default file to open" setting (currently set to "${nativeOpenBehavior}").`,
            cls: "mod-warning"
          });
        }
      }
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Opening mode (startup)").setDesc("How to handle existing tabs when opening on startup").addDropdown((dropdown) => {
        for (const [value, label] of Object.entries(OPENING_MODE_OPTIONS)) {
          dropdown.addOption(value, label);
        }
        dropdown.setValue(this.plugin.settings.openMode).onChange(async (value) => {
          this.plugin.settings.openMode = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Opening mode (manual)").setDesc("How to handle existing tabs when opening manually").addDropdown((dropdown) => {
        for (const [value, label] of Object.entries(OPENING_MODE_OPTIONS)) {
          dropdown.addOption(value, label);
        }
        dropdown.setValue(this.plugin.settings.manualOpenMode).onChange(async (value) => {
          this.plugin.settings.manualOpenMode = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("View mode").setDesc("How to open Markdown files").addDropdown((dropdown) => {
        for (const [value, label] of Object.entries(VIEW_MODE_OPTIONS)) {
          dropdown.addOption(value, label);
        }
        dropdown.setValue(this.plugin.settings.openViewMode).onChange(async (value) => {
          this.plugin.settings.openViewMode = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Revert view on close").setDesc("When navigating away from the home base, restore the default view").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.revertView).onChange(async (value) => {
          this.plugin.settings.revertView = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Auto-scroll").setDesc("When opening the home base, scroll to the bottom and focus on the last line").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.autoScroll).onChange(async (value) => {
          this.plugin.settings.autoScroll = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Hide release notes").setDesc("Never display release notes when Obsidian updates").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.hideReleaseNotes).onChange(async (value) => {
          this.plugin.settings.hideReleaseNotes = value;
          await this.plugin.saveSettings();
        });
      });
    });
    const tabGroup = createSettingsGroup(containerEl, "Tab Behavior", "home-base");
    tabGroup.addSetting((setting) => {
      setting.setName("Open home base when all tabs are closed").setDesc("When you close all tabs, automatically open the home base").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.openWhenAllTabsClosed).onChange(async (value) => {
          this.plugin.settings.openWhenAllTabsClosed = value;
          await this.plugin.saveSettings();
        });
      });
    });
    tabGroup.addSetting((setting) => {
      setting.setName("Replace new tabs").setDesc('Open home base instead of new empty tabs (works independently of "open home base when all tabs are closed")').addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.replaceNewTab).onChange(async (value) => {
          this.plugin.settings.replaceNewTab = value;
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.replaceNewTab) {
      tabGroup.addSetting((setting) => {
        setting.setName("New tab replacement mode").setDesc("When to replace new tabs (only when no tabs are open, or always)").addDropdown((dropdown) => {
          for (const [value, label] of Object.entries(NEW_TAB_MODE_OPTIONS)) {
            dropdown.addOption(value, label);
          }
          dropdown.setValue(this.plugin.settings.newTabMode).onChange(async (value) => {
            this.plugin.settings.newTabMode = value;
            await this.plugin.saveSettings();
          });
        });
      });
      tabGroup.addSetting((setting) => {
        setting.setName("Use different home base for new tabs").setDesc("Configure a different home base to open for new tabs (instead of the main home base)").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.useDifferentFileForNewTab).onChange(async (value) => {
            this.plugin.settings.useDifferentFileForNewTab = value;
            await this.plugin.saveSettings();
            const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
            const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
            this.display();
            requestAnimationFrame(() => {
              if (scrollContainer) {
                scrollContainer.scrollTop = scrollTop;
              }
            });
          });
        });
      });
      if (this.plugin.settings.useDifferentFileForNewTab) {
        const desktopType = this.plugin.settings.newTabType || "File" /* File */;
        const desktopValue = this.plugin.settings.newTabValue || "";
        tabGroup.addSetting((setting) => {
          setting.setName("New tab type").setDesc("What to open for new tabs").addDropdown((dropdown) => {
            let pluginDisabled = false;
            for (const type of Object.values(HomeBaseType)) {
              if (!this.plugin.hasRequiredPlugin(type)) {
                if (type === desktopType) {
                  pluginDisabled = true;
                  dropdown.addOption(type, type);
                } else {
                  dropdown.selectEl.createEl("option", {
                    text: type,
                    attr: { disabled: "true" }
                  });
                  continue;
                }
              } else {
                dropdown.addOption(type, type);
              }
            }
            dropdown.setValue(desktopType).onChange(async (value) => {
              this.plugin.settings.newTabType = value;
              await this.plugin.saveSettings();
              const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
              const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
              this.display();
              requestAnimationFrame(() => {
                if (scrollContainer) {
                  scrollContainer.scrollTop = scrollTop;
                }
              });
            });
            if (pluginDisabled) {
              setting.descEl.createDiv({
                text: "The plugin required for this new tab type isn't available.",
                cls: "mod-warning"
              });
            }
          });
        });
        if (!UNCHANGEABLE_TYPES.includes(desktopType)) {
          tabGroup.addSetting((setting) => {
            let desc = "";
            let placeholder = "";
            if (desktopType === "File" /* File */) {
              desc = "The file to open for new tabs (supports .md, .mdx, .canvas, .base)";
              placeholder = "Path to new tab file";
            } else if (desktopType === "Workspace" /* Workspace */) {
              desc = "The workspace to load for new tabs";
              placeholder = "Workspace name";
            } else if (desktopType === "Random in folder" /* RandomFolder */) {
              desc = "The folder to pick a random file from for new tabs";
              placeholder = "Folder path";
            } else if (desktopType === "Journal" /* Journal */) {
              desc = "The journal name for new tabs";
              placeholder = "Journal name";
            }
            setting.setName(desktopType === "File" /* File */ ? "New tab file" : desktopType === "Workspace" /* Workspace */ ? "New tab workspace" : desktopType === "Random in folder" /* RandomFolder */ ? "New tab folder" : desktopType === "Journal" /* Journal */ ? "New tab journal" : "New tab value").setDesc(desc).addText((text) => {
              if (desktopType === "File" /* File */) {
                new FilePathSuggest(this.app, text.inputEl);
              } else if (desktopType === "Workspace" /* Workspace */) {
                new WorkspaceSuggest(this.app, text.inputEl);
              } else if (desktopType === "Random in folder" /* RandomFolder */) {
                new FolderSuggest(this.app, text.inputEl);
              }
              text.setPlaceholder(placeholder).setValue(desktopValue || "").onChange(async (value) => {
                this.plugin.settings.newTabValue = value;
                await this.plugin.saveSettings();
              });
            });
          });
        }
      }
    }
    const uiGroup = createSettingsGroup(containerEl, "UI Features", "home-base");
    uiGroup.addSetting((setting) => {
      setting.setName("Sticky home icon").setDesc("Show a home icon in the tab bar that stays pinned to the left (desktop only)").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showStickyHomeIcon).onChange(async (value) => {
          this.plugin.settings.showStickyHomeIcon = value;
          await this.plugin.saveSettings();
          this.plugin.updateStickyTabIcon();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.showStickyHomeIcon) {
      uiGroup.addSetting((setting) => {
        setting.setName("Icon").setDesc("The icon to display in the sticky home icon").addButton((button) => {
          const iconName = this.plugin.settings.stickyIconName || "home";
          button.setButtonText("Change icon").setIcon(iconName).onClick(() => {
            const picker = new IconPicker(
              this.app,
              this.plugin.settings.stickyIconName,
              (icon) => {
                void (async () => {
                  this.plugin.settings.stickyIconName = icon;
                  await this.plugin.saveSettings();
                  this.plugin.stickyTabService.update();
                  this.display();
                })();
              }
            );
            picker.open();
          });
        });
      });
      uiGroup.addSetting((setting) => {
        setting.setName("Hide tab header").setDesc("Hide the sticky home tab header when it's open, using the sticky icon as the tab indicator").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.hideHomeTabHeader).onChange(async (value) => {
            this.plugin.settings.hideHomeTabHeader = value;
            await this.plugin.saveSettings();
            this.plugin.stickyTabService.updateTabHeaders();
          });
        });
      });
    }
    const mobileGroup = createSettingsGroup(containerEl, "Mobile", "home-base");
    mobileGroup.addSetting((setting) => {
      setting.setName("Separate mobile home base").setDesc("Use a different home base on mobile devices").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.separateMobile).onChange(async (value) => {
          this.plugin.settings.separateMobile = value;
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.separateMobile) {
      mobileGroup.addSetting((setting) => {
        setting.setName("Mobile home base").setDesc("What to open as your home base on mobile").addDropdown((dropdown) => {
          const mobileType = this.plugin.settings.mobileHomeBaseType || "File" /* File */;
          let pluginDisabled = false;
          for (const type of Object.values(HomeBaseType)) {
            if (!this.plugin.hasRequiredPlugin(type)) {
              if (type === mobileType) {
                pluginDisabled = true;
                dropdown.addOption(type, type);
              } else {
                dropdown.selectEl.createEl("option", {
                  text: type,
                  attr: { disabled: "true" }
                });
                continue;
              }
            } else {
              dropdown.addOption(type, type);
            }
          }
          dropdown.setValue(mobileType).onChange(async (value) => {
            this.plugin.settings.mobileHomeBaseType = value;
            await this.plugin.saveSettings();
            const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
            const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
            this.display();
            requestAnimationFrame(() => {
              if (scrollContainer) {
                scrollContainer.scrollTop = scrollTop;
              }
            });
          });
          if (pluginDisabled) {
            setting.descEl.createDiv({
              text: "The plugin required for this home page type isn't available.",
              cls: "mod-warning"
            });
          }
        });
      });
      if (!UNCHANGEABLE_TYPES.includes(this.plugin.settings.mobileHomeBaseType)) {
        mobileGroup.addSetting((setting) => {
          const mobileType = this.plugin.settings.mobileHomeBaseType;
          let desc = "";
          let placeholder = "";
          if (mobileType === "File" /* File */) {
            desc = "The file to open as your home base on mobile";
            placeholder = "Path to home base file";
          } else if (mobileType === "Workspace" /* Workspace */) {
            desc = "The workspace to load as your home base on mobile";
            placeholder = "Workspace name";
          } else if (mobileType === "Random in folder" /* RandomFolder */) {
            desc = "The folder to pick a random file from on mobile";
            placeholder = "Folder path";
          } else if (mobileType === "Journal" /* Journal */) {
            desc = "The journal name for mobile";
            placeholder = "Journal name";
          }
          setting.setName(mobileType === "File" /* File */ ? "Mobile file" : mobileType === "Workspace" /* Workspace */ ? "Mobile workspace" : mobileType === "Random in folder" /* RandomFolder */ ? "Mobile folder" : mobileType === "Journal" /* Journal */ ? "Mobile journal" : "Mobile value").setDesc(desc).addText((text) => {
            if (mobileType === "File" /* File */) {
              new FilePathSuggest(this.app, text.inputEl);
            } else if (mobileType === "Workspace" /* Workspace */) {
              new WorkspaceSuggest(this.app, text.inputEl);
            } else if (mobileType === "Random in folder" /* RandomFolder */) {
              new FolderSuggest(this.app, text.inputEl);
            }
            text.setPlaceholder(placeholder).setValue(this.plugin.settings.mobileHomeBaseValue || "").onChange(async (value) => {
              this.plugin.settings.mobileHomeBaseValue = value;
              if (mobileType === "File" /* File */) {
                this.plugin.settings.mobileHomeBasePath = value;
              }
              await this.plugin.saveSettings();
            });
          });
        });
      }
    }
    mobileGroup.addSetting((setting) => {
      setting.setName("Replace mobile new tab button").setDesc("Change the mobile new tab button to a home icon").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.replaceMobileNewTab).onChange(async (value) => {
          this.plugin.settings.replaceMobileNewTab = value;
          await this.plugin.saveSettings();
          this.plugin.updateMobileButton();
        });
      });
    });
    if (this.plugin.settings.useDifferentFileForNewTab) {
      mobileGroup.addSetting((setting) => {
        setting.setName("Separate mobile new tab").setDesc("Use a different new tab file on mobile devices").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.newTabSeparateMobile).onChange(async (value) => {
            this.plugin.settings.newTabSeparateMobile = value;
            await this.plugin.saveSettings();
            const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
            const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
            this.display();
            requestAnimationFrame(() => {
              if (scrollContainer) {
                scrollContainer.scrollTop = scrollTop;
              }
            });
          });
        });
      });
      if (this.plugin.settings.newTabSeparateMobile) {
        const mobileType = this.plugin.settings.mobileNewTabType || "File" /* File */;
        const mobileValue = this.plugin.settings.mobileNewTabValue || "";
        mobileGroup.addSetting((setting) => {
          setting.setName("Mobile new tab type").setDesc("What to open for new tabs on mobile").addDropdown((dropdown) => {
            let pluginDisabled = false;
            for (const type of Object.values(HomeBaseType)) {
              if (!this.plugin.hasRequiredPlugin(type)) {
                if (type === mobileType) {
                  pluginDisabled = true;
                  dropdown.addOption(type, type);
                } else {
                  dropdown.selectEl.createEl("option", {
                    text: type,
                    attr: { disabled: "true" }
                  });
                  continue;
                }
              } else {
                dropdown.addOption(type, type);
              }
            }
            dropdown.setValue(mobileType).onChange(async (value) => {
              this.plugin.settings.mobileNewTabType = value;
              await this.plugin.saveSettings();
              const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
              const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
              this.display();
              requestAnimationFrame(() => {
                if (scrollContainer) {
                  scrollContainer.scrollTop = scrollTop;
                }
              });
            });
            if (pluginDisabled) {
              setting.descEl.createDiv({
                text: "The plugin required for this mobile new tab type isn't available.",
                cls: "mod-warning"
              });
            }
          });
        });
        if (!UNCHANGEABLE_TYPES.includes(mobileType)) {
          mobileGroup.addSetting((setting) => {
            let desc = "";
            let placeholder = "";
            if (mobileType === "File" /* File */) {
              desc = "The file to open for new tabs on mobile";
              placeholder = "Path to mobile new tab file";
            } else if (mobileType === "Workspace" /* Workspace */) {
              desc = "The workspace to load for new tabs on mobile";
              placeholder = "Workspace name";
            } else if (mobileType === "Random in folder" /* RandomFolder */) {
              desc = "The folder to pick a random file from for new tabs on mobile";
              placeholder = "Folder path";
            } else if (mobileType === "Journal" /* Journal */) {
              desc = "The journal name for new tabs on mobile";
              placeholder = "Journal name";
            }
            setting.setName(mobileType === "File" /* File */ ? "Mobile new tab file" : mobileType === "Workspace" /* Workspace */ ? "Mobile new tab workspace" : mobileType === "Random in folder" /* RandomFolder */ ? "Mobile new tab folder" : mobileType === "Journal" /* Journal */ ? "Mobile new tab journal" : "Mobile new tab value").setDesc(desc).addText((text) => {
              if (mobileType === "File" /* File */) {
                new FilePathSuggest(this.app, text.inputEl);
              } else if (mobileType === "Workspace" /* Workspace */) {
                new WorkspaceSuggest(this.app, text.inputEl);
              } else if (mobileType === "Random in folder" /* RandomFolder */) {
                new FolderSuggest(this.app, text.inputEl);
              }
              text.setPlaceholder(placeholder).setValue(mobileValue || "").onChange(async (value) => {
                this.plugin.settings.mobileNewTabValue = value;
                await this.plugin.saveSettings();
              });
            });
          });
        }
      }
    }
    const automationGroup = createSettingsGroup(containerEl, "Automation", "home-base");
    automationGroup.addSetting((setting) => {
      const commandId = this.plugin.settings.commandOnOpen;
      const command = commandId ? getCommandById(this.app, commandId) : void 0;
      const displayValue = command ? command.name : commandId;
      setting.setName("Command on open").setDesc("Run an Obsidian command when opening home base").addText((text) => {
        new CommandSuggest(this.app, text.inputEl);
        text.setPlaceholder("Search for a command...").setValue(displayValue || "").onChange(async (value) => {
          this.plugin.settings.commandOnOpen = value;
          await this.plugin.saveSettings();
        });
      }).addExtraButton((btn) => {
        btn.setIcon("x").setTooltip("Clear command").onClick(async () => {
          this.plugin.settings.commandOnOpen = "";
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
  }
};

// src/services/home-service.ts
var import_obsidian8 = require("obsidian");
init_file_utils();

// src/utils/homebase-resolver.ts
var import_obsidian7 = require("obsidian");
var import_obsidian_daily_notes_interface = __toESM(require_main(), 1);
function randomFile(app, root) {
  let files = [];
  if (root) {
    const resolvedRoot = app.vault.getFolderByPath(root);
    if (resolvedRoot) {
      files = getFilesInFolder(resolvedRoot);
    } else {
      const allFiles = app.vault.getFiles();
      const pattern = root.toLowerCase();
      files = allFiles.filter((f) => {
        const fileName = f.name.toLowerCase();
        return fileName === pattern || fileName === pattern.replace(/\.md$/, "");
      });
    }
  } else {
    files = app.vault.getFiles();
  }
  files = files.filter((f) => ["md", "canvas", "base"].includes(f.extension));
  if (files.length) {
    const index = Math.floor(Math.random() * files.length);
    return files[index] || null;
  }
  return null;
}
function getFilesInFolder(folder) {
  let files = [];
  for (const item of folder.children) {
    if (item instanceof import_obsidian7.TFile) {
      files.push(item);
    } else if (item instanceof import_obsidian7.TFolder) {
      files.push(...getFilesInFolder(item));
    }
  }
  return files;
}
function trimFile(file) {
  if (!file) return "";
  return file.extension === "md" ? file.path.slice(0, -3) : file.path;
}
var PERIODIC_INFO = {
  ["Daily Note" /* DailyNote */]: {
    noun: "day",
    adjective: "daily",
    create: import_obsidian_daily_notes_interface.createDailyNote,
    get: import_obsidian_daily_notes_interface.getDailyNote,
    getAll: import_obsidian_daily_notes_interface.getAllDailyNotes
  },
  ["Weekly Note" /* WeeklyNote */]: {
    noun: "week",
    adjective: "weekly",
    create: import_obsidian_daily_notes_interface.createWeeklyNote,
    get: import_obsidian_daily_notes_interface.getWeeklyNote,
    getAll: import_obsidian_daily_notes_interface.getAllWeeklyNotes
  },
  ["Monthly Note" /* MonthlyNote */]: {
    noun: "month",
    adjective: "monthly",
    create: import_obsidian_daily_notes_interface.createMonthlyNote,
    get: import_obsidian_daily_notes_interface.getMonthlyNote,
    getAll: import_obsidian_daily_notes_interface.getAllMonthlyNotes
  },
  ["Yearly Note" /* YearlyNote */]: {
    noun: "year",
    adjective: "yearly",
    create: import_obsidian_daily_notes_interface.createYearlyNote,
    get: import_obsidian_daily_notes_interface.getYearlyNote,
    getAll: import_obsidian_daily_notes_interface.getAllYearlyNotes
  },
  ["File" /* File */]: null,
  ["Random file" /* Random */]: null,
  ["Random in folder" /* RandomFolder */]: null,
  ["Workspace" /* Workspace */]: null,
  ["Graph view" /* Graph */]: null,
  ["Nothing" /* None */]: null,
  ["Journal" /* Journal */]: null
};
async function getPeriodicNote(kind, plugin) {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i;
  if (!window.moment) {
    return null;
  }
  const info = PERIODIC_INFO[kind];
  if (!info) {
    return null;
  }
  const date = window.moment().startOf(info.noun);
  if (kind === "Daily Note" /* DailyNote */ && ((_c = (_b = (_a = plugin.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["daily-notes"]) == null ? void 0 : _c.enabled)) {
    const dailyNotes = plugin.app.internalPlugins.plugins["daily-notes"].instance;
    if (dailyNotes == null ? void 0 : dailyNotes.getDailyNotePath) {
      const today = window.moment();
      const path = dailyNotes.getDailyNotePath(today);
      if (path) {
        return path.replace(/\.md$/, "");
      }
    }
  }
  const periodicNotesPlugin = (_e = (_d = plugin.app.plugins) == null ? void 0 : _d.plugins) == null ? void 0 : _e["periodic-notes"];
  if (!periodicNotesPlugin) {
    return null;
  }
  try {
    const isLegacy = (((_f = periodicNotesPlugin.manifest) == null ? void 0 : _f.version) || "0").startsWith("0");
    let note = null;
    if (isLegacy) {
      const all = info.getAll();
      if (!Object.keys(all).length) {
        note = await info.create(date);
      } else {
        note = info.get(date, all) || await info.create(date);
      }
      if (!note) {
        note = info.get(date, all);
      }
    } else {
      if ((_g = periodicNotesPlugin.cache) == null ? void 0 : _g.initialize) {
        periodicNotesPlugin.cache.initialize();
      }
      note = ((_h = periodicNotesPlugin.getPeriodicNote) == null ? void 0 : _h.call(periodicNotesPlugin, info.noun, date)) || await ((_i = periodicNotesPlugin.createPeriodicNote) == null ? void 0 : _i.call(periodicNotesPlugin, info.noun, date)) || null;
    }
    if (note) {
      return trimFile(note);
    }
    return null;
  } catch (e) {
    return null;
  }
}
async function getJournalNote(journalName, plugin) {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k;
  const journals = (_b = (_a = plugin.app.plugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["journals"];
  if (!journals) return null;
  try {
    const journal = (_c = journals.journals) == null ? void 0 : _c.find((j) => j.name === journalName);
    if (!journal) return null;
    (_d = journals.reprocessNotes) == null ? void 0 : _d.call(journals);
    const origAutoCreate = (_f = (_e = journal.config) == null ? void 0 : _e.value) == null ? void 0 : _f.autoCreate;
    if ((_g = journal.config) == null ? void 0 : _g.value) {
      journal.config.value.autoCreate = true;
    }
    await ((_h = journal.autoCreate) == null ? void 0 : _h.call(journal));
    if ((_i = journal.config) == null ? void 0 : _i.value) {
      journal.config.value.autoCreate = origAutoCreate;
    }
    if (!window.moment) return null;
    const today = window.moment().locale("custom-journal-locale").startOf("day");
    const note = (_j = journal.get) == null ? void 0 : _j.call(journal, today);
    if (!note) return null;
    const path = (_k = journal.getNotePath) == null ? void 0 : _k.call(journal, note);
    return path ? path.replace(/\.md$/, "") : null;
  } catch (e) {
    return null;
  }
}
async function computeHomeBasePath(type, value, plugin) {
  switch (type) {
    case "File" /* File */:
      return value || null;
    case "Random file" /* Random */: {
      const file = randomFile(plugin.app);
      return file ? trimFile(file) : null;
    }
    case "Random in folder" /* RandomFolder */: {
      const file = randomFile(plugin.app, value);
      return file ? trimFile(file) : null;
    }
    case "Daily Note" /* DailyNote */:
    case "Weekly Note" /* WeeklyNote */:
    case "Monthly Note" /* MonthlyNote */:
    case "Yearly Note" /* YearlyNote */:
      return await getPeriodicNote(type, plugin);
    case "Journal" /* Journal */:
      return await getJournalNote(value, plugin);
    case "Workspace" /* Workspace */:
    case "Graph view" /* Graph */:
    case "Nothing" /* None */:
      return null;
    default:
      return value || null;
  }
}

// src/services/home-service.ts
var LEAF_TYPES = ["markdown", "canvas", "bases"];
function equalsCaseless(path1, path2) {
  const normalize = (p) => p.toLowerCase().replace(/\.md$/, "");
  return normalize(path1) === normalize(path2);
}
var HomeBaseService = class {
  constructor(plugin) {
    this.ghostLeaves = /* @__PURE__ */ new WeakSet();
    this.plugin = plugin;
    this.app = plugin.app;
  }
  /**
   * Open home base with a specific mode (for startup/manual opens)
   */
  async openHomeBaseWithMode(mode, runCommand = true) {
    var _a;
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    if (homeBaseSettings.type === "Workspace" /* Workspace */) {
      return this.openWorkspace(homeBaseSettings.value);
    }
    if (homeBaseSettings.type === "Graph view" /* Graph */) {
      return this.openGraph();
    }
    if (homeBaseSettings.type === "Nothing" /* None */) {
      if (runCommand) {
        this.runCommandOnOpen();
      }
      return true;
    }
    const resolvedPath = await computeHomeBasePath(
      homeBaseSettings.type,
      homeBaseSettings.value,
      this.plugin
    );
    if (!resolvedPath) {
      return false;
    }
    let file = this.app.metadataCache.getFirstLinkpathDest(resolvedPath, "/");
    if (!file) {
      file = getFileByPath(this.app, resolvedPath);
    }
    if (!file) {
      const untrimmedPath = resolvedPath.endsWith(".md") ? resolvedPath : `${resolvedPath}.md`;
      file = getFileByPath(this.app, untrimmedPath);
      if (!file && homeBaseSettings.type === "File" /* File */) {
        return false;
      }
    }
    if (!file) {
      return false;
    }
    if (mode === "replace-all") {
      await this.detachAllLeaves();
    } else if (mode === "replace-last") {
      const activeLeaf = (_a = this.app.workspace.getActiveViewOfType(import_obsidian8.View)) == null ? void 0 : _a.leaf;
      if (activeLeaf) {
        const viewState = activeLeaf.getViewState();
        if (viewState.pinned !== true) {
          void activeLeaf.detach();
          await new Promise((resolve) => setTimeout(resolve, 100));
        }
      }
    }
    const existingLeaf = this.findExistingHomeBaseLeaf(file);
    if (existingLeaf && mode !== "replace-all") {
      const viewState = existingLeaf.getViewState();
      if (viewState.pinned === true && this.plugin.settings.showStickyHomeIcon) {
      } else {
        this.app.workspace.setActiveLeaf(existingLeaf);
        await this.configureView(existingLeaf, file);
        if (runCommand) {
          this.runCommandOnOpen();
        }
        return true;
      }
    }
    const newLeaf = mode === "retain" ? this.app.workspace.getLeaf("tab") : this.app.workspace.getLeaf(false);
    if (!newLeaf) {
      return false;
    }
    await newLeaf.openFile(file);
    this.app.workspace.setActiveLeaf(newLeaf);
    await this.configureView(newLeaf, file);
    if (runCommand) {
      this.runCommandOnOpen();
    }
    return true;
  }
  /**
   * Open workspace
   */
  async openWorkspace(workspaceName) {
    var _a, _b, _c;
    const workspacePlugin = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b.workspaces;
    if (!(workspacePlugin == null ? void 0 : workspacePlugin.enabled) || !((_c = workspacePlugin.instance) == null ? void 0 : _c.loadWorkspace)) {
      return false;
    }
    workspacePlugin.instance.loadWorkspace(workspaceName);
    await new Promise((resolve) => setTimeout(resolve, 100));
    return true;
  }
  /**
   * Open graph view
   */
  async openGraph() {
    var _a, _b;
    await ((_b = (_a = this.app.commands) == null ? void 0 : _a.executeCommandById) == null ? void 0 : _b.call(_a, "graph:open"));
    return true;
  }
  /**
   * Open graph view in ghost tab
   * DEPRECATED: Graph view ghost tab detection is unreliable, so this is no longer used
   * Graph views now just open normally like random files
   */
  async openGraphInGhostTab(runCommand) {
    if (this.isSettingsModalOpen()) {
      return false;
    }
    let graphLeaves = this.app.workspace.getLeavesOfType("graph");
    if (graphLeaves.length === 0) {
      graphLeaves = [];
      this.app.workspace.iterateAllLeaves((leaf) => {
        try {
          const viewState = leaf.getViewState();
          if (viewState.type === "graph") {
            graphLeaves.push(leaf);
          }
        } catch (e) {
        }
      });
    }
    let ghostTab = null;
    if (graphLeaves.length === 1) {
      ghostTab = graphLeaves[0] || null;
    } else if (graphLeaves.length > 1) {
      for (const leaf of graphLeaves) {
        if (!leaf) continue;
        try {
          const viewState = leaf.getViewState();
          if (viewState.pinned === true) {
            ghostTab = leaf;
            break;
          }
        } catch (e) {
          continue;
        }
      }
      if (!ghostTab && graphLeaves[0]) {
        ghostTab = graphLeaves[0] || null;
      }
    }
    if (ghostTab) {
      const allGraphLeavesForCleanup = [];
      this.app.workspace.iterateAllLeaves((leaf) => {
        const viewState = leaf.getViewState();
        if (viewState.type === "graph") {
          allGraphLeavesForCleanup.push(leaf);
        }
      });
      const otherGraphLeaves = allGraphLeavesForCleanup.filter((leaf) => leaf !== ghostTab);
      for (const leaf of otherGraphLeaves) {
        void leaf.detach();
      }
      await new Promise((resolve) => setTimeout(resolve, 150));
      const remainingGraphLeaves = [];
      this.app.workspace.iterateAllLeaves((leaf) => {
        const viewState = leaf.getViewState();
        if (viewState.type === "graph") {
          remainingGraphLeaves.push(leaf);
        }
      });
      if (remainingGraphLeaves.length > 1) {
        for (const leaf of remainingGraphLeaves) {
          if (leaf !== ghostTab) {
            void leaf.detach();
          }
        }
        await new Promise((resolve) => setTimeout(resolve, 100));
      }
      const shouldFocus = !this.isSettingsModalOpen();
      this.app.workspace.setActiveLeaf(ghostTab, { focus: shouldFocus });
      if (runCommand) {
        this.runCommandOnOpen();
      }
      return true;
    }
    const allExistingGraphLeaves = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      const viewState = leaf.getViewState();
      if (viewState.type === "graph") {
        allExistingGraphLeaves.push(leaf);
      }
    });
    for (const leaf of allExistingGraphLeaves) {
      void leaf.detach();
    }
    await new Promise((resolve) => setTimeout(resolve, 100));
    let existingGraphLeaves = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      const viewState = leaf.getViewState();
      if (viewState.type === "graph") {
        existingGraphLeaves.push(leaf);
      }
    });
    let newGhostTab = null;
    if (existingGraphLeaves.length > 0) {
      newGhostTab = existingGraphLeaves[0] || null;
    } else {
      const newLeaf = this.app.workspace.getLeaf("tab");
      if (newLeaf) {
        await newLeaf.setViewState({
          type: "graph",
          state: {}
        });
        await new Promise((resolve) => setTimeout(resolve, 200));
        newGhostTab = newLeaf;
      } else {
        await this.openGraph();
        await new Promise((resolve) => setTimeout(resolve, 300));
        existingGraphLeaves = [];
        this.app.workspace.iterateAllLeaves((leaf) => {
          const viewState = leaf.getViewState();
          if (viewState.type === "graph") {
            existingGraphLeaves.push(leaf);
          }
        });
        if (existingGraphLeaves.length > 0) {
          newGhostTab = existingGraphLeaves[0] || null;
        }
      }
    }
    if (newGhostTab) {
      newGhostTab.setPinned(true);
      const allGraphLeaves = [];
      this.app.workspace.iterateAllLeaves((leaf) => {
        const viewState = leaf.getViewState();
        if (viewState.type === "graph") {
          allGraphLeaves.push(leaf);
        }
      });
      for (const leaf of allGraphLeaves) {
        if (leaf !== newGhostTab) {
          void leaf.detach();
        }
      }
      await new Promise((resolve) => setTimeout(resolve, 100));
      const shouldFocus = !this.isSettingsModalOpen();
      this.app.workspace.setActiveLeaf(newGhostTab, { focus: shouldFocus });
      if (runCommand) {
        this.runCommandOnOpen();
      }
      return true;
    }
    return false;
  }
  /**
   * Open the home base file
   * @param options Options for opening
   */
  async openHomeBase(options = {}) {
    const { runCommand = true } = options;
    const mode = this.plugin.settings.manualOpenMode;
    return this.openHomeBaseWithMode(mode, runCommand);
  }
  /**
   * Open home base in an empty leaf (for new tab replacement)
   */
  async openInLeaf(leaf) {
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    return this.openInLeafWithSettings(leaf, homeBaseSettings);
  }
  /**
   * Open a file in an empty leaf with custom settings
   * @param leaf The leaf to open the file in
   * @param settings Settings object with type and value
   * @param isNewTab Whether this is for new tab replacement (skips pinning/ghost tab logic)
   */
  async openInLeafWithSettings(leaf, settings, isNewTab = false) {
    if (settings.type === "Workspace" /* Workspace */) {
      await this.openWorkspace(settings.value);
      return true;
    }
    if (settings.type === "Graph view" /* Graph */) {
      await this.openGraph();
      return true;
    }
    if (settings.type === "Nothing" /* None */) {
      this.runCommandOnOpen();
      return true;
    }
    const resolvedPath = await computeHomeBasePath(
      settings.type,
      settings.value,
      this.plugin
    );
    if (!resolvedPath) {
      console.warn("[Home Base] Could not resolve path for new tab:", settings.type, settings.value);
      return false;
    }
    let file = this.app.metadataCache.getFirstLinkpathDest(resolvedPath, "/");
    if (!file) {
      file = getFileByPath(this.app, resolvedPath);
    }
    if (!file && !resolvedPath.endsWith(".md") && !resolvedPath.endsWith(".canvas") && !resolvedPath.endsWith(".base")) {
      const untrimmedPath = `${resolvedPath}.md`;
      file = getFileByPath(this.app, untrimmedPath);
    }
    if (!file) {
      console.warn("[Home Base] File not found for new tab:", resolvedPath);
      return false;
    }
    if (isNewTab) {
      console.debug("[Home Base] openInLeafWithSettings: isNewTab=true, bypassing ghost tab logic", {
        file: file.path,
        settings
      });
      await leaf.openFile(file);
      await this.configureView(leaf, file);
      this.runCommandOnOpen();
      return true;
    }
    const isTrulyEmpty = !leaf.view || leaf.view.getViewType() === "empty";
    if (this.plugin.settings.showStickyHomeIcon && isTrulyEmpty) {
      const isRandom = settings.type === "Random file" /* Random */ || settings.type === "Random in folder" /* RandomFolder */ || settings.type === "Daily Note" /* DailyNote */ || settings.type === "Weekly Note" /* WeeklyNote */ || settings.type === "Monthly Note" /* MonthlyNote */ || settings.type === "Yearly Note" /* YearlyNote */;
      const ghostTab = this.findGhostTab(file, isRandom);
      if (ghostTab) {
        void leaf.detach();
        this.app.workspace.setActiveLeaf(ghostTab);
        await this.configureView(ghostTab, file);
        this.runCommandOnOpen();
        return true;
      }
      this.ghostLeaves.add(leaf);
      if (!isRandom) {
        leaf.setPinned(true);
      }
    }
    await leaf.openFile(file);
    await this.configureView(leaf, file);
    this.runCommandOnOpen();
    return true;
  }
  /**
   * Configure the view mode for a leaf
   */
  async configureView(leaf, file) {
    const settings = this.plugin.settings;
    const view = leaf.view;
    if (!isMarkdownLike(file) || !(view instanceof import_obsidian8.MarkdownView)) {
      return;
    }
    const state = view.getState();
    if (settings.revertView) {
      this.lastView = new WeakRef(view);
    }
    if (settings.autoScroll) {
      const count = view.editor.lineCount();
      if (state.mode === "preview") {
        view.previewMode.applyScroll(count - 4);
      } else {
        view.editor.setCursor(count);
        view.editor.focus();
      }
    }
    if (settings.openViewMode !== "default") {
      switch (settings.openViewMode) {
        case "preview":
          state.mode = "preview";
          break;
        case "source":
          state.mode = "source";
          state.source = true;
          break;
        case "live":
          state.mode = "source";
          state.source = false;
          break;
      }
      await leaf.setViewState({
        type: "markdown",
        state
      });
    }
  }
  /**
   * Revert view to default when navigating away from home base
   */
  async revertView() {
    const settings = this.plugin.settings;
    if (!settings.revertView || !this.lastView || settings.openViewMode === "default") {
      return;
    }
    const view = this.lastView.deref();
    if (!view) {
      this.lastView = void 0;
      return;
    }
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const resolvedPath = await computeHomeBasePath(
      homeBaseSettings.type,
      homeBaseSettings.value,
      this.plugin
    );
    if (!resolvedPath) {
      this.lastView = void 0;
      return;
    }
    const currentFile = view.file;
    if (currentFile && equalsCaseless(trimFile(currentFile), resolvedPath)) {
      return;
    }
    const state = view.getState();
    const config = this.app.vault.config;
    const mode = (config == null ? void 0 : config.defaultViewMode) || "source";
    const source = (config == null ? void 0 : config.livePreview) !== void 0 ? !config.livePreview : false;
    if (view.leaf.getViewState().type === "markdown" && (mode !== state.mode || source !== state.source)) {
      state.mode = mode;
      state.source = source;
      await view.leaf.setViewState({ type: "markdown", state, active: true });
    }
    this.lastView = void 0;
  }
  /**
   * Run the configured command after opening
   */
  runCommandOnOpen() {
    const commandId = this.plugin.settings.commandOnOpen;
    if (commandId) {
      setTimeout(() => {
        executeCommand(this.app, commandId);
      }, 100);
    }
  }
  /**
   * Find an existing leaf that has the home base file open
   */
  findExistingHomeBaseLeaf(file) {
    if (!file) return null;
    const homeBasePath = file.path;
    const leaves = LEAF_TYPES.flatMap(
      (type) => this.app.workspace.getLeavesOfType(type)
    );
    for (const leaf of leaves) {
      if (leafHasFile(leaf, homeBasePath)) {
        return leaf;
      }
    }
    return null;
  }
  /**
   * Check if a leaf is a ghost tab
   * Ghost tab is identified by:
   * 1. Being in our internal ghostLeaves set
   * 2. OR being a pinned tab showing the home base file
   */
  isGhostLeaf(leaf) {
    if (this.ghostLeaves.has(leaf)) return true;
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const homeBasePath = homeBaseSettings.value || this.plugin.settings.homeBasePath;
    if (!homeBasePath) return false;
    const viewState = leaf.getViewState();
    const isPinned = viewState.pinned === true;
    if (!isPinned) return false;
    const state = viewState.state;
    const filePath = state == null ? void 0 : state.file;
    if (typeof filePath === "string" && pathsEqual(filePath, homeBasePath)) {
      this.ghostLeaves.add(leaf);
      return true;
    }
    return leafHasFile(leaf, homeBasePath);
  }
  /**
   * Find the ghost tab (the one opened via sticky icon)
   * Ghost tab is identified by:
   * 1. Being in our internal ghostLeaves set (primary source)
   * 2. OR being a pinned tab showing the home base file (fallback for startup/dynamic types)
   */
  findGhostTab(file, isRandom = false) {
    if (!file) return null;
    const homeBasePath = file.path;
    const leaves = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      var _a;
      const viewType = (_a = leaf.view) == null ? void 0 : _a.getViewType();
      if (viewType && LEAF_TYPES.includes(viewType)) {
        leaves.push(leaf);
      }
    });
    for (const leaf of leaves) {
      if (this.ghostLeaves.has(leaf)) {
        if (leafHasFile(leaf, homeBasePath)) {
          return leaf;
        }
      }
    }
    for (const leaf of leaves) {
      if (leafHasFile(leaf, homeBasePath)) {
        const viewState = leaf.getViewState();
        if (isRandom || viewState.pinned === true) {
          this.ghostLeaves.add(leaf);
          return leaf;
        }
      }
    }
    return null;
  }
  /**
   * Open home base in ghost tab (for sticky icon)
   * Ghost tab is pinned and hidden (if setting enabled)
   * Only one ghost tab should exist at a time
   * Works for file-based types and Graph view
   * Note: Random types don't pin (since file changes each time)
   * Note: Workspace and None don't work (workspace changes layout, None doesn't open anything)
   */
  async openHomeBaseInGhostTab(options = {}) {
    const { runCommand = true } = options;
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    if (homeBaseSettings.type === "Workspace" /* Workspace */ || homeBaseSettings.type === "Nothing" /* None */) {
      return this.openHomeBaseWithMode("retain", runCommand);
    }
    if (homeBaseSettings.type === "Graph view" /* Graph */) {
      return this.openGraph();
    }
    const isRandom = homeBaseSettings.type === "Random file" /* Random */ || homeBaseSettings.type === "Random in folder" /* RandomFolder */ || homeBaseSettings.type === "Daily Note" /* DailyNote */ || homeBaseSettings.type === "Weekly Note" /* WeeklyNote */ || homeBaseSettings.type === "Monthly Note" /* MonthlyNote */ || homeBaseSettings.type === "Yearly Note" /* YearlyNote */;
    if (this.isSettingsModalOpen()) {
      return false;
    }
    const resolvedPath = await computeHomeBasePath(
      homeBaseSettings.type,
      homeBaseSettings.value,
      this.plugin
    );
    if (!resolvedPath) {
      return false;
    }
    let file = this.app.metadataCache.getFirstLinkpathDest(resolvedPath, "/");
    if (!file) {
      file = getFileByPath(this.app, resolvedPath);
    }
    if (!file && !resolvedPath.endsWith(".md") && !resolvedPath.endsWith(".canvas") && !resolvedPath.endsWith(".base")) {
      const untrimmedPath = `${resolvedPath}.md`;
      file = getFileByPath(this.app, untrimmedPath);
    }
    if (!file) {
      return false;
    }
    const ghostTab = this.findGhostTab(file, isRandom);
    console.debug("[Home Base] openHomeBaseInGhostTab:", {
      file: file.path,
      ghostTabFound: !!ghostTab,
      isRandom,
      zenMode: document.body.classList.contains("zenmode-active")
    });
    if (ghostTab) {
      const shouldFocus2 = !this.isSettingsModalOpen();
      this.app.workspace.setActiveLeaf(ghostTab, { focus: shouldFocus2 });
      await this.configureView(ghostTab, file);
      if (runCommand) {
        this.runCommandOnOpen();
      }
      return true;
    }
    const newGhostTab = this.app.workspace.getLeaf("tab");
    this.ghostLeaves.add(newGhostTab);
    await newGhostTab.openFile(file);
    if (!isRandom) {
      newGhostTab.setPinned(true);
    }
    setTimeout(() => {
      this.plugin.stickyTabService.updateTabHeaders();
    }, 50);
    const shouldFocus = !this.isSettingsModalOpen();
    this.app.workspace.setActiveLeaf(newGhostTab, { focus: shouldFocus });
    await this.configureView(newGhostTab, file);
    if (runCommand) {
      this.runCommandOnOpen();
    }
    return true;
  }
  /**
   * Find an empty leaf
   */
  findEmptyLeaf() {
    const leaves = this.app.workspace.getLeavesOfType("empty");
    return leaves[0] || null;
  }
  /**
   * Get the home base file
   */
  getHomeBaseFile() {
    const settings = this.plugin.settings;
    if (!settings.homeBasePath) {
      return null;
    }
    return getFileByPath(this.app, settings.homeBasePath);
  }
  /**
   * Fast detach all leaves using changeLayout (like homepage plugin)
   * This is much faster than iterating and detaching leaves individually
   */
  async detachAllLeaves() {
    var _a, _b;
    const layout = this.app.workspace.getLayout();
    layout.main = {
      "id": "5324373015726ba8",
      "type": "split",
      "children": [{
        "id": "4509724f8bf84da7",
        "type": "tabs",
        "children": [{
          "id": "e7a7b303c61786dc",
          "type": "leaf",
          "state": { "type": "empty", "state": {}, "icon": "lucide-file", "title": "New tab" }
        }]
      }],
      "direction": "vertical"
    };
    layout.active = "e7a7b303c61786dc";
    await this.app.workspace.changeLayout(layout);
    if (import_obsidian8.Platform.isMobile) {
      (_b = (_a = this.app.workspace.rightSplit) == null ? void 0 : _a.updateInfo) == null ? void 0 : _b.call(_a);
    }
  }
  /**
   * Close all leaves in the main workspace except the specified one
   * Simplified approach: iterate all leaves and close those in main workspace
   */
  async closeAllLeavesExcept(exceptLeaf) {
    const leavesToClose = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      if (leaf === exceptLeaf) {
        return;
      }
      const view = leaf.view;
      let container = null;
      if (view) {
        const viewAny = view;
        container = viewAny.containerEl || null;
      }
      if (!container) {
        const leafAny = leaf;
        container = leafAny.containerEl || null;
      }
      if (container) {
        const rootWorkspace = container.closest(".workspace-split.mod-vertical.mod-root");
        const leftSidebar = container.closest(".workspace-split.mod-left-split");
        const rightSidebar = container.closest(".workspace-split.mod-right-split");
        if (rootWorkspace && !leftSidebar && !rightSidebar) {
          leavesToClose.push(leaf);
        }
      } else {
        if (exceptLeaf === null) {
          try {
            const viewState = leaf.getViewState();
            if (viewState) {
              leavesToClose.push(leaf);
            }
          } catch (e) {
          }
        }
      }
    });
    for (const leaf of leavesToClose) {
      void leaf.detach();
    }
    await new Promise((resolve) => setTimeout(resolve, 200));
  }
  /**
   * Check if the focused tab is the home base
   */
  isFocusedOnHomeBase() {
    const activeLeaf = this.app.workspace.getMostRecentLeaf();
    if (!activeLeaf) return false;
    if (this.ghostLeaves.has(activeLeaf)) {
      return true;
    }
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) return false;
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    if (homeBaseSettings.type === "File" /* File */) {
      const homeBasePath = homeBaseSettings.value || this.plugin.settings.homeBasePath;
      if (!homeBasePath) return false;
      const homeBaseFile = getFileByPath(this.app, homeBasePath);
      if (!homeBaseFile) return false;
      return activeFile.path === homeBaseFile.path;
    }
    return false;
  }
  /**
   * Check if home base file exists
   */
  homeBaseExists() {
    const path = this.plugin.settings.homeBasePath;
    if (!path) return false;
    return getFileByPath(this.app, path) !== null;
  }
  /**
   * Get the native Obsidian open behavior setting (from app.json)
   * @returns The native setting value or undefined if not supported/found
   */
  getNativeOpenBehavior() {
    const config = this.app.vault.config;
    if (!config) return void 0;
    return config.openBehavior;
  }
  /**
   * Check if the settings modal is currently open
   */
  isSettingsModalOpen() {
    const settingsModal = document.querySelector(".modal-container.mod-settings") || document.querySelector(".modal.mod-settings") || document.querySelector(".vertical-tab-content");
    if (!settingsModal) {
      const allModals = document.querySelectorAll(".modal-container");
      for (const modal of Array.from(allModals)) {
        if (modal.querySelector(".vertical-tab-content") || modal.querySelector(".settings-content") || modal.classList.contains("mod-settings")) {
          return true;
        }
      }
    }
    return settingsModal !== null;
  }
  /**
   * Set the active file as home base
   */
  async setActiveFileAsHomeBase() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) return false;
    if (!isSupportedExtension(activeFile.extension.toLowerCase())) {
      return false;
    }
    this.plugin.settings.homeBasePath = activeFile.path;
    await this.plugin.saveSettings();
    return true;
  }
  /**
   * Check if active file can be set as home base
   */
  canSetActiveFileAsHomeBase() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) return false;
    return isSupportedExtension(activeFile.extension.toLowerCase());
  }
};

// src/services/new-tab-service.ts
var import_obsidian9 = require("obsidian");
var NewTabService = class {
  constructor(plugin) {
    this.existingLeaves = /* @__PURE__ */ new WeakSet();
    this.isStartup = true;
    this.startupCompleted = false;
    this.plugin = plugin;
    this.app = plugin.app;
  }
  /**
   * Track all existing leaves (for new tab detection)
   * This must be called even when startup is handled elsewhere
   */
  trackExistingLeaves() {
    this.app.workspace.iterateAllLeaves((leaf) => {
      this.existingLeaves.add(leaf);
    });
    this.startupCompleted = true;
    this.isStartup = false;
  }
  /**
   * Initialize the service - called when layout is ready
   */
  initialize() {
    this.trackExistingLeaves();
    void this.handleStartup();
  }
  /**
   * Handle app startup - open home base if needed
   * Only called on actual app startup, not plugin reloads
   */
  async handleStartup() {
    const settings = this.plugin.settings;
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    if (!settings.openOnStartup || !homeBaseSettings.value && homeBaseSettings.type === "File" /* File */) {
      this.startupCompleted = true;
      this.isStartup = false;
      return;
    }
    if (await this.hasUrlParams()) {
      this.startupCompleted = true;
      this.isStartup = false;
      return;
    }
    await new Promise((resolve) => setTimeout(resolve, 500));
    if (!settings.keepExistingTabs) {
      let exceptLeaf = null;
      if (!settings.hideReleaseNotes) {
        const allLeaves = this.app.workspace.getLeavesOfType("markdown");
        for (const leaf of allLeaves) {
          const view = leaf.view;
          const markdownView = view;
          if (markdownView.file) {
            const file = markdownView.file;
            const configDir = this.app.vault.configDir;
            if (file.path.includes("release") || file.path.includes(configDir)) {
              const container = markdownView.containerEl;
              if (container && container.querySelector(".release-notes")) {
                exceptLeaf = leaf;
                break;
              }
            }
          }
        }
      }
      await this.plugin.homeService.closeAllLeavesExcept(exceptLeaf);
      await new Promise((resolve) => setTimeout(resolve, 200));
    }
    if (settings.showStickyHomeIcon) {
      await this.plugin.homeService.openHomeBaseInGhostTab({
        runCommand: true
      });
    } else {
      await this.plugin.homeService.openHomeBase({
        replaceActiveLeaf: false,
        runCommand: true
      });
    }
    this.startupCompleted = true;
    this.isStartup = false;
  }
  /**
   * Check if the settings modal is currently open
   */
  isSettingsModalOpen() {
    const settingsModal = document.querySelector(".modal-container.mod-settings") || document.querySelector(".modal.mod-settings") || document.querySelector(".vertical-tab-content");
    if (!settingsModal) {
      const allModals = document.querySelectorAll(".modal-container");
      for (const modal of Array.from(allModals)) {
        if (modal.querySelector(".vertical-tab-content") || modal.querySelector(".settings-content") || modal.classList.contains("mod-settings")) {
          return true;
        }
      }
    }
    return settingsModal !== null;
  }
  /**
   * Check for URL parameters that indicate Obsidian was opened via a link
   * Based on obsidian-homepage implementation
   */
  async hasUrlParams() {
    var _a;
    const windowAny = window;
    const capacitor = windowAny.Capacitor;
    if ((_a = capacitor == null ? void 0 : capacitor.Plugins) == null ? void 0 : _a.App) {
      try {
        const launchUrl = await capacitor.Plugins.App.getLaunchUrl();
        if (launchUrl == null ? void 0 : launchUrl.url) {
          const url = new URL(launchUrl.url);
          const params = Array.from(url.searchParams.keys());
          const action = url.hostname;
          if (["open", "advanced-uri"].includes(action) && ["file", "filepath", "workspace"].some((e) => params.includes(e))) {
            return true;
          }
        }
      } catch (e) {
      }
    }
    const obsAct = windowAny.OBS_ACT;
    if (obsAct) {
      const params = Object.keys(obsAct);
      const action = obsAct.action;
      if (action && ["open", "advanced-uri"].includes(action) && ["file", "filepath", "workspace"].some((e) => params.includes(e))) {
        return true;
      }
    }
    return false;
  }
  /**
   * Handle layout change event - check for new empty tabs
   * Based on new-tab-default-page implementation
   */
  handleLayoutChange() {
    if (this.isStartup || !this.startupCompleted) {
      return;
    }
    this.app.workspace.iterateAllLeaves((leaf) => {
      if (this.existingLeaves.has(leaf)) {
        return;
      }
      this.existingLeaves.add(leaf);
      if (!this.isEmptyTab(leaf)) {
        return;
      }
      const isOnlyTab = this.isOnlyTab(leaf);
      if (isOnlyTab && this.plugin.settings.openWhenAllTabsClosed === true) {
        void this.replaceEmptyTab(leaf, true);
        return;
      }
      if (this.plugin.settings.replaceNewTab !== true) {
        return;
      }
      if (this.plugin.settings.replaceNewTab !== true) {
        return;
      }
      if (this.plugin.settings.newTabMode === "only-when-empty") {
        if (!isOnlyTab) {
          return;
        }
      }
      void this.replaceEmptyTab(leaf, false);
    });
  }
  /**
   * Check if a leaf is an empty tab
   * IMPORTANT: Only returns true if the leaf is truly empty (no file opened)
   * If a file is already opened in the leaf, it's not empty and should NOT be replaced
   */
  isEmptyTab(leaf) {
    if (!leaf.view) return true;
    if (leaf.view.getViewType() !== "empty") {
      return false;
    }
    const viewState = leaf.getViewState();
    if (viewState && viewState.file) {
      return false;
    }
    return true;
  }
  /**
   * Check if this is the only tab in the main workspace
   * Only counts root leaves (main workspace tabs), not sidebar tabs
   * Based on obsidian-disable-tabs pattern using iterateRootLeaves
   */
  isOnlyTab(leaf) {
    let tabCount = 0;
    this.app.workspace.iterateRootLeaves((l) => {
      tabCount++;
    });
    const result = tabCount === 1;
    console.debug("[Home Base] isOnlyTab:", {
      leaf,
      tabCount,
      isOnlyTab: result
    });
    return result;
  }
  /**
   * Replace an empty tab with the home base or new tab file
   * @param leaf The leaf to replace
   * @param isAllTabsClosed Whether this is triggered by "all tabs closed" (true) or "new tab replacement" (false)
   */
  async replaceEmptyTab(leaf, isAllTabsClosed = false) {
    if (!isAllTabsClosed) {
      if (this.plugin.settings.replaceNewTab !== true) {
        console.debug("[Home Base] replaceEmptyTab: replaceNewTab is not true, aborting");
        return;
      }
    }
    await new Promise((resolve) => setTimeout(resolve, 50));
    if (!isAllTabsClosed) {
      if (this.plugin.settings.replaceNewTab !== true) {
        console.debug("[Home Base] replaceEmptyTab: replaceNewTab changed during delay, aborting");
        return;
      }
    } else {
      if (this.plugin.settings.openWhenAllTabsClosed !== true) {
        console.debug("[Home Base] replaceEmptyTab: openWhenAllTabsClosed changed during delay, aborting");
        return;
      }
    }
    if (!this.isEmptyTab(leaf)) {
      console.debug("[Home Base] replaceEmptyTab: Tab is no longer empty, skipping");
      return;
    }
    const settings = isAllTabsClosed ? this.plugin.getHomeBaseSettings() : this.plugin.getNewTabSettings();
    console.debug("[Home Base] replaceEmptyTab:", {
      leaf,
      isAllTabsClosed,
      settings,
      replaceNewTab: this.plugin.settings.replaceNewTab,
      newTabMode: this.plugin.settings.newTabMode,
      useDifferentFileForNewTab: this.plugin.settings.useDifferentFileForNewTab
    });
    const success = await this.plugin.homeService.openInLeafWithSettings(leaf, settings, true);
    if (!success) {
      console.warn("[Home Base] Failed to open file:", settings);
    } else {
      console.debug("[Home Base] replaceEmptyTab: Successfully opened file");
    }
  }
  /**
   * Force check for empty workspace and open home base
   */
  async openIfEmpty() {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian9.View);
    const activeLeaf = activeView == null ? void 0 : activeView.leaf;
    if (!activeLeaf) return;
    if (this.isEmptyTab(activeLeaf) && this.isOnlyTab(activeLeaf)) {
      await this.plugin.homeService.openInLeaf(activeLeaf);
    }
  }
};

// src/services/sticky-tab-service.ts
var import_obsidian10 = require("obsidian");
init_file_utils();
var STICKY_ICON_CLASS = "home-base-sticky-icon";
var STICKY_ICON_ACTIVE_CLASS = "home-base-sticky-icon-active";
var StickyTabService = class {
  constructor(plugin) {
    this.stickyIconEl = null;
    this.layoutChangeHandler = null;
    this.tabHeaderUpdateTimeout = null;
    this.sidebarObserver = null;
    this.tabHeaderObserver = null;
    this.plugin = plugin;
  }
  /**
   * Update the sticky tab icon based on settings
   */
  update() {
    if (import_obsidian10.Platform.isMobile) {
      this.remove();
      this.updateTabHeaders();
      this.updateWorkspaceClass(false);
      return;
    }
    if (this.plugin.settings.showStickyHomeIcon) {
      if (this.stickyIconEl) {
        const iconName = this.plugin.settings.stickyIconName || "home";
        (0, import_obsidian10.setIcon)(this.stickyIconEl, iconName);
      } else {
        this.create();
      }
      this.updateWorkspaceClass(true);
    } else {
      this.remove();
      this.updateTabHeaders();
      this.updateWorkspaceClass(false);
    }
  }
  /**
   * Add/remove CSS class on all workspaces to conditionally apply styles
   */
  updateWorkspaceClass(enabled) {
    const applyToDocument = (doc) => {
      const mainWorkspace = doc.querySelector(".workspace-split.mod-vertical.mod-root");
      if (!mainWorkspace) return;
      if (enabled) {
        mainWorkspace.classList.add("home-base-sticky-icon-enabled");
      } else {
        mainWorkspace.classList.remove("home-base-sticky-icon-enabled");
      }
    };
    applyToDocument(document);
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      var _a, _b;
      const doc = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.ownerDocument;
      if (doc && doc !== document) {
        applyToDocument(doc);
      }
    });
  }
  /**
   * Create the sticky home icon
   */
  create() {
    this.remove();
    this.stickyIconEl = document.createElement("div");
    this.stickyIconEl.className = `${STICKY_ICON_CLASS} clickable-icon`;
    this.stickyIconEl.setAttribute("aria-label", "Open home base");
    this.stickyIconEl.setAttribute("data-tooltip-position", "bottom");
    const iconName = this.plugin.settings.stickyIconName || "home";
    (0, import_obsidian10.setIcon)(this.stickyIconEl, iconName);
    this.stickyIconEl.addEventListener("click", (e) => {
      e.preventDefault();
      e.stopPropagation();
      void this.plugin.homeService.openHomeBaseInGhostTab({
        runCommand: true
      }).then(() => {
        setTimeout(() => {
          this.updateTabHeaders();
        }, 150);
      });
    });
    this.stickyIconEl.addEventListener("contextmenu", (e) => {
      e.preventDefault();
      e.stopPropagation();
      const menu = new import_obsidian10.Menu();
      menu.addItem((item) => {
        item.setTitle("Close home base").setIcon("x").onClick(() => {
          void this.closeHomeBase(true);
        });
      });
      menu.addItem((item) => {
        item.setTitle("Change icon").setIcon("lucide-image-plus").onClick(() => {
          const picker = new IconPicker(
            this.plugin.app,
            this.plugin.settings.stickyIconName,
            (icon) => {
              void (async () => {
                this.plugin.settings.stickyIconName = icon;
                await this.plugin.saveSettings();
                if (this.stickyIconEl) {
                  (0, import_obsidian10.setIcon)(this.stickyIconEl, icon || "home");
                }
              })();
            }
          );
          picker.open();
        });
      });
      menu.showAtMouseEvent(e);
    });
    const ensureIconInPlace = () => {
      if (!this.stickyIconEl) return;
      const mainWorkspace2 = document.querySelector(".workspace-split.mod-vertical.mod-root");
      if (!mainWorkspace2) return;
      const tabHeaderContainerInner = mainWorkspace2.querySelector(".workspace-tab-header-container-inner");
      if (!tabHeaderContainerInner) return;
      const allIcons = tabHeaderContainerInner.querySelectorAll(`.${STICKY_ICON_CLASS}`);
      allIcons.forEach((icon) => {
        if (icon !== this.stickyIconEl) {
          icon.remove();
        }
      });
      if (tabHeaderContainerInner.contains(this.stickyIconEl)) {
        return;
      }
      tabHeaderContainerInner.insertBefore(this.stickyIconEl, tabHeaderContainerInner.firstChild);
      this.updateActiveState();
      this.updateTabHeaders();
      this.updateWorkspaceClass(true);
      this.updateIconPositionForSidebar();
      this.watchSidebarState();
    };
    ensureIconInPlace();
    const checkInterval = setInterval(() => {
      if (!this.stickyIconEl || !this.plugin.settings.showStickyHomeIcon) {
        clearInterval(checkInterval);
        return;
      }
      ensureIconInPlace();
    }, 100);
    this.stickyIconEl._checkInterval = checkInterval;
    if (!this.layoutChangeHandler) {
      this.layoutChangeHandler = () => {
        if (this.stickyIconEl && this.plugin.settings.showStickyHomeIcon) {
          ensureIconInPlace();
          this.updateTabHeaders();
        }
      };
      this.plugin.registerEvent(
        this.plugin.app.workspace.on("layout-change", this.layoutChangeHandler)
      );
    }
    const mainWorkspace = document.querySelector(".workspace-split.mod-vertical.mod-root");
    if (mainWorkspace) {
      const containerObserver = new MutationObserver(() => {
        if (!this.stickyIconEl || !this.plugin.settings.showStickyHomeIcon) return;
        const tabHeaderContainerInner = mainWorkspace.querySelector(".workspace-tab-header-container-inner");
        if (tabHeaderContainerInner) {
          const allIcons = tabHeaderContainerInner.querySelectorAll(`.${STICKY_ICON_CLASS}`);
          allIcons.forEach((icon) => {
            if (icon !== this.stickyIconEl) {
              icon.remove();
            }
          });
          if (!tabHeaderContainerInner.contains(this.stickyIconEl)) {
            tabHeaderContainerInner.insertBefore(this.stickyIconEl, tabHeaderContainerInner.firstChild);
            this.updateActiveState();
          }
        }
      });
      containerObserver.observe(mainWorkspace, {
        childList: true,
        subtree: true
        // Watch subtree to catch tab container recreation
      });
      this.stickyIconEl._containerObserver = containerObserver;
    }
    this.setupTabHeaderObserver();
  }
  /**
   * Set up MutationObserver to watch for tab header changes and remove ghost tabs immediately
   * This prevents the flash when tabs are opened/closed
   */
  setupTabHeaderObserver() {
    if (this.tabHeaderObserver) {
      return;
    }
    this.tabHeaderObserver = new MutationObserver((mutations) => {
      if (!this.plugin.settings.showStickyHomeIcon || !this.plugin.settings.hideHomeTabHeader) {
        return;
      }
      let hasNewHeaders = false;
      for (const mutation of mutations) {
        if (mutation.type === "childList" && mutation.addedNodes.length > 0) {
          for (const node of Array.from(mutation.addedNodes)) {
            if (node instanceof HTMLElement && node.classList.contains("workspace-tab-header")) {
              hasNewHeaders = true;
              break;
            }
          }
        }
        if (hasNewHeaders) break;
      }
      if (hasNewHeaders) {
        this.plugin.app.workspace.iterateAllLeaves((leaf) => {
          if (this.plugin.homeService.isGhostLeaf(leaf)) {
            const tabHeader = this.getTabHeaderForLeaf(leaf);
            if (tabHeader && tabHeader.parentElement) {
              const parent = tabHeader.parentElement;
              if (parent && parent.classList.contains("workspace-tab-header-container-inner")) {
                const tabHeaderExtended = tabHeader;
                if (parent.contains(tabHeader)) {
                  tabHeaderExtended._homeBaseParent = parent;
                  tabHeaderExtended._homeBaseNextSibling = tabHeader.nextSibling;
                  tabHeader.remove();
                }
              }
            }
          }
        });
      }
    });
    const observeContainer = (container) => {
      var _a;
      (_a = this.tabHeaderObserver) == null ? void 0 : _a.observe(container, {
        childList: true,
        subtree: false
      });
    };
    const observeAllWindows = () => {
      const containers = document.querySelectorAll(".workspace-tab-header-container-inner");
      containers.forEach(observeContainer);
      this.plugin.app.workspace.iterateAllLeaves((leaf) => {
        var _a, _b;
        const doc = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.ownerDocument;
        if (doc && doc !== document) {
          const windowContainers = doc.querySelectorAll(".workspace-tab-header-container-inner");
          windowContainers.forEach(observeContainer);
        }
      });
    };
    observeAllWindows();
    const setupWorkspaceObserver = (win) => {
      const doc = win.document;
      const workspaceObserver = new MutationObserver(() => {
        const newContainers = doc.querySelectorAll(".workspace-tab-header-container-inner");
        newContainers.forEach(observeContainer);
      });
      const mainWorkspace = doc.querySelector(".workspace-split.mod-vertical.mod-root");
      if (mainWorkspace) {
        workspaceObserver.observe(mainWorkspace, {
          childList: true,
          subtree: true
        });
      }
    };
    setupWorkspaceObserver(window);
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("window-open", (win) => {
        const actualWindow = win.win;
        if (actualWindow instanceof Window) {
          setupWorkspaceObserver(actualWindow);
          setTimeout(observeAllWindows, 100);
        }
      })
    );
  }
  /**
   * Remove the sticky home icon
   */
  remove() {
    if (this.tabHeaderUpdateTimeout) {
      clearTimeout(this.tabHeaderUpdateTimeout);
      this.tabHeaderUpdateTimeout = null;
    }
    if (this.stickyIconEl && this.stickyIconEl._checkInterval) {
      clearInterval(this.stickyIconEl._checkInterval);
    }
    if (this.stickyIconEl && this.stickyIconEl._containerObserver) {
      this.stickyIconEl._containerObserver.disconnect();
    }
    if (this.sidebarObserver) {
      this.sidebarObserver.disconnect();
      this.sidebarObserver = null;
    }
    if (this.tabHeaderObserver) {
      this.tabHeaderObserver.disconnect();
      this.tabHeaderObserver = null;
    }
    this.updateWorkspaceClass(false);
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      const tabHeader = this.getTabHeaderForLeaf(leaf);
      if (tabHeader) {
        tabHeader.classList.remove("is-home-base-tab");
        tabHeader.removeAttribute("data-home-base-ghost");
        tabHeader.removeAttribute("aria-hidden");
        const tabHeaderExtended = tabHeader;
        if (tabHeaderExtended._homeBaseParent && !tabHeaderExtended._homeBaseParent.contains(tabHeader)) {
          const parent = tabHeaderExtended._homeBaseParent;
          const nextSibling = tabHeaderExtended._homeBaseNextSibling;
          if (parent) {
            if (nextSibling && nextSibling.parentElement === parent) {
              parent.insertBefore(tabHeader, nextSibling);
            } else {
              parent.appendChild(tabHeader);
            }
          }
          delete tabHeaderExtended._homeBaseParent;
          delete tabHeaderExtended._homeBaseNextSibling;
        }
      }
    });
    if (this.stickyIconEl) {
      if (this.stickyIconEl.parentElement) {
        this.stickyIconEl.remove();
      }
      this.stickyIconEl = null;
    }
    const cleanupOrphans = (doc) => {
      doc.querySelectorAll(`.${STICKY_ICON_CLASS}`).forEach((el) => {
        const stickyEl = el;
        if (stickyEl._checkInterval) {
          clearInterval(stickyEl._checkInterval);
        }
        if (stickyEl._containerObserver) {
          stickyEl._containerObserver.disconnect();
        }
        el.remove();
      });
    };
    cleanupOrphans(document);
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      var _a, _b;
      const doc = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.ownerDocument;
      if (doc && doc !== document) {
        cleanupOrphans(doc);
      }
    });
  }
  /**
   * Update the active state of the sticky icon
   */
  updateActiveState() {
    if (!this.stickyIconEl) return;
    const isActive = this.plugin.homeService.isFocusedOnHomeBase();
    if (isActive) {
      this.stickyIconEl.classList.add(STICKY_ICON_ACTIVE_CLASS);
    } else {
      this.stickyIconEl.classList.remove(STICKY_ICON_ACTIVE_CLASS);
    }
    this.updateTabHeaders();
  }
  /**
   * Check if the left sidebar is collapsed
   * Based on obsidian-oxygen-settings implementation
   */
  isLeftSidebarCollapsed() {
    const leftSidebar = document.querySelector(".workspace-split.mod-left-split") || document.querySelector(".mod-left-split");
    if (!leftSidebar) return false;
    return leftSidebar.classList.contains("is-sidedock-collapsed");
  }
  /**
   * Update icon position based on sidebar state
   * Note: With inline positioning, icon flows naturally with tabs, so no special positioning needed
   */
  updateIconPositionForSidebar() {
  }
  /**
   * Update icon visibility based on tab bar visibility
   * REMOVED: JavaScript-based visibility checking was causing issues
   * Now relies entirely on CSS which is more reliable
   */
  updateIconVisibility() {
  }
  /**
   * Watch for sidebar state changes and update icon position
   * Based on obsidian-oxygen-settings implementation
   */
  watchSidebarState() {
    if (this.sidebarObserver) {
      this.sidebarObserver.disconnect();
    }
    const leftSidebar = document.querySelector(".workspace-split.mod-left-split") || document.querySelector(".mod-left-split");
    if (!leftSidebar) return;
    this.sidebarObserver = new MutationObserver((mutations) => {
      let shouldUpdate = false;
      mutations.forEach((mutation) => {
        if (mutation.type === "attributes" && mutation.attributeName === "class") {
          shouldUpdate = true;
        }
      });
      if (shouldUpdate) {
        this.updateIconPositionForSidebar();
      }
    });
    this.sidebarObserver.observe(leftSidebar, {
      attributes: true,
      attributeFilter: ["class"]
    });
  }
  /**
   * Watch for tab bar visibility changes (Oxygen theme auto-hide, focus mode, etc.)
   * REMOVED: No longer needed - CSS handles all visibility automatically
   */
  watchTabBarVisibility() {
  }
  /**
   * Toggle the sticky icon visibility
   */
  async toggle() {
    this.plugin.settings.showStickyHomeIcon = !this.plugin.settings.showStickyHomeIcon;
    await this.plugin.saveSettings();
    this.update();
    this.updateTabHeaders();
  }
  /**
   * Update tab headers to hide/show ghost tab
   * Only works when sticky icon is enabled
   * Removed debounce - must be immediate to prevent flash
   */
  updateTabHeaders() {
    if (this.tabHeaderUpdateTimeout) {
      clearTimeout(this.tabHeaderUpdateTimeout);
      this.tabHeaderUpdateTimeout = null;
    }
    this._doUpdateTabHeaders();
  }
  /**
   * Internal method that actually updates the tab headers
   */
  _doUpdateTabHeaders() {
    if (!this.plugin.settings.showStickyHomeIcon || !this.plugin.settings.hideHomeTabHeader) {
      this.plugin.app.workspace.iterateAllLeaves((leaf) => {
        const tabHeader = this.getTabHeaderForLeaf(leaf);
        if (tabHeader) {
          tabHeader.classList.remove("is-home-base-tab");
          tabHeader.removeAttribute("data-home-base-ghost");
          tabHeader.removeAttribute("aria-hidden");
          const tabHeaderExtended = tabHeader;
          if (tabHeaderExtended._homeBaseParent && !tabHeaderExtended._homeBaseParent.contains(tabHeader)) {
            const parent = tabHeaderExtended._homeBaseParent;
            const nextSibling = tabHeaderExtended._homeBaseNextSibling;
            if (parent) {
              if (nextSibling && nextSibling.parentElement === parent) {
                parent.insertBefore(tabHeader, nextSibling);
              } else {
                parent.appendChild(tabHeader);
              }
            }
            delete tabHeaderExtended._homeBaseParent;
            delete tabHeaderExtended._homeBaseNextSibling;
          }
        }
      });
      return;
    }
    const ghostTabHeadersToRemove = [];
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      if (this.plugin.homeService.isGhostLeaf(leaf)) {
        const tabHeader = this.getTabHeaderForLeaf(leaf);
        if (tabHeader && tabHeader.parentElement) {
          ghostTabHeadersToRemove.push({ tabHeader, leaf });
        }
      }
    });
    ghostTabHeadersToRemove.forEach(({ tabHeader }) => {
      const parent = tabHeader.parentElement;
      if (parent && parent.classList.contains("workspace-tab-header-container-inner")) {
        const tabHeaderExtended = tabHeader;
        if (parent.contains(tabHeader)) {
          tabHeaderExtended._homeBaseParent = parent;
          tabHeaderExtended._homeBaseNextSibling = tabHeader.nextSibling;
          tabHeader.remove();
        }
      }
    });
    requestAnimationFrame(() => {
      const homeBaseSettings = this.plugin.getHomeBaseSettings();
      const homeBasePath = homeBaseSettings.value || this.plugin.settings.homeBasePath;
      this.plugin.app.workspace.iterateAllLeaves((leaf) => {
        const isGhostTab = this.plugin.homeService.isGhostLeaf(leaf);
        const tabHeader = this.getTabHeaderForLeaf(leaf);
        if (!tabHeader) return;
        const tabHeaderExtended = tabHeader;
        const isRemoved = tabHeaderExtended._homeBaseParent && !tabHeaderExtended._homeBaseParent.contains(tabHeader);
        if (!isGhostTab) {
          if (isRemoved) {
            const parent = tabHeaderExtended._homeBaseParent;
            const nextSibling = tabHeaderExtended._homeBaseNextSibling;
            if (parent) {
              if (nextSibling && nextSibling.parentElement === parent) {
                parent.insertBefore(tabHeader, nextSibling);
              } else {
                parent.appendChild(tabHeader);
              }
              delete tabHeaderExtended._homeBaseParent;
              delete tabHeaderExtended._homeBaseNextSibling;
            }
          }
          if (homeBasePath && leafHasFile(leaf, homeBasePath)) {
            tabHeader.classList.add("is-home-base-tab");
          } else {
            tabHeader.classList.remove("is-home-base-tab");
          }
          tabHeader.removeAttribute("data-home-base-ghost");
          tabHeader.removeAttribute("aria-hidden");
        }
      });
    });
  }
  /**
   * Get the tab header element for a given leaf
   */
  getTabHeaderForLeaf(leaf) {
    var _a, _b, _c;
    const leafAny = leaf;
    if (leafAny.tabHeaderEl) {
      return leafAny.tabHeaderEl;
    }
    const viewType = (_a = leaf.view) == null ? void 0 : _a.getViewType();
    if (!viewType) return null;
    const doc = ((_c = (_b = leaf.view) == null ? void 0 : _b.containerEl) == null ? void 0 : _c.ownerDocument) || document;
    const activeLeaf = this.plugin.app.workspace.getMostRecentLeaf();
    const isActive = leaf === activeLeaf;
    const tabHeaders = doc.querySelectorAll(`.workspace-tab-header[data-type="${viewType}"]`);
    if (isActive) {
      const activeHeader = doc.querySelector(".workspace-tab-header.is-active");
      if (activeHeader && activeHeader.getAttribute("data-type") === viewType) {
        return activeHeader;
      }
    }
    for (const header of Array.from(tabHeaders)) {
      const headerEl = header;
      const headerElWithLeaf = headerEl;
      const headerLeaf = headerElWithLeaf.leaf;
      if (headerLeaf === leaf) {
        return headerEl;
      }
    }
    if (tabHeaders.length === 1) {
      return tabHeaders[0];
    }
    if (isActive) {
      const activeHeader = doc.querySelector(".workspace-tab-header.is-active");
      if (activeHeader) {
        return activeHeader;
      }
    }
    return null;
  }
  /**
   * Close the home base tab
   * When called from context menu: Only closes the ghost tab (the "occupied" slot)
   * Other home base tabs are left alone
   */
  async closeHomeBase(actuallyClose = false) {
    const homeBasePath = this.plugin.settings.homeBasePath;
    if (!homeBasePath) return;
    const { getFileByPath: getFileByPath2 } = await Promise.resolve().then(() => (init_file_utils(), file_utils_exports));
    const homeBaseFile = getFileByPath2(this.plugin.app, homeBasePath);
    if (!homeBaseFile) return;
    const ghostTabs = [];
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      if (leafHasFile(leaf, homeBasePath)) {
        try {
          const viewState = leaf.getViewState();
          if (viewState.pinned === true) {
            ghostTabs.push(leaf);
          }
        } catch (e) {
        }
      }
    });
    if (this.plugin.settings.showStickyHomeIcon) {
      for (const ghostTab of ghostTabs) {
        void ghostTab.detach();
      }
    } else {
      const allHomeBaseLeaves = [];
      this.plugin.app.workspace.iterateAllLeaves((leaf) => {
        if (leafHasFile(leaf, homeBasePath)) {
          allHomeBaseLeaves.push(leaf);
        }
      });
      for (const leaf of allHomeBaseLeaves) {
        void leaf.detach();
      }
    }
    this.updateTabHeaders();
  }
  /**
   * Pin the home base tab
   */
  pinHomeBaseTab() {
    const homeBasePath = this.plugin.settings.homeBasePath;
    if (!homeBasePath) return;
    const homeBaseFile = getFileByPath(this.plugin.app, homeBasePath);
    if (!homeBaseFile) return;
    const homeBaseLeaf = this.plugin.homeService.findExistingHomeBaseLeaf(homeBaseFile);
    if (homeBaseLeaf) {
      homeBaseLeaf.setPinned(true);
    }
  }
  /**
   * Unpin the home base tab
   */
  unpinHomeBaseTab() {
    const homeBasePath = this.plugin.settings.homeBasePath;
    if (!homeBasePath) return;
    const homeBaseFile = getFileByPath(this.plugin.app, homeBasePath);
    if (!homeBaseFile) return;
    const homeBaseLeaf = this.plugin.homeService.findExistingHomeBaseLeaf(homeBaseFile);
    if (homeBaseLeaf) {
      homeBaseLeaf.setPinned(false);
    }
  }
  /**
   * Check if the home base tab is pinned
   */
  isHomeBaseTabPinned() {
    const homeBasePath = this.plugin.settings.homeBasePath;
    if (!homeBasePath) return false;
    const homeBaseFile = getFileByPath(this.plugin.app, homeBasePath);
    if (!homeBaseFile) return false;
    const homeBaseLeaf = this.plugin.homeService.findExistingHomeBaseLeaf(homeBaseFile);
    if (!homeBaseLeaf) return false;
    const viewState = homeBaseLeaf.getViewState();
    return viewState.pinned === true;
  }
};

// src/services/mobile-button-service.ts
var import_obsidian11 = require("obsidian");
var MOBILE_HOME_CLASS = "home-base-mobile-enabled";
var MobileButtonService = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  /**
   * Update the mobile button based on settings
   */
  update() {
    if (!import_obsidian11.Platform.isMobile) {
      this.remove();
      return;
    }
    if (this.plugin.settings.replaceMobileNewTab) {
      this.apply();
    } else {
      this.remove();
    }
  }
  /**
   * Apply the mobile button replacement
   */
  apply() {
    document.body.classList.add(MOBILE_HOME_CLASS);
  }
  /**
   * Remove the mobile button replacement
   */
  remove() {
    document.body.classList.remove(MOBILE_HOME_CLASS);
  }
};

// src/main.ts
var HOME_ICON = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>`;
var HomeBasePlugin = class extends import_obsidian12.Plugin {
  constructor() {
    super(...arguments);
    // Release notes tracking
    this.newRelease = false;
    // Track if patched opening behavior already ran
    this.openingBehaviorRan = false;
    // Track if we're currently in startup (to prevent handleOpenWhenEmpty from firing)
    this.isStartup = true;
  }
  async onload() {
    await this.loadSettings();
    await this.migrateLegacySettings();
    this.patchOpeningBehavior();
    (0, import_obsidian12.addIcon)("home-base", HOME_ICON);
    this.homeService = new HomeBaseService(this);
    this.newTabService = new NewTabService(this);
    this.stickyTabService = new StickyTabService(this);
    this.mobileButtonService = new MobileButtonService(this);
    this.addRibbonIcon("home", "Open home base", () => {
      void this.homeService.openHomeBase({
        replaceActiveLeaf: false,
        runCommand: true
      });
    });
    this.registerCommands();
    this.addSettingTab(new HomeBaseSettingTab(this.app, this));
    this.app.workspace.onLayoutReady(() => {
      setTimeout(() => {
        if (this.isSettingsModalOpen()) {
          this.updateStickyTabIcon();
          this.updateMobileButton();
          this.stickyTabService.updateTabHeaders();
          return;
        }
        if (!this.openingBehaviorRan) {
          this.newTabService.initialize();
        } else {
          this.newTabService.trackExistingLeaves();
        }
        setTimeout(() => {
          this.isStartup = false;
        }, 1e3);
        this.updateStickyTabIcon();
        this.updateMobileButton();
        this.stickyTabService.updateTabHeaders();
      }, 100);
    });
    this.registerEvent(
      this.app.workspace.on("layout-change", async () => {
        this.newTabService.handleLayoutChange();
        if (this.settings.revertView) {
          await this.homeService.revertView();
        }
        setTimeout(() => {
          this.stickyTabService.updateActiveState();
          this.stickyTabService.updateTabHeaders();
          this.stickyTabService.updateIconPositionForSidebar();
        }, 150);
      })
    );
    this.registerEvent(
      this.app.workspace.on("file-open", () => {
        setTimeout(() => {
          this.stickyTabService.updateActiveState();
          this.stickyTabService.updateTabHeaders();
        }, 100);
      })
    );
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", () => {
        setTimeout(() => {
          this.stickyTabService.updateTabHeaders();
        }, 100);
      })
    );
  }
  onunload() {
    this.unpatchReleaseNotes();
    this.unpatchOpeningBehavior();
    this.stickyTabService.remove();
    this.mobileButtonService.remove();
  }
  /**
   * Register plugin commands
   */
  registerCommands() {
    this.addCommand({
      id: "open",
      name: "Open",
      callback: () => {
        const homeBaseSettings = this.getHomeBaseSettings();
        if (!homeBaseSettings.value && homeBaseSettings.type === "File" /* File */) {
          new import_obsidian12.Notice("No home base configured. Set one in settings.");
          return;
        }
        void this.homeService.openHomeBase({
          replaceActiveLeaf: false,
          runCommand: true
        });
      }
    });
    this.addCommand({
      id: "set-current-file",
      name: "Set current file as home",
      checkCallback: (checking) => {
        if (!this.homeService.canSetActiveFileAsHomeBase()) {
          return false;
        }
        if (!checking) {
          void this.homeService.setActiveFileAsHomeBase().then((success) => {
            if (success) {
              const activeFile = this.app.workspace.getActiveFile();
              new import_obsidian12.Notice(`Home base set to "${activeFile == null ? void 0 : activeFile.name}"`);
            }
          });
        }
        return true;
      }
    });
    this.addCommand({
      id: "toggle-sticky-icon",
      name: "Toggle sticky home icon",
      callback: async () => {
        await this.stickyTabService.toggle();
        const state = this.settings.showStickyHomeIcon ? "enabled" : "disabled";
        new import_obsidian12.Notice(`Sticky home icon ${state}`);
      }
    });
    this.addCommand({
      id: "close",
      name: "Close",
      callback: async () => {
        await this.stickyTabService.closeHomeBase();
      }
    });
  }
  /**
   * Load plugin settings
   */
  async loadSettings() {
    const data = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, data != null ? data : {});
  }
  /**
   * Migrate legacy settings to new format
   */
  async migrateLegacySettings() {
    let needsSave = false;
    const settings = this.settings;
    if (settings.homeBasePath && !this.settings.homeBaseValue) {
      this.settings.homeBaseType = "File" /* File */;
      this.settings.homeBaseValue = settings.homeBasePath;
      needsSave = true;
    }
    if (settings.keepExistingTabs !== void 0) {
      if (this.settings.openMode === DEFAULT_SETTINGS.openMode) {
        this.settings.openMode = settings.keepExistingTabs ? "retain" : "replace-all";
        needsSave = true;
      }
      delete settings.keepExistingTabs;
      needsSave = true;
    }
    if (settings.mobileHomeBasePath && !this.settings.mobileHomeBaseValue) {
      this.settings.mobileHomeBaseType = "File" /* File */;
      this.settings.mobileHomeBaseValue = settings.mobileHomeBasePath;
      needsSave = true;
    }
    if (settings.mobileHomeBasePath !== void 0) {
      delete settings.mobileHomeBasePath;
      needsSave = true;
    }
    if (settings.homeBasePath !== void 0) {
      delete settings.homeBasePath;
      needsSave = true;
    }
    if (needsSave) {
      await this.saveSettings();
    }
  }
  /**
   * Get the active home base settings (mobile or desktop)
   */
  getHomeBaseSettings() {
    if (this.settings.separateMobile && import_obsidian12.Platform.isMobile) {
      return {
        type: this.settings.mobileHomeBaseType || "File" /* File */,
        value: this.settings.mobileHomeBaseValue || this.settings.mobileHomeBasePath || "",
        path: this.settings.mobileHomeBasePath || this.settings.mobileHomeBaseValue || ""
      };
    }
    return {
      type: this.settings.homeBaseType || "File" /* File */,
      value: this.settings.homeBaseValue || this.settings.homeBasePath || "",
      path: this.settings.homeBasePath || this.settings.homeBaseValue || ""
    };
  }
  /**
   * Get the active new tab settings (mobile or desktop)
   * Falls back to home base settings if useDifferentFileForNewTab is disabled
   */
  getNewTabSettings() {
    if (!this.settings.useDifferentFileForNewTab) {
      const homeBaseSettings = this.getHomeBaseSettings();
      console.debug("[Home Base] getNewTabSettings: Using home base settings (useDifferentFileForNewTab is false)", homeBaseSettings);
      return homeBaseSettings;
    }
    let settings;
    if (this.settings.newTabSeparateMobile && import_obsidian12.Platform.isMobile) {
      settings = {
        type: this.settings.mobileNewTabType || "File" /* File */,
        value: this.settings.mobileNewTabValue || "",
        path: this.settings.mobileNewTabValue || ""
      };
    } else {
      settings = {
        type: this.settings.newTabType || "File" /* File */,
        value: this.settings.newTabValue || "",
        path: this.settings.newTabValue || ""
      };
    }
    if (!settings.value && settings.type === "File" /* File */) {
      console.warn("[Home Base] getNewTabSettings: newTabValue is empty for File type, falling back to home base settings");
      return this.getHomeBaseSettings();
    }
    console.debug("[Home Base] getNewTabSettings: Using new tab settings", {
      useDifferentFileForNewTab: this.settings.useDifferentFileForNewTab,
      newTabSeparateMobile: this.settings.newTabSeparateMobile,
      isMobile: import_obsidian12.Platform.isMobile,
      settings
    });
    return settings;
  }
  /**
   * Save plugin settings
   */
  async saveSettings() {
    await this.saveData(this.settings);
  }
  /**
   * Update the sticky tab icon based on current settings
   */
  updateStickyTabIcon() {
    this.stickyTabService.update();
    this.stickyTabService.updateTabHeaders();
  }
  /**
   * Update the mobile button based on current settings
   */
  updateMobileButton() {
    this.mobileButtonService.update();
  }
  /**
   * Check if we should skip startup logic (e.g., plugin reload, settings modal open)
   * This prevents destructive behavior when the plugin is reloaded or settings are open
   */
  shouldSkipStartupLogic() {
    if (this.isSettingsModalOpen()) {
      return true;
    }
    const hasOpenFiles = this.app.workspace.getLeavesOfType("markdown").length > 0 || this.app.workspace.getLeavesOfType("canvas").length > 0 || this.app.workspace.getLeavesOfType("bases").length > 0 || this.app.workspace.getLeavesOfType("empty").length > 0;
    return hasOpenFiles;
  }
  /**
   * Check if the settings modal is currently open
   */
  isSettingsModalOpen() {
    const settingsModal = document.querySelector(".modal-container.mod-settings") || document.querySelector(".modal.mod-settings") || document.querySelector(".vertical-tab-content");
    if (!settingsModal) {
      const allModals = document.querySelectorAll(".modal-container");
      for (const modal of Array.from(allModals)) {
        if (modal.querySelector(".vertical-tab-content") || modal.querySelector(".settings-content") || modal.classList.contains("mod-settings")) {
          return true;
        }
      }
    }
    return settingsModal !== null;
  }
  /**
   * Patch runOpeningBehavior for fast startup (like homepage plugin)
   */
  patchOpeningBehavior() {
    this.app.nvOrig_runOpeningBehavior = this.app.runOpeningBehavior;
    this.app.runOpeningBehavior = async (path) => {
      const openInitially = this.settings.openOnStartup && !this.hasUrlParams();
      if (openInitially) {
        this.openingBehaviorRan = true;
        const mode = this.settings.openMode;
        if (mode === "replace-all") {
          await this.homeService.detachAllLeaves();
        }
        if (this.settings.showStickyHomeIcon) {
          await this.homeService.openHomeBaseInGhostTab({
            runCommand: true
          });
        } else {
          await this.homeService.openHomeBaseWithMode(mode, true);
        }
      } else {
        if (this.app.nvOrig_runOpeningBehavior) {
          await this.app.nvOrig_runOpeningBehavior(path);
        }
      }
      this.unpatchReleaseNotes();
    };
  }
  /**
   * Unpatch runOpeningBehavior
   */
  unpatchOpeningBehavior() {
    if (this.app.nvOrig_runOpeningBehavior) {
      this.app.runOpeningBehavior = this.app.nvOrig_runOpeningBehavior;
    }
  }
  /**
   * Patch showReleaseNotes to track new releases
   */
  patchReleaseNotes() {
    const appAny = this.app;
    appAny.nvOrig_showReleaseNotes = appAny.showReleaseNotes;
    appAny.showReleaseNotes = () => {
      this.newRelease = true;
    };
  }
  /**
   * Unpatch showReleaseNotes
   */
  unpatchReleaseNotes() {
    var _a;
    const appAny = this.app;
    if (this.newRelease && !this.settings.hideReleaseNotes) {
      (_a = appAny.nvOrig_showReleaseNotes) == null ? void 0 : _a.call(appAny);
    }
    if (appAny.nvOrig_showReleaseNotes) {
      appAny.showReleaseNotes = appAny.nvOrig_showReleaseNotes;
    }
  }
  /**
   * Check if a home base type has its required plugin enabled
   */
  hasRequiredPlugin(type) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    switch (type) {
      case "Workspace" /* Workspace */:
        return ((_c = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b.workspaces) == null ? void 0 : _c.enabled) === true;
      case "Graph view" /* Graph */:
        return ((_f = (_e = (_d = this.app.internalPlugins) == null ? void 0 : _d.plugins) == null ? void 0 : _e.graph) == null ? void 0 : _f.enabled) === true;
      case "Journal" /* Journal */:
        return !!((_h = (_g = this.app.plugins) == null ? void 0 : _g.plugins) == null ? void 0 : _h["journals"]);
      case "Daily Note" /* DailyNote */:
      case "Weekly Note" /* WeeklyNote */:
      case "Monthly Note" /* MonthlyNote */:
      case "Yearly Note" /* YearlyNote */:
        return this.hasRequiredPeriodicity(type);
      default:
        return true;
    }
  }
  /**
   * Check if periodic notes are available for the given type
   */
  hasRequiredPeriodicity(type) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s;
    if (type === "Daily Note" /* DailyNote */) {
      const coreDailyNotes = ((_c = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["daily-notes"]) == null ? void 0 : _c.enabled) === true;
      if (coreDailyNotes) {
        return true;
      }
      const periodicNotes2 = (_e = (_d = this.app.plugins) == null ? void 0 : _d.plugins) == null ? void 0 : _e["periodic-notes"];
      if (periodicNotes2) {
        const version2 = ((_f = periodicNotes2 == null ? void 0 : periodicNotes2.manifest) == null ? void 0 : _f.version) || "0";
        const isLegacy2 = version2.startsWith("0");
        if (isLegacy2) {
          return ((_h = (_g = periodicNotes2 == null ? void 0 : periodicNotes2.settings) == null ? void 0 : _g["daily"]) == null ? void 0 : _h.enabled) === true;
        } else {
          const calendarSet = (_j = (_i = periodicNotes2 == null ? void 0 : periodicNotes2.calendarSetManager) == null ? void 0 : _i.getActiveSet) == null ? void 0 : _j.call(_i);
          return ((_k = calendarSet == null ? void 0 : calendarSet["day"]) == null ? void 0 : _k.enabled) === true;
        }
      }
      return false;
    }
    const periodicNotes = (_m = (_l = this.app.plugins) == null ? void 0 : _l.plugins) == null ? void 0 : _m["periodic-notes"];
    if (!periodicNotes) return false;
    const version = ((_n = periodicNotes == null ? void 0 : periodicNotes.manifest) == null ? void 0 : _n.version) || "0";
    const isLegacy = version.startsWith("0");
    if (isLegacy) {
      const periodMap = {
        ["Weekly Note" /* WeeklyNote */]: "weekly",
        ["Monthly Note" /* MonthlyNote */]: "monthly",
        ["Yearly Note" /* YearlyNote */]: "yearly"
      };
      const adjective = periodMap[type];
      if (!adjective) return false;
      return ((_p = (_o = periodicNotes == null ? void 0 : periodicNotes.settings) == null ? void 0 : _o[adjective]) == null ? void 0 : _p.enabled) === true;
    } else {
      const nounMap = {
        ["Weekly Note" /* WeeklyNote */]: "week",
        ["Monthly Note" /* MonthlyNote */]: "month",
        ["Yearly Note" /* YearlyNote */]: "year"
      };
      const noun = nounMap[type];
      if (!noun) return false;
      const calendarSet = (_r = (_q = periodicNotes == null ? void 0 : periodicNotes.calendarSetManager) == null ? void 0 : _q.getActiveSet) == null ? void 0 : _r.call(_q);
      return ((_s = calendarSet == null ? void 0 : calendarSet[noun]) == null ? void 0 : _s.enabled) === true;
    }
  }
  /**
   * Check if URL params indicate a file/workspace should be opened (skip homepage)
   */
  hasUrlParams() {
    if (typeof window !== "undefined" && window.OBS_ACT) {
      const params = Object.keys(window.OBS_ACT);
      const action = window.OBS_ACT.action;
      return action !== void 0 && ["open", "advanced-uri"].includes(action) && ["file", "filepath", "workspace"].some((e) => params.includes(e));
    }
    return false;
  }
  // "Open when empty" feature removed - redundant with "New tab replacement: only when empty"
  // Since Obsidian auto-creates an empty tab when you close the last one, they do the same thing
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL3V0aWxzL2ZpbGUtdXRpbHMudHMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL29ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZl84ZDlmYzI0YjBmYzYyMmQ5NGZkMTFmYTVlOWIxODViMy9ub2RlX21vZHVsZXMvb2JzaWRpYW4tZGFpbHktbm90ZXMtaW50ZXJmYWNlL2Rpc3QvbWFpbi5qcyIsICJzcmMvbWFpbi50cyIsICJzcmMvc2V0dGluZ3MudHMiLCAic3JjL3VpL3NldHRpbmdzLXRhYi50cyIsICJzcmMvdXRpbHMvc2V0dGluZ3MtY29tcGF0LnRzIiwgInNyYy91aS9maWxlLXN1Z2dlc3QudHMiLCAic3JjL3VpL2NvbW1hbmQtc3VnZ2VzdC50cyIsICJzcmMvdWkvaWNvbi1waWNrZXIudHMiLCAic3JjL3NlcnZpY2VzL2hvbWUtc2VydmljZS50cyIsICJzcmMvdXRpbHMvaG9tZWJhc2UtcmVzb2x2ZXIudHMiLCAic3JjL3NlcnZpY2VzL25ldy10YWItc2VydmljZS50cyIsICJzcmMvc2VydmljZXMvc3RpY2t5LXRhYi1zZXJ2aWNlLnRzIiwgInNyYy9zZXJ2aWNlcy9tb2JpbGUtYnV0dG9uLXNlcnZpY2UudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qKlxyXG4gKiBGaWxlIFV0aWxpdGllc1xyXG4gKiBIZWxwZXIgZnVuY3Rpb25zIGZvciBmaWxlIHR5cGUgZGV0ZWN0aW9uIGFuZCBoYW5kbGluZ1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vKipcclxuICogU3VwcG9ydGVkIGZpbGUgZXh0ZW5zaW9ucyBmb3IgaG9tZSBiYXNlXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgU1VQUE9SVEVEX0VYVEVOU0lPTlMgPSBbJ21kJywgJ21keCcsICdjYW52YXMnLCAnYmFzZSddIGFzIGNvbnN0O1xyXG5leHBvcnQgdHlwZSBTdXBwb3J0ZWRFeHRlbnNpb24gPSB0eXBlb2YgU1VQUE9SVEVEX0VYVEVOU0lPTlNbbnVtYmVyXTtcclxuXHJcbi8qKlxyXG4gKiBWaWV3IHR5cGVzIGNvcnJlc3BvbmRpbmcgdG8gZmlsZSBleHRlbnNpb25zXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgVklFV19UWVBFX01BUDogUmVjb3JkPFN1cHBvcnRlZEV4dGVuc2lvbiwgc3RyaW5nPiA9IHtcclxuXHQnbWQnOiAnbWFya2Rvd24nLFxyXG5cdCdtZHgnOiAnbWFya2Rvd24nLFxyXG5cdCdjYW52YXMnOiAnY2FudmFzJyxcclxuXHQnYmFzZSc6ICdiYXNlcycsXHJcbn07XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBmaWxlIGV4dGVuc2lvbiBpcyBzdXBwb3J0ZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1N1cHBvcnRlZEV4dGVuc2lvbihleHRlbnNpb246IHN0cmluZyk6IGV4dGVuc2lvbiBpcyBTdXBwb3J0ZWRFeHRlbnNpb24ge1xyXG5cdHJldHVybiBTVVBQT1JURURfRVhURU5TSU9OUy5pbmNsdWRlcyhleHRlbnNpb24gYXMgU3VwcG9ydGVkRXh0ZW5zaW9uKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgZmlsZSBleHRlbnNpb24gZnJvbSBhIHBhdGhcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWxlRXh0ZW5zaW9uKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0Y29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcuJyk7XHJcblx0cmV0dXJuIHBhcnRzLmxlbmd0aCA+IDEgPyAocGFydHNbcGFydHMubGVuZ3RoIC0gMV0gPz8gJycpLnRvTG93ZXJDYXNlKCkgOiAnJztcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgdmlldyB0eXBlIGZvciBhIGZpbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRWaWV3VHlwZUZvckZpbGUoZmlsZTogVEZpbGUpOiBzdHJpbmcge1xyXG5cdGNvbnN0IGV4dCA9IGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCk7XHJcblx0aWYgKGlzU3VwcG9ydGVkRXh0ZW5zaW9uKGV4dCkpIHtcclxuXHRcdHJldHVybiBWSUVXX1RZUEVfTUFQW2V4dF07XHJcblx0fVxyXG5cdHJldHVybiAnbWFya2Rvd24nOyAvLyBEZWZhdWx0IGZhbGxiYWNrXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGZpbGUgaXMgYSBtYXJrZG93bi1saWtlIGZpbGUgKG1kIG9yIG1keClcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc01hcmtkb3duTGlrZShmaWxlOiBURmlsZSk6IGJvb2xlYW4ge1xyXG5cdGNvbnN0IGV4dCA9IGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCk7XHJcblx0cmV0dXJuIGV4dCA9PT0gJ21kJyB8fCBleHQgPT09ICdtZHgnO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBmaWxlIGlzIGFuIE1EWCBmaWxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNNZHhGaWxlKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkgPT09ICdtZHgnO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBmaWxlIGlzIGEgY2FudmFzIGZpbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0NhbnZhc0ZpbGUoZmlsZTogVEZpbGUpOiBib29sZWFuIHtcclxuXHRyZXR1cm4gZmlsZS5leHRlbnNpb24udG9Mb3dlckNhc2UoKSA9PT0gJ2NhbnZhcyc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGZpbGUgaXMgYSBiYXNlIGZpbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0Jhc2VGaWxlKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkgPT09ICdiYXNlJztcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBhIGZpbGUgYnkgcGF0aCwgdHJ5aW5nIHdpdGggYW5kIHdpdGhvdXQgZXh0ZW5zaW9uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZUJ5UGF0aChhcHA6IEFwcCwgcGF0aDogc3RyaW5nKTogVEZpbGUgfCBudWxsIHtcclxuXHQvLyBUcnkgZXhhY3QgcGF0aCBmaXJzdFxyXG5cdGNvbnN0IGV4YWN0TWF0Y2ggPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xyXG5cdGlmIChleGFjdE1hdGNoIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdHJldHVybiBleGFjdE1hdGNoO1xyXG5cdH1cclxuXHJcblx0Ly8gVHJ5IHVzaW5nIG1ldGFkYXRhQ2FjaGUgZm9yIGZ1enp5IG1hdGNoaW5nXHJcblx0Y29uc3QgZmlsZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHBhdGgsICcvJyk7XHJcblx0cmV0dXJuIGZpbGU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUcmltIHRoZSBmaWxlIGV4dGVuc2lvbiBmcm9tIGEgcGF0aCBmb3IgY29tcGFyaXNvblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHRyaW1GaWxlRXh0ZW5zaW9uKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0Y29uc3QgbGFzdERvdCA9IHBhdGgubGFzdEluZGV4T2YoJy4nKTtcclxuXHRpZiAobGFzdERvdCA+IDApIHtcclxuXHRcdGNvbnN0IGV4dCA9IHBhdGguc2xpY2UobGFzdERvdCArIDEpLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRpZiAoU1VQUE9SVEVEX0VYVEVOU0lPTlMuaW5jbHVkZXMoZXh0IGFzIFN1cHBvcnRlZEV4dGVuc2lvbikpIHtcclxuXHRcdFx0cmV0dXJuIHBhdGguc2xpY2UoMCwgbGFzdERvdCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBwYXRoO1xyXG59XHJcblxyXG4vKipcclxuICogQ29tcGFyZSB0d28gcGF0aHMsIGlnbm9yaW5nIGNhc2UgYW5kIGV4dGVuc2lvbiBkaWZmZXJlbmNlc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHBhdGhzRXF1YWwocGF0aDE6IHN0cmluZywgcGF0aDI6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdGNvbnN0IG5vcm0xID0gdHJpbUZpbGVFeHRlbnNpb24ocGF0aDEpLnRvTG93ZXJDYXNlKCk7XHJcblx0Y29uc3Qgbm9ybTIgPSB0cmltRmlsZUV4dGVuc2lvbihwYXRoMikudG9Mb3dlckNhc2UoKTtcclxuXHRyZXR1cm4gbm9ybTEgPT09IG5vcm0yO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBsZWFmIGlzIHNob3dpbmcgYSBzcGVjaWZpYyBmaWxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbGVhZkhhc0ZpbGUobGVhZjogV29ya3NwYWNlTGVhZiwgZmlsZVBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdGNvbnN0IHN0YXRlID0gbGVhZi52aWV3Py5nZXRTdGF0ZT8uKCk7XHJcblx0Y29uc3QgbGVhZkZpbGUgPSBzdGF0ZT8uZmlsZSBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcblx0XHJcblx0aWYgKCFsZWFmRmlsZSkgcmV0dXJuIGZhbHNlO1xyXG5cdFxyXG5cdHJldHVybiBwYXRoc0VxdWFsKGxlYWZGaWxlLCBmaWxlUGF0aCk7XHJcbn1cclxuIiwgIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxudmFyIG9ic2lkaWFuID0gcmVxdWlyZSgnb2JzaWRpYW4nKTtcblxuY29uc3QgREVGQVVMVF9EQUlMWV9OT1RFX0ZPUk1BVCA9IFwiWVlZWS1NTS1ERFwiO1xuY29uc3QgREVGQVVMVF9XRUVLTFlfTk9URV9GT1JNQVQgPSBcImdnZ2ctW1ddd3dcIjtcbmNvbnN0IERFRkFVTFRfTU9OVEhMWV9OT1RFX0ZPUk1BVCA9IFwiWVlZWS1NTVwiO1xuY29uc3QgREVGQVVMVF9RVUFSVEVSTFlfTk9URV9GT1JNQVQgPSBcIllZWVktW1FdUVwiO1xuY29uc3QgREVGQVVMVF9ZRUFSTFlfTk9URV9GT1JNQVQgPSBcIllZWVlcIjtcblxuZnVuY3Rpb24gc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKHBlcmlvZGljaXR5KSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gd2luZG93LmFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpO1xuICAgIHJldHVybiBwZXJpb2RpY05vdGVzICYmIHBlcmlvZGljTm90ZXMuc2V0dGluZ3M/LltwZXJpb2RpY2l0eV0/LmVuYWJsZWQ7XG59XG4vKipcbiAqIFJlYWQgdGhlIHVzZXIgc2V0dGluZ3MgZm9yIHRoZSBgZGFpbHktbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldERhaWx5Tm90ZVNldHRpbmdzKCkge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IHsgaW50ZXJuYWxQbHVnaW5zLCBwbHVnaW5zIH0gPSB3aW5kb3cuYXBwO1xuICAgICAgICBpZiAoc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKFwiZGFpbHlcIikpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgZm9ybWF0LCBmb2xkZXIsIHRlbXBsYXRlIH0gPSBwbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpPy5zZXR0aW5ncz8uZGFpbHkgfHwge307XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0IHx8IERFRkFVTFRfREFJTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICAgICAgZm9sZGVyOiBmb2xkZXI/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgZm9sZGVyLCBmb3JtYXQsIHRlbXBsYXRlIH0gPSBpbnRlcm5hbFBsdWdpbnMuZ2V0UGx1Z2luQnlJZChcImRhaWx5LW5vdGVzXCIpPy5pbnN0YW5jZT8ub3B0aW9ucyB8fCB7fTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0IHx8IERFRkFVTFRfREFJTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICBmb2xkZXI6IGZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSBkYWlseSBub3RlIHNldHRpbmdzIGZvdW5kIVwiLCBlcnIpO1xuICAgIH1cbn1cbi8qKlxuICogUmVhZCB0aGUgdXNlciBzZXR0aW5ncyBmb3IgdGhlIGB3ZWVrbHktbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldFdlZWtseU5vdGVTZXR0aW5ncygpIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCBwbHVnaW5NYW5hZ2VyID0gd2luZG93LmFwcC5wbHVnaW5zO1xuICAgICAgICBjb25zdCBjYWxlbmRhclNldHRpbmdzID0gcGx1Z2luTWFuYWdlci5nZXRQbHVnaW4oXCJjYWxlbmRhclwiKT8ub3B0aW9ucztcbiAgICAgICAgY29uc3QgcGVyaW9kaWNOb3Rlc1NldHRpbmdzID0gcGx1Z2luTWFuYWdlci5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKT8uc2V0dGluZ3M/LndlZWtseTtcbiAgICAgICAgaWYgKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcIndlZWtseVwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IHBlcmlvZGljTm90ZXNTZXR0aW5ncy5mb3JtYXQgfHwgREVGQVVMVF9XRUVLTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICAgICAgZm9sZGVyOiBwZXJpb2RpY05vdGVzU2V0dGluZ3MuZm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogcGVyaW9kaWNOb3Rlc1NldHRpbmdzLnRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSBjYWxlbmRhclNldHRpbmdzIHx8IHt9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZm9ybWF0OiBzZXR0aW5ncy53ZWVrbHlOb3RlRm9ybWF0IHx8IERFRkFVTFRfV0VFS0xZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgZm9sZGVyOiBzZXR0aW5ncy53ZWVrbHlOb3RlRm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBzZXR0aW5ncy53ZWVrbHlOb3RlVGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSB3ZWVrbHkgbm90ZSBzZXR0aW5ncyBmb3VuZCFcIiwgZXJyKTtcbiAgICB9XG59XG4vKipcbiAqIFJlYWQgdGhlIHVzZXIgc2V0dGluZ3MgZm9yIHRoZSBgcGVyaW9kaWMtbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldE1vbnRobHlOb3RlU2V0dGluZ3MoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwbHVnaW5NYW5hZ2VyID0gd2luZG93LmFwcC5wbHVnaW5zO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcIm1vbnRobHlcIikgJiZcbiAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LnNldHRpbmdzPy5tb250aGx5KSB8fFxuICAgICAgICAgICAge307XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHNldHRpbmdzLmZvcm1hdCB8fCBERUZBVUxUX01PTlRITFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICBmb2xkZXI6IHNldHRpbmdzLmZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogc2V0dGluZ3MudGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSBtb250aGx5IG5vdGUgc2V0dGluZ3MgZm91bmQhXCIsIGVycik7XG4gICAgfVxufVxuLyoqXG4gKiBSZWFkIHRoZSB1c2VyIHNldHRpbmdzIGZvciB0aGUgYHBlcmlvZGljLW5vdGVzYCBwbHVnaW5cbiAqIHRvIGtlZXAgYmVoYXZpb3Igb2YgY3JlYXRpbmcgYSBuZXcgbm90ZSBpbi1zeW5jLlxuICovXG5mdW5jdGlvbiBnZXRRdWFydGVybHlOb3RlU2V0dGluZ3MoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwbHVnaW5NYW5hZ2VyID0gd2luZG93LmFwcC5wbHVnaW5zO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcInF1YXJ0ZXJseVwiKSAmJlxuICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKT8uc2V0dGluZ3M/LnF1YXJ0ZXJseSkgfHxcbiAgICAgICAgICAgIHt9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZm9ybWF0OiBzZXR0aW5ncy5mb3JtYXQgfHwgREVGQVVMVF9RVUFSVEVSTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICBmb2xkZXI6IHNldHRpbmdzLmZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogc2V0dGluZ3MudGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSBxdWFydGVybHkgbm90ZSBzZXR0aW5ncyBmb3VuZCFcIiwgZXJyKTtcbiAgICB9XG59XG4vKipcbiAqIFJlYWQgdGhlIHVzZXIgc2V0dGluZ3MgZm9yIHRoZSBgcGVyaW9kaWMtbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldFllYXJseU5vdGVTZXR0aW5ncygpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBsdWdpbk1hbmFnZXIgPSB3aW5kb3cuYXBwLnBsdWdpbnM7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSAoc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKFwieWVhcmx5XCIpICYmXG4gICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpPy5zZXR0aW5ncz8ueWVhcmx5KSB8fFxuICAgICAgICAgICAge307XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHNldHRpbmdzLmZvcm1hdCB8fCBERUZBVUxUX1lFQVJMWV9OT1RFX0ZPUk1BVCxcbiAgICAgICAgICAgIGZvbGRlcjogc2V0dGluZ3MuZm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBzZXR0aW5ncy50ZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5pbmZvKFwiTm8gY3VzdG9tIHllYXJseSBub3RlIHNldHRpbmdzIGZvdW5kIVwiLCBlcnIpO1xuICAgIH1cbn1cblxuLy8gQ3JlZGl0OiBAY3JlYXRpb25peC9wYXRoLmpzXG5mdW5jdGlvbiBqb2luKC4uLnBhcnRTZWdtZW50cykge1xuICAgIC8vIFNwbGl0IHRoZSBpbnB1dHMgaW50byBhIGxpc3Qgb2YgcGF0aCBjb21tYW5kcy5cbiAgICBsZXQgcGFydHMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IHBhcnRTZWdtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgcGFydHMgPSBwYXJ0cy5jb25jYXQocGFydFNlZ21lbnRzW2ldLnNwbGl0KFwiL1wiKSk7XG4gICAgfVxuICAgIC8vIEludGVycHJldCB0aGUgcGF0aCBjb21tYW5kcyB0byBnZXQgdGhlIG5ldyByZXNvbHZlZCBwYXRoLlxuICAgIGNvbnN0IG5ld1BhcnRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSBwYXJ0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgY29uc3QgcGFydCA9IHBhcnRzW2ldO1xuICAgICAgICAvLyBSZW1vdmUgbGVhZGluZyBhbmQgdHJhaWxpbmcgc2xhc2hlc1xuICAgICAgICAvLyBBbHNvIHJlbW92ZSBcIi5cIiBzZWdtZW50c1xuICAgICAgICBpZiAoIXBhcnQgfHwgcGFydCA9PT0gXCIuXCIpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgLy8gUHVzaCBuZXcgcGF0aCBzZWdtZW50cy5cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbmV3UGFydHMucHVzaChwYXJ0KTtcbiAgICB9XG4gICAgLy8gUHJlc2VydmUgdGhlIGluaXRpYWwgc2xhc2ggaWYgdGhlcmUgd2FzIG9uZS5cbiAgICBpZiAocGFydHNbMF0gPT09IFwiXCIpXG4gICAgICAgIG5ld1BhcnRzLnVuc2hpZnQoXCJcIik7XG4gICAgLy8gVHVybiBiYWNrIGludG8gYSBzaW5nbGUgc3RyaW5nIHBhdGguXG4gICAgcmV0dXJuIG5ld1BhcnRzLmpvaW4oXCIvXCIpO1xufVxuZnVuY3Rpb24gYmFzZW5hbWUoZnVsbFBhdGgpIHtcbiAgICBsZXQgYmFzZSA9IGZ1bGxQYXRoLnN1YnN0cmluZyhmdWxsUGF0aC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICBpZiAoYmFzZS5sYXN0SW5kZXhPZihcIi5cIikgIT0gLTEpXG4gICAgICAgIGJhc2UgPSBiYXNlLnN1YnN0cmluZygwLCBiYXNlLmxhc3RJbmRleE9mKFwiLlwiKSk7XG4gICAgcmV0dXJuIGJhc2U7XG59XG5hc3luYyBmdW5jdGlvbiBlbnN1cmVGb2xkZXJFeGlzdHMocGF0aCkge1xuICAgIGNvbnN0IGRpcnMgPSBwYXRoLnJlcGxhY2UoL1xcXFwvZywgXCIvXCIpLnNwbGl0KFwiL1wiKTtcbiAgICBkaXJzLnBvcCgpOyAvLyByZW1vdmUgYmFzZW5hbWVcbiAgICBpZiAoZGlycy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgZGlyID0gam9pbiguLi5kaXJzKTtcbiAgICAgICAgaWYgKCF3aW5kb3cuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChkaXIpKSB7XG4gICAgICAgICAgICBhd2FpdCB3aW5kb3cuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihkaXIpO1xuICAgICAgICB9XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gZ2V0Tm90ZVBhdGgoZGlyZWN0b3J5LCBmaWxlbmFtZSkge1xuICAgIGlmICghZmlsZW5hbWUuZW5kc1dpdGgoXCIubWRcIikpIHtcbiAgICAgICAgZmlsZW5hbWUgKz0gXCIubWRcIjtcbiAgICB9XG4gICAgY29uc3QgcGF0aCA9IG9ic2lkaWFuLm5vcm1hbGl6ZVBhdGgoam9pbihkaXJlY3RvcnksIGZpbGVuYW1lKSk7XG4gICAgYXdhaXQgZW5zdXJlRm9sZGVyRXhpc3RzKHBhdGgpO1xuICAgIHJldHVybiBwYXRoO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0VGVtcGxhdGVJbmZvKHRlbXBsYXRlKSB7XG4gICAgY29uc3QgeyBtZXRhZGF0YUNhY2hlLCB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB0ZW1wbGF0ZVBhdGggPSBvYnNpZGlhbi5ub3JtYWxpemVQYXRoKHRlbXBsYXRlKTtcbiAgICBpZiAodGVtcGxhdGVQYXRoID09PSBcIi9cIikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtcIlwiLCBudWxsXSk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlRmlsZSA9IG1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QodGVtcGxhdGVQYXRoLCBcIlwiKTtcbiAgICAgICAgY29uc3QgY29udGVudHMgPSBhd2FpdCB2YXVsdC5jYWNoZWRSZWFkKHRlbXBsYXRlRmlsZSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IElGb2xkSW5mbyA9IHdpbmRvdy5hcHAuZm9sZE1hbmFnZXIubG9hZCh0ZW1wbGF0ZUZpbGUpO1xuICAgICAgICByZXR1cm4gW2NvbnRlbnRzLCBJRm9sZEluZm9dO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byByZWFkIHRoZSBkYWlseSBub3RlIHRlbXBsYXRlICcke3RlbXBsYXRlUGF0aH0nYCwgZXJyKTtcbiAgICAgICAgbmV3IG9ic2lkaWFuLk5vdGljZShcIkZhaWxlZCB0byByZWFkIHRoZSBkYWlseSBub3RlIHRlbXBsYXRlXCIpO1xuICAgICAgICByZXR1cm4gW1wiXCIsIG51bGxdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBkYXRlVUlEIGlzIGEgd2F5IG9mIHdlZWtseSBpZGVudGlmeWluZyBkYWlseS93ZWVrbHkvbW9udGhseSBub3Rlcy5cbiAqIFRoZXkgYXJlIHByZWZpeGVkIHdpdGggdGhlIGdyYW51bGFyaXR5IHRvIGF2b2lkIGFtYmlndWl0eS5cbiAqL1xuZnVuY3Rpb24gZ2V0RGF0ZVVJRChkYXRlLCBncmFudWxhcml0eSA9IFwiZGF5XCIpIHtcbiAgICBjb25zdCB0cyA9IGRhdGUuY2xvbmUoKS5zdGFydE9mKGdyYW51bGFyaXR5KS5mb3JtYXQoKTtcbiAgICByZXR1cm4gYCR7Z3JhbnVsYXJpdHl9LSR7dHN9YDtcbn1cbmZ1bmN0aW9uIHJlbW92ZUVzY2FwZWRDaGFyYWN0ZXJzKGZvcm1hdCkge1xuICAgIHJldHVybiBmb3JtYXQucmVwbGFjZSgvXFxbW15cXF1dKlxcXS9nLCBcIlwiKTsgLy8gcmVtb3ZlIGV2ZXJ5dGhpbmcgd2l0aGluIGJyYWNrZXRzXG59XG4vKipcbiAqIFhYWDogV2hlbiBwYXJzaW5nIGRhdGVzIHRoYXQgY29udGFpbiBib3RoIHdlZWsgbnVtYmVycyBhbmQgbW9udGhzLFxuICogTW9tZW50IGNob3NlcyB0byBpZ25vcmUgdGhlIHdlZWsgbnVtYmVycy4gRm9yIHRoZSB3ZWVrIGRhdGVVSUQsIHdlXG4gKiB3YW50IHRoZSBvcHBvc2l0ZSBiZWhhdmlvci4gU3RyaXAgdGhlIE1NTSBmcm9tIHRoZSBmb3JtYXQgdG8gcGF0Y2guXG4gKi9cbmZ1bmN0aW9uIGlzRm9ybWF0QW1iaWd1b3VzKGZvcm1hdCwgZ3JhbnVsYXJpdHkpIHtcbiAgICBpZiAoZ3JhbnVsYXJpdHkgPT09IFwid2Vla1wiKSB7XG4gICAgICAgIGNvbnN0IGNsZWFuRm9ybWF0ID0gcmVtb3ZlRXNjYXBlZENoYXJhY3RlcnMoZm9ybWF0KTtcbiAgICAgICAgcmV0dXJuICgvd3sxLDJ9L2kudGVzdChjbGVhbkZvcm1hdCkgJiZcbiAgICAgICAgICAgICgvTXsxLDR9Ly50ZXN0KGNsZWFuRm9ybWF0KSB8fCAvRHsxLDR9Ly50ZXN0KGNsZWFuRm9ybWF0KSkpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBnZXREYXRlRnJvbUZpbGUoZmlsZSwgZ3JhbnVsYXJpdHkpIHtcbiAgICByZXR1cm4gZ2V0RGF0ZUZyb21GaWxlbmFtZShmaWxlLmJhc2VuYW1lLCBncmFudWxhcml0eSk7XG59XG5mdW5jdGlvbiBnZXREYXRlRnJvbVBhdGgocGF0aCwgZ3JhbnVsYXJpdHkpIHtcbiAgICByZXR1cm4gZ2V0RGF0ZUZyb21GaWxlbmFtZShiYXNlbmFtZShwYXRoKSwgZ3JhbnVsYXJpdHkpO1xufVxuZnVuY3Rpb24gZ2V0RGF0ZUZyb21GaWxlbmFtZShmaWxlbmFtZSwgZ3JhbnVsYXJpdHkpIHtcbiAgICBjb25zdCBnZXRTZXR0aW5ncyA9IHtcbiAgICAgICAgZGF5OiBnZXREYWlseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgd2VlazogZ2V0V2Vla2x5Tm90ZVNldHRpbmdzLFxuICAgICAgICBtb250aDogZ2V0TW9udGhseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgcXVhcnRlcjogZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzLFxuICAgICAgICB5ZWFyOiBnZXRZZWFybHlOb3RlU2V0dGluZ3MsXG4gICAgfTtcbiAgICBjb25zdCBmb3JtYXQgPSBnZXRTZXR0aW5nc1tncmFudWxhcml0eV0oKS5mb3JtYXQuc3BsaXQoXCIvXCIpLnBvcCgpO1xuICAgIGNvbnN0IG5vdGVEYXRlID0gd2luZG93Lm1vbWVudChmaWxlbmFtZSwgZm9ybWF0LCB0cnVlKTtcbiAgICBpZiAoIW5vdGVEYXRlLmlzVmFsaWQoKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKGlzRm9ybWF0QW1iaWd1b3VzKGZvcm1hdCwgZ3JhbnVsYXJpdHkpKSB7XG4gICAgICAgIGlmIChncmFudWxhcml0eSA9PT0gXCJ3ZWVrXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsZWFuRm9ybWF0ID0gcmVtb3ZlRXNjYXBlZENoYXJhY3RlcnMoZm9ybWF0KTtcbiAgICAgICAgICAgIGlmICgvd3sxLDJ9L2kudGVzdChjbGVhbkZvcm1hdCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93Lm1vbWVudChmaWxlbmFtZSwgXG4gICAgICAgICAgICAgICAgLy8gSWYgZm9ybWF0IGNvbnRhaW5zIHdlZWssIHJlbW92ZSBkYXkgJiBtb250aCBmb3JtYXR0aW5nXG4gICAgICAgICAgICAgICAgZm9ybWF0LnJlcGxhY2UoL017MSw0fS9nLCBcIlwiKS5yZXBsYWNlKC9EezEsNH0vZywgXCJcIiksIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm90ZURhdGU7XG59XG5cbmNsYXNzIERhaWx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gbWltaWNzIHRoZSBiZWhhdmlvciBvZiB0aGUgZGFpbHktbm90ZXMgcGx1Z2luXG4gKiBzbyBpdCB3aWxsIHJlcGxhY2Uge3tkYXRlfX0sIHt7dGl0bGV9fSwgYW5kIHt7dGltZX19IHdpdGggdGhlXG4gKiBmb3JtYXR0ZWQgdGltZXN0YW1wLlxuICpcbiAqIE5vdGU6IGl0IGhhcyBhbiBhZGRlZCBib251cyB0aGF0IGl0J3Mgbm90ICd0b2RheScgc3BlY2lmaWMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURhaWx5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgYXBwID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSBhcHA7XG4gICAgY29uc3QgbW9tZW50ID0gd2luZG93Lm1vbWVudDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0RGFpbHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBbdGVtcGxhdGVDb250ZW50cywgSUZvbGRJbmZvXSA9IGF3YWl0IGdldFRlbXBsYXRlSW5mbyh0ZW1wbGF0ZSk7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBkYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gYXdhaXQgZ2V0Tm90ZVBhdGgoZm9sZGVyLCBmaWxlbmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3JlYXRlZEZpbGUgPSBhd2FpdCB2YXVsdC5jcmVhdGUobm9ybWFsaXplZFBhdGgsIHRlbXBsYXRlQ29udGVudHNcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccypkYXRlXFxzKn19L2dpLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aW1lXFxzKn19L2dpLCBtb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aXRsZVxccyp9fS9naSwgZmlsZW5hbWUpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSwgKF8sIF90aW1lT3JEYXRlLCBjYWxjLCB0aW1lRGVsdGEsIHVuaXQsIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gbW9tZW50KCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGRhdGUuY2xvbmUoKS5zZXQoe1xuICAgICAgICAgICAgICAgIGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxuICAgICAgICAgICAgICAgIG1pbnV0ZTogbm93LmdldChcIm1pbnV0ZVwiKSxcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IG5vdy5nZXQoXCJzZWNvbmRcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjYWxjKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudERhdGUuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb21lbnRGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KG1vbWVudEZvcm1hdC5zdWJzdHJpbmcoMSkudHJpbSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp5ZXN0ZXJkYXlcXHMqfX0vZ2ksIGRhdGUuY2xvbmUoKS5zdWJ0cmFjdCgxLCBcImRheVwiKS5mb3JtYXQoZm9ybWF0KSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0b21vcnJvd1xccyp9fS9naSwgZGF0ZS5jbG9uZSgpLmFkZCgxLCBcImRcIikuZm9ybWF0KGZvcm1hdCkpKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgYXBwLmZvbGRNYW5hZ2VyLnNhdmUoY3JlYXRlZEZpbGUsIElGb2xkSW5mbyk7XG4gICAgICAgIHJldHVybiBjcmVhdGVkRmlsZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGZpbGU6ICcke25vcm1hbGl6ZWRQYXRofSdgLCBlcnIpO1xuICAgICAgICBuZXcgb2JzaWRpYW4uTm90aWNlKFwiVW5hYmxlIHRvIGNyZWF0ZSBuZXcgZmlsZS5cIik7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0RGFpbHlOb3RlKGRhdGUsIGRhaWx5Tm90ZXMpIHtcbiAgICByZXR1cm4gZGFpbHlOb3Rlc1tnZXREYXRlVUlEKGRhdGUsIFwiZGF5XCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsRGFpbHlOb3RlcygpIHtcbiAgICAvKipcbiAgICAgKiBGaW5kIGFsbCBkYWlseSBub3RlcyBpbiB0aGUgZGFpbHkgbm90ZSBmb2xkZXJcbiAgICAgKi9cbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgZm9sZGVyIH0gPSBnZXREYWlseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IGRhaWx5Tm90ZXNGb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2JzaWRpYW4ubm9ybWFsaXplUGF0aChmb2xkZXIpKTtcbiAgICBpZiAoIWRhaWx5Tm90ZXNGb2xkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IERhaWx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IoXCJGYWlsZWQgdG8gZmluZCBkYWlseSBub3RlcyBmb2xkZXJcIik7XG4gICAgfVxuICAgIGNvbnN0IGRhaWx5Tm90ZXMgPSB7fTtcbiAgICBvYnNpZGlhbi5WYXVsdC5yZWN1cnNlQ2hpbGRyZW4oZGFpbHlOb3Rlc0ZvbGRlciwgKG5vdGUpID0+IHtcbiAgICAgICAgaWYgKG5vdGUgaW5zdGFuY2VvZiBvYnNpZGlhbi5URmlsZSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldERhdGVGcm9tRmlsZShub3RlLCBcImRheVwiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJkYXlcIik7XG4gICAgICAgICAgICAgICAgZGFpbHlOb3Rlc1tkYXRlU3RyaW5nXSA9IG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZGFpbHlOb3Rlcztcbn1cblxuY2xhc3MgV2Vla2x5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG5mdW5jdGlvbiBnZXREYXlzT2ZXZWVrKCkge1xuICAgIGNvbnN0IHsgbW9tZW50IH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBsZXQgd2Vla1N0YXJ0ID0gbW9tZW50LmxvY2FsZURhdGEoKS5fd2Vlay5kb3c7XG4gICAgY29uc3QgZGF5c09mV2VlayA9IFtcbiAgICAgICAgXCJzdW5kYXlcIixcbiAgICAgICAgXCJtb25kYXlcIixcbiAgICAgICAgXCJ0dWVzZGF5XCIsXG4gICAgICAgIFwid2VkbmVzZGF5XCIsXG4gICAgICAgIFwidGh1cnNkYXlcIixcbiAgICAgICAgXCJmcmlkYXlcIixcbiAgICAgICAgXCJzYXR1cmRheVwiLFxuICAgIF07XG4gICAgd2hpbGUgKHdlZWtTdGFydCkge1xuICAgICAgICBkYXlzT2ZXZWVrLnB1c2goZGF5c09mV2Vlay5zaGlmdCgpKTtcbiAgICAgICAgd2Vla1N0YXJ0LS07XG4gICAgfVxuICAgIHJldHVybiBkYXlzT2ZXZWVrO1xufVxuZnVuY3Rpb24gZ2V0RGF5T2ZXZWVrTnVtZXJpY2FsVmFsdWUoZGF5T2ZXZWVrTmFtZSkge1xuICAgIHJldHVybiBnZXREYXlzT2ZXZWVrKCkuaW5kZXhPZihkYXlPZldlZWtOYW1lLnRvTG93ZXJDYXNlKCkpO1xufVxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlV2Vla2x5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0V2Vla2x5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgW3RlbXBsYXRlQ29udGVudHMsIElGb2xkSW5mb10gPSBhd2FpdCBnZXRUZW1wbGF0ZUluZm8odGVtcGxhdGUpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IGF3YWl0IGdldE5vdGVQYXRoKGZvbGRlciwgZmlsZW5hbWUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRGaWxlID0gYXdhaXQgdmF1bHQuY3JlYXRlKG5vcm1hbGl6ZWRQYXRoLCB0ZW1wbGF0ZUNvbnRlbnRzXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSwgKF8sIF90aW1lT3JEYXRlLCBjYWxjLCB0aW1lRGVsdGEsIHVuaXQsIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gd2luZG93Lm1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBkYXRlLmNsb25lKCkuc2V0KHtcbiAgICAgICAgICAgICAgICBob3VyOiBub3cuZ2V0KFwiaG91clwiKSxcbiAgICAgICAgICAgICAgICBtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXG4gICAgICAgICAgICAgICAgc2Vjb25kOiBub3cuZ2V0KFwic2Vjb25kXCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2FsYykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLmFkZChwYXJzZUludCh0aW1lRGVsdGEsIDEwKSwgdW5pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9tZW50Rm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChtb21lbnRGb3JtYXQuc3Vic3RyaW5nKDEpLnRyaW0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGl0bGVcXHMqfX0vZ2ksIGZpbGVuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpbWVcXHMqfX0vZ2ksIHdpbmRvdy5tb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyooc3VuZGF5fG1vbmRheXx0dWVzZGF5fHdlZG5lc2RheXx0aHVyc2RheXxmcmlkYXl8c2F0dXJkYXkpXFxzKjooLio/KX19L2dpLCAoXywgZGF5T2ZXZWVrLCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRheSA9IGdldERheU9mV2Vla051bWVyaWNhbFZhbHVlKGRheU9mV2Vlayk7XG4gICAgICAgICAgICByZXR1cm4gZGF0ZS53ZWVrZGF5KGRheSkuZm9ybWF0KG1vbWVudEZvcm1hdC50cmltKCkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHdpbmRvdy5hcHAuZm9sZE1hbmFnZXIuc2F2ZShjcmVhdGVkRmlsZSwgSUZvbGRJbmZvKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRGaWxlO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgZmlsZTogJyR7bm9ybWFsaXplZFBhdGh9J2AsIGVycik7XG4gICAgICAgIG5ldyBvYnNpZGlhbi5Ob3RpY2UoXCJVbmFibGUgdG8gY3JlYXRlIG5ldyBmaWxlLlwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRXZWVrbHlOb3RlKGRhdGUsIHdlZWtseU5vdGVzKSB7XG4gICAgcmV0dXJuIHdlZWtseU5vdGVzW2dldERhdGVVSUQoZGF0ZSwgXCJ3ZWVrXCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsV2Vla2x5Tm90ZXMoKSB7XG4gICAgY29uc3Qgd2Vla2x5Tm90ZXMgPSB7fTtcbiAgICBpZiAoIWFwcEhhc1dlZWtseU5vdGVzUGx1Z2luTG9hZGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIHdlZWtseU5vdGVzO1xuICAgIH1cbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgZm9sZGVyIH0gPSBnZXRXZWVrbHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCB3ZWVrbHlOb3Rlc0ZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICghd2Vla2x5Tm90ZXNGb2xkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFdlZWtseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yKFwiRmFpbGVkIHRvIGZpbmQgd2Vla2x5IG5vdGVzIGZvbGRlclwiKTtcbiAgICB9XG4gICAgb2JzaWRpYW4uVmF1bHQucmVjdXJzZUNoaWxkcmVuKHdlZWtseU5vdGVzRm9sZGVyLCAobm90ZSkgPT4ge1xuICAgICAgICBpZiAobm90ZSBpbnN0YW5jZW9mIG9ic2lkaWFuLlRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gZ2V0RGF0ZUZyb21GaWxlKG5vdGUsIFwid2Vla1wiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJ3ZWVrXCIpO1xuICAgICAgICAgICAgICAgIHdlZWtseU5vdGVzW2RhdGVTdHJpbmddID0gbm90ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB3ZWVrbHlOb3Rlcztcbn1cblxuY2xhc3MgTW9udGhseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIG1pbWljcyB0aGUgYmVoYXZpb3Igb2YgdGhlIGRhaWx5LW5vdGVzIHBsdWdpblxuICogc28gaXQgd2lsbCByZXBsYWNlIHt7ZGF0ZX19LCB7e3RpdGxlfX0sIGFuZCB7e3RpbWV9fSB3aXRoIHRoZVxuICogZm9ybWF0dGVkIHRpbWVzdGFtcC5cbiAqXG4gKiBOb3RlOiBpdCBoYXMgYW4gYWRkZWQgYm9udXMgdGhhdCBpdCdzIG5vdCAndG9kYXknIHNwZWNpZmljLlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVNb250aGx5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0TW9udGhseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IFt0ZW1wbGF0ZUNvbnRlbnRzLCBJRm9sZEluZm9dID0gYXdhaXQgZ2V0VGVtcGxhdGVJbmZvKHRlbXBsYXRlKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGRhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFBhdGggPSBhd2FpdCBnZXROb3RlUGF0aChmb2xkZXIsIGZpbGVuYW1lKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjcmVhdGVkRmlsZSA9IGF3YWl0IHZhdWx0LmNyZWF0ZShub3JtYWxpemVkUGF0aCwgdGVtcGxhdGVDb250ZW50c1xuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKihkYXRlfHRpbWUpXFxzKigoWystXVxcZCspKFt5cW13ZGhzXSkpP1xccyooOi4rPyk/fX0vZ2ksIChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IHdpbmRvdy5tb21lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gZGF0ZS5jbG9uZSgpLnNldCh7XG4gICAgICAgICAgICAgICAgaG91cjogbm93LmdldChcImhvdXJcIiksXG4gICAgICAgICAgICAgICAgbWludXRlOiBub3cuZ2V0KFwibWludXRlXCIpLFxuICAgICAgICAgICAgICAgIHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNhbGMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZS5hZGQocGFyc2VJbnQodGltZURlbHRhLCAxMCksIHVuaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vbWVudEZvcm1hdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKmRhdGVcXHMqfX0vZ2ksIGZpbGVuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpbWVcXHMqfX0vZ2ksIHdpbmRvdy5tb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aXRsZVxccyp9fS9naSwgZmlsZW5hbWUpKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgd2luZG93LmFwcC5mb2xkTWFuYWdlci5zYXZlKGNyZWF0ZWRGaWxlLCBJRm9sZEluZm8pO1xuICAgICAgICByZXR1cm4gY3JlYXRlZEZpbGU7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBmaWxlOiAnJHtub3JtYWxpemVkUGF0aH0nYCwgZXJyKTtcbiAgICAgICAgbmV3IG9ic2lkaWFuLk5vdGljZShcIlVuYWJsZSB0byBjcmVhdGUgbmV3IGZpbGUuXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldE1vbnRobHlOb3RlKGRhdGUsIG1vbnRobHlOb3Rlcykge1xuICAgIHJldHVybiBtb250aGx5Tm90ZXNbZ2V0RGF0ZVVJRChkYXRlLCBcIm1vbnRoXCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsTW9udGhseU5vdGVzKCkge1xuICAgIGNvbnN0IG1vbnRobHlOb3RlcyA9IHt9O1xuICAgIGlmICghYXBwSGFzTW9udGhseU5vdGVzUGx1Z2luTG9hZGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIG1vbnRobHlOb3RlcztcbiAgICB9XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IGZvbGRlciB9ID0gZ2V0TW9udGhseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IG1vbnRobHlOb3Rlc0ZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICghbW9udGhseU5vdGVzRm9sZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBNb250aGx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IoXCJGYWlsZWQgdG8gZmluZCBtb250aGx5IG5vdGVzIGZvbGRlclwiKTtcbiAgICB9XG4gICAgb2JzaWRpYW4uVmF1bHQucmVjdXJzZUNoaWxkcmVuKG1vbnRobHlOb3Rlc0ZvbGRlciwgKG5vdGUpID0+IHtcbiAgICAgICAgaWYgKG5vdGUgaW5zdGFuY2VvZiBvYnNpZGlhbi5URmlsZSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldERhdGVGcm9tRmlsZShub3RlLCBcIm1vbnRoXCIpO1xuICAgICAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gZ2V0RGF0ZVVJRChkYXRlLCBcIm1vbnRoXCIpO1xuICAgICAgICAgICAgICAgIG1vbnRobHlOb3Rlc1tkYXRlU3RyaW5nXSA9IG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbW9udGhseU5vdGVzO1xufVxuXG5jbGFzcyBRdWFydGVybHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvciBleHRlbmRzIEVycm9yIHtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBtaW1pY3MgdGhlIGJlaGF2aW9yIG9mIHRoZSBkYWlseS1ub3RlcyBwbHVnaW5cbiAqIHNvIGl0IHdpbGwgcmVwbGFjZSB7e2RhdGV9fSwge3t0aXRsZX19LCBhbmQge3t0aW1lfX0gd2l0aCB0aGVcbiAqIGZvcm1hdHRlZCB0aW1lc3RhbXAuXG4gKlxuICogTm90ZTogaXQgaGFzIGFuIGFkZGVkIGJvbnVzIHRoYXQgaXQncyBub3QgJ3RvZGF5JyBzcGVjaWZpYy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlUXVhcnRlcmx5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgW3RlbXBsYXRlQ29udGVudHMsIElGb2xkSW5mb10gPSBhd2FpdCBnZXRUZW1wbGF0ZUluZm8odGVtcGxhdGUpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IGF3YWl0IGdldE5vdGVQYXRoKGZvbGRlciwgZmlsZW5hbWUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRGaWxlID0gYXdhaXQgdmF1bHQuY3JlYXRlKG5vcm1hbGl6ZWRQYXRoLCB0ZW1wbGF0ZUNvbnRlbnRzXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSwgKF8sIF90aW1lT3JEYXRlLCBjYWxjLCB0aW1lRGVsdGEsIHVuaXQsIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gd2luZG93Lm1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBkYXRlLmNsb25lKCkuc2V0KHtcbiAgICAgICAgICAgICAgICBob3VyOiBub3cuZ2V0KFwiaG91clwiKSxcbiAgICAgICAgICAgICAgICBtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXG4gICAgICAgICAgICAgICAgc2Vjb25kOiBub3cuZ2V0KFwic2Vjb25kXCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2FsYykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLmFkZChwYXJzZUludCh0aW1lRGVsdGEsIDEwKSwgdW5pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9tZW50Rm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChtb21lbnRGb3JtYXQuc3Vic3RyaW5nKDEpLnRyaW0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqZGF0ZVxccyp9fS9naSwgZmlsZW5hbWUpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGltZVxccyp9fS9naSwgd2luZG93Lm1vbWVudCgpLmZvcm1hdChcIkhIOm1tXCIpKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpdGxlXFxzKn19L2dpLCBmaWxlbmFtZSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB3aW5kb3cuYXBwLmZvbGRNYW5hZ2VyLnNhdmUoY3JlYXRlZEZpbGUsIElGb2xkSW5mbyk7XG4gICAgICAgIHJldHVybiBjcmVhdGVkRmlsZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGZpbGU6ICcke25vcm1hbGl6ZWRQYXRofSdgLCBlcnIpO1xuICAgICAgICBuZXcgb2JzaWRpYW4uTm90aWNlKFwiVW5hYmxlIHRvIGNyZWF0ZSBuZXcgZmlsZS5cIik7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0UXVhcnRlcmx5Tm90ZShkYXRlLCBxdWFydGVybHkpIHtcbiAgICByZXR1cm4gcXVhcnRlcmx5W2dldERhdGVVSUQoZGF0ZSwgXCJxdWFydGVyXCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsUXVhcnRlcmx5Tm90ZXMoKSB7XG4gICAgY29uc3QgcXVhcnRlcmx5ID0ge307XG4gICAgaWYgKCFhcHBIYXNRdWFydGVybHlOb3Rlc1BsdWdpbkxvYWRlZCgpKSB7XG4gICAgICAgIHJldHVybiBxdWFydGVybHk7XG4gICAgfVxuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyBmb2xkZXIgfSA9IGdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IHF1YXJ0ZXJseUZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICghcXVhcnRlcmx5Rm9sZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBRdWFydGVybHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvcihcIkZhaWxlZCB0byBmaW5kIHF1YXJ0ZXJseSBub3RlcyBmb2xkZXJcIik7XG4gICAgfVxuICAgIG9ic2lkaWFuLlZhdWx0LnJlY3Vyc2VDaGlsZHJlbihxdWFydGVybHlGb2xkZXIsIChub3RlKSA9PiB7XG4gICAgICAgIGlmIChub3RlIGluc3RhbmNlb2Ygb2JzaWRpYW4uVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBnZXREYXRlRnJvbUZpbGUobm90ZSwgXCJxdWFydGVyXCIpO1xuICAgICAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gZ2V0RGF0ZVVJRChkYXRlLCBcInF1YXJ0ZXJcIik7XG4gICAgICAgICAgICAgICAgcXVhcnRlcmx5W2RhdGVTdHJpbmddID0gbm90ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBxdWFydGVybHk7XG59XG5cbmNsYXNzIFllYXJseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIG1pbWljcyB0aGUgYmVoYXZpb3Igb2YgdGhlIGRhaWx5LW5vdGVzIHBsdWdpblxuICogc28gaXQgd2lsbCByZXBsYWNlIHt7ZGF0ZX19LCB7e3RpdGxlfX0sIGFuZCB7e3RpbWV9fSB3aXRoIHRoZVxuICogZm9ybWF0dGVkIHRpbWVzdGFtcC5cbiAqXG4gKiBOb3RlOiBpdCBoYXMgYW4gYWRkZWQgYm9udXMgdGhhdCBpdCdzIG5vdCAndG9kYXknIHNwZWNpZmljLlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVZZWFybHlOb3RlKGRhdGUpIHtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgdGVtcGxhdGUsIGZvcm1hdCwgZm9sZGVyIH0gPSBnZXRZZWFybHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBbdGVtcGxhdGVDb250ZW50cywgSUZvbGRJbmZvXSA9IGF3YWl0IGdldFRlbXBsYXRlSW5mbyh0ZW1wbGF0ZSk7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBkYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gYXdhaXQgZ2V0Tm90ZVBhdGgoZm9sZGVyLCBmaWxlbmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3JlYXRlZEZpbGUgPSBhd2FpdCB2YXVsdC5jcmVhdGUobm9ybWFsaXplZFBhdGgsIHRlbXBsYXRlQ29udGVudHNcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyooZGF0ZXx0aW1lKVxccyooKFsrLV1cXGQrKShbeXFtd2Roc10pKT9cXHMqKDouKz8pP319L2dpLCAoXywgX3RpbWVPckRhdGUsIGNhbGMsIHRpbWVEZWx0YSwgdW5pdCwgbW9tZW50Rm9ybWF0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSB3aW5kb3cubW9tZW50KCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGRhdGUuY2xvbmUoKS5zZXQoe1xuICAgICAgICAgICAgICAgIGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxuICAgICAgICAgICAgICAgIG1pbnV0ZTogbm93LmdldChcIm1pbnV0ZVwiKSxcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IG5vdy5nZXQoXCJzZWNvbmRcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjYWxjKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudERhdGUuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb21lbnRGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KG1vbWVudEZvcm1hdC5zdWJzdHJpbmcoMSkudHJpbSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccypkYXRlXFxzKn19L2dpLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aW1lXFxzKn19L2dpLCB3aW5kb3cubW9tZW50KCkuZm9ybWF0KFwiSEg6bW1cIikpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGl0bGVcXHMqfX0vZ2ksIGZpbGVuYW1lKSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHdpbmRvdy5hcHAuZm9sZE1hbmFnZXIuc2F2ZShjcmVhdGVkRmlsZSwgSUZvbGRJbmZvKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRGaWxlO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgZmlsZTogJyR7bm9ybWFsaXplZFBhdGh9J2AsIGVycik7XG4gICAgICAgIG5ldyBvYnNpZGlhbi5Ob3RpY2UoXCJVbmFibGUgdG8gY3JlYXRlIG5ldyBmaWxlLlwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRZZWFybHlOb3RlKGRhdGUsIHllYXJseU5vdGVzKSB7XG4gICAgcmV0dXJuIHllYXJseU5vdGVzW2dldERhdGVVSUQoZGF0ZSwgXCJ5ZWFyXCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsWWVhcmx5Tm90ZXMoKSB7XG4gICAgY29uc3QgeWVhcmx5Tm90ZXMgPSB7fTtcbiAgICBpZiAoIWFwcEhhc1llYXJseU5vdGVzUGx1Z2luTG9hZGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIHllYXJseU5vdGVzO1xuICAgIH1cbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgZm9sZGVyIH0gPSBnZXRZZWFybHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCB5ZWFybHlOb3Rlc0ZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICgheWVhcmx5Tm90ZXNGb2xkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFllYXJseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yKFwiRmFpbGVkIHRvIGZpbmQgeWVhcmx5IG5vdGVzIGZvbGRlclwiKTtcbiAgICB9XG4gICAgb2JzaWRpYW4uVmF1bHQucmVjdXJzZUNoaWxkcmVuKHllYXJseU5vdGVzRm9sZGVyLCAobm90ZSkgPT4ge1xuICAgICAgICBpZiAobm90ZSBpbnN0YW5jZW9mIG9ic2lkaWFuLlRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gZ2V0RGF0ZUZyb21GaWxlKG5vdGUsIFwieWVhclwiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJ5ZWFyXCIpO1xuICAgICAgICAgICAgICAgIHllYXJseU5vdGVzW2RhdGVTdHJpbmddID0gbm90ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB5ZWFybHlOb3Rlcztcbn1cblxuZnVuY3Rpb24gYXBwSGFzRGFpbHlOb3Rlc1BsdWdpbkxvYWRlZCgpIHtcbiAgICBjb25zdCB7IGFwcCB9ID0gd2luZG93O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgZGFpbHlOb3Rlc1BsdWdpbiA9IGFwcC5pbnRlcm5hbFBsdWdpbnMucGx1Z2luc1tcImRhaWx5LW5vdGVzXCJdO1xuICAgIGlmIChkYWlseU5vdGVzUGx1Z2luICYmIGRhaWx5Tm90ZXNQbHVnaW4uZW5hYmxlZCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8uZGFpbHk/LmVuYWJsZWQ7XG59XG4vKipcbiAqIFhYWDogXCJXZWVrbHkgTm90ZXNcIiBsaXZlIGluIGVpdGhlciB0aGUgQ2FsZW5kYXIgcGx1Z2luIG9yIHRoZSBwZXJpb2RpYy1ub3RlcyBwbHVnaW4uXG4gKiBDaGVjayBib3RoIHVudGlsIHRoZSB3ZWVrbHkgbm90ZXMgZmVhdHVyZSBpcyByZW1vdmVkIGZyb20gdGhlIENhbGVuZGFyIHBsdWdpbi5cbiAqL1xuZnVuY3Rpb24gYXBwSGFzV2Vla2x5Tm90ZXNQbHVnaW5Mb2FkZWQoKSB7XG4gICAgY29uc3QgeyBhcHAgfSA9IHdpbmRvdztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGlmIChhcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJjYWxlbmRhclwiKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8ud2Vla2x5Py5lbmFibGVkO1xufVxuZnVuY3Rpb24gYXBwSGFzTW9udGhseU5vdGVzUGx1Z2luTG9hZGVkKCkge1xuICAgIGNvbnN0IHsgYXBwIH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8ubW9udGhseT8uZW5hYmxlZDtcbn1cbmZ1bmN0aW9uIGFwcEhhc1F1YXJ0ZXJseU5vdGVzUGx1Z2luTG9hZGVkKCkge1xuICAgIGNvbnN0IHsgYXBwIH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8ucXVhcnRlcmx5Py5lbmFibGVkO1xufVxuZnVuY3Rpb24gYXBwSGFzWWVhcmx5Tm90ZXNQbHVnaW5Mb2FkZWQoKSB7XG4gICAgY29uc3QgeyBhcHAgfSA9IHdpbmRvdztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBlcmlvZGljTm90ZXMgPSBhcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKTtcbiAgICByZXR1cm4gcGVyaW9kaWNOb3RlcyAmJiBwZXJpb2RpY05vdGVzLnNldHRpbmdzPy55ZWFybHk/LmVuYWJsZWQ7XG59XG5mdW5jdGlvbiBnZXRQZXJpb2RpY05vdGVTZXR0aW5ncyhncmFudWxhcml0eSkge1xuICAgIGNvbnN0IGdldFNldHRpbmdzID0ge1xuICAgICAgICBkYXk6IGdldERhaWx5Tm90ZVNldHRpbmdzLFxuICAgICAgICB3ZWVrOiBnZXRXZWVrbHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIG1vbnRoOiBnZXRNb250aGx5Tm90ZVNldHRpbmdzLFxuICAgICAgICBxdWFydGVyOiBnZXRRdWFydGVybHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIHllYXI6IGdldFllYXJseU5vdGVTZXR0aW5ncyxcbiAgICB9W2dyYW51bGFyaXR5XTtcbiAgICByZXR1cm4gZ2V0U2V0dGluZ3MoKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVBlcmlvZGljTm90ZShncmFudWxhcml0eSwgZGF0ZSkge1xuICAgIGNvbnN0IGNyZWF0ZUZuID0ge1xuICAgICAgICBkYXk6IGNyZWF0ZURhaWx5Tm90ZSxcbiAgICAgICAgbW9udGg6IGNyZWF0ZU1vbnRobHlOb3RlLFxuICAgICAgICB3ZWVrOiBjcmVhdGVXZWVrbHlOb3RlLFxuICAgIH07XG4gICAgcmV0dXJuIGNyZWF0ZUZuW2dyYW51bGFyaXR5XShkYXRlKTtcbn1cblxuZXhwb3J0cy5ERUZBVUxUX0RBSUxZX05PVEVfRk9STUFUID0gREVGQVVMVF9EQUlMWV9OT1RFX0ZPUk1BVDtcbmV4cG9ydHMuREVGQVVMVF9NT05USExZX05PVEVfRk9STUFUID0gREVGQVVMVF9NT05USExZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5ERUZBVUxUX1FVQVJURVJMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfUVVBUlRFUkxZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5ERUZBVUxUX1dFRUtMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfV0VFS0xZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5ERUZBVUxUX1lFQVJMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfWUVBUkxZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5hcHBIYXNEYWlseU5vdGVzUGx1Z2luTG9hZGVkID0gYXBwSGFzRGFpbHlOb3Rlc1BsdWdpbkxvYWRlZDtcbmV4cG9ydHMuYXBwSGFzTW9udGhseU5vdGVzUGx1Z2luTG9hZGVkID0gYXBwSGFzTW9udGhseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5hcHBIYXNRdWFydGVybHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc1F1YXJ0ZXJseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5hcHBIYXNXZWVrbHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc1dlZWtseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5hcHBIYXNZZWFybHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc1llYXJseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5jcmVhdGVEYWlseU5vdGUgPSBjcmVhdGVEYWlseU5vdGU7XG5leHBvcnRzLmNyZWF0ZU1vbnRobHlOb3RlID0gY3JlYXRlTW9udGhseU5vdGU7XG5leHBvcnRzLmNyZWF0ZVBlcmlvZGljTm90ZSA9IGNyZWF0ZVBlcmlvZGljTm90ZTtcbmV4cG9ydHMuY3JlYXRlUXVhcnRlcmx5Tm90ZSA9IGNyZWF0ZVF1YXJ0ZXJseU5vdGU7XG5leHBvcnRzLmNyZWF0ZVdlZWtseU5vdGUgPSBjcmVhdGVXZWVrbHlOb3RlO1xuZXhwb3J0cy5jcmVhdGVZZWFybHlOb3RlID0gY3JlYXRlWWVhcmx5Tm90ZTtcbmV4cG9ydHMuZ2V0QWxsRGFpbHlOb3RlcyA9IGdldEFsbERhaWx5Tm90ZXM7XG5leHBvcnRzLmdldEFsbE1vbnRobHlOb3RlcyA9IGdldEFsbE1vbnRobHlOb3RlcztcbmV4cG9ydHMuZ2V0QWxsUXVhcnRlcmx5Tm90ZXMgPSBnZXRBbGxRdWFydGVybHlOb3RlcztcbmV4cG9ydHMuZ2V0QWxsV2Vla2x5Tm90ZXMgPSBnZXRBbGxXZWVrbHlOb3RlcztcbmV4cG9ydHMuZ2V0QWxsWWVhcmx5Tm90ZXMgPSBnZXRBbGxZZWFybHlOb3RlcztcbmV4cG9ydHMuZ2V0RGFpbHlOb3RlID0gZ2V0RGFpbHlOb3RlO1xuZXhwb3J0cy5nZXREYWlseU5vdGVTZXR0aW5ncyA9IGdldERhaWx5Tm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXREYXRlRnJvbUZpbGUgPSBnZXREYXRlRnJvbUZpbGU7XG5leHBvcnRzLmdldERhdGVGcm9tUGF0aCA9IGdldERhdGVGcm9tUGF0aDtcbmV4cG9ydHMuZ2V0RGF0ZVVJRCA9IGdldERhdGVVSUQ7XG5leHBvcnRzLmdldE1vbnRobHlOb3RlID0gZ2V0TW9udGhseU5vdGU7XG5leHBvcnRzLmdldE1vbnRobHlOb3RlU2V0dGluZ3MgPSBnZXRNb250aGx5Tm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXRQZXJpb2RpY05vdGVTZXR0aW5ncyA9IGdldFBlcmlvZGljTm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXRRdWFydGVybHlOb3RlID0gZ2V0UXVhcnRlcmx5Tm90ZTtcbmV4cG9ydHMuZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzID0gZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXRUZW1wbGF0ZUluZm8gPSBnZXRUZW1wbGF0ZUluZm87XG5leHBvcnRzLmdldFdlZWtseU5vdGUgPSBnZXRXZWVrbHlOb3RlO1xuZXhwb3J0cy5nZXRXZWVrbHlOb3RlU2V0dGluZ3MgPSBnZXRXZWVrbHlOb3RlU2V0dGluZ3M7XG5leHBvcnRzLmdldFllYXJseU5vdGUgPSBnZXRZZWFybHlOb3RlO1xuZXhwb3J0cy5nZXRZZWFybHlOb3RlU2V0dGluZ3MgPSBnZXRZZWFybHlOb3RlU2V0dGluZ3M7XG4iLCAiLyoqXHJcbiAqIEhvbWUgQmFzZSBQbHVnaW5cclxuICogWW91ciBkZWRpY2F0ZWQgaG9tZSBpbiB5b3VyIHZhdWx0XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTm90aWNlLCBQbGF0Zm9ybSwgUGx1Z2luLCBhZGRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTLCBIb21lQmFzZVNldHRpbmdzLCBIb21lQmFzZVR5cGUgfSBmcm9tICcuL3NldHRpbmdzJztcclxuaW1wb3J0IHsgSG9tZUJhc2VTZXR0aW5nVGFiIH0gZnJvbSAnLi91aS9zZXR0aW5ncy10YWInO1xyXG5pbXBvcnQgeyBIb21lQmFzZVNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL2hvbWUtc2VydmljZSc7XHJcbmltcG9ydCB7IE5ld1RhYlNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL25ldy10YWItc2VydmljZSc7XHJcbmltcG9ydCB7IFN0aWNreVRhYlNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL3N0aWNreS10YWItc2VydmljZSc7XHJcbmltcG9ydCB7IE1vYmlsZUJ1dHRvblNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL21vYmlsZS1idXR0b24tc2VydmljZSc7XHJcblxyXG4vKipcclxuICogRXh0ZW5kZWQgQXBwIGludGVyZmFjZSBmb3IgcmVsZWFzZSBub3RlcyBwYXRjaGluZ1xyXG4gKi9cclxuaW50ZXJmYWNlIEFwcFdpdGhSZWxlYXNlTm90ZXMge1xyXG5cdHNob3dSZWxlYXNlTm90ZXM/OiAoKSA9PiB2b2lkO1xyXG5cdG52T3JpZ19zaG93UmVsZWFzZU5vdGVzPzogKCkgPT4gdm9pZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEN1c3RvbSBob21lIGljb24gU1ZHIChMdWNpZGUgaG91c2UgaWNvbilcclxuICovXHJcbmNvbnN0IEhPTUVfSUNPTiA9IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+PHBhdGggZD1cIk0xNSAyMXYtOGExIDEgMCAwIDAtMS0xaC00YTEgMSAwIDAgMC0xIDF2OFwiLz48cGF0aCBkPVwiTTMgMTBhMiAyIDAgMCAxIC43MDktMS41MjhsNy02YTIgMiAwIDAgMSAyLjU4MiAwbDcgNkEyIDIgMCAwIDEgMjEgMTB2OWEyIDIgMCAwIDEtMiAySDVhMiAyIDAgMCAxLTItMnpcIi8+PC9zdmc+YDtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhvbWVCYXNlUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRzZXR0aW5ncyE6IEhvbWVCYXNlU2V0dGluZ3M7XHJcblx0XHJcblx0Ly8gU2VydmljZXNcclxuXHRob21lU2VydmljZSE6IEhvbWVCYXNlU2VydmljZTtcclxuXHRuZXdUYWJTZXJ2aWNlITogTmV3VGFiU2VydmljZTtcclxuXHRzdGlja3lUYWJTZXJ2aWNlITogU3RpY2t5VGFiU2VydmljZTtcclxuXHRtb2JpbGVCdXR0b25TZXJ2aWNlITogTW9iaWxlQnV0dG9uU2VydmljZTtcclxuXHRcclxuXHQvLyBSZWxlYXNlIG5vdGVzIHRyYWNraW5nXHJcblx0cHJpdmF0ZSBuZXdSZWxlYXNlOiBib29sZWFuID0gZmFsc2U7XHJcblx0XHJcblx0Ly8gVHJhY2sgaWYgcGF0Y2hlZCBvcGVuaW5nIGJlaGF2aW9yIGFscmVhZHkgcmFuXHJcblx0cHJpdmF0ZSBvcGVuaW5nQmVoYXZpb3JSYW46IGJvb2xlYW4gPSBmYWxzZTtcclxuXHRcclxuXHQvLyBUcmFjayBpZiB3ZSdyZSBjdXJyZW50bHkgaW4gc3RhcnR1cCAodG8gcHJldmVudCBoYW5kbGVPcGVuV2hlbkVtcHR5IGZyb20gZmlyaW5nKVxyXG5cdHByaXZhdGUgaXNTdGFydHVwOiBib29sZWFuID0gdHJ1ZTtcclxuXHJcblx0YXN5bmMgb25sb2FkKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHRcdFxyXG5cdFx0Ly8gTWlncmF0ZSBsZWdhY3kgc2V0dGluZ3Mgb24gZmlyc3QgbG9hZFxyXG5cdFx0YXdhaXQgdGhpcy5taWdyYXRlTGVnYWN5U2V0dGluZ3MoKTtcclxuXHJcblx0XHQvLyBQYXRjaCBvcGVuaW5nIGJlaGF2aW9yIGZvciBmYXN0IHN0YXJ0dXAgKGJlZm9yZSBvdGhlciBpbml0aWFsaXphdGlvbilcclxuXHRcdHRoaXMucGF0Y2hPcGVuaW5nQmVoYXZpb3IoKTtcclxuXHJcblx0XHQvLyBSZWdpc3RlciBjdXN0b20gaWNvblxyXG5cdFx0YWRkSWNvbignaG9tZS1iYXNlJywgSE9NRV9JQ09OKTtcclxuXHJcblx0XHQvLyBJbml0aWFsaXplIHNlcnZpY2VzXHJcblx0XHR0aGlzLmhvbWVTZXJ2aWNlID0gbmV3IEhvbWVCYXNlU2VydmljZSh0aGlzKTtcclxuXHRcdHRoaXMubmV3VGFiU2VydmljZSA9IG5ldyBOZXdUYWJTZXJ2aWNlKHRoaXMpO1xyXG5cdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlID0gbmV3IFN0aWNreVRhYlNlcnZpY2UodGhpcyk7XHJcblx0XHR0aGlzLm1vYmlsZUJ1dHRvblNlcnZpY2UgPSBuZXcgTW9iaWxlQnV0dG9uU2VydmljZSh0aGlzKTtcclxuXHJcblx0XHQvLyBBZGQgcmliYm9uIGljb25cclxuXHRcdHRoaXMuYWRkUmliYm9uSWNvbignaG9tZScsICdPcGVuIGhvbWUgYmFzZScsICgpID0+IHtcclxuXHRcdFx0dm9pZCB0aGlzLmhvbWVTZXJ2aWNlLm9wZW5Ib21lQmFzZSh7XHJcblx0XHRcdFx0cmVwbGFjZUFjdGl2ZUxlYWY6IGZhbHNlLFxyXG5cdFx0XHRcdHJ1bkNvbW1hbmQ6IHRydWUsXHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gUmVnaXN0ZXIgY29tbWFuZHNcclxuXHRcdHRoaXMucmVnaXN0ZXJDb21tYW5kcygpO1xyXG5cclxuXHRcdC8vIEFkZCBzZXR0aW5ncyB0YWJcclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgSG9tZUJhc2VTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG5cdFx0Ly8gV2FpdCBmb3IgbGF5b3V0IHRvIGJlIHJlYWR5XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XHJcblx0XHRcdC8vIFVzZSBhIHNtYWxsIGRlbGF5IHRvIGVuc3VyZSBET00gaXMgcmVhZHkgKGVzcGVjaWFsbHkgZm9yIHNldHRpbmdzIG1vZGFsIGRldGVjdGlvbilcclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgc2V0dGluZ3MgbW9kYWwgaXMgb3BlbiAtIGlmIHNvLCBza2lwIHN0YXJ0dXAgbG9naWNcclxuXHRcdFx0XHRpZiAodGhpcy5pc1NldHRpbmdzTW9kYWxPcGVuKCkpIHtcclxuXHRcdFx0XHRcdC8vIFN0aWxsIHVwZGF0ZSBVSSBmZWF0dXJlcywganVzdCBkb24ndCBydW4gc3RhcnR1cCBsb2dpY1xyXG5cdFx0XHRcdFx0dGhpcy51cGRhdGVTdGlja3lUYWJJY29uKCk7XHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZU1vYmlsZUJ1dHRvbigpO1xyXG5cdFx0XHRcdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlLnVwZGF0ZVRhYkhlYWRlcnMoKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIEFsd2F5cyBpbml0aWFsaXplIHRoZSBuZXcgdGFiIHNlcnZpY2UgdG8gdHJhY2sgZXhpc3RpbmcgbGVhdmVzXHJcblx0XHRcdFx0Ly8gVGhpcyBpcyBuZWVkZWQgZm9yIG5ldyB0YWIgcmVwbGFjZW1lbnQgdG8gd29ya1xyXG5cdFx0XHRcdC8vIEJ1dCBvbmx5IHJ1biBzdGFydHVwIGxvZ2ljIGlmIG9wZW5pbmcgYmVoYXZpb3IgZGlkbid0IGFscmVhZHkgcnVuXHJcblx0XHRcdFx0aWYgKCF0aGlzLm9wZW5pbmdCZWhhdmlvclJhbikge1xyXG5cdFx0XHRcdFx0Ly8gT3BlbmluZyBiZWhhdmlvciBkaWRuJ3QgcnVuLCBzbyBpbml0aWFsaXplIG5vcm1hbGx5IChpbmNsdWRlcyBzdGFydHVwKVxyXG5cdFx0XHRcdFx0dGhpcy5uZXdUYWJTZXJ2aWNlLmluaXRpYWxpemUoKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gT3BlbmluZyBiZWhhdmlvciBhbHJlYWR5IHJhbiwgYnV0IHdlIHN0aWxsIG5lZWQgdG8gdHJhY2sgZXhpc3RpbmcgbGVhdmVzXHJcblx0XHRcdFx0XHQvLyBmb3IgbmV3IHRhYiByZXBsYWNlbWVudCB0byB3b3JrXHJcblx0XHRcdFx0XHR0aGlzLm5ld1RhYlNlcnZpY2UudHJhY2tFeGlzdGluZ0xlYXZlcygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBNYXJrIHN0YXJ0dXAgYXMgY29tcGxldGUgYWZ0ZXIgYSBkZWxheSB0byBhbGxvdyBldmVyeXRoaW5nIHRvIHNldHRsZVxyXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5pc1N0YXJ0dXAgPSBmYWxzZTtcclxuXHRcdFx0XHR9LCAxMDAwKTtcclxuXHJcblx0XHRcdFx0Ly8gVXBkYXRlIFVJIGZlYXR1cmVzXHJcblx0XHRcdFx0dGhpcy51cGRhdGVTdGlja3lUYWJJY29uKCk7XHJcblx0XHRcdFx0dGhpcy51cGRhdGVNb2JpbGVCdXR0b24oKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBVcGRhdGUgdGFiIGhlYWRlcnMgYWZ0ZXIgbGF5b3V0IGlzIHJlYWR5XHJcblx0XHRcdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlLnVwZGF0ZVRhYkhlYWRlcnMoKTtcclxuXHRcdFx0fSwgMTAwKTsgLy8gU21hbGwgZGVsYXkgdG8gZW5zdXJlIERPTSBpcyByZWFkeVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gUmVnaXN0ZXIgbGF5b3V0IGNoYW5nZSBoYW5kbGVyXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbignbGF5b3V0LWNoYW5nZScsIGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHR0aGlzLm5ld1RhYlNlcnZpY2UuaGFuZGxlTGF5b3V0Q2hhbmdlKCk7XHJcblx0XHRcdFx0Ly8gSGFuZGxlIHJldmVydCB2aWV3IG9uIGNsb3NlXHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MucmV2ZXJ0Vmlldykge1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5ob21lU2VydmljZS5yZXZlcnRWaWV3KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFwiT3BlbiB3aGVuIGVtcHR5XCIgZmVhdHVyZSByZW1vdmVkIC0gdXNlIFwiTmV3IHRhYiByZXBsYWNlbWVudDogb25seSB3aGVuIGVtcHR5XCIgaW5zdGVhZFxyXG5cdFx0XHRcdC8vIFRoZXkgZG8gdGhlIHNhbWUgdGhpbmcgc2luY2UgT2JzaWRpYW4gYXV0by1jcmVhdGVzIGFuIGVtcHR5IHRhYiB3aGVuIHlvdSBjbG9zZSB0aGUgbGFzdCBvbmVcclxuXHRcdFx0XHQvLyBEZWxheSB0YWIgaGVhZGVyIHVwZGF0ZXMgdG8gYXZvaWQgZmxpY2tlcmluZyBkdXJpbmcgdGFiIHRyYW5zaXRpb25zXHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlQWN0aXZlU3RhdGUoKTtcclxuXHRcdFx0XHRcdHRoaXMuc3RpY2t5VGFiU2VydmljZS51cGRhdGVUYWJIZWFkZXJzKCk7XHJcblx0XHRcdFx0XHQvLyBBbHNvIHVwZGF0ZSBpY29uIHBvc2l0aW9uIGluIGNhc2Ugc2lkZWJhciBzdGF0ZSBjaGFuZ2VkXHJcblx0XHRcdFx0XHR0aGlzLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlSWNvblBvc2l0aW9uRm9yU2lkZWJhcigpO1xyXG5cdFx0XHRcdH0sIDE1MCk7XHJcblx0XHRcdH0pXHJcblx0XHQpO1xyXG5cclxuXHRcdC8vIFJlZ2lzdGVyIGZpbGUgb3BlbiBoYW5kbGVyIGZvciBhY3RpdmUgc3RhdGUgdXBkYXRlc1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtb3BlbicsICgpID0+IHtcclxuXHRcdFx0XHQvLyBEZWxheSB1cGRhdGVzIHRvIGxldCBmaWxlIG9wZW4gYW5pbWF0aW9uIGNvbXBsZXRlXHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlQWN0aXZlU3RhdGUoKTtcclxuXHRcdFx0XHRcdHRoaXMuc3RpY2t5VGFiU2VydmljZS51cGRhdGVUYWJIZWFkZXJzKCk7XHJcblx0XHRcdFx0fSwgMTAwKTtcclxuXHRcdFx0fSlcclxuXHRcdCk7XHJcblxyXG5cdFx0Ly8gUmVnaXN0ZXIgYWN0aXZlIGxlYWYgY2hhbmdlIGhhbmRsZXIgZm9yIHRhYiBoZWFkZXIgdXBkYXRlc1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2FjdGl2ZS1sZWFmLWNoYW5nZScsICgpID0+IHtcclxuXHRcdFx0XHQvLyBEZWxheSB0byBsZXQgdGFiIHN3aXRjaCBhbmltYXRpb24gY29tcGxldGVcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMuc3RpY2t5VGFiU2VydmljZS51cGRhdGVUYWJIZWFkZXJzKCk7XHJcblx0XHRcdFx0fSwgMTAwKTtcclxuXHRcdFx0fSlcclxuXHRcdCk7XHJcblxyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKTogdm9pZCB7XHJcblx0XHQvLyBVbnBhdGNoIHJlbGVhc2Ugbm90ZXNcclxuXHRcdHRoaXMudW5wYXRjaFJlbGVhc2VOb3RlcygpO1xyXG5cdFx0XHJcblx0XHQvLyBVbnBhdGNoIG9wZW5pbmcgYmVoYXZpb3JcclxuXHRcdHRoaXMudW5wYXRjaE9wZW5pbmdCZWhhdmlvcigpO1xyXG5cdFx0XHJcblx0XHQvLyBDbGVhbiB1cCBzZXJ2aWNlc1xyXG5cdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlLnJlbW92ZSgpO1xyXG5cdFx0dGhpcy5tb2JpbGVCdXR0b25TZXJ2aWNlLnJlbW92ZSgpO1xyXG5cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlZ2lzdGVyIHBsdWdpbiBjb21tYW5kc1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgcmVnaXN0ZXJDb21tYW5kcygpOiB2b2lkIHtcclxuXHRcdC8vIE9wZW4gaG9tZSBiYXNlXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ29wZW4nLFxyXG5cdFx0XHRuYW1lOiAnT3BlbicsXHJcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMuZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xyXG5cdFx0XHRcdGlmICghaG9tZUJhc2VTZXR0aW5ncy52YWx1ZSAmJiBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XHJcblx0XHRcdFx0XHRuZXcgTm90aWNlKCdObyBob21lIGJhc2UgY29uZmlndXJlZC4gU2V0IG9uZSBpbiBzZXR0aW5ncy4nKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dm9pZCB0aGlzLmhvbWVTZXJ2aWNlLm9wZW5Ib21lQmFzZSh7XHJcblx0XHRcdFx0XHRyZXBsYWNlQWN0aXZlTGVhZjogZmFsc2UsXHJcblx0XHRcdFx0XHRydW5Db21tYW5kOiB0cnVlLFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gU2V0IGN1cnJlbnQgZmlsZSBhcyBob21lIGJhc2VcclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnc2V0LWN1cnJlbnQtZmlsZScsXHJcblx0XHRcdG5hbWU6ICdTZXQgY3VycmVudCBmaWxlIGFzIGhvbWUnLFxyXG5cdFx0XHRjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmcpID0+IHtcclxuXHRcdFx0XHRpZiAoIXRoaXMuaG9tZVNlcnZpY2UuY2FuU2V0QWN0aXZlRmlsZUFzSG9tZUJhc2UoKSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIWNoZWNraW5nKSB7XHJcblx0XHRcdFx0XHR2b2lkIHRoaXMuaG9tZVNlcnZpY2Uuc2V0QWN0aXZlRmlsZUFzSG9tZUJhc2UoKS50aGVuKChzdWNjZXNzKSA9PiB7XHJcblx0XHRcdFx0XHRcdGlmIChzdWNjZXNzKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShgSG9tZSBiYXNlIHNldCB0byBcIiR7YWN0aXZlRmlsZT8ubmFtZX1cImApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBUb2dnbGUgc3RpY2t5IGhvbWUgaWNvblxyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICd0b2dnbGUtc3RpY2t5LWljb24nLFxyXG5cdFx0XHRuYW1lOiAnVG9nZ2xlIHN0aWNreSBob21lIGljb24nLFxyXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuc3RpY2t5VGFiU2VydmljZS50b2dnbGUoKTtcclxuXHRcdFx0XHRjb25zdCBzdGF0ZSA9IHRoaXMuc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uID8gJ2VuYWJsZWQnIDogJ2Rpc2FibGVkJztcclxuXHRcdFx0XHRuZXcgTm90aWNlKGBTdGlja3kgaG9tZSBpY29uICR7c3RhdGV9YCk7XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBDbG9zZSBob21lIGJhc2VcclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnY2xvc2UnLFxyXG5cdFx0XHRuYW1lOiAnQ2xvc2UnLFxyXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuc3RpY2t5VGFiU2VydmljZS5jbG9zZUhvbWVCYXNlKCk7XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIExvYWQgcGx1Z2luIHNldHRpbmdzXHJcblx0ICovXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Y29uc3QgZGF0YSA9IChhd2FpdCB0aGlzLmxvYWREYXRhKCkpIGFzIFBhcnRpYWw8SG9tZUJhc2VTZXR0aW5ncz4gfCBudWxsO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGRhdGEgPz8ge30pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogTWlncmF0ZSBsZWdhY3kgc2V0dGluZ3MgdG8gbmV3IGZvcm1hdFxyXG5cdCAqL1xyXG5cdGFzeW5jIG1pZ3JhdGVMZWdhY3lTZXR0aW5ncygpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGxldCBuZWVkc1NhdmUgPSBmYWxzZTtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5zZXR0aW5ncyBhcyB1bmtub3duIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4gfCBIb21lQmFzZVR5cGUgfCB1bmRlZmluZWQ+O1xyXG5cdFx0XHJcblx0XHQvLyBNaWdyYXRlIGhvbWVCYXNlUGF0aCB0byBob21lQmFzZVR5cGUvaG9tZUJhc2VWYWx1ZVxyXG5cdFx0aWYgKHNldHRpbmdzLmhvbWVCYXNlUGF0aCAmJiAhdGhpcy5zZXR0aW5ncy5ob21lQmFzZVZhbHVlKSB7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MuaG9tZUJhc2VUeXBlID0gSG9tZUJhc2VUeXBlLkZpbGU7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MuaG9tZUJhc2VWYWx1ZSA9IHNldHRpbmdzLmhvbWVCYXNlUGF0aCBhcyBzdHJpbmc7XHJcblx0XHRcdG5lZWRzU2F2ZSA9IHRydWU7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIE1pZ3JhdGUga2VlcEV4aXN0aW5nVGFicyB0byBvcGVuTW9kZVxyXG5cdFx0aWYgKHNldHRpbmdzLmtlZXBFeGlzdGluZ1RhYnMgIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHQvLyBPbmx5IG1pZ3JhdGUgaWYgb3Blbk1vZGUgaXMgc3RpbGwgYXQgZGVmYXVsdCAoaGFzbid0IGJlZW4gc2V0IGJ5IHVzZXIpXHJcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLm9wZW5Nb2RlID09PSBERUZBVUxUX1NFVFRJTkdTLm9wZW5Nb2RlKSB7XHJcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5vcGVuTW9kZSA9IHNldHRpbmdzLmtlZXBFeGlzdGluZ1RhYnMgPyAncmV0YWluJyA6ICdyZXBsYWNlLWFsbCc7XHJcblx0XHRcdFx0bmVlZHNTYXZlID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBEZWxldGUgbGVnYWN5IHByb3BlcnR5IHNvIGl0IGRvZXNuJ3QgdHJpZ2dlciBhZ2FpblxyXG5cdFx0XHRkZWxldGUgc2V0dGluZ3Mua2VlcEV4aXN0aW5nVGFicztcclxuXHRcdFx0bmVlZHNTYXZlID0gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gTWlncmF0ZSBtb2JpbGUgaG9tZUJhc2VQYXRoXHJcblx0XHRpZiAoc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VQYXRoICYmICF0aGlzLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVmFsdWUpIHtcclxuXHRcdFx0dGhpcy5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVR5cGUgPSBIb21lQmFzZVR5cGUuRmlsZTtcclxuXHRcdFx0dGhpcy5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVZhbHVlID0gc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VQYXRoIGFzIHN0cmluZztcclxuXHRcdFx0bmVlZHNTYXZlID0gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBBbHNvIGNsZWFuIHVwIG1vYmlsZSBob21lIGJhc2UgcGF0aCBsZWdhY3kgcHJvcGVydHlcclxuXHRcdGlmIChzZXR0aW5ncy5tb2JpbGVIb21lQmFzZVBhdGggIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRkZWxldGUgc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VQYXRoO1xyXG5cdFx0XHRuZWVkc1NhdmUgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENsZWFuIHVwIGxlZ2FjeSBob21lQmFzZVBhdGggaWYgaXQgbWF0Y2hlcyBob21lQmFzZVZhbHVlXHJcblx0XHRpZiAoc2V0dGluZ3MuaG9tZUJhc2VQYXRoICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0ZGVsZXRlIHNldHRpbmdzLmhvbWVCYXNlUGF0aDtcclxuXHRcdFx0bmVlZHNTYXZlID0gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKG5lZWRzU2F2ZSkge1xyXG5cdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IHRoZSBhY3RpdmUgaG9tZSBiYXNlIHNldHRpbmdzIChtb2JpbGUgb3IgZGVza3RvcClcclxuXHQgKi9cclxuXHRnZXRIb21lQmFzZVNldHRpbmdzKCk6IHtcclxuXHRcdHR5cGU6IEhvbWVCYXNlVHlwZTtcclxuXHRcdHZhbHVlOiBzdHJpbmc7XHJcblx0XHRwYXRoOiBzdHJpbmc7IC8vIExlZ2FjeSBjb21wYXRpYmlsaXR5XHJcblx0fSB7XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5zZXBhcmF0ZU1vYmlsZSAmJiBQbGF0Zm9ybS5pc01vYmlsZSkge1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdHR5cGU6IHRoaXMuc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VUeXBlIHx8IEhvbWVCYXNlVHlwZS5GaWxlLFxyXG5cdFx0XHRcdHZhbHVlOiB0aGlzLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVmFsdWUgfHwgdGhpcy5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVBhdGggfHwgJycsXHJcblx0XHRcdFx0cGF0aDogdGhpcy5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVBhdGggfHwgdGhpcy5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVZhbHVlIHx8ICcnLFxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHR0eXBlOiB0aGlzLnNldHRpbmdzLmhvbWVCYXNlVHlwZSB8fCBIb21lQmFzZVR5cGUuRmlsZSxcclxuXHRcdFx0dmFsdWU6IHRoaXMuc2V0dGluZ3MuaG9tZUJhc2VWYWx1ZSB8fCB0aGlzLnNldHRpbmdzLmhvbWVCYXNlUGF0aCB8fCAnJyxcclxuXHRcdFx0cGF0aDogdGhpcy5zZXR0aW5ncy5ob21lQmFzZVBhdGggfHwgdGhpcy5zZXR0aW5ncy5ob21lQmFzZVZhbHVlIHx8ICcnLFxyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCB0aGUgYWN0aXZlIG5ldyB0YWIgc2V0dGluZ3MgKG1vYmlsZSBvciBkZXNrdG9wKVxyXG5cdCAqIEZhbGxzIGJhY2sgdG8gaG9tZSBiYXNlIHNldHRpbmdzIGlmIHVzZURpZmZlcmVudEZpbGVGb3JOZXdUYWIgaXMgZGlzYWJsZWRcclxuXHQgKi9cclxuXHRnZXROZXdUYWJTZXR0aW5ncygpOiB7XHJcblx0XHR0eXBlOiBIb21lQmFzZVR5cGU7XHJcblx0XHR2YWx1ZTogc3RyaW5nO1xyXG5cdFx0cGF0aDogc3RyaW5nOyAvLyBMZWdhY3kgY29tcGF0aWJpbGl0eVxyXG5cdH0ge1xyXG5cdFx0Ly8gSWYgbm90IHVzaW5nIGRpZmZlcmVudCBmaWxlIGZvciBuZXcgdGFiLCBmYWxsIGJhY2sgdG8gaG9tZSBiYXNlIHNldHRpbmdzXHJcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3MudXNlRGlmZmVyZW50RmlsZUZvck5ld1RhYikge1xyXG5cdFx0XHRjb25zdCBob21lQmFzZVNldHRpbmdzID0gdGhpcy5nZXRIb21lQmFzZVNldHRpbmdzKCk7XHJcblx0XHRcdGNvbnNvbGUuZGVidWcoJ1tIb21lIEJhc2VdIGdldE5ld1RhYlNldHRpbmdzOiBVc2luZyBob21lIGJhc2Ugc2V0dGluZ3MgKHVzZURpZmZlcmVudEZpbGVGb3JOZXdUYWIgaXMgZmFsc2UpJywgaG9tZUJhc2VTZXR0aW5ncyk7XHJcblx0XHRcdHJldHVybiBob21lQmFzZVNldHRpbmdzO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFVzZSBuZXcgdGFiIHNldHRpbmdzLCBjaGVja2luZyBmb3IgbW9iaWxlIGlmIHNlcGFyYXRlIG1vYmlsZSBpcyBlbmFibGVkXHJcblx0XHRsZXQgc2V0dGluZ3M6IHsgdHlwZTogSG9tZUJhc2VUeXBlOyB2YWx1ZTogc3RyaW5nOyBwYXRoOiBzdHJpbmcgfTtcclxuXHRcdFxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MubmV3VGFiU2VwYXJhdGVNb2JpbGUgJiYgUGxhdGZvcm0uaXNNb2JpbGUpIHtcclxuXHRcdFx0c2V0dGluZ3MgPSB7XHJcblx0XHRcdFx0dHlwZTogdGhpcy5zZXR0aW5ncy5tb2JpbGVOZXdUYWJUeXBlIHx8IEhvbWVCYXNlVHlwZS5GaWxlLFxyXG5cdFx0XHRcdHZhbHVlOiB0aGlzLnNldHRpbmdzLm1vYmlsZU5ld1RhYlZhbHVlIHx8ICcnLFxyXG5cdFx0XHRcdHBhdGg6IHRoaXMuc2V0dGluZ3MubW9iaWxlTmV3VGFiVmFsdWUgfHwgJycsXHJcblx0XHRcdH07XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRzZXR0aW5ncyA9IHtcclxuXHRcdFx0XHR0eXBlOiB0aGlzLnNldHRpbmdzLm5ld1RhYlR5cGUgfHwgSG9tZUJhc2VUeXBlLkZpbGUsXHJcblx0XHRcdFx0dmFsdWU6IHRoaXMuc2V0dGluZ3MubmV3VGFiVmFsdWUgfHwgJycsXHJcblx0XHRcdFx0cGF0aDogdGhpcy5zZXR0aW5ncy5uZXdUYWJWYWx1ZSB8fCAnJyxcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gVmFsaWRhdGUgc2V0dGluZ3NcclxuXHRcdGlmICghc2V0dGluZ3MudmFsdWUgJiYgc2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUpIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKCdbSG9tZSBCYXNlXSBnZXROZXdUYWJTZXR0aW5nczogbmV3VGFiVmFsdWUgaXMgZW1wdHkgZm9yIEZpbGUgdHlwZSwgZmFsbGluZyBiYWNrIHRvIGhvbWUgYmFzZSBzZXR0aW5ncycpO1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5nZXRIb21lQmFzZVNldHRpbmdzKCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGNvbnNvbGUuZGVidWcoJ1tIb21lIEJhc2VdIGdldE5ld1RhYlNldHRpbmdzOiBVc2luZyBuZXcgdGFiIHNldHRpbmdzJywge1xyXG5cdFx0XHR1c2VEaWZmZXJlbnRGaWxlRm9yTmV3VGFiOiB0aGlzLnNldHRpbmdzLnVzZURpZmZlcmVudEZpbGVGb3JOZXdUYWIsXHJcblx0XHRcdG5ld1RhYlNlcGFyYXRlTW9iaWxlOiB0aGlzLnNldHRpbmdzLm5ld1RhYlNlcGFyYXRlTW9iaWxlLFxyXG5cdFx0XHRpc01vYmlsZTogUGxhdGZvcm0uaXNNb2JpbGUsXHJcblx0XHRcdHNldHRpbmdzOiBzZXR0aW5nc1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdHJldHVybiBzZXR0aW5ncztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNhdmUgcGx1Z2luIHNldHRpbmdzXHJcblx0ICovXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSB0aGUgc3RpY2t5IHRhYiBpY29uIGJhc2VkIG9uIGN1cnJlbnQgc2V0dGluZ3NcclxuXHQgKi9cclxuXHR1cGRhdGVTdGlja3lUYWJJY29uKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlLnVwZGF0ZSgpO1xyXG5cdFx0Ly8gQWxzbyB1cGRhdGUgdGFiIGhlYWRlcnMgd2hlbiBzdGlja3kgaWNvbiBzZXR0aW5nIGNoYW5nZXNcclxuXHRcdHRoaXMuc3RpY2t5VGFiU2VydmljZS51cGRhdGVUYWJIZWFkZXJzKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgdGhlIG1vYmlsZSBidXR0b24gYmFzZWQgb24gY3VycmVudCBzZXR0aW5nc1xyXG5cdCAqL1xyXG5cdHVwZGF0ZU1vYmlsZUJ1dHRvbigpOiB2b2lkIHtcclxuXHRcdHRoaXMubW9iaWxlQnV0dG9uU2VydmljZS51cGRhdGUoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIHdlIHNob3VsZCBza2lwIHN0YXJ0dXAgbG9naWMgKGUuZy4sIHBsdWdpbiByZWxvYWQsIHNldHRpbmdzIG1vZGFsIG9wZW4pXHJcblx0ICogVGhpcyBwcmV2ZW50cyBkZXN0cnVjdGl2ZSBiZWhhdmlvciB3aGVuIHRoZSBwbHVnaW4gaXMgcmVsb2FkZWQgb3Igc2V0dGluZ3MgYXJlIG9wZW5cclxuXHQgKi9cclxuXHRwcml2YXRlIHNob3VsZFNraXBTdGFydHVwTG9naWMoKTogYm9vbGVhbiB7XHJcblx0XHQvLyBDaGVjayBpZiBzZXR0aW5ncyBtb2RhbCBpcyBvcGVuIC0gbmV2ZXIgcnVuIHN0YXJ0dXAgbG9naWMgaWYgaXQgaXNcclxuXHRcdGlmICh0aGlzLmlzU2V0dGluZ3NNb2RhbE9wZW4oKSkge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBpZiB0aGlzIGlzIGEgcGx1Z2luIHJlbG9hZCB2cyBhY3R1YWwgYXBwIHN0YXJ0dXBcclxuXHRcdC8vIE9uIGFjdHVhbCBzdGFydHVwLCBPYnNpZGlhbiBoYXNuJ3QgcmVzdG9yZWQgdGhlIHdvcmtzcGFjZSB5ZXRcclxuXHRcdC8vIE9uIHBsdWdpbiByZWxvYWQsIGZpbGVzIGFyZSBhbHJlYWR5IG9wZW4gYW5kIHdvcmtzcGFjZSBpcyByZXN0b3JlZFxyXG5cdFx0Y29uc3QgaGFzT3BlbkZpbGVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnbWFya2Rvd24nKS5sZW5ndGggPiAwIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdjYW52YXMnKS5sZW5ndGggPiAwIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdiYXNlcycpLmxlbmd0aCA+IDAgfHxcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2VtcHR5JykubGVuZ3RoID4gMDtcclxuXHRcdFxyXG5cdFx0Ly8gSWYgZmlsZXMgYXJlIG9wZW4sIHRoaXMgaXMgbGlrZWx5IGEgcGx1Z2luIHJlbG9hZCwgbm90IGFjdHVhbCBzdGFydHVwXHJcblx0XHRyZXR1cm4gaGFzT3BlbkZpbGVzO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgdGhlIHNldHRpbmdzIG1vZGFsIGlzIGN1cnJlbnRseSBvcGVuXHJcblx0ICovXHJcblx0cHJpdmF0ZSBpc1NldHRpbmdzTW9kYWxPcGVuKCk6IGJvb2xlYW4ge1xyXG5cdFx0Ly8gQ2hlY2sgZm9yIHNldHRpbmdzIG1vZGFsIGJ5IGxvb2tpbmcgZm9yIHRoZSBtb2RhbCBjb250YWluZXJcclxuXHRcdC8vIFRyeSBtdWx0aXBsZSBzZWxlY3RvcnMgdG8gYmUgbW9yZSByb2J1c3RcclxuXHRcdGNvbnN0IHNldHRpbmdzTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGFpbmVyLm1vZC1zZXR0aW5ncycpIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLm1vZC1zZXR0aW5ncycpIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZlcnRpY2FsLXRhYi1jb250ZW50Jyk7XHJcblx0XHRcclxuXHRcdC8vIEFsc28gY2hlY2sgaWYgYW55IG1vZGFsIGlzIG9wZW4gYW5kIGNvbnRhaW5zIHNldHRpbmdzIGNvbnRlbnRcclxuXHRcdGlmICghc2V0dGluZ3NNb2RhbCkge1xyXG5cdFx0XHRjb25zdCBhbGxNb2RhbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWwtY29udGFpbmVyJyk7XHJcblx0XHRcdGZvciAoY29uc3QgbW9kYWwgb2YgQXJyYXkuZnJvbShhbGxNb2RhbHMpKSB7XHJcblx0XHRcdFx0aWYgKG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8IFxyXG5cdFx0XHRcdCAgICBtb2RhbC5xdWVyeVNlbGVjdG9yKCcuc2V0dGluZ3MtY29udGVudCcpIHx8XHJcblx0XHRcdFx0ICAgIG1vZGFsLmNsYXNzTGlzdC5jb250YWlucygnbW9kLXNldHRpbmdzJykpIHtcclxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gc2V0dGluZ3NNb2RhbCAhPT0gbnVsbDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFBhdGNoIHJ1bk9wZW5pbmdCZWhhdmlvciBmb3IgZmFzdCBzdGFydHVwIChsaWtlIGhvbWVwYWdlIHBsdWdpbilcclxuXHQgKi9cclxuXHRwcml2YXRlIHBhdGNoT3BlbmluZ0JlaGF2aW9yKCk6IHZvaWQge1xyXG5cdFx0Ly8gU3RvcmUgb3JpZ2luYWwgbWV0aG9kXHJcblx0XHQgXHJcblx0XHR0aGlzLmFwcC5udk9yaWdfcnVuT3BlbmluZ0JlaGF2aW9yID0gdGhpcy5hcHAucnVuT3BlbmluZ0JlaGF2aW9yO1xyXG5cdFx0XHJcblx0XHQvLyBQYXRjaCB0aGUgbWV0aG9kXHJcblx0XHQgXHJcblx0XHR0aGlzLmFwcC5ydW5PcGVuaW5nQmVoYXZpb3IgPSBhc3luYyAocGF0aDogc3RyaW5nKSA9PiB7XHJcblx0XHRjb25zdCBvcGVuSW5pdGlhbGx5ID0gKFxyXG5cdFx0XHR0aGlzLnNldHRpbmdzLm9wZW5PblN0YXJ0dXAgJiYgXHJcblx0XHRcdCF0aGlzLmhhc1VybFBhcmFtcygpXHJcblx0XHQpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKG9wZW5Jbml0aWFsbHkpIHtcclxuXHRcdFx0XHQvLyBNYXJrIHRoYXQgd2UndmUgcnVuIG9wZW5pbmcgYmVoYXZpb3JcclxuXHRcdFx0XHR0aGlzLm9wZW5pbmdCZWhhdmlvclJhbiA9IHRydWU7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gVXNlIGZhc3Qgc3RhcnR1cCAtIGRldGFjaCBhbGwgbGVhdmVzIGFuZCBvcGVuIGhvbWUgYmFzZVxyXG5cdFx0XHRcdGNvbnN0IG1vZGUgPSB0aGlzLnNldHRpbmdzLm9wZW5Nb2RlO1xyXG5cdFx0XHRcdGlmIChtb2RlID09PSAncmVwbGFjZS1hbGwnKSB7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmhvbWVTZXJ2aWNlLmRldGFjaEFsbExlYXZlcygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBVc2UgZ2hvc3QgdGFiIGlmIHN0aWNreSBpY29uIGlzIGVuYWJsZWQsIG90aGVyd2lzZSB1c2Ugbm9ybWFsIG9wZW5cclxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMuaG9tZVNlcnZpY2Uub3BlbkhvbWVCYXNlSW5HaG9zdFRhYih7XHJcblx0XHRcdFx0XHRcdHJ1bkNvbW1hbmQ6IHRydWUsXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5ob21lU2VydmljZS5vcGVuSG9tZUJhc2VXaXRoTW9kZShtb2RlLCB0cnVlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gQ2FsbCBvcmlnaW5hbCBiZWhhdmlvclxyXG5cdFx0XHRcdCBcclxuXHRcdFx0XHRpZiAodGhpcy5hcHAubnZPcmlnX3J1bk9wZW5pbmdCZWhhdmlvcikge1xyXG5cdFx0XHRcdFx0IFxyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAubnZPcmlnX3J1bk9wZW5pbmdCZWhhdmlvcihwYXRoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFVucGF0Y2ggcmVsZWFzZSBub3RlcyBhZnRlciBvcGVuaW5nIGJlaGF2aW9yIGNvbXBsZXRlc1xyXG5cdFx0XHR0aGlzLnVucGF0Y2hSZWxlYXNlTm90ZXMoKTtcclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVbnBhdGNoIHJ1bk9wZW5pbmdCZWhhdmlvclxyXG5cdCAqL1xyXG5cdHByaXZhdGUgdW5wYXRjaE9wZW5pbmdCZWhhdmlvcigpOiB2b2lkIHtcclxuXHRcdCBcclxuXHRcdGlmICh0aGlzLmFwcC5udk9yaWdfcnVuT3BlbmluZ0JlaGF2aW9yKSB7XHJcblx0XHRcdCBcclxuXHRcdFx0dGhpcy5hcHAucnVuT3BlbmluZ0JlaGF2aW9yID0gdGhpcy5hcHAubnZPcmlnX3J1bk9wZW5pbmdCZWhhdmlvcjtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFBhdGNoIHNob3dSZWxlYXNlTm90ZXMgdG8gdHJhY2sgbmV3IHJlbGVhc2VzXHJcblx0ICovXHJcblx0cHJpdmF0ZSBwYXRjaFJlbGVhc2VOb3RlcygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGFwcEFueSA9IHRoaXMuYXBwIGFzIHVua25vd24gYXMgQXBwV2l0aFJlbGVhc2VOb3RlcztcclxuXHRcdCBcclxuXHRcdGFwcEFueS5udk9yaWdfc2hvd1JlbGVhc2VOb3RlcyA9IGFwcEFueS5zaG93UmVsZWFzZU5vdGVzO1xyXG5cdFx0IFxyXG5cdFx0YXBwQW55LnNob3dSZWxlYXNlTm90ZXMgPSAoKSA9PiB7XHJcblx0XHRcdHRoaXMubmV3UmVsZWFzZSA9IHRydWU7XHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVW5wYXRjaCBzaG93UmVsZWFzZU5vdGVzXHJcblx0ICovXHJcblx0cHJpdmF0ZSB1bnBhdGNoUmVsZWFzZU5vdGVzKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgYXBwQW55ID0gdGhpcy5hcHAgYXMgdW5rbm93biBhcyBBcHBXaXRoUmVsZWFzZU5vdGVzO1xyXG5cdFx0IFxyXG5cdFx0aWYgKHRoaXMubmV3UmVsZWFzZSAmJiAhdGhpcy5zZXR0aW5ncy5oaWRlUmVsZWFzZU5vdGVzKSB7XHJcblx0XHRcdCBcclxuXHRcdFx0YXBwQW55Lm52T3JpZ19zaG93UmVsZWFzZU5vdGVzPy4oKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0IFxyXG5cdFx0aWYgKGFwcEFueS5udk9yaWdfc2hvd1JlbGVhc2VOb3Rlcykge1xyXG5cdFx0XHQgXHJcblx0XHRcdGFwcEFueS5zaG93UmVsZWFzZU5vdGVzID0gYXBwQW55Lm52T3JpZ19zaG93UmVsZWFzZU5vdGVzO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgYSBob21lIGJhc2UgdHlwZSBoYXMgaXRzIHJlcXVpcmVkIHBsdWdpbiBlbmFibGVkXHJcblx0ICovXHJcblx0aGFzUmVxdWlyZWRQbHVnaW4odHlwZTogSG9tZUJhc2VUeXBlKTogYm9vbGVhbiB7XHJcblx0XHRzd2l0Y2ggKHR5cGUpIHtcclxuXHRcdFx0Y2FzZSBIb21lQmFzZVR5cGUuV29ya3NwYWNlOlxyXG5cdFx0XHRcdCBcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5hcHAuaW50ZXJuYWxQbHVnaW5zPy5wbHVnaW5zPy53b3Jrc3BhY2VzPy5lbmFibGVkID09PSB0cnVlO1xyXG5cdFx0XHRjYXNlIEhvbWVCYXNlVHlwZS5HcmFwaDpcclxuXHRcdFx0XHQgXHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuYXBwLmludGVybmFsUGx1Z2lucz8ucGx1Z2lucz8uZ3JhcGg/LmVuYWJsZWQgPT09IHRydWU7XHJcblx0XHRcdGNhc2UgSG9tZUJhc2VUeXBlLkpvdXJuYWw6XHJcblx0XHRcdFx0IFxyXG5cdFx0XHRcdHJldHVybiAhIXRoaXMuYXBwLnBsdWdpbnM/LnBsdWdpbnM/Llsnam91cm5hbHMnXTtcclxuXHRcdFx0Y2FzZSBIb21lQmFzZVR5cGUuRGFpbHlOb3RlOlxyXG5cdFx0XHRjYXNlIEhvbWVCYXNlVHlwZS5XZWVrbHlOb3RlOlxyXG5cdFx0XHRjYXNlIEhvbWVCYXNlVHlwZS5Nb250aGx5Tm90ZTpcclxuXHRcdFx0Y2FzZSBIb21lQmFzZVR5cGUuWWVhcmx5Tm90ZTpcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5oYXNSZXF1aXJlZFBlcmlvZGljaXR5KHR5cGUpO1xyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgcGVyaW9kaWMgbm90ZXMgYXJlIGF2YWlsYWJsZSBmb3IgdGhlIGdpdmVuIHR5cGVcclxuXHQgKi9cclxuXHRwcml2YXRlIGhhc1JlcXVpcmVkUGVyaW9kaWNpdHkodHlwZTogSG9tZUJhc2VUeXBlKTogYm9vbGVhbiB7XHJcblx0XHRpZiAodHlwZSA9PT0gSG9tZUJhc2VUeXBlLkRhaWx5Tm90ZSkge1xyXG5cdFx0XHQvLyBEYWlseSBub3RlcyBjYW4gY29tZSBmcm9tIGVpdGhlciBjb3JlIHBsdWdpbiBPUiBwZXJpb2RpYyBub3RlcyBwbHVnaW5cclxuXHRcdFx0Y29uc3QgY29yZURhaWx5Tm90ZXMgPSB0aGlzLmFwcC5pbnRlcm5hbFBsdWdpbnM/LnBsdWdpbnM/LlsnZGFpbHktbm90ZXMnXT8uZW5hYmxlZCA9PT0gdHJ1ZTtcclxuXHRcdFx0aWYgKGNvcmVEYWlseU5vdGVzKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gQ2hlY2sgcGVyaW9kaWMgbm90ZXMgcGx1Z2luIGZvciBkYWlseSBub3RlIHN1cHBvcnRcclxuXHRcdFx0Y29uc3QgcGVyaW9kaWNOb3RlcyA9IHRoaXMuYXBwLnBsdWdpbnM/LnBsdWdpbnM/LlsncGVyaW9kaWMtbm90ZXMnXTtcclxuXHRcdFx0aWYgKHBlcmlvZGljTm90ZXMpIHtcclxuXHRcdFx0XHRjb25zdCB2ZXJzaW9uID0gKHBlcmlvZGljTm90ZXMgYXMgeyBtYW5pZmVzdD86IHsgdmVyc2lvbj86IHN0cmluZyB9IH0pPy5tYW5pZmVzdD8udmVyc2lvbiB8fCAnMCc7XHJcblx0XHRcdFx0Y29uc3QgaXNMZWdhY3kgPSB2ZXJzaW9uLnN0YXJ0c1dpdGgoJzAnKTtcclxuXHRcdFx0IFxyXG5cdFx0XHRcdGlmIChpc0xlZ2FjeSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIChwZXJpb2RpY05vdGVzIGFzIHsgc2V0dGluZ3M/OiBSZWNvcmQ8c3RyaW5nLCB7IGVuYWJsZWQ/OiBib29sZWFuIH0+IH0pPy5zZXR0aW5ncz8uWydkYWlseSddPy5lbmFibGVkID09PSB0cnVlO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRjb25zdCBjYWxlbmRhclNldCA9IChwZXJpb2RpY05vdGVzIGFzIHsgY2FsZW5kYXJTZXRNYW5hZ2VyPzogeyBnZXRBY3RpdmVTZXQ/OiAoKSA9PiBSZWNvcmQ8c3RyaW5nLCB7IGVuYWJsZWQ/OiBib29sZWFuIH0+IH0gfSk/LmNhbGVuZGFyU2V0TWFuYWdlcj8uZ2V0QWN0aXZlU2V0Py4oKTtcclxuXHRcdFx0XHRcdHJldHVybiBjYWxlbmRhclNldD8uWydkYXknXT8uZW5hYmxlZCA9PT0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQgXHJcblx0XHRjb25zdCBwZXJpb2RpY05vdGVzID0gdGhpcy5hcHAucGx1Z2lucz8ucGx1Z2lucz8uWydwZXJpb2RpYy1ub3RlcyddO1xyXG5cdFx0aWYgKCFwZXJpb2RpY05vdGVzKSByZXR1cm4gZmFsc2U7XHJcblx0XHRcclxuXHRcdC8vIENoZWNrIGlmIHBlcmlvZGljIG5vdGVzIHBsdWdpbiBoYXMgdGhlIHJlcXVpcmVkIHBlcmlvZCBlbmFibGVkXHJcblx0XHQgXHJcblx0XHRjb25zdCB2ZXJzaW9uID0gKHBlcmlvZGljTm90ZXMgYXMgeyBtYW5pZmVzdD86IHsgdmVyc2lvbj86IHN0cmluZyB9IH0pPy5tYW5pZmVzdD8udmVyc2lvbiB8fCAnMCc7XHJcblx0XHRjb25zdCBpc0xlZ2FjeSA9IHZlcnNpb24uc3RhcnRzV2l0aCgnMCcpO1xyXG5cdFx0XHJcblx0XHRpZiAoaXNMZWdhY3kpIHtcclxuXHRcdFx0Ly8gTGVnYWN5IHBlcmlvZGljIG5vdGVzXHJcblx0XHRcdGNvbnN0IHBlcmlvZE1hcDogUGFydGlhbDxSZWNvcmQ8SG9tZUJhc2VUeXBlLCBzdHJpbmc+PiA9IHtcclxuXHRcdFx0XHRbSG9tZUJhc2VUeXBlLldlZWtseU5vdGVdOiAnd2Vla2x5JyxcclxuXHRcdFx0XHRbSG9tZUJhc2VUeXBlLk1vbnRobHlOb3RlXTogJ21vbnRobHknLFxyXG5cdFx0XHRcdFtIb21lQmFzZVR5cGUuWWVhcmx5Tm90ZV06ICd5ZWFybHknLFxyXG5cdFx0XHR9O1xyXG5cdFx0XHQgXHJcblx0XHRcdGNvbnN0IGFkamVjdGl2ZSA9IHBlcmlvZE1hcFt0eXBlXTtcclxuXHRcdFx0aWYgKCFhZGplY3RpdmUpIHJldHVybiBmYWxzZTtcclxuXHRcdFx0IFxyXG5cdFx0XHRyZXR1cm4gKHBlcmlvZGljTm90ZXMgYXMgeyBzZXR0aW5ncz86IFJlY29yZDxzdHJpbmcsIHsgZW5hYmxlZD86IGJvb2xlYW4gfT4gfSk/LnNldHRpbmdzPy5bYWRqZWN0aXZlXT8uZW5hYmxlZCA9PT0gdHJ1ZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIE5ldyBwZXJpb2RpYyBub3Rlc1xyXG5cdFx0XHRjb25zdCBub3VuTWFwOiBQYXJ0aWFsPFJlY29yZDxIb21lQmFzZVR5cGUsIHN0cmluZz4+ID0ge1xyXG5cdFx0XHRcdFtIb21lQmFzZVR5cGUuV2Vla2x5Tm90ZV06ICd3ZWVrJyxcclxuXHRcdFx0XHRbSG9tZUJhc2VUeXBlLk1vbnRobHlOb3RlXTogJ21vbnRoJyxcclxuXHRcdFx0XHRbSG9tZUJhc2VUeXBlLlllYXJseU5vdGVdOiAneWVhcicsXHJcblx0XHRcdH07XHJcblx0XHRcdCBcclxuXHRcdFx0Y29uc3Qgbm91biA9IG5vdW5NYXBbdHlwZV07XHJcblx0XHRcdGlmICghbm91bikgcmV0dXJuIGZhbHNlO1xyXG5cdFx0XHQgXHJcblx0XHRcdGNvbnN0IGNhbGVuZGFyU2V0ID0gKHBlcmlvZGljTm90ZXMgYXMgeyBjYWxlbmRhclNldE1hbmFnZXI/OiB7IGdldEFjdGl2ZVNldD86ICgpID0+IFJlY29yZDxzdHJpbmcsIHsgZW5hYmxlZD86IGJvb2xlYW4gfT4gfSB9KT8uY2FsZW5kYXJTZXRNYW5hZ2VyPy5nZXRBY3RpdmVTZXQ/LigpO1xyXG5cdFx0XHQgXHJcblx0XHRcdHJldHVybiBjYWxlbmRhclNldD8uW25vdW5dPy5lbmFibGVkID09PSB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgVVJMIHBhcmFtcyBpbmRpY2F0ZSBhIGZpbGUvd29ya3NwYWNlIHNob3VsZCBiZSBvcGVuZWQgKHNraXAgaG9tZXBhZ2UpXHJcblx0ICovXHJcblx0cHJpdmF0ZSBoYXNVcmxQYXJhbXMoKTogYm9vbGVhbiB7XHJcblx0XHQvLyBDaGVjayBmb3IgVVJMIHBhcmFtcyB0aGF0IGluZGljYXRlIGEgc3BlY2lmaWMgZmlsZS93b3Jrc3BhY2Ugc2hvdWxkIGJlIG9wZW5lZFxyXG5cdFx0Ly8gVGhpcyBwcmV2ZW50cyBob21lcGFnZSBmcm9tIG9wZW5pbmcgd2hlbiBPYnNpZGlhbiBpcyBvcGVuZWQgd2l0aCBhIHNwZWNpZmljIGZpbGVcclxuXHRcdGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuT0JTX0FDVCkge1xyXG5cdFx0XHRjb25zdCBwYXJhbXMgPSBPYmplY3Qua2V5cyh3aW5kb3cuT0JTX0FDVCk7XHJcblx0XHRcdGNvbnN0IGFjdGlvbiA9IHdpbmRvdy5PQlNfQUNULmFjdGlvbjtcclxuXHRcdFx0cmV0dXJuIChcclxuXHRcdFx0XHRhY3Rpb24gIT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0XHRcdFsnb3BlbicsICdhZHZhbmNlZC11cmknXS5pbmNsdWRlcyhhY3Rpb24pICYmXHJcblx0XHRcdFx0WydmaWxlJywgJ2ZpbGVwYXRoJywgJ3dvcmtzcGFjZSddLnNvbWUoZSA9PiBwYXJhbXMuaW5jbHVkZXMoZSkpXHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHQvLyBcIk9wZW4gd2hlbiBlbXB0eVwiIGZlYXR1cmUgcmVtb3ZlZCAtIHJlZHVuZGFudCB3aXRoIFwiTmV3IHRhYiByZXBsYWNlbWVudDogb25seSB3aGVuIGVtcHR5XCJcclxuXHQvLyBTaW5jZSBPYnNpZGlhbiBhdXRvLWNyZWF0ZXMgYW4gZW1wdHkgdGFiIHdoZW4geW91IGNsb3NlIHRoZSBsYXN0IG9uZSwgdGhleSBkbyB0aGUgc2FtZSB0aGluZ1xyXG59XHJcbiIsICIvKipcclxuICogSG9tZSBCYXNlIFBsdWdpbiBTZXR0aW5nc1xyXG4gKi9cclxuXHJcbmV4cG9ydCB0eXBlIFZpZXdNb2RlID0gJ2RlZmF1bHQnIHwgJ3ByZXZpZXcnIHwgJ3NvdXJjZScgfCAnbGl2ZSc7XHJcbmV4cG9ydCB0eXBlIE5ld1RhYk1vZGUgPSAnb25seS13aGVuLWVtcHR5JyB8ICdhbHdheXMnO1xyXG5leHBvcnQgdHlwZSBPcGVuaW5nTW9kZSA9ICdyZXBsYWNlLWFsbCcgfCAncmVwbGFjZS1sYXN0JyB8ICdyZXRhaW4nO1xyXG5cclxuLyoqXHJcbiAqIEhvbWVwYWdlIHR5cGUgZW51bSAtIG1hdGNoZXMgaG9tZXBhZ2UgcGx1Z2luJ3MgS2luZCBlbnVtXHJcbiAqL1xyXG5leHBvcnQgZW51bSBIb21lQmFzZVR5cGUge1xyXG5cdEZpbGUgPSAnRmlsZScsXHJcblx0V29ya3NwYWNlID0gJ1dvcmtzcGFjZScsXHJcblx0UmFuZG9tID0gJ1JhbmRvbSBmaWxlJyxcclxuXHRSYW5kb21Gb2xkZXIgPSAnUmFuZG9tIGluIGZvbGRlcicsXHJcblx0R3JhcGggPSAnR3JhcGggdmlldycsXHJcblx0Tm9uZSA9ICdOb3RoaW5nJyxcclxuXHRKb3VybmFsID0gJ0pvdXJuYWwnLFxyXG5cdERhaWx5Tm90ZSA9ICdEYWlseSBOb3RlJyxcclxuXHRXZWVrbHlOb3RlID0gJ1dlZWtseSBOb3RlJyxcclxuXHRNb250aGx5Tm90ZSA9ICdNb250aGx5IE5vdGUnLFxyXG5cdFllYXJseU5vdGUgPSAnWWVhcmx5IE5vdGUnLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEhvbWVCYXNlU2V0dGluZ3Mge1xyXG5cdC8vIEdlbmVyYWxcclxuXHRob21lQmFzZVR5cGU6IEhvbWVCYXNlVHlwZTtcclxuXHRob21lQmFzZVZhbHVlOiBzdHJpbmc7IC8vIFR5cGUtc3BlY2lmaWMgdmFsdWUgKGZpbGUgcGF0aCwgd29ya3NwYWNlIG5hbWUsIGZvbGRlciBwYXRoLCBldGMuKVxyXG5cdG9wZW5PblN0YXJ0dXA6IGJvb2xlYW47XHJcblx0b3BlblZpZXdNb2RlOiBWaWV3TW9kZTtcclxuXHRvcGVuTW9kZTogT3BlbmluZ01vZGU7XHJcblx0bWFudWFsT3Blbk1vZGU6IE9wZW5pbmdNb2RlO1xyXG5cclxuXHQvLyBUYWIgQmVoYXZpb3JcclxuXHRyZXBsYWNlTmV3VGFiOiBib29sZWFuO1xyXG5cdG5ld1RhYk1vZGU6IE5ld1RhYk1vZGU7XHJcblx0b3BlbldoZW5BbGxUYWJzQ2xvc2VkOiBib29sZWFuOyAvLyBPcGVuIGhvbWUgYmFzZSB3aGVuIGFsbCB0YWJzIGFyZSBjbG9zZWQgKGluZGVwZW5kZW50IG9mIHJlcGxhY2VOZXdUYWIpXHJcblx0dXNlRGlmZmVyZW50RmlsZUZvck5ld1RhYjogYm9vbGVhbjsgLy8gVXNlIHNlcGFyYXRlIG5ldyB0YWIgc2V0dGluZ3MgdnMgaG9tZSBiYXNlXHJcblx0bmV3VGFiVHlwZTogSG9tZUJhc2VUeXBlO1xyXG5cdG5ld1RhYlZhbHVlOiBzdHJpbmc7XHJcblx0bmV3VGFiU2VwYXJhdGVNb2JpbGU6IGJvb2xlYW47XHJcblx0bW9iaWxlTmV3VGFiVHlwZTogSG9tZUJhc2VUeXBlO1xyXG5cdG1vYmlsZU5ld1RhYlZhbHVlOiBzdHJpbmc7XHJcblxyXG5cdC8vIFVJIEZlYXR1cmVzIChvZmYgYnkgZGVmYXVsdClcclxuXHRzaG93U3RpY2t5SG9tZUljb246IGJvb2xlYW47XHJcblx0c3RpY2t5SWNvbk5hbWU6IHN0cmluZyB8IG51bGw7XHJcblx0aGlkZUhvbWVUYWJIZWFkZXI6IGJvb2xlYW47XHJcblx0cmVwbGFjZU1vYmlsZU5ld1RhYjogYm9vbGVhbjtcclxuXHRcclxuXHQvLyBNb2JpbGVcclxuXHRzZXBhcmF0ZU1vYmlsZTogYm9vbGVhbjtcclxuXHRtb2JpbGVIb21lQmFzZVR5cGU6IEhvbWVCYXNlVHlwZTtcclxuXHRtb2JpbGVIb21lQmFzZVZhbHVlOiBzdHJpbmc7XHJcblxyXG5cdC8vIEF1dG9tYXRpb25cclxuXHRjb21tYW5kT25PcGVuOiBzdHJpbmc7XHJcblx0XHJcblx0Ly8gVmlldyBiZWhhdmlvclxyXG5cdHJldmVydFZpZXc6IGJvb2xlYW47XHJcblx0YXV0b1Njcm9sbDogYm9vbGVhbjtcclxuXHRoaWRlUmVsZWFzZU5vdGVzOiBib29sZWFuO1xyXG5cclxuXHQvLyBMZWdhY3kgLSBrZXB0IGluIHR5cGUgZm9yIG1pZ3JhdGlvbiBidXQgcmVtb3ZlZCBmcm9tIGRlZmF1bHRzXHJcblx0aG9tZUJhc2VQYXRoPzogc3RyaW5nO1xyXG5cdGtlZXBFeGlzdGluZ1RhYnM/OiBib29sZWFuO1xyXG5cdG1vYmlsZUhvbWVCYXNlUGF0aD86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEhvbWVCYXNlU2V0dGluZ3MgPSB7XHJcblx0Ly8gR2VuZXJhbFxyXG5cdGhvbWVCYXNlVHlwZTogSG9tZUJhc2VUeXBlLkZpbGUsXHJcblx0aG9tZUJhc2VWYWx1ZTogJycsXHJcblx0b3Blbk9uU3RhcnR1cDogdHJ1ZSxcclxuXHRvcGVuVmlld01vZGU6ICdkZWZhdWx0JyxcclxuXHRvcGVuTW9kZTogJ3JlcGxhY2UtYWxsJyxcclxuXHRtYW51YWxPcGVuTW9kZTogJ3JldGFpbicsXHJcblxyXG5cdC8vIFRhYiBCZWhhdmlvclxyXG5cdHJlcGxhY2VOZXdUYWI6IGZhbHNlLFxyXG5cdG5ld1RhYk1vZGU6ICdvbmx5LXdoZW4tZW1wdHknLCAvLyBEZWZhdWx0OiBvbmx5IHJlcGxhY2Ugd2hlbiBubyB0YWJzIGFyZSBvcGVuXHJcblx0b3BlbldoZW5BbGxUYWJzQ2xvc2VkOiB0cnVlLCAvLyBEZWZhdWx0OiBvcGVuIGhvbWUgYmFzZSB3aGVuIGFsbCB0YWJzIGFyZSBjbG9zZWRcclxuXHR1c2VEaWZmZXJlbnRGaWxlRm9yTmV3VGFiOiBmYWxzZSxcclxuXHRuZXdUYWJUeXBlOiBIb21lQmFzZVR5cGUuRmlsZSxcclxuXHRuZXdUYWJWYWx1ZTogJycsXHJcblx0bmV3VGFiU2VwYXJhdGVNb2JpbGU6IGZhbHNlLFxyXG5cdG1vYmlsZU5ld1RhYlR5cGU6IEhvbWVCYXNlVHlwZS5GaWxlLFxyXG5cdG1vYmlsZU5ld1RhYlZhbHVlOiAnJyxcclxuXHJcblx0Ly8gVUkgRmVhdHVyZXNcclxuXHRzaG93U3RpY2t5SG9tZUljb246IGZhbHNlLFxyXG5cdHN0aWNreUljb25OYW1lOiAnaG9tZScsXHJcblx0aGlkZUhvbWVUYWJIZWFkZXI6IGZhbHNlLFxyXG5cdHJlcGxhY2VNb2JpbGVOZXdUYWI6IGZhbHNlLFxyXG5cdFxyXG5cdC8vIE1vYmlsZVxyXG5cdHNlcGFyYXRlTW9iaWxlOiBmYWxzZSxcclxuXHRtb2JpbGVIb21lQmFzZVR5cGU6IEhvbWVCYXNlVHlwZS5GaWxlLFxyXG5cdG1vYmlsZUhvbWVCYXNlVmFsdWU6ICcnLFxyXG5cclxuXHQvLyBBdXRvbWF0aW9uXHJcblx0Y29tbWFuZE9uT3BlbjogJycsXHJcblx0XHJcblx0Ly8gVmlldyBiZWhhdmlvclxyXG5cdHJldmVydFZpZXc6IGZhbHNlLFxyXG5cdGF1dG9TY3JvbGw6IGZhbHNlLFxyXG5cdGhpZGVSZWxlYXNlTm90ZXM6IGZhbHNlLCAvLyBPRkYgYnkgZGVmYXVsdFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFZpZXcgbW9kZSBkaXNwbGF5IG5hbWVzIGZvciBzZXR0aW5ncyBkcm9wZG93blxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFZJRVdfTU9ERV9PUFRJT05TOiBSZWNvcmQ8Vmlld01vZGUsIHN0cmluZz4gPSB7XHJcblx0J2RlZmF1bHQnOiAnRGVmYXVsdCcsXHJcblx0J3ByZXZpZXcnOiAnUmVhZGluZyB2aWV3JyxcclxuXHQnc291cmNlJzogJ1NvdXJjZSBtb2RlJyxcclxuXHQnbGl2ZSc6ICdMaXZlIFByZXZpZXcnLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIE5ldyB0YWIgbW9kZSBkaXNwbGF5IG5hbWVzIGZvciBzZXR0aW5ncyBkcm9wZG93blxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IE5FV19UQUJfTU9ERV9PUFRJT05TOiBSZWNvcmQ8TmV3VGFiTW9kZSwgc3RyaW5nPiA9IHtcclxuXHQnb25seS13aGVuLWVtcHR5JzogJ09ubHkgd2hlbiBubyB0YWJzIGFyZSBvcGVuJyxcclxuXHQnYWx3YXlzJzogJ0Fsd2F5cyByZXBsYWNlIG5ldyB0YWJzJyxcclxufTtcclxuXHJcbi8qKlxyXG4gKiBPcGVuaW5nIG1vZGUgZGlzcGxheSBuYW1lcyBmb3Igc2V0dGluZ3MgZHJvcGRvd25cclxuICovXHJcbmV4cG9ydCBjb25zdCBPUEVOSU5HX01PREVfT1BUSU9OUzogUmVjb3JkPE9wZW5pbmdNb2RlLCBzdHJpbmc+ID0ge1xyXG5cdCdyZXBsYWNlLWFsbCc6ICdSZXBsYWNlIGFsbCBvcGVuIG5vdGVzJyxcclxuXHQncmVwbGFjZS1sYXN0JzogJ1JlcGxhY2UgbGFzdCBub3RlJyxcclxuXHQncmV0YWluJzogJ0tlZXAgb3BlbiBub3RlcycsXHJcbn07XHJcblxyXG4vKipcclxuICogSG9tZXBhZ2UgdHlwZXMgdGhhdCBkb24ndCByZXF1aXJlIGEgdmFsdWUgaW5wdXRcclxuICovXHJcbmV4cG9ydCBjb25zdCBVTkNIQU5HRUFCTEVfVFlQRVM6IEhvbWVCYXNlVHlwZVtdID0gW1xyXG5cdEhvbWVCYXNlVHlwZS5SYW5kb20sXHJcblx0SG9tZUJhc2VUeXBlLkdyYXBoLFxyXG5cdEhvbWVCYXNlVHlwZS5Ob25lLFxyXG5cdEhvbWVCYXNlVHlwZS5EYWlseU5vdGUsXHJcblx0SG9tZUJhc2VUeXBlLldlZWtseU5vdGUsXHJcblx0SG9tZUJhc2VUeXBlLk1vbnRobHlOb3RlLFxyXG5cdEhvbWVCYXNlVHlwZS5ZZWFybHlOb3RlLFxyXG5dO1xyXG4iLCAiLyoqXG4gKiBIb21lIEJhc2UgU2V0dGluZ3MgVGFiXG4gKi9cblxuaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCByZXF1aXJlQXBpVmVyc2lvbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIEhvbWVCYXNlUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgXG5cdFZJRVdfTU9ERV9PUFRJT05TLCBcblx0TkVXX1RBQl9NT0RFX09QVElPTlMsIFxuXHRPUEVOSU5HX01PREVfT1BUSU9OUyxcblx0Vmlld01vZGUsIFxuXHROZXdUYWJNb2RlLFxuXHRPcGVuaW5nTW9kZSxcblx0SG9tZUJhc2VUeXBlLFxuXHRVTkNIQU5HRUFCTEVfVFlQRVMsXG59IGZyb20gJy4uL3NldHRpbmdzJztcbmltcG9ydCB7IGNyZWF0ZVNldHRpbmdzR3JvdXAgfSBmcm9tICcuLi91dGlscy9zZXR0aW5ncy1jb21wYXQnO1xuaW1wb3J0IHsgRmlsZVBhdGhTdWdnZXN0LCBGb2xkZXJTdWdnZXN0LCBXb3Jrc3BhY2VTdWdnZXN0IH0gZnJvbSAnLi9maWxlLXN1Z2dlc3QnO1xuaW1wb3J0IHsgQ29tbWFuZFN1Z2dlc3QsIGdldENvbW1hbmRCeUlkIH0gZnJvbSAnLi9jb21tYW5kLXN1Z2dlc3QnO1xuaW1wb3J0IHsgSWNvblBpY2tlciB9IGZyb20gJy4vaWNvbi1waWNrZXInO1xuXG5leHBvcnQgY2xhc3MgSG9tZUJhc2VTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogSG9tZUJhc2VQbHVnaW47XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogSG9tZUJhc2VQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdC8vIEdldCBhY3RpdmUgc2V0dGluZ3MgKG1vYmlsZSBvciBkZXNrdG9wKVxuXHRcdGNvbnN0IGlzTW9iaWxlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VwYXJhdGVNb2JpbGU7XG5cdFx0Y29uc3QgYWN0aXZlVHlwZSA9IGlzTW9iaWxlID8gdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VUeXBlIDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuaG9tZUJhc2VUeXBlO1xuXHRcdGNvbnN0IGFjdGl2ZVZhbHVlID0gaXNNb2JpbGUgPyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVZhbHVlIDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuaG9tZUJhc2VWYWx1ZTtcblxuXHRcdC8vIEdlbmVyYWwgU2V0dGluZ3MgKG5vIGhlYWRpbmcgZm9yIGZpcnN0IGdyb3VwKVxuXHRcdGNvbnN0IGdlbmVyYWxHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsIHVuZGVmaW5lZCwgJ2hvbWUtYmFzZScpO1xuXG5cdFx0Ly8gSG9tZSBwYWdlIHR5cGUgZHJvcGRvd25cblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnVHlwZScpXG5cdFx0XHRcdC5zZXREZXNjKCdXaGF0IHRvIG9wZW4gYXMgeW91ciBob21lIGJhc2UnKVxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG5cdFx0XHRcdFx0bGV0IHBsdWdpbkRpc2FibGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Zm9yIChjb25zdCB0eXBlIG9mIE9iamVjdC52YWx1ZXMoSG9tZUJhc2VUeXBlKSkge1xuXHRcdFx0XHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5oYXNSZXF1aXJlZFBsdWdpbih0eXBlKSkge1xuXHRcdFx0XHRcdFx0XHQvLyBJZiBjdXJyZW50IHR5cGUgaXMgZGlzYWJsZWQsIG1hcmsgaXQgYnV0IHN0aWxsIGFsbG93IGl0XG5cdFx0XHRcdFx0XHRcdGlmICh0eXBlID09PSBhY3RpdmVUeXBlKSB7XG5cdFx0XHRcdFx0XHRcdFx0cGx1Z2luRGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih0eXBlLCB0eXBlKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBBZGQgZGlzYWJsZWQgb3B0aW9uXG5cdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uc2VsZWN0RWwuY3JlYXRlRWwoJ29wdGlvbicsIHsgXG5cdFx0XHRcdFx0XHRcdFx0XHR0ZXh0OiB0eXBlLCBcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgZGlzYWJsZWQ6ICd0cnVlJyB9IFxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24odHlwZSwgdHlwZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGRyb3Bkb3duXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoYWN0aXZlVHlwZSB8fCBIb21lQmFzZVR5cGUuRmlsZSlcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKGlzTW9iaWxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VUeXBlID0gdmFsdWUgYXMgSG9tZUJhc2VUeXBlO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhvbWVCYXNlVHlwZSA9IHZhbHVlIGFzIEhvbWVCYXNlVHlwZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciB0byBzaG93L2hpZGUgdmFsdWUgaW5wdXRcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IHNjcm9sbENvbnRhaW5lcj8uc2Nyb2xsVG9wIHx8IDA7XG5cdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIFNob3cgd2FybmluZyBpZiBjdXJyZW50IHR5cGUgcmVxdWlyZXMgYSBkaXNhYmxlZCBwbHVnaW5cblx0XHRcdFx0XHRpZiAocGx1Z2luRGlzYWJsZWQpIHtcblx0XHRcdFx0XHRcdHNldHRpbmcuZGVzY0VsLmNyZWF0ZURpdih7XG5cdFx0XHRcdFx0XHRcdHRleHQ6ICdUaGUgcGx1Z2luIHJlcXVpcmVkIGZvciB0aGlzIGhvbWUgcGFnZSB0eXBlIGlzblxcJ3QgYXZhaWxhYmxlLicsXG5cdFx0XHRcdFx0XHRcdGNsczogJ21vZC13YXJuaW5nJ1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vIFZhbHVlIGlucHV0IChjb25kaXRpb25hbCBvbiB0eXBlKVxuXHRcdGlmICghVU5DSEFOR0VBQkxFX1RZUEVTLmluY2x1ZGVzKGFjdGl2ZVR5cGUpKSB7XG5cdFx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRsZXQgZGVzYyA9ICcnO1xuXHRcdFx0XHRsZXQgcGxhY2Vob2xkZXIgPSAnJztcblxuXHRcdFx0XHRpZiAoYWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUpIHtcblx0XHRcdFx0XHRkZXNjID0gJ1RoZSBmaWxlIHRvIG9wZW4gYXMgeW91ciBob21lIGJhc2UgKHN1cHBvcnRzIC5tZCwgLm1keCwgLmNhbnZhcywgLmJhc2UpJztcblx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdQYXRoIHRvIGhvbWUgYmFzZSBmaWxlJztcblx0XHRcdFx0fSBlbHNlIGlmIChhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlKSB7XG5cdFx0XHRcdFx0ZGVzYyA9ICdUaGUgd29ya3NwYWNlIHRvIGxvYWQgYXMgeW91ciBob21lIGJhc2UnO1xuXHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ1dvcmtzcGFjZSBuYW1lJztcblx0XHRcdFx0fSBlbHNlIGlmIChhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyKSB7XG5cdFx0XHRcdFx0ZGVzYyA9ICdUaGUgZm9sZGVyIHRvIHBpY2sgYSByYW5kb20gZmlsZSBmcm9tJztcblx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdGb2xkZXIgcGF0aCc7XG5cdFx0XHRcdH0gZWxzZSBpZiAoYWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkpvdXJuYWwpIHtcblx0XHRcdFx0XHRkZXNjID0gJ1RoZSBqb3VybmFsIG5hbWUnO1xuXHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ0pvdXJuYWwgbmFtZSc7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0LnNldE5hbWUoYWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUgPyAnRmlsZScgOiBcblx0XHRcdFx0XHRcdFx0YWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSA/ICdXb3Jrc3BhY2UnIDpcblx0XHRcdFx0XHRcdFx0YWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlciA/ICdGb2xkZXInIDpcblx0XHRcdFx0XHRcdFx0YWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkpvdXJuYWwgPyAnSm91cm5hbCcgOiAnVmFsdWUnKVxuXHRcdFx0XHRcdC5zZXREZXNjKGRlc2MpXG5cdFx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcblx0XHRcdFx0XHRcdC8vIEFkZCBhcHByb3ByaWF0ZSBzdWdnZXN0ZXJcblx0XHRcdFx0XHRcdGlmIChhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkge1xuXHRcdFx0XHRcdFx0XHRuZXcgRmlsZVBhdGhTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlKSB7XG5cdFx0XHRcdFx0XHRcdG5ldyBXb3Jrc3BhY2VTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyKSB7XG5cdFx0XHRcdFx0XHRcdG5ldyBGb2xkZXJTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihwbGFjZWhvbGRlcilcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKGFjdGl2ZVZhbHVlIHx8ICcnKVxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGlzTW9iaWxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVZhbHVlID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBBbHNvIHVwZGF0ZSBsZWdhY3kgcGF0aCBmb3IgY29tcGF0aWJpbGl0eVxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGFjdGl2ZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlUGF0aCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVZhbHVlID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBBbHNvIHVwZGF0ZSBsZWdhY3kgcGF0aCBmb3IgY29tcGF0aWJpbGl0eVxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGFjdGl2ZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhvbWVCYXNlUGF0aCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnT3BlbiBvbiBzdGFydHVwJylcblx0XHRcdFx0LnNldERlc2MoJ09wZW4gdGhlIGhvbWUgYmFzZSB3aGVuIGxhdW5jaGluZyBPYnNpZGlhbicpXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5PblN0YXJ0dXApXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5PblN0YXJ0dXAgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdC8vIEFkZCB3YXJuaW5nIGlmIE9ic2lkaWFuIDEuMTEuMCsgYW5kIG5hdGl2ZSBzZXR0aW5nIGV4aXN0c1xuXHRcdFx0aWYgKHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjAnKSkge1xuXHRcdFx0XHRjb25zdCBuYXRpdmVPcGVuQmVoYXZpb3IgPSB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5nZXROYXRpdmVPcGVuQmVoYXZpb3IoKTtcblx0XHRcdFx0aWYgKG5hdGl2ZU9wZW5CZWhhdmlvcikge1xuXHRcdFx0XHRcdHNldHRpbmcuZGVzY0VsLmNyZWF0ZURpdih7XG5cdFx0XHRcdFx0XHR0ZXh0OiBgTm90ZTogVGhpcyB3aWxsIG92ZXJyaWRlIE9ic2lkaWFuJ3MgbmF0aXZlIFwiRGVmYXVsdCBmaWxlIHRvIG9wZW5cIiBzZXR0aW5nIChjdXJyZW50bHkgc2V0IHRvIFwiJHtuYXRpdmVPcGVuQmVoYXZpb3J9XCIpLmAsXG5cdFx0XHRcdFx0XHRjbHM6ICdtb2Qtd2FybmluZydcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gXCJPcGVuIHdoZW4gZW1wdHlcIiBzZXR0aW5nIHJlbW92ZWQgLSByZWR1bmRhbnQgd2l0aCBcIk5ldyB0YWIgcmVwbGFjZW1lbnQ6IG9ubHkgd2hlbiBlbXB0eVwiXG5cdFx0Ly8gU2luY2UgT2JzaWRpYW4gYXV0by1jcmVhdGVzIGFuIGVtcHR5IHRhYiB3aGVuIHlvdSBjbG9zZSB0aGUgbGFzdCBvbmUsIHRoZXkgZG8gdGhlIHNhbWUgdGhpbmdcblxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdPcGVuaW5nIG1vZGUgKHN0YXJ0dXApJylcblx0XHRcdFx0LnNldERlc2MoJ0hvdyB0byBoYW5kbGUgZXhpc3RpbmcgdGFicyB3aGVuIG9wZW5pbmcgb24gc3RhcnR1cCcpXG5cdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IFt2YWx1ZSwgbGFiZWxdIG9mIE9iamVjdC5lbnRyaWVzKE9QRU5JTkdfTU9ERV9PUFRJT05TKSkge1xuXHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKHZhbHVlLCBsYWJlbCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGRyb3Bkb3duXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3Blbk1vZGUpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5Nb2RlID0gdmFsdWUgYXMgT3BlbmluZ01vZGU7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Z2VuZXJhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ09wZW5pbmcgbW9kZSAobWFudWFsKScpXG5cdFx0XHRcdC5zZXREZXNjKCdIb3cgdG8gaGFuZGxlIGV4aXN0aW5nIHRhYnMgd2hlbiBvcGVuaW5nIG1hbnVhbGx5Jylcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgW3ZhbHVlLCBsYWJlbF0gb2YgT2JqZWN0LmVudHJpZXMoT1BFTklOR19NT0RFX09QVElPTlMpKSB7XG5cdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24odmFsdWUsIGxhYmVsKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYW51YWxPcGVuTW9kZSlcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubWFudWFsT3Blbk1vZGUgPSB2YWx1ZSBhcyBPcGVuaW5nTW9kZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnVmlldyBtb2RlJylcblx0XHRcdFx0LnNldERlc2MoJ0hvdyB0byBvcGVuIE1hcmtkb3duIGZpbGVzJylcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgW3ZhbHVlLCBsYWJlbF0gb2YgT2JqZWN0LmVudHJpZXMoVklFV19NT0RFX09QVElPTlMpKSB7XG5cdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24odmFsdWUsIGxhYmVsKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuVmlld01vZGUpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5WaWV3TW9kZSA9IHZhbHVlIGFzIFZpZXdNb2RlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdSZXZlcnQgdmlldyBvbiBjbG9zZScpXG5cdFx0XHRcdC5zZXREZXNjKCdXaGVuIG5hdmlnYXRpbmcgYXdheSBmcm9tIHRoZSBob21lIGJhc2UsIHJlc3RvcmUgdGhlIGRlZmF1bHQgdmlldycpXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJldmVydFZpZXcpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnJldmVydFZpZXcgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnQXV0by1zY3JvbGwnKVxuXHRcdFx0XHQuc2V0RGVzYygnV2hlbiBvcGVuaW5nIHRoZSBob21lIGJhc2UsIHNjcm9sbCB0byB0aGUgYm90dG9tIGFuZCBmb2N1cyBvbiB0aGUgbGFzdCBsaW5lJylcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1Njcm9sbClcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1Njcm9sbCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdIaWRlIHJlbGVhc2Ugbm90ZXMnKVxuXHRcdFx0XHQuc2V0RGVzYygnTmV2ZXIgZGlzcGxheSByZWxlYXNlIG5vdGVzIHdoZW4gT2JzaWRpYW4gdXBkYXRlcycpXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVSZWxlYXNlTm90ZXMpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVSZWxlYXNlTm90ZXMgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQvLyBUYWIgQmVoYXZpb3IgU2V0dGluZ3Ncblx0XHRjb25zdCB0YWJHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsICdUYWIgQmVoYXZpb3InLCAnaG9tZS1iYXNlJyk7XG5cblx0XHR0YWJHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdPcGVuIGhvbWUgYmFzZSB3aGVuIGFsbCB0YWJzIGFyZSBjbG9zZWQnKVxuXHRcdFx0XHQuc2V0RGVzYygnV2hlbiB5b3UgY2xvc2UgYWxsIHRhYnMsIGF1dG9tYXRpY2FsbHkgb3BlbiB0aGUgaG9tZSBiYXNlJylcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbldoZW5BbGxUYWJzQ2xvc2VkKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuV2hlbkFsbFRhYnNDbG9zZWQgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHR0YWJHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdSZXBsYWNlIG5ldyB0YWJzJylcblx0XHRcdFx0LnNldERlc2MoJ09wZW4gaG9tZSBiYXNlIGluc3RlYWQgb2YgbmV3IGVtcHR5IHRhYnMgKHdvcmtzIGluZGVwZW5kZW50bHkgb2YgXCJvcGVuIGhvbWUgYmFzZSB3aGVuIGFsbCB0YWJzIGFyZSBjbG9zZWRcIiknKVxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcblx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBsYWNlTmV3VGFiKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBsYWNlTmV3VGFiID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gUHJlc2VydmUgc2Nyb2xsIHBvc2l0aW9uIGJlZm9yZSByZS1yZW5kZXJpbmdcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IHNjcm9sbENvbnRhaW5lcj8uc2Nyb2xsVG9wIHx8IDA7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTsgLy8gUmUtcmVuZGVyIHRvIHNob3cvaGlkZSBkZXBlbmRlbnQgc2V0dGluZ1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyaW5nXG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Ly8gT25seSBzaG93IG5ldyB0YWIgbW9kZSBpZiByZXBsYWNlIG5ldyB0YWIgaXMgZW5hYmxlZFxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBsYWNlTmV3VGFiKSB7XG5cdFx0XHR0YWJHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRcdHNldHRpbmdcblx0XHRcdFx0XHQuc2V0TmFtZSgnTmV3IHRhYiByZXBsYWNlbWVudCBtb2RlJylcblx0XHRcdFx0XHQuc2V0RGVzYygnV2hlbiB0byByZXBsYWNlIG5ldyB0YWJzIChvbmx5IHdoZW4gbm8gdGFicyBhcmUgb3Blbiwgb3IgYWx3YXlzKScpXG5cdFx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBbdmFsdWUsIGxhYmVsXSBvZiBPYmplY3QuZW50cmllcyhORVdfVEFCX01PREVfT1BUSU9OUykpIHtcblx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKHZhbHVlLCBsYWJlbCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3VGFiTW9kZSlcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm5ld1RhYk1vZGUgPSB2YWx1ZSBhcyBOZXdUYWJNb2RlO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBVc2UgZGlmZmVyZW50IGZpbGUgZm9yIG5ldyB0YWJzIHRvZ2dsZVxuXHRcdFx0dGFiR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0LnNldE5hbWUoJ1VzZSBkaWZmZXJlbnQgaG9tZSBiYXNlIGZvciBuZXcgdGFicycpXG5cdFx0XHRcdFx0LnNldERlc2MoJ0NvbmZpZ3VyZSBhIGRpZmZlcmVudCBob21lIGJhc2UgdG8gb3BlbiBmb3IgbmV3IHRhYnMgKGluc3RlYWQgb2YgdGhlIG1haW4gaG9tZSBiYXNlKScpXG5cdFx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZURpZmZlcmVudEZpbGVGb3JOZXdUYWIpXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VEaWZmZXJlbnRGaWxlRm9yTmV3VGFiID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gUHJlc2VydmUgc2Nyb2xsIHBvc2l0aW9uIGJlZm9yZSByZS1yZW5kZXJpbmdcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gc2Nyb2xsQ29udGFpbmVyPy5zY3JvbGxUb3AgfHwgMDtcblx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTsgLy8gUmUtcmVuZGVyIHRvIHNob3cvaGlkZSBkZXBlbmRlbnQgc2V0dGluZ3Ncblx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXJpbmdcblx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBTaG93IG5ldyB0YWIgY29uZmlndXJhdGlvbiBpZiBlbmFibGVkIChhbHdheXMgZGVza3RvcCBzZXR0aW5ncylcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VEaWZmZXJlbnRGaWxlRm9yTmV3VGFiKSB7XG5cdFx0XHRcdGNvbnN0IGRlc2t0b3BUeXBlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3VGFiVHlwZSB8fCBIb21lQmFzZVR5cGUuRmlsZTtcblx0XHRcdFx0Y29uc3QgZGVza3RvcFZhbHVlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3VGFiVmFsdWUgfHwgJyc7XG5cblx0XHRcdFx0Ly8gTmV3IHRhYiB0eXBlIGRyb3Bkb3duXG5cdFx0XHRcdHRhYkdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0XHQuc2V0TmFtZSgnTmV3IHRhYiB0eXBlJylcblx0XHRcdFx0XHRcdC5zZXREZXNjKCdXaGF0IHRvIG9wZW4gZm9yIG5ldyB0YWJzJylcblx0XHRcdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcblx0XHRcdFx0XHRcdFx0bGV0IHBsdWdpbkRpc2FibGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRmb3IgKGNvbnN0IHR5cGUgb2YgT2JqZWN0LnZhbHVlcyhIb21lQmFzZVR5cGUpKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5oYXNSZXF1aXJlZFBsdWdpbih0eXBlKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSWYgY3VycmVudCB0eXBlIGlzIGRpc2FibGVkLCBtYXJrIGl0IGJ1dCBzdGlsbCBhbGxvdyBpdFxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHR5cGUgPT09IGRlc2t0b3BUeXBlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHBsdWdpbkRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKHR5cGUsIHR5cGUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWRkIGRpc2FibGVkIG9wdGlvblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkcm9wZG93bi5zZWxlY3RFbC5jcmVhdGVFbCgnb3B0aW9uJywgeyBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0ZXh0OiB0eXBlLCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7IGRpc2FibGVkOiAndHJ1ZScgfSBcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24odHlwZSwgdHlwZSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZShkZXNrdG9wVHlwZSlcblx0XHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZXdUYWJUeXBlID0gdmFsdWUgYXMgSG9tZUJhc2VUeXBlO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciB0byBzaG93L2hpZGUgdmFsdWUgaW5wdXRcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2Nyb2xsQ29udGFpbmVyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHQvLyBTaG93IHdhcm5pbmcgaWYgY3VycmVudCB0eXBlIHJlcXVpcmVzIGEgZGlzYWJsZWQgcGx1Z2luXG5cdFx0XHRcdFx0XHRcdGlmIChwbHVnaW5EaXNhYmxlZCkge1xuXHRcdFx0XHRcdFx0XHRcdHNldHRpbmcuZGVzY0VsLmNyZWF0ZURpdih7XG5cdFx0XHRcdFx0XHRcdFx0XHR0ZXh0OiAnVGhlIHBsdWdpbiByZXF1aXJlZCBmb3IgdGhpcyBuZXcgdGFiIHR5cGUgaXNuXFwndCBhdmFpbGFibGUuJyxcblx0XHRcdFx0XHRcdFx0XHRcdGNsczogJ21vZC13YXJuaW5nJ1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Ly8gVmFsdWUgaW5wdXQgKGNvbmRpdGlvbmFsIG9uIHR5cGUpXG5cdFx0XHRcdGlmICghVU5DSEFOR0VBQkxFX1RZUEVTLmluY2x1ZGVzKGRlc2t0b3BUeXBlKSkge1xuXHRcdFx0XHRcdHRhYkdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0XHRcdGxldCBkZXNjID0gJyc7XG5cdFx0XHRcdFx0XHRsZXQgcGxhY2Vob2xkZXIgPSAnJztcblxuXHRcdFx0XHRcdFx0aWYgKGRlc2t0b3BUeXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkge1xuXHRcdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSBmaWxlIHRvIG9wZW4gZm9yIG5ldyB0YWJzIChzdXBwb3J0cyAubWQsIC5tZHgsIC5jYW52YXMsIC5iYXNlKSc7XG5cdFx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ1BhdGggdG8gbmV3IHRhYiBmaWxlJztcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoZGVza3RvcFR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UpIHtcblx0XHRcdFx0XHRcdFx0ZGVzYyA9ICdUaGUgd29ya3NwYWNlIHRvIGxvYWQgZm9yIG5ldyB0YWJzJztcblx0XHRcdFx0XHRcdFx0cGxhY2Vob2xkZXIgPSAnV29ya3NwYWNlIG5hbWUnO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChkZXNrdG9wVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlcikge1xuXHRcdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSBmb2xkZXIgdG8gcGljayBhIHJhbmRvbSBmaWxlIGZyb20gZm9yIG5ldyB0YWJzJztcblx0XHRcdFx0XHRcdFx0cGxhY2Vob2xkZXIgPSAnRm9sZGVyIHBhdGgnO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChkZXNrdG9wVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkpvdXJuYWwpIHtcblx0XHRcdFx0XHRcdFx0ZGVzYyA9ICdUaGUgam91cm5hbCBuYW1lIGZvciBuZXcgdGFicyc7XG5cdFx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ0pvdXJuYWwgbmFtZSc7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHNldHRpbmdcblx0XHRcdFx0XHRcdFx0LnNldE5hbWUoZGVza3RvcFR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlID8gJ05ldyB0YWIgZmlsZScgOiBcblx0XHRcdFx0XHRcdFx0XHRcdGRlc2t0b3BUeXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlID8gJ05ldyB0YWIgd29ya3NwYWNlJyA6XG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNrdG9wVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlciA/ICdOZXcgdGFiIGZvbGRlcicgOlxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVza3RvcFR5cGUgPT09IEhvbWVCYXNlVHlwZS5Kb3VybmFsID8gJ05ldyB0YWIgam91cm5hbCcgOiAnTmV3IHRhYiB2YWx1ZScpXG5cdFx0XHRcdFx0XHRcdC5zZXREZXNjKGRlc2MpXG5cdFx0XHRcdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gQWRkIGFwcHJvcHJpYXRlIHN1Z2dlc3RlclxuXHRcdFx0XHRcdFx0XHRcdGlmIChkZXNrdG9wVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdG5ldyBGaWxlUGF0aFN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChkZXNrdG9wVHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bmV3IFdvcmtzcGFjZVN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChkZXNrdG9wVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0bmV3IEZvbGRlclN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihwbGFjZWhvbGRlcilcblx0XHRcdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZShkZXNrdG9wVmFsdWUgfHwgJycpXG5cdFx0XHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm5ld1RhYlZhbHVlID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gTGVnYWN5IFwiS2VlcCBleGlzdGluZyB0YWJzXCIgLSBrZXB0IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IGJ1dCBoaWRkZW5cblx0XHQvLyAoZnVuY3Rpb25hbGl0eSBub3cgaGFuZGxlZCBieSBcIk9wZW5pbmcgbW9kZSAoc3RhcnR1cClcIilcblxuXHRcdC8vIFVJIEZlYXR1cmVzIFNldHRpbmdzXG5cdFx0Y29uc3QgdWlHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsICdVSSBGZWF0dXJlcycsICdob21lLWJhc2UnKTtcblxuXHRcdHVpR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnU3RpY2t5IGhvbWUgaWNvbicpXG5cdFx0XHRcdC5zZXREZXNjKCdTaG93IGEgaG9tZSBpY29uIGluIHRoZSB0YWIgYmFyIHRoYXQgc3RheXMgcGlubmVkIHRvIHRoZSBsZWZ0IChkZXNrdG9wIG9ubHkpJylcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24gPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnVwZGF0ZVN0aWNreVRhYkljb24oKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdC8vIFByZXNlcnZlIHNjcm9sbCBwb3NpdGlvbiBiZWZvcmUgcmUtcmVuZGVyaW5nXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5wYXJlbnRFbGVtZW50O1xuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7IC8vIFJlLXJlbmRlciB0byBzaG93L2hpZGUgZGVwZW5kZW50IHNldHRpbmdcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIHJlbmRlcmluZ1xuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vIE9ubHkgc2hvdyBzdGlja3kgaWNvbiBzZXR0aW5ncyBpZiBzdGlja3kgaWNvbiBpcyBlbmFibGVkXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTdGlja3lIb21lSWNvbikge1xuXHRcdFx0dWlHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRcdHNldHRpbmdcblx0XHRcdFx0XHQuc2V0TmFtZSgnSWNvbicpXG5cdFx0XHRcdFx0LnNldERlc2MoJ1RoZSBpY29uIHRvIGRpc3BsYXkgaW4gdGhlIHN0aWNreSBob21lIGljb24nKVxuXHRcdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgaWNvbk5hbWUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGlja3lJY29uTmFtZSB8fCAnaG9tZSc7XG5cdFx0XHRcdFx0XHRidXR0b25cblx0XHRcdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ0NoYW5nZSBpY29uJylcblx0XHRcdFx0XHRcdFx0LnNldEljb24oaWNvbk5hbWUpXG5cdFx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBwaWNrZXIgPSBuZXcgSWNvblBpY2tlcihcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RpY2t5SWNvbk5hbWUsXG5cdFx0XHRcdFx0XHRcdFx0XHQoaWNvbjogc3RyaW5nIHwgbnVsbCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RpY2t5SWNvbk5hbWUgPSBpY29uO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSB0aGUgaWNvbiBkaXNwbGF5XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc3RpY2t5VGFiU2VydmljZS51cGRhdGUoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIgc2V0dGluZ3MgdG8gdXBkYXRlIGJ1dHRvbiBpY29uXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHRwaWNrZXIub3BlbigpO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHR1aUdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdC5zZXROYW1lKCdIaWRlIHRhYiBoZWFkZXInKVxuXHRcdFx0XHRcdC5zZXREZXNjKCdIaWRlIHRoZSBzdGlja3kgaG9tZSB0YWIgaGVhZGVyIHdoZW4gaXRcXCdzIG9wZW4sIHVzaW5nIHRoZSBzdGlja3kgaWNvbiBhcyB0aGUgdGFiIGluZGljYXRvcicpXG5cdFx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVIb21lVGFiSGVhZGVyKVxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUhvbWVUYWJIZWFkZXIgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zdGlja3lUYWJTZXJ2aWNlLnVwZGF0ZVRhYkhlYWRlcnMoKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblxuXHRcdC8vIE1vYmlsZSBTZXR0aW5nc1xuXHRcdGNvbnN0IG1vYmlsZUdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ01vYmlsZScsICdob21lLWJhc2UnKTtcblxuXHRcdG1vYmlsZUdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdC5zZXROYW1lKCdTZXBhcmF0ZSBtb2JpbGUgaG9tZSBiYXNlJylcblx0XHRcdFx0XHQuc2V0RGVzYygnVXNlIGEgZGlmZmVyZW50IGhvbWUgYmFzZSBvbiBtb2JpbGUgZGV2aWNlcycpXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNlcGFyYXRlTW9iaWxlKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZXBhcmF0ZU1vYmlsZSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciB0byBzaG93IG1vYmlsZSBzZXR0aW5nc1xuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwucGFyZW50RWxlbWVudDtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gc2Nyb2xsQ29udGFpbmVyPy5zY3JvbGxUb3AgfHwgMDtcblx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Ly8gU2hvdyBtb2JpbGUtc3BlY2lmaWMgc2V0dGluZ3MgaWYgc2VwYXJhdGUgbW9iaWxlIGlzIGVuYWJsZWRcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VwYXJhdGVNb2JpbGUpIHtcblx0XHRcdG1vYmlsZUdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdC5zZXROYW1lKCdNb2JpbGUgaG9tZSBiYXNlJylcblx0XHRcdFx0XHQuc2V0RGVzYygnV2hhdCB0byBvcGVuIGFzIHlvdXIgaG9tZSBiYXNlIG9uIG1vYmlsZScpXG5cdFx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgbW9iaWxlVHlwZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVHlwZSB8fCBIb21lQmFzZVR5cGUuRmlsZTtcblx0XHRcdFx0XHRcdGxldCBwbHVnaW5EaXNhYmxlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IHR5cGUgb2YgT2JqZWN0LnZhbHVlcyhIb21lQmFzZVR5cGUpKSB7XG5cdFx0XHRcdFx0XHRcdGlmICghdGhpcy5wbHVnaW4uaGFzUmVxdWlyZWRQbHVnaW4odHlwZSkpIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBJZiBjdXJyZW50IHR5cGUgaXMgZGlzYWJsZWQsIG1hcmsgaXQgYnV0IHN0aWxsIGFsbG93IGl0XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHR5cGUgPT09IG1vYmlsZVR5cGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHBsdWdpbkRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih0eXBlLCB0eXBlKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWRkIGRpc2FibGVkIG9wdGlvblxuXHRcdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uc2VsZWN0RWwuY3JlYXRlRWwoJ29wdGlvbicsIHsgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRleHQ6IHR5cGUsIFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7IGRpc2FibGVkOiAndHJ1ZScgfSBcblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih0eXBlLCB0eXBlKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUobW9iaWxlVHlwZSlcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVHlwZSA9IHZhbHVlIGFzIEhvbWVCYXNlVHlwZTtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gc2Nyb2xsQ29udGFpbmVyPy5zY3JvbGxUb3AgfHwgMDtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gU2hvdyB3YXJuaW5nIGlmIGN1cnJlbnQgdHlwZSByZXF1aXJlcyBhIGRpc2FibGVkIHBsdWdpblxuXHRcdFx0XHRcdFx0aWYgKHBsdWdpbkRpc2FibGVkKSB7XG5cdFx0XHRcdFx0XHRcdHNldHRpbmcuZGVzY0VsLmNyZWF0ZURpdih7XG5cdFx0XHRcdFx0XHRcdFx0dGV4dDogJ1RoZSBwbHVnaW4gcmVxdWlyZWQgZm9yIHRoaXMgaG9tZSBwYWdlIHR5cGUgaXNuXFwndCBhdmFpbGFibGUuJyxcblx0XHRcdFx0XHRcdFx0XHRjbHM6ICdtb2Qtd2FybmluZydcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0aWYgKCFVTkNIQU5HRUFCTEVfVFlQRVMuaW5jbHVkZXModGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VUeXBlKSkge1xuXHRcdFx0XHRtb2JpbGVHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgbW9iaWxlVHlwZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVHlwZTtcblx0XHRcdFx0XHRsZXQgZGVzYyA9ICcnO1xuXHRcdFx0XHRcdGxldCBwbGFjZWhvbGRlciA9ICcnO1xuXG5cdFx0XHRcdFx0aWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XG5cdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSBmaWxlIHRvIG9wZW4gYXMgeW91ciBob21lIGJhc2Ugb24gbW9iaWxlJztcblx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ1BhdGggdG8gaG9tZSBiYXNlIGZpbGUnO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSkge1xuXHRcdFx0XHRcdFx0ZGVzYyA9ICdUaGUgd29ya3NwYWNlIHRvIGxvYWQgYXMgeW91ciBob21lIGJhc2Ugb24gbW9iaWxlJztcblx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ1dvcmtzcGFjZSBuYW1lJztcblx0XHRcdFx0XHR9IGVsc2UgaWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXIpIHtcblx0XHRcdFx0XHRcdGRlc2MgPSAnVGhlIGZvbGRlciB0byBwaWNrIGEgcmFuZG9tIGZpbGUgZnJvbSBvbiBtb2JpbGUnO1xuXHRcdFx0XHRcdFx0cGxhY2Vob2xkZXIgPSAnRm9sZGVyIHBhdGgnO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkpvdXJuYWwpIHtcblx0XHRcdFx0XHRcdGRlc2MgPSAnVGhlIGpvdXJuYWwgbmFtZSBmb3IgbW9iaWxlJztcblx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ0pvdXJuYWwgbmFtZSc7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdFx0LnNldE5hbWUobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUgPyAnTW9iaWxlIGZpbGUnIDogXG5cdFx0XHRcdFx0XHRcdFx0bW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSA/ICdNb2JpbGUgd29ya3NwYWNlJyA6XG5cdFx0XHRcdFx0XHRcdFx0bW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlciA/ICdNb2JpbGUgZm9sZGVyJyA6XG5cdFx0XHRcdFx0XHRcdFx0bW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkpvdXJuYWwgPyAnTW9iaWxlIGpvdXJuYWwnIDogJ01vYmlsZSB2YWx1ZScpXG5cdFx0XHRcdFx0XHQuc2V0RGVzYyhkZXNjKVxuXHRcdFx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0bmV3IEZpbGVQYXRoU3VnZ2VzdCh0aGlzLmFwcCwgdGV4dC5pbnB1dEVsKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlKSB7XG5cdFx0XHRcdFx0XHRcdFx0bmV3IFdvcmtzcGFjZVN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlcikge1xuXHRcdFx0XHRcdFx0XHRcdG5ldyBGb2xkZXJTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKHBsYWNlaG9sZGVyKVxuXHRcdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVZhbHVlIHx8ICcnKVxuXHRcdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVmFsdWUgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVBhdGggPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFJlcGxhY2UgbW9iaWxlIG5ldyB0YWIgYnV0dG9uIChhbHdheXMgYXZhaWxhYmxlLCBub3QgZGVwZW5kZW50IG9uIFwiVXNlIGRpZmZlcmVudCBob21lIGJhc2UgZm9yIG5ldyB0YWJzXCIpXG5cdFx0bW9iaWxlR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnUmVwbGFjZSBtb2JpbGUgbmV3IHRhYiBidXR0b24nKVxuXHRcdFx0XHQuc2V0RGVzYygnQ2hhbmdlIHRoZSBtb2JpbGUgbmV3IHRhYiBidXR0b24gdG8gYSBob21lIGljb24nKVxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcblx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBsYWNlTW9iaWxlTmV3VGFiKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBsYWNlTW9iaWxlTmV3VGFiID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi51cGRhdGVNb2JpbGVCdXR0b24oKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vIE1vYmlsZSBuZXcgdGFiIHNldHRpbmdzIChvbmx5IHNob3cgaWYgXCJVc2UgZGlmZmVyZW50IGZpbGUgZm9yIG5ldyB0YWJzXCIgaXMgZW5hYmxlZClcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlRGlmZmVyZW50RmlsZUZvck5ld1RhYikge1xuXHRcdFx0Ly8gU2VwYXJhdGUgbW9iaWxlIG5ldyB0YWIgdG9nZ2xlXG5cdFx0XHRtb2JpbGVHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRcdHNldHRpbmdcblx0XHRcdFx0XHQuc2V0TmFtZSgnU2VwYXJhdGUgbW9iaWxlIG5ldyB0YWInKVxuXHRcdFx0XHRcdC5zZXREZXNjKCdVc2UgYSBkaWZmZXJlbnQgbmV3IHRhYiBmaWxlIG9uIG1vYmlsZSBkZXZpY2VzJylcblx0XHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcblx0XHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3VGFiU2VwYXJhdGVNb2JpbGUpXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZXdUYWJTZXBhcmF0ZU1vYmlsZSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciB0byBzaG93IG1vYmlsZSBzZXR0aW5nc1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwucGFyZW50RWxlbWVudDtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xuXHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2Nyb2xsQ29udGFpbmVyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIFNob3cgbW9iaWxlLXNwZWNpZmljIG5ldyB0YWIgc2V0dGluZ3MgaWYgc2VwYXJhdGUgbW9iaWxlIGlzIGVuYWJsZWRcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZXdUYWJTZXBhcmF0ZU1vYmlsZSkge1xuXHRcdFx0XHRjb25zdCBtb2JpbGVUeXBlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlTmV3VGFiVHlwZSB8fCBIb21lQmFzZVR5cGUuRmlsZTtcblx0XHRcdFx0Y29uc3QgbW9iaWxlVmFsdWUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVOZXdUYWJWYWx1ZSB8fCAnJztcblxuXHRcdFx0XHQvLyBNb2JpbGUgbmV3IHRhYiB0eXBlIGRyb3Bkb3duXG5cdFx0XHRcdG1vYmlsZUdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0XHQuc2V0TmFtZSgnTW9iaWxlIG5ldyB0YWIgdHlwZScpXG5cdFx0XHRcdFx0XHQuc2V0RGVzYygnV2hhdCB0byBvcGVuIGZvciBuZXcgdGFicyBvbiBtb2JpbGUnKVxuXHRcdFx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuXHRcdFx0XHRcdFx0XHRsZXQgcGx1Z2luRGlzYWJsZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdGZvciAoY29uc3QgdHlwZSBvZiBPYmplY3QudmFsdWVzKEhvbWVCYXNlVHlwZSkpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIXRoaXMucGx1Z2luLmhhc1JlcXVpcmVkUGx1Z2luKHR5cGUpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBJZiBjdXJyZW50IHR5cGUgaXMgZGlzYWJsZWQsIG1hcmsgaXQgYnV0IHN0aWxsIGFsbG93IGl0XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAodHlwZSA9PT0gbW9iaWxlVHlwZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRwbHVnaW5EaXNhYmxlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih0eXBlLCB0eXBlKTtcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEFkZCBkaXNhYmxlZCBvcHRpb25cblx0XHRcdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uc2VsZWN0RWwuY3JlYXRlRWwoJ29wdGlvbicsIHsgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGV4dDogdHlwZSwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0cjogeyBkaXNhYmxlZDogJ3RydWUnIH0gXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKHR5cGUsIHR5cGUpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUobW9iaWxlVHlwZSlcblx0XHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVOZXdUYWJUeXBlID0gdmFsdWUgYXMgSG9tZUJhc2VUeXBlO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2Nyb2xsQ29udGFpbmVyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHQvLyBTaG93IHdhcm5pbmcgaWYgY3VycmVudCB0eXBlIHJlcXVpcmVzIGEgZGlzYWJsZWQgcGx1Z2luXG5cdFx0XHRcdFx0XHRcdGlmIChwbHVnaW5EaXNhYmxlZCkge1xuXHRcdFx0XHRcdFx0XHRcdHNldHRpbmcuZGVzY0VsLmNyZWF0ZURpdih7XG5cdFx0XHRcdFx0XHRcdFx0XHR0ZXh0OiAnVGhlIHBsdWdpbiByZXF1aXJlZCBmb3IgdGhpcyBtb2JpbGUgbmV3IHRhYiB0eXBlIGlzblxcJ3QgYXZhaWxhYmxlLicsXG5cdFx0XHRcdFx0XHRcdFx0XHRjbHM6ICdtb2Qtd2FybmluZydcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdC8vIE1vYmlsZSB2YWx1ZSBpbnB1dCAoY29uZGl0aW9uYWwgb24gdHlwZSlcblx0XHRcdFx0aWYgKCFVTkNIQU5HRUFCTEVfVFlQRVMuaW5jbHVkZXMobW9iaWxlVHlwZSkpIHtcblx0XHRcdFx0XHRtb2JpbGVHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRcdFx0XHRsZXQgZGVzYyA9ICcnO1xuXHRcdFx0XHRcdFx0bGV0IHBsYWNlaG9sZGVyID0gJyc7XG5cblx0XHRcdFx0XHRcdGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkge1xuXHRcdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSBmaWxlIHRvIG9wZW4gZm9yIG5ldyB0YWJzIG9uIG1vYmlsZSc7XG5cdFx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ1BhdGggdG8gbW9iaWxlIG5ldyB0YWIgZmlsZSc7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UpIHtcblx0XHRcdFx0XHRcdFx0ZGVzYyA9ICdUaGUgd29ya3NwYWNlIHRvIGxvYWQgZm9yIG5ldyB0YWJzIG9uIG1vYmlsZSc7XG5cdFx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ1dvcmtzcGFjZSBuYW1lJztcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlcikge1xuXHRcdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSBmb2xkZXIgdG8gcGljayBhIHJhbmRvbSBmaWxlIGZyb20gZm9yIG5ldyB0YWJzIG9uIG1vYmlsZSc7XG5cdFx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ0ZvbGRlciBwYXRoJztcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkpvdXJuYWwpIHtcblx0XHRcdFx0XHRcdFx0ZGVzYyA9ICdUaGUgam91cm5hbCBuYW1lIGZvciBuZXcgdGFicyBvbiBtb2JpbGUnO1xuXHRcdFx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdKb3VybmFsIG5hbWUnO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0XHRcdC5zZXROYW1lKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlID8gJ01vYmlsZSBuZXcgdGFiIGZpbGUnIDogXG5cdFx0XHRcdFx0XHRcdFx0XHRtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlID8gJ01vYmlsZSBuZXcgdGFiIHdvcmtzcGFjZScgOlxuXHRcdFx0XHRcdFx0XHRcdFx0bW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlciA/ICdNb2JpbGUgbmV3IHRhYiBmb2xkZXInIDpcblx0XHRcdFx0XHRcdFx0XHRcdG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Kb3VybmFsID8gJ01vYmlsZSBuZXcgdGFiIGpvdXJuYWwnIDogJ01vYmlsZSBuZXcgdGFiIHZhbHVlJylcblx0XHRcdFx0XHRcdFx0LnNldERlc2MoZGVzYylcblx0XHRcdFx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdG5ldyBGaWxlUGF0aFN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuZXcgV29ya3NwYWNlU3VnZ2VzdCh0aGlzLmFwcCwgdGV4dC5pbnB1dEVsKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdG5ldyBGb2xkZXJTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIocGxhY2Vob2xkZXIpXG5cdFx0XHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUobW9iaWxlVmFsdWUgfHwgJycpXG5cdFx0XHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZU5ld1RhYlZhbHVlID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQXV0b21hdGlvbiBTZXR0aW5nc1xuXHRcdGNvbnN0IGF1dG9tYXRpb25Hcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsICdBdXRvbWF0aW9uJywgJ2hvbWUtYmFzZScpO1xuXG5cdFx0YXV0b21hdGlvbkdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdGNvbnN0IGNvbW1hbmRJZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbW1hbmRPbk9wZW47XG5cdFx0XHRjb25zdCBjb21tYW5kID0gY29tbWFuZElkID8gZ2V0Q29tbWFuZEJ5SWQodGhpcy5hcHAsIGNvbW1hbmRJZCkgOiB1bmRlZmluZWQ7XG5cdFx0XHRjb25zdCBkaXNwbGF5VmFsdWUgPSBjb21tYW5kID8gY29tbWFuZC5uYW1lIDogY29tbWFuZElkO1xuXG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdDb21tYW5kIG9uIG9wZW4nKVxuXHRcdFx0XHQuc2V0RGVzYygnUnVuIGFuIE9ic2lkaWFuIGNvbW1hbmQgd2hlbiBvcGVuaW5nIGhvbWUgYmFzZScpXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG5cdFx0XHRcdFx0Ly8gQWRkIGNvbW1hbmQgc3VnZ2VzdGVyXG5cdFx0XHRcdFx0bmV3IENvbW1hbmRTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignU2VhcmNoIGZvciBhIGNvbW1hbmQuLi4nKVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKGRpc3BsYXlWYWx1ZSB8fCAnJylcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY29tbWFuZE9uT3BlbiA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGJ0bikgPT4ge1xuXHRcdFx0XHRcdGJ0blxuXHRcdFx0XHRcdFx0LnNldEljb24oJ3gnKVxuXHRcdFx0XHRcdFx0LnNldFRvb2x0aXAoJ0NsZWFyIGNvbW1hbmQnKVxuXHRcdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb21tYW5kT25PcGVuID0gJyc7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gUHJlc2VydmUgc2Nyb2xsIHBvc2l0aW9uIGJlZm9yZSByZS1yZW5kZXJpbmdcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IHNjcm9sbENvbnRhaW5lcj8uc2Nyb2xsVG9wIHx8IDA7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIHJlbmRlcmluZ1xuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblx0fVxufVxuIiwgIi8qKlxyXG4gKiBDb21wYXRpYmlsaXR5IHV0aWxpdGllcyBmb3Igc2V0dGluZ3NcclxuICogUHJvdmlkZXMgYmFja3dhcmQgY29tcGF0aWJpbGl0eSBmb3IgU2V0dGluZ0dyb3VwIChyZXF1aXJlcyBBUEkgMS4xMS4wKylcclxuICovXHJcblxyXG5pbXBvcnQgeyBTZXR0aW5nLCByZXF1aXJlQXBpVmVyc2lvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0ICogYXMgT2JzaWRpYW5Nb2R1bGUgZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuLyoqXHJcbiAqIEludGVyZmFjZSB0aGF0IHdvcmtzIHdpdGggYm90aCBTZXR0aW5nR3JvdXAgYW5kIGZhbGxiYWNrIGNvbnRhaW5lclxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTZXR0aW5nc0NvbnRhaW5lciB7XHJcblx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIHNldHRpbmdzIGNvbnRhaW5lciB0aGF0IHVzZXMgU2V0dGluZ0dyb3VwIGlmIGF2YWlsYWJsZSAoQVBJIDEuMTEuMCspLFxyXG4gKiBvdGhlcndpc2UgZmFsbHMgYmFjayB0byBjcmVhdGluZyBhIGhlYWRpbmcgYW5kIHVzaW5nIHRoZSBjb250YWluZXIgZGlyZWN0bHkuXHJcbiAqIFxyXG4gKiBVc2VzIHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjAnKSB0byBjaGVjayBpZiBTZXR0aW5nR3JvdXAgaXMgYXZhaWxhYmxlLlxyXG4gKiBUaGlzIGlzIHRoZSBvZmZpY2lhbCBPYnNpZGlhbiBBUEkgbWV0aG9kIGZvciB2ZXJzaW9uIGNoZWNraW5nLlxyXG4gKiBcclxuICogQHBhcmFtIGNvbnRhaW5lckVsIC0gVGhlIGNvbnRhaW5lciBlbGVtZW50IGZvciBzZXR0aW5nc1xyXG4gKiBAcGFyYW0gaGVhZGluZyAtIFRoZSBoZWFkaW5nIHRleHQgZm9yIHRoZSBzZXR0aW5ncyBncm91cCAob3B0aW9uYWwpXHJcbiAqIEBwYXJhbSBtYW5pZmVzdElkIC0gVGhlIHBsdWdpbidzIG1hbmlmZXN0IElEIGZvciBDU1Mgc2NvcGluZyAocmVxdWlyZWQgZm9yIGZhbGxiYWNrIG1vZGUpXHJcbiAqIEByZXR1cm5zIEEgY29udGFpbmVyIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIHNldHRpbmdzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2V0dGluZ3NHcm91cChcclxuXHRjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXHJcblx0aGVhZGluZz86IHN0cmluZyxcclxuXHRtYW5pZmVzdElkPzogc3RyaW5nXHJcbik6IFNldHRpbmdzQ29udGFpbmVyIHtcclxuXHQvLyBDaGVjayBpZiBTZXR0aW5nR3JvdXAgaXMgYXZhaWxhYmxlIChBUEkgMS4xMS4wKylcclxuXHRpZiAocmVxdWlyZUFwaVZlcnNpb24oJzEuMTEuMCcpKSB7XHJcblx0XHQvLyBBY2Nlc3MgU2V0dGluZ0dyb3VwIHZpYSB0eXBlIGFzc2VydGlvbiBzaW5jZSBpdCBtYXkgbm90IGJlIGluIHR5cGUgZGVmaW5pdGlvbnNcclxuXHRcdGNvbnN0IFNldHRpbmdHcm91cENsYXNzID0gKE9ic2lkaWFuTW9kdWxlIGFzIHVua25vd24gYXMgeyBTZXR0aW5nR3JvdXA/OiBuZXcgKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkgPT4ge1xyXG5cdFx0XHRzZXRIZWFkaW5nKGhlYWRpbmc6IHN0cmluZyk6IHtcclxuXHRcdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcblx0XHRcdH07XHJcblx0XHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKTogdm9pZDtcclxuXHRcdH0gfSkuU2V0dGluZ0dyb3VwO1xyXG5cdFx0XHJcblx0XHRpZiAoU2V0dGluZ0dyb3VwQ2xhc3MpIHtcclxuXHRcdFx0Y29uc3QgZ3JvdXAgPSBoZWFkaW5nIFxyXG5cdFx0XHRcdD8gbmV3IFNldHRpbmdHcm91cENsYXNzKGNvbnRhaW5lckVsKS5zZXRIZWFkaW5nKGhlYWRpbmcpXHJcblx0XHRcdFx0OiBuZXcgU2V0dGluZ0dyb3VwQ2xhc3MoY29udGFpbmVyRWwpO1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKSB7XHJcblx0XHRcdFx0XHRncm91cC5hZGRTZXR0aW5nKGNiKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdC8vIEZhbGxiYWNrIHBhdGggKGVpdGhlciBBUEkgPCAxLjExLjAgb3IgU2V0dGluZ0dyb3VwIG5vdCBmb3VuZClcclxuXHQvLyBBZGQgc2NvcGluZyBjbGFzcyB0byBjb250YWluZXJFbCB0byBzY29wZSBDU1MgdG8gb25seSB0aGlzIHBsdWdpbidzIHNldHRpbmdzXHJcblx0aWYgKG1hbmlmZXN0SWQpIHtcclxuXHRcdGNvbnRhaW5lckVsLmFkZENsYXNzKGAke21hbmlmZXN0SWR9LXNldHRpbmdzLWNvbXBhdGApO1xyXG5cdH1cclxuXHRcclxuXHRpZiAoaGVhZGluZykge1xyXG5cdFx0Y29uc3QgaGVhZGluZ0VsID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCdzZXR0aW5nLWdyb3VwLWhlYWRpbmcnKTtcclxuXHRcdGhlYWRpbmdFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6IGhlYWRpbmcgfSk7XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiB7XHJcblx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xyXG5cdFx0XHRjb25zdCBzZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpO1xyXG5cdFx0XHRjYihzZXR0aW5nKTtcclxuXHRcdH1cclxuXHR9O1xyXG59XHJcbiIsICIvKipcclxuICogRmlsZSBQYXRoIFN1Z2dlc3RlciBDb21wb25lbnRcclxuICogUHJvdmlkZXMgYXV0b2NvbXBsZXRlIGZvciBmaWxlIHBhdGhzIGluIHNldHRpbmdzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQWJzdHJhY3RJbnB1dFN1Z2dlc3QsIEFwcCwgVEZpbGUsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vKipcclxuICogU3VwcG9ydGVkIGZpbGUgZXh0ZW5zaW9ucyBmb3IgaG9tZSBiYXNlXHJcbiAqL1xyXG5jb25zdCBTVVBQT1JURURfRVhURU5TSU9OUyA9IFsnbWQnLCAnbWR4JywgJ2NhbnZhcycsICdiYXNlJ107XHJcblxyXG4vKipcclxuICogRmlsZSBwYXRoIHN1Z2dlc3RlciB0aGF0IHByb3ZpZGVzIGF1dG9jb21wbGV0ZSBmb3IgdmF1bHQgZmlsZXNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBGaWxlUGF0aFN1Z2dlc3QgZXh0ZW5kcyBBYnN0cmFjdElucHV0U3VnZ2VzdDxURmlsZT4ge1xyXG5cdHByaXZhdGUgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQpIHtcclxuXHRcdHN1cGVyKGFwcCwgaW5wdXRFbCk7XHJcblx0XHR0aGlzLmlucHV0RWwgPSBpbnB1dEVsO1xyXG5cdH1cclxuXHJcblx0Z2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IFRGaWxlW10ge1xyXG5cdFx0Y29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XHJcblx0XHRjb25zdCBmaWxlczogVEZpbGVbXSA9IFtdO1xyXG5cclxuXHRcdC8vIEdldCBhbGwgZmlsZXMgZnJvbSB2YXVsdFxyXG5cdFx0dGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKS5mb3JFYWNoKChmaWxlKSA9PiB7XHJcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHQvLyBPbmx5IGluY2x1ZGUgc3VwcG9ydGVkIGZpbGUgdHlwZXNcclxuXHRcdFx0XHRpZiAoU1VQUE9SVEVEX0VYVEVOU0lPTlMuaW5jbHVkZXMoZmlsZS5leHRlbnNpb24pKSB7XHJcblx0XHRcdFx0XHQvLyBNYXRjaCBhZ2FpbnN0IHBhdGggb3IgbmFtZVxyXG5cdFx0XHRcdFx0aWYgKFxyXG5cdFx0XHRcdFx0XHRmaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclF1ZXJ5KSB8fFxyXG5cdFx0XHRcdFx0XHRmaWxlLmJhc2VuYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSlcclxuXHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRmaWxlcy5wdXNoKGZpbGUpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gU29ydCBieSByZWxldmFuY2UgKGV4YWN0IG1hdGNoZXMgZmlyc3QsIHRoZW4gYWxwaGFiZXRpY2FsbHkpXHJcblx0XHRmaWxlcy5zb3J0KChhLCBiKSA9PiB7XHJcblx0XHRcdGNvbnN0IGFTdGFydHNXaXRoID0gYS5wYXRoLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChsb3dlclF1ZXJ5KTtcclxuXHRcdFx0Y29uc3QgYlN0YXJ0c1dpdGggPSBiLnBhdGgudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKGxvd2VyUXVlcnkpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGFTdGFydHNXaXRoICYmICFiU3RhcnRzV2l0aCkgcmV0dXJuIC0xO1xyXG5cdFx0XHRpZiAoIWFTdGFydHNXaXRoICYmIGJTdGFydHNXaXRoKSByZXR1cm4gMTtcclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiBhLnBhdGgubG9jYWxlQ29tcGFyZShiLnBhdGgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gTGltaXQgcmVzdWx0c1xyXG5cdFx0cmV0dXJuIGZpbGVzLnNsaWNlKDAsIDIwKTtcclxuXHR9XHJcblxyXG5cdHJlbmRlclN1Z2dlc3Rpb24oZmlsZTogVEZpbGUsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG5cdFx0Ly8gU2hvdyBmaWxlIG5hbWUgcHJvbWluZW50bHlcclxuXHRcdGVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxyXG5cdFx0XHR0ZXh0OiBmaWxlLmJhc2VuYW1lLFxyXG5cdFx0XHRjbHM6ICdzdWdnZXN0aW9uLXRpdGxlJ1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdC8vIFNob3cgcGF0aCBpbiBzbWFsbGVyIHRleHQgaWYgZGlmZmVyZW50IGZyb20gYmFzZW5hbWVcclxuXHRcdGlmIChmaWxlLnBhcmVudCAmJiBmaWxlLnBhcmVudC5wYXRoICE9PSAnLycpIHtcclxuXHRcdFx0ZWwuY3JlYXRlRWwoJ3NtYWxsJywgeyBcclxuXHRcdFx0XHR0ZXh0OiBmaWxlLnBhcmVudC5wYXRoLFxyXG5cdFx0XHRcdGNsczogJ3N1Z2dlc3Rpb24tcGF0aCdcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU2hvdyBmaWxlIHR5cGUgaW5kaWNhdG9yXHJcblx0XHRpZiAoZmlsZS5leHRlbnNpb24gIT09ICdtZCcpIHtcclxuXHRcdFx0ZWwuY3JlYXRlRWwoJ3NwYW4nLCB7XHJcblx0XHRcdFx0dGV4dDogZmlsZS5leHRlbnNpb24udG9VcHBlckNhc2UoKSxcclxuXHRcdFx0XHRjbHM6ICdzdWdnZXN0aW9uLWZsYWlyJ1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHNlbGVjdFN1Z2dlc3Rpb24oZmlsZTogVEZpbGUpOiB2b2lkIHtcclxuXHRcdHRoaXMuaW5wdXRFbC52YWx1ZSA9IGZpbGUucGF0aDtcclxuXHRcdHRoaXMuaW5wdXRFbC50cmlnZ2VyKCdpbnB1dCcpO1xyXG5cdFx0dGhpcy5jbG9zZSgpO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEZvbGRlciBwYXRoIHN1Z2dlc3RlciBmb3Igc2VsZWN0aW5nIGZvbGRlcnNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBGb2xkZXJTdWdnZXN0IGV4dGVuZHMgQWJzdHJhY3RJbnB1dFN1Z2dlc3Q8VEZvbGRlcj4ge1xyXG5cdHByaXZhdGUgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQpIHtcclxuXHRcdHN1cGVyKGFwcCwgaW5wdXRFbCk7XHJcblx0XHR0aGlzLmlucHV0RWwgPSBpbnB1dEVsO1xyXG5cdH1cclxuXHJcblx0Z2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IFRGb2xkZXJbXSB7XHJcblx0XHRjb25zdCBsb3dlclF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcclxuXHRcdGNvbnN0IGZvbGRlcnM6IFRGb2xkZXJbXSA9IFtdO1xyXG5cclxuXHRcdHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkuZm9yRWFjaCgoZmlsZSkgPT4ge1xyXG5cdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuXHRcdFx0XHRpZiAoZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSkpIHtcclxuXHRcdFx0XHRcdGZvbGRlcnMucHVzaChmaWxlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdGZvbGRlcnMuc29ydCgoYSwgYikgPT4gYS5wYXRoLmxvY2FsZUNvbXBhcmUoYi5wYXRoKSk7XHJcblx0XHRyZXR1cm4gZm9sZGVycy5zbGljZSgwLCAyMCk7XHJcblx0fVxyXG5cclxuXHRyZW5kZXJTdWdnZXN0aW9uKGZvbGRlcjogVEZvbGRlciwgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRlbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBmb2xkZXIucGF0aCB8fCAnLycgfSk7XHJcblx0fVxyXG5cclxuXHRzZWxlY3RTdWdnZXN0aW9uKGZvbGRlcjogVEZvbGRlcik6IHZvaWQge1xyXG5cdFx0dGhpcy5pbnB1dEVsLnZhbHVlID0gZm9sZGVyLnBhdGg7XHJcblx0XHR0aGlzLmlucHV0RWwudHJpZ2dlcignaW5wdXQnKTtcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBXb3Jrc3BhY2Ugc3VnZ2VzdGVyIGZvciBzZWxlY3RpbmcgT2JzaWRpYW4gd29ya3NwYWNlc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFdvcmtzcGFjZVN1Z2dlc3QgZXh0ZW5kcyBBYnN0cmFjdElucHV0U3VnZ2VzdDxzdHJpbmc+IHtcclxuXHRwcml2YXRlIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50KSB7XHJcblx0XHRzdXBlcihhcHAsIGlucHV0RWwpO1xyXG5cdFx0dGhpcy5pbnB1dEVsID0gaW5wdXRFbDtcclxuXHR9XHJcblxyXG5cdGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBzdHJpbmdbXSB7XHJcblx0XHQgXHJcblx0XHRjb25zdCB3b3Jrc3BhY2VzUGx1Z2luID0gdGhpcy5hcHAuaW50ZXJuYWxQbHVnaW5zPy5wbHVnaW5zPy53b3Jrc3BhY2VzO1xyXG5cdFx0IFxyXG5cdFx0aWYgKCF3b3Jrc3BhY2VzUGx1Z2luPy5lbmFibGVkIHx8ICF3b3Jrc3BhY2VzUGx1Z2luLmluc3RhbmNlPy53b3Jrc3BhY2VzKSB7XHJcblx0XHRcdHJldHVybiBbXTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0IFxyXG5cdFx0Y29uc3Qgd29ya3NwYWNlcyA9IE9iamVjdC5rZXlzKHdvcmtzcGFjZXNQbHVnaW4uaW5zdGFuY2Uud29ya3NwYWNlcyk7XHJcblx0XHRjb25zdCBsb3dlclF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIHdvcmtzcGFjZXMuZmlsdGVyKCh3b3Jrc3BhY2U6IHN0cmluZykgPT4gXHJcblx0XHRcdHdvcmtzcGFjZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyUXVlcnkpXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyU3VnZ2VzdGlvbih3b3Jrc3BhY2U6IHN0cmluZywgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRlbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiB3b3Jrc3BhY2UgfSk7XHJcblx0fVxyXG5cclxuXHRzZWxlY3RTdWdnZXN0aW9uKHdvcmtzcGFjZTogc3RyaW5nKTogdm9pZCB7XHJcblx0XHR0aGlzLmlucHV0RWwudmFsdWUgPSB3b3Jrc3BhY2U7XHJcblx0XHR0aGlzLmlucHV0RWwudHJpZ2dlcignaW5wdXQnKTtcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHR9XHJcbn0iLCAiLyoqXHJcbiAqIENvbW1hbmQgU3VnZ2VzdGVyIENvbXBvbmVudFxyXG4gKiBQcm92aWRlcyBhdXRvY29tcGxldGUgZm9yIE9ic2lkaWFuIGNvbW1hbmRzIGluIHNldHRpbmdzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQWJzdHJhY3RJbnB1dFN1Z2dlc3QsIEFwcCwgQ29tbWFuZCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8qKlxyXG4gKiBDb21tYW5kIHN1Z2dlc3RlciB0aGF0IHByb3ZpZGVzIGF1dG9jb21wbGV0ZSBmb3IgT2JzaWRpYW4gY29tbWFuZHNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb21tYW5kU3VnZ2VzdCBleHRlbmRzIEFic3RyYWN0SW5wdXRTdWdnZXN0PENvbW1hbmQ+IHtcclxuXHRwcml2YXRlIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50KSB7XHJcblx0XHRzdXBlcihhcHAsIGlucHV0RWwpO1xyXG5cdFx0dGhpcy5pbnB1dEVsID0gaW5wdXRFbDtcclxuXHR9XHJcblxyXG5cdGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBDb21tYW5kW10ge1xyXG5cdFx0Y29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XHJcblx0XHRjb25zdCBjb21tYW5kczogQ29tbWFuZFtdID0gW107XHJcblxyXG5cdFx0Ly8gR2V0IGFsbCBjb21tYW5kcyBmcm9tIHRoZSBhcHBcclxuXHRcdGNvbnN0IGFwcFdpdGhDb21tYW5kcyA9IHRoaXMuYXBwIGFzIEFwcCAmIHsgXHJcblx0XHRcdGNvbW1hbmRzPzogeyBjb21tYW5kcz86IFJlY29yZDxzdHJpbmcsIENvbW1hbmQ+IH0gXHJcblx0XHR9O1xyXG5cdFx0Y29uc3QgYWxsQ29tbWFuZHMgPSBhcHBXaXRoQ29tbWFuZHMuY29tbWFuZHM/LmNvbW1hbmRzO1xyXG5cdFx0XHJcblx0XHRpZiAoYWxsQ29tbWFuZHMpIHtcclxuXHRcdFx0Zm9yIChjb25zdCBjb21tYW5kIG9mIE9iamVjdC52YWx1ZXMoYWxsQ29tbWFuZHMpKSB7XHJcblx0XHRcdFx0aWYgKGNvbW1hbmQubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyUXVlcnkpIHx8XHJcblx0XHRcdFx0XHRjb21tYW5kLmlkLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSkpIHtcclxuXHRcdFx0XHRcdGNvbW1hbmRzLnB1c2goY29tbWFuZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU29ydCBhbHBoYWJldGljYWxseSBieSBuYW1lXHJcblx0XHRjb21tYW5kcy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKTtcclxuXHJcblx0XHQvLyBMaW1pdCByZXN1bHRzXHJcblx0XHRyZXR1cm4gY29tbWFuZHMuc2xpY2UoMCwgMzApO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyU3VnZ2VzdGlvbihjb21tYW5kOiBDb21tYW5kLCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxyXG5cdFx0XHR0ZXh0OiBjb21tYW5kLm5hbWUsXHJcblx0XHRcdGNsczogJ3N1Z2dlc3Rpb24tdGl0bGUnXHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0ZWwuY3JlYXRlRWwoJ3NtYWxsJywgeyBcclxuXHRcdFx0dGV4dDogY29tbWFuZC5pZCxcclxuXHRcdFx0Y2xzOiAnc3VnZ2VzdGlvbi1ub3RlJ1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRzZWxlY3RTdWdnZXN0aW9uKGNvbW1hbmQ6IENvbW1hbmQpOiB2b2lkIHtcclxuXHRcdHRoaXMuaW5wdXRFbC52YWx1ZSA9IGNvbW1hbmQuaWQ7XHJcblx0XHR0aGlzLmlucHV0RWwudHJpZ2dlcignaW5wdXQnKTtcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFeHRlbmRlZCBBcHAgaW50ZXJmYWNlIHdpdGggY29tbWFuZHNcclxuICovXHJcbmludGVyZmFjZSBBcHBXaXRoQ29tbWFuZHMgZXh0ZW5kcyBBcHAge1xyXG5cdGNvbW1hbmRzPzoge1xyXG5cdFx0Y29tbWFuZHM/OiBSZWNvcmQ8c3RyaW5nLCBDb21tYW5kPjtcclxuXHRcdGV4ZWN1dGVDb21tYW5kQnlJZD86IChjb21tYW5kSWQ6IHN0cmluZykgPT4gYm9vbGVhbiB8IFByb21pc2U8dm9pZD47XHJcblx0fTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBhIGNvbW1hbmQgYnkgaXRzIElEXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29tbWFuZEJ5SWQoYXBwOiBBcHAsIGNvbW1hbmRJZDogc3RyaW5nKTogQ29tbWFuZCB8IHVuZGVmaW5lZCB7XHJcblx0Y29uc3QgYXBwV2l0aENvbW1hbmRzID0gYXBwIGFzIEFwcFdpdGhDb21tYW5kcztcclxuXHRjb25zdCBjb21tYW5kcyA9IGFwcFdpdGhDb21tYW5kcy5jb21tYW5kcz8uY29tbWFuZHM7XHJcblx0cmV0dXJuIGNvbW1hbmRzPy5bY29tbWFuZElkXTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEV4ZWN1dGUgYSBjb21tYW5kIGJ5IGl0cyBJRFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGV4ZWN1dGVDb21tYW5kKGFwcDogQXBwLCBjb21tYW5kSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdGlmICghY29tbWFuZElkKSByZXR1cm4gZmFsc2U7XHJcblx0XHJcblx0Y29uc3QgYXBwV2l0aENvbW1hbmRzID0gYXBwIGFzIEFwcFdpdGhDb21tYW5kcztcclxuXHRjb25zdCByZXN1bHQgPSBhcHBXaXRoQ29tbWFuZHMuY29tbWFuZHM/LmV4ZWN1dGVDb21tYW5kQnlJZD8uKGNvbW1hbmRJZCk7XHJcblx0cmV0dXJuIHJlc3VsdCAhPT0gZmFsc2U7XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBJY29uIFBpY2tlciBNb2RhbFxyXG4gKiBTaW1wbGlmaWVkIGljb24gcGlja2VyIGZvciBzZWxlY3Rpbmcgc3RpY2t5IGljb25cclxuICogQmFzZWQgb24gaWNvbmljIHBsdWdpbidzIGljb24gcGlja2VyXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBCdXR0b25Db21wb25lbnQsIE1vZGFsLCBQbGF0Zm9ybSwgU2V0dGluZywgVGV4dENvbXBvbmVudCwgcHJlcGFyZUZ1enp5U2VhcmNoLCBzZXRJY29uLCBnZXRJY29uSWRzIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJY29uUGlja2VyQ2FsbGJhY2sge1xyXG5cdChpY29uOiBzdHJpbmcgfCBudWxsKTogdm9pZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNpbXBsaWZpZWQgaWNvbiBwaWNrZXIgbW9kYWxcclxuICovXHJcbmV4cG9ydCBjbGFzcyBJY29uUGlja2VyIGV4dGVuZHMgTW9kYWwge1xyXG5cdHByaXZhdGUgc2VsZWN0ZWRJY29uOiBzdHJpbmcgfCBudWxsO1xyXG5cdHByaXZhdGUgY2FsbGJhY2s6IEljb25QaWNrZXJDYWxsYmFjaztcclxuXHRwcml2YXRlIHNlYXJjaEZpZWxkOiBUZXh0Q29tcG9uZW50O1xyXG5cdHByaXZhdGUgc2VhcmNoUmVzdWx0czogW2ljb246IHN0cmluZywgaWNvbk5hbWU6IHN0cmluZ11bXSA9IFtdO1xyXG5cdHByaXZhdGUgc2VhcmNoUmVzdWx0c1NldHRpbmc6IFNldHRpbmc7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBjdXJyZW50SWNvbjogc3RyaW5nIHwgbnVsbCwgY2FsbGJhY2s6IEljb25QaWNrZXJDYWxsYmFjaykge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMuc2VsZWN0ZWRJY29uID0gY3VycmVudEljb247XHJcblx0XHR0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKTogdm9pZCB7XHJcblx0XHR0aGlzLmNvbnRhaW5lckVsLmFkZENsYXNzKCdtb2QtY29uZmlybWF0aW9uJyk7XHJcblx0XHR0aGlzLm1vZGFsRWwuYWRkQ2xhc3MoJ2ljb25pYy1pY29uLXBpY2tlcicpO1xyXG5cdFx0dGhpcy5zZXRUaXRsZSgnQ2hhbmdlIGljb24nKTtcclxuXHJcblx0XHQvLyBTZWFyY2ggZmllbGRcclxuXHRcdGNvbnN0IHNlYXJjaFNldHRpbmcgPSBuZXcgU2V0dGluZyh0aGlzLmNvbnRlbnRFbCk7XHJcblx0XHRpZiAoIVBsYXRmb3JtLmlzUGhvbmUpIHtcclxuXHRcdFx0c2VhcmNoU2V0dGluZy5zZXROYW1lKCdTZWFyY2gnKTtcclxuXHRcdH1cclxuXHRcdHNlYXJjaFNldHRpbmcuYWRkU2VhcmNoKChzZWFyY2hGaWVsZCkgPT4ge1xyXG5cdFx0XHRzZWFyY2hGaWVsZFxyXG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignU2VhcmNoIGljb25zLi4uJylcclxuXHRcdFx0XHQub25DaGFuZ2UoKCkgPT4gdGhpcy51cGRhdGVTZWFyY2hSZXN1bHRzKCkpO1xyXG5cdFx0XHRzZWFyY2hGaWVsZC5pbnB1dEVsLmVudGVyS2V5SGludCA9ICdnbyc7XHJcblx0XHRcdHRoaXMuc2VhcmNoRmllbGQgPSBzZWFyY2hGaWVsZDtcclxuXHRcdH0pO1xyXG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWRJY29uKSB7XHJcblx0XHRcdHRoaXMuc2VhcmNoRmllbGQuc2V0VmFsdWUodGhpcy5zZWxlY3RlZEljb24pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNlYXJjaCByZXN1bHRzXHJcblx0XHR0aGlzLnNlYXJjaFJlc3VsdHNTZXR0aW5nID0gbmV3IFNldHRpbmcodGhpcy5jb250ZW50RWwpO1xyXG5cdFx0dGhpcy5zZWFyY2hSZXN1bHRzU2V0dGluZy5zZXR0aW5nRWwuYWRkQ2xhc3MoJ2ljb25pYy1zZWFyY2gtcmVzdWx0cycpO1xyXG5cdFx0dGhpcy5zZWFyY2hSZXN1bHRzU2V0dGluZy5zZXR0aW5nRWwudGFiSW5kZXggPSAwO1xyXG5cdFx0XHJcblx0XHQvLyBBbGxvdyB2ZXJ0aWNhbCBzY3JvbGxpbmcgdG8gd29yayBob3Jpem9udGFsbHlcclxuXHRcdHRoaXMuc2VhcmNoUmVzdWx0c1NldHRpbmcuc2V0dGluZ0VsLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgKGV2ZW50KSA9PiB7XHJcblx0XHRcdGlmIChkb2N1bWVudC5ib2R5Lmhhc0NsYXNzKCdtb2QtcnRsJykpIHtcclxuXHRcdFx0XHR0aGlzLnNlYXJjaFJlc3VsdHNTZXR0aW5nLnNldHRpbmdFbC5zY3JvbGxMZWZ0IC09IGV2ZW50LmRlbHRhWTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLnNlYXJjaFJlc3VsdHNTZXR0aW5nLnNldHRpbmdFbC5zY3JvbGxMZWZ0ICs9IGV2ZW50LmRlbHRhWTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xyXG5cclxuXHRcdC8vIEJ1dHRvbnMgLSBtYXRjaCBpY29uaWMncyBidXR0b24gbGF5b3V0XHJcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSB0aGlzLm1vZGFsRWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XHJcblxyXG5cdFx0Ly8gQ2FuY2VsXHJcblx0XHRuZXcgQnV0dG9uQ29tcG9uZW50KGJ1dHRvbkNvbnRhaW5lcilcclxuXHRcdFx0LnNldEJ1dHRvblRleHQoJ0NhbmNlbCcpXHJcblx0XHRcdC5vbkNsaWNrKCgpID0+IHRoaXMuY2xvc2UoKSlcclxuXHRcdFx0LmJ1dHRvbkVsLmFkZENsYXNzKCdtb2QtY2FuY2VsJyk7XHJcblxyXG5cdFx0Ly8gU2F2ZVxyXG5cdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChidXR0b25Db250YWluZXIpXHJcblx0XHRcdC5zZXRCdXR0b25UZXh0KCdTYXZlJylcclxuXHRcdFx0LnNldEN0YSgpXHJcblx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHR0aGlzLmNhbGxiYWNrKHRoaXMuc2VsZWN0ZWRJY29uKTtcclxuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdC8vIEF1dG8tZm9jdXMgc2VhcmNoIGZpZWxkXHJcblx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnNlYXJjaEZpZWxkLmlucHV0RWwuc2VsZWN0KCk7XHJcblx0XHRcdHRoaXMudXBkYXRlU2VhcmNoUmVzdWx0cygpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgc2VhcmNoIHJlc3VsdHMgYmFzZWQgb24gY3VycmVudCBxdWVyeVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgdXBkYXRlU2VhcmNoUmVzdWx0cygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHF1ZXJ5ID0gdGhpcy5zZWFyY2hGaWVsZC5nZXRWYWx1ZSgpLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xyXG5cdFx0Y29uc3QgZnV6enlTZWFyY2ggPSBwcmVwYXJlRnV6enlTZWFyY2gocXVlcnkpO1xyXG5cdFx0Y29uc3QgbWF0Y2hlczogW3Njb3JlOiBudW1iZXIsIGljb25FbnRyeTogW3N0cmluZywgc3RyaW5nXV1bXSA9IFtdO1xyXG5cclxuXHRcdC8vIEdldCBhbGwgYXZhaWxhYmxlIGljb25zXHJcblx0XHRjb25zdCBpY29uSWRzID0gZ2V0SWNvbklkcygpO1xyXG5cclxuXHRcdC8vIFNlYXJjaCBpY29uc1xyXG5cdFx0aWYgKHF1ZXJ5KSB7XHJcblx0XHRcdGZvciAoY29uc3QgaWNvbklkIG9mIGljb25JZHMpIHtcclxuXHRcdFx0XHQvLyBDcmVhdGUgYSByZWFkYWJsZSBuYW1lIGZyb20gaWNvbiBJRFxyXG5cdFx0XHRcdGNvbnN0IGljb25OYW1lID0gdGhpcy5mb3JtYXRJY29uTmFtZShpY29uSWQpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChpY29uSWQgPT09IHF1ZXJ5IHx8IGljb25JZC50b0xvd2VyQ2FzZSgpID09PSBxdWVyeSkge1xyXG5cdFx0XHRcdFx0bWF0Y2hlcy5wdXNoKFswLCBbaWNvbklkLCBpY29uTmFtZV1dKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Y29uc3QgZnV6enlNYXRjaCA9IGZ1enp5U2VhcmNoKGljb25OYW1lKTtcclxuXHRcdFx0XHRcdGlmIChmdXp6eU1hdGNoKSB7XHJcblx0XHRcdFx0XHRcdG1hdGNoZXMucHVzaChbZnV6enlNYXRjaC5zY29yZSwgW2ljb25JZCwgaWNvbk5hbWVdXSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBTaG93IGFsbCBpY29ucyBpZiBubyBxdWVyeVxyXG5cdFx0XHRmb3IgKGNvbnN0IGljb25JZCBvZiBpY29uSWRzKSB7XHJcblx0XHRcdFx0Y29uc3QgaWNvbk5hbWUgPSB0aGlzLmZvcm1hdEljb25OYW1lKGljb25JZCk7XHJcblx0XHRcdFx0bWF0Y2hlcy5wdXNoKFswLCBbaWNvbklkLCBpY29uTmFtZV1dKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNvcnQgYnkgc2NvcmVcclxuXHRcdG1hdGNoZXMuc29ydCgoW3Njb3JlQV0sIFtzY29yZUJdKSA9PiBzY29yZUEgPiBzY29yZUIgPyAtMSA6ICsxKTtcclxuXHJcblx0XHQvLyBMaW1pdCByZXN1bHRzXHJcblx0XHR0aGlzLnNlYXJjaFJlc3VsdHMubGVuZ3RoID0gMDtcclxuXHRcdGNvbnN0IG1heFJlc3VsdHMgPSAxMDA7XHJcblx0XHRmb3IgKGNvbnN0IFssIGljb25FbnRyeV0gb2YgbWF0Y2hlcykge1xyXG5cdFx0XHR0aGlzLnNlYXJjaFJlc3VsdHMucHVzaChpY29uRW50cnkpO1xyXG5cdFx0XHRpZiAodGhpcy5zZWFyY2hSZXN1bHRzLmxlbmd0aCA+PSBtYXhSZXN1bHRzKSBicmVhaztcclxuXHRcdH1cclxuXHJcblx0XHQvLyBVcGRhdGUgVUkgLSB1c2UgRXh0cmFCdXR0b25Db21wb25lbnQgbGlrZSBpY29uaWNcclxuXHRcdHRoaXMuc2VhcmNoUmVzdWx0c1NldHRpbmcuY2xlYXIoKTtcclxuXHRcdGZvciAoY29uc3QgW2ljb25JZCwgaWNvbk5hbWVdIG9mIHRoaXMuc2VhcmNoUmVzdWx0cykge1xyXG5cdFx0XHR0aGlzLnNlYXJjaFJlc3VsdHNTZXR0aW5nLmFkZEV4dHJhQnV0dG9uKChpY29uQnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0aWNvbkJ1dHRvbi5zZXRUb29sdGlwKGljb25OYW1lLCB7XHJcblx0XHRcdFx0XHRkZWxheTogMzAwLFxyXG5cdFx0XHRcdFx0cGxhY2VtZW50OiBQbGF0Zm9ybS5pc1Bob25lID8gJ3RvcCcgOiAnYm90dG9tJyxcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRjb25zdCBpY29uRWwgPSBpY29uQnV0dG9uLmV4dHJhU2V0dGluZ3NFbDtcclxuXHRcdFx0XHRpY29uRWwuYWRkQ2xhc3MoJ2ljb25pYy1zZWFyY2gtcmVzdWx0Jyk7XHJcblx0XHRcdFx0aWNvbkVsLnRhYkluZGV4ID0gLTE7XHJcblxyXG5cdFx0XHRcdHNldEljb24oaWNvbkVsLCBpY29uSWQpO1xyXG5cclxuXHRcdFx0XHQvLyBIaWdobGlnaHQgc2VsZWN0ZWQgaWNvblxyXG5cdFx0XHRcdGlmIChpY29uSWQgPT09IHRoaXMuc2VsZWN0ZWRJY29uKSB7XHJcblx0XHRcdFx0XHRpY29uRWwuYWRkQ2xhc3MoJ2lzLXNlbGVjdGVkJyk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpY29uRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkSWNvbiA9IGljb25JZDtcclxuXHRcdFx0XHRcdHRoaXMuY2FsbGJhY2soaWNvbklkKTtcclxuXHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0Ly8gTW9iaWxlOiBzaG93IHRvb2x0aXAgb24gbG9uZyBwcmVzc1xyXG5cdFx0XHRcdGlmIChQbGF0Zm9ybS5pc1Bob25lKSB7XHJcblx0XHRcdFx0XHRpY29uRWwuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdG5hdmlnYXRvci52aWJyYXRlPy4oMTAwKTtcclxuXHRcdFx0XHRcdFx0Ly8gVG9vbHRpcCBpcyBhbHJlYWR5IHNldCBhYm92ZVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBVc2UgYW4gaW52aXNpYmxlIGJ1dHRvbiB0byBwcmVzZXJ2ZSBoZWlnaHQgaWYgbm8gcmVzdWx0c1xyXG5cdFx0aWYgKHRoaXMuc2VhcmNoUmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0dGhpcy5zZWFyY2hSZXN1bHRzU2V0dGluZy5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzc2VzKFsnaWNvbmljLWludmlzaWJsZScsICdpY29uaWMtc2VhcmNoLXJlc3VsdCddKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBGb3JtYXQgaWNvbiBJRCBpbnRvIHJlYWRhYmxlIG5hbWVcclxuXHQgKi9cclxuXHRwcml2YXRlIGZvcm1hdEljb25OYW1lKGljb25JZDogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdC8vIFJlbW92ZSBsdWNpZGUtIHByZWZpeCBpZiBwcmVzZW50XHJcblx0XHRsZXQgbmFtZSA9IGljb25JZC5yZXBsYWNlKC9ebHVjaWRlLS8sICcnKTtcclxuXHRcdC8vIFJlcGxhY2UgZGFzaGVzIHdpdGggc3BhY2VzXHJcblx0XHRuYW1lID0gbmFtZS5yZXBsYWNlKC8tL2csICcgJyk7XHJcblx0XHQvLyBDYXBpdGFsaXplIGZpcnN0IGxldHRlciBvZiBlYWNoIHdvcmRcclxuXHRcdHJldHVybiBuYW1lLnNwbGl0KCcgJykubWFwKHdvcmQgPT4gXHJcblx0XHRcdHdvcmQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB3b3JkLnNsaWNlKDEpXHJcblx0XHQpLmpvaW4oJyAnKTtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKTogdm9pZCB7XHJcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIEhvbWUgQmFzZSBTZXJ2aWNlXHJcbiAqIENvcmUgbG9naWMgZm9yIG9wZW5pbmcgYW5kIG1hbmFnaW5nIHRoZSBob21lIGJhc2UgZmlsZVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIFdvcmtzcGFjZUxlYWYsIE1hcmtkb3duVmlldywgUGxhdGZvcm0sIFZpZXcgYXMgT1ZpZXcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB0eXBlIEhvbWVCYXNlUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgeyBIb21lQmFzZVR5cGUsIE9wZW5pbmdNb2RlIH0gZnJvbSAnLi4vc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBnZXRGaWxlQnlQYXRoLCBpc01hcmtkb3duTGlrZSwgbGVhZkhhc0ZpbGUsIGlzU3VwcG9ydGVkRXh0ZW5zaW9uLCBwYXRoc0VxdWFsIH0gZnJvbSAnLi4vdXRpbHMvZmlsZS11dGlscyc7XHJcbmltcG9ydCB7IGV4ZWN1dGVDb21tYW5kIH0gZnJvbSAnLi4vdWkvY29tbWFuZC1zdWdnZXN0JztcclxuaW1wb3J0IHsgY29tcHV0ZUhvbWVCYXNlUGF0aCwgdHJpbUZpbGUgfSBmcm9tICcuLi91dGlscy9ob21lYmFzZS1yZXNvbHZlcic7XHJcblxyXG4vKipcclxuICogVmlldyB0eXBlcyB0aGF0IGNhbiBiZSBob21lIGJhc2UgZmlsZXNcclxuICovXHJcbmNvbnN0IExFQUZfVFlQRVMgPSBbJ21hcmtkb3duJywgJ2NhbnZhcycsICdiYXNlcyddO1xyXG5cclxuLyoqXHJcbiAqIEhlbHBlciB0byBjaGVjayBpZiB0d28gZmlsZSBwYXRocyBhcmUgZXF1YWwgKGNhc2UtaW5zZW5zaXRpdmUsIGlnbm9yaW5nIGV4dGVuc2lvbilcclxuICovXHJcbmZ1bmN0aW9uIGVxdWFsc0Nhc2VsZXNzKHBhdGgxOiBzdHJpbmcsIHBhdGgyOiBzdHJpbmcpOiBib29sZWFuIHtcclxuXHRjb25zdCBub3JtYWxpemUgPSAocDogc3RyaW5nKSA9PiBwLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFwubWQkLywgJycpO1xyXG5cdHJldHVybiBub3JtYWxpemUocGF0aDEpID09PSBub3JtYWxpemUocGF0aDIpO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgSG9tZUJhc2VTZXJ2aWNlIHtcclxuXHRwcml2YXRlIGFwcDogQXBwO1xyXG5cdHByaXZhdGUgcGx1Z2luOiBIb21lQmFzZVBsdWdpbjtcclxuXHRwcml2YXRlIGdob3N0TGVhdmVzOiBXZWFrU2V0PFdvcmtzcGFjZUxlYWY+ID0gbmV3IFdlYWtTZXQoKTtcclxuXHJcblx0Y29uc3RydWN0b3IocGx1Z2luOiBIb21lQmFzZVBsdWdpbikge1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0XHR0aGlzLmFwcCA9IHBsdWdpbi5hcHA7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBPcGVuIGhvbWUgYmFzZSB3aXRoIGEgc3BlY2lmaWMgbW9kZSAoZm9yIHN0YXJ0dXAvbWFudWFsIG9wZW5zKVxyXG5cdCAqL1xyXG5cdGFzeW5jIG9wZW5Ib21lQmFzZVdpdGhNb2RlKG1vZGU6IE9wZW5pbmdNb2RlLCBydW5Db21tYW5kOiBib29sZWFuID0gdHJ1ZSk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMucGx1Z2luLmdldEhvbWVCYXNlU2V0dGluZ3MoKTtcclxuXHRcdFxyXG5cdFx0Ly8gSGFuZGxlIG5vbi1maWxlIHR5cGVzIChXb3Jrc3BhY2UsIEdyYXBoLCBOb25lKVxyXG5cdFx0aWYgKGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5vcGVuV29ya3NwYWNlKGhvbWVCYXNlU2V0dGluZ3MudmFsdWUpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLkdyYXBoKSB7XHJcblx0XHRcdC8vIEdyYXBoIHZpZXc6IGp1c3Qgb3BlbiBpdCAobm8gZ2hvc3QgdGFiIHN1cHBvcnQgZHVlIHRvIHVucmVsaWFibGUgZGV0ZWN0aW9uKVxyXG5cdFx0XHRyZXR1cm4gdGhpcy5vcGVuR3JhcGgoKTtcclxuXHRcdH1cclxuXHRcdGlmIChob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5Ob25lKSB7XHJcblx0XHRcdC8vIEp1c3QgcnVuIGNvbW1hbmQsIGRvbid0IG9wZW4gYW55dGhpbmdcclxuXHRcdFx0aWYgKHJ1bkNvbW1hbmQpIHtcclxuXHRcdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBSZXNvbHZlIHRoZSBhY3R1YWwgZmlsZSBwYXRoIGJhc2VkIG9uIHR5cGVcclxuXHRcdGNvbnN0IHJlc29sdmVkUGF0aCA9IGF3YWl0IGNvbXB1dGVIb21lQmFzZVBhdGgoXHJcblx0XHRcdGhvbWVCYXNlU2V0dGluZ3MudHlwZSxcclxuXHRcdFx0aG9tZUJhc2VTZXR0aW5ncy52YWx1ZSxcclxuXHRcdFx0dGhpcy5wbHVnaW5cclxuXHRcdCk7XHJcblx0XHRcclxuXHRcdGlmICghcmVzb2x2ZWRQYXRoKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBHZXQgdGhlIGZpbGUgLSB1c2UgbWV0YWRhdGFDYWNoZSBmb3IgYmV0dGVyIHBhdGggcmVzb2x1dGlvbiAobGlrZSBob21lcGFnZSBwbHVnaW4pXHJcblx0XHRsZXQgZmlsZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QocmVzb2x2ZWRQYXRoLCAnLycpO1xyXG5cdFx0XHJcblx0XHQvLyBJZiBub3QgZm91bmQgYW5kIGF1dG8tY3JlYXRlIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgdHlwZSwgcmV0dXJuXHJcblx0XHQvLyBGb3Igbm93LCB3ZSdsbCB0cnkgZ2V0RmlsZUJ5UGF0aCBhcyBmYWxsYmFja1xyXG5cdFx0aWYgKCFmaWxlKSB7XHJcblx0XHRcdGZpbGUgPSBnZXRGaWxlQnlQYXRoKHRoaXMuYXBwLCByZXNvbHZlZFBhdGgpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoIWZpbGUpIHtcclxuXHRcdFx0Ly8gVHJ5IHRvIGNyZWF0ZSBpZiBpdCdzIGEgbWFya2Rvd24gZmlsZSBhbmQgcGF0aCBkb2Vzbid0IGhhdmUgZXh0ZW5zaW9uXHJcblx0XHRcdGNvbnN0IHVudHJpbW1lZFBhdGggPSByZXNvbHZlZFBhdGguZW5kc1dpdGgoJy5tZCcpID8gcmVzb2x2ZWRQYXRoIDogYCR7cmVzb2x2ZWRQYXRofS5tZGA7XHJcblx0XHRcdGZpbGUgPSBnZXRGaWxlQnlQYXRoKHRoaXMuYXBwLCB1bnRyaW1tZWRQYXRoKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmICghZmlsZSAmJiBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XHJcblx0XHRcdFx0Ly8gQ291bGQgY3JlYXRlIGZpbGUgaGVyZSBpZiBhdXRvQ3JlYXRlIHNldHRpbmcgZXhpc3RzLCBidXQgZm9yIG5vdyBqdXN0IHJldHVyblxyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoIWZpbGUpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEhhbmRsZSBvcGVuaW5nIG1vZGVcclxuXHRcdGlmIChtb2RlID09PSAncmVwbGFjZS1hbGwnKSB7XHJcblx0XHRcdGF3YWl0IHRoaXMuZGV0YWNoQWxsTGVhdmVzKCk7XHJcblx0XHR9IGVsc2UgaWYgKG1vZGUgPT09ICdyZXBsYWNlLWxhc3QnKSB7XHJcblx0XHRcdC8vIFJlcGxhY2UgdGhlIGFjdGl2ZSBsZWFmIChjbG9zZSBpdCBhbmQgb3BlbiBob21lIGJhc2UgaW4gaXRzIHBsYWNlKVxyXG5cdFx0XHRjb25zdCBhY3RpdmVMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoT1ZpZXcpPy5sZWFmO1xyXG5cdFx0XHRpZiAoYWN0aXZlTGVhZikge1xyXG5cdFx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGFjdGl2ZUxlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRcdFx0Ly8gT25seSBjbG9zZSBpZiBub3QgcGlubmVkXHJcblx0XHRcdFx0aWYgKHZpZXdTdGF0ZS5waW5uZWQgIT09IHRydWUpIHtcclxuXHRcdFx0XHRcdHZvaWQgYWN0aXZlTGVhZi5kZXRhY2goKTtcclxuXHRcdFx0XHRcdC8vIFdhaXQgYSBiaXQgZm9yIGRldGFjaG1lbnRcclxuXHRcdFx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBmb3IgZXhpc3RpbmcgbGVhZiAoYnV0IGV4Y2x1ZGUgZ2hvc3QgdGFiIGZvciBtYW51YWwgb3BlbnMpXHJcblx0XHRjb25zdCBleGlzdGluZ0xlYWYgPSB0aGlzLmZpbmRFeGlzdGluZ0hvbWVCYXNlTGVhZihmaWxlKTtcclxuXHRcdGlmIChleGlzdGluZ0xlYWYgJiYgbW9kZSAhPT0gJ3JlcGxhY2UtYWxsJykge1xyXG5cdFx0XHQvLyBGb3IgcmVwbGFjZS1sYXN0LCB3ZSBzdGlsbCB3YW50IHRvIHJldXNlIGV4aXN0aW5nIGlmIGZvdW5kIChhZnRlciBjbG9zaW5nIGFjdGl2ZSlcclxuXHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gZXhpc3RpbmdMZWFmLmdldFZpZXdTdGF0ZSgpO1xyXG5cdFx0XHRpZiAodmlld1N0YXRlLnBpbm5lZCA9PT0gdHJ1ZSAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHtcclxuXHRcdFx0XHQvLyBEb24ndCB1c2UgZ2hvc3QgdGFiIGZvciBtYW51YWwgb3BlbnMgLSB3aWxsIGNyZWF0ZSBuZXcgdGFiIGJlbG93XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYoZXhpc3RpbmdMZWFmKTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLmNvbmZpZ3VyZVZpZXcoZXhpc3RpbmdMZWFmLCBmaWxlKTtcclxuXHRcdFx0XHRpZiAocnVuQ29tbWFuZCkge1xyXG5cdFx0XHRcdFx0dGhpcy5ydW5Db21tYW5kT25PcGVuKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gT3BlbiBpbiBuZXcgbGVhZlxyXG5cdFx0Y29uc3QgbmV3TGVhZiA9IG1vZGUgPT09ICdyZXRhaW4nIFxyXG5cdFx0XHQ/IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd0YWInKVxyXG5cdFx0XHQ6IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKTtcclxuXHRcdFxyXG5cdFx0aWYgKCFuZXdMZWFmKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdGF3YWl0IG5ld0xlYWYub3BlbkZpbGUoZmlsZSk7XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uuc2V0QWN0aXZlTGVhZihuZXdMZWFmKTtcclxuXHRcdGF3YWl0IHRoaXMuY29uZmlndXJlVmlldyhuZXdMZWFmLCBmaWxlKTtcclxuXHJcblx0XHRpZiAocnVuQ29tbWFuZCkge1xyXG5cdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE9wZW4gd29ya3NwYWNlXHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyBvcGVuV29ya3NwYWNlKHdvcmtzcGFjZU5hbWU6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0IFxyXG5cdFx0Y29uc3Qgd29ya3NwYWNlUGx1Z2luID0gdGhpcy5hcHAuaW50ZXJuYWxQbHVnaW5zPy5wbHVnaW5zPy53b3Jrc3BhY2VzO1xyXG5cdFx0IFxyXG5cdFx0aWYgKCF3b3Jrc3BhY2VQbHVnaW4/LmVuYWJsZWQgfHwgIXdvcmtzcGFjZVBsdWdpbi5pbnN0YW5jZT8ubG9hZFdvcmtzcGFjZSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHQgXHJcblx0XHR3b3Jrc3BhY2VQbHVnaW4uaW5zdGFuY2UubG9hZFdvcmtzcGFjZSh3b3Jrc3BhY2VOYW1lKTtcclxuXHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogT3BlbiBncmFwaCB2aWV3XHJcblx0ICovXHJcblx0YXN5bmMgb3BlbkdyYXBoKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0IFxyXG5cdFx0YXdhaXQgdGhpcy5hcHAuY29tbWFuZHM/LmV4ZWN1dGVDb21tYW5kQnlJZD8uKCdncmFwaDpvcGVuJyk7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE9wZW4gZ3JhcGggdmlldyBpbiBnaG9zdCB0YWJcclxuXHQgKiBERVBSRUNBVEVEOiBHcmFwaCB2aWV3IGdob3N0IHRhYiBkZXRlY3Rpb24gaXMgdW5yZWxpYWJsZSwgc28gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxyXG5cdCAqIEdyYXBoIHZpZXdzIG5vdyBqdXN0IG9wZW4gbm9ybWFsbHkgbGlrZSByYW5kb20gZmlsZXNcclxuXHQgKi9cclxuXHRwcml2YXRlIGFzeW5jIG9wZW5HcmFwaEluR2hvc3RUYWIocnVuQ29tbWFuZDogYm9vbGVhbik6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0Ly8gQ2hlY2sgaWYgc2V0dGluZ3MgbW9kYWwgaXMgb3BlblxyXG5cdFx0aWYgKHRoaXMuaXNTZXR0aW5nc01vZGFsT3BlbigpKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBpZiBnaG9zdCB0YWIgYWxyZWFkeSBleGlzdHMgKHBpbm5lZCBncmFwaCB2aWV3KVxyXG5cdFx0Ly8gVXNlIHRoZSBzYW1lIGFwcHJvYWNoIGFzIGZpbGUtYmFzZWQgdGFiczogZmluZCBpdCBlYWNoIHRpbWVcclxuXHRcdC8vIFRyeSBnZXRMZWF2ZXNPZlR5cGUgZmlyc3QsIHRoZW4gaXRlcmF0ZUFsbExlYXZlcyBhcyBmYWxsYmFja1xyXG5cdFx0bGV0IGdyYXBoTGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZ3JhcGgnKTtcclxuXHRcdFxyXG5cdFx0Ly8gSWYgZ2V0TGVhdmVzT2ZUeXBlIGRvZXNuJ3Qgd29yayAocmV0dXJucyAwKSwgdXNlIGl0ZXJhdGVBbGxMZWF2ZXNcclxuXHRcdGlmIChncmFwaExlYXZlcy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0Z3JhcGhMZWF2ZXMgPSBbXTtcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcclxuXHRcdFx0XHRcdGlmICh2aWV3U3RhdGUudHlwZSA9PT0gJ2dyYXBoJykge1xyXG5cdFx0XHRcdFx0XHRncmFwaExlYXZlcy5wdXNoKGxlYWYpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0Ly8gTGVhZiBtaWdodCBiZSBkZXRhY2hlZCwgc2tpcCBpdFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdFxyXG5cdFx0Ly8gSWYgdGhlcmUncyBleGFjdGx5IG9uZSBncmFwaCB2aWV3LCB1c2UgaXQgYXMgdGhlIGdob3N0IHRhYlxyXG5cdFx0Ly8gKHNpbmNlIHdlIHNob3VsZCBvbmx5IGhhdmUgb25lIGdob3N0IHRhYiBhdCBhIHRpbWUpXHJcblx0XHRsZXQgZ2hvc3RUYWI6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcclxuXHRcdFxyXG5cdFx0aWYgKGdyYXBoTGVhdmVzLmxlbmd0aCA9PT0gMSkge1xyXG5cdFx0XHQvLyBPbmx5IG9uZSBncmFwaCB2aWV3IGV4aXN0cyAtIHRoaXMgaXMgb3VyIGdob3N0IHRhYlxyXG5cdFx0XHRnaG9zdFRhYiA9IGdyYXBoTGVhdmVzWzBdIHx8IG51bGw7XHJcblx0XHR9IGVsc2UgaWYgKGdyYXBoTGVhdmVzLmxlbmd0aCA+IDEpIHtcclxuXHRcdFx0Ly8gTXVsdGlwbGUgZ3JhcGggdmlld3MgLSBmaW5kIHRoZSBwaW5uZWQgb25lXHJcblx0XHRcdGZvciAoY29uc3QgbGVhZiBvZiBncmFwaExlYXZlcykge1xyXG5cdFx0XHRcdGlmICghbGVhZikgY29udGludWU7XHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRcdFx0XHRpZiAodmlld1N0YXRlLnBpbm5lZCA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRcdFx0XHRnaG9zdFRhYiA9IGxlYWY7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0Ly8gTGVhZiBtaWdodCBiZSBkZXRhY2hlZCwgc2tpcCBpdFxyXG5cdFx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBJZiBubyBwaW5uZWQgb25lIGZvdW5kLCB1c2UgdGhlIGZpcnN0IG9uZSAoc2hvdWxkbid0IGhhcHBlbiwgYnV0IGZhbGxiYWNrKVxyXG5cdFx0XHRpZiAoIWdob3N0VGFiICYmIGdyYXBoTGVhdmVzWzBdKSB7XHJcblx0XHRcdFx0Z2hvc3RUYWIgPSBncmFwaExlYXZlc1swXSB8fCBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmIChnaG9zdFRhYikge1xyXG5cdFx0XHQvLyBHaG9zdCB0YWIgZXhpc3RzIC0gY2xvc2UgQUxMIG90aGVyIGdyYXBoIHZpZXdzIChwaW5uZWQgb3Igbm90KSwgdGhlbiBmb2N1cyBnaG9zdCB0YWJcclxuXHRcdFx0Ly8gRmluZCBhbGwgZ3JhcGggbGVhdmVzIGFnYWluIHRvIGdldCB0aGUgY3VycmVudCBsaXN0XHJcblx0XHRcdGNvbnN0IGFsbEdyYXBoTGVhdmVzRm9yQ2xlYW51cDogV29ya3NwYWNlTGVhZltdID0gW107XHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcclxuXHRcdFx0XHRpZiAodmlld1N0YXRlLnR5cGUgPT09ICdncmFwaCcpIHtcclxuXHRcdFx0XHRcdGFsbEdyYXBoTGVhdmVzRm9yQ2xlYW51cC5wdXNoKGxlYWYpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdGNvbnN0IG90aGVyR3JhcGhMZWF2ZXMgPSBhbGxHcmFwaExlYXZlc0ZvckNsZWFudXAuZmlsdGVyKGxlYWYgPT4gbGVhZiAhPT0gZ2hvc3RUYWIpO1xyXG5cdFx0XHRcclxuXHRcdFx0Zm9yIChjb25zdCBsZWFmIG9mIG90aGVyR3JhcGhMZWF2ZXMpIHtcclxuXHRcdFx0XHR2b2lkIGxlYWYuZGV0YWNoKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFdhaXQgZm9yIGRldGFjaG1lbnRzIHRvIGNvbXBsZXRlXHJcblx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxNTApKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIERvdWJsZS1jaGVjayAtIG1ha2Ugc3VyZSBubyBvdGhlciBncmFwaCB2aWV3cyBleGlzdFxyXG5cdFx0XHQvLyBVc2UgaXRlcmF0ZUFsbExlYXZlcyBpbnN0ZWFkIG9mIGdldExlYXZlc09mVHlwZSBmb3IgZ3JhcGggdmlld3NcclxuXHRcdFx0Y29uc3QgcmVtYWluaW5nR3JhcGhMZWF2ZXM6IFdvcmtzcGFjZUxlYWZbXSA9IFtdO1xyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRcdFx0aWYgKHZpZXdTdGF0ZS50eXBlID09PSAnZ3JhcGgnKSB7XHJcblx0XHRcdFx0XHRyZW1haW5pbmdHcmFwaExlYXZlcy5wdXNoKGxlYWYpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdGlmIChyZW1haW5pbmdHcmFwaExlYXZlcy5sZW5ndGggPiAxKSB7XHJcblx0XHRcdFx0Ly8gU3RpbGwgaGF2ZSBkdXBsaWNhdGVzLCBjbG9zZSBhbGwgZXhjZXB0IGdob3N0IHRhYlxyXG5cdFx0XHRcdGZvciAoY29uc3QgbGVhZiBvZiByZW1haW5pbmdHcmFwaExlYXZlcykge1xyXG5cdFx0XHRcdFx0aWYgKGxlYWYgIT09IGdob3N0VGFiKSB7XHJcblx0XHRcdFx0XHRcdHZvaWQgbGVhZi5kZXRhY2goKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMCkpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBzaG91bGRGb2N1cyA9ICF0aGlzLmlzU2V0dGluZ3NNb2RhbE9wZW4oKTtcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYoZ2hvc3RUYWIsIHsgZm9jdXM6IHNob3VsZEZvY3VzIH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHJ1bkNvbW1hbmQpIHtcclxuXHRcdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBObyBnaG9zdCB0YWIgZXhpc3RzIC0gY2xvc2UgQUxMIGV4aXN0aW5nIGdyYXBoIHZpZXdzIGZpcnN0XHJcblx0XHQvLyBGaW5kIGFsbCBncmFwaCBsZWF2ZXNcclxuXHRcdGNvbnN0IGFsbEV4aXN0aW5nR3JhcGhMZWF2ZXM6IFdvcmtzcGFjZUxlYWZbXSA9IFtdO1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcclxuXHRcdFx0aWYgKHZpZXdTdGF0ZS50eXBlID09PSAnZ3JhcGgnKSB7XHJcblx0XHRcdFx0YWxsRXhpc3RpbmdHcmFwaExlYXZlcy5wdXNoKGxlYWYpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdGZvciAoY29uc3QgbGVhZiBvZiBhbGxFeGlzdGluZ0dyYXBoTGVhdmVzKSB7XHJcblx0XHRcdHZvaWQgbGVhZi5kZXRhY2goKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gV2FpdCBmb3IgZGV0YWNobWVudHMgdG8gY29tcGxldGVcclxuXHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcclxuXHJcblx0XHQvLyBDaGVjayBpZiB0aGVyZSdzIGFscmVhZHkgYSBncmFwaCB2aWV3IChtaWdodCBoYXZlIGJlZW4gb3BlbmVkIGJ5IGFub3RoZXIgYWN0aW9uKVxyXG5cdFx0Ly8gVXNlIGl0ZXJhdGVBbGxMZWF2ZXMgaW5zdGVhZCBvZiBnZXRMZWF2ZXNPZlR5cGUgZm9yIGdyYXBoIHZpZXdzIChnZXRMZWF2ZXNPZlR5cGUgZG9lc24ndCB3b3JrIGZvciBncmFwaClcclxuXHRcdGxldCBleGlzdGluZ0dyYXBoTGVhdmVzOiBXb3Jrc3BhY2VMZWFmW10gPSBbXTtcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRcdGlmICh2aWV3U3RhdGUudHlwZSA9PT0gJ2dyYXBoJykge1xyXG5cdFx0XHRcdGV4aXN0aW5nR3JhcGhMZWF2ZXMucHVzaChsZWFmKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdGxldCBuZXdHaG9zdFRhYjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xyXG5cdFx0XHJcblx0XHRpZiAoZXhpc3RpbmdHcmFwaExlYXZlcy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdC8vIFVzZSB0aGUgZmlyc3QgZXhpc3RpbmcgZ3JhcGggdmlld1xyXG5cdFx0XHRuZXdHaG9zdFRhYiA9IGV4aXN0aW5nR3JhcGhMZWF2ZXNbMF0gfHwgbnVsbDtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIE5vIGV4aXN0aW5nIGdyYXBoIHZpZXcsIG9wZW4gYSBuZXcgb25lXHJcblx0XHRcdFxyXG5cdFx0XHQvLyBPcGVuIGdyYXBoIHZpZXcgaW4gYSBuZXcgbGVhZiBkaXJlY3RseSBpbnN0ZWFkIG9mIHVzaW5nIHRoZSBjb21tYW5kXHJcblx0XHRcdC8vIFRoZSBjb21tYW5kIG1pZ2h0IGNsb3NlIGV4aXN0aW5nIHZpZXdzXHJcblx0XHRcdGNvbnN0IG5ld0xlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigndGFiJyk7XHJcblx0XHRcdGlmIChuZXdMZWFmKSB7XHJcblx0XHRcdFx0YXdhaXQgbmV3TGVhZi5zZXRWaWV3U3RhdGUoe1xyXG5cdFx0XHRcdFx0dHlwZTogJ2dyYXBoJyxcclxuXHRcdFx0XHRcdHN0YXRlOiB7fSxcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBXYWl0IGZvciBncmFwaCB0byBpbml0aWFsaXplXHJcblx0XHRcdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDIwMCkpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdG5ld0dob3N0VGFiID0gbmV3TGVhZjtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBGYWxsYmFjayB0byBjb21tYW5kIGlmIHdlIGNhbid0IGNyZWF0ZSBsZWFmXHJcblx0XHRcdFx0YXdhaXQgdGhpcy5vcGVuR3JhcGgoKTtcclxuXHRcdFx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMzAwKSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0ZXhpc3RpbmdHcmFwaExlYXZlcyA9IFtdO1xyXG5cdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCB2aWV3U3RhdGUgPSBsZWFmLmdldFZpZXdTdGF0ZSgpO1xyXG5cdFx0XHRcdFx0aWYgKHZpZXdTdGF0ZS50eXBlID09PSAnZ3JhcGgnKSB7XHJcblx0XHRcdFx0XHRcdGV4aXN0aW5nR3JhcGhMZWF2ZXMucHVzaChsZWFmKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoZXhpc3RpbmdHcmFwaExlYXZlcy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHRuZXdHaG9zdFRhYiA9IGV4aXN0aW5nR3JhcGhMZWF2ZXNbMF0gfHwgbnVsbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKG5ld0dob3N0VGFiKSB7XHJcblx0XHRcdG5ld0dob3N0VGFiLnNldFBpbm5lZCh0cnVlKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIENsb3NlIGFueSBvdGhlciBncmFwaCB2aWV3cyB0aGF0IG1pZ2h0IGhhdmUgYmVlbiBjcmVhdGVkXHJcblx0XHRcdC8vIFVzZSBpdGVyYXRlQWxsTGVhdmVzIHRvIGZpbmQgYWxsIGdyYXBoIHZpZXdzXHJcblx0XHRcdGNvbnN0IGFsbEdyYXBoTGVhdmVzOiBXb3Jrc3BhY2VMZWFmW10gPSBbXTtcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0XHRjb25zdCB2aWV3U3RhdGUgPSBsZWFmLmdldFZpZXdTdGF0ZSgpO1xyXG5cdFx0XHRcdGlmICh2aWV3U3RhdGUudHlwZSA9PT0gJ2dyYXBoJykge1xyXG5cdFx0XHRcdFx0YWxsR3JhcGhMZWF2ZXMucHVzaChsZWFmKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Zm9yIChjb25zdCBsZWFmIG9mIGFsbEdyYXBoTGVhdmVzKSB7XHJcblx0XHRcdFx0aWYgKGxlYWYgIT09IG5ld0dob3N0VGFiKSB7XHJcblx0XHRcdFx0XHR2b2lkIGxlYWYuZGV0YWNoKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBXYWl0IGZvciBjbGVhbnVwXHJcblx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IHNob3VsZEZvY3VzID0gIXRoaXMuaXNTZXR0aW5nc01vZGFsT3BlbigpO1xyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uuc2V0QWN0aXZlTGVhZihuZXdHaG9zdFRhYiwgeyBmb2N1czogc2hvdWxkRm9jdXMgfSk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAocnVuQ29tbWFuZCkge1xyXG5cdFx0XHRcdHRoaXMucnVuQ29tbWFuZE9uT3BlbigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE9wZW4gdGhlIGhvbWUgYmFzZSBmaWxlXHJcblx0ICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyBmb3Igb3BlbmluZ1xyXG5cdCAqL1xyXG5cdGFzeW5jIG9wZW5Ib21lQmFzZShvcHRpb25zOiB7XHJcblx0XHRyZXBsYWNlQWN0aXZlTGVhZj86IGJvb2xlYW47XHJcblx0XHRydW5Db21tYW5kPzogYm9vbGVhbjtcclxuXHR9ID0ge30pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRcdGNvbnN0IHsgcnVuQ29tbWFuZCA9IHRydWUgfSA9IG9wdGlvbnM7XHJcblx0XHRjb25zdCBtb2RlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubWFudWFsT3Blbk1vZGU7XHJcblx0XHRcclxuXHRcdFxyXG5cdFx0Ly8gVXNlIHRoZSBuZXcgbWV0aG9kIHdpdGggbWFudWFsIG1vZGVcclxuXHRcdHJldHVybiB0aGlzLm9wZW5Ib21lQmFzZVdpdGhNb2RlKG1vZGUsIHJ1bkNvbW1hbmQpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogT3BlbiBob21lIGJhc2UgaW4gYW4gZW1wdHkgbGVhZiAoZm9yIG5ldyB0YWIgcmVwbGFjZW1lbnQpXHJcblx0ICovXHJcblx0YXN5bmMgb3BlbkluTGVhZihsZWFmOiBXb3Jrc3BhY2VMZWFmKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHRjb25zdCBob21lQmFzZVNldHRpbmdzID0gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xyXG5cdFx0cmV0dXJuIHRoaXMub3BlbkluTGVhZldpdGhTZXR0aW5ncyhsZWFmLCBob21lQmFzZVNldHRpbmdzKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE9wZW4gYSBmaWxlIGluIGFuIGVtcHR5IGxlYWYgd2l0aCBjdXN0b20gc2V0dGluZ3NcclxuXHQgKiBAcGFyYW0gbGVhZiBUaGUgbGVhZiB0byBvcGVuIHRoZSBmaWxlIGluXHJcblx0ICogQHBhcmFtIHNldHRpbmdzIFNldHRpbmdzIG9iamVjdCB3aXRoIHR5cGUgYW5kIHZhbHVlXHJcblx0ICogQHBhcmFtIGlzTmV3VGFiIFdoZXRoZXIgdGhpcyBpcyBmb3IgbmV3IHRhYiByZXBsYWNlbWVudCAoc2tpcHMgcGlubmluZy9naG9zdCB0YWIgbG9naWMpXHJcblx0ICovXHJcblx0YXN5bmMgb3BlbkluTGVhZldpdGhTZXR0aW5ncyhsZWFmOiBXb3Jrc3BhY2VMZWFmLCBzZXR0aW5nczogeyB0eXBlOiBIb21lQmFzZVR5cGU7IHZhbHVlOiBzdHJpbmcgfSwgaXNOZXdUYWI6IGJvb2xlYW4gPSBmYWxzZSk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0Ly8gSGFuZGxlIG5vbi1maWxlIHR5cGVzXHJcblx0XHRpZiAoc2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSkge1xyXG5cdFx0XHRhd2FpdCB0aGlzLm9wZW5Xb3Jrc3BhY2Uoc2V0dGluZ3MudmFsdWUpO1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdGlmIChzZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuR3JhcGgpIHtcclxuXHRcdFx0YXdhaXQgdGhpcy5vcGVuR3JhcGgoKTtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblx0XHRpZiAoc2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLk5vbmUpIHtcclxuXHRcdFx0dGhpcy5ydW5Db21tYW5kT25PcGVuKCk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFJlc29sdmUgdGhlIGFjdHVhbCBmaWxlIHBhdGggYmFzZWQgb24gdHlwZVxyXG5cdFx0Y29uc3QgcmVzb2x2ZWRQYXRoID0gYXdhaXQgY29tcHV0ZUhvbWVCYXNlUGF0aChcclxuXHRcdFx0c2V0dGluZ3MudHlwZSxcclxuXHRcdFx0c2V0dGluZ3MudmFsdWUsXHJcblx0XHRcdHRoaXMucGx1Z2luXHJcblx0XHQpO1xyXG5cdFx0XHJcblx0XHRpZiAoIXJlc29sdmVkUGF0aCkge1xyXG5cdFx0XHQvLyBMb2cgd2FybmluZyBmb3IgZGVidWdnaW5nIC0gZmlsZSBwYXRoIGNvdWxkbid0IGJlIHJlc29sdmVkXHJcblx0XHRcdGNvbnNvbGUud2FybignW0hvbWUgQmFzZV0gQ291bGQgbm90IHJlc29sdmUgcGF0aCBmb3IgbmV3IHRhYjonLCBzZXR0aW5ncy50eXBlLCBzZXR0aW5ncy52YWx1ZSk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBHZXQgdGhlIGZpbGUgLSB1c2UgbWV0YWRhdGFDYWNoZSBmb3IgYmV0dGVyIHBhdGggcmVzb2x1dGlvbiAobGlrZSBob21lcGFnZSBwbHVnaW4pXHJcblx0XHQvLyBUaGlzIGlzIGVzcGVjaWFsbHkgaW1wb3J0YW50IGZvciBwZXJpb2RpYyBub3RlcyB3aGljaCBtYXkgaGF2ZSBiZWVuIGp1c3QgY3JlYXRlZFxyXG5cdFx0bGV0IGZpbGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHJlc29sdmVkUGF0aCwgJy8nKTtcclxuXHRcdFxyXG5cdFx0Ly8gSWYgbm90IGZvdW5kLCB0cnkgZ2V0RmlsZUJ5UGF0aCBhcyBmYWxsYmFja1xyXG5cdFx0aWYgKCFmaWxlKSB7XHJcblx0XHRcdGZpbGUgPSBnZXRGaWxlQnlQYXRoKHRoaXMuYXBwLCByZXNvbHZlZFBhdGgpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBGb3IgcGVyaW9kaWMgbm90ZXMsIHRoZSBwYXRoIG1pZ2h0IGJlIHRyaW1tZWQgKG5vIGV4dGVuc2lvbilcclxuXHRcdC8vIFRyeSB3aXRoIC5tZCBleHRlbnNpb24gaWYgc3RpbGwgbm90IGZvdW5kXHJcblx0XHRpZiAoIWZpbGUgJiYgIXJlc29sdmVkUGF0aC5lbmRzV2l0aCgnLm1kJykgJiYgIXJlc29sdmVkUGF0aC5lbmRzV2l0aCgnLmNhbnZhcycpICYmICFyZXNvbHZlZFBhdGguZW5kc1dpdGgoJy5iYXNlJykpIHtcclxuXHRcdFx0Y29uc3QgdW50cmltbWVkUGF0aCA9IGAke3Jlc29sdmVkUGF0aH0ubWRgO1xyXG5cdFx0XHRmaWxlID0gZ2V0RmlsZUJ5UGF0aCh0aGlzLmFwcCwgdW50cmltbWVkUGF0aCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmICghZmlsZSkge1xyXG5cdFx0XHQvLyBMb2cgd2FybmluZyBmb3IgZGVidWdnaW5nIC0gZmlsZSBub3QgZm91bmRcclxuXHRcdFx0Y29uc29sZS53YXJuKCdbSG9tZSBCYXNlXSBGaWxlIG5vdCBmb3VuZCBmb3IgbmV3IHRhYjonLCByZXNvbHZlZFBhdGgpO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRm9yIG5ldyB0YWIgcmVwbGFjZW1lbnQ6IGp1c3Qgb3BlbiB0aGUgZmlsZSwgbm8gcGlubmluZywgbm8gZ2hvc3QgdGFiIGxvZ2ljXHJcblx0XHQvLyBNdWx0aXBsZSB0YWJzIHdpdGggdGhlIHNhbWUgZmlsZSBhcmUgZmluZVxyXG5cdFx0Ly8gQ1JJVElDQUw6IFdoZW4gaXNOZXdUYWI9dHJ1ZSwgY29tcGxldGVseSBieXBhc3MgQUxMIGdob3N0IHRhYiBsb2dpY1xyXG5cdFx0aWYgKGlzTmV3VGFiKSB7XHJcblx0XHRcdGNvbnNvbGUuZGVidWcoJ1tIb21lIEJhc2VdIG9wZW5JbkxlYWZXaXRoU2V0dGluZ3M6IGlzTmV3VGFiPXRydWUsIGJ5cGFzc2luZyBnaG9zdCB0YWIgbG9naWMnLCB7XHJcblx0XHRcdFx0ZmlsZTogZmlsZS5wYXRoLFxyXG5cdFx0XHRcdHNldHRpbmdzOiBzZXR0aW5nc1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0YXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcclxuXHRcdFx0YXdhaXQgdGhpcy5jb25maWd1cmVWaWV3KGxlYWYsIGZpbGUpO1xyXG5cdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRm9yIGhvbWUgYmFzZTogdXNlIGdob3N0IHRhYi9waW5uaW5nIGxvZ2ljIChleGlzdGluZyBiZWhhdmlvcilcclxuXHRcdC8vIElmIHN0aWNreSBpY29uIGlzIGVuYWJsZWQgQU5EIHRoaXMgaXMgYSB0cnVseSBlbXB0eSB0YWIgKG5vdCBhIGZpbGUgb3BlbmVkIGZyb20gZXhwbG9yZXIpLFxyXG5cdFx0Ly8gY2hlY2sgaWYgdGhlcmUncyBhIGdob3N0IHRhYiBhbmQgbWVyZ2Ugd2l0aCBpdC5cclxuXHRcdC8vIFRoaXMgZW5zdXJlcyB0aGF0IHdoZW4geW91IGNsb3NlIHRoZSBsYXN0IHRhYiBhbmQgT2JzaWRpYW4gY3JlYXRlcyBhIG5ldyBlbXB0eSBvbmUsXHJcblx0XHQvLyBpdCBtZXJnZXMgd2l0aCB0aGUgZ2hvc3QgdGFiIGluc3RlYWQgb2YgY3JlYXRpbmcgYSBkdXBsaWNhdGUuXHJcblx0XHQvLyBCVVQ6IElmIHRoZSB1c2VyIG1hbnVhbGx5IG9wZW5lZCBhIGZpbGUgZnJvbSBleHBsb3Jlciwgd2Ugc2hvdWxkIE5PVCBtZXJnZSAtIGxldCB0aGVtIGhhdmUgdGhlaXIgdGFiLlxyXG5cdFx0Y29uc3QgaXNUcnVseUVtcHR5ID0gIWxlYWYudmlldyB8fCBsZWFmLnZpZXcuZ2V0Vmlld1R5cGUoKSA9PT0gJ2VtcHR5JztcclxuXHRcdFxyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTdGlja3lIb21lSWNvbiAmJiBpc1RydWx5RW1wdHkpIHtcclxuXHRcdFx0Ly8gUmFuZG9tIHR5cGVzIGFuZCBwZXJpb2RpYyBub3RlczogZG9uJ3QgcGluLCBidXQgY2FuIHN0aWxsIG1lcmdlXHJcblx0XHRcdGNvbnN0IGlzUmFuZG9tID0gc2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbSB8fCBcclxuXHRcdFx0ICAgICAgICAgICAgICAgICBzZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyIHx8XHJcblx0XHRcdCAgICAgICAgICAgICAgICAgc2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLkRhaWx5Tm90ZSB8fFxyXG5cdFx0XHQgICAgICAgICAgICAgICAgIHNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5XZWVrbHlOb3RlIHx8XHJcblx0XHRcdCAgICAgICAgICAgICAgICAgc2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLk1vbnRobHlOb3RlIHx8XHJcblx0XHRcdCAgICAgICAgICAgICAgICAgc2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLlllYXJseU5vdGU7XHJcblx0XHRcdGNvbnN0IGdob3N0VGFiID0gdGhpcy5maW5kR2hvc3RUYWIoZmlsZSwgaXNSYW5kb20pO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGdob3N0VGFiKSB7XHJcblx0XHRcdFx0Ly8gQ2xvc2UgdGhlIG5ldyBlbXB0eSBsZWFmIHNpbmNlIHdlJ3JlIG1lcmdpbmcgd2l0aCBnaG9zdCB0YWJcclxuXHRcdFx0XHR2b2lkIGxlYWYuZGV0YWNoKCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gRm9jdXMgdGhlIGdob3N0IHRhYiBhbmQgY29uZmlndXJlIGl0XHJcblx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYoZ2hvc3RUYWIpO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuY29uZmlndXJlVmlldyhnaG9zdFRhYiwgZmlsZSk7XHJcblx0XHRcdFx0dGhpcy5ydW5Db21tYW5kT25PcGVuKCk7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIE5vIGdob3N0IHRhYiBmb3VuZCwgYnV0IHN0aWNreSBpY29uIGlzIGVuYWJsZWQgLSB0aGlzIHRhYiBzaG91bGQgYmVjb21lIHRoZSBnaG9zdCB0YWJcclxuXHRcdFx0Ly8gUGluIGl0IHNvIGl0J3MgcmVjb2duaXplZCBhcyB0aGUgZ2hvc3QgdGFiXHJcblx0XHRcdHRoaXMuZ2hvc3RMZWF2ZXMuYWRkKGxlYWYpO1xyXG5cdFx0XHRpZiAoIWlzUmFuZG9tKSB7XHJcblx0XHRcdFx0bGVhZi5zZXRQaW5uZWQodHJ1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGF3YWl0IGxlYWYub3BlbkZpbGUoZmlsZSk7XHJcblx0XHRhd2FpdCB0aGlzLmNvbmZpZ3VyZVZpZXcobGVhZiwgZmlsZSk7XHJcblx0XHRcclxuXHRcdC8vIFJ1biBjb21tYW5kIGlmIGNvbmZpZ3VyZWRcclxuXHRcdHRoaXMucnVuQ29tbWFuZE9uT3BlbigpO1xyXG5cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogTGFzdCB2aWV3IHJlZmVyZW5jZSBmb3IgcmV2ZXJ0VmlldyBmdW5jdGlvbmFsaXR5XHJcblx0ICovXHJcblx0cHJpdmF0ZSBsYXN0VmlldzogV2Vha1JlZjxNYXJrZG93blZpZXc+IHwgdW5kZWZpbmVkO1xyXG5cclxuXHQvKipcclxuXHQgKiBDb25maWd1cmUgdGhlIHZpZXcgbW9kZSBmb3IgYSBsZWFmXHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyBjb25maWd1cmVWaWV3KGxlYWY6IFdvcmtzcGFjZUxlYWYsIGZpbGU6IFRGaWxlKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xyXG5cdFx0Y29uc3QgdmlldyA9IGxlYWYudmlldztcclxuXHJcblx0XHQvLyBPbmx5IGNvbmZpZ3VyZSB2aWV3IG1vZGUgZm9yIG1hcmtkb3duLWxpa2UgZmlsZXNcclxuXHRcdGlmICghaXNNYXJrZG93bkxpa2UoZmlsZSkgfHwgISh2aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3Qgc3RhdGUgPSB2aWV3LmdldFN0YXRlKCk7XHJcblxyXG5cdFx0Ly8gVHJhY2sgdmlldyBmb3IgcmV2ZXJ0VmlldyBpZiBlbmFibGVkXHJcblx0XHRpZiAoc2V0dGluZ3MucmV2ZXJ0Vmlldykge1xyXG5cdFx0XHR0aGlzLmxhc3RWaWV3ID0gbmV3IFdlYWtSZWYodmlldyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQXV0by1zY3JvbGwgdG8gYm90dG9tIGlmIGVuYWJsZWRcclxuXHRcdGlmIChzZXR0aW5ncy5hdXRvU2Nyb2xsKSB7XHJcblx0XHRcdGNvbnN0IGNvdW50ID0gdmlldy5lZGl0b3IubGluZUNvdW50KCk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoc3RhdGUubW9kZSA9PT0gJ3ByZXZpZXcnKSB7XHJcblx0XHRcdFx0dmlldy5wcmV2aWV3TW9kZS5hcHBseVNjcm9sbChjb3VudCAtIDQpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHZpZXcuZWRpdG9yLnNldEN1cnNvcihjb3VudCk7XHJcblx0XHRcdFx0dmlldy5lZGl0b3IuZm9jdXMoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNldCB2aWV3IG1vZGVcclxuXHRcdGlmIChzZXR0aW5ncy5vcGVuVmlld01vZGUgIT09ICdkZWZhdWx0Jykge1xyXG5cdFx0XHRzd2l0Y2ggKHNldHRpbmdzLm9wZW5WaWV3TW9kZSkge1xyXG5cdFx0XHRcdGNhc2UgJ3ByZXZpZXcnOlxyXG5cdFx0XHRcdFx0c3RhdGUubW9kZSA9ICdwcmV2aWV3JztcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ3NvdXJjZSc6XHJcblx0XHRcdFx0XHRzdGF0ZS5tb2RlID0gJ3NvdXJjZSc7XHJcblx0XHRcdFx0XHRzdGF0ZS5zb3VyY2UgPSB0cnVlO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAnbGl2ZSc6XHJcblx0XHRcdFx0XHRzdGF0ZS5tb2RlID0gJ3NvdXJjZSc7XHJcblx0XHRcdFx0XHRzdGF0ZS5zb3VyY2UgPSBmYWxzZTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7XHJcblx0XHRcdFx0dHlwZTogJ21hcmtkb3duJyxcclxuXHRcdFx0XHRzdGF0ZTogc3RhdGUsXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmV2ZXJ0IHZpZXcgdG8gZGVmYXVsdCB3aGVuIG5hdmlnYXRpbmcgYXdheSBmcm9tIGhvbWUgYmFzZVxyXG5cdCAqL1xyXG5cdGFzeW5jIHJldmVydFZpZXcoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xyXG5cdFx0aWYgKCFzZXR0aW5ncy5yZXZlcnRWaWV3IHx8ICF0aGlzLmxhc3RWaWV3IHx8IHNldHRpbmdzLm9wZW5WaWV3TW9kZSA9PT0gJ2RlZmF1bHQnKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCB2aWV3ID0gdGhpcy5sYXN0Vmlldy5kZXJlZigpO1xyXG5cdFx0aWYgKCF2aWV3KSB7XHJcblx0XHRcdHRoaXMubGFzdFZpZXcgPSB1bmRlZmluZWQ7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBob21lQmFzZVNldHRpbmdzID0gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xyXG5cdFx0Y29uc3QgcmVzb2x2ZWRQYXRoID0gYXdhaXQgY29tcHV0ZUhvbWVCYXNlUGF0aChcclxuXHRcdFx0aG9tZUJhc2VTZXR0aW5ncy50eXBlLFxyXG5cdFx0XHRob21lQmFzZVNldHRpbmdzLnZhbHVlLFxyXG5cdFx0XHR0aGlzLnBsdWdpblxyXG5cdFx0KTtcclxuXHJcblx0XHRpZiAoIXJlc29sdmVkUGF0aCkge1xyXG5cdFx0XHR0aGlzLmxhc3RWaWV3ID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgd2UncmUgc3RpbGwgb24gdGhlIGhvbWUgYmFzZSBmaWxlXHJcblx0XHRjb25zdCBjdXJyZW50RmlsZSA9IHZpZXcuZmlsZTtcclxuXHRcdGlmIChjdXJyZW50RmlsZSAmJiBlcXVhbHNDYXNlbGVzcyh0cmltRmlsZShjdXJyZW50RmlsZSksIHJlc29sdmVkUGF0aCkpIHtcclxuXHRcdFx0cmV0dXJuOyAvLyBTdGlsbCBvbiBob21lIGJhc2UsIGRvbid0IHJldmVydFxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFJldmVydCB0byBkZWZhdWx0IHZpZXdcclxuXHRcdGNvbnN0IHN0YXRlID0gdmlldy5nZXRTdGF0ZSgpO1xyXG5cdFx0IFxyXG5cdFx0Y29uc3QgY29uZmlnID0gdGhpcy5hcHAudmF1bHQuY29uZmlnO1xyXG5cdFx0Y29uc3QgbW9kZSA9IGNvbmZpZz8uZGVmYXVsdFZpZXdNb2RlIHx8ICdzb3VyY2UnO1xyXG5cdFx0Y29uc3Qgc291cmNlID0gY29uZmlnPy5saXZlUHJldmlldyAhPT0gdW5kZWZpbmVkID8gIWNvbmZpZy5saXZlUHJldmlldyA6IGZhbHNlO1xyXG5cclxuXHRcdGlmIChcclxuXHRcdFx0dmlldy5sZWFmLmdldFZpZXdTdGF0ZSgpLnR5cGUgPT09ICdtYXJrZG93bicgJiZcclxuXHRcdFx0KG1vZGUgIT09IHN0YXRlLm1vZGUgfHwgc291cmNlICE9PSBzdGF0ZS5zb3VyY2UpXHJcblx0XHQpIHtcclxuXHRcdFx0c3RhdGUubW9kZSA9IG1vZGU7XHJcblx0XHRcdHN0YXRlLnNvdXJjZSA9IHNvdXJjZTtcclxuXHRcdFx0YXdhaXQgdmlldy5sZWFmLnNldFZpZXdTdGF0ZSh7IHR5cGU6ICdtYXJrZG93bicsIHN0YXRlLCBhY3RpdmU6IHRydWUgfSk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5sYXN0VmlldyA9IHVuZGVmaW5lZDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJ1biB0aGUgY29uZmlndXJlZCBjb21tYW5kIGFmdGVyIG9wZW5pbmdcclxuXHQgKi9cclxuXHRwcml2YXRlIHJ1bkNvbW1hbmRPbk9wZW4oKTogdm9pZCB7XHJcblx0XHRjb25zdCBjb21tYW5kSWQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb21tYW5kT25PcGVuO1xyXG5cdFx0aWYgKGNvbW1hbmRJZCkge1xyXG5cdFx0XHQvLyBTbWFsbCBkZWxheSB0byBlbnN1cmUgdGhlIHZpZXcgaXMgcmVhZHlcclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0ZXhlY3V0ZUNvbW1hbmQodGhpcy5hcHAsIGNvbW1hbmRJZCk7XHJcblx0XHRcdH0sIDEwMCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBGaW5kIGFuIGV4aXN0aW5nIGxlYWYgdGhhdCBoYXMgdGhlIGhvbWUgYmFzZSBmaWxlIG9wZW5cclxuXHQgKi9cclxuXHRmaW5kRXhpc3RpbmdIb21lQmFzZUxlYWYoZmlsZT86IFRGaWxlKTogV29ya3NwYWNlTGVhZiB8IG51bGwge1xyXG5cdFx0aWYgKCFmaWxlKSByZXR1cm4gbnVsbDtcclxuXHRcdGNvbnN0IGhvbWVCYXNlUGF0aCA9IGZpbGUucGF0aDtcclxuXHJcblx0XHRjb25zdCBsZWF2ZXMgPSBMRUFGX1RZUEVTLmZsYXRNYXAodHlwZSA9PiBcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSh0eXBlKVxyXG5cdFx0KTtcclxuXHJcblx0XHRmb3IgKGNvbnN0IGxlYWYgb2YgbGVhdmVzKSB7XHJcblx0XHRcdGlmIChsZWFmSGFzRmlsZShsZWFmLCBob21lQmFzZVBhdGgpKSB7XHJcblx0XHRcdFx0cmV0dXJuIGxlYWY7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIGEgbGVhZiBpcyBhIGdob3N0IHRhYlxyXG5cdCAqIEdob3N0IHRhYiBpcyBpZGVudGlmaWVkIGJ5OlxyXG5cdCAqIDEuIEJlaW5nIGluIG91ciBpbnRlcm5hbCBnaG9zdExlYXZlcyBzZXRcclxuXHQgKiAyLiBPUiBiZWluZyBhIHBpbm5lZCB0YWIgc2hvd2luZyB0aGUgaG9tZSBiYXNlIGZpbGVcclxuXHQgKi9cclxuXHRpc0dob3N0TGVhZihsZWFmOiBXb3Jrc3BhY2VMZWFmKTogYm9vbGVhbiB7XHJcblx0XHRpZiAodGhpcy5naG9zdExlYXZlcy5oYXMobGVhZikpIHJldHVybiB0cnVlO1xyXG5cclxuXHRcdC8vIEZhbGxiYWNrIGNoZWNrXHJcblx0XHRjb25zdCBob21lQmFzZVNldHRpbmdzID0gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xyXG5cdFx0Y29uc3QgaG9tZUJhc2VQYXRoID0gaG9tZUJhc2VTZXR0aW5ncy52YWx1ZSB8fCAodGhpcy5wbHVnaW4uc2V0dGluZ3MgYXMgeyBob21lQmFzZVBhdGg/OiBzdHJpbmcgfSkuaG9tZUJhc2VQYXRoO1xyXG5cdFx0aWYgKCFob21lQmFzZVBhdGgpIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHRjb25zdCB2aWV3U3RhdGUgPSBsZWFmLmdldFZpZXdTdGF0ZSgpO1xyXG5cdFx0Y29uc3QgaXNQaW5uZWQgPSB2aWV3U3RhdGUucGlubmVkID09PSB0cnVlO1xyXG5cdFx0aWYgKCFpc1Bpbm5lZCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdC8vIENoZWNrIGZpbGUgcGF0aCBmcm9tIHZpZXcgc3RhdGUgZGlyZWN0bHkgaWYgdmlldyBpcyBub3QgcmVhZHlcclxuXHRcdGNvbnN0IHN0YXRlID0gdmlld1N0YXRlLnN0YXRlIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xyXG5cdFx0Y29uc3QgZmlsZVBhdGggPSBzdGF0ZT8uZmlsZTtcclxuXHRcdGlmICh0eXBlb2YgZmlsZVBhdGggPT09ICdzdHJpbmcnICYmIHBhdGhzRXF1YWwoZmlsZVBhdGgsIGhvbWVCYXNlUGF0aCkpIHtcclxuXHRcdFx0Ly8gRm91bmQgaXQhIEFkZCB0byBXZWFrU2V0IGZvciBmdXR1cmUgZmFzdCBsb29rdXBcclxuXHRcdFx0dGhpcy5naG9zdExlYXZlcy5hZGQobGVhZik7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZpbmFsIGZhbGxiYWNrIHVzaW5nIGxlYWZIYXNGaWxlIGlmIHZpZXcgaXMgcmVhZHlcclxuXHRcdHJldHVybiBsZWFmSGFzRmlsZShsZWFmLCBob21lQmFzZVBhdGgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRmluZCB0aGUgZ2hvc3QgdGFiICh0aGUgb25lIG9wZW5lZCB2aWEgc3RpY2t5IGljb24pXHJcblx0ICogR2hvc3QgdGFiIGlzIGlkZW50aWZpZWQgYnk6XHJcblx0ICogMS4gQmVpbmcgaW4gb3VyIGludGVybmFsIGdob3N0TGVhdmVzIHNldCAocHJpbWFyeSBzb3VyY2UpXHJcblx0ICogMi4gT1IgYmVpbmcgYSBwaW5uZWQgdGFiIHNob3dpbmcgdGhlIGhvbWUgYmFzZSBmaWxlIChmYWxsYmFjayBmb3Igc3RhcnR1cC9keW5hbWljIHR5cGVzKVxyXG5cdCAqL1xyXG5cdGZpbmRHaG9zdFRhYihmaWxlPzogVEZpbGUsIGlzUmFuZG9tOiBib29sZWFuID0gZmFsc2UpOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCB7XHJcblx0XHRpZiAoIWZpbGUpIHJldHVybiBudWxsO1xyXG5cdFx0Y29uc3QgaG9tZUJhc2VQYXRoID0gZmlsZS5wYXRoO1xyXG5cclxuXHRcdC8vIFVzZSBpdGVyYXRlQWxsTGVhdmVzIGluc3RlYWQgb2YgZ2V0TGVhdmVzT2ZUeXBlIHRvIGZpbmQgdGFicyBldmVuIHdoZW4gaGlkZGVuICh6ZW4gbW9kZSwgZXRjLilcclxuXHRcdGNvbnN0IGxlYXZlczogV29ya3NwYWNlTGVhZltdID0gW107XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHRjb25zdCB2aWV3VHlwZSA9IGxlYWYudmlldz8uZ2V0Vmlld1R5cGUoKTtcclxuXHRcdFx0aWYgKHZpZXdUeXBlICYmIExFQUZfVFlQRVMuaW5jbHVkZXModmlld1R5cGUpKSB7XHJcblx0XHRcdFx0bGVhdmVzLnB1c2gobGVhZik7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIDEuIENoZWNrIGZvciBhIG1hdGNoIGluIG91ciBXZWFrU2V0IChtb3N0IGFjY3VyYXRlIGZvciBkeW5hbWljIHR5cGVzKVxyXG5cdFx0Zm9yIChjb25zdCBsZWFmIG9mIGxlYXZlcykge1xyXG5cdFx0XHRpZiAodGhpcy5naG9zdExlYXZlcy5oYXMobGVhZikpIHtcclxuXHRcdFx0XHRpZiAobGVhZkhhc0ZpbGUobGVhZiwgaG9tZUJhc2VQYXRoKSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGxlYWY7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gMi4gRmFsbGJhY2s6IENoZWNrIGZvciBhIHBpbm5lZCB0YWIgc2hvd2luZyB0aGUgZmlsZSAoaGFuZGxlcyBzdGFydHVwL3Jlc3RvcmF0aW9uKVxyXG5cdFx0Zm9yIChjb25zdCBsZWFmIG9mIGxlYXZlcykge1xyXG5cdFx0XHRpZiAobGVhZkhhc0ZpbGUobGVhZiwgaG9tZUJhc2VQYXRoKSkge1xyXG5cdFx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRcdFx0Ly8gR2hvc3QgdGFiIGlzIHBpbm5lZCAodW5sZXNzIGl0J3MgYSByYW5kb20gZmlsZSB0eXBlIHdoaWNoIGRvZXNuJ3QgcGluKVxyXG5cdFx0XHRcdGlmIChpc1JhbmRvbSB8fCB2aWV3U3RhdGUucGlubmVkID09PSB0cnVlKSB7XHJcblx0XHRcdFx0XHQvLyBGb3VuZCBpdCEgQWRkIGl0IHRvIG91ciBXZWFrU2V0IHNvIHdlIHRyYWNrIGl0IGFzIGEgZ2hvc3QgZnJvbSBub3cgb25cclxuXHRcdFx0XHRcdHRoaXMuZ2hvc3RMZWF2ZXMuYWRkKGxlYWYpO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGxlYWY7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBPcGVuIGhvbWUgYmFzZSBpbiBnaG9zdCB0YWIgKGZvciBzdGlja3kgaWNvbilcclxuXHQgKiBHaG9zdCB0YWIgaXMgcGlubmVkIGFuZCBoaWRkZW4gKGlmIHNldHRpbmcgZW5hYmxlZClcclxuXHQgKiBPbmx5IG9uZSBnaG9zdCB0YWIgc2hvdWxkIGV4aXN0IGF0IGEgdGltZVxyXG5cdCAqIFdvcmtzIGZvciBmaWxlLWJhc2VkIHR5cGVzIGFuZCBHcmFwaCB2aWV3XHJcblx0ICogTm90ZTogUmFuZG9tIHR5cGVzIGRvbid0IHBpbiAoc2luY2UgZmlsZSBjaGFuZ2VzIGVhY2ggdGltZSlcclxuXHQgKiBOb3RlOiBXb3Jrc3BhY2UgYW5kIE5vbmUgZG9uJ3Qgd29yayAod29ya3NwYWNlIGNoYW5nZXMgbGF5b3V0LCBOb25lIGRvZXNuJ3Qgb3BlbiBhbnl0aGluZylcclxuXHQgKi9cclxuXHRhc3luYyBvcGVuSG9tZUJhc2VJbkdob3N0VGFiKG9wdGlvbnM6IHtcclxuXHRcdHJ1bkNvbW1hbmQ/OiBib29sZWFuO1xyXG5cdH0gPSB7fSk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0Y29uc3QgeyBydW5Db21tYW5kID0gdHJ1ZSB9ID0gb3B0aW9ucztcclxuXHRcdGNvbnN0IGhvbWVCYXNlU2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5nZXRIb21lQmFzZVNldHRpbmdzKCk7XHJcblx0XHRcclxuXHRcdC8vIFdvcmtzcGFjZSBhbmQgTm9uZSBkb24ndCB3b3JrIHdpdGggZ2hvc3QgdGFiXHJcblx0XHRpZiAoaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlIHx8IFxyXG5cdFx0ICAgIGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLk5vbmUpIHtcclxuXHRcdFx0Ly8gRm9yIHRoZXNlIHR5cGVzLCBqdXN0IHVzZSBub3JtYWwgb3BlblxyXG5cdFx0XHRyZXR1cm4gdGhpcy5vcGVuSG9tZUJhc2VXaXRoTW9kZSgncmV0YWluJywgcnVuQ29tbWFuZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gR3JhcGggdmlldzogZG9uJ3QgdXNlIGdob3N0IHRhYiAoZmluZGluZyBpdCBpcyB1bnJlbGlhYmxlKVxyXG5cdFx0Ly8gSnVzdCBvcGVuIGl0IG5vcm1hbGx5IGxpa2UgcmFuZG9tIGZpbGVzXHJcblx0XHRpZiAoaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuR3JhcGgpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMub3BlbkdyYXBoKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmFuZG9tIHR5cGVzIGFuZCBwZXJpb2RpYyBub3RlczogZG9uJ3QgcGluIChmaWxlIGNoYW5nZXMgZWFjaCB0aW1lKVxyXG5cdFx0Ly8gQnV0IHN0aWxsIGFsbG93IG1lcmdpbmcgd2l0aCBleGlzdGluZyB0YWJzIGlmIHN0aWNreSBpY29uIGlzIGVuYWJsZWRcclxuXHRcdGNvbnN0IGlzUmFuZG9tID0gaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tIHx8IFxyXG5cdFx0ICAgICAgICAgICAgICAgICBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXIgfHxcclxuXHRcdCAgICAgICAgICAgICAgICAgaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuRGFpbHlOb3RlIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgIGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLldlZWtseU5vdGUgfHxcclxuXHRcdCAgICAgICAgICAgICAgICAgaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuTW9udGhseU5vdGUgfHxcclxuXHRcdCAgICAgICAgICAgICAgICAgaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuWWVhcmx5Tm90ZTtcclxuXHJcblx0XHQvLyBDaGVjayBpZiBzZXR0aW5ncyBtb2RhbCBpcyBvcGVuXHJcblx0XHRpZiAodGhpcy5pc1NldHRpbmdzTW9kYWxPcGVuKCkpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFJlc29sdmUgdGhlIGFjdHVhbCBmaWxlIHBhdGggYmFzZWQgb24gdHlwZVxyXG5cdFx0Y29uc3QgcmVzb2x2ZWRQYXRoID0gYXdhaXQgY29tcHV0ZUhvbWVCYXNlUGF0aChcclxuXHRcdFx0aG9tZUJhc2VTZXR0aW5ncy50eXBlLFxyXG5cdFx0XHRob21lQmFzZVNldHRpbmdzLnZhbHVlLFxyXG5cdFx0XHR0aGlzLnBsdWdpblxyXG5cdFx0KTtcclxuXHRcdFxyXG5cdFx0aWYgKCFyZXNvbHZlZFBhdGgpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEdldCB0aGUgaG9tZSBiYXNlIGZpbGUgLSB1c2UgbWV0YWRhdGFDYWNoZSBmb3IgYmV0dGVyIHBhdGggcmVzb2x1dGlvbiAobGlrZSBob21lcGFnZSBwbHVnaW4pXHJcblx0XHQvLyBUaGlzIGlzIGVzcGVjaWFsbHkgaW1wb3J0YW50IGZvciBwZXJpb2RpYyBub3RlcyB3aGljaCBtYXkgaGF2ZSBiZWVuIGp1c3QgY3JlYXRlZFxyXG5cdFx0bGV0IGZpbGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHJlc29sdmVkUGF0aCwgJy8nKTtcclxuXHRcdFxyXG5cdFx0Ly8gSWYgbm90IGZvdW5kLCB0cnkgZ2V0RmlsZUJ5UGF0aCBhcyBmYWxsYmFja1xyXG5cdFx0aWYgKCFmaWxlKSB7XHJcblx0XHRcdGZpbGUgPSBnZXRGaWxlQnlQYXRoKHRoaXMuYXBwLCByZXNvbHZlZFBhdGgpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBGb3IgcGVyaW9kaWMgbm90ZXMsIHRoZSBwYXRoIG1pZ2h0IGJlIHRyaW1tZWQgKG5vIGV4dGVuc2lvbilcclxuXHRcdC8vIFRyeSB3aXRoIC5tZCBleHRlbnNpb24gaWYgc3RpbGwgbm90IGZvdW5kXHJcblx0XHRpZiAoIWZpbGUgJiYgIXJlc29sdmVkUGF0aC5lbmRzV2l0aCgnLm1kJykgJiYgIXJlc29sdmVkUGF0aC5lbmRzV2l0aCgnLmNhbnZhcycpICYmICFyZXNvbHZlZFBhdGguZW5kc1dpdGgoJy5iYXNlJykpIHtcclxuXHRcdFx0Y29uc3QgdW50cmltbWVkUGF0aCA9IGAke3Jlc29sdmVkUGF0aH0ubWRgO1xyXG5cdFx0XHRmaWxlID0gZ2V0RmlsZUJ5UGF0aCh0aGlzLmFwcCwgdW50cmltbWVkUGF0aCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmICghZmlsZSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgZ2hvc3QgdGFiIGFscmVhZHkgZXhpc3RzXHJcblx0XHRjb25zdCBnaG9zdFRhYiA9IHRoaXMuZmluZEdob3N0VGFiKGZpbGUsIGlzUmFuZG9tKTtcclxuXHRcdFxyXG5cdFx0Y29uc29sZS5kZWJ1ZygnW0hvbWUgQmFzZV0gb3BlbkhvbWVCYXNlSW5HaG9zdFRhYjonLCB7XHJcblx0XHRcdGZpbGU6IGZpbGUucGF0aCxcclxuXHRcdFx0Z2hvc3RUYWJGb3VuZDogISFnaG9zdFRhYixcclxuXHRcdFx0aXNSYW5kb206IGlzUmFuZG9tLFxyXG5cdFx0XHR6ZW5Nb2RlOiBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnemVubW9kZS1hY3RpdmUnKVxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdGlmIChnaG9zdFRhYikge1xyXG5cdFx0XHQvLyBHaG9zdCB0YWIgZXhpc3RzIC0ganVzdCBqdW1wIHRvIGl0LCBkb24ndCBjbG9zZSBvdGhlciB0YWJzXHJcblx0XHRcdC8vIFVzZXIgY2FuIGhhdmUgbXVsdGlwbGUgaG9tZSBiYXNlIHRhYnMgb3BlbiwgYnV0IGNsaWNraW5nIHN0aWNreSBpY29uIGp1bXBzIHRvIHRoZSBcIm9jY3VwaWVkXCIgb25lXHJcblx0XHRcdGNvbnN0IHNob3VsZEZvY3VzID0gIXRoaXMuaXNTZXR0aW5nc01vZGFsT3BlbigpO1xyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uuc2V0QWN0aXZlTGVhZihnaG9zdFRhYiwgeyBmb2N1czogc2hvdWxkRm9jdXMgfSk7XHJcblx0XHRcdGF3YWl0IHRoaXMuY29uZmlndXJlVmlldyhnaG9zdFRhYiwgZmlsZSk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAocnVuQ29tbWFuZCkge1xyXG5cdFx0XHRcdHRoaXMucnVuQ29tbWFuZE9uT3BlbigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEdob3N0IHRhYiBkb2Vzbid0IGV4aXN0IC0gY3JlYXRlIGl0XHJcblx0XHQvLyBEb24ndCBjbG9zZSBleGlzdGluZyB0YWJzIC0gdXNlciBjYW4gaGF2ZSBtdWx0aXBsZSBob21lIGJhc2UgdGFic1xyXG5cdFx0Ly8gVGhlIGZpcnN0IG9uZSB3ZSBjcmVhdGUgd2lsbCBcIm9jY3VweVwiIHRoZSBnaG9zdCB0YWIgc2xvdCAoYmUgcGlubmVkIGFuZCBoaWRkZW4pXHJcblxyXG5cdFx0Ly8gQ3JlYXRlIG5ldyBnaG9zdCB0YWJcclxuXHRcdGNvbnN0IG5ld0dob3N0VGFiID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3RhYicpO1xyXG5cdFx0dGhpcy5naG9zdExlYXZlcy5hZGQobmV3R2hvc3RUYWIpO1xyXG5cdFx0YXdhaXQgbmV3R2hvc3RUYWIub3BlbkZpbGUoZmlsZSk7XHJcblx0XHRcclxuXHRcdC8vIFBpbiB0aGUgZ2hvc3QgdGFiICh1bmxlc3MgaXQncyByYW5kb20gLSBmaWxlIGNoYW5nZXMgZWFjaCB0aW1lKVxyXG5cdFx0aWYgKCFpc1JhbmRvbSkge1xyXG5cdFx0XHRuZXdHaG9zdFRhYi5zZXRQaW5uZWQodHJ1ZSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIE1hcmsgdGhlIHRhYiBoZWFkZXIgaW1tZWRpYXRlbHkgYWZ0ZXIgcGlubmluZyAoZm9yIGF1dG8taGlkZSB0YWIgY291bnRpbmcpXHJcblx0XHQvLyBVc2UgYSBzbWFsbCBkZWxheSB0byBlbnN1cmUgdGhlIHRhYiBoZWFkZXIgZXhpc3RzXHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0dGhpcy5wbHVnaW4uc3RpY2t5VGFiU2VydmljZS51cGRhdGVUYWJIZWFkZXJzKCk7XHJcblx0XHR9LCA1MCk7XHJcblx0XHRcclxuXHRcdC8vIEZvY3VzIGl0XHJcblx0XHRjb25zdCBzaG91bGRGb2N1cyA9ICF0aGlzLmlzU2V0dGluZ3NNb2RhbE9wZW4oKTtcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKG5ld0dob3N0VGFiLCB7IGZvY3VzOiBzaG91bGRGb2N1cyB9KTtcclxuXHRcdFxyXG5cdFx0Ly8gQ29uZmlndXJlIHRoZSB2aWV3XHJcblx0XHRhd2FpdCB0aGlzLmNvbmZpZ3VyZVZpZXcobmV3R2hvc3RUYWIsIGZpbGUpO1xyXG5cclxuXHRcdC8vIFJ1biBjb21tYW5kIGlmIGNvbmZpZ3VyZWRcclxuXHRcdGlmIChydW5Db21tYW5kKSB7XHJcblx0XHRcdHRoaXMucnVuQ29tbWFuZE9uT3BlbigpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRmluZCBhbiBlbXB0eSBsZWFmXHJcblx0ICovXHJcblx0cHJpdmF0ZSBmaW5kRW1wdHlMZWFmKCk6IFdvcmtzcGFjZUxlYWYgfCBudWxsIHtcclxuXHRcdGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2VtcHR5Jyk7XHJcblx0XHRyZXR1cm4gbGVhdmVzWzBdIHx8IG51bGw7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZXQgdGhlIGhvbWUgYmFzZSBmaWxlXHJcblx0ICovXHJcblx0Z2V0SG9tZUJhc2VGaWxlKCk6IFRGaWxlIHwgbnVsbCB7XHJcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xyXG5cdFx0aWYgKCFzZXR0aW5ncy5ob21lQmFzZVBhdGgpIHtcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZ2V0RmlsZUJ5UGF0aCh0aGlzLmFwcCwgc2V0dGluZ3MuaG9tZUJhc2VQYXRoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEZhc3QgZGV0YWNoIGFsbCBsZWF2ZXMgdXNpbmcgY2hhbmdlTGF5b3V0IChsaWtlIGhvbWVwYWdlIHBsdWdpbilcclxuXHQgKiBUaGlzIGlzIG11Y2ggZmFzdGVyIHRoYW4gaXRlcmF0aW5nIGFuZCBkZXRhY2hpbmcgbGVhdmVzIGluZGl2aWR1YWxseVxyXG5cdCAqL1xyXG5cdGFzeW5jIGRldGFjaEFsbExlYXZlcygpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGNvbnN0IGxheW91dCA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMYXlvdXQoKTtcclxuXHRcdGxheW91dC5tYWluID0ge1xyXG5cdFx0XHRcImlkXCI6IFwiNTMyNDM3MzAxNTcyNmJhOFwiLFxyXG5cdFx0XHRcInR5cGVcIjogXCJzcGxpdFwiLFxyXG5cdFx0XHRcImNoaWxkcmVuXCI6IFt7IFxyXG5cdFx0XHRcdFwiaWRcIjogXCI0NTA5NzI0ZjhiZjg0ZGE3XCIsXHJcblx0XHRcdFx0XCJ0eXBlXCI6IFwidGFic1wiLFxyXG5cdFx0XHRcdFwiY2hpbGRyZW5cIjogW3tcclxuXHRcdFx0XHRcdFwiaWRcIjogXCJlN2E3YjMwM2M2MTc4NmRjXCIsXHJcblx0XHRcdFx0XHRcInR5cGVcIjogXCJsZWFmXCIsXHJcblx0XHRcdFx0XHRcInN0YXRlXCI6IHtcInR5cGVcIjogXCJlbXB0eVwiLCBcInN0YXRlXCI6IHt9LCBcImljb25cIjogXCJsdWNpZGUtZmlsZVwiLCBcInRpdGxlXCI6IFwiTmV3IHRhYlwifVxyXG5cdFx0XHRcdH1dXHJcblx0XHRcdH1dLFxyXG5cdFx0XHRcImRpcmVjdGlvblwiOiBcInZlcnRpY2FsXCJcclxuXHRcdH07XHJcblx0XHRsYXlvdXQuYWN0aXZlID0gXCJlN2E3YjMwM2M2MTc4NmRjXCI7XHJcblx0XHRhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuY2hhbmdlTGF5b3V0KGxheW91dCk7XHJcblx0XHRcclxuXHRcdGlmIChQbGF0Zm9ybS5pc01vYmlsZSkge1xyXG5cdFx0XHQgXHJcblx0XHRcdCh0aGlzLmFwcC53b3Jrc3BhY2UucmlnaHRTcGxpdCBhcyB7IHVwZGF0ZUluZm8/OiAoKSA9PiB2b2lkIH0pPy51cGRhdGVJbmZvPy4oKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENsb3NlIGFsbCBsZWF2ZXMgaW4gdGhlIG1haW4gd29ya3NwYWNlIGV4Y2VwdCB0aGUgc3BlY2lmaWVkIG9uZVxyXG5cdCAqIFNpbXBsaWZpZWQgYXBwcm9hY2g6IGl0ZXJhdGUgYWxsIGxlYXZlcyBhbmQgY2xvc2UgdGhvc2UgaW4gbWFpbiB3b3Jrc3BhY2VcclxuXHQgKi9cclxuXHRhc3luYyBjbG9zZUFsbExlYXZlc0V4Y2VwdChleGNlcHRMZWFmOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Ly8gVXNlIGl0ZXJhdGVBbGxMZWF2ZXMgdG8gZ2V0IEFMTCBsZWF2ZXNcclxuXHRcdGNvbnN0IGxlYXZlc1RvQ2xvc2U6IFdvcmtzcGFjZUxlYWZbXSA9IFtdO1xyXG5cdFx0XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHQvLyBTa2lwIHRoZSBleGNlcHRpb24gbGVhZlxyXG5cdFx0XHRpZiAobGVhZiA9PT0gZXhjZXB0TGVhZikge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gVHJ5IHRvIGRldGVybWluZSBpZiB0aGlzIGlzIGEgbWFpbiB3b3Jrc3BhY2UgbGVhZlxyXG5cdFx0XHQvLyBHZXQgdGhlIHZpZXcncyBjb250YWluZXIgZWxlbWVudFxyXG5cdFx0XHRjb25zdCB2aWV3ID0gbGVhZi52aWV3O1xyXG5cdFx0XHRsZXQgY29udGFpbmVyOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHZpZXcpIHtcclxuXHRcdFx0XHRjb25zdCB2aWV3QW55ID0gdmlldyBhcyB1bmtub3duIGFzIHsgY29udGFpbmVyRWw/OiBIVE1MRWxlbWVudCB9O1xyXG5cdFx0XHRcdGNvbnRhaW5lciA9IHZpZXdBbnkuY29udGFpbmVyRWwgfHwgbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gSWYgbm8gY29udGFpbmVyIGZyb20gdmlldywgdHJ5IGxlYWYncyBjb250YWluZXJFbFxyXG5cdFx0XHRpZiAoIWNvbnRhaW5lcikge1xyXG5cdFx0XHRcdGNvbnN0IGxlYWZBbnkgPSBsZWFmIGFzIHVua25vd24gYXMgeyBjb250YWluZXJFbD86IEhUTUxFbGVtZW50IH07XHJcblx0XHRcdFx0Y29udGFpbmVyID0gbGVhZkFueS5jb250YWluZXJFbCB8fCBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoY29udGFpbmVyKSB7XHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgaXQncyBpbiB0aGUgbWFpbiB3b3Jrc3BhY2UgKHJvb3QsIG5vdCBzaWRlYmFyKVxyXG5cdFx0XHRcdGNvbnN0IHJvb3RXb3Jrc3BhY2UgPSBjb250YWluZXIuY2xvc2VzdCgnLndvcmtzcGFjZS1zcGxpdC5tb2QtdmVydGljYWwubW9kLXJvb3QnKTtcclxuXHRcdFx0XHRjb25zdCBsZWZ0U2lkZWJhciA9IGNvbnRhaW5lci5jbG9zZXN0KCcud29ya3NwYWNlLXNwbGl0Lm1vZC1sZWZ0LXNwbGl0Jyk7XHJcblx0XHRcdFx0Y29uc3QgcmlnaHRTaWRlYmFyID0gY29udGFpbmVyLmNsb3Nlc3QoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXJpZ2h0LXNwbGl0Jyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKHJvb3RXb3Jrc3BhY2UgJiYgIWxlZnRTaWRlYmFyICYmICFyaWdodFNpZGViYXIpIHtcclxuXHRcdFx0XHRcdGxlYXZlc1RvQ2xvc2UucHVzaChsZWFmKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gSWYgd2UgY2FuJ3QgZmluZCBjb250YWluZXIsIHN0aWxsIHRyeSB0byBjbG9zZSBpdCBpZiBpdCdzIGluIG1haW4gd29ya3NwYWNlXHJcblx0XHRcdFx0Ly8gVGhpcyBoYW5kbGVzIGVkZ2UgY2FzZXMgd2hlcmUgY29udGFpbmVyIGRldGVjdGlvbiBmYWlsc1xyXG5cdFx0XHRcdC8vIE9ubHkgY2xvc2UgaWYgd2UncmUgY2xvc2luZyBldmVyeXRoaW5nIChleGNlcHRMZWFmIGlzIG51bGwpXHJcblx0XHRcdFx0aWYgKGV4Y2VwdExlYWYgPT09IG51bGwpIHtcclxuXHRcdFx0XHRcdC8vIFRyeSB0byBnZXQgbGVhZidzIHZpZXcgc3RhdGUgdG8gY2hlY2sgaWYgaXQncyBhIG1haW4gd29ya3NwYWNlIHRhYlxyXG5cdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcclxuXHRcdFx0XHRcdFx0Ly8gSWYgaXQgaGFzIGEgdmlldyBzdGF0ZSwgaXQncyBsaWtlbHkgYSBtYWluIHdvcmtzcGFjZSB0YWJcclxuXHRcdFx0XHRcdFx0aWYgKHZpZXdTdGF0ZSkge1xyXG5cdFx0XHRcdFx0XHRcdGxlYXZlc1RvQ2xvc2UucHVzaChsZWFmKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0XHRcdC8vIElmIHdlIGNhbid0IGdldCB2aWV3IHN0YXRlLCBza2lwIGl0XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0XHJcblx0XHQvLyBDbG9zZSBhbGwgaWRlbnRpZmllZCBsZWF2ZXNcclxuXHRcdGZvciAoY29uc3QgbGVhZiBvZiBsZWF2ZXNUb0Nsb3NlKSB7XHJcblx0XHRcdHZvaWQgbGVhZi5kZXRhY2goKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gV2FpdCBmb3IgZGV0YWNobWVudHMgdG8gY29tcGxldGVcclxuXHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAyMDApKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIHRoZSBmb2N1c2VkIHRhYiBpcyB0aGUgaG9tZSBiYXNlXHJcblx0ICovXHJcblx0aXNGb2N1c2VkT25Ib21lQmFzZSgpOiBib29sZWFuIHtcclxuXHRcdGNvbnN0IGFjdGl2ZUxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TW9zdFJlY2VudExlYWYoKTtcclxuXHRcdGlmICghYWN0aXZlTGVhZikgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdC8vIElmIGl0J3MgYSBnaG9zdCBsZWFmLCBpdCdzIGRlZmluaXRlbHkgdGhlIGhvbWUgYmFzZVxyXG5cdFx0aWYgKHRoaXMuZ2hvc3RMZWF2ZXMuaGFzKGFjdGl2ZUxlYWYpKSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0aWYgKCFhY3RpdmVGaWxlKSByZXR1cm4gZmFsc2U7XHJcblxyXG5cdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMucGx1Z2luLmdldEhvbWVCYXNlU2V0dGluZ3MoKTtcclxuXHRcdFxyXG5cdFx0Ly8gSWYgaXQncyBhIGZpbGUgdHlwZSwgd2UgY2FuIGNoZWNrIHBhdGggZGlyZWN0bHkgKGZhc3QpXHJcblx0XHRpZiAoaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkge1xyXG5cdFx0XHRjb25zdCBob21lQmFzZVBhdGggPSBob21lQmFzZVNldHRpbmdzLnZhbHVlIHx8IHRoaXMucGx1Z2luLnNldHRpbmdzLmhvbWVCYXNlUGF0aDtcclxuXHRcdFx0aWYgKCFob21lQmFzZVBhdGgpIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHRcdGNvbnN0IGhvbWVCYXNlRmlsZSA9IGdldEZpbGVCeVBhdGgodGhpcy5hcHAsIGhvbWVCYXNlUGF0aCk7XHJcblx0XHRcdGlmICghaG9tZUJhc2VGaWxlKSByZXR1cm4gZmFsc2U7XHJcblxyXG5cdFx0XHRyZXR1cm4gYWN0aXZlRmlsZS5wYXRoID09PSBob21lQmFzZUZpbGUucGF0aDtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBGb3Igb3RoZXIgdHlwZXMsIHdlIG1pZ2h0IG5lZWQgbW9yZSBjb21wbGV4IGNoZWNraW5nXHJcblx0XHQvLyBCdXQgdXN1YWxseSBiZWluZyB0aGUgYWN0aXZlIGZpbGUgaXMgZW5vdWdoIGlmIHdlIHRydXN0IHRoZSBsYXN0IHJlc29sdXRpb25cclxuXHRcdC8vIG9yIHdlIGNhbiBqdXN0IHJlbHkgb24gZ2hvc3RMZWF2ZXMgZm9yIHN0aWNreSBpY29uIGFjdGl2ZSBzdGF0ZVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiBob21lIGJhc2UgZmlsZSBleGlzdHNcclxuXHQgKi9cclxuXHRob21lQmFzZUV4aXN0cygpOiBib29sZWFuIHtcclxuXHRcdGNvbnN0IHBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVBhdGg7XHJcblx0XHRpZiAoIXBhdGgpIHJldHVybiBmYWxzZTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIGdldEZpbGVCeVBhdGgodGhpcy5hcHAsIHBhdGgpICE9PSBudWxsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IHRoZSBuYXRpdmUgT2JzaWRpYW4gb3BlbiBiZWhhdmlvciBzZXR0aW5nIChmcm9tIGFwcC5qc29uKVxyXG5cdCAqIEByZXR1cm5zIFRoZSBuYXRpdmUgc2V0dGluZyB2YWx1ZSBvciB1bmRlZmluZWQgaWYgbm90IHN1cHBvcnRlZC9mb3VuZFxyXG5cdCAqL1xyXG5cdGdldE5hdGl2ZU9wZW5CZWhhdmlvcigpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG5cdFx0Ly8gVGhlIGNvbmZpZyBwcm9wZXJ0eSBpcyBhZGRlZCB2aWEgaW50ZXJuYWwgdHlwZSBhdWdtZW50YXRpb25cclxuXHRcdGNvbnN0IGNvbmZpZyA9IHRoaXMuYXBwLnZhdWx0LmNvbmZpZztcclxuXHRcdGlmICghY29uZmlnKSByZXR1cm4gdW5kZWZpbmVkO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gY29uZmlnLm9wZW5CZWhhdmlvcjtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIHRoZSBzZXR0aW5ncyBtb2RhbCBpcyBjdXJyZW50bHkgb3BlblxyXG5cdCAqL1xyXG5cdHByaXZhdGUgaXNTZXR0aW5nc01vZGFsT3BlbigpOiBib29sZWFuIHtcclxuXHRcdC8vIENoZWNrIGZvciBzZXR0aW5ncyBtb2RhbCBieSBsb29raW5nIGZvciB0aGUgbW9kYWwgY29udGFpbmVyXHJcblx0XHQvLyBUcnkgbXVsdGlwbGUgc2VsZWN0b3JzIHRvIGJlIG1vcmUgcm9idXN0XHJcblx0XHRjb25zdCBzZXR0aW5nc01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRhaW5lci5tb2Qtc2V0dGluZ3MnKSB8fFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC5tb2Qtc2V0dGluZ3MnKSB8fFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52ZXJ0aWNhbC10YWItY29udGVudCcpO1xyXG5cdFx0XHJcblx0XHQvLyBBbHNvIGNoZWNrIGlmIGFueSBtb2RhbCBpcyBvcGVuIGFuZCBjb250YWlucyBzZXR0aW5ncyBjb250ZW50XHJcblx0XHRpZiAoIXNldHRpbmdzTW9kYWwpIHtcclxuXHRcdFx0Y29uc3QgYWxsTW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsLWNvbnRhaW5lcicpO1xyXG5cdFx0XHRmb3IgKGNvbnN0IG1vZGFsIG9mIEFycmF5LmZyb20oYWxsTW9kYWxzKSkge1xyXG5cdFx0XHRcdGlmIChtb2RhbC5xdWVyeVNlbGVjdG9yKCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcclxuXHRcdFx0XHQgICAgbW9kYWwucXVlcnlTZWxlY3RvcignLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdCAgICBtb2RhbC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZC1zZXR0aW5ncycpKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHNldHRpbmdzTW9kYWwgIT09IG51bGw7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXQgdGhlIGFjdGl2ZSBmaWxlIGFzIGhvbWUgYmFzZVxyXG5cdCAqL1xyXG5cdGFzeW5jIHNldEFjdGl2ZUZpbGVBc0hvbWVCYXNlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRpZiAoIWFjdGl2ZUZpbGUpIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHQvLyBDaGVjayBpZiB0aGUgZmlsZSB0eXBlIGlzIHN1cHBvcnRlZFxyXG5cdFx0aWYgKCFpc1N1cHBvcnRlZEV4dGVuc2lvbihhY3RpdmVGaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpKSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaG9tZUJhc2VQYXRoID0gYWN0aXZlRmlsZS5wYXRoO1xyXG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIGFjdGl2ZSBmaWxlIGNhbiBiZSBzZXQgYXMgaG9tZSBiYXNlXHJcblx0ICovXHJcblx0Y2FuU2V0QWN0aXZlRmlsZUFzSG9tZUJhc2UoKTogYm9vbGVhbiB7XHJcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuXHRcdGlmICghYWN0aXZlRmlsZSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdHJldHVybiBpc1N1cHBvcnRlZEV4dGVuc2lvbihhY3RpdmVGaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpKTtcclxuXHR9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBIb21lIEJhc2UgVHlwZSBSZXNvbHV0aW9uIFV0aWxpdGllc1xyXG4gKiBSZXNvbHZlcyBob21lIGJhc2UgcGF0aHMgYmFzZWQgb24gdHlwZSAoRmlsZSwgV29ya3NwYWNlLCBSYW5kb20sIGV0Yy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBURmlsZSwgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgSG9tZUJhc2VUeXBlIH0gZnJvbSAnLi4vc2V0dGluZ3MnO1xyXG5pbXBvcnQgdHlwZSBIb21lQmFzZVBsdWdpbiBmcm9tICcuLi9tYWluJztcclxuaW1wb3J0IHtcclxuXHRjcmVhdGVEYWlseU5vdGUsIGdldERhaWx5Tm90ZSwgZ2V0QWxsRGFpbHlOb3RlcyxcclxuXHRjcmVhdGVXZWVrbHlOb3RlLCBnZXRXZWVrbHlOb3RlLCBnZXRBbGxXZWVrbHlOb3RlcyxcclxuXHRjcmVhdGVNb250aGx5Tm90ZSwgZ2V0TW9udGhseU5vdGUsIGdldEFsbE1vbnRobHlOb3RlcyxcclxuXHRjcmVhdGVZZWFybHlOb3RlLCBnZXRZZWFybHlOb3RlLCBnZXRBbGxZZWFybHlOb3RlcyxcclxufSBmcm9tICdvYnNpZGlhbi1kYWlseS1ub3Rlcy1pbnRlcmZhY2UnO1xyXG5cclxuLyoqXHJcbiAqIEdldCBhIHJhbmRvbSBmaWxlIGZyb20gdGhlIHZhdWx0XHJcbiAqIEBwYXJhbSBhcHAgVGhlIE9ic2lkaWFuIGFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gcm9vdCBPcHRpb25hbCBmb2xkZXIgcGF0aCBPUiBmaWxlbmFtZSBwYXR0ZXJuIChlLmcuLCBcImluZGV4Lm1kXCIgdG8gZmluZCBhbGwgZmlsZXMgbmFtZWQgaW5kZXgubWQpXHJcbiAqL1xyXG5mdW5jdGlvbiByYW5kb21GaWxlKGFwcDogQXBwLCByb290Pzogc3RyaW5nKTogVEZpbGUgfCBudWxsIHtcclxuXHRsZXQgZmlsZXM6IFRGaWxlW10gPSBbXTtcclxuXHRcclxuXHRpZiAocm9vdCkge1xyXG5cdFx0Ly8gRmlyc3QgdHJ5IGFzIGEgZm9sZGVyIHBhdGhcclxuXHRcdGNvbnN0IHJlc29sdmVkUm9vdCA9IGFwcC52YXVsdC5nZXRGb2xkZXJCeVBhdGgocm9vdCk7XHJcblx0XHRpZiAocmVzb2x2ZWRSb290KSB7XHJcblx0XHRcdC8vIEl0J3MgYSBmb2xkZXIgLSBnZXQgYWxsIGZpbGVzIGluIGl0XHJcblx0XHRcdGZpbGVzID0gZ2V0RmlsZXNJbkZvbGRlcihyZXNvbHZlZFJvb3QpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gTm90IGEgZm9sZGVyIC0gdHJlYXQgYXMgZmlsZW5hbWUgcGF0dGVybiAoZS5nLiwgXCJpbmRleC5tZFwiKVxyXG5cdFx0XHQvLyBTZWFyY2ggZm9yIGFsbCBmaWxlcyBtYXRjaGluZyB0aGlzIG5hbWUgaW4gdGhlIHZhdWx0XHJcblx0XHRcdGNvbnN0IGFsbEZpbGVzID0gYXBwLnZhdWx0LmdldEZpbGVzKCk7XHJcblx0XHRcdGNvbnN0IHBhdHRlcm4gPSByb290LnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdGZpbGVzID0gYWxsRmlsZXMuZmlsdGVyKChmOiBURmlsZSkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGZpbGVOYW1lID0gZi5uYW1lLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdFx0cmV0dXJuIGZpbGVOYW1lID09PSBwYXR0ZXJuIHx8IGZpbGVOYW1lID09PSBwYXR0ZXJuLnJlcGxhY2UoL1xcLm1kJC8sICcnKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fSBlbHNlIHtcclxuXHRcdC8vIE5vIHJvb3Qgc3BlY2lmaWVkIC0gZ2V0IGFsbCBmaWxlc1xyXG5cdFx0ZmlsZXMgPSBhcHAudmF1bHQuZ2V0RmlsZXMoKTtcclxuXHR9XHJcblxyXG5cdC8vIEZpbHRlciB0byBzdXBwb3J0ZWQgZmlsZSB0eXBlc1xyXG5cdGZpbGVzID0gZmlsZXMuZmlsdGVyKChmOiBURmlsZSkgPT4gWydtZCcsICdjYW52YXMnLCAnYmFzZSddLmluY2x1ZGVzKGYuZXh0ZW5zaW9uKSk7XHJcblx0XHJcblx0aWYgKGZpbGVzLmxlbmd0aCkge1xyXG5cdFx0Y29uc3QgaW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBmaWxlcy5sZW5ndGgpO1xyXG5cdFx0cmV0dXJuIGZpbGVzW2luZGV4XSB8fCBudWxsO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgYWxsIGZpbGVzIGluIGEgZm9sZGVyIHJlY3Vyc2l2ZWx5XHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRGaWxlc0luRm9sZGVyKGZvbGRlcjogVEZvbGRlcik6IFRGaWxlW10ge1xyXG5cdGxldCBmaWxlczogVEZpbGVbXSA9IFtdO1xyXG5cdFxyXG5cdGZvciAoY29uc3QgaXRlbSBvZiBmb2xkZXIuY2hpbGRyZW4pIHtcclxuXHRcdGlmIChpdGVtIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0ZmlsZXMucHVzaChpdGVtKTtcclxuXHRcdH0gZWxzZSBpZiAoaXRlbSBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuXHRcdFx0ZmlsZXMucHVzaCguLi5nZXRGaWxlc0luRm9sZGVyKGl0ZW0pKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0cmV0dXJuIGZpbGVzO1xyXG59XHJcblxyXG4vKipcclxuICogVHJpbSBmaWxlIGV4dGVuc2lvbiBmb3IgLm1kIGZpbGVzIChsaWtlIGhvbWVwYWdlIHBsdWdpbilcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB0cmltRmlsZShmaWxlOiBURmlsZSk6IHN0cmluZyB7XHJcblx0aWYgKCFmaWxlKSByZXR1cm4gJyc7XHJcblx0cmV0dXJuIGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnID8gZmlsZS5wYXRoLnNsaWNlKDAsIC0zKSA6IGZpbGUucGF0aDtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBQZXJpb2RpYyBub3RlIGluZm8gKGxpa2UgaG9tZXBhZ2UgcGx1Z2luKVxyXG4gKi9cclxuaW50ZXJmYWNlIFBlcmlvZGljSW5mbyB7XHJcblx0bm91bjogc3RyaW5nO1xyXG5cdGFkamVjdGl2ZTogc3RyaW5nO1xyXG5cdGNyZWF0ZTogKGRhdGU6IG1vbWVudC5Nb21lbnQpID0+IFByb21pc2U8VEZpbGU+O1xyXG5cdGdldDogKGRhdGU6IG1vbWVudC5Nb21lbnQsIGFsbDogUmVjb3JkPHN0cmluZywgVEZpbGU+KSA9PiBURmlsZTtcclxuXHRnZXRBbGw6ICgpID0+IFJlY29yZDxzdHJpbmcsIFRGaWxlPjtcclxufVxyXG5cclxuY29uc3QgUEVSSU9ESUNfSU5GTzogUmVjb3JkPEhvbWVCYXNlVHlwZSwgUGVyaW9kaWNJbmZvIHwgbnVsbD4gPSB7XHJcblx0W0hvbWVCYXNlVHlwZS5EYWlseU5vdGVdOiB7XHJcblx0XHRub3VuOiAnZGF5JyxcclxuXHRcdGFkamVjdGl2ZTogJ2RhaWx5JyxcclxuXHRcdGNyZWF0ZTogY3JlYXRlRGFpbHlOb3RlLFxyXG5cdFx0Z2V0OiBnZXREYWlseU5vdGUsXHJcblx0XHRnZXRBbGw6IGdldEFsbERhaWx5Tm90ZXMsXHJcblx0fSxcclxuXHRbSG9tZUJhc2VUeXBlLldlZWtseU5vdGVdOiB7XHJcblx0XHRub3VuOiAnd2VlaycsXHJcblx0XHRhZGplY3RpdmU6ICd3ZWVrbHknLFxyXG5cdFx0Y3JlYXRlOiBjcmVhdGVXZWVrbHlOb3RlLFxyXG5cdFx0Z2V0OiBnZXRXZWVrbHlOb3RlLFxyXG5cdFx0Z2V0QWxsOiBnZXRBbGxXZWVrbHlOb3RlcyxcclxuXHR9LFxyXG5cdFtIb21lQmFzZVR5cGUuTW9udGhseU5vdGVdOiB7XHJcblx0XHRub3VuOiAnbW9udGgnLFxyXG5cdFx0YWRqZWN0aXZlOiAnbW9udGhseScsXHJcblx0XHRjcmVhdGU6IGNyZWF0ZU1vbnRobHlOb3RlLFxyXG5cdFx0Z2V0OiBnZXRNb250aGx5Tm90ZSxcclxuXHRcdGdldEFsbDogZ2V0QWxsTW9udGhseU5vdGVzLFxyXG5cdH0sXHJcblx0W0hvbWVCYXNlVHlwZS5ZZWFybHlOb3RlXToge1xyXG5cdFx0bm91bjogJ3llYXInLFxyXG5cdFx0YWRqZWN0aXZlOiAneWVhcmx5JyxcclxuXHRcdGNyZWF0ZTogY3JlYXRlWWVhcmx5Tm90ZSxcclxuXHRcdGdldDogZ2V0WWVhcmx5Tm90ZSxcclxuXHRcdGdldEFsbDogZ2V0QWxsWWVhcmx5Tm90ZXMsXHJcblx0fSxcclxuXHRbSG9tZUJhc2VUeXBlLkZpbGVdOiBudWxsLFxyXG5cdFtIb21lQmFzZVR5cGUuUmFuZG9tXTogbnVsbCxcclxuXHRbSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlcl06IG51bGwsXHJcblx0W0hvbWVCYXNlVHlwZS5Xb3Jrc3BhY2VdOiBudWxsLFxyXG5cdFtIb21lQmFzZVR5cGUuR3JhcGhdOiBudWxsLFxyXG5cdFtIb21lQmFzZVR5cGUuTm9uZV06IG51bGwsXHJcblx0W0hvbWVCYXNlVHlwZS5Kb3VybmFsXTogbnVsbCxcclxufTtcclxuXHJcbi8qKlxyXG4gKiBHZXQgcGVyaW9kaWMgbm90ZSBwYXRoIChEYWlseSwgV2Vla2x5LCBNb250aGx5LCBZZWFybHkpXHJcbiAqIEJhc2VkIG9uIGhvbWVwYWdlIHBsdWdpbiBpbXBsZW1lbnRhdGlvblxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0UGVyaW9kaWNOb3RlKGtpbmQ6IEhvbWVCYXNlVHlwZSwgcGx1Z2luOiBIb21lQmFzZVBsdWdpbik6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xyXG5cdGlmICghd2luZG93Lm1vbWVudCkge1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG5cdFxyXG5cdGNvbnN0IGluZm8gPSBQRVJJT0RJQ19JTkZPW2tpbmRdO1xyXG5cdGlmICghaW5mbykge1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG5cdFxyXG5cdC8vIEdldCB0aGUgY3VycmVudCBkYXRlIGZvciB0aGUgcGVyaW9kIChsaWtlIGhvbWVwYWdlIHBsdWdpbilcclxuXHRjb25zdCBkYXRlID0gd2luZG93Lm1vbWVudCgpLnN0YXJ0T2YoaW5mby5ub3VuIGFzIG1vbWVudC51bml0T2ZUaW1lLlN0YXJ0T2YpO1xyXG5cdFxyXG5cdC8vIEZvciBkYWlseSBub3RlcywgdHJ5IGNvcmUgZGFpbHkgbm90ZXMgcGx1Z2luIGZpcnN0IChsaWtlIGhvbWVwYWdlIHBsdWdpbilcclxuXHRpZiAoa2luZCA9PT0gSG9tZUJhc2VUeXBlLkRhaWx5Tm90ZSAmJiBwbHVnaW4uYXBwLmludGVybmFsUGx1Z2lucz8ucGx1Z2lucz8uWydkYWlseS1ub3RlcyddPy5lbmFibGVkKSB7XHJcblx0XHRjb25zdCBkYWlseU5vdGVzID0gcGx1Z2luLmFwcC5pbnRlcm5hbFBsdWdpbnMucGx1Z2luc1snZGFpbHktbm90ZXMnXS5pbnN0YW5jZTtcclxuXHRcdGlmIChkYWlseU5vdGVzPy5nZXREYWlseU5vdGVQYXRoKSB7XHJcblx0XHRcdGNvbnN0IHRvZGF5ID0gd2luZG93Lm1vbWVudCgpO1xyXG5cdFx0XHRjb25zdCBwYXRoID0gZGFpbHlOb3Rlcy5nZXREYWlseU5vdGVQYXRoKHRvZGF5KTtcclxuXHRcdFx0aWYgKHBhdGgpIHtcclxuXHRcdFx0XHRyZXR1cm4gcGF0aC5yZXBsYWNlKC9cXC5tZCQvLCAnJyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Ly8gVXNlIHBlcmlvZGljIG5vdGVzIHBsdWdpbiAobGlrZSBob21lcGFnZSBwbHVnaW4pXHJcblx0Y29uc3QgcGVyaW9kaWNOb3Rlc1BsdWdpbiA9IHBsdWdpbi5hcHAucGx1Z2lucz8ucGx1Z2lucz8uWydwZXJpb2RpYy1ub3RlcyddIGFzIHtcclxuXHRcdGdldFBlcmlvZGljTm90ZT86IChub3VuOiAnZGF5JyB8ICd3ZWVrJyB8ICdtb250aCcgfCAneWVhcicsIGRhdGU6IG1vbWVudC5Nb21lbnQpID0+IFRGaWxlIHwgbnVsbDtcclxuXHRcdGNyZWF0ZVBlcmlvZGljTm90ZT86IChub3VuOiAnZGF5JyB8ICd3ZWVrJyB8ICdtb250aCcgfCAneWVhcicsIGRhdGU6IG1vbWVudC5Nb21lbnQpID0+IFByb21pc2U8VEZpbGU+O1xyXG5cdFx0Y2FjaGU/OiB7XHJcblx0XHRcdGluaXRpYWxpemU/OiAoKSA9PiB2b2lkO1xyXG5cdFx0fTtcclxuXHRcdG1hbmlmZXN0Pzoge1xyXG5cdFx0XHR2ZXJzaW9uPzogc3RyaW5nO1xyXG5cdFx0fTtcclxuXHR9IHwgdW5kZWZpbmVkO1xyXG5cdFxyXG5cdGlmICghcGVyaW9kaWNOb3Rlc1BsdWdpbikge1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG5cdFxyXG5cdHRyeSB7XHJcblx0XHQvLyBDaGVjayBpZiBsZWdhY3kgcGVyaW9kaWMgbm90ZXMgKHZlcnNpb24gc3RhcnRzIHdpdGggXCIwXCIpIC0gZXhhY3RseSBsaWtlIGhvbWVwYWdlIHBsdWdpblxyXG5cdFx0Y29uc3QgaXNMZWdhY3kgPSAocGVyaW9kaWNOb3Rlc1BsdWdpbi5tYW5pZmVzdD8udmVyc2lvbiB8fCAnMCcpLnN0YXJ0c1dpdGgoJzAnKTtcclxuXHRcdFxyXG5cdFx0bGV0IG5vdGU6IFRGaWxlIHwgbnVsbCA9IG51bGw7XHJcblx0XHRcclxuXHRcdGlmIChpc0xlZ2FjeSkge1xyXG5cdFx0XHQvLyBMZWdhY3kgcGVyaW9kaWMgbm90ZXMgLSB1c2Ugb2JzaWRpYW4tZGFpbHktbm90ZXMtaW50ZXJmYWNlIChleGFjdGx5IGxpa2UgaG9tZXBhZ2UgcGx1Z2luKVxyXG5cdFx0XHRjb25zdCBhbGwgPSBpbmZvLmdldEFsbCgpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKCFPYmplY3Qua2V5cyhhbGwpLmxlbmd0aCkge1xyXG5cdFx0XHRcdG5vdGUgPSBhd2FpdCBpbmZvLmNyZWF0ZShkYXRlKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRub3RlID0gaW5mby5nZXQoZGF0ZSwgYWxsKSB8fCBhd2FpdCBpbmZvLmNyZWF0ZShkYXRlKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0aWYgKCFub3RlKSB7XHJcblx0XHRcdFx0bm90ZSA9IGluZm8uZ2V0KGRhdGUsIGFsbCk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIE5ldyBwZXJpb2RpYyBub3RlcyAtIGV4YWN0bHkgbGlrZSBob21lcGFnZSBwbHVnaW5cclxuXHRcdFx0aWYgKHBlcmlvZGljTm90ZXNQbHVnaW4uY2FjaGU/LmluaXRpYWxpemUpIHtcclxuXHRcdFx0XHRwZXJpb2RpY05vdGVzUGx1Z2luLmNhY2hlLmluaXRpYWxpemUoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0bm90ZSA9IChcclxuXHRcdFx0XHRwZXJpb2RpY05vdGVzUGx1Z2luLmdldFBlcmlvZGljTm90ZT8uKGluZm8ubm91biBhcyAnZGF5JyB8ICd3ZWVrJyB8ICdtb250aCcgfCAneWVhcicsIGRhdGUpIHx8XHJcblx0XHRcdFx0YXdhaXQgcGVyaW9kaWNOb3Rlc1BsdWdpbi5jcmVhdGVQZXJpb2RpY05vdGU/LihpbmZvLm5vdW4gYXMgJ2RheScgfCAnd2VlaycgfCAnbW9udGgnIHwgJ3llYXInLCBkYXRlKVxyXG5cdFx0XHQpIHx8IG51bGw7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmIChub3RlKSB7XHJcblx0XHRcdHJldHVybiB0cmltRmlsZShub3RlKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fSBjYXRjaCB7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgam91cm5hbCBub3RlIHBhdGhcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdldEpvdXJuYWxOb3RlKGpvdXJuYWxOYW1lOiBzdHJpbmcsIHBsdWdpbjogSG9tZUJhc2VQbHVnaW4pOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcclxuXHQgXHJcblx0Y29uc3Qgam91cm5hbHMgPSBwbHVnaW4uYXBwLnBsdWdpbnM/LnBsdWdpbnM/Llsnam91cm5hbHMnXTtcclxuXHRpZiAoIWpvdXJuYWxzKSByZXR1cm4gbnVsbDtcclxuXHRcclxuXHR0cnkge1xyXG5cdFx0Ly8gQWNjZXNzaW5nIGludGVybmFsIHBsdWdpbiBBUEkgLSBzdHJ1Y3R1cmUgbm90IGZ1bGx5IHR5cGVkXHJcblx0XHR0eXBlIEpvdXJuYWxFbnRyeSA9IHtcclxuXHRcdFx0bmFtZT86IHN0cmluZztcclxuXHRcdFx0Y29uZmlnPzoge1xyXG5cdFx0XHRcdHZhbHVlPzoge1xyXG5cdFx0XHRcdFx0YXV0b0NyZWF0ZT86IGJvb2xlYW47XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0fTtcclxuXHRcdFx0YXV0b0NyZWF0ZT86ICgpID0+IFByb21pc2U8dm9pZD47XHJcblx0XHRcdGdldD86IChkYXRlOiBtb21lbnQuTW9tZW50KSA9PiBURmlsZSB8IG51bGw7XHJcblx0XHRcdGdldE5vdGVQYXRoPzogKGZpbGU6IFRGaWxlKSA9PiBzdHJpbmc7XHJcblx0XHR9O1xyXG5cdFx0Y29uc3Qgam91cm5hbCA9IChqb3VybmFscy5qb3VybmFscyBhcyBKb3VybmFsRW50cnlbXSB8IHVuZGVmaW5lZCk/LmZpbmQoKGopID0+IGoubmFtZSA9PT0gam91cm5hbE5hbWUpO1xyXG5cdFx0aWYgKCFqb3VybmFsKSByZXR1cm4gbnVsbDtcclxuXHRcdFxyXG5cdFx0Ly8gVHJpZ2dlciBhdXRvLWNyZWF0ZSBpZiBuZWVkZWRcclxuXHRcdCBcclxuXHRcdGpvdXJuYWxzLnJlcHJvY2Vzc05vdGVzPy4oKTtcclxuXHRcdCBcclxuXHRcdGNvbnN0IG9yaWdBdXRvQ3JlYXRlID0gam91cm5hbC5jb25maWc/LnZhbHVlPy5hdXRvQ3JlYXRlO1xyXG5cdFx0IFxyXG5cdFx0aWYgKGpvdXJuYWwuY29uZmlnPy52YWx1ZSkge1xyXG5cdFx0XHQgXHJcblx0XHRcdGpvdXJuYWwuY29uZmlnLnZhbHVlLmF1dG9DcmVhdGUgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0IFxyXG5cdFx0YXdhaXQgam91cm5hbC5hdXRvQ3JlYXRlPy4oKTtcclxuXHRcdCBcclxuXHRcdGlmIChqb3VybmFsLmNvbmZpZz8udmFsdWUpIHtcclxuXHRcdFx0IFxyXG5cdFx0XHRqb3VybmFsLmNvbmZpZy52YWx1ZS5hdXRvQ3JlYXRlID0gb3JpZ0F1dG9DcmVhdGU7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmICghd2luZG93Lm1vbWVudCkgcmV0dXJuIG51bGw7XHJcblx0XHQgXHJcblx0XHRjb25zdCB0b2RheSA9IHdpbmRvdy5tb21lbnQoKS5sb2NhbGUoJ2N1c3RvbS1qb3VybmFsLWxvY2FsZScpLnN0YXJ0T2YoJ2RheScpO1xyXG5cdFx0IFxyXG5cdFx0Y29uc3Qgbm90ZSA9IGpvdXJuYWwuZ2V0Py4odG9kYXkpO1xyXG5cdFx0aWYgKCFub3RlKSByZXR1cm4gbnVsbDtcclxuXHRcdFxyXG5cdFx0IFxyXG5cdFx0Y29uc3QgcGF0aCA9IGpvdXJuYWwuZ2V0Tm90ZVBhdGg/Lihub3RlKTtcclxuXHRcdCBcclxuXHRcdHJldHVybiBwYXRoID8gcGF0aC5yZXBsYWNlKC9cXC5tZCQvLCAnJykgOiBudWxsO1xyXG5cdH0gY2F0Y2gge1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogQ29tcHV0ZSB0aGUgYWN0dWFsIGZpbGUgcGF0aCBiYXNlZCBvbiBob21lIGJhc2UgdHlwZVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbXB1dGVIb21lQmFzZVBhdGgoXHJcblx0dHlwZTogSG9tZUJhc2VUeXBlLFxyXG5cdHZhbHVlOiBzdHJpbmcsXHJcblx0cGx1Z2luOiBIb21lQmFzZVBsdWdpblxyXG4pOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcclxuXHRzd2l0Y2ggKHR5cGUpIHtcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLkZpbGU6XHJcblx0XHRcdHJldHVybiB2YWx1ZSB8fCBudWxsO1xyXG5cdFx0XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5SYW5kb206IHtcclxuXHRcdFx0Y29uc3QgZmlsZSA9IHJhbmRvbUZpbGUocGx1Z2luLmFwcCk7XHJcblx0XHRcdHJldHVybiBmaWxlID8gdHJpbUZpbGUoZmlsZSkgOiBudWxsO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXI6IHtcclxuXHRcdFx0Y29uc3QgZmlsZSA9IHJhbmRvbUZpbGUocGx1Z2luLmFwcCwgdmFsdWUpO1xyXG5cdFx0XHRyZXR1cm4gZmlsZSA/IHRyaW1GaWxlKGZpbGUpIDogbnVsbDtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuRGFpbHlOb3RlOlxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuV2Vla2x5Tm90ZTpcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLk1vbnRobHlOb3RlOlxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuWWVhcmx5Tm90ZTpcclxuXHRcdFx0cmV0dXJuIGF3YWl0IGdldFBlcmlvZGljTm90ZSh0eXBlLCBwbHVnaW4pO1xyXG5cdFx0XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5Kb3VybmFsOlxyXG5cdFx0XHRyZXR1cm4gYXdhaXQgZ2V0Sm91cm5hbE5vdGUodmFsdWUsIHBsdWdpbik7XHJcblx0XHRcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLldvcmtzcGFjZTpcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLkdyYXBoOlxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuTm9uZTpcclxuXHRcdFx0Ly8gVGhlc2UgZG9uJ3QgcmVzb2x2ZSB0byBhIGZpbGUgcGF0aFxyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdFxyXG5cdFx0ZGVmYXVsdDpcclxuXHRcdFx0cmV0dXJuIHZhbHVlIHx8IG51bGw7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBob21lIGJhc2UgdHlwZSByZXF1aXJlcyBhIGZpbGUgdG8gYmUgb3BlbmVkXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZXNGaWxlKHR5cGU6IEhvbWVCYXNlVHlwZSk6IGJvb2xlYW4ge1xyXG5cdHJldHVybiB0eXBlICE9PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlICYmIFxyXG5cdCAgICAgICB0eXBlICE9PSBIb21lQmFzZVR5cGUuR3JhcGggJiYgXHJcblx0ICAgICAgIHR5cGUgIT09IEhvbWVCYXNlVHlwZS5Ob25lO1xyXG59XHJcblxyXG4iLCAiLyoqXHJcbiAqIE5ldyBUYWIgU2VydmljZVxyXG4gKiBIYW5kbGVzIHN0YXJ0dXAgZGV0ZWN0aW9uIGFuZCBuZXcgdGFiIHJlcGxhY2VtZW50XHJcbiAqIEluc3BpcmVkIGJ5IG9ic2lkaWFuLWhvbWVwYWdlIGFuZCBuZXctdGFiLWRlZmF1bHQtcGFnZVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgV29ya3NwYWNlTGVhZiwgVmlldywgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB0eXBlIEhvbWVCYXNlUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgeyBIb21lQmFzZVR5cGUgfSBmcm9tICcuLi9zZXR0aW5ncyc7XHJcblxyXG5leHBvcnQgY2xhc3MgTmV3VGFiU2VydmljZSB7XHJcblx0cHJpdmF0ZSBhcHA6IEFwcDtcclxuXHRwcml2YXRlIHBsdWdpbjogSG9tZUJhc2VQbHVnaW47XHJcblx0cHJpdmF0ZSBleGlzdGluZ0xlYXZlczogV2Vha1NldDxXb3Jrc3BhY2VMZWFmPiA9IG5ldyBXZWFrU2V0KCk7XHJcblx0cHJpdmF0ZSBpc1N0YXJ0dXA6IGJvb2xlYW4gPSB0cnVlO1xyXG5cdHByaXZhdGUgc3RhcnR1cENvbXBsZXRlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IEhvbWVCYXNlUGx1Z2luKSB7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMuYXBwID0gcGx1Z2luLmFwcDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRyYWNrIGFsbCBleGlzdGluZyBsZWF2ZXMgKGZvciBuZXcgdGFiIGRldGVjdGlvbilcclxuXHQgKiBUaGlzIG11c3QgYmUgY2FsbGVkIGV2ZW4gd2hlbiBzdGFydHVwIGlzIGhhbmRsZWQgZWxzZXdoZXJlXHJcblx0ICovXHJcblx0dHJhY2tFeGlzdGluZ0xlYXZlcygpOiB2b2lkIHtcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdHRoaXMuZXhpc3RpbmdMZWF2ZXMuYWRkKGxlYWYpO1xyXG5cdFx0fSk7XHJcblx0XHQvLyBNYXJrIHN0YXJ0dXAgYXMgY29tcGxldGVkIHNvIGxheW91dCBjaGFuZ2UgaGFuZGxlciB3b3Jrc1xyXG5cdFx0dGhpcy5zdGFydHVwQ29tcGxldGVkID0gdHJ1ZTtcclxuXHRcdHRoaXMuaXNTdGFydHVwID0gZmFsc2U7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBJbml0aWFsaXplIHRoZSBzZXJ2aWNlIC0gY2FsbGVkIHdoZW4gbGF5b3V0IGlzIHJlYWR5XHJcblx0ICovXHJcblx0aW5pdGlhbGl6ZSgpOiB2b2lkIHtcclxuXHRcdC8vIFRyYWNrIGFsbCBleGlzdGluZyBsZWF2ZXNcclxuXHRcdHRoaXMudHJhY2tFeGlzdGluZ0xlYXZlcygpO1xyXG5cclxuXHRcdC8vIEhhbmRsZSBzdGFydHVwXHJcblx0XHR2b2lkIHRoaXMuaGFuZGxlU3RhcnR1cCgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlIGFwcCBzdGFydHVwIC0gb3BlbiBob21lIGJhc2UgaWYgbmVlZGVkXHJcblx0ICogT25seSBjYWxsZWQgb24gYWN0dWFsIGFwcCBzdGFydHVwLCBub3QgcGx1Z2luIHJlbG9hZHNcclxuXHQgKi9cclxuXHRwcml2YXRlIFx0YXN5bmMgaGFuZGxlU3RhcnR1cCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgd2Ugc2hvdWxkIHNraXAgKG9wZW5PblN0YXJ0dXAgaXMgZmFsc2UsIG9yIG5vIGhvbWUgYmFzZSBjb25maWd1cmVkKVxyXG5cdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMucGx1Z2luLmdldEhvbWVCYXNlU2V0dGluZ3MoKTtcclxuXHRcdGlmICghc2V0dGluZ3Mub3Blbk9uU3RhcnR1cCB8fCAoIWhvbWVCYXNlU2V0dGluZ3MudmFsdWUgJiYgaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkpIHtcclxuXHRcdFx0dGhpcy5zdGFydHVwQ29tcGxldGVkID0gdHJ1ZTtcclxuXHRcdFx0dGhpcy5pc1N0YXJ0dXAgPSBmYWxzZTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGZvciBVUkwgcGFyYW1zIChsaWtlIG9ic2lkaWFuOi8vb3BlbiBsaW5rcykgLSBpZiBwcmVzZW50LCBza2lwIGV2ZXJ5dGhpbmdcclxuXHRcdGlmIChhd2FpdCB0aGlzLmhhc1VybFBhcmFtcygpKSB7XHJcblx0XHRcdHRoaXMuc3RhcnR1cENvbXBsZXRlZCA9IHRydWU7XHJcblx0XHRcdHRoaXMuaXNTdGFydHVwID0gZmFsc2U7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBXYWl0IGEgYml0IGZvciBPYnNpZGlhbiB0byBmaW5pc2ggcmVzdG9yaW5nIHRoZSB3b3Jrc3BhY2VcclxuXHRcdC8vIFRoaXMgZW5zdXJlcyBhbGwgdGFicyBhcmUgbG9hZGVkIGJlZm9yZSB3ZSB0cnkgdG8gY2xvc2UgdGhlbVxyXG5cdFx0Ly8gTmVlZCBsb25nZXIgZGVsYXkgdG8gZW5zdXJlIHdvcmtzcGFjZSBpcyBmdWxseSByZXN0b3JlZFxyXG5cdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpO1xyXG5cclxuXHRcdC8vIElmIGtlZXBFeGlzdGluZ1RhYnMgaXMgZmFsc2UsIGNsb3NlIEFMTCB0YWJzIGZpcnN0LCB0aGVuIG9wZW4gaG9tZSBiYXNlXHJcblx0XHQvLyBUaGlzIHNob3VsZCBPTkxZIGhhcHBlbiBvbiBzdGFydHVwLCBub3Qgd2hlbiBtYW51YWxseSBvcGVuaW5nXHJcblx0XHQvLyBXZSBjbG9zZSBldmVyeXRoaW5nIGZpcnN0LCB0aGVuIG9wZW4gZnJlc2ggLSBkb24ndCB0cnkgdG8gZmluZCB0YWJzIHRvIGtlZXBcclxuXHRcdC8vIEV4Y2VwdGlvbjogSWYgaGlkZVJlbGVhc2VOb3RlcyBpcyBPRkYsIHByZXNlcnZlIHJlbGVhc2Ugbm90ZXMgdGFiXHJcblx0XHRpZiAoIXNldHRpbmdzLmtlZXBFeGlzdGluZ1RhYnMpIHtcclxuXHRcdFx0Ly8gSWYgaGlkZVJlbGVhc2VOb3RlcyBpcyBPRkYsIHdlIHNob3VsZCBwcmVzZXJ2ZSByZWxlYXNlIG5vdGVzIHRhYlxyXG5cdFx0XHRsZXQgZXhjZXB0TGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xyXG5cdFx0XHRpZiAoIXNldHRpbmdzLmhpZGVSZWxlYXNlTm90ZXMpIHtcclxuXHRcdFx0XHQvLyBUcnkgdG8gZmluZCByZWxlYXNlIG5vdGVzIHRhYlxyXG5cdFx0XHRcdGNvbnN0IGFsbExlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ21hcmtkb3duJyk7XHJcblx0XHRcdFx0Zm9yIChjb25zdCBsZWFmIG9mIGFsbExlYXZlcykge1xyXG5cdFx0XHRcdFx0Y29uc3QgdmlldyA9IGxlYWYudmlldztcclxuXHRcdFx0XHRcdCBcclxuXHRcdFx0XHRcdGNvbnN0IG1hcmtkb3duVmlldyA9IHZpZXcgYXMgdW5rbm93biBhcyB7IGZpbGU/OiBURmlsZTsgY29udGFpbmVyRWw/OiBIVE1MRWxlbWVudCB9O1xyXG5cdFx0XHRcdFx0aWYgKG1hcmtkb3duVmlldy5maWxlKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGUgPSBtYXJrZG93blZpZXcuZmlsZTtcclxuXHRcdFx0XHRcdC8vIFJlbGVhc2Ugbm90ZXMgYXJlIHR5cGljYWxseSBpbiBjb25maWcgZm9sZGVyIG9yIGhhdmUgc3BlY2lmaWMgbmFtaW5nXHJcblx0XHRcdFx0XHQvLyBDaGVjayBpZiBpdCdzIGEgcmVsZWFzZSBub3RlcyB0YWIgYnkgbG9va2luZyBhdCB0aGUgZmlsZSBwYXRoXHJcblx0XHRcdFx0XHRjb25zdCBjb25maWdEaXIgPSB0aGlzLmFwcC52YXVsdC5jb25maWdEaXI7XHJcblx0XHRcdFx0XHRpZiAoZmlsZS5wYXRoLmluY2x1ZGVzKCdyZWxlYXNlJykgfHwgZmlsZS5wYXRoLmluY2x1ZGVzKGNvbmZpZ0RpcikpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBpdCdzIGFjdHVhbGx5IGEgcmVsZWFzZSBub3RlcyB2aWV3XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29udGFpbmVyID0gbWFya2Rvd25WaWV3LmNvbnRhaW5lckVsO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChjb250YWluZXIgJiYgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5yZWxlYXNlLW5vdGVzJykpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGV4Y2VwdExlYWYgPSBsZWFmO1xyXG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDbG9zZSBBTEwgdGFicyAtIGRvbid0IHRyeSB0byBrZWVwIGFueSwganVzdCBjbG9zZSBldmVyeXRoaW5nIChleGNlcHQgcmVsZWFzZSBub3RlcyBpZiBhcHBsaWNhYmxlKVxyXG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5jbG9zZUFsbExlYXZlc0V4Y2VwdChleGNlcHRMZWFmKTtcclxuXHRcdFx0Ly8gV2FpdCBsb25nZXIgdG8gZW5zdXJlIGFsbCBkZXRhY2htZW50cyBhcmUgcHJvY2Vzc2VkXHJcblx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAyMDApKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBPbiBzdGFydHVwLCB1c2UgZ2hvc3QgdGFiIGlmIHN0aWNreSBpY29uIGlzIGVuYWJsZWQsIG90aGVyd2lzZSB1c2Ugbm9ybWFsIG9wZW5Ib21lQmFzZVxyXG5cdFx0aWYgKHNldHRpbmdzLnNob3dTdGlja3lIb21lSWNvbikge1xyXG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5vcGVuSG9tZUJhc2VJbkdob3N0VGFiKHtcclxuXHRcdFx0XHRydW5Db21tYW5kOiB0cnVlLFxyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIEFsd2F5cyBjYWxsIG9wZW5Ib21lQmFzZSAtIGl0IHdpbGwgb3BlbiBob21lIGJhc2UgaWYgbm90IGFscmVhZHkgb3BlblxyXG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5vcGVuSG9tZUJhc2Uoe1xyXG5cdFx0XHRcdHJlcGxhY2VBY3RpdmVMZWFmOiBmYWxzZSxcclxuXHRcdFx0XHRydW5Db21tYW5kOiB0cnVlLFxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnN0YXJ0dXBDb21wbGV0ZWQgPSB0cnVlO1xyXG5cdFx0dGhpcy5pc1N0YXJ0dXAgPSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIHRoZSBzZXR0aW5ncyBtb2RhbCBpcyBjdXJyZW50bHkgb3BlblxyXG5cdCAqL1xyXG5cdHByaXZhdGUgaXNTZXR0aW5nc01vZGFsT3BlbigpOiBib29sZWFuIHtcclxuXHRcdC8vIENoZWNrIGZvciBzZXR0aW5ncyBtb2RhbCBieSBsb29raW5nIGZvciB0aGUgbW9kYWwgY29udGFpbmVyXHJcblx0XHQvLyBUcnkgbXVsdGlwbGUgc2VsZWN0b3JzIHRvIGJlIG1vcmUgcm9idXN0XHJcblx0XHRjb25zdCBzZXR0aW5nc01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRhaW5lci5tb2Qtc2V0dGluZ3MnKSB8fFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC5tb2Qtc2V0dGluZ3MnKSB8fFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52ZXJ0aWNhbC10YWItY29udGVudCcpO1xyXG5cdFx0XHJcblx0XHQvLyBBbHNvIGNoZWNrIGlmIGFueSBtb2RhbCBpcyBvcGVuIGFuZCBjb250YWlucyBzZXR0aW5ncyBjb250ZW50XHJcblx0XHRpZiAoIXNldHRpbmdzTW9kYWwpIHtcclxuXHRcdFx0Y29uc3QgYWxsTW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsLWNvbnRhaW5lcicpO1xyXG5cdFx0XHRmb3IgKGNvbnN0IG1vZGFsIG9mIEFycmF5LmZyb20oYWxsTW9kYWxzKSkge1xyXG5cdFx0XHRcdGlmIChtb2RhbC5xdWVyeVNlbGVjdG9yKCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcclxuXHRcdFx0XHQgICAgbW9kYWwucXVlcnlTZWxlY3RvcignLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdCAgICBtb2RhbC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZC1zZXR0aW5ncycpKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHNldHRpbmdzTW9kYWwgIT09IG51bGw7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBmb3IgVVJMIHBhcmFtZXRlcnMgdGhhdCBpbmRpY2F0ZSBPYnNpZGlhbiB3YXMgb3BlbmVkIHZpYSBhIGxpbmtcclxuXHQgKiBCYXNlZCBvbiBvYnNpZGlhbi1ob21lcGFnZSBpbXBsZW1lbnRhdGlvblxyXG5cdCAqL1xyXG5cdHByaXZhdGUgYXN5bmMgaGFzVXJsUGFyYW1zKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0Ly8gQ2hlY2sgZm9yIG1vYmlsZSBVUkwgcGFyYW1zIChDYXBhY2l0b3IgQVBJKVxyXG5cdFx0Y29uc3Qgd2luZG93QW55ID0gd2luZG93IGFzIHVua25vd24gYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XHJcblx0XHRcclxuXHRcdGNvbnN0IGNhcGFjaXRvciA9IHdpbmRvd0FueS5DYXBhY2l0b3IgYXMgeyBQbHVnaW5zPzogeyBBcHA/OiB7IGdldExhdW5jaFVybDogKCkgPT4gUHJvbWlzZTx7IHVybD86IHN0cmluZyB9IHwgbnVsbD4gfSB9IH0gfCB1bmRlZmluZWQ7XHJcblx0XHRpZiAoY2FwYWNpdG9yPy5QbHVnaW5zPy5BcHApIHtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRjb25zdCBsYXVuY2hVcmwgPSBhd2FpdCBjYXBhY2l0b3IuUGx1Z2lucy5BcHAuZ2V0TGF1bmNoVXJsKCk7XHJcblx0XHRcdFx0aWYgKGxhdW5jaFVybD8udXJsKSB7XHJcblx0XHRcdFx0XHRjb25zdCB1cmwgPSBuZXcgVVJMKGxhdW5jaFVybC51cmwpO1xyXG5cdFx0XHRcdFx0Y29uc3QgcGFyYW1zID0gQXJyYXkuZnJvbSh1cmwuc2VhcmNoUGFyYW1zLmtleXMoKSk7XHJcblx0XHRcdFx0XHRjb25zdCBhY3Rpb24gPSB1cmwuaG9zdG5hbWU7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmIChbJ29wZW4nLCAnYWR2YW5jZWQtdXJpJ10uaW5jbHVkZXMoYWN0aW9uKSAmJlxyXG5cdFx0XHRcdFx0XHRbJ2ZpbGUnLCAnZmlsZXBhdGgnLCAnd29ya3NwYWNlJ10uc29tZShlID0+IHBhcmFtcy5pbmNsdWRlcyhlKSkpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHQvLyBJZ25vcmUgZXJyb3JzXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBmb3IgZGVza3RvcCBVUkwgcGFyYW1zXHJcblx0XHRjb25zdCBvYnNBY3QgPSB3aW5kb3dBbnkuT0JTX0FDVCBhcyB7IGFjdGlvbj86IHN0cmluZyB9IHwgdW5kZWZpbmVkO1xyXG5cdFx0aWYgKG9ic0FjdCkge1xyXG5cdFx0XHRjb25zdCBwYXJhbXMgPSBPYmplY3Qua2V5cyhvYnNBY3QpO1xyXG5cdFx0XHRjb25zdCBhY3Rpb24gPSBvYnNBY3QuYWN0aW9uO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGFjdGlvbiAmJiBbJ29wZW4nLCAnYWR2YW5jZWQtdXJpJ10uaW5jbHVkZXMoYWN0aW9uKSAmJlxyXG5cdFx0XHRcdFsnZmlsZScsICdmaWxlcGF0aCcsICd3b3Jrc3BhY2UnXS5zb21lKGUgPT4gcGFyYW1zLmluY2x1ZGVzKGUpKSkge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlIGxheW91dCBjaGFuZ2UgZXZlbnQgLSBjaGVjayBmb3IgbmV3IGVtcHR5IHRhYnNcclxuXHQgKiBCYXNlZCBvbiBuZXctdGFiLWRlZmF1bHQtcGFnZSBpbXBsZW1lbnRhdGlvblxyXG5cdCAqL1xyXG5cdGhhbmRsZUxheW91dENoYW5nZSgpOiB2b2lkIHtcclxuXHRcdC8vIFNraXAgZHVyaW5nIHN0YXJ0dXBcclxuXHRcdGlmICh0aGlzLmlzU3RhcnR1cCB8fCAhdGhpcy5zdGFydHVwQ29tcGxldGVkKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBhbGwgbGVhdmVzIGZvciBuZXcgZW1wdHkgb25lc1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0Ly8gU2tpcCBpZiB3ZSd2ZSBhbHJlYWR5IHNlZW4gdGhpcyBsZWFmXHJcblx0XHRcdGlmICh0aGlzLmV4aXN0aW5nTGVhdmVzLmhhcyhsZWFmKSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gTWFyayBhcyBzZWVuIEJFRk9SRSBjaGVja2luZyBpZiBpdCdzIGVtcHR5XHJcblx0XHRcdC8vIFRoaXMgcHJldmVudHMgcHJvY2Vzc2luZyB0aGUgc2FtZSBsZWFmIG11bHRpcGxlIHRpbWVzXHJcblx0XHRcdHRoaXMuZXhpc3RpbmdMZWF2ZXMuYWRkKGxlYWYpO1xyXG5cclxuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBpcyBhbiBlbXB0eSB0YWJcclxuXHRcdFx0aWYgKCF0aGlzLmlzRW1wdHlUYWIobGVhZikpIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgdGhlIG9ubHkgdGFiIChhbGwgdGFicyB3ZXJlIGNsb3NlZClcclxuXHRcdFx0Y29uc3QgaXNPbmx5VGFiID0gdGhpcy5pc09ubHlUYWIobGVhZik7XHJcblxyXG5cdFx0XHQvLyBIYW5kbGUgXCJPcGVuIHdoZW4gYWxsIHRhYnMgYXJlIGNsb3NlZFwiIC0gd29ya3MgaW5kZXBlbmRlbnRseSBvZiByZXBsYWNlTmV3VGFiXHJcblx0XHRcdGlmIChpc09ubHlUYWIgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbldoZW5BbGxUYWJzQ2xvc2VkID09PSB0cnVlKSB7XHJcblx0XHRcdFx0Ly8gT3BlbiBob21lIGJhc2Ugd2hlbiBhbGwgdGFicyBhcmUgY2xvc2VkXHJcblx0XHRcdFx0dm9pZCB0aGlzLnJlcGxhY2VFbXB0eVRhYihsZWFmLCB0cnVlKTsgLy8gUGFzcyB0cnVlIHRvIGluZGljYXRlIHRoaXMgaXMgZm9yIFwiYWxsIHRhYnMgY2xvc2VkXCJcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEhhbmRsZSBcIlJlcGxhY2UgbmV3IHRhYnNcIiAtIG9ubHkgaWYgZW5hYmxlZFxyXG5cdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU5ld1RhYiAhPT0gdHJ1ZSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gRG91YmxlLWNoZWNrIHJlcGxhY2VOZXdUYWIgaXMgc3RpbGwgdHJ1ZSAoaW4gY2FzZSBpdCBjaGFuZ2VkIGR1cmluZyBwcm9jZXNzaW5nKVxyXG5cdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU5ld1RhYiAhPT0gdHJ1ZSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSGFuZGxlIGJhc2VkIG9uIG1vZGVcclxuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm5ld1RhYk1vZGUgPT09ICdvbmx5LXdoZW4tZW1wdHknKSB7XHJcblx0XHRcdFx0Ly8gT25seSByZXBsYWNlIGlmIHRoaXMgaXMgdGhlIG9ubHkgdGFiXHJcblx0XHRcdFx0aWYgKCFpc09ubHlUYWIpIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFJlcGxhY2UgdGhlIGVtcHR5IHRhYiB3aXRoIGhvbWUgYmFzZSAoZm9yIG5ldyB0YWIgcmVwbGFjZW1lbnQpXHJcblx0XHRcdHZvaWQgdGhpcy5yZXBsYWNlRW1wdHlUYWIobGVhZiwgZmFsc2UpOyAvLyBQYXNzIGZhbHNlIHRvIGluZGljYXRlIHRoaXMgaXMgZm9yIFwibmV3IHRhYiByZXBsYWNlbWVudFwiXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIGEgbGVhZiBpcyBhbiBlbXB0eSB0YWJcclxuXHQgKiBJTVBPUlRBTlQ6IE9ubHkgcmV0dXJucyB0cnVlIGlmIHRoZSBsZWFmIGlzIHRydWx5IGVtcHR5IChubyBmaWxlIG9wZW5lZClcclxuXHQgKiBJZiBhIGZpbGUgaXMgYWxyZWFkeSBvcGVuZWQgaW4gdGhlIGxlYWYsIGl0J3Mgbm90IGVtcHR5IGFuZCBzaG91bGQgTk9UIGJlIHJlcGxhY2VkXHJcblx0ICovXHJcblx0cHJpdmF0ZSBpc0VtcHR5VGFiKGxlYWY6IFdvcmtzcGFjZUxlYWYpOiBib29sZWFuIHtcclxuXHRcdGlmICghbGVhZi52aWV3KSByZXR1cm4gdHJ1ZTtcclxuXHRcdFxyXG5cdFx0Ly8gQ2hlY2sgaWYgdmlldyB0eXBlIGlzIGVtcHR5XHJcblx0XHRpZiAobGVhZi52aWV3LmdldFZpZXdUeXBlKCkgIT09ICdlbXB0eScpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBEb3VibGUtY2hlY2s6IGlmIHRoZSB2aWV3IGhhcyBhIHN0YXRlIHdpdGggYSBmaWxlLCBpdCdzIG5vdCBlbXB0eVxyXG5cdFx0Ly8gVGhpcyBwcmV2ZW50cyByZXBsYWNpbmcgdGFicyB0aGF0IHdlcmUganVzdCBvcGVuZWQgd2l0aCBmaWxlcyBmcm9tIGV4cGxvcmVyXHJcblx0XHRjb25zdCB2aWV3U3RhdGUgPSBsZWFmLmdldFZpZXdTdGF0ZSgpO1xyXG5cdFx0aWYgKHZpZXdTdGF0ZSAmJiAodmlld1N0YXRlIGFzIHsgZmlsZT86IHN0cmluZyB9KS5maWxlKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiB0aGlzIGlzIHRoZSBvbmx5IHRhYiBpbiB0aGUgbWFpbiB3b3Jrc3BhY2VcclxuXHQgKiBPbmx5IGNvdW50cyByb290IGxlYXZlcyAobWFpbiB3b3Jrc3BhY2UgdGFicyksIG5vdCBzaWRlYmFyIHRhYnNcclxuXHQgKiBCYXNlZCBvbiBvYnNpZGlhbi1kaXNhYmxlLXRhYnMgcGF0dGVybiB1c2luZyBpdGVyYXRlUm9vdExlYXZlc1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgaXNPbmx5VGFiKGxlYWY6IFdvcmtzcGFjZUxlYWYpOiBib29sZWFuIHtcclxuXHRcdGxldCB0YWJDb3VudCA9IDA7XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZVJvb3RMZWF2ZXMoKGwpID0+IHtcclxuXHRcdFx0dGFiQ291bnQrKztcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRjb25zdCByZXN1bHQgPSB0YWJDb3VudCA9PT0gMTtcclxuXHRcdGNvbnNvbGUuZGVidWcoJ1tIb21lIEJhc2VdIGlzT25seVRhYjonLCB7XHJcblx0XHRcdGxlYWY6IGxlYWYsXHJcblx0XHRcdHRhYkNvdW50OiB0YWJDb3VudCxcclxuXHRcdFx0aXNPbmx5VGFiOiByZXN1bHRcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gcmVzdWx0O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVwbGFjZSBhbiBlbXB0eSB0YWIgd2l0aCB0aGUgaG9tZSBiYXNlIG9yIG5ldyB0YWIgZmlsZVxyXG5cdCAqIEBwYXJhbSBsZWFmIFRoZSBsZWFmIHRvIHJlcGxhY2VcclxuXHQgKiBAcGFyYW0gaXNBbGxUYWJzQ2xvc2VkIFdoZXRoZXIgdGhpcyBpcyB0cmlnZ2VyZWQgYnkgXCJhbGwgdGFicyBjbG9zZWRcIiAodHJ1ZSkgb3IgXCJuZXcgdGFiIHJlcGxhY2VtZW50XCIgKGZhbHNlKVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgYXN5bmMgcmVwbGFjZUVtcHR5VGFiKGxlYWY6IFdvcmtzcGFjZUxlYWYsIGlzQWxsVGFic0Nsb3NlZDogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHQvLyBJZiB0aGlzIGlzIGZvciBuZXcgdGFiIHJlcGxhY2VtZW50IChub3QgYWxsIHRhYnMgY2xvc2VkKSwgY2hlY2sgcmVwbGFjZU5ld1RhYlxyXG5cdFx0aWYgKCFpc0FsbFRhYnNDbG9zZWQpIHtcclxuXHRcdFx0Ly8gQ1JJVElDQUw6IENoZWNrIHJlcGxhY2VOZXdUYWIgb25lIG1vcmUgdGltZSBiZWZvcmUgYWN0dWFsbHkgcmVwbGFjaW5nXHJcblx0XHRcdC8vIFRoaXMgcHJldmVudHMgcmFjZSBjb25kaXRpb25zIHdoZXJlIHRoZSBzZXR0aW5nIGNoYW5nZWQgYmV0d2VlbiBjaGVja3NcclxuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGxhY2VOZXdUYWIgIT09IHRydWUpIHtcclxuXHRcdFx0XHRjb25zb2xlLmRlYnVnKCdbSG9tZSBCYXNlXSByZXBsYWNlRW1wdHlUYWI6IHJlcGxhY2VOZXdUYWIgaXMgbm90IHRydWUsIGFib3J0aW5nJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU21hbGwgZGVsYXkgdG8gaGFuZGxlIHJhY2UgY29uZGl0aW9ucyB3aXRoIG90aGVyIHBsdWdpbnNcclxuXHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MCkpO1xyXG5cclxuXHRcdC8vIElmIHRoaXMgaXMgZm9yIG5ldyB0YWIgcmVwbGFjZW1lbnQsIGNoZWNrIGFnYWluIGFmdGVyIGRlbGF5XHJcblx0XHRpZiAoIWlzQWxsVGFic0Nsb3NlZCkge1xyXG5cdFx0XHQvLyBGaW5hbCBjaGVjayBhZnRlciBkZWxheSAtIHNldHRpbmcgbWlnaHQgaGF2ZSBjaGFuZ2VkXHJcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBsYWNlTmV3VGFiICE9PSB0cnVlKSB7XHJcblx0XHRcdFx0Y29uc29sZS5kZWJ1ZygnW0hvbWUgQmFzZV0gcmVwbGFjZUVtcHR5VGFiOiByZXBsYWNlTmV3VGFiIGNoYW5nZWQgZHVyaW5nIGRlbGF5LCBhYm9ydGluZycpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gSWYgdGhpcyBpcyBmb3IgYWxsIHRhYnMgY2xvc2VkLCBjaGVjayB0aGF0IHNldHRpbmcgaW5zdGVhZFxyXG5cdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbldoZW5BbGxUYWJzQ2xvc2VkICE9PSB0cnVlKSB7XHJcblx0XHRcdFx0Y29uc29sZS5kZWJ1ZygnW0hvbWUgQmFzZV0gcmVwbGFjZUVtcHR5VGFiOiBvcGVuV2hlbkFsbFRhYnNDbG9zZWQgY2hhbmdlZCBkdXJpbmcgZGVsYXksIGFib3J0aW5nJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRG91YmxlLWNoZWNrIHRoZSB0YWIgaXMgc3RpbGwgZW1wdHlcclxuXHRcdGlmICghdGhpcy5pc0VtcHR5VGFiKGxlYWYpKSB7XHJcblx0XHRcdGNvbnNvbGUuZGVidWcoJ1tIb21lIEJhc2VdIHJlcGxhY2VFbXB0eVRhYjogVGFiIGlzIG5vIGxvbmdlciBlbXB0eSwgc2tpcHBpbmcnKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIElmIHRoaXMgaXMgZm9yIFwiYWxsIHRhYnMgY2xvc2VkXCIsIHVzZSBob21lIGJhc2Ugc2V0dGluZ3NcclxuXHRcdC8vIE90aGVyd2lzZSwgdXNlIG5ldyB0YWIgc2V0dGluZ3MgKGZvciBcInJlcGxhY2UgbmV3IHRhYnNcIiBmZWF0dXJlKVxyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSBpc0FsbFRhYnNDbG9zZWQgXHJcblx0XHRcdD8gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpXHJcblx0XHRcdDogdGhpcy5wbHVnaW4uZ2V0TmV3VGFiU2V0dGluZ3MoKTtcclxuXHRcdFxyXG5cdFx0Y29uc29sZS5kZWJ1ZygnW0hvbWUgQmFzZV0gcmVwbGFjZUVtcHR5VGFiOicsIHtcclxuXHRcdFx0bGVhZjogbGVhZixcclxuXHRcdFx0aXNBbGxUYWJzQ2xvc2VkOiBpc0FsbFRhYnNDbG9zZWQsXHJcblx0XHRcdHNldHRpbmdzOiBzZXR0aW5ncyxcclxuXHRcdFx0cmVwbGFjZU5ld1RhYjogdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU5ld1RhYixcclxuXHRcdFx0bmV3VGFiTW9kZTogdGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3VGFiTW9kZSxcclxuXHRcdFx0dXNlRGlmZmVyZW50RmlsZUZvck5ld1RhYjogdGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlRGlmZmVyZW50RmlsZUZvck5ld1RhYlxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdC8vIE9wZW4gZmlsZSBpbiB0aGlzIGxlYWZcclxuXHRcdC8vIFBhc3MgaXNOZXdUYWI9dHJ1ZSB0byBza2lwIHBpbm5pbmcvZ2hvc3QgdGFiIGxvZ2ljIC0gbmV3IHRhYnMgc2hvdWxkIHdvcmsgaW5kZXBlbmRlbnRseVxyXG5cdFx0Y29uc3Qgc3VjY2VzcyA9IGF3YWl0IHRoaXMucGx1Z2luLmhvbWVTZXJ2aWNlLm9wZW5JbkxlYWZXaXRoU2V0dGluZ3MobGVhZiwgc2V0dGluZ3MsIHRydWUpO1xyXG5cdFx0XHJcblx0XHRpZiAoIXN1Y2Nlc3MpIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKCdbSG9tZSBCYXNlXSBGYWlsZWQgdG8gb3BlbiBmaWxlOicsIHNldHRpbmdzKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNvbnNvbGUuZGVidWcoJ1tIb21lIEJhc2VdIHJlcGxhY2VFbXB0eVRhYjogU3VjY2Vzc2Z1bGx5IG9wZW5lZCBmaWxlJyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBGb3JjZSBjaGVjayBmb3IgZW1wdHkgd29ya3NwYWNlIGFuZCBvcGVuIGhvbWUgYmFzZVxyXG5cdCAqL1xyXG5cdGFzeW5jIG9wZW5JZkVtcHR5KCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Ly8gQ2hlY2sgaWYgdGhlcmUncyBhbiBlbXB0eSB2aWV3XHJcblx0XHRjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoVmlldyk7XHJcblx0XHRjb25zdCBhY3RpdmVMZWFmID0gYWN0aXZlVmlldz8ubGVhZjtcclxuXHJcblx0XHRpZiAoIWFjdGl2ZUxlYWYpIHJldHVybjtcclxuXHJcblx0XHQvLyBDaGVjayBpZiBpdCdzIGVtcHR5IGFuZCBpcyB0aGUgb25seSB0YWJcclxuXHRcdGlmICh0aGlzLmlzRW1wdHlUYWIoYWN0aXZlTGVhZikgJiYgdGhpcy5pc09ubHlUYWIoYWN0aXZlTGVhZikpIHtcclxuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uaG9tZVNlcnZpY2Uub3BlbkluTGVhZihhY3RpdmVMZWFmKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwgIi8qKlxuICogU3RpY2t5IFRhYiBTZXJ2aWNlXG4gKiBNYW5hZ2VzIHRoZSBzdGlja3kgaG9tZSBpY29uIGluIHRoZSB0YWIgYmFyXG4gKi9cblxuaW1wb3J0IHsgTWVudSwgUGxhdGZvcm0sIHNldEljb24sIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBIb21lQmFzZVBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IGdldEZpbGVCeVBhdGgsIGxlYWZIYXNGaWxlIH0gZnJvbSAnLi4vdXRpbHMvZmlsZS11dGlscyc7XG5pbXBvcnQgeyBJY29uUGlja2VyIH0gZnJvbSAnLi4vdWkvaWNvbi1waWNrZXInO1xuXG4vKipcbiAqIENTUyBjbGFzcyBmb3IgdGhlIHN0aWNreSBob21lIGljb24gY29udGFpbmVyXG4gKi9cbmNvbnN0IFNUSUNLWV9JQ09OX0NMQVNTID0gJ2hvbWUtYmFzZS1zdGlja3ktaWNvbic7XG5jb25zdCBTVElDS1lfSUNPTl9BQ1RJVkVfQ0xBU1MgPSAnaG9tZS1iYXNlLXN0aWNreS1pY29uLWFjdGl2ZSc7XG5cbi8qKlxuICogRXh0ZW5kZWQgSFRNTEVsZW1lbnQgaW50ZXJmYWNlIGZvciBzdGlja3kgaWNvbiB3aXRoIGN1c3RvbSBwcm9wZXJ0aWVzXG4gKi9cbmludGVyZmFjZSBTdGlja3lJY29uRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcblx0X2NoZWNrSW50ZXJ2YWw/OiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRJbnRlcnZhbD47XG5cdF9jb250YWluZXJPYnNlcnZlcj86IE11dGF0aW9uT2JzZXJ2ZXI7XG59XG5cbi8qKlxuICogRXh0ZW5kZWQgSFRNTEVsZW1lbnQgaW50ZXJmYWNlIGZvciB0YWIgaGVhZGVyIHdpdGggaG9tZSBiYXNlIHByb3BlcnRpZXNcbiAqL1xuaW50ZXJmYWNlIFRhYkhlYWRlckVsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG5cdF9ob21lQmFzZVBhcmVudD86IEhUTUxFbGVtZW50O1xuXHRfaG9tZUJhc2VOZXh0U2libGluZz86IE5vZGUgfCBudWxsO1xufVxuXG5leHBvcnQgY2xhc3MgU3RpY2t5VGFiU2VydmljZSB7XG5cdHByaXZhdGUgcGx1Z2luOiBIb21lQmFzZVBsdWdpbjtcblx0cHJpdmF0ZSBzdGlja3lJY29uRWw6IFN0aWNreUljb25FbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgbGF5b3V0Q2hhbmdlSGFuZGxlcjogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgdGFiSGVhZGVyVXBkYXRlVGltZW91dDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBzaWRlYmFyT2JzZXJ2ZXI6IE11dGF0aW9uT2JzZXJ2ZXIgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSB0YWJIZWFkZXJPYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlciB8IG51bGwgPSBudWxsO1xuXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogSG9tZUJhc2VQbHVnaW4pIHtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgdGhlIHN0aWNreSB0YWIgaWNvbiBiYXNlZCBvbiBzZXR0aW5nc1xuXHQgKi9cblx0dXBkYXRlKCk6IHZvaWQge1xuXHRcdC8vIE9ubHkgc2hvdyBvbiBkZXNrdG9wXG5cdFx0aWYgKFBsYXRmb3JtLmlzTW9iaWxlKSB7XG5cdFx0XHR0aGlzLnJlbW92ZSgpO1xuXHRcdFx0dGhpcy51cGRhdGVUYWJIZWFkZXJzKCk7IC8vIENsZWFuIHVwIHRhYiBoZWFkZXJzXG5cdFx0XHR0aGlzLnVwZGF0ZVdvcmtzcGFjZUNsYXNzKGZhbHNlKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uKSB7XG5cdFx0XHRpZiAodGhpcy5zdGlja3lJY29uRWwpIHtcblx0XHRcdFx0Ly8gSWNvbiBhbHJlYWR5IGV4aXN0cywganVzdCB1cGRhdGUgdGhlIGljb25cblx0XHRcdFx0Y29uc3QgaWNvbk5hbWUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGlja3lJY29uTmFtZSB8fCAnaG9tZSc7XG5cdFx0XHRcdHNldEljb24odGhpcy5zdGlja3lJY29uRWwsIGljb25OYW1lKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEljb24gZG9lc24ndCBleGlzdCwgY3JlYXRlIGl0XG5cdFx0XHRcdHRoaXMuY3JlYXRlKCk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLnVwZGF0ZVdvcmtzcGFjZUNsYXNzKHRydWUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnJlbW92ZSgpO1xuXHRcdFx0dGhpcy51cGRhdGVUYWJIZWFkZXJzKCk7IC8vIENsZWFuIHVwIHRhYiBoZWFkZXJzIHdoZW4gcmVtb3ZpbmcgaWNvblxuXHRcdFx0dGhpcy51cGRhdGVXb3Jrc3BhY2VDbGFzcyhmYWxzZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEFkZC9yZW1vdmUgQ1NTIGNsYXNzIG9uIGFsbCB3b3Jrc3BhY2VzIHRvIGNvbmRpdGlvbmFsbHkgYXBwbHkgc3R5bGVzXG5cdCAqL1xuXHRwcml2YXRlIHVwZGF0ZVdvcmtzcGFjZUNsYXNzKGVuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcblx0XHRjb25zdCBhcHBseVRvRG9jdW1lbnQgPSAoZG9jOiBEb2N1bWVudCkgPT4ge1xuXHRcdFx0Y29uc3QgbWFpbldvcmtzcGFjZSA9IGRvYy5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLXNwbGl0Lm1vZC12ZXJ0aWNhbC5tb2Qtcm9vdCcpO1xuXHRcdGlmICghbWFpbldvcmtzcGFjZSkgcmV0dXJuO1xuXG5cdFx0aWYgKGVuYWJsZWQpIHtcblx0XHRcdG1haW5Xb3Jrc3BhY2UuY2xhc3NMaXN0LmFkZCgnaG9tZS1iYXNlLXN0aWNreS1pY29uLWVuYWJsZWQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bWFpbldvcmtzcGFjZS5jbGFzc0xpc3QucmVtb3ZlKCdob21lLWJhc2Utc3RpY2t5LWljb24tZW5hYmxlZCcpO1xuXHRcdH1cblx0XHR9O1xuXG5cdFx0Ly8gQXBwbHkgdG8gbWFpbiB3aW5kb3dcblx0XHRhcHBseVRvRG9jdW1lbnQoZG9jdW1lbnQpO1xuXG5cdFx0Ly8gQXBwbHkgdG8gYWxsIG90aGVyIHdpbmRvd3Ncblx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcblx0XHRcdGNvbnN0IGRvYyA9IGxlYWYudmlldz8uY29udGFpbmVyRWw/Lm93bmVyRG9jdW1lbnQ7XG5cdFx0XHRpZiAoZG9jICYmIGRvYyAhPT0gZG9jdW1lbnQpIHtcblx0XHRcdFx0YXBwbHlUb0RvY3VtZW50KGRvYyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlIHRoZSBzdGlja3kgaG9tZSBpY29uXG5cdCAqL1xuXHRwcml2YXRlIGNyZWF0ZSgpOiB2b2lkIHtcblx0XHQvLyBSZW1vdmUgZXhpc3RpbmcgaWNvbiBmaXJzdFxuXHRcdHRoaXMucmVtb3ZlKCk7XG5cblx0XHQvLyBDcmVhdGUgdGhlIHN0aWNreSBpY29uIGVsZW1lbnQgb25jZVxuXHRcdHRoaXMuc3RpY2t5SWNvbkVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0dGhpcy5zdGlja3lJY29uRWwuY2xhc3NOYW1lID0gYCR7U1RJQ0tZX0lDT05fQ0xBU1N9IGNsaWNrYWJsZS1pY29uYDtcblx0XHR0aGlzLnN0aWNreUljb25FbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnT3BlbiBob21lIGJhc2UnKTtcblx0XHR0aGlzLnN0aWNreUljb25FbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdG9vbHRpcC1wb3NpdGlvbicsICdib3R0b20nKTtcblxuXHRcdC8vIEFkZCB0aGUgaWNvbiBmcm9tIHNldHRpbmdzIChkZWZhdWx0IHRvICdob21lJylcblx0XHRjb25zdCBpY29uTmFtZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnN0aWNreUljb25OYW1lIHx8ICdob21lJztcblx0XHRzZXRJY29uKHRoaXMuc3RpY2t5SWNvbkVsLCBpY29uTmFtZSk7XG5cblx0XHQvLyBBZGQgY2xpY2sgaGFuZGxlclxuXHRcdHRoaXMuc3RpY2t5SWNvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcblx0XHRcdC8vIE9wZW4gaG9tZSBiYXNlIGluIGdob3N0IHRhYiAoYWx3YXlzIHVzZSBnaG9zdCB0YWIgZm9yIHN0aWNreSBpY29uKVxuXHRcdFx0dm9pZCB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5vcGVuSG9tZUJhc2VJbkdob3N0VGFiKHtcblx0XHRcdFx0cnVuQ29tbWFuZDogdHJ1ZSxcblx0XHRcdH0pLnRoZW4oKCkgPT4ge1xuXHRcdFx0XHQvLyBVcGRhdGUgdGFiIGhlYWRlcnMgYWZ0ZXIgb3BlbmluZywgd2l0aCBhIHNsaWdodCBkZWxheSB0byBsZXQgYW5pbWF0aW9ucyBjb21wbGV0ZVxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZVRhYkhlYWRlcnMoKTtcblx0XHRcdFx0fSwgMTUwKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Ly8gQWRkIGNvbnRleHQgbWVudSBmb3IgY2hhbmdpbmcgaWNvbiBhbmQgY2xvc2luZyBob21lIGJhc2Vcblx0XHR0aGlzLnN0aWNreUljb25FbC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChlKSA9PiB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XG5cdFx0XHRjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcblx0XHRcdFxuXHRcdFx0Ly8gQWRkIENsb3NlIGhvbWUgYmFzZSBvcHRpb24gKGZpcnN0KVxuXHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG5cdFx0XHRcdGl0ZW1cblx0XHRcdFx0XHQuc2V0VGl0bGUoJ0Nsb3NlIGhvbWUgYmFzZScpXG5cdFx0XHRcdFx0LnNldEljb24oJ3gnKVxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdC8vIEFjdHVhbGx5IGNsb3NlIGl0IChpbmNsdWRpbmcgZ2hvc3QgdGFiIGlmIHN0aWNreSBpY29uIGlzIGVuYWJsZWQpXG5cdFx0XHRcdFx0XHQvLyBJZiBuZXcgdGFiIHJlcGxhY2VtZW50IGlzIGVuYWJsZWQsIGl0IHdpbGwgcmVvcGVuIHdoZW4geW91IGNyZWF0ZSBhIG5ldyB0YWJcblx0XHRcdFx0XHRcdHZvaWQgdGhpcy5jbG9zZUhvbWVCYXNlKHRydWUpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdC8vIEFkZCBDaGFuZ2UgaWNvbiBvcHRpb24gKHNlY29uZClcblx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuXHRcdFx0XHRpdGVtXG5cdFx0XHRcdFx0LnNldFRpdGxlKCdDaGFuZ2UgaWNvbicpXG5cdFx0XHRcdFx0LnNldEljb24oJ2x1Y2lkZS1pbWFnZS1wbHVzJylcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBwaWNrZXIgPSBuZXcgSWNvblBpY2tlcihcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uYXBwLFxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGlja3lJY29uTmFtZSxcblx0XHRcdFx0XHRcdFx0KGljb246IHN0cmluZyB8IG51bGwpID0+IHtcblx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGlja3lJY29uTmFtZSA9IGljb247XG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSB0aGUgaWNvbiBkaXNwbGF5XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5zdGlja3lJY29uRWwpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0SWNvbih0aGlzLnN0aWNreUljb25FbCwgaWNvbiB8fCAnaG9tZScpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRwaWNrZXIub3BlbigpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0XHRtZW51LnNob3dBdE1vdXNlRXZlbnQoZSk7XG5cdFx0fSk7XG5cblx0XHQvLyBGdW5jdGlvbiB0byBlbnN1cmUgaWNvbiBpcyBpbiB0aGUgcmlnaHQgcGxhY2Vcblx0XHQvLyBJbnNlcnQgaXQgaW50byB0aGUgd29ya3NwYWNlLXRhYi1oZWFkZXItY29udGFpbmVyLWlubmVyIHNvIGl0J3MgcGFydCBvZiB0aGUgdGFiIGJhciBzdHJ1Y3R1cmVcblx0XHQvLyBUaGlzIG1ha2VzIGl0IGF1dG9tYXRpY2FsbHkgaGlkZSB3aGVuIHBsdWdpbnMvdGhlbWVzIGhpZGUgdGhlIHRhYiBiYXJcblx0XHRjb25zdCBlbnN1cmVJY29uSW5QbGFjZSA9ICgpID0+IHtcblx0XHRcdGlmICghdGhpcy5zdGlja3lJY29uRWwpIHJldHVybjtcblxuXHRcdFx0Y29uc3QgbWFpbldvcmtzcGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXZlcnRpY2FsLm1vZC1yb290Jyk7XG5cdFx0XHRpZiAoIW1haW5Xb3Jrc3BhY2UpIHJldHVybjtcblxuXHRcdFx0Ly8gRmluZCB0aGUgd29ya3NwYWNlLXRhYi1oZWFkZXItY29udGFpbmVyLWlubmVyIChpbnNpZGUgdGhlIHRhYiBjb250YWluZXIpXG5cdFx0XHRjb25zdCB0YWJIZWFkZXJDb250YWluZXJJbm5lciA9IG1haW5Xb3Jrc3BhY2UucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS10YWItaGVhZGVyLWNvbnRhaW5lci1pbm5lcicpO1xuXHRcdFx0aWYgKCF0YWJIZWFkZXJDb250YWluZXJJbm5lcikgcmV0dXJuO1xuXG5cdFx0XHQvLyBSZW1vdmUgYW55IGR1cGxpY2F0ZSBpY29ucyBmaXJzdCAoaW4gY2FzZSBtdXRhdGlvbiBvYnNlcnZlciBvciBvdGhlciBjb2RlIGNyZWF0ZWQgdGhlbSlcblx0XHRcdGNvbnN0IGFsbEljb25zID0gdGFiSGVhZGVyQ29udGFpbmVySW5uZXIucXVlcnlTZWxlY3RvckFsbChgLiR7U1RJQ0tZX0lDT05fQ0xBU1N9YCk7XG5cdFx0XHRhbGxJY29ucy5mb3JFYWNoKChpY29uKSA9PiB7XG5cdFx0XHRcdGlmIChpY29uICE9PSB0aGlzLnN0aWNreUljb25FbCkge1xuXHRcdFx0XHRcdGljb24ucmVtb3ZlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBDaGVjayBpZiBvdXIgaWNvbiBpcyBhbHJlYWR5IGluIHRoZSBjb250YWluZXJcblx0XHRcdGlmICh0YWJIZWFkZXJDb250YWluZXJJbm5lci5jb250YWlucyh0aGlzLnN0aWNreUljb25FbCkpIHtcblx0XHRcdFx0Ly8gQWxyZWFkeSBpbiBwbGFjZSwgbm90aGluZyB0byBkb1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIEljb24gaXMgbWlzc2luZyAtIHByZXBlbmQgaXQgdG8gdGhlIHRhYiBoZWFkZXIgY29udGFpbmVyIGlubmVyXG5cdFx0XHQvLyBUaGlzIG1ha2VzIGl0IHBhcnQgb2YgdGhlIHRhYiBiYXIgc3RydWN0dXJlLCBzbyBpdCBoaWRlcyBhdXRvbWF0aWNhbGx5IHdoZW4gdGFicyBhcmUgaGlkZGVuXG5cdFx0XHR0YWJIZWFkZXJDb250YWluZXJJbm5lci5pbnNlcnRCZWZvcmUodGhpcy5zdGlja3lJY29uRWwsIHRhYkhlYWRlckNvbnRhaW5lcklubmVyLmZpcnN0Q2hpbGQpO1xuXG5cdFx0XHQvLyBVcGRhdGUgYWN0aXZlIHN0YXRlIGFmdGVyIGluc2VydGlvblxuXHRcdFx0dGhpcy51cGRhdGVBY3RpdmVTdGF0ZSgpO1xuXHRcdFx0XG5cdFx0XHQvLyBVcGRhdGUgdGFiIGhlYWRlcnMgd2hlbiBpY29uIGlzIGNyZWF0ZWRcblx0XHRcdHRoaXMudXBkYXRlVGFiSGVhZGVycygpO1xuXHRcdFx0XG5cdFx0XHQvLyBFbnN1cmUgd29ya3NwYWNlIGNsYXNzIGlzIHNldFxuXHRcdFx0dGhpcy51cGRhdGVXb3Jrc3BhY2VDbGFzcyh0cnVlKTtcblx0XHRcdFxuXHRcdFx0Ly8gVXBkYXRlIGljb24gcG9zaXRpb24gYmFzZWQgb24gc2lkZWJhciBzdGF0ZVxuXHRcdFx0dGhpcy51cGRhdGVJY29uUG9zaXRpb25Gb3JTaWRlYmFyKCk7XG5cdFx0XHRcblx0XHRcdC8vIFdhdGNoIGZvciBzaWRlYmFyIGNvbGxhcHNlL2V4cGFuZCBjaGFuZ2VzXG5cdFx0XHR0aGlzLndhdGNoU2lkZWJhclN0YXRlKCk7XG5cdFx0fTtcblxuXHRcdC8vIFRyeSB0byBpbnNlcnQgaW1tZWRpYXRlbHlcblx0XHRlbnN1cmVJY29uSW5QbGFjZSgpO1xuXG5cdFx0Ly8gU2V0IHVwIGEgcmVsaWFibGUgY2hlY2sgdGhhdCBydW5zIHBlcmlvZGljYWxseSB0byBlbnN1cmUgaWNvbiBpcyBhbHdheXMgdGhlcmVcblx0XHQvLyBUaGlzIGlzIHNpbXBsZSBhbmQgcmVsaWFibGUgLSBqdXN0IGNoZWNrIGlmIGl0J3MgdGhlcmUsIGlmIG5vdCwgcHV0IGl0IGJhY2tcblx0XHRjb25zdCBjaGVja0ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuXHRcdFx0aWYgKCF0aGlzLnN0aWNreUljb25FbCB8fCAhdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uKSB7XG5cdFx0XHRcdGNsZWFySW50ZXJ2YWwoY2hlY2tJbnRlcnZhbCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGVuc3VyZUljb25JblBsYWNlKCk7XG5cdFx0fSwgMTAwKTsgLy8gQ2hlY2sgZXZlcnkgMTAwbXMgLSBtb3JlIGZyZXF1ZW50IHRvIGNhdGNoIGNvbnRhaW5lciByZWNyZWF0aW9uIGltbWVkaWF0ZWx5XG5cblx0XHQvLyBTdG9yZSBpbnRlcnZhbCBzbyB3ZSBjYW4gY2xlYXIgaXQgbGF0ZXJcblx0XHR0aGlzLnN0aWNreUljb25FbC5fY2hlY2tJbnRlcnZhbCA9IGNoZWNrSW50ZXJ2YWw7XG5cblx0XHQvLyBBbHNvIGNoZWNrIG9uIGxheW91dCBjaGFuZ2VzIC0gYnV0IGRvIGl0IGltbWVkaWF0ZWx5LCBubyBkZWxheVxuXHRcdGlmICghdGhpcy5sYXlvdXRDaGFuZ2VIYW5kbGVyKSB7XG5cdFx0XHR0aGlzLmxheW91dENoYW5nZUhhbmRsZXIgPSAoKSA9PiB7XG5cdFx0XHRcdGlmICh0aGlzLnN0aWNreUljb25FbCAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHtcblx0XHRcdFx0XHQvLyBDaGVjayBpbW1lZGlhdGVseSAtIGRvbid0IHdhaXQgZm9yIGxheW91dCB0byBzZXR0bGVcblx0XHRcdFx0XHQvLyBUaGlzIHByZXZlbnRzIGZsaWNrZXJpbmcgd2hlbiB0YWJzIGNsb3NlXG5cdFx0XHRcdFx0ZW5zdXJlSWNvbkluUGxhY2UoKTtcblx0XHRcdFx0XHQvLyBVcGRhdGUgdGFiIGhlYWRlcnMgb24gbGF5b3V0IGNoYW5nZVxuXHRcdFx0XHRcdHRoaXMudXBkYXRlVGFiSGVhZGVycygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KFxuXHRcdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKCdsYXlvdXQtY2hhbmdlJywgdGhpcy5sYXlvdXRDaGFuZ2VIYW5kbGVyKVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBBbHNvIHdhdGNoIGZvciB3aGVuIHdvcmtzcGFjZS10YWItaGVhZGVyLWNvbnRhaW5lci1pbm5lciBpcyBhZGRlZCBiYWNrIChhZnRlciBhbGwgdGFicyBjbG9zZWQpXG5cdFx0Ly8gVXNlIGEgTXV0YXRpb25PYnNlcnZlciBvbiB0aGUgd29ya3NwYWNlIHNwbGl0IHRvIGNhdGNoIGNvbnRhaW5lciByZWNyZWF0aW9uXG5cdFx0Y29uc3QgbWFpbldvcmtzcGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXZlcnRpY2FsLm1vZC1yb290Jyk7XG5cdFx0aWYgKG1haW5Xb3Jrc3BhY2UpIHtcblx0XHRcdGNvbnN0IGNvbnRhaW5lck9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuXHRcdFx0XHRpZiAoIXRoaXMuc3RpY2t5SWNvbkVsIHx8ICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHJldHVybjtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIENoZWNrIGlmIHRhYiBoZWFkZXIgY29udGFpbmVyIGlubmVyIGV4aXN0cyBhbmQgaWNvbiBpcyBtaXNzaW5nXG5cdFx0XHRcdGNvbnN0IHRhYkhlYWRlckNvbnRhaW5lcklubmVyID0gbWFpbldvcmtzcGFjZS5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLXRhYi1oZWFkZXItY29udGFpbmVyLWlubmVyJyk7XG5cdFx0XHRcdGlmICh0YWJIZWFkZXJDb250YWluZXJJbm5lcikge1xuXHRcdFx0XHRcdC8vIFJlbW92ZSBhbnkgZHVwbGljYXRlIGljb25zIGZpcnN0XG5cdFx0XHRcdFx0Y29uc3QgYWxsSWNvbnMgPSB0YWJIZWFkZXJDb250YWluZXJJbm5lci5xdWVyeVNlbGVjdG9yQWxsKGAuJHtTVElDS1lfSUNPTl9DTEFTU31gKTtcblx0XHRcdFx0XHRhbGxJY29ucy5mb3JFYWNoKChpY29uKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoaWNvbiAhPT0gdGhpcy5zdGlja3lJY29uRWwpIHtcblx0XHRcdFx0XHRcdFx0aWNvbi5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vIE9ubHkgcmUtaW5zZXJ0IGlmIG91ciBpY29uIGlzIG5vdCBhbHJlYWR5IGluIHRoZSBjb250YWluZXJcblx0XHRcdFx0XHRpZiAoIXRhYkhlYWRlckNvbnRhaW5lcklubmVyLmNvbnRhaW5zKHRoaXMuc3RpY2t5SWNvbkVsKSkge1xuXHRcdFx0XHRcdFx0Ly8gQ29udGFpbmVyIGV4aXN0cyBidXQgaWNvbiBpcyBtaXNzaW5nIC0gcmUtaW5zZXJ0IGltbWVkaWF0ZWx5XG5cdFx0XHRcdFx0XHR0YWJIZWFkZXJDb250YWluZXJJbm5lci5pbnNlcnRCZWZvcmUodGhpcy5zdGlja3lJY29uRWwsIHRhYkhlYWRlckNvbnRhaW5lcklubmVyLmZpcnN0Q2hpbGQpO1xuXHRcdFx0XHRcdFx0dGhpcy51cGRhdGVBY3RpdmVTdGF0ZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdGNvbnRhaW5lck9ic2VydmVyLm9ic2VydmUobWFpbldvcmtzcGFjZSwge1xuXHRcdFx0XHRjaGlsZExpc3Q6IHRydWUsXG5cdFx0XHRcdHN1YnRyZWU6IHRydWUsIC8vIFdhdGNoIHN1YnRyZWUgdG8gY2F0Y2ggdGFiIGNvbnRhaW5lciByZWNyZWF0aW9uXG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gU3RvcmUgb2JzZXJ2ZXIgc28gd2UgY2FuIGNsZWFuIGl0IHVwXG5cdFx0XHR0aGlzLnN0aWNreUljb25FbC5fY29udGFpbmVyT2JzZXJ2ZXIgPSBjb250YWluZXJPYnNlcnZlcjtcblx0XHR9XG5cblx0XHQvLyBTZXQgdXAgTXV0YXRpb25PYnNlcnZlciB0byB3YXRjaCBmb3IgbmV3IHRhYiBoZWFkZXJzIGFuZCByZW1vdmUgZ2hvc3QgdGFicyBpbW1lZGlhdGVseVxuXHRcdHRoaXMuc2V0dXBUYWJIZWFkZXJPYnNlcnZlcigpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNldCB1cCBNdXRhdGlvbk9ic2VydmVyIHRvIHdhdGNoIGZvciB0YWIgaGVhZGVyIGNoYW5nZXMgYW5kIHJlbW92ZSBnaG9zdCB0YWJzIGltbWVkaWF0ZWx5XG5cdCAqIFRoaXMgcHJldmVudHMgdGhlIGZsYXNoIHdoZW4gdGFicyBhcmUgb3BlbmVkL2Nsb3NlZFxuXHQgKi9cblx0cHJpdmF0ZSBzZXR1cFRhYkhlYWRlck9ic2VydmVyKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLnRhYkhlYWRlck9ic2VydmVyKSB7XG5cdFx0XHRyZXR1cm47IC8vIEFscmVhZHkgc2V0IHVwXG5cdFx0fVxuXG5cdFx0dGhpcy50YWJIZWFkZXJPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHtcblx0XHRcdC8vIE9ubHkgcHJvY2VzcyBpZiBzZXR0aW5ncyBhcmUgZW5hYmxlZFxuXHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24gfHwgIXRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVIb21lVGFiSGVhZGVyKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2hlY2sgaWYgYW55IG5ldyB0YWIgaGVhZGVycyB3ZXJlIGFkZGVkXG5cdFx0XHRsZXQgaGFzTmV3SGVhZGVycyA9IGZhbHNlO1xuXHRcdFx0Zm9yIChjb25zdCBtdXRhdGlvbiBvZiBtdXRhdGlvbnMpIHtcblx0XHRcdFx0aWYgKG11dGF0aW9uLnR5cGUgPT09ICdjaGlsZExpc3QnICYmIG11dGF0aW9uLmFkZGVkTm9kZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGZvciAoY29uc3Qgbm9kZSBvZiBBcnJheS5mcm9tKG11dGF0aW9uLmFkZGVkTm9kZXMpKSB7XG5cdFx0XHRcdFx0XHRpZiAobm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmIG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCd3b3Jrc3BhY2UtdGFiLWhlYWRlcicpKSB7XG5cdFx0XHRcdFx0XHRcdGhhc05ld0hlYWRlcnMgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGhhc05ld0hlYWRlcnMpIGJyZWFrO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoaGFzTmV3SGVhZGVycykge1xuXHRcdFx0XHQvLyBJbW1lZGlhdGVseSByZW1vdmUgYW55IGdob3N0IHRhYiBoZWFkZXJzIHRoYXQgYXBwZWFyZWRcblx0XHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLmhvbWVTZXJ2aWNlLmlzR2hvc3RMZWFmKGxlYWYpKSB7XG5cdFx0XHRcdFx0XHRjb25zdCB0YWJIZWFkZXIgPSB0aGlzLmdldFRhYkhlYWRlckZvckxlYWYobGVhZik7XG5cdFx0XHRcdFx0XHRpZiAodGFiSGVhZGVyICYmIHRhYkhlYWRlci5wYXJlbnRFbGVtZW50KSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHBhcmVudCA9IHRhYkhlYWRlci5wYXJlbnRFbGVtZW50O1xuXHRcdFx0XHRcdFx0XHRpZiAocGFyZW50ICYmIHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3dvcmtzcGFjZS10YWItaGVhZGVyLWNvbnRhaW5lci1pbm5lcicpKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgdGFiSGVhZGVyRXh0ZW5kZWQgPSB0YWJIZWFkZXIgYXMgVGFiSGVhZGVyRWxlbWVudDtcblx0XHRcdFx0XHRcdFx0XHQvLyBPbmx5IHJlbW92ZSBpZiBub3QgYWxyZWFkeSByZW1vdmVkXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHBhcmVudC5jb250YWlucyh0YWJIZWFkZXIpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VQYXJlbnQgPSBwYXJlbnQ7XG5cdFx0XHRcdFx0XHRcdFx0XHR0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VOZXh0U2libGluZyA9IHRhYkhlYWRlci5uZXh0U2libGluZztcblx0XHRcdFx0XHRcdFx0XHRcdHRhYkhlYWRlci5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Y29uc3Qgb2JzZXJ2ZUNvbnRhaW5lciA9IChjb250YWluZXI6IEVsZW1lbnQpID0+IHtcblx0XHRcdHRoaXMudGFiSGVhZGVyT2JzZXJ2ZXI/Lm9ic2VydmUoY29udGFpbmVyLCB7XG5cdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcblx0XHRcdFx0c3VidHJlZTogZmFsc2Vcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHQvLyBPYnNlcnZlIGFsbCBleGlzdGluZyBjb250YWluZXJzIGluIGFsbCB3aW5kb3dzXG5cdFx0Y29uc3Qgb2JzZXJ2ZUFsbFdpbmRvd3MgPSAoKSA9PiB7XG5cdFx0XHRjb25zdCBjb250YWluZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLndvcmtzcGFjZS10YWItaGVhZGVyLWNvbnRhaW5lci1pbm5lcicpO1xuXHRcdFx0Y29udGFpbmVycy5mb3JFYWNoKG9ic2VydmVDb250YWluZXIpO1xuXG5cdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcblx0XHRcdFx0Y29uc3QgZG9jID0gbGVhZi52aWV3Py5jb250YWluZXJFbD8ub3duZXJEb2N1bWVudDtcblx0XHRcdFx0aWYgKGRvYyAmJiBkb2MgIT09IGRvY3VtZW50KSB7XG5cdFx0XHRcdFx0Y29uc3Qgd2luZG93Q29udGFpbmVycyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCcud29ya3NwYWNlLXRhYi1oZWFkZXItY29udGFpbmVyLWlubmVyJyk7XG5cdFx0XHRcdFx0d2luZG93Q29udGFpbmVycy5mb3JFYWNoKG9ic2VydmVDb250YWluZXIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0b2JzZXJ2ZUFsbFdpbmRvd3MoKTtcblxuXHRcdC8vIEFsc28gd2F0Y2ggZm9yIG5ldyBjb250YWluZXJzIGJlaW5nIGFkZGVkIGluIGFsbCB3aW5kb3dzXG5cdFx0Y29uc3Qgc2V0dXBXb3Jrc3BhY2VPYnNlcnZlciA9ICh3aW46IFdpbmRvdykgPT4ge1xuXHRcdFx0Y29uc3QgZG9jID0gd2luLmRvY3VtZW50O1xuXHRcdFx0Y29uc3Qgd29ya3NwYWNlT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IG5ld0NvbnRhaW5lcnMgPSBkb2MucXVlcnlTZWxlY3RvckFsbCgnLndvcmtzcGFjZS10YWItaGVhZGVyLWNvbnRhaW5lci1pbm5lcicpO1xuXHRcdFx0XHRuZXdDb250YWluZXJzLmZvckVhY2gob2JzZXJ2ZUNvbnRhaW5lcik7XG5cdFx0fSk7XG5cblx0XHRcdGNvbnN0IG1haW5Xb3Jrc3BhY2UgPSBkb2MucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1zcGxpdC5tb2QtdmVydGljYWwubW9kLXJvb3QnKTtcblx0XHRpZiAobWFpbldvcmtzcGFjZSkge1xuXHRcdFx0d29ya3NwYWNlT2JzZXJ2ZXIub2JzZXJ2ZShtYWluV29ya3NwYWNlLCB7XG5cdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcblx0XHRcdFx0c3VidHJlZTogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdH07XG5cblx0XHRzZXR1cFdvcmtzcGFjZU9ic2VydmVyKHdpbmRvdyk7XG5cdFx0XG5cdFx0Ly8gUmVnaXN0ZXIgZm9yIGZ1dHVyZSB3aW5kb3dzXG5cdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ3dpbmRvdy1vcGVuJywgKHdpbikgPT4ge1xuXHRcdFx0XHRjb25zdCBhY3R1YWxXaW5kb3cgPSB3aW4ud2luO1xuXHRcdFx0XHRpZiAoYWN0dWFsV2luZG93IGluc3RhbmNlb2YgV2luZG93KSB7XG5cdFx0XHRcdFx0c2V0dXBXb3Jrc3BhY2VPYnNlcnZlcihhY3R1YWxXaW5kb3cpO1xuXHRcdFx0XHRcdC8vIFJlLXJ1biBvYnNlcnZlIGFsbCB0byBjYXRjaCBjb250YWluZXJzIGluIHRoZSBuZXcgd2luZG93XG5cdFx0XHRcdFx0c2V0VGltZW91dChvYnNlcnZlQWxsV2luZG93cywgMTAwKTtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlbW92ZSB0aGUgc3RpY2t5IGhvbWUgaWNvblxuXHQgKi9cblx0cmVtb3ZlKCk6IHZvaWQge1xuXHRcdC8vIENsZWFyIGFueSBwZW5kaW5nIHRhYiBoZWFkZXIgdXBkYXRlc1xuXHRcdGlmICh0aGlzLnRhYkhlYWRlclVwZGF0ZVRpbWVvdXQpIHtcblx0XHRcdGNsZWFyVGltZW91dCh0aGlzLnRhYkhlYWRlclVwZGF0ZVRpbWVvdXQpO1xuXHRcdFx0dGhpcy50YWJIZWFkZXJVcGRhdGVUaW1lb3V0ID0gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBDbGVhciBhbnkgY2hlY2sgaW50ZXJ2YWxzXG5cdFx0aWYgKHRoaXMuc3RpY2t5SWNvbkVsICYmIHRoaXMuc3RpY2t5SWNvbkVsLl9jaGVja0ludGVydmFsKSB7XG5cdFx0XHRjbGVhckludGVydmFsKHRoaXMuc3RpY2t5SWNvbkVsLl9jaGVja0ludGVydmFsKTtcblx0XHR9XG5cblx0XHQvLyBEaXNjb25uZWN0IGNvbnRhaW5lciBvYnNlcnZlclxuXHRcdGlmICh0aGlzLnN0aWNreUljb25FbCAmJiB0aGlzLnN0aWNreUljb25FbC5fY29udGFpbmVyT2JzZXJ2ZXIpIHtcblx0XHRcdHRoaXMuc3RpY2t5SWNvbkVsLl9jb250YWluZXJPYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0fVxuXG5cdFx0Ly8gRGlzY29ubmVjdCBzaWRlYmFyIG9ic2VydmVyXG5cdFx0aWYgKHRoaXMuc2lkZWJhck9ic2VydmVyKSB7XG5cdFx0XHR0aGlzLnNpZGViYXJPYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0XHR0aGlzLnNpZGViYXJPYnNlcnZlciA9IG51bGw7XG5cdFx0fVxuXG5cdFx0Ly8gRGlzY29ubmVjdCB0YWIgaGVhZGVyIG9ic2VydmVyXG5cdFx0aWYgKHRoaXMudGFiSGVhZGVyT2JzZXJ2ZXIpIHtcblx0XHRcdHRoaXMudGFiSGVhZGVyT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuXHRcdFx0dGhpcy50YWJIZWFkZXJPYnNlcnZlciA9IG51bGw7XG5cdFx0fVxuXG5cdFx0Ly8gUkVTVE9SRSBFVkVSWVRISU5HIGJlZm9yZSBmdWxseSByZW1vdmluZ1xuXHRcdC8vIFRoaXMgZW5zdXJlcyB0YWIgaGVhZGVycyBhcmUgdmlzaWJsZSBhZ2FpbiBhbmQgd29ya3NwYWNlIGNsYXNzZXMgYXJlIHJlbW92ZWRcblx0XHR0aGlzLnVwZGF0ZVdvcmtzcGFjZUNsYXNzKGZhbHNlKTtcblx0XHRcblx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcblx0XHRcdGNvbnN0IHRhYkhlYWRlciA9IHRoaXMuZ2V0VGFiSGVhZGVyRm9yTGVhZihsZWFmKTtcblx0XHRcdGlmICh0YWJIZWFkZXIpIHtcblx0XHRcdFx0dGFiSGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWhvbWUtYmFzZS10YWInKTtcblx0XHRcdFx0dGFiSGVhZGVyLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1ob21lLWJhc2UtZ2hvc3QnKTtcblx0XHRcdFx0dGFiSGVhZGVyLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnN0IHRhYkhlYWRlckV4dGVuZGVkID0gdGFiSGVhZGVyIGFzIFRhYkhlYWRlckVsZW1lbnQ7XG5cdFx0XHRcdGlmICh0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VQYXJlbnQgJiYgIXRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZVBhcmVudC5jb250YWlucyh0YWJIZWFkZXIpKSB7XG5cdFx0XHRcdFx0Y29uc3QgcGFyZW50ID0gdGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlUGFyZW50O1xuXHRcdFx0XHRcdGNvbnN0IG5leHRTaWJsaW5nID0gdGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlTmV4dFNpYmxpbmc7XG5cdFx0XHRcdFx0aWYgKHBhcmVudCkge1xuXHRcdFx0XHRcdFx0aWYgKG5leHRTaWJsaW5nICYmIG5leHRTaWJsaW5nLnBhcmVudEVsZW1lbnQgPT09IHBhcmVudCkge1xuXHRcdFx0XHRcdFx0XHRwYXJlbnQuaW5zZXJ0QmVmb3JlKHRhYkhlYWRlciwgbmV4dFNpYmxpbmcpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0cGFyZW50LmFwcGVuZENoaWxkKHRhYkhlYWRlcik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGRlbGV0ZSB0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VQYXJlbnQ7XG5cdFx0XHRcdFx0ZGVsZXRlIHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZU5leHRTaWJsaW5nO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRpZiAodGhpcy5zdGlja3lJY29uRWwpIHtcblx0XHRcdC8vIE9ubHkgcmVtb3ZlIGlmIGl0J3MgYWN0dWFsbHkgaW4gdGhlIERPTVxuXHRcdFx0aWYgKHRoaXMuc3RpY2t5SWNvbkVsLnBhcmVudEVsZW1lbnQpIHtcblx0XHRcdFx0dGhpcy5zdGlja3lJY29uRWwucmVtb3ZlKCk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLnN0aWNreUljb25FbCA9IG51bGw7XG5cdFx0fVxuXG5cdFx0Ly8gQWxzbyBjbGVhbiB1cCBhbnkgb3JwaGFuZWQgaWNvbnMgaW4gYWxsIHdpbmRvd3Ncblx0XHRjb25zdCBjbGVhbnVwT3JwaGFucyA9IChkb2M6IERvY3VtZW50KSA9PiB7XG5cdFx0XHRkb2MucXVlcnlTZWxlY3RvckFsbChgLiR7U1RJQ0tZX0lDT05fQ0xBU1N9YCkuZm9yRWFjaChlbCA9PiB7XG5cdFx0XHRcdGNvbnN0IHN0aWNreUVsID0gZWwgYXMgU3RpY2t5SWNvbkVsZW1lbnQ7XG5cdFx0XHRcdGlmIChzdGlja3lFbC5fY2hlY2tJbnRlcnZhbCkge1xuXHRcdFx0XHRcdGNsZWFySW50ZXJ2YWwoc3RpY2t5RWwuX2NoZWNrSW50ZXJ2YWwpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChzdGlja3lFbC5fY29udGFpbmVyT2JzZXJ2ZXIpIHtcblx0XHRcdFx0XHRzdGlja3lFbC5fY29udGFpbmVyT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsLnJlbW92ZSgpO1xuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGNsZWFudXBPcnBoYW5zKGRvY3VtZW50KTtcblx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcblx0XHRcdGNvbnN0IGRvYyA9IGxlYWYudmlldz8uY29udGFpbmVyRWw/Lm93bmVyRG9jdW1lbnQ7XG5cdFx0XHRpZiAoZG9jICYmIGRvYyAhPT0gZG9jdW1lbnQpIHtcblx0XHRcdFx0Y2xlYW51cE9ycGhhbnMoZG9jKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgdGhlIGFjdGl2ZSBzdGF0ZSBvZiB0aGUgc3RpY2t5IGljb25cblx0ICovXG5cdHVwZGF0ZUFjdGl2ZVN0YXRlKCk6IHZvaWQge1xuXHRcdGlmICghdGhpcy5zdGlja3lJY29uRWwpIHJldHVybjtcblxuXHRcdGNvbnN0IGlzQWN0aXZlID0gdGhpcy5wbHVnaW4uaG9tZVNlcnZpY2UuaXNGb2N1c2VkT25Ib21lQmFzZSgpO1xuXHRcdFxuXHRcdGlmIChpc0FjdGl2ZSkge1xuXHRcdFx0dGhpcy5zdGlja3lJY29uRWwuY2xhc3NMaXN0LmFkZChTVElDS1lfSUNPTl9BQ1RJVkVfQ0xBU1MpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnN0aWNreUljb25FbC5jbGFzc0xpc3QucmVtb3ZlKFNUSUNLWV9JQ09OX0FDVElWRV9DTEFTUyk7XG5cdFx0fVxuXG5cdFx0Ly8gQWxzbyB1cGRhdGUgdGFiIGhlYWRlcnMgd2hlbiBhY3RpdmUgc3RhdGUgY2hhbmdlcyAoZGVib3VuY2VkKVxuXHRcdHRoaXMudXBkYXRlVGFiSGVhZGVycygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENoZWNrIGlmIHRoZSBsZWZ0IHNpZGViYXIgaXMgY29sbGFwc2VkXG5cdCAqIEJhc2VkIG9uIG9ic2lkaWFuLW94eWdlbi1zZXR0aW5ncyBpbXBsZW1lbnRhdGlvblxuXHQgKi9cblx0cHJpdmF0ZSBpc0xlZnRTaWRlYmFyQ29sbGFwc2VkKCk6IGJvb2xlYW4ge1xuXHRcdC8vIFVzZSB0aGUgY29ycmVjdCBzZWxlY3RvciBmb3IgbGVmdCBzaWRlYmFyXG5cdFx0Y29uc3QgbGVmdFNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLXNwbGl0Lm1vZC1sZWZ0LXNwbGl0JykgfHwgXG5cdFx0ICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kLWxlZnQtc3BsaXQnKTtcblx0XHRcblx0XHRpZiAoIWxlZnRTaWRlYmFyKSByZXR1cm4gZmFsc2U7XG5cdFx0XG5cdFx0Ly8gQ2hlY2sgZm9yIHRoZSBpcy1zaWRlZG9jay1jb2xsYXBzZWQgY2xhc3MgLSB0aGlzIGlzIHRoZSBtb3N0IHJlbGlhYmxlIGluZGljYXRvclxuXHRcdHJldHVybiBsZWZ0U2lkZWJhci5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLXNpZGVkb2NrLWNvbGxhcHNlZCcpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSBpY29uIHBvc2l0aW9uIGJhc2VkIG9uIHNpZGViYXIgc3RhdGVcblx0ICogTm90ZTogV2l0aCBpbmxpbmUgcG9zaXRpb25pbmcsIGljb24gZmxvd3MgbmF0dXJhbGx5IHdpdGggdGFicywgc28gbm8gc3BlY2lhbCBwb3NpdGlvbmluZyBuZWVkZWRcblx0ICovXG5cdHVwZGF0ZUljb25Qb3NpdGlvbkZvclNpZGViYXIoKTogdm9pZCB7XG5cdFx0Ly8gSWNvbiBub3cgZmxvd3MgbmF0dXJhbGx5IHdpdGggdGFicywgbm8gc3BlY2lhbCBwb3NpdGlvbmluZyBuZWVkZWRcblx0XHQvLyBUaGlzIG1ldGhvZCBpcyBrZXB0IGZvciBwb3RlbnRpYWwgZnV0dXJlIHVzZSBidXQgY3VycmVudGx5IGRvZXMgbm90aGluZ1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSBpY29uIHZpc2liaWxpdHkgYmFzZWQgb24gdGFiIGJhciB2aXNpYmlsaXR5XG5cdCAqIFJFTU9WRUQ6IEphdmFTY3JpcHQtYmFzZWQgdmlzaWJpbGl0eSBjaGVja2luZyB3YXMgY2F1c2luZyBpc3N1ZXNcblx0ICogTm93IHJlbGllcyBlbnRpcmVseSBvbiBDU1Mgd2hpY2ggaXMgbW9yZSByZWxpYWJsZVxuXHQgKi9cblx0dXBkYXRlSWNvblZpc2liaWxpdHkoKTogdm9pZCB7XG5cdFx0Ly8gRG8gbm90aGluZyAtIGxldCBDU1MgaGFuZGxlIGFsbCB2aXNpYmlsaXR5XG5cdFx0Ly8gVGhlIGljb24gaXMgaW5zaWRlIHRoZSB0YWIgY29udGFpbmVyLCBzbyBpdCB3aWxsIGhpZGUgYXV0b21hdGljYWxseVxuXHRcdC8vIHdoZW4gdGhlIGNvbnRhaW5lciBpcyBoaWRkZW4gYnkgYW55IHRoZW1lL3BsdWdpblxuXHR9XG5cblx0LyoqXG5cdCAqIFdhdGNoIGZvciBzaWRlYmFyIHN0YXRlIGNoYW5nZXMgYW5kIHVwZGF0ZSBpY29uIHBvc2l0aW9uXG5cdCAqIEJhc2VkIG9uIG9ic2lkaWFuLW94eWdlbi1zZXR0aW5ncyBpbXBsZW1lbnRhdGlvblxuXHQgKi9cblx0cHJpdmF0ZSB3YXRjaFNpZGViYXJTdGF0ZSgpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5zaWRlYmFyT2JzZXJ2ZXIpIHtcblx0XHRcdHRoaXMuc2lkZWJhck9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcblx0XHR9XG5cdFx0XG5cdFx0Y29uc3QgbGVmdFNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLXNwbGl0Lm1vZC1sZWZ0LXNwbGl0JykgfHwgXG5cdFx0ICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kLWxlZnQtc3BsaXQnKTtcblx0XHRcblx0XHRpZiAoIWxlZnRTaWRlYmFyKSByZXR1cm47XG5cdFx0XG5cdFx0Ly8gV2F0Y2ggZm9yIGNsYXNzIGNoYW5nZXMgb24gdGhlIHNpZGViYXIgZWxlbWVudFxuXHRcdHRoaXMuc2lkZWJhck9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4ge1xuXHRcdFx0bGV0IHNob3VsZFVwZGF0ZSA9IGZhbHNlO1xuXHRcdFx0bXV0YXRpb25zLmZvckVhY2goKG11dGF0aW9uKSA9PiB7XG5cdFx0XHRcdGlmIChtdXRhdGlvbi50eXBlID09PSAnYXR0cmlidXRlcycgJiYgbXV0YXRpb24uYXR0cmlidXRlTmFtZSA9PT0gJ2NsYXNzJykge1xuXHRcdFx0XHRcdHNob3VsZFVwZGF0ZSA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKHNob3VsZFVwZGF0ZSkge1xuXHRcdFx0XHR0aGlzLnVwZGF0ZUljb25Qb3NpdGlvbkZvclNpZGViYXIoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRcblx0XHR0aGlzLnNpZGViYXJPYnNlcnZlci5vYnNlcnZlKGxlZnRTaWRlYmFyLCB7XG5cdFx0XHRhdHRyaWJ1dGVzOiB0cnVlLFxuXHRcdFx0YXR0cmlidXRlRmlsdGVyOiBbJ2NsYXNzJ10sXG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogV2F0Y2ggZm9yIHRhYiBiYXIgdmlzaWJpbGl0eSBjaGFuZ2VzIChPeHlnZW4gdGhlbWUgYXV0by1oaWRlLCBmb2N1cyBtb2RlLCBldGMuKVxuXHQgKiBSRU1PVkVEOiBObyBsb25nZXIgbmVlZGVkIC0gQ1NTIGhhbmRsZXMgYWxsIHZpc2liaWxpdHkgYXV0b21hdGljYWxseVxuXHQgKi9cblx0cHJpdmF0ZSB3YXRjaFRhYkJhclZpc2liaWxpdHkoKTogdm9pZCB7XG5cdFx0Ly8gRG8gbm90aGluZyAtIENTUyBoYW5kbGVzIGFsbCB2aXNpYmlsaXR5XG5cdFx0Ly8gVGhlIGljb24gaXMgaW5zaWRlIHRoZSB0YWIgY29udGFpbmVyLCBzbyBpdCBoaWRlcyBhdXRvbWF0aWNhbGx5XG5cdH1cblxuXHQvKipcblx0ICogVG9nZ2xlIHRoZSBzdGlja3kgaWNvbiB2aXNpYmlsaXR5XG5cdCAqL1xuXHRhc3luYyB0b2dnbGUoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uID0gIXRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTdGlja3lIb21lSWNvbjtcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHR0aGlzLnVwZGF0ZSgpO1xuXHRcdC8vIFVwZGF0ZSB0YWIgaGVhZGVycyB3aGVuIHRvZ2dsaW5nIHN0aWNreSBpY29uXG5cdFx0dGhpcy51cGRhdGVUYWJIZWFkZXJzKCk7XG5cdH1cblxuXHQvKipcblx0ICogVXBkYXRlIHRhYiBoZWFkZXJzIHRvIGhpZGUvc2hvdyBnaG9zdCB0YWJcblx0ICogT25seSB3b3JrcyB3aGVuIHN0aWNreSBpY29uIGlzIGVuYWJsZWRcblx0ICogUmVtb3ZlZCBkZWJvdW5jZSAtIG11c3QgYmUgaW1tZWRpYXRlIHRvIHByZXZlbnQgZmxhc2hcblx0ICovXG5cdHVwZGF0ZVRhYkhlYWRlcnMoKTogdm9pZCB7XG5cdFx0Ly8gQ2xlYXIgYW55IHBlbmRpbmcgdXBkYXRlXG5cdFx0aWYgKHRoaXMudGFiSGVhZGVyVXBkYXRlVGltZW91dCkge1xuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMudGFiSGVhZGVyVXBkYXRlVGltZW91dCk7XG5cdFx0XHR0aGlzLnRhYkhlYWRlclVwZGF0ZVRpbWVvdXQgPSBudWxsO1xuXHRcdH1cblxuXHRcdC8vIEV4ZWN1dGUgaW1tZWRpYXRlbHkgLSBubyBkZWJvdW5jZSB0byBwcmV2ZW50IGZsYXNoXG5cdFx0dGhpcy5fZG9VcGRhdGVUYWJIZWFkZXJzKCk7XG5cdH1cblxuXHQvKipcblx0ICogSW50ZXJuYWwgbWV0aG9kIHRoYXQgYWN0dWFsbHkgdXBkYXRlcyB0aGUgdGFiIGhlYWRlcnNcblx0ICovXG5cdHByaXZhdGUgX2RvVXBkYXRlVGFiSGVhZGVycygpOiB2b2lkIHtcblx0XHQvLyBPbmx5IGhpZGUgZ2hvc3QgdGFiIGlmIEJPVEggc3RpY2t5IGljb24gQU5EIGhpZGUgdGFiIGhlYWRlciBhcmUgZW5hYmxlZFxuXHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uIHx8ICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWRlSG9tZVRhYkhlYWRlcikge1xuXHRcdFx0Ly8gUmVtb3ZlIGFsbCBob21lIGJhc2UgdGFiIGNsYXNzZXMgZnJvbSBBTEwgd2luZG93c1xuXHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHRhYkhlYWRlciA9IHRoaXMuZ2V0VGFiSGVhZGVyRm9yTGVhZihsZWFmKTtcblx0XHRcdFx0aWYgKHRhYkhlYWRlcikge1xuXHRcdFx0XHRcdHRhYkhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKCdpcy1ob21lLWJhc2UtdGFiJyk7XG5cdFx0XHRcdFx0dGFiSGVhZGVyLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1ob21lLWJhc2UtZ2hvc3QnKTtcblx0XHRcdFx0XHR0YWJIZWFkZXIucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRjb25zdCB0YWJIZWFkZXJFeHRlbmRlZCA9IHRhYkhlYWRlciBhcyBUYWJIZWFkZXJFbGVtZW50O1xuXHRcdFx0XHRpZiAodGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlUGFyZW50ICYmICF0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VQYXJlbnQuY29udGFpbnModGFiSGVhZGVyKSkge1xuXHRcdFx0XHRcdGNvbnN0IHBhcmVudCA9IHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZVBhcmVudDtcblx0XHRcdFx0XHRjb25zdCBuZXh0U2libGluZyA9IHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZU5leHRTaWJsaW5nO1xuXHRcdFx0XHRcdGlmIChwYXJlbnQpIHtcblx0XHRcdFx0XHRcdGlmIChuZXh0U2libGluZyAmJiBuZXh0U2libGluZy5wYXJlbnRFbGVtZW50ID09PSBwYXJlbnQpIHtcblx0XHRcdFx0XHRcdFx0cGFyZW50Lmluc2VydEJlZm9yZSh0YWJIZWFkZXIsIG5leHRTaWJsaW5nKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHBhcmVudC5hcHBlbmRDaGlsZCh0YWJIZWFkZXIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkZWxldGUgdGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlUGFyZW50O1xuXHRcdFx0XHRcdGRlbGV0ZSB0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VOZXh0U2libGluZztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIENSSVRJQ0FMOiBSZW1vdmUgZ2hvc3QgdGFiIGhlYWRlcnMgU1lOQ0hST05PVVNMWSBiZWZvcmUgYW55IGFuaW1hdGlvbiBmcmFtZXNcblx0XHQvLyBUaGlzIHByZXZlbnRzIHRoZW0gZnJvbSBicmllZmx5IGFwcGVhcmluZyB3aGVuIHRhYnMgY2hhbmdlXG5cdFx0Y29uc3QgZ2hvc3RUYWJIZWFkZXJzVG9SZW1vdmU6IEFycmF5PHt0YWJIZWFkZXI6IEhUTUxFbGVtZW50OyBsZWFmOiBXb3Jrc3BhY2VMZWFmfT4gPSBbXTtcblx0XHRcblx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5ob21lU2VydmljZS5pc0dob3N0TGVhZihsZWFmKSkge1xuXHRcdFx0XHRjb25zdCB0YWJIZWFkZXIgPSB0aGlzLmdldFRhYkhlYWRlckZvckxlYWYobGVhZik7XG5cdFx0XHRcdGlmICh0YWJIZWFkZXIgJiYgdGFiSGVhZGVyLnBhcmVudEVsZW1lbnQpIHtcblx0XHRcdFx0XHRnaG9zdFRhYkhlYWRlcnNUb1JlbW92ZS5wdXNoKHt0YWJIZWFkZXIsIGxlYWZ9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdFxuXHRcdC8vIFJlbW92ZSBhbGwgZ2hvc3QgdGFiIGhlYWRlcnMgc3luY2hyb25vdXNseSBCRUZPUkUgYW55IHJlbmRlcmluZ1xuXHRcdGdob3N0VGFiSGVhZGVyc1RvUmVtb3ZlLmZvckVhY2goKHt0YWJIZWFkZXJ9KSA9PiB7XG5cdFx0XHRjb25zdCBwYXJlbnQgPSB0YWJIZWFkZXIucGFyZW50RWxlbWVudDtcblx0XHRcdGlmIChwYXJlbnQgJiYgcGFyZW50LmNsYXNzTGlzdC5jb250YWlucygnd29ya3NwYWNlLXRhYi1oZWFkZXItY29udGFpbmVyLWlubmVyJykpIHtcblx0XHRcdFx0Y29uc3QgdGFiSGVhZGVyRXh0ZW5kZWQgPSB0YWJIZWFkZXIgYXMgVGFiSGVhZGVyRWxlbWVudDtcblx0XHRcdFx0Ly8gT25seSByZW1vdmUgaWYgbm90IGFscmVhZHkgcmVtb3ZlZFxuXHRcdFx0XHRpZiAocGFyZW50LmNvbnRhaW5zKHRhYkhlYWRlcikpIHtcblx0XHRcdFx0XHR0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VQYXJlbnQgPSBwYXJlbnQ7XG5cdFx0XHRcdFx0dGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlTmV4dFNpYmxpbmcgPSB0YWJIZWFkZXIubmV4dFNpYmxpbmc7XG5cdFx0XHRcdFx0dGFiSGVhZGVyLnJlbW92ZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBOb3cgdXBkYXRlIG90aGVyIHRhYiBoZWFkZXJzIGluIHJlcXVlc3RBbmltYXRpb25GcmFtZSAobm9uLWNyaXRpY2FsKVxuXHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRjb25zdCBob21lQmFzZVNldHRpbmdzID0gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xuXHRcdFx0Y29uc3QgaG9tZUJhc2VQYXRoID0gaG9tZUJhc2VTZXR0aW5ncy52YWx1ZSB8fCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVBhdGg7XG5cblx0XHRcdC8vIFJlc3RvcmUgYW55IG5vbi1naG9zdCB0YWJzIHRoYXQgd2VyZSBpbmNvcnJlY3RseSByZW1vdmVkXG5cdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcblx0XHRcdFx0Y29uc3QgaXNHaG9zdFRhYiA9IHRoaXMucGx1Z2luLmhvbWVTZXJ2aWNlLmlzR2hvc3RMZWFmKGxlYWYpO1xuXHRcdFx0XHRjb25zdCB0YWJIZWFkZXIgPSB0aGlzLmdldFRhYkhlYWRlckZvckxlYWYobGVhZik7XG5cdFx0XHRcdGlmICghdGFiSGVhZGVyKSByZXR1cm47XG5cblx0XHRcdFx0XHRjb25zdCB0YWJIZWFkZXJFeHRlbmRlZCA9IHRhYkhlYWRlciBhcyBUYWJIZWFkZXJFbGVtZW50O1xuXHRcdFx0XHRcdGNvbnN0IGlzUmVtb3ZlZCA9IHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZVBhcmVudCAmJiAhdGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlUGFyZW50LmNvbnRhaW5zKHRhYkhlYWRlcik7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdGlmICghaXNHaG9zdFRhYikge1xuXHRcdFx0XHRcdC8vIE5vdCBhIGdob3N0IHRhYiAtIHJlc3RvcmUgaWYgaXQgd2FzIHJlbW92ZWRcblx0XHRcdFx0XHRcdGlmIChpc1JlbW92ZWQpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgcGFyZW50ID0gdGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlUGFyZW50O1xuXHRcdFx0XHRcdFx0XHRjb25zdCBuZXh0U2libGluZyA9IHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZU5leHRTaWJsaW5nO1xuXHRcdFx0XHRcdFx0XHRpZiAocGFyZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKG5leHRTaWJsaW5nICYmIG5leHRTaWJsaW5nLnBhcmVudEVsZW1lbnQgPT09IHBhcmVudCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cGFyZW50Lmluc2VydEJlZm9yZSh0YWJIZWFkZXIsIG5leHRTaWJsaW5nKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0cGFyZW50LmFwcGVuZENoaWxkKHRhYkhlYWRlcik7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGRlbGV0ZSB0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VQYXJlbnQ7XG5cdFx0XHRcdFx0XHRcdFx0ZGVsZXRlIHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZU5leHRTaWJsaW5nO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBDaGVjayBpZiB0aGlzIGlzIGEgbm9ybWFsIGhvbWUgYmFzZSB0YWIgKG5vdCBnaG9zdCkgdG8gYXBwbHkgYWN0aXZlIHN0YXRlIHN0eWxpbmcgaWYgbmVlZGVkXG5cdFx0XHRcdFx0Ly8gV2Ugb25seSBkbyB0aGlzIGlmIHdlIGhhdmUgYSBwYXRoIHRvIGNvbXBhcmUgYWdhaW5zdFxuXHRcdFx0XHRcdGlmIChob21lQmFzZVBhdGggJiYgbGVhZkhhc0ZpbGUobGVhZiwgaG9tZUJhc2VQYXRoKSkge1xuXHRcdFx0XHRcdFx0dGFiSGVhZGVyLmNsYXNzTGlzdC5hZGQoJ2lzLWhvbWUtYmFzZS10YWInKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGFiSGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWhvbWUtYmFzZS10YWInKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0dGFiSGVhZGVyLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1ob21lLWJhc2UtZ2hvc3QnKTtcblx0XHRcdFx0XHR0YWJIZWFkZXIucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgdGhlIHRhYiBoZWFkZXIgZWxlbWVudCBmb3IgYSBnaXZlbiBsZWFmXG5cdCAqL1xuXHRwcml2YXRlIGdldFRhYkhlYWRlckZvckxlYWYobGVhZjogV29ya3NwYWNlTGVhZik6IEhUTUxFbGVtZW50IHwgbnVsbCB7XG5cdFx0Ly8gVHJ5IHRvIGdldCBmcm9tIGxlYWYncyBpbnRlcm5hbCBwcm9wZXJ0eSBmaXJzdCAoaWYgYXZhaWxhYmxlKVxuXHRcdGNvbnN0IGxlYWZBbnkgPSBsZWFmIGFzIHVua25vd24gYXMgeyB0YWJIZWFkZXJFbD86IEhUTUxFbGVtZW50IH07XG5cdFx0aWYgKGxlYWZBbnkudGFiSGVhZGVyRWwpIHtcblx0XHRcdHJldHVybiBsZWFmQW55LnRhYkhlYWRlckVsO1xuXHRcdH1cblxuXHRcdC8vIEZhbGxiYWNrOiBmaW5kIGJ5IHF1ZXJ5aW5nIERPTSB3aXRoaW4gdGhlIGxlYWYncyB3aW5kb3dcblx0XHRjb25zdCB2aWV3VHlwZSA9IGxlYWYudmlldz8uZ2V0Vmlld1R5cGUoKTtcblx0XHRpZiAoIXZpZXdUeXBlKSByZXR1cm4gbnVsbDtcblxuXHRcdC8vIEdldCB0aGUgZG9jdW1lbnQgZm9yIHRoaXMgbGVhZlxuXHRcdGNvbnN0IGRvYyA9IGxlYWYudmlldz8uY29udGFpbmVyRWw/Lm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQ7XG5cblx0XHQvLyBHZXQgdGhlIGFjdGl2ZSBsZWFmIHRvIGhlbHAgd2l0aCBtYXRjaGluZ1xuXHRcdGNvbnN0IGFjdGl2ZUxlYWYgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldE1vc3RSZWNlbnRMZWFmKCk7XG5cdFx0Y29uc3QgaXNBY3RpdmUgPSBsZWFmID09PSBhY3RpdmVMZWFmO1xuXG5cdFx0Ly8gRmluZCBhbGwgdGFiIGhlYWRlcnMgd2l0aCBtYXRjaGluZyB2aWV3IHR5cGUgaW4gVEhJUyB3aW5kb3dcblx0XHRjb25zdCB0YWJIZWFkZXJzID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoYC53b3Jrc3BhY2UtdGFiLWhlYWRlcltkYXRhLXR5cGU9XCIke3ZpZXdUeXBlfVwiXWApO1xuXHRcdFxuXHRcdC8vIElmIHRoaXMgaXMgdGhlIGFjdGl2ZSBsZWFmLCBwcmVmZXIgdGhlIGFjdGl2ZSB0YWIgaGVhZGVyIGluIFRISVMgd2luZG93XG5cdFx0aWYgKGlzQWN0aXZlKSB7XG5cdFx0XHRjb25zdCBhY3RpdmVIZWFkZXIgPSBkb2MucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS10YWItaGVhZGVyLmlzLWFjdGl2ZScpO1xuXHRcdFx0aWYgKGFjdGl2ZUhlYWRlciAmJiBhY3RpdmVIZWFkZXIuZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKSA9PT0gdmlld1R5cGUpIHtcblx0XHRcdFx0cmV0dXJuIGFjdGl2ZUhlYWRlciBhcyBIVE1MRWxlbWVudDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBUcnkgdG8gbWF0Y2ggYnkgY2hlY2tpbmcgaWYgaGVhZGVyJ3MgbGVhZiBwcm9wZXJ0eSBtYXRjaGVzXG5cdFx0Zm9yIChjb25zdCBoZWFkZXIgb2YgQXJyYXkuZnJvbSh0YWJIZWFkZXJzKSkge1xuXHRcdFx0Y29uc3QgaGVhZGVyRWwgPSBoZWFkZXIgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRjb25zdCBoZWFkZXJFbFdpdGhMZWFmID0gaGVhZGVyRWwgYXMgdW5rbm93biBhcyB7IGxlYWY/OiBXb3Jrc3BhY2VMZWFmIH07XG5cdFx0XHRjb25zdCBoZWFkZXJMZWFmID0gaGVhZGVyRWxXaXRoTGVhZi5sZWFmO1xuXHRcdFx0aWYgKGhlYWRlckxlYWYgPT09IGxlYWYpIHtcblx0XHRcdFx0cmV0dXJuIGhlYWRlckVsO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIElmIG9ubHkgb25lIHRhYiBoZWFkZXIgbWF0Y2hlcyB0aGUgdmlldyB0eXBlIGluIHRoaXMgd2luZG93LCBpdCdzIGxpa2VseSB0aGUgb25lXG5cdFx0aWYgKHRhYkhlYWRlcnMubGVuZ3RoID09PSAxKSB7XG5cdFx0XHRyZXR1cm4gdGFiSGVhZGVyc1swXSBhcyBIVE1MRWxlbWVudDtcblx0XHR9XG5cblx0XHQvLyBMYXN0IHJlc29ydDogaWYgdGhpcyBpcyBhY3RpdmUgYW5kIHdlIGZvdW5kIGFuIGFjdGl2ZSBoZWFkZXIgaW4gdGhpcyB3aW5kb3csIHVzZSBpdFxuXHRcdGlmIChpc0FjdGl2ZSkge1xuXHRcdFx0Y29uc3QgYWN0aXZlSGVhZGVyID0gZG9jLnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2UtdGFiLWhlYWRlci5pcy1hY3RpdmUnKTtcblx0XHRcdGlmIChhY3RpdmVIZWFkZXIpIHtcblx0XHRcdFx0cmV0dXJuIGFjdGl2ZUhlYWRlciBhcyBIVE1MRWxlbWVudDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDbG9zZSB0aGUgaG9tZSBiYXNlIHRhYlxuXHQgKiBXaGVuIGNhbGxlZCBmcm9tIGNvbnRleHQgbWVudTogT25seSBjbG9zZXMgdGhlIGdob3N0IHRhYiAodGhlIFwib2NjdXBpZWRcIiBzbG90KVxuXHQgKiBPdGhlciBob21lIGJhc2UgdGFicyBhcmUgbGVmdCBhbG9uZVxuXHQgKi9cblx0YXN5bmMgY2xvc2VIb21lQmFzZShhY3R1YWxseUNsb3NlOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVBhdGg7XG5cdFx0aWYgKCFob21lQmFzZVBhdGgpIHJldHVybjtcblxuXHRcdGNvbnN0IHsgZ2V0RmlsZUJ5UGF0aCB9ID0gYXdhaXQgaW1wb3J0KCcuLi91dGlscy9maWxlLXV0aWxzJyk7XG5cdFx0Y29uc3QgaG9tZUJhc2VGaWxlID0gZ2V0RmlsZUJ5UGF0aCh0aGlzLnBsdWdpbi5hcHAsIGhvbWVCYXNlUGF0aCk7XG5cdFx0aWYgKCFob21lQmFzZUZpbGUpIHJldHVybjtcblxuXHRcdC8vIEZpbmQgdGhlIGdob3N0IHRhYiAodGhlIFwib2NjdXBpZWRcIiBzbG90IC0gcGlubmVkIGhvbWUgYmFzZSB0YWIpXG5cdFx0Y29uc3QgZ2hvc3RUYWJzOiBXb3Jrc3BhY2VMZWFmW10gPSBbXTtcblx0XHRcblx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcblx0XHRcdGlmIChsZWFmSGFzRmlsZShsZWFmLCBob21lQmFzZVBhdGgpKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcblx0XHRcdFx0XHRpZiAodmlld1N0YXRlLnBpbm5lZCA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRcdFx0Z2hvc3RUYWJzLnB1c2gobGVhZik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHQvLyBMZWFmIG1pZ2h0IGJlIGRldGFjaGVkLCBza2lwIGl0XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHtcblx0XHRcdC8vIFN0aWNreSBpY29uIGVuYWJsZWQ6IG9ubHkgY2xvc2UgdGhlIGdob3N0IHRhYiAodGhlIG9jY3VwaWVkIHNsb3QpXG5cdFx0XHQvLyBPdGhlciBob21lIGJhc2UgdGFicyBhcmUgbGVmdCBhbG9uZVxuXHRcdFx0Zm9yIChjb25zdCBnaG9zdFRhYiBvZiBnaG9zdFRhYnMpIHtcblx0XHRcdFx0dm9pZCBnaG9zdFRhYi5kZXRhY2goKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gU3RpY2t5IGljb24gZGlzYWJsZWQ6IGNsb3NlIGFsbCBob21lIGJhc2UgdGFic1xuXHRcdFx0Y29uc3QgYWxsSG9tZUJhc2VMZWF2ZXM6IFdvcmtzcGFjZUxlYWZbXSA9IFtdO1xuXHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmOiBXb3Jrc3BhY2VMZWFmKSA9PiB7XG5cdFx0XHRcdGlmIChsZWFmSGFzRmlsZShsZWFmLCBob21lQmFzZVBhdGgpKSB7XG5cdFx0XHRcdFx0YWxsSG9tZUJhc2VMZWF2ZXMucHVzaChsZWFmKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRmb3IgKGNvbnN0IGxlYWYgb2YgYWxsSG9tZUJhc2VMZWF2ZXMpIHtcblx0XHRcdFx0dm9pZCBsZWFmLmRldGFjaCgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFVwZGF0ZSB0YWIgaGVhZGVycyBhZnRlciBjbG9zaW5nXG5cdFx0dGhpcy51cGRhdGVUYWJIZWFkZXJzKCk7XG5cdH1cblxuXHQvKipcblx0ICogUGluIHRoZSBob21lIGJhc2UgdGFiXG5cdCAqL1xuXHRwaW5Ib21lQmFzZVRhYigpOiB2b2lkIHtcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVBhdGg7XG5cdFx0aWYgKCFob21lQmFzZVBhdGgpIHJldHVybjtcblxuXHRcdGNvbnN0IGhvbWVCYXNlRmlsZSA9IGdldEZpbGVCeVBhdGgodGhpcy5wbHVnaW4uYXBwLCBob21lQmFzZVBhdGgpO1xuXHRcdGlmICghaG9tZUJhc2VGaWxlKSByZXR1cm47XG5cblx0XHRjb25zdCBob21lQmFzZUxlYWYgPSB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5maW5kRXhpc3RpbmdIb21lQmFzZUxlYWYoaG9tZUJhc2VGaWxlKTtcblx0XHRpZiAoaG9tZUJhc2VMZWFmKSB7XG5cdFx0XHRob21lQmFzZUxlYWYuc2V0UGlubmVkKHRydWUpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBVbnBpbiB0aGUgaG9tZSBiYXNlIHRhYlxuXHQgKi9cblx0dW5waW5Ib21lQmFzZVRhYigpOiB2b2lkIHtcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVBhdGg7XG5cdFx0aWYgKCFob21lQmFzZVBhdGgpIHJldHVybjtcblxuXHRcdGNvbnN0IGhvbWVCYXNlRmlsZSA9IGdldEZpbGVCeVBhdGgodGhpcy5wbHVnaW4uYXBwLCBob21lQmFzZVBhdGgpO1xuXHRcdGlmICghaG9tZUJhc2VGaWxlKSByZXR1cm47XG5cblx0XHRjb25zdCBob21lQmFzZUxlYWYgPSB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5maW5kRXhpc3RpbmdIb21lQmFzZUxlYWYoaG9tZUJhc2VGaWxlKTtcblx0XHRpZiAoaG9tZUJhc2VMZWFmKSB7XG5cdFx0XHRob21lQmFzZUxlYWYuc2V0UGlubmVkKGZhbHNlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2sgaWYgdGhlIGhvbWUgYmFzZSB0YWIgaXMgcGlubmVkXG5cdCAqL1xuXHRpc0hvbWVCYXNlVGFiUGlubmVkKCk6IGJvb2xlYW4ge1xuXHRcdGNvbnN0IGhvbWVCYXNlUGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmhvbWVCYXNlUGF0aDtcblx0XHRpZiAoIWhvbWVCYXNlUGF0aCkgcmV0dXJuIGZhbHNlO1xuXG5cdFx0Y29uc3QgaG9tZUJhc2VGaWxlID0gZ2V0RmlsZUJ5UGF0aCh0aGlzLnBsdWdpbi5hcHAsIGhvbWVCYXNlUGF0aCk7XG5cdFx0aWYgKCFob21lQmFzZUZpbGUpIHJldHVybiBmYWxzZTtcblxuXHRcdGNvbnN0IGhvbWVCYXNlTGVhZiA9IHRoaXMucGx1Z2luLmhvbWVTZXJ2aWNlLmZpbmRFeGlzdGluZ0hvbWVCYXNlTGVhZihob21lQmFzZUZpbGUpO1xuXHRcdGlmICghaG9tZUJhc2VMZWFmKSByZXR1cm4gZmFsc2U7XG5cblx0XHRjb25zdCB2aWV3U3RhdGUgPSBob21lQmFzZUxlYWYuZ2V0Vmlld1N0YXRlKCk7XG5cdFx0cmV0dXJuIHZpZXdTdGF0ZS5waW5uZWQgPT09IHRydWU7XG5cdH1cbn1cbiIsICIvKipcclxuICogTW9iaWxlIEJ1dHRvbiBTZXJ2aWNlXHJcbiAqIE1hbmFnZXMgdGhlIG1vYmlsZSBuZXcgdGFiIGJ1dHRvbiByZXBsYWNlbWVudFxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFBsYXRmb3JtIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgdHlwZSBIb21lQmFzZVBsdWdpbiBmcm9tICcuLi9tYWluJztcclxuXHJcbi8qKlxyXG4gKiBDU1MgY2xhc3MgZm9yIHdoZW4gbW9iaWxlIGJ1dHRvbiBpcyByZXBsYWNlZFxyXG4gKi9cclxuY29uc3QgTU9CSUxFX0hPTUVfQ0xBU1MgPSAnaG9tZS1iYXNlLW1vYmlsZS1lbmFibGVkJztcclxuXHJcbmV4cG9ydCBjbGFzcyBNb2JpbGVCdXR0b25TZXJ2aWNlIHtcclxuXHRwcml2YXRlIHBsdWdpbjogSG9tZUJhc2VQbHVnaW47XHJcblxyXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogSG9tZUJhc2VQbHVnaW4pIHtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlIHRoZSBtb2JpbGUgYnV0dG9uIGJhc2VkIG9uIHNldHRpbmdzXHJcblx0ICovXHJcblx0dXBkYXRlKCk6IHZvaWQge1xyXG5cdFx0Ly8gT25seSBhcHBseSBvbiBtb2JpbGVcclxuXHRcdGlmICghUGxhdGZvcm0uaXNNb2JpbGUpIHtcclxuXHRcdFx0dGhpcy5yZW1vdmUoKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBsYWNlTW9iaWxlTmV3VGFiKSB7XHJcblx0XHRcdHRoaXMuYXBwbHkoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMucmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBBcHBseSB0aGUgbW9iaWxlIGJ1dHRvbiByZXBsYWNlbWVudFxyXG5cdCAqL1xyXG5cdHByaXZhdGUgYXBwbHkoKTogdm9pZCB7XHJcblx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoTU9CSUxFX0hPTUVfQ0xBU1MpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVtb3ZlIHRoZSBtb2JpbGUgYnV0dG9uIHJlcGxhY2VtZW50XHJcblx0ICovXHJcblx0cmVtb3ZlKCk6IHZvaWQge1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKE1PQklMRV9IT01FX0NMQVNTKTtcclxuXHR9XHJcbn1cclxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQSw4QkFBQUE7QUFBQSxFQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBMEJPLFNBQVMscUJBQXFCLFdBQW9EO0FBQ3hGLFNBQU9BLHNCQUFxQixTQUFTLFNBQStCO0FB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QUFJLENBQUMsVUFBVyxRQUFPO0FBRXZCLGVBQVEsMERBQXdFLGFBQXhFLG1CQUFtRixlQUFuRixtQkFBK0YsYUFBWTtBQUFBLElBQ3BILE9BQU87QUFFTixZQUFNLFVBQWlEO0FBQUEsUUFDdEQsK0JBQXdCLEdBQUc7QUFBQSxRQUMzQixpQ0FBeUIsR0FBRztBQUFBLFFBQzVCLCtCQUF3QixHQUFHO0FBQUEsTUFDNUI7QUFFQSxZQUFNLE9BQU8sUUFBUSxJQUFJO0FBQ3pCLFVBQUksQ0FBQyxLQUFNLFFBQU87QUFFbEIsWUFBTSxlQUFlLDBEQUEyRyx1QkFBM0csbUJBQStILGlCQUEvSDtBQUVyQixlQUFPLGdEQUFjLFVBQWQsbUJBQXFCLGFBQVk7QUFBQSxJQUN6QztBQUFBLEVBQ0Q7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLGVBQXdCO0FBRy9CLFFBQUksT0FBTyxXQUFXLGVBQWUsT0FBTyxTQUFTO0FBQ3BELFlBQU0sU0FBUyxPQUFPLEtBQUssT0FBTyxPQUFPO0FBQ3pDLFlBQU0sU0FBUyxPQUFPLFFBQVE7QUFDOUIsYUFDQyxXQUFXLFVBQ1gsQ0FBQyxRQUFRLGNBQWMsRUFBRSxTQUFTLE1BQU0sS0FDeEMsQ0FBQyxRQUFRLFlBQVksV0FBVyxFQUFFLEtBQUssT0FBSyxPQUFPLFNBQVMsQ0FBQyxDQUFDO0FBQUEsSUFFaEU7QUFDQSxXQUFPO0FBQUEsRUFDUjtBQUFBO0FBQUE7QUFJRDsiLAogICJuYW1lcyI6IFsiU1VQUE9SVEVEX0VYVEVOU0lPTlMiLCAiaW1wb3J0X29ic2lkaWFuIiwgImZvcm1hdCIsICJmb2xkZXIiLCAidGVtcGxhdGUiLCAiY3JlYXRlRGFpbHlOb3RlIiwgImdldERhaWx5Tm90ZSIsICJnZXRBbGxEYWlseU5vdGVzIiwgImNyZWF0ZVdlZWtseU5vdGUiLCAiZ2V0V2Vla2x5Tm90ZSIsICJnZXRBbGxXZWVrbHlOb3RlcyIsICJjcmVhdGVNb250aGx5Tm90ZSIsICJnZXRNb250aGx5Tm90ZSIsICJnZXRBbGxNb250aGx5Tm90ZXMiLCAiY3JlYXRlWWVhcmx5Tm90ZSIsICJnZXRZZWFybHlOb3RlIiwgImdldEFsbFllYXJseU5vdGVzIiwgImltcG9ydF9vYnNpZGlhbiIsICJIb21lQmFzZVR5cGUiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiT1ZpZXciLCAic2hvdWxkRm9jdXMiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJtYWluV29ya3NwYWNlIiwgImdldEZpbGVCeVBhdGgiLCAiaW1wb3J0X29ic2lkaWFuIiwgInBlcmlvZGljTm90ZXMiLCAidmVyc2lvbiIsICJpc0xlZ2FjeSJdCn0K
