/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => AstroComposerPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian12 = require("obsidian");

// src/types.ts
var KNOWN_ARRAY_KEYS = ["tags", "aliases", "cssclasses"];
var CONSTANTS = {
  DEBOUNCE_MS: 500,
  STAT_MTIME_THRESHOLD: 1e3,
  EDITOR_STABILIZE_DELAY: 100,
  FILE_EXPLORER_REVEAL_DELAY: 200
};

// src/settings.ts
var DEFAULT_SETTINGS = {
  defaultTemplate: '---\ntitle: "{{title}}"\ndate: {{date}}\ntags: []\n---\n',
  autoInsertProperties: true,
  dateFormat: "YYYY-MM-DD",
  enableCopyHeadingLink: true,
  copyHeadingLinkFormat: "obsidian",
  addTrailingSlashToLinks: false,
  enableOpenTerminalCommand: false,
  terminalProjectRootPath: "",
  terminalApplicationName: "",
  enableTerminalDebugLogging: false,
  enableTerminalRibbonIcon: false,
  enableOpenConfigFileCommand: false,
  configFilePath: "",
  enableConfigRibbonIcon: false,
  contentTypes: [],
  migrationCompleted: false,
  helpButtonReplacement: {
    enabled: false,
    commandId: "edit-astro-config",
    iconId: "wrench"
  },
  showMdxFilesInExplorer: false
};

// src/commands/index.ts
var import_obsidian5 = require("obsidian");

// src/utils/file-operations.ts
var import_obsidian = require("obsidian");

// src/utils/path-matching.ts
function matchesFolderPattern(filePath, folderPattern) {
  if (!folderPattern || folderPattern.trim() === "") {
    return !filePath.includes("/") || filePath.split("/").length === 1;
  }
  if (!folderPattern.includes("*")) {
    return filePath === folderPattern || filePath.startsWith(folderPattern + "/");
  }
  const escapedPattern = folderPattern.replace(/[.+?^${}()|[\]\\]/g, "\\$&").replace(/\*/g, "[^/]+");
  const regexPattern = `^${escapedPattern}(?:/|$)`;
  const regex = new RegExp(regexPattern);
  return regex.test(filePath);
}
function getPatternDepth(folderPattern) {
  if (!folderPattern || folderPattern.trim() === "") return 0;
  return folderPattern.split("/").length;
}
function sortByPatternSpecificity(types) {
  return [...types].sort((a, b) => {
    const depthA = getPatternDepth(a.folder);
    const depthB = getPatternDepth(b.folder);
    return depthB - depthA;
  });
}

// src/utils/file-operations.ts
var FileOperations = class {
  constructor(app, settings, plugin) {
    this.app = app;
    this.settings = settings;
    this.plugin = plugin;
  }
  // Get fresh settings from plugin if available, otherwise use stored settings
  getSettings() {
    var _a;
    if ((_a = this.plugin) == null ? void 0 : _a.settings) {
      return this.plugin.settings;
    }
    return this.settings;
  }
  toKebabCase(str) {
    return str.toLowerCase().replace(/[<>:"/\\|?*]/g, "").replace(/['"]/g, "").replace(/[^\w\s-]/g, "").trim().replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "");
  }
  generateFilename(title, enableUnderscorePrefix = false) {
    const kebabTitle = this.toKebabCase(title);
    const safeKebabTitle = kebabTitle || "untitled";
    const prefix = enableUnderscorePrefix ? "_" : "";
    return `${prefix}${safeKebabTitle}`;
  }
  determineType(file) {
    const filePath = file.path;
    const settings = this.getSettings();
    const contentTypes = settings.contentTypes || [];
    const sortedTypes = sortByPatternSpecificity(contentTypes);
    for (const contentType of sortedTypes) {
      if (!contentType.enabled) continue;
      if (!contentType.folder || contentType.folder.trim() === "") {
        if (!filePath.includes("/") || filePath.split("/").length === 1) {
          return contentType.id;
        }
      } else if (matchesFolderPattern(filePath, contentType.folder)) {
        if (contentType.ignoreSubfolders) {
          const pathSegments = filePath.split("/");
          const pathDepth = pathSegments.length;
          const patternSegments = contentType.folder.split("/");
          const expectedDepth = patternSegments.length;
          if (contentType.creationMode === "folder") {
            const folderDepth = pathDepth - 1;
            if (folderDepth === expectedDepth || folderDepth === expectedDepth + 1) {
              return contentType.id;
            }
          } else {
            if (pathDepth === expectedDepth) {
              return contentType.id;
            }
          }
        } else {
          return contentType.id;
        }
      }
    }
    return "note";
  }
  getContentType(typeId) {
    const settings = this.getSettings();
    const contentTypes = settings.contentTypes || [];
    return contentTypes.find((ct) => ct.id === typeId) || null;
  }
  getTitleKey(type) {
    if (type === "note") return "title";
    const contentType = this.getContentType(type);
    if (!contentType) return "title";
    const template = contentType.template;
    const lines = template.split("\n");
    let inProperties = false;
    for (const line of lines) {
      const trimmed = line.trim();
      if (trimmed === "---") {
        inProperties = !inProperties;
        continue;
      }
      if (inProperties) {
        const match = trimmed.match(/^(\w+):\s*(.+)$/);
        if (match) {
          const key = match[1];
          const value = match[2];
          if (value.includes("{{title}}")) {
            return key;
          }
        }
      }
    }
    return "title";
  }
  async createFile(options) {
    var _a;
    const { file, title, type } = options;
    if (!title) {
      new import_obsidian.Notice(`Title is required to create a ${type}.`);
      return null;
    }
    const contentType = this.getContentType(type);
    if (!contentType && type !== "note") {
      new import_obsidian.Notice(`Content type ${type} not found.`);
      return null;
    }
    const kebabTitle = this.toKebabCase(title);
    const enableUnderscorePrefix = (contentType == null ? void 0 : contentType.enableUnderscorePrefix) || false;
    const prefix = enableUnderscorePrefix ? "_" : "";
    let targetFolder = "";
    if (type === "note") {
      targetFolder = "";
    } else if (contentType) {
      const originalDir = ((_a = file.parent) == null ? void 0 : _a.path) || "";
      if (originalDir === "" || originalDir === "/") {
        targetFolder = contentType.folder || "";
      } else {
        targetFolder = originalDir;
      }
    }
    if (targetFolder) {
      const folder = this.app.vault.getAbstractFileByPath(targetFolder);
      if (!(folder instanceof import_obsidian.TFolder)) {
        await this.app.vault.createFolder(targetFolder);
      }
    }
    const creationMode = (contentType == null ? void 0 : contentType.creationMode) || "file";
    if (creationMode === "folder") {
      return this.createFolderStructure(file, kebabTitle, prefix, targetFolder, type, contentType);
    } else {
      return this.createFileStructure(file, kebabTitle, prefix, targetFolder, contentType);
    }
  }
  async createFolderStructure(file, kebabTitle, prefix, targetFolder, type, contentType) {
    var _a;
    const folderName = `${prefix}${kebabTitle}`;
    let folderPath;
    if (targetFolder) {
      folderPath = `${targetFolder}/${folderName}`;
    } else {
      const currentDir = file.parent ? file.parent.path : "";
      if (currentDir && currentDir !== "/") {
        folderPath = `${currentDir}/${folderName}`;
      } else {
        folderPath = folderName;
      }
    }
    try {
      const folder = this.app.vault.getAbstractFileByPath(folderPath);
      if (!(folder instanceof import_obsidian.TFolder)) {
        await this.app.vault.createFolder(folderPath);
      }
    } catch (e) {
    }
    const indexFileName = (contentType == null ? void 0 : contentType.indexFileName) || "index";
    const extension = (contentType == null ? void 0 : contentType.useMdxExtension) ? ".mdx" : ".md";
    const fileName = `${indexFileName}${extension}`;
    const newPath = `${folderPath}/${fileName}`;
    const existingFile = this.app.vault.getAbstractFileByPath(newPath);
    if (existingFile instanceof import_obsidian.TFile) {
      new import_obsidian.Notice(`File already exists at ${newPath}.`);
      return null;
    }
    if (this.plugin && "pluginCreatedFiles" in this.plugin) {
      const pluginWithFiles = this.plugin;
      (_a = pluginWithFiles.pluginCreatedFiles) == null ? void 0 : _a.add(newPath);
    }
    try {
      await this.app.fileManager.renameFile(file, newPath);
      const newFile = this.app.vault.getAbstractFileByPath(newPath);
      if (!(newFile instanceof import_obsidian.TFile)) {
        return null;
      }
      setTimeout(() => {
        const fileExplorer = this.app.workspace.getLeavesOfType("file-explorer")[0];
        if (fileExplorer && fileExplorer.view) {
          const view = fileExplorer.view;
          if (view && typeof view === "object" && "tree" in view) {
            const fileTree = view.tree;
            if (fileTree && newFile instanceof import_obsidian.TFile && typeof fileTree.revealFile === "function") {
              fileTree.revealFile(newFile);
            }
          }
        }
      }, 200);
      const leaf = this.app.workspace.getLeaf(false);
      await leaf.openFile(newFile);
      const positionCursor = () => {
        var _a2;
        const view = leaf.view;
        if (view && "editor" in view) {
          const editor = view.editor;
          if (editor) {
            const content = editor.getValue();
            if (content) {
              const lines = content.split("\n");
              const lastLine = lines.length - 1;
              const lastLineLength = ((_a2 = lines[lastLine]) == null ? void 0 : _a2.length) || 0;
              editor.setCursor({ line: lastLine, ch: lastLineLength });
              editor.focus();
              return true;
            }
          }
        }
        return false;
      };
      setTimeout(() => {
        if (!positionCursor()) {
          setTimeout(() => {
            positionCursor();
          }, 200);
        }
      }, 100);
      return newFile;
    } catch (error) {
      const errorMessage = error instanceof Error ? error.message : String(error);
      new import_obsidian.Notice(`Failed to create folder structure: ${errorMessage}.`);
      return null;
    }
  }
  async createFileStructure(file, kebabTitle, prefix, targetFolder, contentType) {
    var _a;
    const extension = (contentType == null ? void 0 : contentType.useMdxExtension) ? ".mdx" : ".md";
    const newName = `${prefix}${kebabTitle}${extension}`;
    let newPath;
    if (targetFolder) {
      newPath = `${targetFolder}/${newName}`;
    } else {
      const currentDir = file.parent ? file.parent.path : "";
      if (currentDir && currentDir !== "/") {
        newPath = `${currentDir}/${newName}`;
      } else {
        newPath = newName;
      }
    }
    const existingFile = this.app.vault.getAbstractFileByPath(newPath);
    if (existingFile instanceof import_obsidian.TFile && existingFile !== file) {
      new import_obsidian.Notice(`File with name "${newName}" already exists.`);
      return null;
    }
    if (this.plugin && "pluginCreatedFiles" in this.plugin) {
      const pluginWithFiles = this.plugin;
      (_a = pluginWithFiles.pluginCreatedFiles) == null ? void 0 : _a.add(newPath);
    }
    try {
      await this.app.fileManager.renameFile(file, newPath);
      const newFile = this.app.vault.getAbstractFileByPath(newPath);
      if (!(newFile instanceof import_obsidian.TFile)) {
        new import_obsidian.Notice("Failed to locate renamed file.");
        return null;
      }
      const leaf = this.app.workspace.getLeaf(false);
      await leaf.openFile(newFile);
      const positionCursor = () => {
        var _a2;
        const view = leaf.view;
        if (view && "editor" in view) {
          const editor = view.editor;
          if (editor) {
            const content = editor.getValue();
            if (content) {
              const lines = content.split("\n");
              const lastLine = lines.length - 1;
              const lastLineLength = ((_a2 = lines[lastLine]) == null ? void 0 : _a2.length) || 0;
              editor.setCursor({ line: lastLine, ch: lastLineLength });
              editor.focus();
              return true;
            }
          }
        }
        return false;
      };
      setTimeout(() => {
        if (!positionCursor()) {
          setTimeout(() => {
            positionCursor();
          }, 200);
        }
      }, 100);
      return newFile;
    } catch (error) {
      const errorMessage = error instanceof Error ? error.message : String(error);
      new import_obsidian.Notice(`Failed to rename file: ${errorMessage}.`);
      return null;
    }
  }
  async renameFile(options) {
    const { file, title, type } = options;
    if (!title) {
      new import_obsidian.Notice(`Title is required to rename the content.`);
      return null;
    }
    const contentType = this.getContentType(type);
    if (!contentType && type !== "note") {
      new import_obsidian.Notice(`Content type ${type} not found.`);
      return null;
    }
    const kebabTitle = this.toKebabCase(title);
    const prefix = "";
    const creationMode = (contentType == null ? void 0 : contentType.creationMode) || "file";
    if (creationMode === "folder") {
      return this.renameFolderStructure(file, kebabTitle, prefix, type, contentType);
    } else {
      return this.renameFileStructure(file, kebabTitle, prefix, contentType);
    }
  }
  async renameFolderStructure(file, kebabTitle, prefix, type, contentType) {
    const indexFileName = (contentType == null ? void 0 : contentType.indexFileName) || "index";
    const isIndex = file.basename === indexFileName;
    if (isIndex) {
      if (!file.parent) {
        new import_obsidian.Notice("Cannot rename: file has no parent folder.");
        return null;
      }
      prefix = file.parent.name.startsWith("_") ? "_" : "";
      const newFolderName = `${prefix}${kebabTitle}`;
      const parentFolder = file.parent.parent;
      if (!parentFolder) {
        new import_obsidian.Notice("Cannot rename: parent folder has no parent.");
        return null;
      }
      let newFolderPath;
      if (parentFolder.path === "" || parentFolder.path === "/") {
        newFolderPath = newFolderName;
      } else {
        newFolderPath = `${parentFolder.path}/${newFolderName}`;
      }
      const existingFolder = this.app.vault.getAbstractFileByPath(newFolderPath);
      if (existingFolder instanceof import_obsidian.TFolder) {
        new import_obsidian.Notice(`Folder already exists at ${newFolderPath}.`);
        return null;
      }
      try {
        await this.app.fileManager.renameFile(file.parent, newFolderPath);
      } catch (error) {
        const errorMessage = error instanceof Error ? error.message : String(error);
        new import_obsidian.Notice(`Failed to rename folder: ${errorMessage}.`);
        return null;
      }
      const newFilePath = `${newFolderPath}/${file.name}`;
      const newFile = this.app.vault.getAbstractFileByPath(newFilePath);
      if (!(newFile instanceof import_obsidian.TFile)) {
        new import_obsidian.Notice("Failed to locate renamed file.");
        return null;
      }
      return newFile;
    } else {
      if (!file.parent) {
        new import_obsidian.Notice("Cannot rename: file has no parent folder.");
        return null;
      }
      prefix = file.basename.startsWith("_") ? "_" : "";
      const extension = file.extension;
      const newName = `${prefix}${kebabTitle}.${extension}`;
      const newPath = `${file.parent.path}/${newName}`;
      const existingFile = this.app.vault.getAbstractFileByPath(newPath);
      if (existingFile instanceof import_obsidian.TFile && existingFile !== file) {
        new import_obsidian.Notice(`File already exists at ${newPath}.`);
        return null;
      }
      await this.app.fileManager.renameFile(file, newPath);
      const newFile = this.app.vault.getAbstractFileByPath(newPath);
      if (!(newFile instanceof import_obsidian.TFile)) {
        new import_obsidian.Notice("Failed to locate renamed file.");
        return null;
      }
      return newFile;
    }
  }
  async renameFileStructure(file, kebabTitle, prefix, contentType) {
    var _a, _b;
    if (!file.parent) {
      new import_obsidian.Notice("Cannot rename: file has no parent folder.");
      return null;
    }
    const indexFileName = (contentType == null ? void 0 : contentType.indexFileName) || "";
    const isIndex = indexFileName && indexFileName.trim() !== "" && file.basename === indexFileName;
    if (isIndex) {
      prefix = file.parent.name.startsWith("_") ? "_" : "";
      const newFolderName = `${prefix}${kebabTitle}`;
      const parentFolder = file.parent.parent;
      if (!parentFolder) {
        new import_obsidian.Notice("Cannot rename: parent folder has no parent.");
        return null;
      }
      let newFolderPath;
      if (parentFolder.path === "" || parentFolder.path === "/") {
        newFolderPath = newFolderName;
      } else {
        newFolderPath = `${parentFolder.path}/${newFolderName}`;
      }
      const existingFolder = this.app.vault.getAbstractFileByPath(newFolderPath);
      if (existingFolder instanceof import_obsidian.TFolder) {
        new import_obsidian.Notice(`Folder already exists at ${newFolderPath}.`);
        return null;
      }
      const newFilePath = `${newFolderPath}/${file.name}`;
      if (this.plugin && "pluginCreatedFiles" in this.plugin) {
        const pluginWithFiles = this.plugin;
        (_a = pluginWithFiles.pluginCreatedFiles) == null ? void 0 : _a.add(newFilePath);
      }
      try {
        await this.app.fileManager.renameFile(file.parent, newFolderPath);
      } catch (error) {
        console.error("FileOperations: Folder rename failed:", error);
        const errorMessage = error instanceof Error ? error.message : String(error);
        new import_obsidian.Notice(`Failed to rename folder: ${errorMessage}.`);
        return null;
      }
      const newFile2 = this.app.vault.getAbstractFileByPath(newFilePath);
      if (!(newFile2 instanceof import_obsidian.TFile)) {
        new import_obsidian.Notice("Failed to locate renamed file.");
        return null;
      }
      return newFile2;
    }
    prefix = file.basename.startsWith("_") ? "_" : "";
    const extension = file.extension;
    const newName = `${prefix}${kebabTitle}.${extension}`;
    let newPath;
    if (file.parent.path === "" || file.parent.path === "/") {
      newPath = newName;
    } else {
      newPath = `${file.parent.path}/${newName}`;
    }
    const existingFile = this.app.vault.getAbstractFileByPath(newPath);
    if (existingFile instanceof import_obsidian.TFile && existingFile !== file) {
      new import_obsidian.Notice(`File already exists at ${newPath}.`);
      return null;
    }
    if (this.plugin && "pluginCreatedFiles" in this.plugin) {
      const pluginWithFiles = this.plugin;
      (_b = pluginWithFiles.pluginCreatedFiles) == null ? void 0 : _b.add(newPath);
    }
    try {
      await this.app.fileManager.renameFile(file, newPath);
    } catch (error) {
      console.error("FileOperations: File rename failed:", error);
      const errorMessage = error instanceof Error ? error.message : String(error);
      new import_obsidian.Notice(`Failed to rename file: ${errorMessage}.`);
      return null;
    }
    const newFile = this.app.vault.getAbstractFileByPath(newPath);
    if (!(newFile instanceof import_obsidian.TFile)) {
      new import_obsidian.Notice("Failed to locate renamed file.");
      return null;
    }
    return newFile;
  }
};

// src/utils/template-parsing.ts
var import_obsidian2 = require("obsidian");
var TemplateParser = class {
  constructor(app, settings) {
    this.app = app;
    this.settings = settings;
  }
  /**
   * Convert a string to kebab-case for slug generation
   */
  toKebabCase(str) {
    return str.toLowerCase().replace(/[^a-z0-9\s-]/g, "").trim().replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "");
  }
  parseFrontmatter(content) {
    let propertiesEnd = 0;
    let propertiesText = "";
    const existingProperties = {};
    if (content.startsWith("---")) {
      propertiesEnd = content.indexOf("\n---", 3);
      if (propertiesEnd === -1) {
        propertiesEnd = content.length;
      } else {
        propertiesEnd += 4;
      }
      propertiesText = content.slice(4, propertiesEnd - 4).trim();
      try {
        let currentKey = null;
        const arrayKeys = /* @__PURE__ */ new Set();
        propertiesText.split("\n").forEach((line) => {
          const trimmedLine = line.trim();
          const match = trimmedLine.match(/^([a-zA-Z_][a-zA-Z0-9_-]*):\s*(.*)$/);
          if (match) {
            const [, key, value] = match;
            currentKey = key;
            const trimmedValue = value ? value.trim() : "";
            const bracketArrayMatch = trimmedValue.match(/^\[(.*)\]$/);
            if (bracketArrayMatch) {
              const arrayContent = bracketArrayMatch[1].trim();
              existingProperties[key] = [];
              arrayKeys.add(key);
              if (arrayContent) {
                const items = [];
                let currentItem = "";
                let inQuotes = false;
                let quoteChar = "";
                for (let i = 0; i < arrayContent.length; i++) {
                  const char = arrayContent[i];
                  if (!inQuotes && (char === '"' || char === "'")) {
                    inQuotes = true;
                    quoteChar = char;
                  } else if (inQuotes && char === quoteChar) {
                    if (i > 0 && arrayContent[i - 1] === "\\") {
                      currentItem += char;
                    } else {
                      inQuotes = false;
                      quoteChar = "";
                    }
                  } else if (!inQuotes && char === ",") {
                    const trimmedItem = currentItem.trim();
                    if (trimmedItem) {
                      const unquoted = trimmedItem.replace(/^["']|["']$/g, "");
                      items.push(unquoted);
                    }
                    currentItem = "";
                  } else {
                    currentItem += char;
                  }
                }
                if (currentItem.trim()) {
                  const trimmedItem = currentItem.trim();
                  const unquoted = trimmedItem.replace(/^["']|["']$/g, "");
                  items.push(unquoted);
                }
                existingProperties[key] = items;
              }
            } else {
              const isKnownArrayKey = KNOWN_ARRAY_KEYS.includes(key);
              const isEmptyArray = !trimmedValue || trimmedValue === "";
              const isArrayProperty = isKnownArrayKey || isEmptyArray;
              if (isArrayProperty) {
                existingProperties[key] = [];
                arrayKeys.add(key);
              } else {
                const unquotedValue = trimmedValue.replace(/^["']|["']$/g, "");
                existingProperties[key] = [unquotedValue];
              }
            }
          } else if (currentKey && trimmedLine.startsWith("- ")) {
            const isArrayProperty = arrayKeys.has(currentKey);
            if (isArrayProperty) {
              const item = trimmedLine.replace(/^-\s*/, "");
              if (item) existingProperties[currentKey].push(item);
            }
          } else if (trimmedLine && !trimmedLine.startsWith("- ") && !trimmedLine.startsWith("#")) {
            const keyMatch = trimmedLine.match(/^([^:]+):\s*(.*)$/);
            if (keyMatch) {
              const [, key, value] = keyMatch;
              if (!existingProperties[key]) {
                existingProperties[key] = [value ? value.trim() : ""];
              }
            }
          }
        });
        KNOWN_ARRAY_KEYS.forEach((key) => {
          if (propertiesText.includes(key + ":") && !existingProperties[key]) {
            existingProperties[key] = [];
          }
        });
      } catch (e) {
        new import_obsidian2.Notice("Falling back to template due to parsing error.");
      }
    }
    const bodyContent = content.slice(propertiesEnd);
    return {
      properties: existingProperties,
      propertiesText,
      propertiesEnd,
      bodyContent
    };
  }
  parseTemplate(templateString, title) {
    const templateLines = templateString.split("\n");
    const templateProps = [];
    const templateValues = {};
    let inProperties = false;
    for (let i = 0; i < templateLines.length; i++) {
      const line = templateLines[i].trim();
      if (line === "---") {
        inProperties = !inProperties;
        if (!inProperties) {
          break;
        }
        continue;
      }
      if (inProperties) {
        const match = line.match(/^(\w+):\s*(.*)$/);
        if (match) {
          const [, key, value] = match;
          templateProps.push(key);
          const isKnownArrayKey = KNOWN_ARRAY_KEYS.includes(key);
          const isEmptyArray = !value || value.trim() === "" || value.trim() === "[]";
          const isArrayProperty = isKnownArrayKey || isEmptyArray;
          if (isArrayProperty) {
            if (value && value.startsWith("[")) {
              const items = value.replace(/[[\]]/g, "").split(",").map((t) => t.trim()).filter((t) => t);
              templateValues[key] = items;
            } else {
              templateValues[key] = [];
              for (let j = i + 1; j < templateLines.length; j++) {
                const nextLine = templateLines[j].trim();
                if (nextLine.startsWith("- ")) {
                  const item = nextLine.replace(/^-\s*/, "").trim();
                  if (item) {
                    const arrayValue = templateValues[key];
                    if (Array.isArray(arrayValue)) {
                      arrayValue.push(item);
                    }
                  }
                } else if (nextLine === "---" || nextLine && !nextLine.startsWith("- ") && nextLine.includes(":")) {
                  break;
                }
              }
            }
          } else {
            const slug = this.toKebabCase(title);
            const stringValue = (value || "").replace(/\{\{title\}\}/g, title).replace(/\{\{date\}\}/g, window.moment(/* @__PURE__ */ new Date()).format(this.settings.dateFormat)).replace(/\{\{slug\}\}/g, slug);
            templateValues[key] = stringValue;
          }
        }
      }
    }
    return { templateProps, templateValues };
  }
  buildFrontmatterContent(finalProps, arrayKeys) {
    let newContent = "---\n";
    for (const key in finalProps) {
      const isArrayProperty = KNOWN_ARRAY_KEYS.includes(key) || arrayKeys && arrayKeys.has(key);
      if (isArrayProperty) {
        newContent += `${key}:
`;
        if (finalProps[key].length > 0) {
          finalProps[key].forEach((item) => {
            newContent += `  - ${item}
`;
          });
        }
      } else {
        newContent += `${key}: ${finalProps[key][0] || ""}
`;
      }
    }
    newContent += "---";
    return newContent;
  }
  async updateTitleInFrontmatter(file, newTitle, type) {
    const titleKey = this.getTitleKey(type);
    const hasTitleInTemplate = this.templateHasTitle(type);
    if (!hasTitleInTemplate) {
      return;
    }
    const content = await this.app.vault.read(file);
    let propertiesEnd = 0;
    let propertiesText = "";
    let hasFrontmatter = false;
    if (content.startsWith("---")) {
      hasFrontmatter = true;
      propertiesEnd = content.indexOf("\n---", 3);
      if (propertiesEnd === -1) {
        propertiesEnd = content.length;
      } else {
        propertiesEnd += 4;
      }
      propertiesText = content.slice(4, propertiesEnd - 4).trim();
    }
    const propOrder = [];
    const existing = {};
    let currentKey = null;
    let titleKeyPosition = -1;
    const arrayKeys = /* @__PURE__ */ new Set();
    propertiesText.split("\n").forEach((line, index) => {
      const trimmedLine = line.trim();
      const match = trimmedLine.match(/^([a-zA-Z_][a-zA-Z0-9_-]*):\s*(.*)$/);
      if (match) {
        const [, key, value] = match;
        propOrder.push(key);
        currentKey = key;
        if (key === titleKey) {
          titleKeyPosition = index;
        }
        const isKnownArrayKey = KNOWN_ARRAY_KEYS.includes(key);
        const isEmptyArray = !value || value.trim() === "" || value.trim() === "[]";
        const isArrayProperty = isKnownArrayKey || isEmptyArray;
        if (isArrayProperty) {
          existing[key] = [];
          arrayKeys.add(key);
        } else {
          existing[key] = value ? value.trim() : "";
        }
      } else if (currentKey && arrayKeys.has(currentKey) && trimmedLine.startsWith("- ")) {
        const item = trimmedLine.replace(/^-\s*/, "");
        if (item) existing[currentKey].push(item);
      } else if (trimmedLine && !trimmedLine.startsWith("- ") && !trimmedLine.startsWith("#")) {
        const keyMatch = trimmedLine.match(/^([^:]+):\s*(.*)$/);
        if (keyMatch) {
          const [, key, value] = keyMatch;
          if (!propOrder.includes(key)) {
            propOrder.push(key);
            existing[key] = value ? value.trim() : "";
          }
        }
      }
    });
    let titleVal;
    if (newTitle.includes('"') || newTitle.includes("'") || newTitle.includes("\n") || newTitle.includes("\\")) {
      titleVal = `'${newTitle.replace(/'/g, "''")}'`;
    } else if (newTitle.includes(" ") || newTitle.includes(":") || newTitle.includes("#") || newTitle.includes("@")) {
      titleVal = `"${newTitle.replace(/"/g, '\\"')}"`;
    } else {
      titleVal = newTitle;
    }
    existing[titleKey] = titleVal;
    if ("slug" in existing) {
      const newSlug = this.toKebabCase(newTitle);
      existing["slug"] = newSlug;
    }
    if (titleKeyPosition === -1) {
      propOrder.push(titleKey);
    }
    if (!hasFrontmatter) {
      return;
    }
    let newContent = "---\n";
    for (const key of propOrder) {
      const val = existing[key];
      if (Array.isArray(val)) {
        newContent += `${key}:
`;
        if (val.length > 0) {
          val.forEach((item) => {
            newContent += `  - ${item}
`;
          });
        }
      } else {
        newContent += `${key}: ${val || ""}
`;
      }
    }
    newContent += "---\n";
    const bodyContent = content.slice(propertiesEnd);
    newContent += bodyContent;
    await this.app.vault.modify(file, newContent);
  }
  getTitleKey(type) {
    if (type === "note") return "title";
    const contentTypes = this.settings.contentTypes || [];
    const contentType = contentTypes.find((ct) => ct.id === type);
    if (!contentType) return "title";
    const template = contentType.template;
    const lines = template.split("\n");
    let inProperties = false;
    for (const line of lines) {
      const trimmed = line.trim();
      if (trimmed === "---") {
        inProperties = !inProperties;
        continue;
      }
      if (inProperties) {
        const match = trimmed.match(/^(\w+):\s*(.+)$/);
        if (match) {
          const key = match[1];
          const value = match[2];
          if (value.includes("{{title}}")) {
            return key;
          }
        }
      }
    }
    return "title";
  }
  // Check if the template for this content type has {{title}}
  templateHasTitle(type) {
    if (type === "note") return true;
    const contentTypes = this.settings.contentTypes || [];
    const contentType = contentTypes.find((ct) => ct.id === type);
    if (!contentType) return true;
    const template = contentType.template;
    return template.includes("{{title}}");
  }
};

// src/utils/link-conversion.ts
var import_obsidian3 = require("obsidian");
var LinkConverter = class {
  constructor(settings, plugin) {
    this.settings = settings;
    this.plugin = plugin;
  }
  // Get fresh settings from plugin if available, otherwise use stored settings
  getSettings() {
    var _a;
    if ((_a = this.plugin) == null ? void 0 : _a.settings) {
      return this.plugin.settings;
    }
    return this.settings;
  }
  toKebabCase(str) {
    return str.toLowerCase().replace(/[^a-z0-9\s-]/g, "").trim().replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "");
  }
  getAstroUrlFromInternalLink(link) {
    const hashIndex = link.indexOf("#");
    let path = hashIndex >= 0 ? link.slice(0, hashIndex) : link;
    const anchor = hashIndex >= 0 ? link.slice(hashIndex) : "";
    path = decodeURIComponent(path);
    path = path.replace(/\.(md|mdx)$/, "");
    const fileExtension = link.endsWith(".mdx") ? ".mdx" : ".md";
    const contentTypeInfo = this.getContentTypeForPath(path + fileExtension);
    let basePath = contentTypeInfo.basePath || "";
    let contentFolder = contentTypeInfo.contentFolder || "";
    let indexFileName = contentTypeInfo.indexFileName || "";
    if (contentFolder) {
      path = path.slice(contentFolder.length + 1);
    }
    let addTrailingSlash = false;
    const parts = path.split("/");
    const lastPart = parts[parts.length - 1];
    if (indexFileName && indexFileName.trim() !== "" && lastPart === indexFileName) {
      parts.pop();
      path = parts.join("/");
      addTrailingSlash = true;
    } else if ((!indexFileName || indexFileName.trim() === "") && lastPart === "index") {
      parts.pop();
      path = parts.join("/");
      addTrailingSlash = true;
    }
    const slugParts = path.split("/").map((part) => this.toKebabCase(part));
    const slug = slugParts.join("/");
    if (basePath) {
      if (!basePath.startsWith("/")) {
        basePath = "/" + basePath;
      }
      if (!basePath.endsWith("/")) {
        basePath += "/";
      }
    } else {
      basePath = "/";
    }
    const settings = this.getSettings();
    const shouldAddTrailingSlash = (settings.addTrailingSlashToLinks || addTrailingSlash) && !anchor;
    return `${basePath}${slug}${shouldAddTrailingSlash ? "/" : ""}${anchor}`;
  }
  getAstroUrlFromInternalLinkWithContext(link, currentFilePath, currentFileContentType) {
    const hashIndex = link.indexOf("#");
    let path = hashIndex >= 0 ? link.slice(0, hashIndex) : link;
    const anchor = hashIndex >= 0 ? link.slice(hashIndex) : "";
    path = decodeURIComponent(path);
    path = path.replace(/\.(md|mdx)$/, "");
    let basePath = "";
    let contentFolder = "";
    let indexFileName = "";
    const fileExtension = link.endsWith(".mdx") ? ".mdx" : ".md";
    const targetContentType = this.getContentTypeForPath(path + fileExtension);
    if (!targetContentType.basePath && currentFileContentType.basePath) {
      basePath = currentFileContentType.basePath;
      indexFileName = currentFileContentType.indexFileName;
      contentFolder = currentFileContentType.contentFolder;
    } else {
      basePath = targetContentType.basePath;
      indexFileName = targetContentType.indexFileName;
      contentFolder = targetContentType.contentFolder;
    }
    if (contentFolder) {
      path = path.slice(contentFolder.length + 1);
    }
    let addTrailingSlash = false;
    const parts = path.split("/");
    const lastPart = parts[parts.length - 1];
    if (indexFileName && indexFileName.trim() !== "" && lastPart === indexFileName) {
      parts.pop();
      path = parts.join("/");
      addTrailingSlash = true;
    } else if ((!indexFileName || indexFileName.trim() === "") && lastPart === "index") {
      parts.pop();
      path = parts.join("/");
      addTrailingSlash = true;
    }
    const slugParts = path.split("/").map((part) => this.toKebabCase(part));
    const slug = slugParts.join("/");
    if (basePath) {
      if (!basePath.startsWith("/")) {
        basePath = "/" + basePath;
      }
      if (!basePath.endsWith("/")) {
        basePath += "/";
      }
    } else {
      basePath = "/";
    }
    const settings = this.getSettings();
    const shouldAddTrailingSlash = (settings.addTrailingSlashToLinks || addTrailingSlash) && !anchor;
    return `${basePath}${slug}${shouldAddTrailingSlash ? "/" : ""}${anchor}`;
  }
  isInConfiguredContentDirectory(filePath) {
    const settings = this.getSettings();
    const contentTypes = settings.contentTypes || [];
    const sortedTypes = sortByPatternSpecificity(contentTypes);
    for (const contentType of sortedTypes) {
      if (!contentType.enabled) continue;
      if (!contentType.folder || contentType.folder.trim() === "") {
        if (!filePath.includes("/") || filePath.split("/").length === 1) {
          return true;
        }
      } else if (matchesFolderPattern(filePath, contentType.folder)) {
        if (contentType.ignoreSubfolders) {
          const pathSegments = filePath.split("/");
          const pathDepth = pathSegments.length;
          const patternSegments = contentType.folder.split("/");
          const expectedDepth = patternSegments.length;
          if (contentType.creationMode === "folder") {
            const folderDepth = pathDepth - 1;
            if (folderDepth === expectedDepth || folderDepth === expectedDepth + 1) {
              return true;
            }
          } else {
            if (pathDepth === expectedDepth) {
              return true;
            }
          }
        } else {
          return true;
        }
      }
    }
    return false;
  }
  getContentTypeForPath(filePath) {
    const settings = this.getSettings();
    const contentTypes = settings.contentTypes || [];
    const sortedTypes = sortByPatternSpecificity(contentTypes);
    for (const contentType of sortedTypes) {
      if (!contentType.enabled) continue;
      if (!contentType.folder || contentType.folder.trim() === "") {
        if (!filePath.includes("/") || filePath.split("/").length === 1) {
          return {
            basePath: contentType.linkBasePath || "",
            creationMode: contentType.creationMode,
            indexFileName: contentType.indexFileName || "",
            contentFolder: ""
          };
        }
      } else if (matchesFolderPattern(filePath, contentType.folder)) {
        if (contentType.ignoreSubfolders) {
          const pathSegments = filePath.split("/");
          const pathDepth = pathSegments.length;
          const patternSegments = contentType.folder.split("/");
          const expectedDepth = patternSegments.length;
          if (contentType.creationMode === "folder") {
            const folderDepth = pathDepth - 1;
            if (folderDepth === expectedDepth || folderDepth === expectedDepth + 1) {
              return {
                basePath: contentType.linkBasePath || "",
                creationMode: contentType.creationMode,
                indexFileName: contentType.indexFileName || "",
                contentFolder: contentType.folder
              };
            }
          } else {
            if (pathDepth === expectedDepth) {
              return {
                basePath: contentType.linkBasePath || "",
                creationMode: contentType.creationMode,
                indexFileName: contentType.indexFileName || "",
                contentFolder: contentType.folder
              };
            }
          }
        } else {
          return {
            basePath: contentType.linkBasePath || "",
            creationMode: contentType.creationMode,
            indexFileName: contentType.indexFileName || "",
            contentFolder: contentType.folder
          };
        }
      }
    }
    return {
      basePath: "",
      creationMode: "file",
      indexFileName: "",
      contentFolder: ""
    };
  }
  convertWikilinksForAstro(editor, file) {
    var _a, _b;
    if (!(file instanceof import_obsidian3.TFile)) {
      new import_obsidian3.Notice("No active file.");
      return;
    }
    const cursor = editor.getCursor();
    const originalLine = cursor.line;
    const originalCh = cursor.ch;
    const originalContent = editor.getValue();
    const originalLineCount = originalContent.split("\n").length;
    const originalLineLength = ((_a = originalContent.split("\n")[originalLine]) == null ? void 0 : _a.length) || 0;
    const content = editor.getValue();
    let newContent = content;
    let convertedCount = 0;
    let skippedCount = 0;
    const skippedLinks = [];
    const currentFileContentType = this.getContentTypeForPath(file.path);
    const imageExtensions = /\.(png|jpg|jpeg|gif|svg)$/i;
    const canConvertLink = (linkText) => {
      if (imageExtensions.test(linkText)) {
        return false;
      }
      if (linkText.match(/^https?:\/\//)) {
        return false;
      }
      if (!linkText.includes(".md") && !linkText.includes(".mdx") && !linkText.match(/^[a-zA-Z0-9_-]+(\/[a-zA-Z0-9_-]+)*$/)) {
        return false;
      }
      let targetPath;
      if (linkText.endsWith(".md") || linkText.endsWith(".mdx")) {
        targetPath = linkText;
      } else {
        targetPath = linkText + ".md";
      }
      const isInConfiguredDirectory = this.isInConfiguredContentDirectory(targetPath);
      const isSimpleFilename = !targetPath.includes("/");
      const hasCurrentContentType = currentFileContentType.basePath !== "" || currentFileContentType.creationMode !== "file" || currentFileContentType.indexFileName !== "";
      return isInConfiguredDirectory || isSimpleFilename && hasCurrentContentType;
    };
    newContent = newContent.replace(
      /\[\[([^\]|]+)(\|([^\]]+))?\]\]/g,
      (match, linkText, _pipe, displayText) => {
        if (imageExtensions.test(linkText)) {
          skippedCount++;
          skippedLinks.push(linkText);
          return match;
        }
        if (!canConvertLink(linkText)) {
          skippedCount++;
          skippedLinks.push(linkText);
          return match;
        }
        const display = displayText || linkText.replace(/\.(md|mdx)$/, "");
        const url = this.getAstroUrlFromInternalLinkWithContext(linkText, file.path, currentFileContentType);
        convertedCount++;
        return `[${display}](${url})`;
      }
    );
    newContent = newContent.replace(
      /\[([^\]]+)\]\(([^)]+\.(md|mdx)[^)]*)\)/g,
      (match, displayText, link) => {
        if (link.match(/^https?:\/\//) || imageExtensions.test(link)) {
          skippedCount++;
          skippedLinks.push(link);
          return match;
        }
        if (!canConvertLink(link)) {
          skippedCount++;
          skippedLinks.push(link);
          return match;
        }
        const url = this.getAstroUrlFromInternalLinkWithContext(link, file.path, currentFileContentType);
        convertedCount++;
        return `[${displayText}](${url})`;
      }
    );
    newContent = newContent.replace(
      /!\[(.*?)\]\(([^)]+)\)/g,
      (match) => {
        skippedCount++;
        return match;
      }
    );
    newContent = newContent.replace(/\{\{([^}]+)\}\}/g, (match, fileName) => {
      if (imageExtensions.test(fileName)) {
        skippedCount++;
        skippedLinks.push(fileName);
        return match;
      }
      if (!canConvertLink(fileName)) {
        skippedCount++;
        skippedLinks.push(fileName);
        return match;
      }
      const url = this.getAstroUrlFromInternalLinkWithContext(fileName, file.path, currentFileContentType);
      convertedCount++;
      return `[Embedded: ${fileName}](${url})`;
    });
    editor.setValue(newContent);
    const newLineCount = newContent.split("\n").length;
    const newLineLength = ((_b = newContent.split("\n")[originalLine]) == null ? void 0 : _b.length) || 0;
    let newLine = originalLine;
    let newCh = originalCh;
    if (newLineCount !== originalLineCount) {
      if (newLine >= newLineCount) {
        newLine = Math.max(0, newLineCount - 1);
      }
    }
    if (newLineLength !== originalLineLength) {
      if (newCh > newLineLength) {
        newCh = Math.max(0, newLineLength);
      }
    }
    editor.setCursor({ line: newLine, ch: newCh });
    if (convertedCount > 0 && skippedCount === 0) {
      new import_obsidian3.Notice(`Converted ${convertedCount} internal link${convertedCount > 1 ? "s" : ""} for Astro.`);
    } else if (convertedCount > 0 && skippedCount > 0) {
      new import_obsidian3.Notice(`Converted ${convertedCount} link${convertedCount > 1 ? "s" : ""} for Astro. Skipped ${skippedCount} link${skippedCount > 1 ? "s" : ""} outside configured content directories.`);
    } else if (skippedCount > 0) {
      new import_obsidian3.Notice(`No links converted. All ${skippedCount} link${skippedCount > 1 ? "s" : ""} are outside configured content directories or are images/external links.`);
    } else {
      new import_obsidian3.Notice("No internal links found to convert.");
    }
  }
};

// src/ui/title-modal.ts
var import_obsidian4 = require("obsidian");
var TitleModal = class extends import_obsidian4.Modal {
  constructor(app, file, plugin, type, isRename = false, isNewNote = false) {
    super(app);
    this.file = file;
    this.plugin = plugin;
    this.type = type;
    this.isRename = isRename;
    this.isNewNote = isNewNote;
    const settings = plugin.settings;
    this.fileOps = new FileOperations(app, settings, plugin);
    this.templateParser = new TemplateParser(app, settings);
  }
  async getCurrentTitleAsync() {
    if (!this.file) {
      return "";
    }
    try {
      const content = await this.app.vault.read(this.file);
      const titleKey = this.fileOps.getTitleKey(this.type);
      const { properties } = this.templateParser.parseFrontmatter(content);
      if (titleKey in properties) {
        const titleValue = properties[titleKey];
        if (Array.isArray(titleValue) && titleValue.length > 0) {
          return String(titleValue[0]);
        }
        if (titleValue !== null && titleValue !== void 0) {
          return String(titleValue);
        }
      }
    } catch (error) {
      console.error("Error reading file for title:", error);
    }
    return this.getFallbackTitle();
  }
  getCurrentTitle() {
    if (!this.file) {
      return "";
    }
    const titleKey = this.fileOps.getTitleKey(this.type);
    const cache = this.app.metadataCache.getFileCache(this.file);
    if ((cache == null ? void 0 : cache.frontmatter) && titleKey in cache.frontmatter) {
      const titleValue = cache.frontmatter[titleKey];
      if (typeof titleValue === "string") {
        return titleValue;
      }
      if (Array.isArray(titleValue) && titleValue.length > 0) {
        const firstValue = titleValue[0];
        if (typeof firstValue === "string") {
          return firstValue;
        }
        if (firstValue != null) {
          if (typeof firstValue === "number" || typeof firstValue === "boolean") {
            return String(firstValue);
          }
          if (typeof firstValue === "string") {
            return firstValue;
          }
        }
      }
      if (titleValue == null) {
        return "";
      }
      if (typeof titleValue === "number" || typeof titleValue === "boolean") {
        return String(titleValue);
      }
      if (typeof titleValue === "string") {
        return titleValue;
      }
      return "";
    }
    return this.getFallbackTitle();
  }
  getFallbackTitle() {
    if (!this.file) {
      return "";
    }
    let basename = this.file.basename;
    if (this.file.parent && this.type !== "note") {
      const contentType = this.fileOps.getContentType(this.type);
      const indexFileName = (contentType == null ? void 0 : contentType.indexFileName) || "";
      if (indexFileName.trim() !== "" && basename === indexFileName) {
        basename = this.file.parent.name;
      }
    }
    if (basename.startsWith("_")) {
      basename = basename.slice(1);
    }
    return basename.replace(/-/g, " ").split(" ").map((word) => word.charAt(0).toUpperCase() + word.slice(1)).join(" ");
  }
  /**
   * Extracts a suggested title from the file basename for newly created files.
   * This is used when a file is created from a link (e.g., [[sEfsleif]]).
   * Preserves the original text as much as possible.
   */
  getSuggestedTitleFromBasename() {
    if (!this.file) {
      return "";
    }
    let basename = this.file.basename;
    if (this.file.parent && this.type !== "note") {
      const contentType = this.fileOps.getContentType(this.type);
      const indexFileName = (contentType == null ? void 0 : contentType.indexFileName) || "";
      if (indexFileName.trim() !== "" && basename === indexFileName) {
        basename = this.file.parent.name;
      }
    }
    if (basename.startsWith("_")) {
      basename = basename.slice(1);
    }
    return basename;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    const isMobile = window.innerWidth <= 768 || import_obsidian4.Platform.isMobile;
    if (isMobile) {
      this.modalEl.addClass("astro-composer-mobile-modal");
    }
    if (this.isRename) {
      const typeName = this.getTypeDisplayName();
      if (this.type === "note") {
        contentEl.createEl("h2", { text: "Rename content" });
        contentEl.createEl("p", { text: "Enter a title for this content:" });
      } else {
        contentEl.createEl("h2", { text: `Rename ${typeName} content` });
        contentEl.createEl("p", { text: `Enter new title for your ${typeName} content:` });
      }
      this.titleInput = contentEl.createEl("input", {
        type: "text",
        placeholder: "New Title",
        cls: "astro-composer-title-input"
      });
      void this.getCurrentTitleAsync().then((title) => {
        this.titleInput.value = title;
      });
    } else if (this.isNewNote) {
      const typeName = this.getTypeDisplayName();
      if (this.type === "note") {
        contentEl.createEl("h2", { text: "New content" });
        contentEl.createEl("p", { text: "Enter a title for this content:" });
      } else {
        contentEl.createEl("h2", { text: `Create new ${typeName} content` });
        contentEl.createEl("p", { text: `Enter a title for your new ${typeName} content:` });
      }
      this.titleInput = contentEl.createEl("input", {
        type: "text",
        placeholder: "New Title",
        cls: "astro-composer-title-input"
      });
    } else {
      const typeName = this.getTypeDisplayName();
      if (this.type === "note") {
        contentEl.createEl("h2", { text: "New content" });
        contentEl.createEl("p", { text: "Enter a title for this content:" });
      } else {
        contentEl.createEl("h2", { text: `Create new ${typeName} content` });
        contentEl.createEl("p", { text: `Enter a title for your new ${typeName} content:` });
      }
      this.titleInput = contentEl.createEl("input", {
        type: "text",
        placeholder: "New Title",
        cls: "astro-composer-title-input"
      });
      if (this.file) {
        const suggestedTitle = this.getSuggestedTitleFromBasename();
        if (suggestedTitle) {
          this.titleInput.value = suggestedTitle;
        }
      }
    }
    this.titleInput.focus();
    if (this.isNewNote) {
      setTimeout(() => {
        this.titleInput.setSelectionRange(0, 0);
      }, 0);
    }
    const buttonContainer = contentEl.createDiv({ cls: "astro-composer-button-container" });
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel", cls: "astro-composer-cancel-button" });
    cancelButton.onclick = () => this.close();
    const submitButton = buttonContainer.createEl("button", { text: this.isRename ? "Rename" : "Create", cls: ["astro-composer-create-button", "mod-cta"] });
    submitButton.onclick = () => this.submit();
    this.titleInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") void this.submit();
    });
  }
  async submit() {
    const title = this.titleInput.value.trim();
    if (!title) {
      new import_obsidian4.Notice("Please enter a title.");
      return;
    }
    try {
      let newFile = null;
      if (this.isRename) {
        newFile = await this.fileOps.renameFile({ file: this.file, title, type: this.type });
        if (newFile) {
          await this.templateParser.updateTitleInFrontmatter(newFile, title, this.type);
        } else {
          this.close();
          return;
        }
      } else if (this.isNewNote) {
        if (this.file) {
          newFile = await this.fileOps.createFile({ file: this.file, title, type: this.type });
          const shouldInsertProperties = this.plugin.settings.autoInsertProperties;
          if (newFile && shouldInsertProperties) {
            await this.addPropertiesToFile(newFile, title, this.type);
            this.positionCursorAtEnd(newFile);
          }
        }
      } else if (this.file) {
        newFile = await this.fileOps.createFile({ file: this.file, title, type: this.type });
        const shouldInsertProperties = this.plugin.settings.autoInsertProperties;
        if (newFile && shouldInsertProperties) {
          await this.addPropertiesToFile(newFile, title, this.type);
          this.positionCursorAtEnd(newFile);
        }
      } else {
        newFile = await this.createNewFile(title);
      }
      if (!newFile) {
        new import_obsidian4.Notice(`Failed to ${this.isRename ? "rename" : "create"} ${this.type}.`);
        this.close();
        return;
      }
    } catch (error) {
      console.error("TitleModal: Error during process:", error);
      const errorMessage = error instanceof Error ? error.message : String(error);
      new import_obsidian4.Notice(`Error ${this.isRename ? "renaming" : "creating"} ${this.type}: ${errorMessage}.`);
      this.close();
      return;
    }
    this.close();
  }
  getTypeDisplayName() {
    if (this.type === "note") {
      return "Content";
    }
    const contentType = this.fileOps.getContentType(this.type);
    return contentType ? contentType.name : "Content";
  }
  async createNewFile(title) {
    var _a, _b, _c;
    let targetFolder;
    const originalDir = ((_b = (_a = this.file) == null ? void 0 : _a.parent) == null ? void 0 : _b.path) || "";
    if (this.type !== "note") {
      const contentType2 = this.fileOps.getContentType(this.type);
      if (originalDir === "" || originalDir === "/") {
        targetFolder = (contentType2 == null ? void 0 : contentType2.folder) || "";
      } else {
        targetFolder = originalDir;
      }
    } else {
      targetFolder = originalDir;
    }
    const filename = this.fileOps.generateFilename(title);
    const contentType = this.fileOps.getContentType(this.type);
    const extension = (contentType == null ? void 0 : contentType.useMdxExtension) ? ".mdx" : ".md";
    const filePath = targetFolder ? `${targetFolder}/${filename}${extension}` : `${filename}${extension}`;
    if (this.plugin && "pluginCreatedFiles" in this.plugin) {
      (_c = this.plugin.pluginCreatedFiles) == null ? void 0 : _c.add(filePath);
    }
    let initialContent = "";
    if (this.plugin.settings.autoInsertProperties) {
      initialContent = this.generateInitialContent(title);
    }
    try {
      const newFile = await this.app.vault.create(filePath, initialContent);
      const leaf = this.app.workspace.getLeaf();
      await leaf.openFile(newFile);
      const positionCursor = () => {
        var _a2;
        const view = leaf.view;
        if (view instanceof import_obsidian4.MarkdownView && view.editor) {
          const editor = view.editor;
          const content = editor.getValue();
          if (content) {
            const lines = content.split("\n");
            const lastLine = lines.length - 1;
            const lastLineLength = ((_a2 = lines[lastLine]) == null ? void 0 : _a2.length) || 0;
            editor.setCursor({ line: lastLine, ch: lastLineLength });
            editor.focus();
            return true;
          }
        }
        return false;
      };
      setTimeout(() => {
        if (!positionCursor()) {
          setTimeout(() => {
            positionCursor();
          }, 200);
        }
      }, 100);
      return newFile;
    } catch (error) {
      const errorMessage = error instanceof Error ? error.message : String(error);
      throw new Error(`Failed to create file: ${errorMessage}`);
    }
  }
  generateInitialContent(title) {
    const now = /* @__PURE__ */ new Date();
    const dateString = window.moment(now).format(this.plugin.settings.dateFormat);
    const slug = this.fileOps.toKebabCase(title);
    let template;
    if (this.type === "note") {
      const escapedTitle = this.escapeYamlString(title);
      template = `---
title: ${escapedTitle}
date: ${dateString}
---
`;
    } else {
      const contentType = this.fileOps.getContentType(this.type);
      if (!contentType) {
        const escapedTitle = this.escapeYamlString(title);
        template = `---
title: ${escapedTitle}
date: ${dateString}
---
`;
      } else {
        template = contentType.template;
      }
    }
    template = template.replace(/\{\{title\}\}/g, title);
    template = template.replace(/\{\{date\}\}/g, dateString);
    template = template.replace(/\{\{slug\}\}/g, slug);
    return template;
  }
  async addPropertiesToFile(file, title, type) {
    const now = /* @__PURE__ */ new Date();
    const dateString = window.moment(now).format(this.plugin.settings.dateFormat);
    const slug = this.fileOps.toKebabCase(title);
    let template;
    if (type === "note") {
      const escapedTitle = this.escapeYamlString(title);
      template = `---
title: ${escapedTitle}
date: ${dateString}
---
`;
    } else {
      const contentType = this.fileOps.getContentType(type);
      if (!contentType) {
        const escapedTitle = this.escapeYamlString(title);
        template = `---
title: ${escapedTitle}
date: ${dateString}
---
`;
      } else {
        template = contentType.template;
      }
    }
    template = template.replace(/\{\{title\}\}/g, title);
    template = template.replace(/\{\{date\}\}/g, dateString);
    template = template.replace(/\{\{slug\}\}/g, slug);
    await this.app.vault.modify(file, template);
  }
  positionCursorAtEnd(file) {
    const positionCursor = () => {
      var _a;
      const view = this.app.workspace.getActiveViewOfType(import_obsidian4.MarkdownView);
      if (view && view.file === file && view.editor) {
        const editor = view.editor;
        const content = editor.getValue();
        if (content) {
          const lines = content.split("\n");
          const lastLine = lines.length - 1;
          const lastLineLength = ((_a = lines[lastLine]) == null ? void 0 : _a.length) || 0;
          editor.setCursor({ line: lastLine, ch: lastLineLength });
          editor.focus();
          return true;
        }
      }
      return false;
    };
    setTimeout(() => {
      if (!positionCursor()) {
        setTimeout(() => {
          positionCursor();
        }, 200);
      }
    }, 100);
  }
  escapeYamlString(str) {
    if (str.includes('"') || str.includes("'") || str.includes("\n") || str.includes("\\")) {
      return `'${str.replace(/'/g, "''")}'`;
    } else if (str.includes(" ") || str.includes(":") || str.includes("#") || str.includes("@")) {
      return `"${str.replace(/"/g, '\\"')}"`;
    } else {
      return str;
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/commands/index.ts
function registerCommands(plugin, settings) {
  const isMobile = import_obsidian5.Platform.isMobile;
  if (isMobile) {
    let hasMatchingContentType2 = function(file, settings2) {
      const type = fileOps.determineType(file);
      if (type === "note") {
        return false;
      }
      const contentType = fileOps.getContentType(type);
      return contentType !== null && contentType.enabled;
    };
    var hasMatchingContentType = hasMatchingContentType2;
    const pluginInterface2 = plugin;
    const fileOps = new FileOperations(plugin.app, settings, pluginInterface2);
    const linkConverter = new LinkConverter(settings, pluginInterface2);
    plugin.addCommand({
      id: "standardize-properties",
      name: "Standardize properties",
      icon: "file-check",
      editorCallback: (editor, ctx) => {
        const file = ctx instanceof import_obsidian5.MarkdownView ? ctx.file : ctx.file;
        if (file instanceof import_obsidian5.TFile) {
          const currentSettings = pluginInterface2.settings || settings;
          void standardizeProperties(plugin.app, currentSettings, file, pluginInterface2, editor);
        }
      }
    });
    plugin.addCommand({
      id: "convert-wikilinks-astro",
      name: "Convert internal links for astro",
      icon: "link-2",
      editorCallback: (editor, ctx) => {
        const file = ctx instanceof import_obsidian5.MarkdownView ? ctx.file : ctx.file;
        if (file instanceof import_obsidian5.TFile) {
          linkConverter.convertWikilinksForAstro(editor, file);
        }
      }
    });
    plugin.addCommand({
      id: "rename-content",
      name: "Rename current content",
      icon: "pencil",
      editorCallback: (editor, ctx) => {
        const file = ctx instanceof import_obsidian5.MarkdownView ? ctx.file : ctx.file;
        if (file instanceof import_obsidian5.TFile) {
          if (!hasMatchingContentType2(file, settings)) {
            new import_obsidian5.Notice("Cannot rename: this file is not part of a configured content type folder.");
            return;
          }
          const type = fileOps.determineType(file);
          const cache = plugin.app.metadataCache.getFileCache(file);
          const titleKey = fileOps.getTitleKey(type);
          if (!(cache == null ? void 0 : cache.frontmatter) || !(titleKey in cache.frontmatter)) {
            new import_obsidian5.Notice(`Cannot rename: No ${titleKey} found in properties`);
            return;
          }
          new TitleModal(plugin.app, file, plugin, type, true).open();
        }
      }
    });
    return;
  }
  const pluginInterface = plugin;
  function hasMatchingContentType(file, settings2) {
    const currentSettings = (plugin == null ? void 0 : plugin.settings) || settings2;
    const tempFileOps = new FileOperations(plugin.app, currentSettings, plugin);
    const type = tempFileOps.determineType(file);
    if (type === "note") {
      return false;
    }
    const contentType = tempFileOps.getContentType(type);
    return contentType !== null && contentType.enabled;
  }
  plugin.addCommand({
    id: "standardize-properties",
    name: "Standardize properties",
    icon: "file-check",
    editorCallback: (editor, ctx) => {
      const file = ctx instanceof import_obsidian5.MarkdownView ? ctx.file : ctx.file;
      if (file instanceof import_obsidian5.TFile) {
        void standardizeProperties(plugin.app, settings, file, plugin, editor);
      }
    }
  });
  plugin.addCommand({
    id: "convert-wikilinks-astro",
    name: "Convert internal links for astro",
    icon: "link-2",
    editorCallback: (editor, ctx) => {
      const file = ctx instanceof import_obsidian5.MarkdownView ? ctx.file : ctx.file;
      if (file instanceof import_obsidian5.TFile) {
        const currentSettings = pluginInterface.settings || settings;
        const currentLinkConverter = new LinkConverter(currentSettings, pluginInterface);
        currentLinkConverter.convertWikilinksForAstro(editor, file);
      }
    }
  });
  plugin.addCommand({
    id: "rename-content",
    name: "Rename current content",
    icon: "pencil",
    editorCallback: (editor, ctx) => {
      const file = ctx instanceof import_obsidian5.MarkdownView ? ctx.file : ctx.file;
      if (file instanceof import_obsidian5.TFile) {
        const currentSettings = pluginInterface.settings || settings;
        const currentFileOps = new FileOperations(plugin.app, currentSettings, pluginInterface);
        if (!hasMatchingContentType(file, currentSettings)) {
          new import_obsidian5.Notice("Cannot rename: this file is not part of a configured content type folder.");
          return;
        }
        const type = currentFileOps.determineType(file);
        new TitleModal(plugin.app, file, pluginInterface, type, true).open();
      }
    }
  });
  if (!isMobile) {
    plugin.addCommand({
      id: "open-project-terminal",
      name: "Open project terminal",
      icon: "terminal-square",
      callback: () => {
        const currentSettings = plugin.settings;
        if (!currentSettings.enableOpenTerminalCommand) {
          new import_obsidian5.Notice("Open terminal command is disabled. Enable it in settings to use this command.");
          return;
        }
        openTerminalInProjectRoot(plugin.app, currentSettings);
      }
    });
  }
  if (!isMobile) {
    plugin.addCommand({
      id: "edit-astro-config",
      name: "Edit astro config",
      icon: "wrench",
      callback: async () => {
        const currentSettings = plugin.settings;
        if (!currentSettings.enableOpenConfigFileCommand) {
          new import_obsidian5.Notice("Edit config file command is disabled. Enable it in settings to use this command.");
          return;
        }
        await openConfigFile(plugin.app, currentSettings);
      }
    });
  }
}
async function standardizeProperties(app, settings, file, plugin, editor) {
  var _a;
  const currentSettings = (plugin == null ? void 0 : plugin.settings) || settings;
  const templateParser = new TemplateParser(app, currentSettings);
  const fileOps = new FileOperations(app, currentSettings, plugin);
  let cursorPosition = null;
  let originalContent = "";
  if (editor) {
    const cursor = editor.getCursor();
    cursorPosition = { line: cursor.line, ch: cursor.ch };
    originalContent = editor.getValue();
  }
  const type = fileOps.determineType(file);
  if (type === "note") {
    new import_obsidian5.Notice("No properties template specified for this content. This file doesn't match any configured content type folders.");
    return;
  }
  let templateString;
  if (type === "note") {
    new import_obsidian5.Notice("No properties template specified for this content. This file doesn't match any configured content type folders.");
    return;
  }
  const contentType = fileOps.getContentType(type);
  if (!contentType) {
    new import_obsidian5.Notice("Content type not found.");
    return;
  }
  templateString = contentType.template;
  await new Promise((resolve) => setTimeout(resolve, 100));
  const content = await app.vault.read(file);
  const title = file.basename.replace(/^_/, "");
  const parsed = templateParser.parseFrontmatter(content);
  const { templateProps, templateValues } = templateParser.parseTemplate(templateString, title);
  const finalProps = { ...parsed.properties };
  const arrayKeys = /* @__PURE__ */ new Set();
  const slug = fileOps.toKebabCase(title);
  for (const key of templateProps) {
    if (!(key in parsed.properties)) {
      const templateValue = templateValues[key];
      if (Array.isArray(templateValue)) {
        finalProps[key] = templateValue;
        arrayKeys.add(key);
      } else {
        finalProps[key] = [templateValue || ""];
      }
    } else {
      const templateValue = templateValues[key];
      const isArrayValue = Array.isArray(templateValue);
      if (isArrayValue) {
        const existingItems = parsed.properties[key] || [];
        const newItems = templateValue.filter((item) => !existingItems.includes(item));
        finalProps[key] = [...existingItems, ...newItems];
        arrayKeys.add(key);
      } else {
        if (key === "slug") {
          const existingSlug = parsed.properties[key][0] || "";
          if (!existingSlug || existingSlug.trim() === "") {
            finalProps[key] = [slug];
          }
        }
      }
    }
  }
  if ("slug" in parsed.properties && templateString.includes("{{slug}}")) {
    const existingSlug = parsed.properties["slug"][0] || "";
    if (!existingSlug || existingSlug.trim() === "") {
      finalProps["slug"] = [slug];
    }
  }
  for (const key in parsed.properties) {
    if (parsed.properties[key].length > 1) {
      arrayKeys.add(key);
    }
  }
  const newContent = templateParser.buildFrontmatterContent(finalProps, arrayKeys) + parsed.bodyContent;
  await app.vault.modify(file, newContent);
  if (editor && cursorPosition) {
    await new Promise((resolve) => setTimeout(resolve, 50));
    const activeView = app.workspace.getActiveViewOfType(import_obsidian5.MarkdownView);
    if (activeView && activeView.file === file && activeView.editor) {
      const activeEditor = activeView.editor;
      const newLineCount = newContent.split("\n").length;
      const originalLineCount = originalContent.split("\n").length;
      let newLine = cursorPosition.line;
      let newCh = cursorPosition.ch;
      if (newLineCount !== originalLineCount) {
        if (newLine >= newLineCount) {
          newLine = Math.max(0, newLineCount - 1);
        }
      }
      const newLineLength = ((_a = newContent.split("\n")[newLine]) == null ? void 0 : _a.length) || 0;
      if (newCh > newLineLength) {
        newCh = Math.max(0, newLineLength);
      }
      activeEditor.setCursor({ line: newLine, ch: newCh });
    }
  }
  new import_obsidian5.Notice("Properties standardized using template.");
}
function renameContentByPath(app, filePath, settings, plugin) {
  const file = app.vault.getAbstractFileByPath(filePath);
  if (!(file instanceof import_obsidian5.TFile)) {
    new import_obsidian5.Notice(`File not found: ${filePath}`);
    return;
  }
  const fileOps = new FileOperations(app, settings, plugin);
  function hasMatchingContentType(file2, settings2) {
    const type2 = fileOps.determineType(file2);
    if (type2 === "note") {
      return false;
    }
    const contentType = fileOps.getContentType(type2);
    return contentType !== null && contentType.enabled;
  }
  if (!hasMatchingContentType(file, settings)) {
    new import_obsidian5.Notice("Cannot rename: this file is not part of a configured content type folder.");
    return;
  }
  const type = fileOps.determineType(file);
  new TitleModal(app, file, plugin, type, true).open();
}
function registerContentTypeCommands(plugin, settings) {
  const pluginInterface = plugin;
  const contentTypes = settings.contentTypes || [];
  for (const contentType of contentTypes) {
    if (!contentType.enabled) {
      continue;
    }
    const commandId = `create-content-type-${contentType.id}`;
    const commandName = `Create new content type: ${contentType.name}`;
    plugin.addCommand({
      id: commandId,
      name: commandName,
      callback: async () => {
        var _a;
        const currentSettings = pluginInterface.settings || settings;
        let targetFolder = contentType.folder || "";
        if (targetFolder && targetFolder.trim() !== "") {
          const folder = plugin.app.vault.getAbstractFileByPath(targetFolder);
          if (!(folder instanceof import_obsidian5.TFolder)) {
            try {
              await plugin.app.vault.createFolder(targetFolder);
            } catch (error) {
              const errorMessage = error instanceof Error ? error.message : String(error);
              new import_obsidian5.Notice(`Failed to create folder: ${errorMessage}`);
              return;
            }
          }
        }
        const tempFileName = "Untitled.md";
        const filePath = targetFolder ? `${targetFolder}/${tempFileName}` : tempFileName;
        const existingFile = plugin.app.vault.getAbstractFileByPath(filePath);
        if (existingFile instanceof import_obsidian5.TFile) {
          new TitleModal(plugin.app, existingFile, pluginInterface, contentType.id, false, true).open();
          return;
        }
        if (pluginInterface && "pluginCreatedFiles" in pluginInterface) {
          const pluginWithFiles = pluginInterface;
          if (!pluginWithFiles.pluginCreatedFiles) {
            pluginWithFiles.pluginCreatedFiles = /* @__PURE__ */ new Set();
          }
          pluginWithFiles.pluginCreatedFiles.add(filePath);
        }
        try {
          const tempFile = await plugin.app.vault.create(filePath, "");
          new TitleModal(plugin.app, tempFile, pluginInterface, contentType.id, false, true).open();
        } catch (error) {
          const errorMessage = error instanceof Error ? error.message : String(error);
          new import_obsidian5.Notice(`Failed to create file: ${errorMessage}`);
          if (pluginInterface && "pluginCreatedFiles" in pluginInterface) {
            const pluginWithFiles = pluginInterface;
            (_a = pluginWithFiles.pluginCreatedFiles) == null ? void 0 : _a.delete(filePath);
          }
        }
      }
    });
  }
}
var terminalLogger = {
  enabled: false,
  setEnabled(value) {
    this.enabled = value;
  },
  log(...args) {
    if (this.enabled) {
      console.debug("[astro-composer:terminal]", ...args);
    }
  }
};
function getDefaultTerminalApp() {
  if (!import_obsidian5.Platform.isDesktopApp) {
    return "";
  }
  if (import_obsidian5.Platform.isMacOS) {
    return "Terminal";
  }
  if (import_obsidian5.Platform.isWin) {
    return "cmd.exe";
  }
  if (import_obsidian5.Platform.isLinux) {
    return "gnome-terminal";
  }
  return "";
}
function sanitizeTerminalApp(value) {
  return value.trim();
}
function escapeDoubleQuotes(value) {
  return value.replace(/"/g, '\\"');
}
function openTerminalInProjectRoot(app, settings) {
  terminalLogger.setEnabled(settings.enableTerminalDebugLogging);
  try {
    const { exec } = require("child_process");
    const path = require("path");
    const fs = require("fs");
    const adapter = app.vault.adapter;
    const vaultPath = adapter.basePath || adapter.path;
    const vaultPathString = typeof vaultPath === "string" ? vaultPath : String(vaultPath);
    let projectPath;
    if (settings.terminalProjectRootPath && settings.terminalProjectRootPath.trim()) {
      projectPath = path.resolve(vaultPathString, settings.terminalProjectRootPath);
    } else {
      projectPath = vaultPathString;
    }
    if (!fs.existsSync(projectPath)) {
      new import_obsidian5.Notice(`Project root directory not found at: ${projectPath}`);
      return;
    }
    const configuredApp = sanitizeTerminalApp(settings.terminalApplicationName || "");
    const terminalApp = configuredApp || getDefaultTerminalApp();
    if (!configuredApp && !terminalApp) {
      new import_obsidian5.Notice("Terminal application name is empty. Please configure it in settings.");
      return;
    }
    const platform = process.platform;
    terminalLogger.log("Opening terminal", { platform, terminalApp, projectPath });
    if (platform === "win32") {
      const escapedPath = projectPath.replace(/"/g, '"');
      const lowerApp = terminalApp.toLowerCase();
      if (lowerApp === "wt.exe" || lowerApp === "wt" || lowerApp === "windows terminal") {
        exec("where wt", (error) => {
          if (!error) {
            const command = `start "" wt.exe -d "${escapedPath}"`;
            terminalLogger.log("Windows launch (wt)", { command, projectPath });
            exec(command, (execError) => {
              if (execError) {
                terminalLogger.log("Windows Terminal failed, falling back to cmd", { error: execError.message });
                const fallbackCommand = `start "" cmd.exe /K "cd /d "${escapedPath}""`;
                exec(fallbackCommand, (cmdError) => {
                  if (cmdError) {
                    new import_obsidian5.Notice(`Error opening terminal: ${cmdError.message || "Unknown error"}`);
                  }
                });
              }
            });
          } else {
            terminalLogger.log("Windows Terminal not found, using cmd", {});
            const fallbackCommand = `start "" cmd.exe /K "cd /d "${escapedPath}""`;
            exec(fallbackCommand, (cmdError) => {
              if (cmdError) {
                new import_obsidian5.Notice(`Error opening terminal: ${cmdError.message || "Unknown error"}`);
              }
            });
          }
        });
      } else if (lowerApp === "powershell" || lowerApp === "powershell.exe") {
        const escapedPathForPS = projectPath.replace(/'/g, "''");
        const command = `start "" powershell -NoExit -Command "Set-Location '${escapedPathForPS}';"`;
        terminalLogger.log("Windows launch (powershell)", { command, projectPath });
        exec(command, (error) => {
          if (error) {
            new import_obsidian5.Notice(`Error opening terminal: ${error.message || "Unknown error"}`);
          }
        });
      } else if (lowerApp === "cmd.exe" || lowerApp === "cmd") {
        const command = `start "" cmd.exe /K "cd /d "${escapedPath}""`;
        terminalLogger.log("Windows launch (cmd)", { command, projectPath });
        exec(command, (error) => {
          if (error) {
            new import_obsidian5.Notice(`Error opening terminal: ${error.message || "Unknown error"}`);
          }
        });
      } else {
        const command = `start "" "${terminalApp}"`;
        terminalLogger.log("Windows launch (generic)", { command, terminalApp, projectPath });
        exec(command, (error) => {
          if (error) {
            terminalLogger.log("Generic terminal failed, falling back to cmd", { error: error.message });
            const fallbackCommand = `start "" cmd.exe /K "cd /d "${escapedPath}""`;
            exec(fallbackCommand, (cmdError) => {
              if (cmdError) {
                new import_obsidian5.Notice(`Error opening terminal: ${cmdError.message || "Unknown error"}`);
              }
            });
          }
        });
      }
    } else if (platform === "darwin") {
      const escapedApp = escapeDoubleQuotes(terminalApp);
      const escapedPath = escapeDoubleQuotes(projectPath);
      const command = `open -na "${escapedApp}" "${escapedPath}"`;
      terminalLogger.log("macOS launch", { command, terminalApp, projectPath });
      exec(command, (error) => {
        if (error) {
          new import_obsidian5.Notice(`Error opening terminal: ${error.message || "Unknown error"}`);
        }
      });
    } else {
      const terminals = terminalApp ? [terminalApp] : ["gnome-terminal", "konsole", "xterm"];
      const projectPathEscaped = projectPath.replace(/"/g, '\\"');
      const tryTerminal = (index) => {
        if (index >= terminals.length) {
          new import_obsidian5.Notice("No supported terminal found. Please install a terminal application or configure one in settings.");
          return;
        }
        const currentTerminal = terminals[index];
        const terminalName = currentTerminal.split(" ")[0];
        exec(`which ${terminalName}`, (error) => {
          if (!error) {
            let command;
            if (currentTerminal.includes("gnome-terminal")) {
              command = `gnome-terminal --working-directory="${projectPathEscaped}"`;
            } else if (currentTerminal.includes("konsole")) {
              command = `konsole --workdir "${projectPathEscaped}"`;
            } else {
              command = `${currentTerminal} -e "cd \\"${projectPathEscaped}\\" && bash"`;
            }
            terminalLogger.log("Linux launch", { command, terminal: currentTerminal, projectPath });
            exec(command, (execError) => {
              if (execError && index < terminals.length - 1) {
                terminalLogger.log("Terminal launch failed, trying next", { terminal: currentTerminal, error: execError.message });
                tryTerminal(index + 1);
              } else if (execError) {
                new import_obsidian5.Notice(`Error opening terminal: ${execError.message || "Unknown error"}`);
              }
            });
          } else {
            terminalLogger.log("Terminal not found, trying next", { terminal: currentTerminal });
            tryTerminal(index + 1);
          }
        });
      };
      tryTerminal(0);
    }
  } catch (error) {
    terminalLogger.log("Unexpected error", { error });
    new import_obsidian5.Notice(`Error opening terminal: ${error instanceof Error ? error.message : String(error)}`);
  }
}
async function openConfigFile(app, settings) {
  try {
    const fs = require("fs");
    const path = require("path");
    const { shell } = require("electron");
    const adapter = app.vault.adapter;
    const vaultPath = adapter.basePath || adapter.path;
    const vaultPathString = typeof vaultPath === "string" ? vaultPath : String(vaultPath);
    if (!settings.configFilePath || !settings.configFilePath.trim()) {
      new import_obsidian5.Notice("Please specify a config file path in settings.");
      return;
    }
    const configPath = path.resolve(vaultPathString, settings.configFilePath);
    if (!fs.existsSync(configPath)) {
      new import_obsidian5.Notice(`Config file not found at: ${configPath}`);
      return;
    }
    await shell.openPath(configPath);
  } catch (error) {
    new import_obsidian5.Notice(`Error opening config file: ${error instanceof Error ? error.message : String(error)}`);
  }
}

// src/ui/settings-tab.ts
var import_obsidian10 = require("obsidian");

// src/ui/components/CommandPickerModal.ts
var import_obsidian6 = require("obsidian");
var CommandPickerModal = class extends import_obsidian6.FuzzySuggestModal {
  constructor(app, onSelect) {
    super(app);
    this.onSelect = onSelect;
  }
  getItems() {
    const commandRegistry = this.app.commands;
    const commandMap = /* @__PURE__ */ new Map();
    if (commandRegistry && typeof commandRegistry.listCommands === "function") {
      try {
        const commands = commandRegistry.listCommands();
        for (const command of commands) {
          if (command && command.id && command.name && !commandMap.has(command.id)) {
            commandMap.set(command.id, {
              id: command.id,
              name: command.name
            });
          }
        }
      } catch (e) {
        console.warn("[Astro Composer] Error getting commands via listCommands():", e);
      }
    }
    try {
      const registry = commandRegistry == null ? void 0 : commandRegistry.commands;
      if (registry && typeof registry === "object") {
        const allCommands = Object.values(registry);
        for (const command of allCommands) {
          if (command && command.id && command.name && !commandMap.has(command.id)) {
            commandMap.set(command.id, {
              id: command.id,
              name: command.name
            });
          }
        }
      }
    } catch (e) {
      console.warn("[Astro Composer] Error getting commands via registry:", e);
    }
    try {
      const internalRegistry = commandRegistry == null ? void 0 : commandRegistry.commandRegistry;
      if (internalRegistry && typeof internalRegistry === "object") {
        const allCommands = Object.values(internalRegistry);
        for (const command of allCommands) {
          if (command && command.id && command.name && !commandMap.has(command.id)) {
            commandMap.set(command.id, {
              id: command.id,
              name: command.name
            });
          }
        }
      }
    } catch (e) {
      console.warn("[Astro Composer] Error getting commands via internal registry:", e);
    }
    const commandOptions = Array.from(commandMap.values());
    commandOptions.sort((a, b) => a.name.localeCompare(b.name));
    return commandOptions;
  }
  getItemText(item) {
    return item.name;
  }
  onChooseItem(item, evt) {
    this.onSelect(item.id);
  }
  // Override to show command name only
  renderSuggestion(match, el) {
    const item = match.item;
    el.createDiv({ cls: "suggestion-title", text: item.name });
  }
};

// src/ui/components/IconPickerModal.ts
var import_obsidian7 = require("obsidian");
var getIconList = () => {
  if (import_obsidian7.requireApiVersion && (0, import_obsidian7.requireApiVersion)("1.7.3") && import_obsidian7.getIconIds) {
    try {
      return (0, import_obsidian7.getIconIds)();
    } catch (e) {
      console.warn("[Astro Composer] Error getting icon IDs from Obsidian:", e);
    }
  }
  return [
    "settings-2",
    "settings",
    "help-circle",
    "info",
    "star",
    "heart",
    "bookmark",
    "home",
    "search",
    "bell",
    "mail",
    "user",
    "users",
    "folder",
    "file",
    "file-text",
    "image",
    "video",
    "music",
    "calendar",
    "clock",
    "edit",
    "pencil",
    "trash",
    "copy",
    "cut",
    "paste",
    "download",
    "upload",
    "save",
    "share",
    "link",
    "external-link",
    "lock",
    "unlock",
    "eye",
    "eye-off",
    "key",
    "shield",
    "check",
    "x",
    "plus",
    "minus",
    "arrow-left",
    "arrow-right",
    "arrow-up",
    "arrow-down",
    "chevron-left",
    "chevron-right",
    "chevron-up",
    "chevron-down",
    "menu",
    "more-horizontal",
    "more-vertical",
    "grid",
    "list",
    "layout",
    "columns",
    "rows",
    "maximize",
    "minimize",
    "zoom-in",
    "zoom-out",
    "refresh-cw",
    "play",
    "pause",
    "stop",
    "sun",
    "moon",
    "cloud",
    "zap",
    "wand-2",
    "wand",
    "wand-sparkles",
    "palette",
    "brush",
    "sliders",
    "power",
    "wifi",
    "bluetooth",
    "monitor",
    "laptop",
    "smartphone",
    "camera",
    "mic",
    "headphones",
    "code",
    "terminal",
    "terminal-square",
    "github",
    "gitlab",
    "git-branch",
    "git-commit",
    "database",
    "server",
    "cloud-download",
    "cloud-upload",
    "tag",
    "tags",
    "flag",
    "pin",
    "map-pin",
    "compass",
    "globe",
    "rocket",
    "car",
    "bike",
    "robot",
    "apple",
    "windows",
    "linux",
    "chrome",
    "firefox",
    "safari",
    "credit-card",
    "wallet",
    "coins",
    "book",
    "book-open",
    "award",
    "trophy",
    "badge",
    "wrench",
    "tool",
    "package",
    "box",
    "archive",
    "send",
    "reply",
    "forward",
    "mail-open",
    "tag-plus",
    "tag-minus",
    "flag-off",
    "pin-off",
    "map-pin-off",
    "navigation",
    "map",
    "earth",
    "plane",
    "ship",
    "anchor",
    "helicopter",
    "drone",
    "android",
    "keyhole",
    "keys",
    "fingerprint",
    "scan",
    "qr-code",
    "barcode",
    "receipt",
    "piggy-bank",
    "banknote"
  ];
};
var LUCIDE_ICONS = getIconList().map((id) => ({
  id,
  name: id.replace(/^lucide-/, "").replace(/-/g, " ").replace(/(^\w{1})|(\s+\w{1})/g, (letter) => letter.toUpperCase())
})).sort((a, b) => a.name.localeCompare(b.name));
var IconPickerModal = class extends import_obsidian7.FuzzySuggestModal {
  constructor(app, onSelect) {
    super(app);
    this.onSelect = onSelect;
  }
  getItems() {
    return LUCIDE_ICONS;
  }
  getItemText(item) {
    return item.name;
  }
  onChooseItem(item, evt) {
    this.onSelect(item.id);
  }
  // Override to show icon preview
  renderSuggestion(match, el) {
    const item = match.item;
    el.addClass("mod-complex");
    const content = el.createDiv({ cls: "suggestion-content" });
    content.createDiv({ cls: "suggestion-title", text: item.name });
    const aux = el.createDiv({ cls: "suggestion-aux" });
    (0, import_obsidian7.setIcon)(aux.createSpan({ cls: "suggestion-flair" }), item.id);
  }
};

// src/ui/components/ConfirmModal.ts
var import_obsidian8 = require("obsidian");
var ConfirmModal = class extends import_obsidian8.Modal {
  constructor(app, message, confirmText = "Confirm", cancelText = "Cancel") {
    super(app);
    this.message = message;
    this.confirmText = confirmText;
    this.cancelText = cancelText;
    this.result = false;
    this.resolvePromise = null;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("astro-composer-confirm-modal");
    contentEl.createEl("p", { text: this.message });
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const cancelButton = buttonContainer.createEl("button", {
      text: this.cancelText
    });
    cancelButton.onclick = () => {
      this.result = false;
      this.close();
    };
    const confirmButton = buttonContainer.createEl("button", {
      text: this.confirmText,
      cls: "mod-cta mod-warning"
    });
    confirmButton.onclick = () => {
      this.result = true;
      this.close();
    };
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    if (this.resolvePromise) {
      this.resolvePromise(this.result);
    }
  }
  async waitForResult() {
    return new Promise((resolve) => {
      this.resolvePromise = resolve;
      this.open();
    });
  }
};

// src/utils/settings-compat.ts
var import_obsidian9 = require("obsidian");
var ObsidianModule = __toESM(require("obsidian"), 1);
function createSettingsGroup(containerEl, heading, manifestId) {
  if ((0, import_obsidian9.requireApiVersion)("1.11.0")) {
    const SettingGroupClass = ObsidianModule.SettingGroup;
    if (SettingGroupClass) {
      const group = heading ? new SettingGroupClass(containerEl).setHeading(heading) : new SettingGroupClass(containerEl);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  if (manifestId) {
    containerEl.addClass(`${manifestId}-settings-compat`);
  }
  {
    if (heading) {
      const headingEl = containerEl.createDiv("setting-group-heading");
      headingEl.createEl("h3", { text: heading });
    }
    return {
      addSetting(cb) {
        const setting = new import_obsidian9.Setting(containerEl);
        cb(setting);
      }
    };
  }
}

// src/ui/settings-tab.ts
var AstroComposerSettingTab = class extends import_obsidian10.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.autoRenameContainer = null;
    this.postsFolderContainer = null;
    this.onlyAutomateContainer = null;
    this.creationModeContainer = null;
    this.indexFileContainer = null;
    this.excludedDirsContainer = null;
    this.underscorePrefixContainer = null;
    this.autoInsertContainer = null;
    this.pagesFieldsContainer = null;
    this.pagesIndexFileContainer = null;
    this.pagesOnlyAutomateContainer = null;
    this.terminalCommandContainer = null;
    this.configCommandContainer = null;
    this.customContentTypesContainer = null;
    this.terminalRibbonToggle = null;
    this.configRibbonToggle = null;
    this.terminalRibbonToggleComponent = null;
    this.configRibbonToggleComponent = null;
    this.plugin = plugin;
  }
  /**
   * Refresh just the content types section
   * More efficient than refreshing the entire settings tab
   */
  refreshContentTypes() {
    if (this.customContentTypesContainer) {
      this.renderCustomContentTypes();
    }
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    const settings = this.plugin.settings;
    this.renderSettingsTab(containerEl, settings);
  }
  renderSettingsTab(containerEl, settings) {
    var _a;
    const generalGroup = createSettingsGroup(containerEl, void 0, "astro-composer");
    generalGroup.addSetting((setting) => {
      setting.setName("Date format").setDesc("Format for the date in properties (e.g., yyyy-mm-dd, MMMM D, yyyy, yyyy-mm-dd HH:mm)").addText(
        (text) => text.setPlaceholder("YYYY-MM-DD").setValue(settings.dateFormat).onChange(async (value) => {
          settings.dateFormat = value || "YYYY-MM-DD";
          await this.plugin.saveSettings();
        })
      );
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Enable copy heading links").setDesc("Add right-click context menu option to copy heading links in various formats.").addToggle(
        (toggle) => toggle.setValue(settings.enableCopyHeadingLink).onChange(async (value) => {
          settings.enableCopyHeadingLink = value;
          await this.plugin.saveSettings();
          this.updateCopyHeadingFields();
        })
      );
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Default heading link format").setDesc("Choose the default format for copied heading links. Obsidian format respects your Obsidian settings for wikilink vs markdown preference. Astro link uses your link base path from above and converts the heading into kebab-case format as an anchor link").addDropdown(
        (dropdown) => dropdown.addOption("obsidian", "Obsidian link").addOption("astro", "Astro link").setValue(settings.copyHeadingLinkFormat).onChange(async (value) => {
          settings.copyHeadingLinkFormat = value;
          await this.plugin.saveSettings();
        })
      );
      setting.settingEl.classList.toggle("astro-composer-setting-container-visible", settings.enableCopyHeadingLink);
      setting.settingEl.classList.toggle("astro-composer-setting-container-hidden", !settings.enableCopyHeadingLink);
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Add trailing slash to links").setDesc("Add trailing slashes to all converted internal links (e.g., /about/ instead of /about).").addToggle(
        (toggle) => toggle.setValue(settings.addTrailingSlashToLinks).onChange(async (value) => {
          settings.addTrailingSlashToLinks = value;
          await this.plugin.saveSettings();
        })
      );
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Show MDX files in file explorer").setDesc("Make .mdx files visible in Obsidian's file explorer. Requires reload to take effect.").addToggle(
        (toggle) => toggle.setValue(settings.showMdxFilesInExplorer).onChange(async (value) => {
          settings.showMdxFilesInExplorer = value;
          await this.plugin.saveSettings();
        })
      );
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Auto-insert properties").setDesc("Automatically insert the properties template when creating new files for any content type.").addToggle(
        (toggle) => toggle.setValue(settings.autoInsertProperties).onChange(async (value) => {
          settings.autoInsertProperties = value;
          await this.plugin.saveSettings();
        })
      );
    });
    const contentTypesGroup = createSettingsGroup(containerEl, "Content types", "astro-composer");
    contentTypesGroup.addSetting((setting) => {
      setting.settingEl.addClass("astro-composer-setting-hidden-elements");
      setting.settingEl.addClass("astro-composer-setting-container-full-width");
      this.customContentTypesContainer = setting.settingEl.createDiv({
        cls: "custom-content-types-container astro-composer-custom-types-container-visible"
      });
    });
    if (this.customContentTypesContainer) {
      this.renderCustomContentTypes();
    }
    if (!import_obsidian10.Platform.isMobile) {
      const developerGroup = createSettingsGroup(containerEl, "Developer commands", "astro-composer");
      developerGroup.addSetting((setting) => {
        setting.setName("Enable open terminal command").setDesc("Enable command to open terminal in project root directory.").addToggle(
          (toggle) => toggle.setValue(settings.enableOpenTerminalCommand).onChange(async (value) => {
            settings.enableOpenTerminalCommand = value;
            await this.plugin.saveSettings();
            this.updateTerminalCommandFields();
            if (this.plugin.registerRibbonIcons) {
              this.plugin.registerRibbonIcons();
            }
          })
        );
      });
      this.terminalCommandContainer = containerEl.createDiv({ cls: "terminal-command-fields" });
      this.terminalCommandContainer.classList.toggle("astro-composer-setting-container-visible", settings.enableOpenTerminalCommand);
      this.terminalCommandContainer.classList.toggle("astro-composer-setting-container-hidden", !settings.enableOpenTerminalCommand);
      developerGroup.addSetting((setting) => {
        const descFragment = document.createDocumentFragment();
        descFragment.createEl("div", { text: "Path relative to the Obsidian vault root folder. Use ../.. for two levels up. Leave blank to use the vault folder" });
        descFragment.createEl("div", { text: "This is where the terminal will open. Absolute paths work also." });
        setting.setName("Project root directory path").setDesc(descFragment).addText(
          (text) => text.setPlaceholder("../..").setValue(settings.terminalProjectRootPath).onChange(async (value) => {
            settings.terminalProjectRootPath = value;
            await this.plugin.saveSettings();
          })
        );
        setting.settingEl.classList.toggle("astro-composer-setting-container-visible", settings.enableOpenTerminalCommand);
        setting.settingEl.classList.toggle("astro-composer-setting-container-hidden", !settings.enableOpenTerminalCommand);
      });
      developerGroup.addSetting((setting) => {
        const descFragment = document.createDocumentFragment();
        descFragment.createEl("div", { text: "Leave blank to use platform defaults. On macOS, the default is Terminal. On Windows, it's Windows Terminal or cmd.exe. On Linux, it's gnome-terminal, konsole, or xterm" });
        descFragment.createEl("div", { text: "Examples include Terminal, iTerm, PowerShell, and Alacritty" });
        setting.setName("Terminal application name").setDesc(descFragment).addText(
          (text) => text.setPlaceholder("Terminal").setValue(settings.terminalApplicationName).onChange(async (value) => {
            settings.terminalApplicationName = value;
            await this.plugin.saveSettings();
          })
        );
        setting.settingEl.classList.toggle("astro-composer-setting-container-visible", settings.enableOpenTerminalCommand);
        setting.settingEl.classList.toggle("astro-composer-setting-container-hidden", !settings.enableOpenTerminalCommand);
      });
      developerGroup.addSetting((setting) => {
        setting.setName("Enable debug logging").setDesc("Log terminal launch commands and platform decisions to the developer console for troubleshooting.").addToggle(
          (toggle) => toggle.setValue(settings.enableTerminalDebugLogging).onChange(async (value) => {
            settings.enableTerminalDebugLogging = value;
            await this.plugin.saveSettings();
          })
        );
        setting.settingEl.classList.toggle("astro-composer-setting-container-visible", settings.enableOpenTerminalCommand);
        setting.settingEl.classList.toggle("astro-composer-setting-container-hidden", !settings.enableOpenTerminalCommand);
      });
      developerGroup.addSetting((setting) => {
        setting.setName("Show open terminal ribbon icon").setDesc("Add a ribbon icon to launch the terminal command.").addToggle((toggle) => {
          this.terminalRibbonToggleComponent = toggle;
          toggle.setValue(settings.enableTerminalRibbonIcon).setDisabled(!settings.enableOpenTerminalCommand).onChange(async (value) => {
            this.plugin.settings.enableTerminalRibbonIcon = value;
            settings.enableTerminalRibbonIcon = value;
            await this.plugin.saveSettings();
            setTimeout(() => {
              if (this.plugin.registerRibbonIcons) {
                this.plugin.registerRibbonIcons();
              }
            }, 50);
          });
        });
        setting.settingEl.classList.toggle("astro-composer-setting-container-visible", settings.enableOpenTerminalCommand);
        setting.settingEl.classList.toggle("astro-composer-setting-container-hidden", !settings.enableOpenTerminalCommand);
        this.terminalRibbonToggle = setting;
      });
      developerGroup.addSetting((setting) => {
        setting.setName("Enable edit config file command").setDesc("Enable command to open astro config file in default editor.").addToggle(
          (toggle) => toggle.setValue(settings.enableOpenConfigFileCommand).onChange(async (value) => {
            settings.enableOpenConfigFileCommand = value;
            await this.plugin.saveSettings();
            this.updateConfigCommandFields();
            if (this.plugin.registerRibbonIcons) {
              this.plugin.registerRibbonIcons();
            }
          })
        );
      });
      this.configCommandContainer = containerEl.createDiv({ cls: "config-command-fields" });
      this.configCommandContainer.classList.toggle("astro-composer-setting-container-visible", settings.enableOpenConfigFileCommand);
      this.configCommandContainer.classList.toggle("astro-composer-setting-container-hidden", !settings.enableOpenConfigFileCommand);
      developerGroup.addSetting((setting) => {
        const descFragment = document.createDocumentFragment();
        descFragment.createEl("div", { text: "Path to the config file relative to the vault root. Use ../config.ts or ../../astro.config.mjs." });
        descFragment.createEl("div", { text: "Absolute paths work also." });
        setting.setName("Config file path").setDesc(descFragment).addText(
          (text) => text.setPlaceholder("../config.ts").setValue(settings.configFilePath).onChange(async (value) => {
            settings.configFilePath = value;
            await this.plugin.saveSettings();
          })
        );
        setting.settingEl.classList.toggle("astro-composer-setting-container-visible", settings.enableOpenConfigFileCommand);
        setting.settingEl.classList.toggle("astro-composer-setting-container-hidden", !settings.enableOpenConfigFileCommand);
      });
      developerGroup.addSetting((setting) => {
        setting.setName("Show open config ribbon icon").setDesc("Add a ribbon icon to launch the config file command.").addToggle((toggle) => {
          this.configRibbonToggleComponent = toggle;
          toggle.setValue(settings.enableConfigRibbonIcon).setDisabled(!settings.enableOpenConfigFileCommand).onChange(async (value) => {
            this.plugin.settings.enableConfigRibbonIcon = value;
            settings.enableConfigRibbonIcon = value;
            await this.plugin.saveSettings();
            setTimeout(() => {
              if (this.plugin.registerRibbonIcons) {
                this.plugin.registerRibbonIcons();
              }
            }, 50);
          });
        });
        setting.settingEl.classList.toggle("astro-composer-setting-container-visible", settings.enableOpenConfigFileCommand);
        setting.settingEl.classList.toggle("astro-composer-setting-container-hidden", !settings.enableOpenConfigFileCommand);
        this.configRibbonToggle = setting;
      });
      developerGroup.addSetting((setting) => {
        setting.setName("Swap out help button for custom action").setDesc("Replace the help button in the vault profile area with a custom action.").addToggle((toggle) => {
          var _a2, _b;
          return toggle.setValue((_b = (_a2 = settings.helpButtonReplacement) == null ? void 0 : _a2.enabled) != null ? _b : false).onChange(async (value) => {
            if (!settings.helpButtonReplacement) {
              settings.helpButtonReplacement = {
                enabled: false,
                commandId: "edit-astro-config",
                iconId: "wrench"
              };
            }
            settings.helpButtonReplacement.enabled = value;
            await this.plugin.saveSettings();
            if (this.plugin.updateHelpButton) {
              await this.plugin.updateHelpButton();
            }
            this.display();
          });
        });
      });
      if ((_a = settings.helpButtonReplacement) == null ? void 0 : _a.enabled) {
        const commandName = this.getCommandName(settings.helpButtonReplacement.commandId);
        developerGroup.addSetting((setting) => {
          setting.setName("Command").setDesc("Select the command to execute when the button is clicked.").addButton((button) => button.setButtonText(commandName || "Select command").onClick(() => {
            const modal = new CommandPickerModal(this.app, (commandId) => {
              void (async () => {
                if (!settings.helpButtonReplacement) {
                  settings.helpButtonReplacement = {
                    enabled: true,
                    commandId: "edit-astro-config",
                    iconId: "wrench"
                  };
                }
                settings.helpButtonReplacement.commandId = commandId;
                await this.plugin.saveSettings();
                if (this.plugin.updateHelpButton) {
                  await this.plugin.updateHelpButton();
                }
                this.display();
              })();
            });
            modal.open();
          }));
        });
        const iconName = this.getIconName(settings.helpButtonReplacement.iconId);
        developerGroup.addSetting((setting) => {
          setting.setName("Icon").setDesc("Select the icon to display on the button.").addButton((button) => button.setButtonText(iconName || "Select icon...").onClick(() => {
            const modal = new IconPickerModal(this.app, (iconId) => {
              void (async () => {
                if (!settings.helpButtonReplacement) {
                  settings.helpButtonReplacement = {
                    enabled: true,
                    commandId: "edit-astro-config",
                    iconId: "wrench"
                  };
                }
                settings.helpButtonReplacement.iconId = iconId;
                await this.plugin.saveSettings();
                if (this.plugin.updateHelpButton) {
                  await this.plugin.updateHelpButton();
                }
                this.display();
              })();
            });
            modal.open();
          }));
        });
      }
    }
    this.updateCopyHeadingFields();
    if (!import_obsidian10.Platform.isMobile) {
      this.updateTerminalCommandFields();
      this.updateConfigCommandFields();
    }
  }
  updateCopyHeadingFields() {
    const settings = this.plugin.settings;
    const isVisible = settings.enableCopyHeadingLink;
    const containerEl = this.containerEl;
    const allSettings = containerEl.querySelectorAll(".setting-item");
    allSettings.forEach((settingEl) => {
      var _a;
      const nameEl = settingEl.querySelector(".setting-item-name");
      if (nameEl && ((_a = nameEl.textContent) == null ? void 0 : _a.trim()) === "Default heading link format") {
        settingEl.classList.toggle("astro-composer-setting-container-visible", isVisible);
        settingEl.classList.toggle("astro-composer-setting-container-hidden", !isVisible);
      }
    });
  }
  updateTerminalCommandFields() {
    const settings = this.plugin.settings;
    const isVisible = settings.enableOpenTerminalCommand;
    if (this.terminalCommandContainer) {
      this.terminalCommandContainer.classList.toggle("astro-composer-setting-container-visible", isVisible);
      this.terminalCommandContainer.classList.toggle("astro-composer-setting-container-hidden", !isVisible);
    }
    const containerEl = this.containerEl;
    const allSettings = containerEl.querySelectorAll(".setting-item");
    allSettings.forEach((settingEl) => {
      var _a;
      const nameEl = settingEl.querySelector(".setting-item-name");
      if (nameEl) {
        const name = (_a = nameEl.textContent) == null ? void 0 : _a.trim();
        if (name === "Project root directory path" || name === "Show open terminal ribbon icon") {
          settingEl.classList.toggle("astro-composer-setting-container-visible", isVisible);
          settingEl.classList.toggle("astro-composer-setting-container-hidden", !isVisible);
        }
      }
    });
    if (this.terminalRibbonToggleComponent) {
      this.terminalRibbonToggleComponent.setDisabled(!this.plugin.settings.enableOpenTerminalCommand);
    }
  }
  updateConfigCommandFields() {
    const settings = this.plugin.settings;
    const isVisible = settings.enableOpenConfigFileCommand;
    if (this.configCommandContainer) {
      this.configCommandContainer.classList.toggle("astro-composer-setting-container-visible", isVisible);
      this.configCommandContainer.classList.toggle("astro-composer-setting-container-hidden", !isVisible);
    }
    const containerEl = this.containerEl;
    const allSettings = containerEl.querySelectorAll(".setting-item");
    allSettings.forEach((settingEl) => {
      var _a;
      const nameEl = settingEl.querySelector(".setting-item-name");
      if (nameEl) {
        const name = (_a = nameEl.textContent) == null ? void 0 : _a.trim();
        if (name === "Config file path" || name === "Show open config ribbon icon") {
          settingEl.classList.toggle("astro-composer-setting-container-visible", isVisible);
          settingEl.classList.toggle("astro-composer-setting-container-hidden", !isVisible);
        }
      }
    });
    if (this.configRibbonToggleComponent) {
      this.configRibbonToggleComponent.setDisabled(!this.plugin.settings.enableOpenConfigFileCommand);
    }
  }
  checkForFolderConflicts() {
    const settings = this.plugin.settings;
    const blankFolders = [];
    const folderConflicts = {};
    const contentTypes = settings.contentTypes || [];
    for (const contentType of contentTypes) {
      if (contentType.enabled) {
        if (!contentType.folder || contentType.folder.trim() === "") {
          blankFolders.push(contentType.name || "Content");
        } else {
          if (!folderConflicts[contentType.folder]) {
            folderConflicts[contentType.folder] = [];
          }
          folderConflicts[contentType.folder].push(contentType.name || "Content");
        }
      }
    }
  }
  addCustomContentType() {
    const settings = this.plugin.settings;
    const contentTypes = settings.contentTypes || [];
    const newType = {
      id: `content-${Date.now()}`,
      name: `Content ${contentTypes.length + 1}`,
      folder: "",
      linkBasePath: "",
      template: '---\ntitle: "{{title}}"\ndate: {{date}}\n---\n',
      enabled: true,
      creationMode: "file",
      indexFileName: "",
      ignoreSubfolders: false,
      enableUnderscorePrefix: false,
      useMdxExtension: false
    };
    contentTypes.push(newType);
    settings.contentTypes = contentTypes;
    void this.plugin.saveSettings();
    this.renderCustomContentTypes();
    this.plugin.registerCreateEvent();
    registerContentTypeCommands(this.plugin, settings);
  }
  renderCustomContentTypes() {
    if (!this.customContentTypesContainer) return;
    this.customContentTypesContainer.empty();
    const settings = this.plugin.settings;
    const contentTypes = settings.contentTypes || [];
    contentTypes.forEach((customType, index) => {
      var _a, _b;
      if (!this.customContentTypesContainer) return;
      const typeContainer = this.customContentTypesContainer.createDiv({
        cls: "custom-content-type-item",
        attr: { "data-type-id": customType.id }
      });
      const header = typeContainer.createDiv({ cls: "custom-content-type-header" });
      header.classList.add("astro-composer-custom-type-header");
      const collapseButton = header.createEl("button", {
        cls: "astro-composer-collapse-button",
        attr: { "aria-label": "Collapse/expand" }
      });
      const isCollapsed = (_a = customType.collapsed) != null ? _a : false;
      (0, import_obsidian10.setIcon)(collapseButton, "chevron-down");
      if (isCollapsed) {
        collapseButton.classList.add("is-collapsed");
      }
      collapseButton.addEventListener("click", () => {
        void this.toggleContentTypeCollapse(customType.id);
        const updatedType = this.plugin.settings.contentTypes.find((ct) => ct.id === customType.id);
        if (updatedType) {
          if (updatedType.collapsed) {
            collapseButton.classList.add("is-collapsed");
          } else {
            collapseButton.classList.remove("is-collapsed");
          }
        }
      });
      const headerName = header.createDiv({ cls: "astro-composer-header-name" });
      headerName.createEl("div", { text: customType.name || `Content ${index + 1}`, cls: "setting-item-name" });
      const reorderContainer = header.createDiv({ cls: "astro-composer-reorder-buttons" });
      const upButton = reorderContainer.createEl("button", {
        cls: "astro-composer-reorder-button",
        attr: { "aria-label": "Move up" }
      });
      (0, import_obsidian10.setIcon)(upButton, "chevron-up");
      upButton.disabled = index === 0;
      upButton.addEventListener("click", () => {
        void this.moveContentTypeUp(customType.id);
      });
      const downButton = reorderContainer.createEl("button", {
        cls: "astro-composer-reorder-button",
        attr: { "aria-label": "Move down" }
      });
      (0, import_obsidian10.setIcon)(downButton, "chevron-down");
      downButton.disabled = index === contentTypes.length - 1;
      downButton.addEventListener("click", () => {
        void this.moveContentTypeDown(customType.id);
      });
      const toggleContainer = header.createDiv({ cls: "checkbox-container" });
      if (customType.enabled) {
        toggleContainer.classList.add("is-enabled");
      }
      const toggle = toggleContainer.createEl("input", { type: "checkbox", cls: "checkbox-input" });
      toggle.checked = customType.enabled;
      toggleContainer.addEventListener("click", (e) => {
        void (async () => {
          e.preventDefault();
          const newValue = !customType.enabled;
          customType.enabled = newValue;
          toggle.checked = newValue;
          await this.plugin.saveSettings();
          this.plugin.registerCreateEvent();
          if (newValue) {
            toggleContainer.classList.add("is-enabled");
          } else {
            toggleContainer.classList.remove("is-enabled");
          }
          this.updateCustomContentTypeVisibility(customType.id, newValue);
          registerContentTypeCommands(this.plugin, this.plugin.settings);
        })();
      });
      toggle.addEventListener("change", (e) => {
        void (async () => {
          const value = e.target.checked;
          customType.enabled = value;
          await this.plugin.saveSettings();
          this.plugin.registerCreateEvent();
          if (value) {
            toggleContainer.classList.add("is-enabled");
          } else {
            toggleContainer.classList.remove("is-enabled");
          }
          this.updateCustomContentTypeVisibility(customType.id, value);
          registerContentTypeCommands(this.plugin, this.plugin.settings);
        })();
      });
      const settingsContainer = typeContainer.createDiv({
        cls: "custom-content-type-settings",
        attr: { "data-type-id": customType.id }
      });
      const initiallyCollapsed = (_b = customType.collapsed) != null ? _b : false;
      const initiallyVisible = customType.enabled && !initiallyCollapsed;
      if (initiallyVisible) {
        settingsContainer.classList.add("astro-composer-setting-container-visible");
      } else {
        settingsContainer.classList.add("astro-composer-setting-container-hidden");
      }
      const nameContainer = settingsContainer.createDiv();
      new import_obsidian10.Setting(nameContainer).setName("Content type name").setDesc("Display name for this content type (e.g., 'projects', 'notes', 'tutorials')").addText((text) => {
        text.setPlaceholder("Enter content type name").setValue(customType.name).onChange(async (value) => {
          customType.name = value;
          await this.plugin.saveSettings();
          registerContentTypeCommands(this.plugin, this.plugin.settings);
        });
      });
      const folderContainer = settingsContainer.createDiv();
      const folderSetting = new import_obsidian10.Setting(folderContainer).setName("Folder location").setDesc("Folder path where this content type will be created. Leave blank to use the vault folder. Supports wildcards like directory/* or directory/*/* to match specific folder depths.").addText((text) => {
        text.setPlaceholder("Enter folder path (e.g., 'docs', 'docs/*', 'docs/*/*') or leave blank for vault root").setValue(customType.folder).onChange(async (value) => {
          customType.folder = value;
          await this.plugin.saveSettings();
          this.plugin.registerCreateEvent();
          this.updateCustomContentTypeIgnoreSubfoldersField(customType.id);
          const allContentTypes = this.plugin.settings.contentTypes || [];
          for (const ct of allContentTypes) {
            this.updateFolderConflictWarning(ct.id, null);
          }
        });
      });
      folderContainer.createDiv({ cls: "astro-composer-conflict-warning hidden", attr: { "data-type-id": customType.id } });
      this.updateFolderConflictWarning(customType.id, folderSetting);
      const ignoreSubfoldersContainer = settingsContainer.createDiv({ cls: "custom-ignore-subfolders-field" });
      ignoreSubfoldersContainer.setAttribute("data-type-id", customType.id);
      ignoreSubfoldersContainer.classList.toggle("astro-composer-setting-container-visible", !!customType.folder);
      ignoreSubfoldersContainer.classList.toggle("astro-composer-setting-container-hidden", !customType.folder);
      new import_obsidian10.Setting(ignoreSubfoldersContainer).setName("Ignore subfolders").setDesc("When enabled, automation will only trigger for new .md files within this content type's folder and one level down (for folder-based content). Files in deeper subfolders will be ignored.").addToggle(
        (toggle2) => toggle2.setValue(customType.ignoreSubfolders || false).onChange(async (value) => {
          customType.ignoreSubfolders = value;
          await this.plugin.saveSettings();
        })
      );
      const underscorePrefixContainer = settingsContainer.createDiv();
      new import_obsidian10.Setting(underscorePrefixContainer).setName("Use underscore prefix for drafts").setDesc("Add an underscore prefix (_content-title) to new notes by default when enabled. This hides them from astro, which can be helpful for drafts").addToggle(
        (toggle2) => toggle2.setValue(customType.enableUnderscorePrefix || false).onChange(async (value) => {
          customType.enableUnderscorePrefix = value;
          await this.plugin.saveSettings();
        })
      );
      const linkContainer = settingsContainer.createDiv();
      new import_obsidian10.Setting(linkContainer).setName("Link base path").setDesc("Base path for converted links (e.g., '/projects/', '/notes/tutorials/', leave blank for root /).").addText((text) => {
        text.setPlaceholder("Enter link base path").setValue(customType.linkBasePath || "").onChange(async (value) => {
          customType.linkBasePath = value;
          await this.plugin.saveSettings();
        });
      });
      const creationModeContainer = settingsContainer.createDiv();
      new import_obsidian10.Setting(creationModeContainer).setName("Creation mode").setDesc("How to create new entries: file-based or folder-based with an index file.").addDropdown(
        (dropdown) => dropdown.addOption("file", "File-based (content-title.md)").addOption("folder", "Folder-based (content-title/index.md)").setValue(customType.creationMode).onChange(async (value) => {
          customType.creationMode = value;
          await this.plugin.saveSettings();
          this.updateCustomContentTypeIndexFileField(customType.id);
        })
      );
      const useMdxContainer = settingsContainer.createDiv();
      new import_obsidian10.Setting(useMdxContainer).setName("Use MDX instead of MD").setDesc("Create files with .mdx extension instead of .md extension.").addToggle(
        (toggle2) => toggle2.setValue(customType.useMdxExtension || false).onChange(async (value) => {
          customType.useMdxExtension = value;
          await this.plugin.saveSettings();
        })
      );
      const indexFileContainer = settingsContainer.createDiv({ cls: "custom-index-file-field" });
      indexFileContainer.classList.toggle("astro-composer-setting-container-visible", customType.creationMode === "folder");
      indexFileContainer.classList.toggle("astro-composer-setting-container-hidden", customType.creationMode !== "folder");
      new import_obsidian10.Setting(indexFileContainer).setName("Index file name").setDesc("Name for index files in folder-based content (without .md extension). Defaults to 'index' if left blank.").addText(
        (text) => text.setPlaceholder("Index").setValue(customType.indexFileName).onChange(async (value) => {
          customType.indexFileName = value;
          await this.plugin.saveSettings();
        })
      );
      const templateContainer = settingsContainer.createDiv();
      new import_obsidian10.Setting(templateContainer).setName("Properties template").addTextArea((text) => {
        text.setPlaceholder('---\ntitle: "{{title}}"\ndate: {{date}}\n---\n').setValue(customType.template).onChange(async (value) => {
          customType.template = value;
          await this.plugin.saveSettings();
        });
        text.inputEl.classList.add("astro-composer-template-textarea");
        return text;
      }).then((setting) => {
        setting.descEl.empty();
        const descDiv = setting.descEl.createEl("div");
        descDiv.createEl("div", { text: "Template for new files of this content type." });
        descDiv.createEl("div", { text: "Variables include {{title}}, {{date}}, and {{slug}}." });
        descDiv.createEl("div", { text: "Do not wrap {{date}} in quotes as it represents a datetime value, not a string." });
      });
      const removeContainer = settingsContainer.createDiv();
      const removeSetting = new import_obsidian10.Setting(removeContainer).setName("").addButton((button) => {
        button.setButtonText("Remove").setWarning().onClick(async () => {
          const contentType = this.plugin.settings.contentTypes.find((ct) => ct.id === customType.id);
          const typeName = (contentType == null ? void 0 : contentType.name) || "content type";
          const modal = new ConfirmModal(
            this.app,
            `Are you sure you want to remove "${typeName}"? This action cannot be undone.`,
            "Remove",
            "Cancel"
          );
          const confirmed = await modal.waitForResult();
          if (confirmed) {
            await this.removeCustomContentType(customType.id);
          }
        });
      });
      removeSetting.settingEl.classList.add("astro-composer-remove-setting");
      this.updateCustomContentTypeVisibility(customType.id, customType.enabled);
    });
    contentTypes.forEach((customType) => {
      this.updateFolderConflictWarning(customType.id, null);
    });
    const addButtonContainer = this.customContentTypesContainer.createDiv({ cls: "astro-composer-add-button-container" });
    const addButton = addButtonContainer.createEl("button", {
      cls: "mod-cta",
      text: "Add content type"
    });
    addButton.addEventListener("click", () => {
      this.addCustomContentType();
    });
  }
  updateCustomContentTypeVisibility(typeId, enabled) {
    var _a, _b;
    const settingsContainer = (_a = this.customContentTypesContainer) == null ? void 0 : _a.querySelector(`[data-type-id="${typeId}"].custom-content-type-settings`);
    if (settingsContainer) {
      const contentTypes = this.plugin.settings.contentTypes || [];
      const contentType = contentTypes.find((ct) => ct.id === typeId);
      const isCollapsed = (_b = contentType == null ? void 0 : contentType.collapsed) != null ? _b : false;
      const shouldBeVisible = enabled && !isCollapsed;
      settingsContainer.classList.toggle("astro-composer-setting-container-visible", shouldBeVisible);
      settingsContainer.classList.toggle("astro-composer-setting-container-hidden", !shouldBeVisible);
    }
  }
  updateCustomContentTypeIndexFileField(typeId) {
    var _a;
    const contentTypes = this.plugin.settings.contentTypes || [];
    const customType = contentTypes.find((type) => type.id === typeId);
    if (!customType) return;
    const indexFileContainer = (_a = this.customContentTypesContainer) == null ? void 0 : _a.querySelector(`[data-type-id="${typeId}"] .custom-index-file-field`);
    if (indexFileContainer) {
      indexFileContainer.classList.toggle("astro-composer-setting-container-visible", customType.creationMode === "folder");
      indexFileContainer.classList.toggle("astro-composer-setting-container-hidden", customType.creationMode !== "folder");
    }
  }
  updateCustomContentTypeIgnoreSubfoldersField(typeId) {
    var _a;
    const contentTypes = this.plugin.settings.contentTypes || [];
    const customType = contentTypes.find((type) => type.id === typeId);
    if (!customType) return;
    const ignoreSubfoldersContainer = (_a = this.customContentTypesContainer) == null ? void 0 : _a.querySelector(`[data-type-id="${typeId}"].custom-ignore-subfolders-field`);
    if (ignoreSubfoldersContainer) {
      ignoreSubfoldersContainer.classList.toggle("astro-composer-setting-container-visible", !!customType.folder && customType.folder.trim() !== "");
      ignoreSubfoldersContainer.classList.toggle("astro-composer-setting-container-hidden", !customType.folder || customType.folder.trim() === "");
    }
  }
  updateFolderConflictWarning(typeId, setting) {
    var _a;
    const contentTypes = this.plugin.settings.contentTypes || [];
    const currentType = contentTypes.find((type) => type.id === typeId);
    if (!currentType) return;
    const conflictWarningEl = (_a = this.customContentTypesContainer) == null ? void 0 : _a.querySelector(`[data-type-id="${typeId}"].astro-composer-conflict-warning`);
    if (!conflictWarningEl) return;
    const currentFolder = (currentType.folder || "").trim();
    const conflictingTypes = [];
    for (const otherType of contentTypes) {
      if (otherType.id === typeId || !otherType.enabled) continue;
      const otherFolder = (otherType.folder || "").trim();
      if (currentFolder === "" && otherFolder === "") {
        conflictingTypes.push(otherType.name || "Unnamed");
      } else if (currentFolder === otherFolder && currentFolder !== "") {
        conflictingTypes.push(otherType.name || "Unnamed");
      }
    }
    if (conflictingTypes.length > 0) {
      conflictWarningEl.removeClass("hidden");
      conflictWarningEl.textContent = `Conflict: ${conflictingTypes.join(", ")} also use${conflictingTypes.length === 1 ? "s" : ""} this folder. More specific patterns will take priority.`;
    } else {
      conflictWarningEl.addClass("hidden");
    }
  }
  async moveContentTypeUp(typeId) {
    const settings = this.plugin.settings;
    const contentTypes = settings.contentTypes || [];
    const currentIndex = contentTypes.findIndex((ct) => ct.id === typeId);
    if (currentIndex <= 0) return;
    [contentTypes[currentIndex], contentTypes[currentIndex - 1]] = [contentTypes[currentIndex - 1], contentTypes[currentIndex]];
    settings.contentTypes = contentTypes;
    await this.plugin.saveSettings();
    this.renderCustomContentTypes();
  }
  async moveContentTypeDown(typeId) {
    const settings = this.plugin.settings;
    const contentTypes = settings.contentTypes || [];
    const currentIndex = contentTypes.findIndex((ct) => ct.id === typeId);
    if (currentIndex < 0 || currentIndex >= contentTypes.length - 1) return;
    [contentTypes[currentIndex], contentTypes[currentIndex + 1]] = [contentTypes[currentIndex + 1], contentTypes[currentIndex]];
    settings.contentTypes = contentTypes;
    await this.plugin.saveSettings();
    this.renderCustomContentTypes();
  }
  async toggleContentTypeCollapse(typeId) {
    const settings = this.plugin.settings;
    const contentTypes = settings.contentTypes || [];
    const contentType = contentTypes.find((ct) => ct.id === typeId);
    if (!contentType) return;
    contentType.collapsed = !contentType.collapsed;
    await this.plugin.saveSettings();
    this.updateCustomContentTypeVisibility(typeId, contentType.enabled);
  }
  async removeCustomContentType(typeId) {
    const settings = this.plugin.settings;
    const contentTypes = settings.contentTypes || [];
    settings.contentTypes = contentTypes.filter((ct) => ct.id !== typeId);
    await this.plugin.saveSettings();
    this.renderCustomContentTypes();
    this.plugin.registerCreateEvent();
    registerContentTypeCommands(this.plugin, settings);
  }
  getCommandName(commandId) {
    if (!commandId) return "";
    try {
      const commandRegistry = this.app.commands;
      if (commandRegistry && typeof commandRegistry.listCommands === "function") {
        try {
          const allCommands = commandRegistry.listCommands();
          const command = allCommands.find((cmd) => cmd.id === commandId);
          if (command == null ? void 0 : command.name) {
            return command.name;
          }
        } catch (e) {
          console.warn("[Astro Composer] Error getting command name via listCommands():", e);
        }
      }
      try {
        const registry = commandRegistry == null ? void 0 : commandRegistry.commands;
        if (registry && typeof registry === "object") {
          const command = registry[commandId];
          if (command == null ? void 0 : command.name) {
            return command.name;
          }
        }
      } catch (e) {
        console.warn("[Astro Composer] Error getting command name via registry:", e);
      }
    } catch (e) {
      console.warn("[Astro Composer] Error getting command name:", e);
    }
    return "";
  }
  getIconName(iconId) {
    if (!iconId) return "";
    return iconId.replace(/^lucide-/, "").split("-").map((word) => word.charAt(0).toUpperCase() + word.slice(1)).join(" ");
  }
};

// src/ui/components/MigrationModal.ts
var import_obsidian11 = require("obsidian");
var MigrationModal = class extends import_obsidian11.Modal {
  constructor(app, conflicts) {
    super(app);
    this.result = null;
    this.resolvePromise = null;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("astro-composer-migration-modal");
    contentEl.createEl("h2", { text: "Migration conflict detected" });
    contentEl.createEl("p", {
      text: "You have existing content types with names that conflict with posts or pages. How would you like to proceed?"
    });
    const conflictList = contentEl.createEl("ul");
    conflictList.createEl("li", { text: "Skip migration: keep your existing posts/pages settings (they will be ignored)" });
    conflictList.createEl("li", { text: "Migrate with renamed types: create 'posts (migrated)' and 'pages (migrated)' content types" });
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const skipButton = buttonContainer.createEl("button", {
      text: "Skip migration",
      cls: "mod-cta"
    });
    skipButton.onclick = () => {
      this.result = { action: "skip" };
      this.close();
    };
    const migrateButton = buttonContainer.createEl("button", {
      text: "Migrate with renamed types",
      cls: "mod-cta"
    });
    migrateButton.onclick = () => {
      this.result = { action: "migrate" };
      this.close();
    };
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    if (this.resolvePromise && this.result) {
      this.resolvePromise(this.result);
    }
  }
  async waitForResult() {
    return new Promise((resolve) => {
      this.resolvePromise = resolve;
      this.open();
    });
  }
};

// src/utils/heading-link-generator.ts
var HeadingLinkGenerator = class {
  constructor(settings) {
    this.settings = settings;
  }
  /**
   * Converts text to kebab-case slug for URLs
   */
  toKebabCase(str) {
    return str.toLowerCase().replace(/[^a-z0-9\s-]/g, "").trim().replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "");
  }
  /**
   * Gets the Astro-compatible URL from an internal link (copied from LinkConverter)
   */
  getAstroUrlFromInternalLink(link) {
    const hashIndex = link.indexOf("#");
    let path = hashIndex >= 0 ? link.slice(0, hashIndex) : link;
    const anchor = hashIndex >= 0 ? link.slice(hashIndex) : "";
    path = path.replace(/\.md$/, "");
    let basePath = "";
    let contentFolder = "";
    let creationMode = "file";
    let indexFileName = "";
    const contentTypes = this.settings.contentTypes || [];
    const sortedTypes = sortByPatternSpecificity(contentTypes);
    for (const contentType of sortedTypes) {
      if (!contentType.enabled) continue;
      let matches = false;
      if (!contentType.folder || contentType.folder.trim() === "") {
        if (!path.includes("/") || path.split("/").length === 1) {
          matches = true;
        }
      } else if (matchesFolderPattern(path, contentType.folder)) {
        matches = true;
      }
      if (matches) {
        contentFolder = contentType.folder || "";
        basePath = contentType.linkBasePath || "";
        creationMode = contentType.creationMode;
        indexFileName = contentType.indexFileName || "";
        break;
      }
    }
    if (contentFolder) {
      path = path.slice(contentFolder.length + 1);
    }
    let addTrailingSlash = false;
    if (indexFileName && indexFileName.trim() !== "") {
      const parts = path.split("/");
      if (parts[parts.length - 1] === indexFileName) {
        parts.pop();
        path = parts.join("/");
        addTrailingSlash = true;
      }
    } else if (creationMode === "folder") {
      const defaultIndexName = "index";
      const parts = path.split("/");
      if (parts[parts.length - 1] === defaultIndexName) {
        parts.pop();
        path = parts.join("/");
        addTrailingSlash = true;
      }
    }
    const slugParts = path.split("/").map((part) => this.toKebabCase(part));
    const slug = slugParts.join("/");
    if (basePath) {
      if (!basePath.startsWith("/")) basePath = "/" + basePath;
      if (!basePath.endsWith("/")) basePath += "/";
    }
    const shouldAddTrailingSlash = (this.settings.addTrailingSlashToLinks || addTrailingSlash) && !anchor;
    return `${basePath}${slug}${shouldAddTrailingSlash ? "/" : ""}${anchor}`;
  }
  /**
   * Generates a standard Obsidian link to a heading, respecting user's link format preference
   */
  generateObsidianLink(app, file, heading) {
    const headingText = heading.heading;
    const testLink = app.fileManager.generateMarkdownLink(file, "", "");
    if (testLink.startsWith("[[")) {
      const fileName = file.basename;
      return `[[${fileName}#${headingText}|${headingText}]]`;
    } else {
      const baseLink = app.fileManager.generateMarkdownLink(file, "", "");
      if (baseLink.startsWith("[[")) {
        const fileName = file.basename;
        return `[[${fileName}#${headingText}|${headingText}]]`;
      } else {
        const match = baseLink.match(/\[([^\]]+)\]\(([^)]+)\)/);
        if (match) {
          const [, , path] = match;
          return `[${headingText}](${path}#${encodeURIComponent(headingText)})`;
        } else {
          const encodedFilename = encodeURIComponent(file.name);
          return `[${headingText}](${encodedFilename}#${encodeURIComponent(headingText)})`;
        }
      }
    }
  }
  /**
   * Generates a standard Obsidian wikilink to a heading
   */
  generateObsidianWikilink(file, heading) {
    const headingText = heading.heading;
    const fileName = file.basename;
    return `[[${fileName}#${headingText}|${headingText}]]`;
  }
  /**
   * Generates an Astro-compatible markdown link to a heading
   */
  generateAstroLink(file, heading) {
    const headingText = heading.heading;
    const anchor = this.toKebabCase(headingText);
    const internalLink = `${file.path}#${anchor}`;
    const astroUrl = this.getAstroUrlFromInternalLink(internalLink);
    return `[${headingText}](${astroUrl})`;
  }
  /**
   * Generates an Astro-compatible wikilink to a heading
   */
  generateAstroWikilink(file, heading) {
    const headingText = heading.heading;
    const anchor = this.toKebabCase(headingText);
    const internalLink = `${file.path}#${anchor}`;
    const astroUrl = this.getAstroUrlFromInternalLink(internalLink);
    return `[[${headingText}|${astroUrl}]]`;
  }
  /**
   * Extracts the URL from a markdown link or wikilink
   */
  extractUrl(link) {
    const markdownMatch = link.match(/\[([^\]]+)\]\(([^)]+)\)/);
    if (markdownMatch) {
      return markdownMatch[2];
    }
    const wikilinkMatch = link.match(/\[\[([^\]]+)\]\]/);
    if (wikilinkMatch) {
      const content = wikilinkMatch[1];
      const pathPart = content.split("|")[0];
      return pathPart;
    }
    return link;
  }
  /**
   * Generates the appropriate link format based on settings
   */
  generateLink(app, file, heading) {
    if (this.settings.copyHeadingLinkFormat === "astro") {
      return this.generateAstroLink(file, heading);
    } else {
      return this.generateObsidianLink(app, file, heading);
    }
  }
  /**
   * Finds the heading at a specific line in a file
   */
  findHeadingAtLine(app, file, line) {
    const cache = app.metadataCache.getFileCache(file);
    if (!cache || !cache.headings) {
      return null;
    }
    for (let i = cache.headings.length - 1; i >= 0; i--) {
      const heading = cache.headings[i];
      if (heading.position.start.line <= line) {
        return heading;
      }
    }
    return null;
  }
};

// src/main.ts
var AstroComposerPlugin = class extends import_obsidian12.Plugin {
  constructor() {
    super(...arguments);
    this.pluginCreatedFiles = /* @__PURE__ */ new Set();
    this.terminalRibbonIcon = null;
    this.configRibbonIcon = null;
  }
  /**
   * Migrate old posts/pages settings to unified content types
   */
  async migrateSettingsIfNeeded() {
    if (this.settings.migrationCompleted) {
      return;
    }
    const hasPostsSettings = this.settings.automatePostCreation !== void 0 && this.settings.automatePostCreation;
    const hasPagesSettings = this.settings.enablePages !== void 0 && this.settings.enablePages;
    if (!hasPostsSettings && !hasPagesSettings) {
      this.settings.migrationCompleted = true;
      await this.saveSettings();
      return;
    }
    const legacyContentTypes = this.settings.customContentTypes;
    const existingContentTypes = this.settings.contentTypes || legacyContentTypes || [];
    const conflicts = [];
    if (existingContentTypes.some((ct) => ct.name === "Posts")) {
      conflicts.push("Posts");
    }
    if (existingContentTypes.some((ct) => ct.name === "Pages")) {
      conflicts.push("Pages");
    }
    let shouldMigrate = true;
    if (conflicts.length > 0) {
      await new Promise((resolve) => {
        setTimeout(() => {
          void (async () => {
            try {
              const modal = new MigrationModal(this.app, conflicts);
              const timeoutPromise = new Promise((timeoutResolve) => {
                setTimeout(() => {
                  timeoutResolve({ action: "skip" });
                }, 3e4);
              });
              const result = await Promise.race([
                modal.waitForResult(),
                timeoutPromise
              ]);
              if (result.action === "skip") {
                shouldMigrate = false;
                new import_obsidian12.Notice("Migration skipped. Old posts/pages settings will be ignored.");
              }
            } catch (error) {
              console.warn("Migration modal error:", error);
              shouldMigrate = false;
              new import_obsidian12.Notice("Migration skipped due to error. You can migrate manually in settings.");
            }
            resolve();
          })();
        }, 500);
      });
    }
    if (!shouldMigrate) {
      this.settings.migrationCompleted = true;
      await this.saveSettings();
      return;
    }
    const migratedTypes = [];
    if (hasPostsSettings && !conflicts.includes("Posts")) {
      const postsType = {
        id: `posts-${Date.now()}`,
        name: "Posts",
        folder: this.settings.postsFolder || "",
        linkBasePath: this.settings.postsLinkBasePath || "",
        template: this.settings.defaultTemplate || '---\ntitle: "{{title}}"\ndate: {{date}}\ntags: []\n---\n',
        enabled: this.settings.automatePostCreation || false,
        creationMode: this.settings.creationMode || "file",
        indexFileName: this.settings.indexFileName || "",
        ignoreSubfolders: this.settings.onlyAutomateInPostsFolder || false,
        enableUnderscorePrefix: this.settings.enableUnderscorePrefix || false,
        useMdxExtension: false
      };
      migratedTypes.push(postsType);
    }
    if (hasPagesSettings && !conflicts.includes("Pages")) {
      const pagesType = {
        id: `pages-${Date.now()}`,
        name: "Pages",
        folder: this.settings.pagesFolder || "",
        linkBasePath: this.settings.pagesLinkBasePath || "",
        template: this.settings.pageTemplate || '---\ntitle: "{{title}}"\ndescription: ""\n---\n',
        enabled: this.settings.enablePages || false,
        creationMode: this.settings.pagesCreationMode || "file",
        indexFileName: this.settings.pagesIndexFileName || "",
        ignoreSubfolders: this.settings.onlyAutomateInPagesFolder || false,
        enableUnderscorePrefix: false,
        // Pages didn't have this option before
        useMdxExtension: false
      };
      migratedTypes.push(pagesType);
    }
    const existingFromNew = this.settings.contentTypes && Array.isArray(this.settings.contentTypes) ? this.settings.contentTypes : [];
    const legacySettings = this.settings;
    const existingFromLegacy = legacySettings.customContentTypes && Array.isArray(legacySettings.customContentTypes) ? legacySettings.customContentTypes : [];
    let existingTypes = [];
    if (existingFromNew.length > 0) {
      existingTypes = existingFromNew;
    } else if (existingFromLegacy.length > 0) {
      existingTypes = existingFromLegacy;
    }
    let finalTypes = [...existingTypes];
    if (migratedTypes.length > 0) {
      const existingNames = new Set(existingTypes.map((ct) => ct.name));
      const newMigratedTypes = migratedTypes.filter((mt) => !existingNames.has(mt.name));
      if (newMigratedTypes.length > 0) {
        finalTypes = [...existingTypes, ...newMigratedTypes];
      }
    }
    this.settings.contentTypes = finalTypes;
    const legacyFields = [
      "customContentTypes",
      // Old name for contentTypes - must be removed
      "enableUnderscorePrefix",
      "postsFolder",
      "postsLinkBasePath",
      "automatePostCreation",
      "creationMode",
      "indexFileName",
      "excludedDirectories",
      "onlyAutomateInPostsFolder",
      "enablePages",
      "pagesFolder",
      "pagesLinkBasePath",
      "pagesCreationMode",
      "pagesIndexFileName",
      "pageTemplate",
      "onlyAutomateInPagesFolder"
    ];
    const settingsRecord = this.settings;
    for (const field of legacyFields) {
      if (settingsRecord[field] !== void 0) {
        delete settingsRecord[field];
      }
    }
    this.settings.migrationCompleted = true;
    await this.saveSettings();
    await this.loadSettings();
    if (migratedTypes.length > 0) {
      new import_obsidian12.Notice(`Migration completed: ${migratedTypes.length} content type(s) migrated.`);
      setTimeout(() => {
        if (this.settingsTab) {
          try {
            if (this.settingsTab.customContentTypesContainer || this.settingsTab.containerEl) {
              this.settingsTab.display();
            }
          } catch (e) {
            console.warn("Could not refresh settings tab after migration:", e);
          }
        }
      }, 300);
    }
  }
  async onload() {
    await this.loadSettings();
    this.fileOps = new FileOperations(this.app, this.settings, this);
    this.templateParser = new TemplateParser(this.app, this.settings);
    this.headingLinkGenerator = new HeadingLinkGenerator(this.settings);
    if (this.settings.showMdxFilesInExplorer) {
      this.registerExtensions(["mdx"], "markdown");
    }
    this.app.workspace.onLayoutReady(() => {
      this.registerCreateEvent();
      if (!import_obsidian12.Platform.isMobile) {
        void this.updateHelpButton();
      }
      void this.migrateSettingsIfNeeded();
    });
    registerCommands(this, this.settings);
    registerContentTypeCommands(this, this.settings);
    this.settingsTab = new AstroComposerSettingTab(this.app, this);
    this.addSettingTab(this.settingsTab);
    this.registerContextMenu();
    this.registerRibbonIcons();
    this.setupRibbonContextMenuHandling();
  }
  registerCreateEvent() {
    if (this.createEventRef) {
      this.app.vault.offref(this.createEventRef);
      this.createEventRef = void 0;
    }
    const lastProcessedFiles = /* @__PURE__ */ new Map();
    this.createEvent = (file) => {
      void (async () => {
        const now = Date.now();
        if (file instanceof import_obsidian12.TFile && (file.extension === "md" || file.extension === "mdx")) {
          const filePath = file.path;
          if (this.pluginCreatedFiles.has(filePath)) {
            return;
          }
          const lastProcessed = lastProcessedFiles.get(filePath) || 0;
          if (lastProcessed > 0 && now - lastProcessed < CONSTANTS.DEBOUNCE_MS) {
            return;
          }
          if (lastProcessed > 0 && now - lastProcessed > 2e3) {
            lastProcessedFiles.delete(filePath);
          }
          await this.loadSettings();
          const contentTypes = this.settings.contentTypes || [];
          const hasEnabledContentTypes = contentTypes.some((ct) => ct.enabled);
          if (!hasEnabledContentTypes) {
            return;
          }
          const sortedContentTypes = sortByPatternSpecificity(contentTypes);
          let matchedContentTypeId = null;
          const matchingTypes = [];
          for (const contentType of sortedContentTypes) {
            if (!contentType.enabled) continue;
            let matches = false;
            if (!contentType.folder || contentType.folder.trim() === "") {
              if (!filePath.includes("/") || filePath.split("/").length === 1) {
                matches = true;
              }
            } else if (matchesFolderPattern(filePath, contentType.folder)) {
              if (contentType.ignoreSubfolders) {
                const pathSegments = filePath.split("/");
                const pathDepth = pathSegments.length;
                const patternSegments = contentType.folder.split("/");
                const expectedDepth = patternSegments.length;
                if (contentType.creationMode === "folder") {
                  const folderDepth = pathDepth - 1;
                  if (folderDepth === expectedDepth || folderDepth === expectedDepth + 1) {
                    matches = true;
                  }
                } else {
                  if (pathDepth === expectedDepth) {
                    matches = true;
                  }
                }
              } else {
                matches = true;
              }
            }
            if (matches) {
              matchingTypes.push(contentType);
              if (!matchedContentTypeId) {
                matchedContentTypeId = contentType.id;
              }
            }
          }
          if (matchingTypes.length > 1) {
            const typeNames = matchingTypes.map((ct) => ct.name || "Unnamed").join(", ");
            new import_obsidian12.Notice(`Multiple content types (${typeNames}) match this file. Using most specific: ${matchingTypes[0].name || "Unnamed"}`);
          }
          if (!matchedContentTypeId) {
            return;
          }
          const stat = await this.app.vault.adapter.stat(file.path);
          const isNewNote = (stat == null ? void 0 : stat.mtime) && now - stat.mtime < CONSTANTS.STAT_MTIME_THRESHOLD;
          if (!isNewNote) {
            return;
          }
          await new Promise((resolve) => setTimeout(resolve, 50));
          let content;
          try {
            content = await this.app.vault.read(file);
          } catch (error) {
            console.error("Error reading file for create detection:", error);
            return;
          }
          if (content.trim().length > 0) {
            if (content.startsWith("---")) {
              const frontmatterEnd = content.indexOf("\n---", 3);
              if (frontmatterEnd !== -1) {
                const frontmatterText = content.slice(4, frontmatterEnd).trim();
                const lines = frontmatterText.split("\n").filter((line) => line.trim().length > 0);
                if (lines.length > 1 || lines.length === 1 && !lines[0].startsWith("title:")) {
                  return;
                }
              }
            }
            const contentWithoutFrontmatter = content.startsWith("---") ? content.slice(content.indexOf("\n---", 3) + 4).trim() : content.trim();
            if (contentWithoutFrontmatter.length > 0) {
              return;
            }
          }
          this.pluginCreatedFiles.add(file.path);
          setTimeout(() => {
            this.pluginCreatedFiles.delete(file.path);
          }, 2e3);
          lastProcessedFiles.set(file.path, now);
          setTimeout(() => {
            lastProcessedFiles.delete(file.path);
          }, CONSTANTS.DEBOUNCE_MS + 100);
          if (lastProcessedFiles.size > 100) {
            const cutoff = now - CONSTANTS.DEBOUNCE_MS * 2;
            for (const [path, time] of lastProcessedFiles.entries()) {
              if (time < cutoff) {
                lastProcessedFiles.delete(path);
              }
            }
          }
          new TitleModal(this.app, file, this, matchedContentTypeId, false, true).open();
        }
      })();
    };
    const createEventRef = this.app.vault.on("create", (file) => {
      if (file instanceof import_obsidian12.TFile) {
        this.createEvent(file);
      }
    });
    this.registerEvent(createEventRef);
    this.createEventRef = createEventRef;
  }
  async loadSettings() {
    const loadedData = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, loadedData);
    if (!this.settings.contentTypes || !Array.isArray(this.settings.contentTypes)) {
      this.settings.contentTypes = [];
    }
    if (!this.settings.migrationCompleted) {
      const legacySettings = this.settings;
      const hasLegacyTypes = legacySettings.customContentTypes && Array.isArray(legacySettings.customContentTypes) && legacySettings.customContentTypes.length > 0;
      const hasNewTypes = this.settings.contentTypes && Array.isArray(this.settings.contentTypes) && this.settings.contentTypes.length > 0;
      if (hasLegacyTypes && !hasNewTypes) {
        this.settings.contentTypes = legacySettings.customContentTypes || [];
      }
    } else {
      const legacyFields = [
        "customContentTypes",
        // Old name for contentTypes - MUST be removed to prevent restoring deleted types
        "enableUnderscorePrefix",
        "postsFolder",
        "postsLinkBasePath",
        "automatePostCreation",
        "creationMode",
        "indexFileName",
        "excludedDirectories",
        "onlyAutomateInPostsFolder",
        "enablePages",
        "pagesFolder",
        "pagesLinkBasePath",
        "pagesCreationMode",
        "pagesIndexFileName",
        "pageTemplate",
        "onlyAutomateInPagesFolder"
      ];
      const settingsRecord = this.settings;
      for (const field of legacyFields) {
        if (settingsRecord[field] !== void 0) {
          delete settingsRecord[field];
        }
      }
      await this.saveSettings();
    }
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  registerContextMenu() {
    this.registerEvent(
      this.app.workspace.on("editor-menu", (menu, editor, view) => {
        if (!this.settings.enableCopyHeadingLink) {
          return;
        }
        const cursor = editor.getCursor();
        const file = view.file;
        if (!(file instanceof import_obsidian12.TFile)) {
          return;
        }
        const heading = this.headingLinkGenerator.findHeadingAtLine(this.app, file, cursor.line);
        if (heading) {
          const fullLink = this.headingLinkGenerator.generateLink(this.app, file, heading);
          const urlOnly = this.headingLinkGenerator.extractUrl(fullLink);
          menu.addItem((item) => {
            item.setTitle("Copy heading link").setIcon("link-2").onClick(async () => {
              await navigator.clipboard.writeText(urlOnly);
              new import_obsidian12.Notice("Heading link copied to clipboard");
            });
          });
          menu.addItem((item) => {
            item.setTitle("Copy heading link with text").setIcon("heading").onClick(async () => {
              await navigator.clipboard.writeText(fullLink);
              new import_obsidian12.Notice("Heading link with text copied to clipboard");
            });
          });
        }
      })
    );
  }
  /**
   * Rename a file by path (for programmatic use, e.g., from other plugins)
   * This allows the rename modal to appear without opening the file first
   */
  renameContentByPath(filePath) {
    renameContentByPath(this.app, filePath, this.settings, this);
  }
  registerRibbonIcons() {
    if (import_obsidian12.Platform.isMobile) {
      if (this.terminalRibbonIcon) {
        try {
          if (this.terminalRibbonIcon.parentNode) {
            this.terminalRibbonIcon.remove();
          }
        } catch (e) {
        }
        this.terminalRibbonIcon = null;
      }
      if (this.configRibbonIcon) {
        try {
          if (this.configRibbonIcon.parentNode) {
            this.configRibbonIcon.remove();
          }
        } catch (e) {
        }
        this.configRibbonIcon = null;
      }
      try {
        const terminalIcons = document.querySelectorAll('.side-dock-ribbon-action[aria-label="Open project terminal"]');
        terminalIcons.forEach((icon) => icon.remove());
        const configIcons = document.querySelectorAll('.side-dock-ribbon-action[aria-label="Edit astro config"]');
        configIcons.forEach((icon) => icon.remove());
      } catch (e) {
      }
      return;
    }
    const terminalRibbonEnabled = this.settings.enableTerminalRibbonIcon === true;
    const terminalCommandEnabled = this.settings.enableOpenTerminalCommand === true;
    const terminalShouldExist = terminalRibbonEnabled && terminalCommandEnabled;
    const configRibbonEnabled = this.settings.enableConfigRibbonIcon === true;
    const configCommandEnabled = this.settings.enableOpenConfigFileCommand === true;
    const configShouldExist = configRibbonEnabled && configCommandEnabled;
    if (this.terminalRibbonIcon) {
      try {
        if (this.terminalRibbonIcon.parentNode) {
          this.terminalRibbonIcon.remove();
        }
      } catch (e) {
      }
      this.terminalRibbonIcon = null;
    }
    if (this.configRibbonIcon) {
      try {
        if (this.configRibbonIcon.parentNode) {
          this.configRibbonIcon.remove();
        }
      } catch (e) {
      }
      this.configRibbonIcon = null;
    }
    try {
      const terminalIcons = document.querySelectorAll('.side-dock-ribbon-action[aria-label="Open project terminal"]');
      terminalIcons.forEach((icon) => icon.remove());
      const configIcons = document.querySelectorAll('.side-dock-ribbon-action[aria-label="Edit astro config"]');
      configIcons.forEach((icon) => icon.remove());
    } catch (e) {
    }
    if (terminalShouldExist) {
      const existingTerminal = document.querySelector('.side-dock-ribbon-action[aria-label="Open project terminal"]');
      if (!existingTerminal) {
        this.terminalRibbonIcon = this.addRibbonIcon("terminal-square", "Open project terminal", () => {
          if (!this.settings.enableOpenTerminalCommand) {
            new import_obsidian12.Notice("Open terminal command is disabled. Enable it in settings to use this command.");
            return;
          }
          openTerminalInProjectRoot(this.app, this.settings);
        });
        if (this.terminalRibbonIcon) {
          this.terminalRibbonIcon.setAttribute("data-astro-composer-terminal-ribbon", "true");
        }
      } else {
        this.terminalRibbonIcon = existingTerminal;
      }
      if (!configShouldExist) {
        const configIcons = document.querySelectorAll('.side-dock-ribbon-action[aria-label="Edit astro config"]');
        if (configIcons.length > 0) {
          configIcons.forEach((icon) => icon.remove());
          this.configRibbonIcon = null;
        }
      }
    } else {
      this.terminalRibbonIcon = null;
    }
    if (configShouldExist) {
      const existingConfig = document.querySelector('.side-dock-ribbon-action[aria-label="Edit astro config"]');
      if (!existingConfig) {
        this.configRibbonIcon = this.addRibbonIcon("wrench", "Edit astro config", async () => {
          if (!this.settings.enableOpenConfigFileCommand) {
            new import_obsidian12.Notice("Edit config file command is disabled. Enable it in settings to use this command.");
            return;
          }
          await openConfigFile(this.app, this.settings);
        });
        if (this.configRibbonIcon) {
          this.configRibbonIcon.setAttribute("data-astro-composer-config-ribbon", "true");
        }
      } else {
        this.configRibbonIcon = existingConfig;
      }
      if (!terminalShouldExist) {
        const terminalIcons = document.querySelectorAll('.side-dock-ribbon-action[aria-label="Open project terminal"]');
        if (terminalIcons.length > 0) {
          terminalIcons.forEach((icon) => icon.remove());
          this.terminalRibbonIcon = null;
        }
      }
    } else {
      this.configRibbonIcon = null;
    }
    this.updateRibbonContextMenuCSS();
    this.setupRibbonContextMenuObserver();
    setTimeout(() => {
      if (!terminalShouldExist) {
        const terminalIcons = document.querySelectorAll('.side-dock-ribbon-action[aria-label="Open project terminal"]');
        terminalIcons.forEach((icon) => icon.remove());
        this.terminalRibbonIcon = null;
      }
      if (!configShouldExist) {
        const configIcons = document.querySelectorAll('.side-dock-ribbon-action[aria-label="Edit astro config"]');
        configIcons.forEach((icon) => icon.remove());
        this.configRibbonIcon = null;
      }
    }, 100);
  }
  onunload() {
    if (this.terminalRibbonIcon) {
      this.terminalRibbonIcon.remove();
      this.terminalRibbonIcon = null;
    }
    if (this.configRibbonIcon) {
      this.configRibbonIcon.remove();
      this.configRibbonIcon = null;
    }
    if (this.ribbonContextMenuObserver) {
      this.ribbonContextMenuObserver.disconnect();
      this.ribbonContextMenuObserver = void 0;
    }
    document.body.removeClass("astro-composer-hide-terminal-icon");
    document.body.removeClass("astro-composer-hide-config-icon");
    if (this.helpButtonObserver) {
      this.helpButtonObserver.disconnect();
      this.helpButtonObserver = void 0;
    }
    if (this.customHelpButton) {
      this.customHelpButton.remove();
      this.customHelpButton = void 0;
    }
    this.helpButtonElement = void 0;
  }
  // Ribbon context menu handling - based on Astro Modular Settings approach
  setupRibbonContextMenuHandling() {
    this.updateRibbonContextMenuCSS();
    this.setupRibbonContextMenuObserver();
  }
  updateRibbonContextMenuCSS() {
    const terminalShouldBeHidden = !this.settings.enableTerminalRibbonIcon || !this.settings.enableOpenTerminalCommand;
    const configShouldBeHidden = !this.settings.enableConfigRibbonIcon || !this.settings.enableOpenConfigFileCommand;
    if (terminalShouldBeHidden) {
      document.body.addClass("astro-composer-hide-terminal-icon");
    } else {
      document.body.removeClass("astro-composer-hide-terminal-icon");
    }
    if (configShouldBeHidden) {
      document.body.addClass("astro-composer-hide-config-icon");
    } else {
      document.body.removeClass("astro-composer-hide-config-icon");
    }
  }
  setupRibbonContextMenuObserver() {
    if (this.ribbonContextMenuObserver) {
      this.ribbonContextMenuObserver.disconnect();
    }
    const terminalShouldBeHidden = !this.settings.enableTerminalRibbonIcon || !this.settings.enableOpenTerminalCommand;
    const configShouldBeHidden = !this.settings.enableConfigRibbonIcon || !this.settings.enableOpenConfigFileCommand;
    if (!terminalShouldBeHidden && !configShouldBeHidden) {
      return;
    }
    this.ribbonContextMenuObserver = new MutationObserver((mutations) => {
      for (const mutation of mutations) {
        if (mutation.addedNodes.length > 0) {
          for (const node of Array.from(mutation.addedNodes)) {
            if (node instanceof HTMLElement) {
              if (node.classList.contains("menu") || node.querySelector(".menu")) {
                this.removeRibbonIconsFromContextMenu(node);
              }
            }
          }
        }
      }
    });
    this.ribbonContextMenuObserver.observe(document.body, {
      childList: true,
      subtree: true
    });
  }
  updateHelpButtonCSS() {
    var _a;
    if ((_a = this.settings.helpButtonReplacement) == null ? void 0 : _a.enabled) {
      document.body.addClass("astro-composer-hide-help-button");
    } else {
      document.body.removeClass("astro-composer-hide-help-button");
    }
  }
  async updateHelpButton() {
    var _a, _b, _c;
    if (import_obsidian12.Platform.isMobile) {
      this.restoreHelpButton();
      return;
    }
    if (this.helpButtonObserver) {
      this.helpButtonObserver.disconnect();
    }
    await this.loadSettings();
    this.updateHelpButtonCSS();
    if (!((_a = this.settings.helpButtonReplacement) == null ? void 0 : _a.enabled)) {
      this.restoreHelpButton();
      this.setupHelpButtonObserver();
      return;
    }
    const vaultActions = document.querySelector(".workspace-drawer-vault-actions");
    if (!vaultActions) {
      this.setupHelpButtonObserver();
      setTimeout(() => {
        var _a2;
        if ((_a2 = this.settings.helpButtonReplacement) == null ? void 0 : _a2.enabled) {
          void this.updateHelpButton();
        }
      }, 500);
      return;
    }
    const clickableIcons = Array.from(vaultActions.querySelectorAll(".clickable-icon"));
    let helpButton = null;
    for (const icon of clickableIcons) {
      const svg = icon.querySelector("svg.help");
      if (svg) {
        helpButton = icon;
        break;
      }
    }
    if (!helpButton) {
      this.setupHelpButtonObserver();
      setTimeout(() => {
        var _a2;
        if ((_a2 = this.settings.helpButtonReplacement) == null ? void 0 : _a2.enabled) {
          void this.updateHelpButton();
        }
      }, 500);
      return;
    }
    this.helpButtonElement = helpButton;
    if (this.customHelpButton && this.customHelpButton.parentElement && document.body.contains(this.customHelpButton) && this.customHelpButton.hasAttribute("data-astro-composer-help-replacement")) {
      this.customHelpButton.remove();
    }
    this.customHelpButton = void 0;
    const customButton = helpButton.cloneNode(true);
    customButton.addClass("astro-composer-help-replacement");
    customButton.removeAttribute("aria-label");
    customButton.setAttribute("data-astro-composer-help-replacement", "true");
    customButton.classList.add("astro-composer-help-replacement");
    customButton.onclick = null;
    const iconContainer = ((_b = customButton.querySelector("svg")) == null ? void 0 : _b.parentElement) || customButton;
    try {
      if (iconContainer instanceof HTMLElement) {
        (0, import_obsidian12.setIcon)(iconContainer, this.settings.helpButtonReplacement.iconId);
      }
    } catch (error) {
      console.warn("[Astro Composer] Error setting icon:", error);
    }
    customButton.addEventListener("click", (evt) => {
      var _a2;
      evt.preventDefault();
      evt.stopPropagation();
      const commandId = (_a2 = this.settings.helpButtonReplacement) == null ? void 0 : _a2.commandId;
      if (commandId) {
        void (async () => {
          var _a3;
          try {
            const appWithCommands = this.app;
            if ((_a3 = appWithCommands.commands) == null ? void 0 : _a3.executeCommandById) {
              await appWithCommands.commands.executeCommandById(commandId);
            }
          } catch (error) {
            console.warn("[Astro Composer] Error executing command:", error);
            new import_obsidian12.Notice(`Failed to execute command: ${commandId}`);
          }
        })();
      }
    }, true);
    (_c = helpButton.parentElement) == null ? void 0 : _c.insertBefore(customButton, helpButton);
    this.customHelpButton = customButton;
    setTimeout(() => {
      var _a2;
      if ((_a2 = this.settings.helpButtonReplacement) == null ? void 0 : _a2.enabled) {
        this.setupHelpButtonObserver();
      }
    }, 1e3);
  }
  setupHelpButtonObserver() {
    var _a;
    if (this.helpButtonObserver) {
      this.helpButtonObserver.disconnect();
    }
    if (!((_a = this.settings.helpButtonReplacement) == null ? void 0 : _a.enabled)) {
      return;
    }
    let updateTimeout = null;
    this.helpButtonObserver = new MutationObserver(() => {
      if (updateTimeout) {
        clearTimeout(updateTimeout);
      }
      updateTimeout = window.setTimeout(() => {
        const vaultActions2 = document.querySelector(".workspace-drawer-vault-actions");
        if (!vaultActions2) return;
        const customButtonExists = this.customHelpButton && this.customHelpButton.parentElement && document.body.contains(this.customHelpButton) && this.customHelpButton.hasAttribute("data-astro-composer-help-replacement");
        if (!customButtonExists) {
          if (this.customHelpButton && (!document.body.contains(this.customHelpButton) || !this.customHelpButton.hasAttribute("data-astro-composer-help-replacement"))) {
            this.customHelpButton = void 0;
          }
          void this.updateHelpButton();
        }
      }, 100);
    });
    const vaultActions = document.querySelector(".workspace-drawer-vault-actions");
    if (vaultActions) {
      this.helpButtonObserver.observe(vaultActions, {
        childList: true,
        subtree: true
        // Watch subtree to catch when buttons are recreated
      });
    }
    const vaultProfile = document.querySelector(".workspace-sidedock-vault-profile");
    if (vaultProfile) {
      this.helpButtonObserver.observe(vaultProfile, {
        childList: true,
        subtree: true
        // Watch subtree to catch when vault actions are added
      });
    }
    if (!vaultActions && !vaultProfile) {
      const workspace = document.querySelector(".workspace-split");
      if (workspace) {
        this.helpButtonObserver.observe(workspace, {
          childList: true,
          subtree: true
        });
      } else {
        this.helpButtonObserver.observe(document.body, {
          childList: true,
          subtree: true
        });
      }
    }
  }
  restoreHelpButton() {
    document.body.removeClass("astro-composer-hide-help-button");
    if (this.customHelpButton) {
      this.customHelpButton.remove();
      this.customHelpButton = void 0;
    }
    this.helpButtonElement = void 0;
  }
  removeRibbonIconsFromContextMenu(menuElement) {
    var _a, _b;
    const terminalShouldBeHidden = !this.settings.enableTerminalRibbonIcon || !this.settings.enableOpenTerminalCommand;
    const configShouldBeHidden = !this.settings.enableConfigRibbonIcon || !this.settings.enableOpenConfigFileCommand;
    const menuItems = menuElement.querySelectorAll(".menu-item");
    for (const item of Array.from(menuItems)) {
      const svg = item.querySelector("svg");
      if (svg) {
        const iconName = svg.getAttribute("data-lucide") || svg.getAttribute("xmlns:lucide") || (svg.classList.contains("lucide-terminal-square") ? "terminal-square" : null) || (svg.classList.contains("lucide-wrench") ? "wrench" : null);
        if (terminalShouldBeHidden && iconName === "terminal-square") {
          const itemText = ((_a = item.textContent) == null ? void 0 : _a.toLowerCase()) || "";
          if (itemText.includes("terminal") || itemText.includes("project terminal")) {
            item.remove();
          }
        }
        if (configShouldBeHidden && iconName === "wrench") {
          const itemText = ((_b = item.textContent) == null ? void 0 : _b.toLowerCase()) || "";
          if (itemText.includes("config") || itemText.includes("astro config")) {
            item.remove();
          }
        }
      }
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3R5cGVzLnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvY29tbWFuZHMvaW5kZXgudHMiLCAic3JjL3V0aWxzL2ZpbGUtb3BlcmF0aW9ucy50cyIsICJzcmMvdXRpbHMvcGF0aC1tYXRjaGluZy50cyIsICJzcmMvdXRpbHMvdGVtcGxhdGUtcGFyc2luZy50cyIsICJzcmMvdXRpbHMvbGluay1jb252ZXJzaW9uLnRzIiwgInNyYy91aS90aXRsZS1tb2RhbC50cyIsICJzcmMvdWkvc2V0dGluZ3MtdGFiLnRzIiwgInNyYy91aS9jb21wb25lbnRzL0NvbW1hbmRQaWNrZXJNb2RhbC50cyIsICJzcmMvdWkvY29tcG9uZW50cy9JY29uUGlja2VyTW9kYWwudHMiLCAic3JjL3VpL2NvbXBvbmVudHMvQ29uZmlybU1vZGFsLnRzIiwgInNyYy91dGlscy9zZXR0aW5ncy1jb21wYXQudHMiLCAic3JjL3VpL2NvbXBvbmVudHMvTWlncmF0aW9uTW9kYWwudHMiLCAic3JjL3V0aWxzL2hlYWRpbmctbGluay1nZW5lcmF0b3IudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7XHJcblx0UGx1Z2luLFxyXG5cdFRGaWxlLFxyXG5cdE5vdGljZSxcclxuXHRzZXRJY29uLFxyXG5cdFBsYXRmb3JtLFxyXG5cdEV2ZW50UmVmLFxyXG59IGZyb20gXCJvYnNpZGlhblwiO1xyXG5cclxuaW1wb3J0IHsgQXN0cm9Db21wb3NlclNldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTLCBDT05TVEFOVFMgfSBmcm9tIFwiLi9zZXR0aW5nc1wiO1xyXG5pbXBvcnQgeyBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlLCBDb250ZW50VHlwZSB9IGZyb20gXCIuL3R5cGVzXCI7XHJcbmltcG9ydCB7IHJlZ2lzdGVyQ29tbWFuZHMsIHJlZ2lzdGVyQ29udGVudFR5cGVDb21tYW5kcywgcmVuYW1lQ29udGVudEJ5UGF0aCBhcyByZW5hbWVDb250ZW50QnlQYXRoRnVuY3Rpb24sIG9wZW5UZXJtaW5hbEluUHJvamVjdFJvb3QsIG9wZW5Db25maWdGaWxlIH0gZnJvbSBcIi4vY29tbWFuZHNcIjtcclxuaW1wb3J0IHsgQXN0cm9Db21wb3NlclNldHRpbmdUYWIgfSBmcm9tIFwiLi91aS9zZXR0aW5ncy10YWJcIjtcclxuaW1wb3J0IHsgVGl0bGVNb2RhbCB9IGZyb20gXCIuL3VpL3RpdGxlLW1vZGFsXCI7XHJcbmltcG9ydCB7IE1pZ3JhdGlvbk1vZGFsLCBNaWdyYXRpb25Db25mbGljdFJlc3VsdCB9IGZyb20gXCIuL3VpL2NvbXBvbmVudHMvTWlncmF0aW9uTW9kYWxcIjtcclxuaW1wb3J0IHsgRmlsZU9wZXJhdGlvbnMgfSBmcm9tIFwiLi91dGlscy9maWxlLW9wZXJhdGlvbnNcIjtcclxuaW1wb3J0IHsgVGVtcGxhdGVQYXJzZXIgfSBmcm9tIFwiLi91dGlscy90ZW1wbGF0ZS1wYXJzaW5nXCI7XHJcbmltcG9ydCB7IEhlYWRpbmdMaW5rR2VuZXJhdG9yIH0gZnJvbSBcIi4vdXRpbHMvaGVhZGluZy1saW5rLWdlbmVyYXRvclwiO1xyXG5pbXBvcnQgeyBtYXRjaGVzRm9sZGVyUGF0dGVybiwgc29ydEJ5UGF0dGVyblNwZWNpZmljaXR5IH0gZnJvbSBcIi4vdXRpbHMvcGF0aC1tYXRjaGluZ1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXN0cm9Db21wb3NlclBsdWdpbiBleHRlbmRzIFBsdWdpbiBpbXBsZW1lbnRzIEFzdHJvQ29tcG9zZXJQbHVnaW5JbnRlcmZhY2Uge1xyXG5cdHNldHRpbmdzITogQXN0cm9Db21wb3NlclNldHRpbmdzO1xyXG5cdHByaXZhdGUgY3JlYXRlRXZlbnQhOiAoZmlsZTogVEZpbGUpID0+IHZvaWQ7XHJcblx0cHJpdmF0ZSBjcmVhdGVFdmVudFJlZj86IEV2ZW50UmVmO1xyXG5cdHByaXZhdGUgZmlsZU9wcyE6IEZpbGVPcGVyYXRpb25zO1xyXG5cdHByaXZhdGUgdGVtcGxhdGVQYXJzZXIhOiBUZW1wbGF0ZVBhcnNlcjtcclxuXHRwcml2YXRlIGhlYWRpbmdMaW5rR2VuZXJhdG9yITogSGVhZGluZ0xpbmtHZW5lcmF0b3I7XHJcblx0cHJpdmF0ZSBwbHVnaW5DcmVhdGVkRmlsZXM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xyXG5cdHByaXZhdGUgdGVybWluYWxSaWJib25JY29uOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgY29uZmlnUmliYm9uSWNvbjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIHJpYmJvbkNvbnRleHRNZW51T2JzZXJ2ZXI/OiBNdXRhdGlvbk9ic2VydmVyO1xyXG5cdHByaXZhdGUgaGVscEJ1dHRvbk9ic2VydmVyPzogTXV0YXRpb25PYnNlcnZlcjtcclxuXHRwcml2YXRlIGhlbHBCdXR0b25FbGVtZW50PzogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBjdXN0b21IZWxwQnV0dG9uPzogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBzZXR0aW5nc1RhYj86IEFzdHJvQ29tcG9zZXJTZXR0aW5nVGFiO1xyXG5cclxuXHQvKipcclxuXHQgKiBNaWdyYXRlIG9sZCBwb3N0cy9wYWdlcyBzZXR0aW5ncyB0byB1bmlmaWVkIGNvbnRlbnQgdHlwZXNcclxuXHQgKi9cclxuXHRwcml2YXRlIGFzeW5jIG1pZ3JhdGVTZXR0aW5nc0lmTmVlZGVkKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Ly8gQ2hlY2sgaWYgbWlncmF0aW9uIGlzIGFscmVhZHkgY29tcGxldGVkXHJcblx0XHQvLyBJZiB0cnVlLCByZXR1cm4gaW1tZWRpYXRlbHkgLSBubyByZWxvYWQvcmVmcmVzaCBuZWVkZWQsIHRoaXMgb25seSBydW5zIG9uY2UgcGVyIHVzZXJcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLm1pZ3JhdGlvbkNvbXBsZXRlZCkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgdGhlcmUgYXJlIG9sZCBzZXR0aW5ncyB0byBtaWdyYXRlXHJcblx0XHRjb25zdCBoYXNQb3N0c1NldHRpbmdzID0gdGhpcy5zZXR0aW5ncy5hdXRvbWF0ZVBvc3RDcmVhdGlvbiAhPT0gdW5kZWZpbmVkICYmIHRoaXMuc2V0dGluZ3MuYXV0b21hdGVQb3N0Q3JlYXRpb247XHJcblx0XHRjb25zdCBoYXNQYWdlc1NldHRpbmdzID0gdGhpcy5zZXR0aW5ncy5lbmFibGVQYWdlcyAhPT0gdW5kZWZpbmVkICYmIHRoaXMuc2V0dGluZ3MuZW5hYmxlUGFnZXM7XHJcblxyXG5cdFx0aWYgKCFoYXNQb3N0c1NldHRpbmdzICYmICFoYXNQYWdlc1NldHRpbmdzKSB7XHJcblx0XHRcdC8vIE5vIG9sZCBzZXR0aW5ncyB0byBtaWdyYXRlLCBtYXJrIGFzIGNvbXBsZXRlZFxyXG5cdFx0XHR0aGlzLnNldHRpbmdzLm1pZ3JhdGlvbkNvbXBsZXRlZCA9IHRydWU7XHJcblx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBmb3IgbmFtaW5nIGNvbmZsaWN0c1xyXG5cdFx0Ly8gSGFuZGxlIGJvdGggbmV3IGNvbnRlbnRUeXBlcyBhbmQgbGVnYWN5IGN1c3RvbUNvbnRlbnRUeXBlc1xyXG5cdFx0Y29uc3QgbGVnYWN5Q29udGVudFR5cGVzID0gKHRoaXMuc2V0dGluZ3MgYXMgdW5rbm93biBhcyB7IGN1c3RvbUNvbnRlbnRUeXBlcz86IENvbnRlbnRUeXBlW10gfSkuY3VzdG9tQ29udGVudFR5cGVzO1xyXG5cdFx0Y29uc3QgZXhpc3RpbmdDb250ZW50VHlwZXMgPSB0aGlzLnNldHRpbmdzLmNvbnRlbnRUeXBlcyB8fCBsZWdhY3lDb250ZW50VHlwZXMgfHwgW107XHJcblx0XHRjb25zdCBjb25mbGljdHM6IHN0cmluZ1tdID0gW107XHJcblx0XHRpZiAoZXhpc3RpbmdDb250ZW50VHlwZXMuc29tZSgoY3Q6IENvbnRlbnRUeXBlKSA9PiBjdC5uYW1lID09PSBcIlBvc3RzXCIpKSB7XHJcblx0XHRcdGNvbmZsaWN0cy5wdXNoKFwiUG9zdHNcIik7XHJcblx0XHR9XHJcblx0XHRpZiAoZXhpc3RpbmdDb250ZW50VHlwZXMuc29tZSgoY3Q6IENvbnRlbnRUeXBlKSA9PiBjdC5uYW1lID09PSBcIlBhZ2VzXCIpKSB7XHJcblx0XHRcdGNvbmZsaWN0cy5wdXNoKFwiUGFnZXNcIik7XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IHNob3VsZE1pZ3JhdGUgPSB0cnVlO1xyXG5cclxuXHRcdC8vIElmIGNvbmZsaWN0cyBleGlzdCwgcHJvbXB0IHVzZXIgKGJ1dCBkb24ndCBibG9jayAtIHVzZSBzZXRUaW1lb3V0IHRvIHNob3cgbW9kYWwgYWZ0ZXIgVUkgaXMgcmVhZHkpXHJcblx0XHRpZiAoY29uZmxpY3RzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0Ly8gU2hvdyBtb2RhbCBhc3luY2hyb25vdXNseSB0byBhdm9pZCBibG9ja2luZyBwbHVnaW4gbG9hZFxyXG5cdFx0XHRhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xyXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IE1pZ3JhdGlvbk1vZGFsKHRoaXMuYXBwLCBjb25mbGljdHMpO1xyXG5cdFx0XHRcdFx0XHRcdC8vIEFkZCB0aW1lb3V0IGZhbGxiYWNrIC0gaWYgdXNlciBkb2Vzbid0IHJlc3BvbmQgaW4gMzAgc2Vjb25kcywgZGVmYXVsdCB0byBza2lwXHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgdGltZW91dFByb21pc2UgPSBuZXcgUHJvbWlzZTxNaWdyYXRpb25Db25mbGljdFJlc3VsdD4oKHRpbWVvdXRSZXNvbHZlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGltZW91dFJlc29sdmUoeyBhY3Rpb246IFwic2tpcFwiIH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSwgMzAwMDApOyAvLyAzMCBzZWNvbmQgdGltZW91dFxyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IFByb21pc2UucmFjZShbXHJcblx0XHRcdFx0XHRcdFx0XHRtb2RhbC53YWl0Rm9yUmVzdWx0KCksXHJcblx0XHRcdFx0XHRcdFx0XHR0aW1lb3V0UHJvbWlzZVxyXG5cdFx0XHRcdFx0XHRcdF0pO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGlmIChyZXN1bHQuYWN0aW9uID09PSBcInNraXBcIikge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2hvdWxkTWlncmF0ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIk1pZ3JhdGlvbiBza2lwcGVkLiBPbGQgcG9zdHMvcGFnZXMgc2V0dGluZ3Mgd2lsbCBiZSBpZ25vcmVkLlwiKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gSWYgbW9kYWwgZmFpbHMgZm9yIGFueSByZWFzb24sIGRlZmF1bHQgdG8gc2tpcCB0byBwcmV2ZW50IGJsb2NraW5nXHJcblx0XHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKFwiTWlncmF0aW9uIG1vZGFsIGVycm9yOlwiLCBlcnJvcik7XHJcblx0XHRcdFx0XHRcdFx0c2hvdWxkTWlncmF0ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJNaWdyYXRpb24gc2tpcHBlZCBkdWUgdG8gZXJyb3IuIFlvdSBjYW4gbWlncmF0ZSBtYW51YWxseSBpbiBzZXR0aW5ncy5cIik7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0cmVzb2x2ZSgpO1xyXG5cdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHR9LCA1MDApOyAvLyBTbWFsbCBkZWxheSB0byBlbnN1cmUgVUkgaXMgcmVhZHlcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCFzaG91bGRNaWdyYXRlKSB7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MubWlncmF0aW9uQ29tcGxldGVkID0gdHJ1ZTtcclxuXHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFBlcmZvcm0gbWlncmF0aW9uXHJcblx0XHRjb25zdCBtaWdyYXRlZFR5cGVzOiBDb250ZW50VHlwZVtdID0gW107XHJcblxyXG5cdFx0Ly8gTWlncmF0ZSBQb3N0cyAtIHNraXAgaWYgaXQgYWxyZWFkeSBleGlzdHMgKGRvbid0IG92ZXJ3cml0ZSB1c2VyJ3MgZXhpc3RpbmcgY29uZmlnKVxyXG5cdFx0aWYgKGhhc1Bvc3RzU2V0dGluZ3MgJiYgIWNvbmZsaWN0cy5pbmNsdWRlcyhcIlBvc3RzXCIpKSB7XHJcblx0XHRcdGNvbnN0IHBvc3RzVHlwZTogQ29udGVudFR5cGUgPSB7XHJcblx0XHRcdFx0aWQ6IGBwb3N0cy0ke0RhdGUubm93KCl9YCxcclxuXHRcdFx0XHRuYW1lOiBcIlBvc3RzXCIsXHJcblx0XHRcdFx0Zm9sZGVyOiB0aGlzLnNldHRpbmdzLnBvc3RzRm9sZGVyIHx8IFwiXCIsXHJcblx0XHRcdFx0bGlua0Jhc2VQYXRoOiB0aGlzLnNldHRpbmdzLnBvc3RzTGlua0Jhc2VQYXRoIHx8IFwiXCIsXHJcblx0XHRcdFx0dGVtcGxhdGU6IHRoaXMuc2V0dGluZ3MuZGVmYXVsdFRlbXBsYXRlIHx8ICctLS1cXG50aXRsZTogXCJ7e3RpdGxlfX1cIlxcbmRhdGU6IHt7ZGF0ZX19XFxudGFnczogW11cXG4tLS1cXG4nLFxyXG5cdFx0XHRcdGVuYWJsZWQ6IHRoaXMuc2V0dGluZ3MuYXV0b21hdGVQb3N0Q3JlYXRpb24gfHwgZmFsc2UsXHJcblx0XHRcdFx0Y3JlYXRpb25Nb2RlOiB0aGlzLnNldHRpbmdzLmNyZWF0aW9uTW9kZSB8fCBcImZpbGVcIixcclxuXHRcdFx0XHRpbmRleEZpbGVOYW1lOiB0aGlzLnNldHRpbmdzLmluZGV4RmlsZU5hbWUgfHwgXCJcIixcclxuXHRcdFx0XHRpZ25vcmVTdWJmb2xkZXJzOiB0aGlzLnNldHRpbmdzLm9ubHlBdXRvbWF0ZUluUG9zdHNGb2xkZXIgfHwgZmFsc2UsXHJcblx0XHRcdFx0ZW5hYmxlVW5kZXJzY29yZVByZWZpeDogdGhpcy5zZXR0aW5ncy5lbmFibGVVbmRlcnNjb3JlUHJlZml4IHx8IGZhbHNlLFxyXG5cdFx0XHRcdHVzZU1keEV4dGVuc2lvbjogZmFsc2UsXHJcblx0XHRcdH07XHJcblx0XHRcdG1pZ3JhdGVkVHlwZXMucHVzaChwb3N0c1R5cGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIE1pZ3JhdGUgUGFnZXMgLSBza2lwIGlmIGl0IGFscmVhZHkgZXhpc3RzIChkb24ndCBvdmVyd3JpdGUgdXNlcidzIGV4aXN0aW5nIGNvbmZpZylcclxuXHRcdGlmIChoYXNQYWdlc1NldHRpbmdzICYmICFjb25mbGljdHMuaW5jbHVkZXMoXCJQYWdlc1wiKSkge1xyXG5cdFx0XHRjb25zdCBwYWdlc1R5cGU6IENvbnRlbnRUeXBlID0ge1xyXG5cdFx0XHRcdGlkOiBgcGFnZXMtJHtEYXRlLm5vdygpfWAsXHJcblx0XHRcdFx0bmFtZTogXCJQYWdlc1wiLFxyXG5cdFx0XHRcdGZvbGRlcjogdGhpcy5zZXR0aW5ncy5wYWdlc0ZvbGRlciB8fCBcIlwiLFxyXG5cdFx0XHRcdGxpbmtCYXNlUGF0aDogdGhpcy5zZXR0aW5ncy5wYWdlc0xpbmtCYXNlUGF0aCB8fCBcIlwiLFxyXG5cdFx0XHRcdHRlbXBsYXRlOiB0aGlzLnNldHRpbmdzLnBhZ2VUZW1wbGF0ZSB8fCAnLS0tXFxudGl0bGU6IFwie3t0aXRsZX19XCJcXG5kZXNjcmlwdGlvbjogXCJcIlxcbi0tLVxcbicsXHJcblx0XHRcdFx0ZW5hYmxlZDogdGhpcy5zZXR0aW5ncy5lbmFibGVQYWdlcyB8fCBmYWxzZSxcclxuXHRcdFx0XHRjcmVhdGlvbk1vZGU6IHRoaXMuc2V0dGluZ3MucGFnZXNDcmVhdGlvbk1vZGUgfHwgXCJmaWxlXCIsXHJcblx0XHRcdFx0aW5kZXhGaWxlTmFtZTogdGhpcy5zZXR0aW5ncy5wYWdlc0luZGV4RmlsZU5hbWUgfHwgXCJcIixcclxuXHRcdFx0XHRpZ25vcmVTdWJmb2xkZXJzOiB0aGlzLnNldHRpbmdzLm9ubHlBdXRvbWF0ZUluUGFnZXNGb2xkZXIgfHwgZmFsc2UsXHJcblx0XHRcdFx0ZW5hYmxlVW5kZXJzY29yZVByZWZpeDogZmFsc2UsIC8vIFBhZ2VzIGRpZG4ndCBoYXZlIHRoaXMgb3B0aW9uIGJlZm9yZVxyXG5cdFx0XHRcdHVzZU1keEV4dGVuc2lvbjogZmFsc2UsXHJcblx0XHRcdH07XHJcblx0XHRcdG1pZ3JhdGVkVHlwZXMucHVzaChwYWdlc1R5cGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEFkZCBtaWdyYXRlZCB0eXBlcyB0byBjb250ZW50IHR5cGVzIGFycmF5XHJcblx0XHQvLyBDUklUSUNBTDogUHJlc2VydmUgQUxMIGV4aXN0aW5nIGNvbnRlbnQgdHlwZXMsIGRvbid0IG92ZXJ3cml0ZSB0aGVtXHJcblx0XHQvLyBHZXQgZXhpc3RpbmcgdHlwZXMgZnJvbSBib3RoIHBvc3NpYmxlIHNvdXJjZXNcclxuXHRcdGNvbnN0IGV4aXN0aW5nRnJvbU5ldyA9IHRoaXMuc2V0dGluZ3MuY29udGVudFR5cGVzICYmIEFycmF5LmlzQXJyYXkodGhpcy5zZXR0aW5ncy5jb250ZW50VHlwZXMpIFxyXG5cdFx0XHQ/IHRoaXMuc2V0dGluZ3MuY29udGVudFR5cGVzIFxyXG5cdFx0XHQ6IFtdO1xyXG5cdFx0Y29uc3QgbGVnYWN5U2V0dGluZ3MgPSB0aGlzLnNldHRpbmdzIGFzIHVua25vd24gYXMgeyBjdXN0b21Db250ZW50VHlwZXM/OiBDb250ZW50VHlwZVtdIH07XHJcblx0XHRjb25zdCBleGlzdGluZ0Zyb21MZWdhY3kgPSBsZWdhY3lTZXR0aW5ncy5jdXN0b21Db250ZW50VHlwZXMgJiYgQXJyYXkuaXNBcnJheShsZWdhY3lTZXR0aW5ncy5jdXN0b21Db250ZW50VHlwZXMpXHJcblx0XHRcdD8gbGVnYWN5U2V0dGluZ3MuY3VzdG9tQ29udGVudFR5cGVzXHJcblx0XHRcdDogW107XHJcblx0XHRcclxuXHRcdC8vIE1lcmdlIGV4aXN0aW5nIHR5cGVzLCBwcmlvcml0aXppbmcgbmV3IGZvcm1hdCBidXQgaW5jbHVkaW5nIGxlZ2FjeSBpZiBuZXcgaXMgZW1wdHlcclxuXHRcdC8vIElmIGJvdGggZXhpc3QsIHVzZSBuZXcgZm9ybWF0IChpdCdzIG1vcmUgcmVjZW50KVxyXG5cdFx0bGV0IGV4aXN0aW5nVHlwZXM6IENvbnRlbnRUeXBlW10gPSBbXTtcclxuXHRcdGlmIChleGlzdGluZ0Zyb21OZXcubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRleGlzdGluZ1R5cGVzID0gZXhpc3RpbmdGcm9tTmV3O1xyXG5cdFx0fSBlbHNlIGlmIChleGlzdGluZ0Zyb21MZWdhY3kubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRleGlzdGluZ1R5cGVzID0gZXhpc3RpbmdGcm9tTGVnYWN5O1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBPbmx5IGFkZCBtaWdyYXRlZCB0eXBlcyBpZiB3ZSBoYXZlIGFueVxyXG5cdFx0Ly8gQ1JJVElDQUw6IENoZWNrIGlmIG1pZ3JhdGVkIHR5cGVzIGFscmVhZHkgZXhpc3QgYnkgbmFtZSBiZWZvcmUgYWRkaW5nIHRoZW1cclxuXHRcdC8vIFRoaXMgcHJldmVudHMgcmUtYWRkaW5nIGNvbnRlbnQgdHlwZXMgdGhhdCB3ZXJlIGRlbGV0ZWQgYnkgdGhlIHVzZXJcclxuXHRcdGxldCBmaW5hbFR5cGVzOiBDb250ZW50VHlwZVtdID0gWy4uLmV4aXN0aW5nVHlwZXNdO1xyXG5cdFx0aWYgKG1pZ3JhdGVkVHlwZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHQvLyBGaWx0ZXIgb3V0IGFueSBtaWdyYXRlZCB0eXBlcyB0aGF0IGFscmVhZHkgZXhpc3QgYnkgbmFtZVxyXG5cdFx0XHRjb25zdCBleGlzdGluZ05hbWVzID0gbmV3IFNldChleGlzdGluZ1R5cGVzLm1hcChjdCA9PiBjdC5uYW1lKSk7XHJcblx0XHRcdGNvbnN0IG5ld01pZ3JhdGVkVHlwZXMgPSBtaWdyYXRlZFR5cGVzLmZpbHRlcihtdCA9PiAhZXhpc3RpbmdOYW1lcy5oYXMobXQubmFtZSkpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gT25seSBhZGQgbWlncmF0ZWQgdHlwZXMgdGhhdCBkb24ndCBhbHJlYWR5IGV4aXN0XHJcblx0XHRcdGlmIChuZXdNaWdyYXRlZFR5cGVzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRmaW5hbFR5cGVzID0gWy4uLmV4aXN0aW5nVHlwZXMsIC4uLm5ld01pZ3JhdGVkVHlwZXNdO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIFNldCB0aGUgZmluYWwgY29udGVudCB0eXBlcyBhcnJheVxyXG5cdFx0dGhpcy5zZXR0aW5ncy5jb250ZW50VHlwZXMgPSBmaW5hbFR5cGVzO1xyXG5cdFx0XHJcblx0XHQvLyBDUklUSUNBTDogQ2xlYW4gdXAgYWxsIG9sZCBsZWdhY3kgZmllbGRzIGFmdGVyIG1pZ3JhdGlvbiB0byBwcmV2ZW50IHRoZW0gZnJvbSBjYXVzaW5nIGlzc3Vlc1xyXG5cdFx0Ly8gVGhlc2UgZmllbGRzIGFyZSBubyBsb25nZXIgbmVlZGVkIGFuZCBjb3VsZCBjYXVzZSBjb250ZW50IHR5cGVzIHRvIGJlIHJlY3JlYXRlZFxyXG5cdFx0Y29uc3QgbGVnYWN5RmllbGRzID0gW1xyXG5cdFx0XHQnY3VzdG9tQ29udGVudFR5cGVzJywgLy8gT2xkIG5hbWUgZm9yIGNvbnRlbnRUeXBlcyAtIG11c3QgYmUgcmVtb3ZlZFxyXG5cdFx0XHQnZW5hYmxlVW5kZXJzY29yZVByZWZpeCcsXHJcblx0XHRcdCdwb3N0c0ZvbGRlcicsXHJcblx0XHRcdCdwb3N0c0xpbmtCYXNlUGF0aCcsXHJcblx0XHRcdCdhdXRvbWF0ZVBvc3RDcmVhdGlvbicsXHJcblx0XHRcdCdjcmVhdGlvbk1vZGUnLFxyXG5cdFx0XHQnaW5kZXhGaWxlTmFtZScsXHJcblx0XHRcdCdleGNsdWRlZERpcmVjdG9yaWVzJyxcclxuXHRcdFx0J29ubHlBdXRvbWF0ZUluUG9zdHNGb2xkZXInLFxyXG5cdFx0XHQnZW5hYmxlUGFnZXMnLFxyXG5cdFx0XHQncGFnZXNGb2xkZXInLFxyXG5cdFx0XHQncGFnZXNMaW5rQmFzZVBhdGgnLFxyXG5cdFx0XHQncGFnZXNDcmVhdGlvbk1vZGUnLFxyXG5cdFx0XHQncGFnZXNJbmRleEZpbGVOYW1lJyxcclxuXHRcdFx0J3BhZ2VUZW1wbGF0ZScsXHJcblx0XHRcdCdvbmx5QXV0b21hdGVJblBhZ2VzRm9sZGVyJyxcclxuXHRcdF07XHJcblx0XHRjb25zdCBzZXR0aW5nc1JlY29yZCA9IHRoaXMuc2V0dGluZ3MgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcclxuXHRcdGZvciAoY29uc3QgZmllbGQgb2YgbGVnYWN5RmllbGRzKSB7XHJcblx0XHRcdGlmIChzZXR0aW5nc1JlY29yZFtmaWVsZF0gIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdGRlbGV0ZSBzZXR0aW5nc1JlY29yZFtmaWVsZF07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBNYXJrIG1pZ3JhdGlvbiBhcyBjb21wbGV0ZWRcclxuXHRcdHRoaXMuc2V0dGluZ3MubWlncmF0aW9uQ29tcGxldGVkID0gdHJ1ZTtcclxuXHRcdC8vIFNhdmUgc2V0dGluZ3MgdG8gZW5zdXJlIGFsbCBsZWdhY3kgZmllbGRzIGFyZSBwZXJtYW5lbnRseSByZW1vdmVkIGZyb20gZGlza1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFxyXG5cdFx0Ly8gTk9URTogVGhlIHJlbG9hZCBhbmQgcmVmcmVzaCBiZWxvdyBPTkxZIGhhcHBlbiB3aGVuIG1pZ3JhdGlvbiBhY3R1YWxseSBydW5zXHJcblx0XHQvLyBJZiBtaWdyYXRpb25Db21wbGV0ZWQgd2FzIGFscmVhZHkgdHJ1ZSwgdGhpcyBmdW5jdGlvbiByZXR1cm5zIGVhcmx5IChsaW5lIDQzKVxyXG5cdFx0Ly8gU28gdGhpcyBjb2RlIHBhdGggb25seSBleGVjdXRlcyBvbmNlIHBlciB1c2VyIGR1cmluZyB0aGVpciBmaXJzdCBtaWdyYXRpb25cclxuXHRcdFxyXG5cdFx0Ly8gUmVsb2FkIHNldHRpbmdzIHRvIGVuc3VyZSBldmVyeXRoaW5nIGlzIGluIHN5bmNcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG5cdFx0aWYgKG1pZ3JhdGVkVHlwZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRuZXcgTm90aWNlKGBNaWdyYXRpb24gY29tcGxldGVkOiAke21pZ3JhdGVkVHlwZXMubGVuZ3RofSBjb250ZW50IHR5cGUocykgbWlncmF0ZWQuYCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBSZWZyZXNoIHNldHRpbmdzIHRhYiBpZiBpdCBleGlzdHMgLSBvbmx5IHJ1bnMgd2hlbiBtaWdyYXRpb24gYWN0dWFsbHkgaGFwcGVuZWRcclxuXHRcdFx0Ly8gVXNlIGEgZGVsYXkgdG8gZW5zdXJlIGV2ZXJ5dGhpbmcgaXMgc3luY2VkIGFuZCBVSSBpcyByZWFkeVxyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5nc1RhYikge1xyXG5cdFx0XHRcdFx0Ly8gQWx3YXlzIHRyeSB0byByZWZyZXNoIHRoZSBzZXR0aW5ncyB0YWIgaWYgaXQgZXhpc3RzXHJcblx0XHRcdFx0XHQvLyBJZiBpdCdzIGN1cnJlbnRseSBkaXNwbGF5ZWQsIHRoaXMgd2lsbCB1cGRhdGUgaXQgaW1tZWRpYXRlbHlcclxuXHRcdFx0XHRcdC8vIElmIGl0J3Mgbm90IGRpc3BsYXllZCB5ZXQsIHRoaXMgaXMgc2FmZSBhbmQgd29uJ3QgY2F1c2UgaXNzdWVzXHJcblx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBzZXR0aW5ncyB0YWIgY29udGFpbmVyIGV4aXN0cyAobWVhbnMgaXQncyBiZWVuIGRpc3BsYXllZCBhdCBsZWFzdCBvbmNlKVxyXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5nc1RhYi5jdXN0b21Db250ZW50VHlwZXNDb250YWluZXIgfHwgdGhpcy5zZXR0aW5nc1RhYi5jb250YWluZXJFbCkge1xyXG5cdFx0XHRcdFx0XHRcdC8vIFNldHRpbmdzIHRhYiBoYXMgYmVlbiBkaXNwbGF5ZWQgLSByZWZyZXNoIGl0IHRvIHNob3cgbWlncmF0ZWQgdHlwZXNcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnNldHRpbmdzVGFiLmRpc3BsYXkoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHQvLyBJZiBjb250YWluZXIgZG9lc24ndCBleGlzdCwgc2V0dGluZ3MgdGFiIGhhc24ndCBiZWVuIG9wZW5lZCB5ZXRcclxuXHRcdFx0XHRcdFx0Ly8gSXQgd2lsbCBzaG93IG1pZ3JhdGVkIHR5cGVzIHdoZW4gdXNlciBvcGVucyBpdCAoZGlzcGxheSgpIHJlYWRzIGZyZXNoIHNldHRpbmdzKVxyXG5cdFx0XHRcdFx0fSBjYXRjaCAoZSkge1xyXG5cdFx0XHRcdFx0XHQvLyBJZiByZWZyZXNoIGZhaWxzLCB0aGF0J3Mgb2theSAtIHNldHRpbmdzIHdpbGwgc2hvdyB3aGVuIHVzZXIgb3BlbnMgdGhlbVxyXG5cdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgcmVmcmVzaCBzZXR0aW5ncyB0YWIgYWZ0ZXIgbWlncmF0aW9uOlwiLCBlKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIDMwMCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuXHRcdC8vIEluaXRpYWxpemUgdXRpbGl0aWVzIGZpcnN0IChkb24ndCBibG9jayBvbiBtaWdyYXRpb24pXHJcblx0XHR0aGlzLmZpbGVPcHMgPSBuZXcgRmlsZU9wZXJhdGlvbnModGhpcy5hcHAsIHRoaXMuc2V0dGluZ3MsIHRoaXMgYXMgdW5rbm93biBhcyBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlICYgeyBwbHVnaW5DcmVhdGVkRmlsZXM/OiBTZXQ8c3RyaW5nPiB9KTtcclxuXHRcdHRoaXMudGVtcGxhdGVQYXJzZXIgPSBuZXcgVGVtcGxhdGVQYXJzZXIodGhpcy5hcHAsIHRoaXMuc2V0dGluZ3MpO1xyXG5cdFx0dGhpcy5oZWFkaW5nTGlua0dlbmVyYXRvciA9IG5ldyBIZWFkaW5nTGlua0dlbmVyYXRvcih0aGlzLnNldHRpbmdzKTtcclxuXHJcblx0XHQvLyBSZWdpc3RlciBNRFggZmlsZSB2aXNpYmlsaXR5IGlmIGVuYWJsZWRcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLnNob3dNZHhGaWxlc0luRXhwbG9yZXIpIHtcclxuXHRcdFx0dGhpcy5yZWdpc3RlckV4dGVuc2lvbnMoW1wibWR4XCJdLCBcIm1hcmtkb3duXCIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFdhaXQgZm9yIHRoZSB2YXVsdCB0byBiZSBmdWxseSBsb2FkZWQgYmVmb3JlIHJlZ2lzdGVyaW5nIHRoZSBjcmVhdGUgZXZlbnRcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcclxuXHRcdFx0dGhpcy5yZWdpc3RlckNyZWF0ZUV2ZW50KCk7XHJcblx0XHRcdC8vIEluaXRpYWxpemUgaGVscCBidXR0b24gcmVwbGFjZW1lbnQgKGRlc2t0b3Agb25seSlcclxuXHRcdFx0aWYgKCFQbGF0Zm9ybS5pc01vYmlsZSkge1xyXG5cdFx0XHRcdHZvaWQgdGhpcy51cGRhdGVIZWxwQnV0dG9uKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFJ1biBtaWdyYXRpb24gYWZ0ZXIgcGx1Z2luIGlzIGZ1bGx5IGxvYWRlZCAobm9uLWJsb2NraW5nKVxyXG5cdFx0XHQvLyBUaGlzIHByZXZlbnRzIHRoZSBtb2RhbCBmcm9tIGJsb2NraW5nIHBsdWdpbiBpbml0aWFsaXphdGlvblxyXG5cdFx0XHR2b2lkIHRoaXMubWlncmF0ZVNldHRpbmdzSWZOZWVkZWQoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFJlZ2lzdGVyIGNvbW1hbmRzXHJcblx0XHRyZWdpc3RlckNvbW1hbmRzKHRoaXMsIHRoaXMuc2V0dGluZ3MpO1xyXG5cdFx0XHJcblx0XHQvLyBSZWdpc3RlciBjb250ZW50IHR5cGUgY29tbWFuZHNcclxuXHRcdHJlZ2lzdGVyQ29udGVudFR5cGVDb21tYW5kcyh0aGlzLCB0aGlzLnNldHRpbmdzKTtcclxuXHJcblx0XHQvLyBBZGQgc2V0dGluZ3MgdGFiIGFuZCBzdG9yZSByZWZlcmVuY2UgZm9yIHJlZnJlc2ggYWZ0ZXIgbWlncmF0aW9uXHJcblx0XHR0aGlzLnNldHRpbmdzVGFiID0gbmV3IEFzdHJvQ29tcG9zZXJTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKTtcclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYih0aGlzLnNldHRpbmdzVGFiKTtcclxuXHJcblx0XHQvLyBSZWdpc3RlciBjb250ZXh0IG1lbnUgZm9yIGNvcHkgaGVhZGluZyBsaW5rc1xyXG5cdFx0dGhpcy5yZWdpc3RlckNvbnRleHRNZW51KCk7XHJcblxyXG5cdFx0Ly8gUmVnaXN0ZXIgcmliYm9uIGljb25zIGlmIGVuYWJsZWRcclxuXHRcdHRoaXMucmVnaXN0ZXJSaWJib25JY29ucygpO1xyXG5cdFx0XHJcblx0XHQvLyBTZXR1cCByaWJib24gY29udGV4dCBtZW51IGhhbmRsaW5nXHJcblx0XHR0aGlzLnNldHVwUmliYm9uQ29udGV4dE1lbnVIYW5kbGluZygpO1xyXG5cdH1cclxuXHJcblxyXG5cdHB1YmxpYyByZWdpc3RlckNyZWF0ZUV2ZW50KCkge1xyXG5cdFx0aWYgKHRoaXMuY3JlYXRlRXZlbnRSZWYpIHtcclxuXHRcdFx0dGhpcy5hcHAudmF1bHQub2ZmcmVmKHRoaXMuY3JlYXRlRXZlbnRSZWYpO1xyXG5cdFx0XHR0aGlzLmNyZWF0ZUV2ZW50UmVmID0gdW5kZWZpbmVkO1xyXG5cdFx0fVxyXG5cdFx0Ly8gQWx3YXlzIHJlZ2lzdGVyIHRoZSBldmVudCBsaXN0ZW5lciwgYnV0IGNoZWNrIGVuYWJsZWQgY29udGVudCB0eXBlcyBkeW5hbWljYWxseVxyXG5cdFx0Ly8gVGhpcyBlbnN1cmVzIGF1dG9tYXRpb24gd29ya3MgZXZlbiBpZiBjb250ZW50IHR5cGVzIGFyZSBlbmFibGVkIGFmdGVyIHBsdWdpbiBsb2FkXHJcblx0XHRcclxuXHRcdC8vIERlYm91bmNlIHRvIHByZXZlbnQgbXVsdGlwbGUgbW9kYWxzIGZyb20gcmFwaWQgZmlsZSBjcmVhdGlvbnNcclxuXHRcdC8vIFVzZSBhIE1hcCB0byB0cmFjayBwZXItZmlsZSBkZWJvdW5jaW5nIGluc3RlYWQgb2YgZ2xvYmFsIGRlYm91bmNpbmdcclxuXHRcdGNvbnN0IGxhc3RQcm9jZXNzZWRGaWxlcyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XHJcblxyXG5cdFx0dGhpcy5jcmVhdGVFdmVudCA9IChmaWxlOiBURmlsZSkgPT4ge1xyXG5cdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcblxyXG5cdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIChmaWxlLmV4dGVuc2lvbiA9PT0gXCJtZFwiIHx8IGZpbGUuZXh0ZW5zaW9uID09PSBcIm1keFwiKSkge1xyXG5cdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gZmlsZS5wYXRoO1xyXG5cclxuXHRcdFx0XHQvLyBTa2lwIGlmIHRoaXMgZmlsZSB3YXMgY3JlYXRlZCBieSB0aGUgcGx1Z2luIGl0c2VsZlxyXG5cdFx0XHRcdC8vIERvbid0IGRlbGV0ZSBpbW1lZGlhdGVseSAtIGtlZXAgaXQgZm9yIGEgYml0IHRvIGhhbmRsZSByYXBpZCBldmVudHNcclxuXHRcdFx0XHRpZiAodGhpcy5wbHVnaW5DcmVhdGVkRmlsZXMuaGFzKGZpbGVQYXRoKSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gUGVyLWZpbGUgZGVib3VuY2UgY2hlY2sgLSBidXQgb25seSBjaGVjaywgZG9uJ3QgbWFyayB5ZXRcclxuXHRcdFx0XHQvLyBXZSdsbCBtYXJrIGl0IGFzIHByb2Nlc3NlZCBvbmx5IEFGVEVSIHdlIHN1Y2Nlc3NmdWxseSBzaG93IHRoZSBtb2RhbFxyXG5cdFx0XHRcdC8vIEhvd2V2ZXIsIGlmIHRoZSBmaWxlIHdhcyBwcm9jZXNzZWQgbW9yZSB0aGFuIDIgc2Vjb25kcyBhZ28sIGNsZWFyIGl0IHRvIGFsbG93IG5ldyBwcm9jZXNzaW5nXHJcblx0XHRcdFx0Y29uc3QgbGFzdFByb2Nlc3NlZCA9IGxhc3RQcm9jZXNzZWRGaWxlcy5nZXQoZmlsZVBhdGgpIHx8IDA7XHJcblx0XHRcdFx0aWYgKGxhc3RQcm9jZXNzZWQgPiAwICYmIG5vdyAtIGxhc3RQcm9jZXNzZWQgPCBDT05TVEFOVFMuREVCT1VOQ0VfTVMpIHtcclxuXHRcdFx0XHRcdHJldHVybjsgLy8gU2tpcCBpZiB0aGlzIHNwZWNpZmljIGZpbGUgd2FzIGp1c3QgcHJvY2Vzc2VkXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIENsZWFuIHVwIG9sZCBlbnRyaWVzIChvbGRlciB0aGFuIDIgc2Vjb25kcylcclxuXHRcdFx0XHRpZiAobGFzdFByb2Nlc3NlZCA+IDAgJiYgbm93IC0gbGFzdFByb2Nlc3NlZCA+IDIwMDApIHtcclxuXHRcdFx0XHRcdGxhc3RQcm9jZXNzZWRGaWxlcy5kZWxldGUoZmlsZVBhdGgpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gQ1JJVElDQUw6IFJlbG9hZCBzZXR0aW5ncyBmcm9tIGRpc2sgdG8gZW5zdXJlIHdlIGhhdmUgdGhlIGxhdGVzdCBkYXRhXHJcblx0XHRcdFx0Ly8gVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBvdGhlciBwbHVnaW5zIG1pZ2h0IGhhdmUgbW9kaWZpZWQgZGF0YS5qc29uXHJcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHJcblx0XHRcdFx0Ly8gQ1JJVElDQUw6IENoZWNrIGlmIGFueSBjb250ZW50IHR5cGVzIGFyZSBlbmFibGVkIEFGVEVSIHJlbG9hZGluZyBzZXR0aW5nc1xyXG5cdFx0XHRcdC8vIFRoaXMgZW5zdXJlcyBhdXRvbWF0aW9uIHdvcmtzIHdoZW4gY29udGVudCB0eXBlcyBhcmUgZW5hYmxlZCBieSBhbm90aGVyIHBsdWdpblxyXG5cdFx0XHRcdGNvbnN0IGNvbnRlbnRUeXBlcyA9IHRoaXMuc2V0dGluZ3MuY29udGVudFR5cGVzIHx8IFtdO1xyXG5cdFx0XHRcdGNvbnN0IGhhc0VuYWJsZWRDb250ZW50VHlwZXMgPSBjb250ZW50VHlwZXMuc29tZShjdCA9PiBjdC5lbmFibGVkKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBJZiBubyBjb250ZW50IHR5cGVzIGFyZSBlbmFibGVkLCBza2lwIHByb2Nlc3NpbmdcclxuXHRcdFx0XHRpZiAoIWhhc0VuYWJsZWRDb250ZW50VHlwZXMpIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIEZpbmQgbWF0Y2hpbmcgY29udGVudCB0eXBlIHVzaW5nIHBhdHRlcm4gc3BlY2lmaWNpdHkgKG1vc3Qgc3BlY2lmaWMgd2lucylcclxuXHRcdFx0XHRcdC8vIFNvcnQgYnkgcGF0dGVybiBzcGVjaWZpY2l0eSBzbyBtb3JlIHNwZWNpZmljIHBhdHRlcm5zIGFyZSBjaGVja2VkIGZpcnN0XHJcblx0XHRcdFx0XHRjb25zdCBzb3J0ZWRDb250ZW50VHlwZXMgPSBzb3J0QnlQYXR0ZXJuU3BlY2lmaWNpdHkoY29udGVudFR5cGVzKTtcclxuXHRcdFx0XHRcdGxldCBtYXRjaGVkQ29udGVudFR5cGVJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcblx0XHRcdFx0XHRjb25zdCBtYXRjaGluZ1R5cGVzOiBDb250ZW50VHlwZVtdID0gW107IC8vIFRyYWNrIGFsbCBtYXRjaGluZyB0eXBlcyBmb3IgY29uZmxpY3QgZGV0ZWN0aW9uXHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGZvciAoY29uc3QgY29udGVudFR5cGUgb2Ygc29ydGVkQ29udGVudFR5cGVzKSB7XHJcblx0XHRcdFx0XHRcdGlmICghY29udGVudFR5cGUuZW5hYmxlZCkgY29udGludWU7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRsZXQgbWF0Y2hlcyA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGJsYW5rIGZvbGRlciAocm9vdCkgLSBtYXRjaGVzIGZpbGVzIGluIHZhdWx0IHJvb3Qgb25seVxyXG5cdFx0XHRcdFx0XHRpZiAoIWNvbnRlbnRUeXBlLmZvbGRlciB8fCBjb250ZW50VHlwZS5mb2xkZXIudHJpbSgpID09PSBcIlwiKSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCFmaWxlUGF0aC5pbmNsdWRlcyhcIi9cIikgfHwgZmlsZVBhdGguc3BsaXQoXCIvXCIpLmxlbmd0aCA9PT0gMSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0bWF0Y2hlcyA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG1hdGNoZXNGb2xkZXJQYXR0ZXJuKGZpbGVQYXRoLCBjb250ZW50VHlwZS5mb2xkZXIpKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgaWdub3JlIHN1YmZvbGRlcnMgaXMgZW5hYmxlZFxyXG5cdFx0XHRcdFx0XHRcdGlmIChjb250ZW50VHlwZS5pZ25vcmVTdWJmb2xkZXJzKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBwYXRoU2VnbWVudHMgPSBmaWxlUGF0aC5zcGxpdChcIi9cIik7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBwYXRoRGVwdGggPSBwYXRoU2VnbWVudHMubGVuZ3RoO1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgcGF0dGVyblNlZ21lbnRzID0gY29udGVudFR5cGUuZm9sZGVyLnNwbGl0KFwiL1wiKTtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGV4cGVjdGVkRGVwdGggPSBwYXR0ZXJuU2VnbWVudHMubGVuZ3RoO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoY29udGVudFR5cGUuY3JlYXRpb25Nb2RlID09PSBcImZvbGRlclwiKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEZvciBmb2xkZXItYmFzZWQgY3JlYXRpb24sIGZpbGVzIGFyZSBvbmUgbGV2ZWwgZGVlcGVyIChlLmcuLCB0ZXN0L215LWZpbGUvaW5kZXgubWQpXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFNvIHdlIG5lZWQgdG8gYWxsb3cgb25lIGV4dHJhIGxldmVsIGJleW9uZCB0aGUgcGF0dGVybiBkZXB0aFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBmb2xkZXJEZXB0aCA9IHBhdGhEZXB0aCAtIDE7IC8vIFN1YnRyYWN0IDEgZm9yIHRoZSBpbmRleC5tZCBmaWxlXHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChmb2xkZXJEZXB0aCA9PT0gZXhwZWN0ZWREZXB0aCB8fCBmb2xkZXJEZXB0aCA9PT0gZXhwZWN0ZWREZXB0aCArIDEpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRtYXRjaGVzID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gRm9yIGZpbGUtYmFzZWQgY3JlYXRpb24sIGZpbGVzIGFyZSBhdCB0aGUgc2FtZSBkZXB0aCBhcyB0aGUgcGF0dGVyblxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAocGF0aERlcHRoID09PSBleHBlY3RlZERlcHRoKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0bWF0Y2hlcyA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0bWF0Y2hlcyA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpZiAobWF0Y2hlcykge1xyXG5cdFx0XHRcdFx0XHRcdG1hdGNoaW5nVHlwZXMucHVzaChjb250ZW50VHlwZSk7XHJcblx0XHRcdFx0XHRcdFx0Ly8gVXNlIHRoZSBmaXJzdCBtYXRjaGluZyB0eXBlIChtb3N0IHNwZWNpZmljIGR1ZSB0byBzb3J0aW5nKVxyXG5cdFx0XHRcdFx0XHRcdGlmICghbWF0Y2hlZENvbnRlbnRUeXBlSWQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdG1hdGNoZWRDb250ZW50VHlwZUlkID0gY29udGVudFR5cGUuaWQ7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFNob3cgY29uZmxpY3Qgd2FybmluZyBpZiBtdWx0aXBsZSBjb250ZW50IHR5cGVzIG1hdGNoXHJcblx0XHRcdFx0XHRpZiAobWF0Y2hpbmdUeXBlcy5sZW5ndGggPiAxKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHR5cGVOYW1lcyA9IG1hdGNoaW5nVHlwZXMubWFwKGN0ID0+IGN0Lm5hbWUgfHwgXCJVbm5hbWVkXCIpLmpvaW4oXCIsIFwiKTtcclxuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgTXVsdGlwbGUgY29udGVudCB0eXBlcyAoJHt0eXBlTmFtZXN9KSBtYXRjaCB0aGlzIGZpbGUuIFVzaW5nIG1vc3Qgc3BlY2lmaWM6ICR7bWF0Y2hpbmdUeXBlc1swXS5uYW1lIHx8IFwiVW5uYW1lZFwifWApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIElmIG5vIGNvbnRlbnQgdHlwZSBtYXRjaGVzLCBza2lwIGVudGlyZWx5XHJcblx0XHRcdFx0XHRpZiAoIW1hdGNoZWRDb250ZW50VHlwZUlkKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBDaGVjayBpZiBmaWxlIGlzIG5ld2x5IGNyZWF0ZWQgYnkgdXNlciAocmVjZW50IGNyZWF0aW9uIHRpbWUpXHJcblx0XHRcdFx0XHRjb25zdCBzdGF0ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5zdGF0KGZpbGUucGF0aCk7XHJcblx0XHRcdFx0XHRjb25zdCBpc05ld05vdGUgPSBzdGF0Py5tdGltZSAmJiAobm93IC0gc3RhdC5tdGltZSA8IENPTlNUQU5UUy5TVEFUX01USU1FX1RIUkVTSE9MRCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gU2tpcCBpZiBub3QgYSB1c2VyLWluaXRpYXRlZCBuZXcgbm90ZVxyXG5cdFx0XHRcdFx0aWYgKCFpc05ld05vdGUpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIFdhaXQgYSBtb21lbnQgZm9yIHRoZSBmaWxlIHRvIGJlIGZ1bGx5IHdyaXR0ZW5cclxuXHRcdFx0XHRcdC8vIFRoaXMgaGVscHMgYXZvaWQgcmFjZSBjb25kaXRpb25zIHdoZXJlIHdlIHJlYWQgYmVmb3JlIE9ic2lkaWFuIGZpbmlzaGVzIHdyaXRpbmdcclxuXHRcdFx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MCkpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBSZWFkIGZpbGUgY29udGVudCBkaXJlY3RseSBmb3IgbW9yZSByZWxpYWJsZSBkZXRlY3Rpb25cclxuXHRcdFx0XHRcdC8vIChtZXRhZGF0YSBjYWNoZSBtaWdodCBub3QgYmUgcmVhZHkgeWV0LCBlc3BlY2lhbGx5IGZvciBNRFggZmlsZXMpXHJcblx0XHRcdFx0XHRsZXQgY29udGVudDogc3RyaW5nO1xyXG5cdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0Y29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcblx0XHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgcmVhZGluZyBmaWxlIGZvciBjcmVhdGUgZGV0ZWN0aW9uOlwiLCBlcnJvcik7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gU2tpcCBpZiBmaWxlIGFscmVhZHkgaGFzIHN1YnN0YW50aWFsIGNvbnRlbnQgb3IgZnJvbnRtYXR0ZXJcclxuXHRcdFx0XHRcdGlmIChjb250ZW50LnRyaW0oKS5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIGl0IGhhcyBmcm9udG1hdHRlciBjcmVhdGVkIGJ5IGFub3RoZXIgcGx1Z2luXHJcblx0XHRcdFx0XHRcdGlmIChjb250ZW50LnN0YXJ0c1dpdGgoJy0tLScpKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXJFbmQgPSBjb250ZW50LmluZGV4T2YoJ1xcbi0tLScsIDMpO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChmcm9udG1hdHRlckVuZCAhPT0gLTEpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGZyb250bWF0dGVyVGV4dCA9IGNvbnRlbnQuc2xpY2UoNCwgZnJvbnRtYXR0ZXJFbmQpLnRyaW0oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGxpbmVzID0gZnJvbnRtYXR0ZXJUZXh0LnNwbGl0KCdcXG4nKS5maWx0ZXIobGluZSA9PiBsaW5lLnRyaW0oKS5sZW5ndGggPiAwKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIElmIGl0IGhhcyBtb3JlIHRoYW4ganVzdCBhIHRpdGxlIGxpbmUsIHNraXBcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChsaW5lcy5sZW5ndGggPiAxIHx8IChsaW5lcy5sZW5ndGggPT09IDEgJiYgIWxpbmVzWzBdLnN0YXJ0c1dpdGgoJ3RpdGxlOicpKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdC8vIElmIGl0IGhhcyBib2R5IGNvbnRlbnQgKGFmdGVyIGZyb250bWF0dGVyKSwgc2tpcFxyXG5cdFx0XHRcdFx0XHRjb25zdCBjb250ZW50V2l0aG91dEZyb250bWF0dGVyID0gY29udGVudC5zdGFydHNXaXRoKCctLS0nKSBcclxuXHRcdFx0XHRcdFx0XHQ/IGNvbnRlbnQuc2xpY2UoY29udGVudC5pbmRleE9mKCdcXG4tLS0nLCAzKSArIDQpLnRyaW0oKVxyXG5cdFx0XHRcdFx0XHRcdDogY29udGVudC50cmltKCk7XHJcblx0XHRcdFx0XHRcdGlmIChjb250ZW50V2l0aG91dEZyb250bWF0dGVyLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBNYXJrIHRoZSBvcmlnaW5hbCBmaWxlIGFzIGhhbmRsZWQgSU1NRURJQVRFTFkgdG8gcHJldmVudCBpdCBmcm9tIHRyaWdnZXJpbmcgdGhlIGNyZWF0ZSBldmVudCBhZ2FpblxyXG5cdFx0XHRcdFx0Ly8gVGhpcyBtdXN0IGhhcHBlbiBiZWZvcmUgd2Ugc2hvdyB0aGUgbW9kYWwsIGFzIHRoZSBtb2RhbCB3aWxsIHJlbmFtZSB0aGUgZmlsZVxyXG5cdFx0XHRcdFx0Ly8gS2VlcCBpdCBpbiB0aGUgc2V0IGZvciBhIHdoaWxlIHRvIGhhbmRsZSBhbnkgZGVsYXllZCBldmVudHNcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luQ3JlYXRlZEZpbGVzLmFkZChmaWxlLnBhdGgpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBDbGVhbiB1cCBhZnRlciBhIGRlbGF5IHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzXHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW5DcmVhdGVkRmlsZXMuZGVsZXRlKGZpbGUucGF0aCk7XHJcblx0XHRcdFx0XHR9LCAyMDAwKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gTWFyayBhcyBwcm9jZXNzZWQgaW4gZGVib3VuY2UgbWFwIE9OTFkgYWZ0ZXIgd2UndmUgY29uZmlybWVkIHdlJ2xsIHNob3cgdGhlIG1vZGFsXHJcblx0XHRcdFx0XHQvLyBUaGlzIHByZXZlbnRzIG1hcmtpbmcgZmlsZXMgdGhhdCB3ZSBza2lwIGR1ZSB0byBlYXJseSByZXR1cm5zXHJcblx0XHRcdFx0XHQvLyBVc2UgYSBzaG9ydGVyIGRlYm91bmNlIHRpbWUgZm9yIENUUkwrTiAodXNlci1pbml0aWF0ZWQpIHZzIGF1dG9tYXRpYyBjcmVhdGlvblxyXG5cdFx0XHRcdFx0bGFzdFByb2Nlc3NlZEZpbGVzLnNldChmaWxlLnBhdGgsIG5vdyk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIENsZWFyIHRoZSBkZWJvdW5jZSBlbnRyeSBhZnRlciBwcm9jZXNzaW5nIGNvbXBsZXRlcyAod2hlbiBtb2RhbCBjbG9zZXMpXHJcblx0XHRcdFx0XHQvLyBUaGlzIGFsbG93cyB0aGUgbmV4dCBDVFJMK04gdG8gd29yayBpbW1lZGlhdGVseVxyXG5cdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGxhc3RQcm9jZXNzZWRGaWxlcy5kZWxldGUoZmlsZS5wYXRoKTtcclxuXHRcdFx0XHRcdH0sIENPTlNUQU5UUy5ERUJPVU5DRV9NUyArIDEwMCk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIENsZWFuIHVwIG9sZCBlbnRyaWVzIHRvIHByZXZlbnQgbWVtb3J5IGxlYWtcclxuXHRcdFx0XHRcdGlmIChsYXN0UHJvY2Vzc2VkRmlsZXMuc2l6ZSA+IDEwMCkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBjdXRvZmYgPSBub3cgLSBDT05TVEFOVFMuREVCT1VOQ0VfTVMgKiAyO1xyXG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IFtwYXRoLCB0aW1lXSBvZiBsYXN0UHJvY2Vzc2VkRmlsZXMuZW50cmllcygpKSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKHRpbWUgPCBjdXRvZmYpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGxhc3RQcm9jZXNzZWRGaWxlcy5kZWxldGUocGF0aCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFNob3cgdGhlIG1vZGFsIHdpdGggdGhlIG1hdGNoZWQgY29udGVudCB0eXBlXHJcblx0XHRcdFx0XHRuZXcgVGl0bGVNb2RhbCh0aGlzLmFwcCwgZmlsZSwgdGhpcywgbWF0Y2hlZENvbnRlbnRUeXBlSWQsIGZhbHNlLCB0cnVlKS5vcGVuKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pKCk7XHJcblx0XHRcdH07XHJcblx0XHRcclxuXHRcdC8vIEFsd2F5cyByZWdpc3RlciB0aGUgZXZlbnQgbGlzdGVuZXIgLSBpdCB3aWxsIGNoZWNrIGVuYWJsZWQgY29udGVudCB0eXBlcyBkeW5hbWljYWxseVxyXG5cdFx0Ly8gVXNlIHZhdWx0LmNyZWF0ZSBldmVudCB0byBkZXRlY3QgbmV3IGZpbGUgY3JlYXRpb25cclxuXHRcdGNvbnN0IGNyZWF0ZUV2ZW50UmVmID0gdGhpcy5hcHAudmF1bHQub24oXCJjcmVhdGVcIiwgKGZpbGUpID0+IHtcclxuXHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdC8vIEFsd2F5cyBjYWxsIGNyZWF0ZUV2ZW50IC0gaXQgd2lsbCBjaGVjayBmb3IgZW5hYmxlZCBjb250ZW50IHR5cGVzIGFmdGVyIHJlbG9hZGluZyBzZXR0aW5nc1xyXG5cdFx0XHRcdHRoaXMuY3JlYXRlRXZlbnQoZmlsZSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KGNyZWF0ZUV2ZW50UmVmKTtcclxuXHRcdHRoaXMuY3JlYXRlRXZlbnRSZWYgPSBjcmVhdGVFdmVudFJlZjtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuXHRcdGNvbnN0IGxvYWRlZERhdGEgPSAoYXdhaXQgdGhpcy5sb2FkRGF0YSgpKSBhcyB1bmtub3duO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGxvYWRlZERhdGEgYXMgUGFydGlhbDxBc3Ryb0NvbXBvc2VyU2V0dGluZ3M+IHwgbnVsbCB8IHVuZGVmaW5lZCk7XHJcblx0XHRcclxuXHRcdC8vIEVuc3VyZSBjb250ZW50VHlwZXMgaXMgYWx3YXlzIGFuIGFycmF5IChuZXZlciB1bmRlZmluZWQgb3IgbnVsbClcclxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5jb250ZW50VHlwZXMgfHwgIUFycmF5LmlzQXJyYXkodGhpcy5zZXR0aW5ncy5jb250ZW50VHlwZXMpKSB7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MuY29udGVudFR5cGVzID0gW107XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIENSSVRJQ0FMOiBPbmx5IG1pZ3JhdGUgbGVnYWN5IGN1c3RvbUNvbnRlbnRUeXBlcyB0byBjb250ZW50VHlwZXMgaWYgbWlncmF0aW9uIGhhc24ndCBjb21wbGV0ZWQgeWV0XHJcblx0XHQvLyBBZnRlciBtaWdyYXRpb24sIGFsbCBsZWdhY3kgZmllbGRzIHNob3VsZCBiZSBkZWxldGVkIGFuZCB3ZSBzaG91bGQgbmV2ZXIgcmVzdG9yZSB0aGVtXHJcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3MubWlncmF0aW9uQ29tcGxldGVkKSB7XHJcblx0XHRcdC8vIE1pZ3JhdGUgbGVnYWN5IGN1c3RvbUNvbnRlbnRUeXBlcyB0byBjb250ZW50VHlwZXMgaWYgbmVlZGVkIChiZWZvcmUgbWlncmF0aW9uIHJ1bnMpXHJcblx0XHRcdC8vIENoZWNrIGlmIGNvbnRlbnRUeXBlcyBpcyBlbXB0eS91bmRlZmluZWQgYW5kIGN1c3RvbUNvbnRlbnRUeXBlcyBleGlzdHNcclxuXHRcdFx0Y29uc3QgbGVnYWN5U2V0dGluZ3MgPSB0aGlzLnNldHRpbmdzIGFzIHVua25vd24gYXMgeyBjdXN0b21Db250ZW50VHlwZXM/OiBDb250ZW50VHlwZVtdIH07XHJcblx0XHRcdGNvbnN0IGhhc0xlZ2FjeVR5cGVzID0gbGVnYWN5U2V0dGluZ3MuY3VzdG9tQ29udGVudFR5cGVzICYmIEFycmF5LmlzQXJyYXkobGVnYWN5U2V0dGluZ3MuY3VzdG9tQ29udGVudFR5cGVzKSAmJiBsZWdhY3lTZXR0aW5ncy5jdXN0b21Db250ZW50VHlwZXMubGVuZ3RoID4gMDtcclxuXHRcdFx0Y29uc3QgaGFzTmV3VHlwZXMgPSB0aGlzLnNldHRpbmdzLmNvbnRlbnRUeXBlcyAmJiBBcnJheS5pc0FycmF5KHRoaXMuc2V0dGluZ3MuY29udGVudFR5cGVzKSAmJiB0aGlzLnNldHRpbmdzLmNvbnRlbnRUeXBlcy5sZW5ndGggPiAwO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGhhc0xlZ2FjeVR5cGVzICYmICFoYXNOZXdUeXBlcykge1xyXG5cdFx0XHRcdC8vIFByZXNlcnZlIGV4aXN0aW5nIGN1c3RvbSBjb250ZW50IHR5cGVzXHJcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5jb250ZW50VHlwZXMgPSBsZWdhY3lTZXR0aW5ncy5jdXN0b21Db250ZW50VHlwZXMgfHwgW107XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIEFmdGVyIG1pZ3JhdGlvbiwgY2xlYW4gdXAgQUxMIGxlZ2FjeSBmaWVsZHMgaWYgdGhleSBzdGlsbCBleGlzdFxyXG5cdFx0XHQvLyBUaGlzIGlzIGEgb25lLXRpbWUgY2xlYW51cCB0byByZW1vdmUgYW55IGxpbmdlcmluZyBsZWdhY3kgZGF0YSBmcm9tIGRpc2tcclxuXHRcdFx0Ly8gQ1JJVElDQUw6IEFsd2F5cyBkZWxldGUgY3VzdG9tQ29udGVudFR5cGVzIGFmdGVyIG1pZ3JhdGlvbiB0byBwcmV2ZW50IGRlbGV0ZWQgY29udGVudCB0eXBlcyBmcm9tIGJlaW5nIHJlc3RvcmVkXHJcblx0XHRcdGNvbnN0IGxlZ2FjeUZpZWxkcyA9IFtcclxuXHRcdFx0XHQnY3VzdG9tQ29udGVudFR5cGVzJywgLy8gT2xkIG5hbWUgZm9yIGNvbnRlbnRUeXBlcyAtIE1VU1QgYmUgcmVtb3ZlZCB0byBwcmV2ZW50IHJlc3RvcmluZyBkZWxldGVkIHR5cGVzXHJcblx0XHRcdFx0J2VuYWJsZVVuZGVyc2NvcmVQcmVmaXgnLFxyXG5cdFx0XHRcdCdwb3N0c0ZvbGRlcicsXHJcblx0XHRcdFx0J3Bvc3RzTGlua0Jhc2VQYXRoJyxcclxuXHRcdFx0XHQnYXV0b21hdGVQb3N0Q3JlYXRpb24nLFxyXG5cdFx0XHRcdCdjcmVhdGlvbk1vZGUnLFxyXG5cdFx0XHRcdCdpbmRleEZpbGVOYW1lJyxcclxuXHRcdFx0XHQnZXhjbHVkZWREaXJlY3RvcmllcycsXHJcblx0XHRcdFx0J29ubHlBdXRvbWF0ZUluUG9zdHNGb2xkZXInLFxyXG5cdFx0XHRcdCdlbmFibGVQYWdlcycsXHJcblx0XHRcdFx0J3BhZ2VzRm9sZGVyJyxcclxuXHRcdFx0XHQncGFnZXNMaW5rQmFzZVBhdGgnLFxyXG5cdFx0XHRcdCdwYWdlc0NyZWF0aW9uTW9kZScsXHJcblx0XHRcdFx0J3BhZ2VzSW5kZXhGaWxlTmFtZScsXHJcblx0XHRcdFx0J3BhZ2VUZW1wbGF0ZScsXHJcblx0XHRcdFx0J29ubHlBdXRvbWF0ZUluUGFnZXNGb2xkZXInLFxyXG5cdFx0XHRdO1xyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3Qgc2V0dGluZ3NSZWNvcmQgPSB0aGlzLnNldHRpbmdzIGFzIHVua25vd24gYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XHJcblx0XHRcdGZvciAoY29uc3QgZmllbGQgb2YgbGVnYWN5RmllbGRzKSB7XHJcblx0XHRcdFx0aWYgKHNldHRpbmdzUmVjb3JkW2ZpZWxkXSAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0XHRkZWxldGUgc2V0dGluZ3NSZWNvcmRbZmllbGRdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gU2F2ZSBpbW1lZGlhdGVseSB0byByZW1vdmUgYW55IGxlZ2FjeSBmaWVsZHMgZnJvbSBkaXNrXHJcblx0XHRcdC8vIFRoaXMgZW5zdXJlcyBkZWxldGVkIGNvbnRlbnQgdHlwZXMgZG9uJ3QgY29tZSBiYWNrIGZyb20gbGVnYWN5IGZpZWxkc1xyXG5cdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVnaXN0ZXJDb250ZXh0TWVudSgpIHtcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKCdlZGl0b3ItbWVudScsIChtZW51LCBlZGl0b3IsIHZpZXcpID0+IHtcclxuXHRcdFx0XHQvLyBPbmx5IHNob3cgbWVudSBpZiB0aGUgZmVhdHVyZSBpcyBlbmFibGVkXHJcblx0XHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZUNvcHlIZWFkaW5nTGluaykge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHRcdGNvbnN0IGZpbGUgPSB2aWV3LmZpbGU7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gRmluZCB0aGUgaGVhZGluZyBhdCB0aGUgY3VycmVudCBjdXJzb3IgcG9zaXRpb25cclxuXHRcdFx0XHRjb25zdCBoZWFkaW5nID0gdGhpcy5oZWFkaW5nTGlua0dlbmVyYXRvci5maW5kSGVhZGluZ0F0TGluZSh0aGlzLmFwcCwgZmlsZSwgY3Vyc29yLmxpbmUpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChoZWFkaW5nKSB7XHJcblx0XHRcdFx0XHRjb25zdCBmdWxsTGluayA9IHRoaXMuaGVhZGluZ0xpbmtHZW5lcmF0b3IuZ2VuZXJhdGVMaW5rKHRoaXMuYXBwLCBmaWxlLCBoZWFkaW5nKTtcclxuXHRcdFx0XHRcdGNvbnN0IHVybE9ubHkgPSB0aGlzLmhlYWRpbmdMaW5rR2VuZXJhdG9yLmV4dHJhY3RVcmwoZnVsbExpbmspO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBPcHRpb24gMTogQ29weSBVUkwgb25seSAoZm9yIENUUkwrSyB3b3JrZmxvdylcclxuXHRcdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRpdGVtXHJcblx0XHRcdFx0XHRcdFx0LnNldFRpdGxlKCdDb3B5IGhlYWRpbmcgbGluaycpXHJcblx0XHRcdFx0XHRcdFx0LnNldEljb24oJ2xpbmstMicpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodXJsT25seSk7XHJcblx0XHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKCdIZWFkaW5nIGxpbmsgY29waWVkIHRvIGNsaXBib2FyZCcpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIE9wdGlvbiAyOiBDb3B5IGZ1bGwgbGluayB3aXRoIHRleHQgKGZvciBzdGFuZGFsb25lIHBhc3RpbmcpXHJcblx0XHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdFx0aXRlbVxyXG5cdFx0XHRcdFx0XHRcdC5zZXRUaXRsZSgnQ29weSBoZWFkaW5nIGxpbmsgd2l0aCB0ZXh0JylcclxuXHRcdFx0XHRcdFx0XHQuc2V0SWNvbignaGVhZGluZycpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoZnVsbExpbmspO1xyXG5cdFx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZSgnSGVhZGluZyBsaW5rIHdpdGggdGV4dCBjb3BpZWQgdG8gY2xpcGJvYXJkJyk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVuYW1lIGEgZmlsZSBieSBwYXRoIChmb3IgcHJvZ3JhbW1hdGljIHVzZSwgZS5nLiwgZnJvbSBvdGhlciBwbHVnaW5zKVxyXG5cdCAqIFRoaXMgYWxsb3dzIHRoZSByZW5hbWUgbW9kYWwgdG8gYXBwZWFyIHdpdGhvdXQgb3BlbmluZyB0aGUgZmlsZSBmaXJzdFxyXG5cdCAqL1xyXG5cdHJlbmFtZUNvbnRlbnRCeVBhdGgoZmlsZVBhdGg6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0cmVuYW1lQ29udGVudEJ5UGF0aEZ1bmN0aW9uKHRoaXMuYXBwLCBmaWxlUGF0aCwgdGhpcy5zZXR0aW5ncywgdGhpcyk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgcmVnaXN0ZXJSaWJib25JY29ucygpIHtcclxuXHRcdC8vIFRlcm1pbmFsIGFuZCBjb25maWcgZmVhdHVyZXMgYXJlIGRlc2t0b3Atb25seSAobm90IGF2YWlsYWJsZSBvbiBtb2JpbGUpXHJcblx0XHRpZiAoUGxhdGZvcm0uaXNNb2JpbGUpIHtcclxuXHRcdFx0Ly8gUmVtb3ZlIGFueSBleGlzdGluZyBpY29ucyBvbiBtb2JpbGVcclxuXHRcdFx0aWYgKHRoaXMudGVybWluYWxSaWJib25JY29uKSB7XHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnRlcm1pbmFsUmliYm9uSWNvbi5wYXJlbnROb2RlKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMudGVybWluYWxSaWJib25JY29uLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0Ly8gU2lsZW50bHkgaGFuZGxlIGVycm9yc1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0aGlzLnRlcm1pbmFsUmliYm9uSWNvbiA9IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHRoaXMuY29uZmlnUmliYm9uSWNvbikge1xyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRpZiAodGhpcy5jb25maWdSaWJib25JY29uLnBhcmVudE5vZGUpIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5jb25maWdSaWJib25JY29uLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0Ly8gU2lsZW50bHkgaGFuZGxlIGVycm9yc1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0aGlzLmNvbmZpZ1JpYmJvbkljb24gPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIFJlbW92ZSBmcm9tIERPTVxyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGNvbnN0IHRlcm1pbmFsSWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZS1kb2NrLXJpYmJvbi1hY3Rpb25bYXJpYS1sYWJlbD1cIk9wZW4gcHJvamVjdCB0ZXJtaW5hbFwiXScpO1xyXG5cdFx0XHRcdHRlcm1pbmFsSWNvbnMuZm9yRWFjaCgoaWNvbjogRWxlbWVudCkgPT4gaWNvbi5yZW1vdmUoKSk7XHJcblx0XHRcdFx0Y29uc3QgY29uZmlnSWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZS1kb2NrLXJpYmJvbi1hY3Rpb25bYXJpYS1sYWJlbD1cIkVkaXQgYXN0cm8gY29uZmlnXCJdJyk7XHJcblx0XHRcdFx0Y29uZmlnSWNvbnMuZm9yRWFjaCgoaWNvbjogRWxlbWVudCkgPT4gaWNvbi5yZW1vdmUoKSk7XHJcblx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdC8vIFNpbGVudGx5IGhhbmRsZSBlcnJvcnNcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm47IC8vIERvbid0IHJlZ2lzdGVyIGljb25zIG9uIG1vYmlsZVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENhbGN1bGF0ZSB3aGF0IHNob3VsZCBleGlzdCBGSVJTVCAoYmVmb3JlIERPTSBzZWFyY2gpXHJcblx0XHRjb25zdCB0ZXJtaW5hbFJpYmJvbkVuYWJsZWQgPSB0aGlzLnNldHRpbmdzLmVuYWJsZVRlcm1pbmFsUmliYm9uSWNvbiA9PT0gdHJ1ZTtcclxuXHRcdGNvbnN0IHRlcm1pbmFsQ29tbWFuZEVuYWJsZWQgPSB0aGlzLnNldHRpbmdzLmVuYWJsZU9wZW5UZXJtaW5hbENvbW1hbmQgPT09IHRydWU7XHJcblx0XHRjb25zdCB0ZXJtaW5hbFNob3VsZEV4aXN0ID0gdGVybWluYWxSaWJib25FbmFibGVkICYmIHRlcm1pbmFsQ29tbWFuZEVuYWJsZWQ7XHJcblxyXG5cdFx0Y29uc3QgY29uZmlnUmliYm9uRW5hYmxlZCA9IHRoaXMuc2V0dGluZ3MuZW5hYmxlQ29uZmlnUmliYm9uSWNvbiA9PT0gdHJ1ZTtcclxuXHRcdGNvbnN0IGNvbmZpZ0NvbW1hbmRFbmFibGVkID0gdGhpcy5zZXR0aW5ncy5lbmFibGVPcGVuQ29uZmlnRmlsZUNvbW1hbmQgPT09IHRydWU7XHJcblx0XHRjb25zdCBjb25maWdTaG91bGRFeGlzdCA9IGNvbmZpZ1JpYmJvbkVuYWJsZWQgJiYgY29uZmlnQ29tbWFuZEVuYWJsZWQ7XHJcblxyXG5cdFx0Ly8gQUxXQVlTIHJlbW92ZSBhbGwgaWNvbnMgZmlyc3QsIHJlZ2FyZGxlc3Mgb2Ygc3RhdGUgLSB0aGlzIGVuc3VyZXMgY2xlYW4gc2xhdGVcclxuXHRcdC8vIFJlbW92ZSBmcm9tIG91ciByZWZlcmVuY2VzIGZpcnN0XHJcblx0XHRpZiAodGhpcy50ZXJtaW5hbFJpYmJvbkljb24pIHtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRpZiAodGhpcy50ZXJtaW5hbFJpYmJvbkljb24ucGFyZW50Tm9kZSkge1xyXG5cdFx0XHRcdFx0dGhpcy50ZXJtaW5hbFJpYmJvbkljb24ucmVtb3ZlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHQvLyBTaWxlbnRseSBoYW5kbGUgZXJyb3JzXHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy50ZXJtaW5hbFJpYmJvbkljb24gPSBudWxsO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAodGhpcy5jb25maWdSaWJib25JY29uKSB7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0aWYgKHRoaXMuY29uZmlnUmliYm9uSWNvbi5wYXJlbnROb2RlKSB7XHJcblx0XHRcdFx0XHR0aGlzLmNvbmZpZ1JpYmJvbkljb24ucmVtb3ZlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHQvLyBTaWxlbnRseSBoYW5kbGUgZXJyb3JzXHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5jb25maWdSaWJib25JY29uID0gbnVsbDtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gU2VhcmNoIERPTSBhbmQgcmVtb3ZlIEFMTCBpbnN0YW5jZXMgb2Ygb3VyIGljb25zIChieSBhcmlhLWxhYmVsKVxyXG5cdFx0Ly8gVGhpcyBjYXRjaGVzIGFueSBpY29ucyB0aGF0IG1pZ2h0IGV4aXN0IGJ1dCBhcmVuJ3QgdHJhY2tlZFxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Ly8gQUxXQVlTIHJlbW92ZSBBTEwgdGVybWluYWwgaWNvbnMsIHJlZ2FyZGxlc3Mgb2Ygc2V0dGluZ3NcclxuXHRcdFx0Y29uc3QgdGVybWluYWxJY29ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaWRlLWRvY2stcmliYm9uLWFjdGlvblthcmlhLWxhYmVsPVwiT3BlbiBwcm9qZWN0IHRlcm1pbmFsXCJdJyk7XHJcblx0XHRcdHRlcm1pbmFsSWNvbnMuZm9yRWFjaCgoaWNvbjogRWxlbWVudCkgPT4gaWNvbi5yZW1vdmUoKSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBTFdBWVMgcmVtb3ZlIEFMTCBjb25maWcgaWNvbnMsIHJlZ2FyZGxlc3Mgb2Ygc2V0dGluZ3NcclxuXHRcdFx0Y29uc3QgY29uZmlnSWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZS1kb2NrLXJpYmJvbi1hY3Rpb25bYXJpYS1sYWJlbD1cIkVkaXQgYXN0cm8gY29uZmlnXCJdJyk7XHJcblx0XHRcdGNvbmZpZ0ljb25zLmZvckVhY2goKGljb246IEVsZW1lbnQpID0+IGljb24ucmVtb3ZlKCkpO1xyXG5cdFx0fSBjYXRjaCB7XHJcblx0XHRcdC8vIFNpbGVudGx5IGhhbmRsZSBlcnJvcnNcclxuXHRcdH1cclxuXHJcblx0XHQvLyBOb3cgYWRkIG9ubHkgdGhlIGljb25zIHRoYXQgc2hvdWxkIGV4aXN0XHJcblx0XHRpZiAodGVybWluYWxTaG91bGRFeGlzdCkge1xyXG5cdFx0XHQvLyBPbmx5IGFkZCBpZiBpY29uIGRvZXNuJ3QgZXhpc3QgaW4gRE9NXHJcblx0XHRcdGNvbnN0IGV4aXN0aW5nVGVybWluYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZS1kb2NrLXJpYmJvbi1hY3Rpb25bYXJpYS1sYWJlbD1cIk9wZW4gcHJvamVjdCB0ZXJtaW5hbFwiXScpO1xyXG5cdFx0XHRpZiAoIWV4aXN0aW5nVGVybWluYWwpIHtcclxuXHRcdFx0XHR0aGlzLnRlcm1pbmFsUmliYm9uSWNvbiA9IHRoaXMuYWRkUmliYm9uSWNvbigndGVybWluYWwtc3F1YXJlJywgJ09wZW4gcHJvamVjdCB0ZXJtaW5hbCcsICgpID0+IHtcclxuXHRcdFx0XHRcdGlmICghdGhpcy5zZXR0aW5ncy5lbmFibGVPcGVuVGVybWluYWxDb21tYW5kKSB7XHJcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJPcGVuIHRlcm1pbmFsIGNvbW1hbmQgaXMgZGlzYWJsZWQuIEVuYWJsZSBpdCBpbiBzZXR0aW5ncyB0byB1c2UgdGhpcyBjb21tYW5kLlwiKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0b3BlblRlcm1pbmFsSW5Qcm9qZWN0Um9vdCh0aGlzLmFwcCwgdGhpcy5zZXR0aW5ncyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0Ly8gQWRkIGRhdGEgYXR0cmlidXRlIHRvIGlkZW50aWZ5IG91ciBpY29uXHJcblx0XHRcdFx0aWYgKHRoaXMudGVybWluYWxSaWJib25JY29uKSB7XHJcblx0XHRcdFx0XHR0aGlzLnRlcm1pbmFsUmliYm9uSWNvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtYXN0cm8tY29tcG9zZXItdGVybWluYWwtcmliYm9uJywgJ3RydWUnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy50ZXJtaW5hbFJpYmJvbkljb24gPSBleGlzdGluZ1Rlcm1pbmFsIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBJbW1lZGlhdGVseSBjaGVjayBhbmQgcmVtb3ZlIGNvbmZpZyBpY29uIGlmIGl0IHdhcyByZS1hZGRlZFxyXG5cdFx0XHRpZiAoIWNvbmZpZ1Nob3VsZEV4aXN0KSB7XHJcblx0XHRcdFx0Y29uc3QgY29uZmlnSWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZS1kb2NrLXJpYmJvbi1hY3Rpb25bYXJpYS1sYWJlbD1cIkVkaXQgYXN0cm8gY29uZmlnXCJdJyk7XHJcblx0XHRcdFx0aWYgKGNvbmZpZ0ljb25zLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRcdGNvbmZpZ0ljb25zLmZvckVhY2goKGljb246IEVsZW1lbnQpID0+IGljb24ucmVtb3ZlKCkpO1xyXG5cdFx0XHRcdFx0dGhpcy5jb25maWdSaWJib25JY29uID0gbnVsbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMudGVybWluYWxSaWJib25JY29uID0gbnVsbDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoY29uZmlnU2hvdWxkRXhpc3QpIHtcclxuXHRcdFx0Ly8gT25seSBhZGQgaWYgaWNvbiBkb2Vzbid0IGV4aXN0IGluIERPTVxyXG5cdFx0XHRjb25zdCBleGlzdGluZ0NvbmZpZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaWRlLWRvY2stcmliYm9uLWFjdGlvblthcmlhLWxhYmVsPVwiRWRpdCBhc3RybyBjb25maWdcIl0nKTtcclxuXHRcdFx0aWYgKCFleGlzdGluZ0NvbmZpZykge1xyXG5cdFx0XHRcdHRoaXMuY29uZmlnUmliYm9uSWNvbiA9IHRoaXMuYWRkUmliYm9uSWNvbignd3JlbmNoJywgJ0VkaXQgYXN0cm8gY29uZmlnJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZU9wZW5Db25maWdGaWxlQ29tbWFuZCkge1xyXG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiRWRpdCBjb25maWcgZmlsZSBjb21tYW5kIGlzIGRpc2FibGVkLiBFbmFibGUgaXQgaW4gc2V0dGluZ3MgdG8gdXNlIHRoaXMgY29tbWFuZC5cIik7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGF3YWl0IG9wZW5Db25maWdGaWxlKHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHQvLyBBZGQgZGF0YSBhdHRyaWJ1dGUgdG8gaWRlbnRpZnkgb3VyIGljb25cclxuXHRcdFx0XHRpZiAodGhpcy5jb25maWdSaWJib25JY29uKSB7XHJcblx0XHRcdFx0XHR0aGlzLmNvbmZpZ1JpYmJvbkljb24uc2V0QXR0cmlidXRlKCdkYXRhLWFzdHJvLWNvbXBvc2VyLWNvbmZpZy1yaWJib24nLCAndHJ1ZScpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLmNvbmZpZ1JpYmJvbkljb24gPSBleGlzdGluZ0NvbmZpZyBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gSW1tZWRpYXRlbHkgY2hlY2sgYW5kIHJlbW92ZSB0ZXJtaW5hbCBpY29uIGlmIGl0IHdhcyByZS1hZGRlZFxyXG5cdFx0XHRpZiAoIXRlcm1pbmFsU2hvdWxkRXhpc3QpIHtcclxuXHRcdFx0XHRjb25zdCB0ZXJtaW5hbEljb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNpZGUtZG9jay1yaWJib24tYWN0aW9uW2FyaWEtbGFiZWw9XCJPcGVuIHByb2plY3QgdGVybWluYWxcIl0nKTtcclxuXHRcdFx0XHRpZiAodGVybWluYWxJY29ucy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHR0ZXJtaW5hbEljb25zLmZvckVhY2goKGljb246IEVsZW1lbnQpID0+IGljb24ucmVtb3ZlKCkpO1xyXG5cdFx0XHRcdFx0dGhpcy50ZXJtaW5hbFJpYmJvbkljb24gPSBudWxsO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5jb25maWdSaWJib25JY29uID0gbnVsbDtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gVXBkYXRlIGNvbnRleHQgbWVudSBoYW5kbGluZyBhZnRlciBpY29ucyBhcmUgcmVnaXN0ZXJlZFxyXG5cdFx0dGhpcy51cGRhdGVSaWJib25Db250ZXh0TWVudUNTUygpO1xyXG5cdFx0dGhpcy5zZXR1cFJpYmJvbkNvbnRleHRNZW51T2JzZXJ2ZXIoKTtcclxuXHRcdFxyXG5cdFx0Ly8gRmluYWwgY2xlYW51cCBwYXNzIC0gZW5zdXJlIG5vIHVud2FudGVkIGljb25zIGV4aXN0IGluIERPTVxyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdGlmICghdGVybWluYWxTaG91bGRFeGlzdCkge1xyXG5cdFx0XHRcdGNvbnN0IHRlcm1pbmFsSWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZS1kb2NrLXJpYmJvbi1hY3Rpb25bYXJpYS1sYWJlbD1cIk9wZW4gcHJvamVjdCB0ZXJtaW5hbFwiXScpO1xyXG5cdFx0XHRcdHRlcm1pbmFsSWNvbnMuZm9yRWFjaCgoaWNvbjogRWxlbWVudCkgPT4gaWNvbi5yZW1vdmUoKSk7XHJcblx0XHRcdFx0dGhpcy50ZXJtaW5hbFJpYmJvbkljb24gPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICghY29uZmlnU2hvdWxkRXhpc3QpIHtcclxuXHRcdFx0XHRjb25zdCBjb25maWdJY29ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaWRlLWRvY2stcmliYm9uLWFjdGlvblthcmlhLWxhYmVsPVwiRWRpdCBhc3RybyBjb25maWdcIl0nKTtcclxuXHRcdFx0XHRjb25maWdJY29ucy5mb3JFYWNoKChpY29uOiBFbGVtZW50KSA9PiBpY29uLnJlbW92ZSgpKTtcclxuXHRcdFx0XHR0aGlzLmNvbmZpZ1JpYmJvbkljb24gPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9LCAxMDApO1xyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHQvLyBDbGVhbiB1cCByaWJib24gaWNvbnNcclxuXHRcdGlmICh0aGlzLnRlcm1pbmFsUmliYm9uSWNvbikge1xyXG5cdFx0XHR0aGlzLnRlcm1pbmFsUmliYm9uSWNvbi5yZW1vdmUoKTtcclxuXHRcdFx0dGhpcy50ZXJtaW5hbFJpYmJvbkljb24gPSBudWxsO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHRoaXMuY29uZmlnUmliYm9uSWNvbikge1xyXG5cdFx0XHR0aGlzLmNvbmZpZ1JpYmJvbkljb24ucmVtb3ZlKCk7XHJcblx0XHRcdHRoaXMuY29uZmlnUmliYm9uSWNvbiA9IG51bGw7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIENsZWFudXAgcmliYm9uIGNvbnRleHQgbWVudSBoYW5kbGluZ1xyXG5cdFx0aWYgKHRoaXMucmliYm9uQ29udGV4dE1lbnVPYnNlcnZlcikge1xyXG5cdFx0XHR0aGlzLnJpYmJvbkNvbnRleHRNZW51T2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG5cdFx0XHR0aGlzLnJpYmJvbkNvbnRleHRNZW51T2JzZXJ2ZXIgPSB1bmRlZmluZWQ7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIFJlbW92ZSBDU1MgY2xhc3Nlc1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5yZW1vdmVDbGFzcygnYXN0cm8tY29tcG9zZXItaGlkZS10ZXJtaW5hbC1pY29uJyk7XHJcblx0XHRkb2N1bWVudC5ib2R5LnJlbW92ZUNsYXNzKCdhc3Ryby1jb21wb3Nlci1oaWRlLWNvbmZpZy1pY29uJyk7XHJcblxyXG5cdFx0Ly8gQ2xlYW51cCBoZWxwIGJ1dHRvbiByZXBsYWNlbWVudFxyXG5cdFx0aWYgKHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyKSB7XHJcblx0XHRcdHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuXHRcdFx0dGhpcy5oZWxwQnV0dG9uT2JzZXJ2ZXIgPSB1bmRlZmluZWQ7XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdGlmICh0aGlzLmN1c3RvbUhlbHBCdXR0b24pIHtcclxuXHRcdFx0dGhpcy5jdXN0b21IZWxwQnV0dG9uLnJlbW92ZSgpO1xyXG5cdFx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24gPSB1bmRlZmluZWQ7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5oZWxwQnV0dG9uRWxlbWVudCA9IHVuZGVmaW5lZDtcclxuXHR9XHJcblxyXG5cdC8vIFJpYmJvbiBjb250ZXh0IG1lbnUgaGFuZGxpbmcgLSBiYXNlZCBvbiBBc3RybyBNb2R1bGFyIFNldHRpbmdzIGFwcHJvYWNoXHJcblx0cHJpdmF0ZSBzZXR1cFJpYmJvbkNvbnRleHRNZW51SGFuZGxpbmcoKSB7XHJcblx0XHR0aGlzLnVwZGF0ZVJpYmJvbkNvbnRleHRNZW51Q1NTKCk7XHJcblx0XHR0aGlzLnNldHVwUmliYm9uQ29udGV4dE1lbnVPYnNlcnZlcigpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSB1cGRhdGVSaWJib25Db250ZXh0TWVudUNTUygpIHtcclxuXHRcdC8vIENoZWNrIGlmIGVpdGhlciBpY29uIHNob3VsZCBiZSBoaWRkZW5cclxuXHRcdGNvbnN0IHRlcm1pbmFsU2hvdWxkQmVIaWRkZW4gPSAhdGhpcy5zZXR0aW5ncy5lbmFibGVUZXJtaW5hbFJpYmJvbkljb24gfHwgIXRoaXMuc2V0dGluZ3MuZW5hYmxlT3BlblRlcm1pbmFsQ29tbWFuZDtcclxuXHRcdGNvbnN0IGNvbmZpZ1Nob3VsZEJlSGlkZGVuID0gIXRoaXMuc2V0dGluZ3MuZW5hYmxlQ29uZmlnUmliYm9uSWNvbiB8fCAhdGhpcy5zZXR0aW5ncy5lbmFibGVPcGVuQ29uZmlnRmlsZUNvbW1hbmQ7XHJcblxyXG5cdFx0Ly8gVXNlIENTUyBjbGFzc2VzIG9uIGRvY3VtZW50IGJvZHkgdG8gY29udHJvbCB2aXNpYmlsaXR5XHJcblx0XHRpZiAodGVybWluYWxTaG91bGRCZUhpZGRlbikge1xyXG5cdFx0XHRkb2N1bWVudC5ib2R5LmFkZENsYXNzKCdhc3Ryby1jb21wb3Nlci1oaWRlLXRlcm1pbmFsLWljb24nKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGRvY3VtZW50LmJvZHkucmVtb3ZlQ2xhc3MoJ2FzdHJvLWNvbXBvc2VyLWhpZGUtdGVybWluYWwtaWNvbicpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoY29uZmlnU2hvdWxkQmVIaWRkZW4pIHtcclxuXHRcdFx0ZG9jdW1lbnQuYm9keS5hZGRDbGFzcygnYXN0cm8tY29tcG9zZXItaGlkZS1jb25maWctaWNvbicpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0ZG9jdW1lbnQuYm9keS5yZW1vdmVDbGFzcygnYXN0cm8tY29tcG9zZXItaGlkZS1jb25maWctaWNvbicpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzZXR1cFJpYmJvbkNvbnRleHRNZW51T2JzZXJ2ZXIoKSB7XHJcblx0XHQvLyBEaXNjb25uZWN0IGV4aXN0aW5nIG9ic2VydmVyIGlmIGFueVxyXG5cdFx0aWYgKHRoaXMucmliYm9uQ29udGV4dE1lbnVPYnNlcnZlcikge1xyXG5cdFx0XHR0aGlzLnJpYmJvbkNvbnRleHRNZW51T2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gaGlkZSBhbnkgaWNvbnNcclxuXHRcdGNvbnN0IHRlcm1pbmFsU2hvdWxkQmVIaWRkZW4gPSAhdGhpcy5zZXR0aW5ncy5lbmFibGVUZXJtaW5hbFJpYmJvbkljb24gfHwgIXRoaXMuc2V0dGluZ3MuZW5hYmxlT3BlblRlcm1pbmFsQ29tbWFuZDtcclxuXHRcdGNvbnN0IGNvbmZpZ1Nob3VsZEJlSGlkZGVuID0gIXRoaXMuc2V0dGluZ3MuZW5hYmxlQ29uZmlnUmliYm9uSWNvbiB8fCAhdGhpcy5zZXR0aW5ncy5lbmFibGVPcGVuQ29uZmlnRmlsZUNvbW1hbmQ7XHJcblxyXG5cdFx0Ly8gT25seSBzZXQgdXAgb2JzZXJ2ZXIgaWYgYW55IGljb24gc2hvdWxkIGJlIGhpZGRlblxyXG5cdFx0aWYgKCF0ZXJtaW5hbFNob3VsZEJlSGlkZGVuICYmICFjb25maWdTaG91bGRCZUhpZGRlbikge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gV2F0Y2ggZm9yIGNvbnRleHQgbWVudSBjcmVhdGlvbiBhbmQgcmVtb3ZlIG91ciBpdGVtc1xyXG5cdFx0dGhpcy5yaWJib25Db250ZXh0TWVudU9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4ge1xyXG5cdFx0XHRmb3IgKGNvbnN0IG11dGF0aW9uIG9mIG11dGF0aW9ucykge1xyXG5cdFx0XHRcdGlmIChtdXRhdGlvbi5hZGRlZE5vZGVzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRcdC8vIENoZWNrIGlmIGEgbWVudSB3YXMgYWRkZWRcclxuXHRcdFx0XHRcdGZvciAoY29uc3Qgbm9kZSBvZiBBcnJheS5mcm9tKG11dGF0aW9uLmFkZGVkTm9kZXMpKSB7XHJcblx0XHRcdFx0XHRcdGlmIChub2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBpdCdzIGEgbWVudVxyXG5cdFx0XHRcdFx0XHRcdGlmIChub2RlLmNsYXNzTGlzdC5jb250YWlucygnbWVudScpIHx8IG5vZGUucXVlcnlTZWxlY3RvcignLm1lbnUnKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW1vdmVSaWJib25JY29uc0Zyb21Db250ZXh0TWVudShub2RlKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIE9ic2VydmUgdGhlIGRvY3VtZW50IGJvZHkgZm9yIG1lbnUgYWRkaXRpb25zXHJcblx0XHR0aGlzLnJpYmJvbkNvbnRleHRNZW51T2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7XHJcblx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcclxuXHRcdFx0c3VidHJlZTogdHJ1ZSxcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSB1cGRhdGVIZWxwQnV0dG9uQ1NTKCkge1xyXG5cdFx0Ly8gVXNlIENTUyBjbGFzcyBvbiBkb2N1bWVudCBib2R5IHRvIGNvbnRyb2wgdmlzaWJpbGl0eVxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XHJcblx0XHRcdGRvY3VtZW50LmJvZHkuYWRkQ2xhc3MoJ2FzdHJvLWNvbXBvc2VyLWhpZGUtaGVscC1idXR0b24nKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGRvY3VtZW50LmJvZHkucmVtb3ZlQ2xhc3MoJ2FzdHJvLWNvbXBvc2VyLWhpZGUtaGVscC1idXR0b24nKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBhc3luYyB1cGRhdGVIZWxwQnV0dG9uKCkge1xyXG5cdFx0Ly8gSGVscCBidXR0b24gcmVwbGFjZW1lbnQgaXMgZGVza3RvcC1vbmx5IChub3QgYXZhaWxhYmxlIG9uIG1vYmlsZSlcclxuXHRcdGlmIChQbGF0Zm9ybS5pc01vYmlsZSkge1xyXG5cdFx0XHQvLyBDbGVhbiB1cCBhbnkgZXhpc3RpbmcgaGVscCBidXR0b24gcmVwbGFjZW1lbnQgb24gbW9iaWxlXHJcblx0XHRcdHRoaXMucmVzdG9yZUhlbHBCdXR0b24oKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFRlbXBvcmFyaWx5IGRpc2Nvbm5lY3Qgb2JzZXJ2ZXIgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wc1xyXG5cdFx0aWYgKHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyKSB7XHJcblx0XHRcdHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBFbnN1cmUgd2UgaGF2ZSB0aGUgbGF0ZXN0IHNldHRpbmdzXHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuXHRcdC8vIFVwZGF0ZSBDU1MgZmlyc3QgKHRoaXMgd2lsbCBoaWRlIHRoZSBoZWxwIGJ1dHRvbiBnbG9iYWxseSlcclxuXHRcdHRoaXMudXBkYXRlSGVscEJ1dHRvbkNTUygpO1xyXG5cclxuXHRcdC8vIENoZWNrIGlmIHJlcGxhY2VtZW50IGlzIGVuYWJsZWRcclxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQ/LmVuYWJsZWQpIHtcclxuXHRcdFx0dGhpcy5yZXN0b3JlSGVscEJ1dHRvbigpO1xyXG5cdFx0XHQvLyBTdGlsbCBzZXQgdXAgb2JzZXJ2ZXIgaW4gY2FzZSB1c2VyIGVuYWJsZXMgaXQgbGF0ZXJcclxuXHRcdFx0dGhpcy5zZXR1cEhlbHBCdXR0b25PYnNlcnZlcigpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRmluZCB0aGUgaGVscCBidXR0b25cclxuXHRcdGNvbnN0IHZhdWx0QWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2UtZHJhd2VyLXZhdWx0LWFjdGlvbnMnKTtcclxuXHRcdGlmICghdmF1bHRBY3Rpb25zKSB7XHJcblx0XHRcdC8vIFZhdWx0IGFjdGlvbnMgbm90IGZvdW5kIHlldCAtIHNldCB1cCBvYnNlcnZlciB0byBjYXRjaCBpdCB3aGVuIGl0IGFwcGVhcnNcclxuXHRcdFx0dGhpcy5zZXR1cEhlbHBCdXR0b25PYnNlcnZlcigpO1xyXG5cdFx0XHQvLyBBbHNvIHJldHJ5IGFmdGVyIGEgc2hvcnQgZGVsYXlcclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XHJcblx0XHRcdFx0XHR2b2lkIHRoaXMudXBkYXRlSGVscEJ1dHRvbigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgNTAwKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZpbmQgdGhlIGhlbHAgYnV0dG9uIC0gaXQncyB0aGUgZmlyc3QgY2xpY2thYmxlLWljb24gdGhhdCBjb250YWlucyBhbiBTVkcgd2l0aCBjbGFzcyBcImhlbHBcIlxyXG5cdFx0Y29uc3QgY2xpY2thYmxlSWNvbnMgPSBBcnJheS5mcm9tKHZhdWx0QWN0aW9ucy5xdWVyeVNlbGVjdG9yQWxsKCcuY2xpY2thYmxlLWljb24nKSk7XHJcblx0XHRsZXQgaGVscEJ1dHRvbjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRcdFxyXG5cdFx0Zm9yIChjb25zdCBpY29uIG9mIGNsaWNrYWJsZUljb25zKSB7XHJcblx0XHRcdGNvbnN0IHN2ZyA9IGljb24ucXVlcnlTZWxlY3Rvcignc3ZnLmhlbHAnKTtcclxuXHRcdFx0aWYgKHN2Zykge1xyXG5cdFx0XHRcdGhlbHBCdXR0b24gPSBpY29uIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmICghaGVscEJ1dHRvbikge1xyXG5cdFx0XHQvLyBIZWxwIGJ1dHRvbiBub3QgZm91bmQgeWV0IC0gc2V0IHVwIG9ic2VydmVyIHRvIGNhdGNoIGl0IHdoZW4gaXQgYXBwZWFyc1xyXG5cdFx0XHR0aGlzLnNldHVwSGVscEJ1dHRvbk9ic2VydmVyKCk7XHJcblx0XHRcdC8vIEFsc28gcmV0cnkgYWZ0ZXIgYSBzaG9ydCBkZWxheVxyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQ/LmVuYWJsZWQpIHtcclxuXHRcdFx0XHRcdHZvaWQgdGhpcy51cGRhdGVIZWxwQnV0dG9uKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCA1MDApO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU3RvcmUgcmVmZXJlbmNlIHRvIHRoZSBidXR0b25cclxuXHRcdHRoaXMuaGVscEJ1dHRvbkVsZW1lbnQgPSBoZWxwQnV0dG9uO1xyXG5cclxuXHRcdC8vIFJlbW92ZSBleGlzdGluZyBjdXN0b20gYnV0dG9uIGlmIGl0IGV4aXN0cyAoYWx3YXlzIHJlY3JlYXRlIHRvIHVwZGF0ZSBpY29uL2NvbW1hbmQpXHJcblx0XHQvLyBDaGVjayBpZiBpdCdzIGFjdHVhbGx5IGluIHRoZSBET00gYW5kIGhhcyBvdXIgaWRlbnRpZmllciBiZWZvcmUgdHJ5aW5nIHRvIHJlbW92ZSBpdFxyXG5cdFx0aWYgKHRoaXMuY3VzdG9tSGVscEJ1dHRvbiAmJiBcclxuXHRcdFx0dGhpcy5jdXN0b21IZWxwQnV0dG9uLnBhcmVudEVsZW1lbnQgJiYgXHJcblx0XHRcdGRvY3VtZW50LmJvZHkuY29udGFpbnModGhpcy5jdXN0b21IZWxwQnV0dG9uKSAmJlxyXG5cdFx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24uaGFzQXR0cmlidXRlKCdkYXRhLWFzdHJvLWNvbXBvc2VyLWhlbHAtcmVwbGFjZW1lbnQnKSkge1xyXG5cdFx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24ucmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24gPSB1bmRlZmluZWQ7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGEgbmV3IGN1c3RvbSBidXR0b25cclxuXHRcdGNvbnN0IGN1c3RvbUJ1dHRvbiA9IGhlbHBCdXR0b24uY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0Y3VzdG9tQnV0dG9uLmFkZENsYXNzKFwiYXN0cm8tY29tcG9zZXItaGVscC1yZXBsYWNlbWVudFwiKTtcclxuXHRcdGN1c3RvbUJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKTsgLy8gUmVtb3ZlIGFueSBleGlzdGluZyBhcmlhLWxhYmVsXHJcblx0XHRcclxuXHRcdC8vIEFkZCB1bmlxdWUgaWRlbnRpZmllciB0byBhdm9pZCBjb25mbGljdHMgd2l0aCBvdGhlciBwbHVnaW5zXHJcblx0XHRjdXN0b21CdXR0b24uc2V0QXR0cmlidXRlKCdkYXRhLWFzdHJvLWNvbXBvc2VyLWhlbHAtcmVwbGFjZW1lbnQnLCAndHJ1ZScpO1xyXG5cdFx0Y3VzdG9tQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2FzdHJvLWNvbXBvc2VyLWhlbHAtcmVwbGFjZW1lbnQnKTtcclxuXHRcdFxyXG5cdFx0Ly8gQ2xlYXIgYW55IGV4aXN0aW5nIGNsaWNrIGhhbmRsZXJzXHJcblx0XHRjdXN0b21CdXR0b24ub25jbGljayA9IG51bGw7XHJcblx0XHRcclxuXHRcdC8vIFJlcGxhY2UgdGhlIGljb24gdXNpbmcgT2JzaWRpYW4ncyBzZXRJY29uIGZ1bmN0aW9uXHJcblx0XHRjb25zdCBpY29uQ29udGFpbmVyID0gY3VzdG9tQnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpPy5wYXJlbnRFbGVtZW50IHx8IGN1c3RvbUJ1dHRvbjtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGlmIChpY29uQ29udGFpbmVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuXHRcdFx0XHRzZXRJY29uKGljb25Db250YWluZXIsIHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Lmljb25JZCk7XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUud2FybignW0FzdHJvIENvbXBvc2VyXSBFcnJvciBzZXR0aW5nIGljb246JywgZXJyb3IpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEFkZCBvdXIgY3VzdG9tIGNsaWNrIGhhbmRsZXJcclxuXHRcdGN1c3RvbUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuXHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IGNvbW1hbmRJZCA9IHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5jb21tYW5kSWQ7XHJcblx0XHRcdGlmIChjb21tYW5kSWQpIHtcclxuXHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBhcHBXaXRoQ29tbWFuZHMgPSB0aGlzLmFwcCBhcyB1bmtub3duIGFzIHsgY29tbWFuZHM/OiB7IGV4ZWN1dGVDb21tYW5kQnlJZD86IChpZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+IH0gfTtcclxuXHRcdFx0XHRcdFx0aWYgKGFwcFdpdGhDb21tYW5kcy5jb21tYW5kcz8uZXhlY3V0ZUNvbW1hbmRCeUlkKSB7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgYXBwV2l0aENvbW1hbmRzLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZChjb21tYW5kSWQpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oJ1tBc3RybyBDb21wb3Nlcl0gRXJyb3IgZXhlY3V0aW5nIGNvbW1hbmQ6JywgZXJyb3IpO1xyXG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBGYWlsZWQgdG8gZXhlY3V0ZSBjb21tYW5kOiAke2NvbW1hbmRJZH1gKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LCB0cnVlKTsgLy8gVXNlIGNhcHR1cmUgcGhhc2UgdG8gZW5zdXJlIHdlIGhhbmRsZSBpdCBmaXJzdFxyXG5cclxuXHRcdC8vIEluc2VydCB0aGUgY3VzdG9tIGJ1dHRvbiBpbiB0aGUgc2FtZSBwb3NpdGlvbiBhcyB0aGUgaGVscCBidXR0b24gKGJlZm9yZSBpdClcclxuXHRcdC8vIFRoaXMgZW5zdXJlcyBpdCB0YWtlcyB0aGUgaGVscCBidXR0b24ncyBwb3NpdGlvbiB3aXRob3V0IGFmZmVjdGluZyBvdGhlciBidXR0b25zXHJcblx0XHRoZWxwQnV0dG9uLnBhcmVudEVsZW1lbnQ/Lmluc2VydEJlZm9yZShjdXN0b21CdXR0b24sIGhlbHBCdXR0b24pO1xyXG5cdFx0XHJcblx0XHQvLyBTdG9yZSByZWZlcmVuY2UgdG8gY3VzdG9tIGJ1dHRvblxyXG5cdFx0dGhpcy5jdXN0b21IZWxwQnV0dG9uID0gY3VzdG9tQnV0dG9uO1xyXG5cclxuXHRcdC8vIFNldCB1cCBvYnNlcnZlciBhZnRlciBhIGRlbGF5IHRvIHdhdGNoIGZvciBjaGFuZ2VzXHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XHJcblx0XHRcdFx0dGhpcy5zZXR1cEhlbHBCdXR0b25PYnNlcnZlcigpO1xyXG5cdFx0XHR9XHJcblx0XHR9LCAxMDAwKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc2V0dXBIZWxwQnV0dG9uT2JzZXJ2ZXIoKSB7XHJcblx0XHQvLyBEaXNjb25uZWN0IGV4aXN0aW5nIG9ic2VydmVyIGlmIGFueVxyXG5cdFx0aWYgKHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyKSB7XHJcblx0XHRcdHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBPbmx5IHNldCB1cCBvYnNlcnZlciBpZiByZXBsYWNlbWVudCBpcyBlbmFibGVkXHJcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBXYXRjaCBmb3IgY2hhbmdlcyB0byB0aGUgdmF1bHQgcHJvZmlsZSBhcmVhIG9ubHkgKG1vcmUgdGFyZ2V0ZWQpXHJcblx0XHRsZXQgdXBkYXRlVGltZW91dDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XHJcblx0XHR0aGlzLmhlbHBCdXR0b25PYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcclxuXHRcdFx0Ly8gRGVib3VuY2UgdXBkYXRlcyB0byBwcmV2ZW50IGluZmluaXRlIGxvb3BzXHJcblx0XHRcdGlmICh1cGRhdGVUaW1lb3V0KSB7XHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHVwZGF0ZVRpbWVvdXQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHVwZGF0ZVRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgaGVscCBidXR0b24gd2FzIHJlY3JlYXRlZCAoQ1NTIHdpbGwgaGlkZSBpdCwgYnV0IHdlIG5lZWQgdG8gaW5qZWN0IG91ciBjdXN0b20gYnV0dG9uKVxyXG5cdFx0XHRcdGNvbnN0IHZhdWx0QWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2UtZHJhd2VyLXZhdWx0LWFjdGlvbnMnKTtcclxuXHRcdFx0XHRpZiAoIXZhdWx0QWN0aW9ucykgcmV0dXJuO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHQvLyBDaGVjayBpZiB3ZSBoYXZlIGEgY3VzdG9tIGJ1dHRvbiBBTkQgaXQncyBzdGlsbCBpbiB0aGUgRE9NXHJcblx0XHRcdC8vIFRoZSByZWZlcmVuY2UgbWlnaHQgZXhpc3QgYnV0IHRoZSBidXR0b24gY291bGQgaGF2ZSBiZWVuIHJlbW92ZWRcclxuXHRcdFx0Ly8gQWxzbyB2ZXJpZnkgaXQgaGFzIG91ciB1bmlxdWUgaWRlbnRpZmllciB0byBhdm9pZCBjb25mbGljdHMgd2l0aCBvdGhlciBwbHVnaW5zXHJcblx0XHRcdGNvbnN0IGN1c3RvbUJ1dHRvbkV4aXN0cyA9IHRoaXMuY3VzdG9tSGVscEJ1dHRvbiAmJiBcclxuXHRcdFx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24ucGFyZW50RWxlbWVudCAmJiBcclxuXHRcdFx0XHRkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHRoaXMuY3VzdG9tSGVscEJ1dHRvbikgJiZcclxuXHRcdFx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24uaGFzQXR0cmlidXRlKCdkYXRhLWFzdHJvLWNvbXBvc2VyLWhlbHAtcmVwbGFjZW1lbnQnKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmICghY3VzdG9tQnV0dG9uRXhpc3RzKSB7XHJcblx0XHRcdFx0Ly8gQ2xlYXIgc3RhbGUgcmVmZXJlbmNlIGlmIGJ1dHRvbiB3YXMgcmVtb3ZlZCBvciBkb2Vzbid0IGhhdmUgb3VyIGlkZW50aWZpZXJcclxuXHRcdFx0XHRpZiAodGhpcy5jdXN0b21IZWxwQnV0dG9uICYmICghZG9jdW1lbnQuYm9keS5jb250YWlucyh0aGlzLmN1c3RvbUhlbHBCdXR0b24pIHx8IFxyXG5cdFx0XHRcdFx0IXRoaXMuY3VzdG9tSGVscEJ1dHRvbi5oYXNBdHRyaWJ1dGUoJ2RhdGEtYXN0cm8tY29tcG9zZXItaGVscC1yZXBsYWNlbWVudCcpKSkge1xyXG5cdFx0XHRcdFx0dGhpcy5jdXN0b21IZWxwQnV0dG9uID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR2b2lkIHRoaXMudXBkYXRlSGVscEJ1dHRvbigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdH0sIDEwMCk7IC8vIFNob3J0ZXIgZGVib3VuY2UgZm9yIGJldHRlciByZXNwb25zaXZlbmVzc1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gT2JzZXJ2ZSB0aGUgdmF1bHQgYWN0aW9ucyBhcmVhIG1vcmUgc3BlY2lmaWNhbGx5XHJcblx0XHRjb25zdCB2YXVsdEFjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLWRyYXdlci12YXVsdC1hY3Rpb25zJyk7XHJcblx0XHRpZiAodmF1bHRBY3Rpb25zKSB7XHJcblx0XHRcdHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyLm9ic2VydmUodmF1bHRBY3Rpb25zLCB7XHJcblx0XHRcdFx0Y2hpbGRMaXN0OiB0cnVlLFxyXG5cdFx0XHRcdHN1YnRyZWU6IHRydWUsIC8vIFdhdGNoIHN1YnRyZWUgdG8gY2F0Y2ggd2hlbiBidXR0b25zIGFyZSByZWNyZWF0ZWRcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIEFsc28gb2JzZXJ2ZSB0aGUgcGFyZW50IHZhdWx0IHByb2ZpbGUgYXJlYVxyXG5cdFx0Y29uc3QgdmF1bHRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1zaWRlZG9jay12YXVsdC1wcm9maWxlJyk7XHJcblx0XHRpZiAodmF1bHRQcm9maWxlKSB7XHJcblx0XHRcdHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyLm9ic2VydmUodmF1bHRQcm9maWxlLCB7XHJcblx0XHRcdFx0Y2hpbGRMaXN0OiB0cnVlLFxyXG5cdFx0XHRcdHN1YnRyZWU6IHRydWUsIC8vIFdhdGNoIHN1YnRyZWUgdG8gY2F0Y2ggd2hlbiB2YXVsdCBhY3Rpb25zIGFyZSBhZGRlZFxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBGYWxsYmFjazogb2JzZXJ2ZSB0aGUgd29ya3NwYWNlIGNvbnRhaW5lciBpZiBzcGVjaWZpYyBlbGVtZW50cyBkb24ndCBleGlzdCB5ZXRcclxuXHRcdC8vIFRoaXMgZW5zdXJlcyB3ZSBjYXRjaCB0aGUgYnV0dG9uIHdoZW4gaXQgZmlyc3QgYXBwZWFyc1xyXG5cdFx0aWYgKCF2YXVsdEFjdGlvbnMgJiYgIXZhdWx0UHJvZmlsZSkge1xyXG5cdFx0XHRjb25zdCB3b3Jrc3BhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLXNwbGl0Jyk7XHJcblx0XHRcdGlmICh3b3Jrc3BhY2UpIHtcclxuXHRcdFx0XHR0aGlzLmhlbHBCdXR0b25PYnNlcnZlci5vYnNlcnZlKHdvcmtzcGFjZSwge1xyXG5cdFx0XHRcdFx0Y2hpbGRMaXN0OiB0cnVlLFxyXG5cdFx0XHRcdFx0c3VidHJlZTogdHJ1ZSxcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBMYXN0IHJlc29ydDogb2JzZXJ2ZSBkb2N1bWVudCBib2R5IChidXQgd2l0aCBtb3JlIHNwZWNpZmljIGNoZWNrcylcclxuXHRcdFx0XHR0aGlzLmhlbHBCdXR0b25PYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcclxuXHRcdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcclxuXHRcdFx0XHRcdHN1YnRyZWU6IHRydWUsXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVzdG9yZUhlbHBCdXR0b24oKSB7XHJcblx0XHQvLyBSZW1vdmUgQ1NTIGNsYXNzIHRoYXQgaGlkZXMgaGVscCBidXR0b25cclxuXHRcdGRvY3VtZW50LmJvZHkucmVtb3ZlQ2xhc3MoJ2FzdHJvLWNvbXBvc2VyLWhpZGUtaGVscC1idXR0b24nKTtcclxuXHJcblx0XHQvLyBSZW1vdmUgdGhlIGN1c3RvbSBidXR0b25cclxuXHRcdGlmICh0aGlzLmN1c3RvbUhlbHBCdXR0b24pIHtcclxuXHRcdFx0dGhpcy5jdXN0b21IZWxwQnV0dG9uLnJlbW92ZSgpO1xyXG5cdFx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24gPSB1bmRlZmluZWQ7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2xlYXIgc3RvcmVkIHJlZmVyZW5jZXNcclxuXHRcdHRoaXMuaGVscEJ1dHRvbkVsZW1lbnQgPSB1bmRlZmluZWQ7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbW92ZVJpYmJvbkljb25zRnJvbUNvbnRleHRNZW51KG1lbnVFbGVtZW50OiBIVE1MRWxlbWVudCkge1xyXG5cdFx0Y29uc3QgdGVybWluYWxTaG91bGRCZUhpZGRlbiA9ICF0aGlzLnNldHRpbmdzLmVuYWJsZVRlcm1pbmFsUmliYm9uSWNvbiB8fCAhdGhpcy5zZXR0aW5ncy5lbmFibGVPcGVuVGVybWluYWxDb21tYW5kO1xyXG5cdFx0Y29uc3QgY29uZmlnU2hvdWxkQmVIaWRkZW4gPSAhdGhpcy5zZXR0aW5ncy5lbmFibGVDb25maWdSaWJib25JY29uIHx8ICF0aGlzLnNldHRpbmdzLmVuYWJsZU9wZW5Db25maWdGaWxlQ29tbWFuZDtcclxuXHJcblx0XHQvLyBGaW5kIGFsbCBtZW51IGl0ZW1zXHJcblx0XHRjb25zdCBtZW51SXRlbXMgPSBtZW51RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWVudS1pdGVtJyk7XHJcblx0XHRmb3IgKGNvbnN0IGl0ZW0gb2YgQXJyYXkuZnJvbShtZW51SXRlbXMpKSB7XHJcblx0XHRcdC8vIENoZWNrIGlmIHRoaXMgbWVudSBpdGVtIGNvbnRhaW5zIG91ciBpY29uc1xyXG5cdFx0XHRjb25zdCBzdmcgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpO1xyXG5cdFx0XHRpZiAoc3ZnKSB7XHJcblx0XHRcdFx0Y29uc3QgaWNvbk5hbWUgPSBzdmcuZ2V0QXR0cmlidXRlKCdkYXRhLWx1Y2lkZScpIHx8IFxyXG5cdFx0XHRcdFx0c3ZnLmdldEF0dHJpYnV0ZSgneG1sbnM6bHVjaWRlJykgfHxcclxuXHRcdFx0XHRcdChzdmcuY2xhc3NMaXN0LmNvbnRhaW5zKCdsdWNpZGUtdGVybWluYWwtc3F1YXJlJykgPyAndGVybWluYWwtc3F1YXJlJyA6IG51bGwpIHx8XHJcblx0XHRcdFx0XHQoc3ZnLmNsYXNzTGlzdC5jb250YWlucygnbHVjaWRlLXdyZW5jaCcpID8gJ3dyZW5jaCcgOiBudWxsKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBSZW1vdmUgdGVybWluYWwgaWNvbiBpZiBpdCBzaG91bGQgYmUgaGlkZGVuXHJcblx0XHRcdFx0aWYgKHRlcm1pbmFsU2hvdWxkQmVIaWRkZW4gJiYgaWNvbk5hbWUgPT09ICd0ZXJtaW5hbC1zcXVhcmUnKSB7XHJcblx0XHRcdFx0XHRjb25zdCBpdGVtVGV4dCA9IGl0ZW0udGV4dENvbnRlbnQ/LnRvTG93ZXJDYXNlKCkgfHwgJyc7XHJcblx0XHRcdFx0XHRpZiAoaXRlbVRleHQuaW5jbHVkZXMoJ3Rlcm1pbmFsJykgfHwgaXRlbVRleHQuaW5jbHVkZXMoJ3Byb2plY3QgdGVybWluYWwnKSkge1xyXG5cdFx0XHRcdFx0XHRpdGVtLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBSZW1vdmUgY29uZmlnIGljb24gaWYgaXQgc2hvdWxkIGJlIGhpZGRlblxyXG5cdFx0XHRcdGlmIChjb25maWdTaG91bGRCZUhpZGRlbiAmJiBpY29uTmFtZSA9PT0gJ3dyZW5jaCcpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGl0ZW1UZXh0ID0gaXRlbS50ZXh0Q29udGVudD8udG9Mb3dlckNhc2UoKSB8fCAnJztcclxuXHRcdFx0XHRcdGlmIChpdGVtVGV4dC5pbmNsdWRlcygnY29uZmlnJykgfHwgaXRlbVRleHQuaW5jbHVkZXMoJ2FzdHJvIGNvbmZpZycpKSB7XHJcblx0XHRcdFx0XHRcdGl0ZW0ucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFzdHJvQ29tcG9zZXJTZXR0aW5ncyB7XG5cdGRlZmF1bHRUZW1wbGF0ZTogc3RyaW5nOyAvLyBLZXB0IHRlbXBvcmFyaWx5IGZvciBtaWdyYXRpb25cblx0YXV0b0luc2VydFByb3BlcnRpZXM6IGJvb2xlYW47XG5cdGRhdGVGb3JtYXQ6IHN0cmluZztcblx0ZW5hYmxlQ29weUhlYWRpbmdMaW5rOiBib29sZWFuO1xuXHRjb3B5SGVhZGluZ0xpbmtGb3JtYXQ6IFwib2JzaWRpYW5cIiB8IFwiYXN0cm9cIjtcblx0YWRkVHJhaWxpbmdTbGFzaFRvTGlua3M6IGJvb2xlYW47XG5cdGVuYWJsZU9wZW5UZXJtaW5hbENvbW1hbmQ6IGJvb2xlYW47XG5cdHRlcm1pbmFsUHJvamVjdFJvb3RQYXRoOiBzdHJpbmc7XG5cdHRlcm1pbmFsQXBwbGljYXRpb25OYW1lOiBzdHJpbmc7XG5cdGVuYWJsZVRlcm1pbmFsRGVidWdMb2dnaW5nOiBib29sZWFuO1xuXHRlbmFibGVUZXJtaW5hbFJpYmJvbkljb246IGJvb2xlYW47XG5cdGVuYWJsZU9wZW5Db25maWdGaWxlQ29tbWFuZDogYm9vbGVhbjtcblx0Y29uZmlnRmlsZVBhdGg6IHN0cmluZztcblx0ZW5hYmxlQ29uZmlnUmliYm9uSWNvbjogYm9vbGVhbjtcblx0Y29udGVudFR5cGVzOiBDb250ZW50VHlwZVtdO1xuXHRoZWxwQnV0dG9uUmVwbGFjZW1lbnQ6IEhlbHBCdXR0b25SZXBsYWNlbWVudFNldHRpbmdzO1xuXHRtaWdyYXRpb25Db21wbGV0ZWQ6IGJvb2xlYW47XG5cdHNob3dNZHhGaWxlc0luRXhwbG9yZXI6IGJvb2xlYW47XG5cdC8vIExlZ2FjeSBmaWVsZHMgKGtlcHQgZm9yIG1pZ3JhdGlvbiwgaWdub3JlZCBhZnRlciBtaWdyYXRpb24pXG5cdGVuYWJsZVVuZGVyc2NvcmVQcmVmaXg/OiBib29sZWFuO1xuXHRwb3N0c0ZvbGRlcj86IHN0cmluZztcblx0cG9zdHNMaW5rQmFzZVBhdGg/OiBzdHJpbmc7XG5cdGF1dG9tYXRlUG9zdENyZWF0aW9uPzogYm9vbGVhbjtcblx0Y3JlYXRpb25Nb2RlPzogXCJmaWxlXCIgfCBcImZvbGRlclwiO1xuXHRpbmRleEZpbGVOYW1lPzogc3RyaW5nO1xuXHRleGNsdWRlZERpcmVjdG9yaWVzPzogc3RyaW5nO1xuXHRvbmx5QXV0b21hdGVJblBvc3RzRm9sZGVyPzogYm9vbGVhbjtcblx0ZW5hYmxlUGFnZXM/OiBib29sZWFuO1xuXHRwYWdlc0ZvbGRlcj86IHN0cmluZztcblx0cGFnZXNMaW5rQmFzZVBhdGg/OiBzdHJpbmc7XG5cdHBhZ2VzQ3JlYXRpb25Nb2RlPzogXCJmaWxlXCIgfCBcImZvbGRlclwiO1xuXHRwYWdlc0luZGV4RmlsZU5hbWU/OiBzdHJpbmc7XG5cdHBhZ2VUZW1wbGF0ZT86IHN0cmluZztcblx0b25seUF1dG9tYXRlSW5QYWdlc0ZvbGRlcj86IGJvb2xlYW47XG5cdGN1c3RvbUNvbnRlbnRUeXBlcz86IENvbnRlbnRUeXBlW107IC8vIExlZ2FjeSBuYW1lXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGVscEJ1dHRvblJlcGxhY2VtZW50U2V0dGluZ3Mge1xuXHRlbmFibGVkOiBib29sZWFuO1xuXHRjb21tYW5kSWQ6IHN0cmluZztcblx0aWNvbklkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFyc2VkRnJvbnRtYXR0ZXIge1xuXHRwcm9wZXJ0aWVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT47XG5cdHByb3BlcnRpZXNUZXh0OiBzdHJpbmc7XG5cdHByb3BlcnRpZXNFbmQ6IG51bWJlcjtcblx0Ym9keUNvbnRlbnQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUZW1wbGF0ZVZhbHVlcyB7XG5cdFtrZXk6IHN0cmluZ106IHN0cmluZ1tdIHwgc3RyaW5nO1xufVxuXG4vLyBDb250ZW50VHlwZSBpcyBub3cganVzdCBhIHN0cmluZyBJRCAtIG5vIGRpc3RpbmN0aW9uIGJldHdlZW4gYnVpbHQtaW4gYW5kIGN1c3RvbSB0eXBlc1xuZXhwb3J0IHR5cGUgQ29udGVudFR5cGVJZCA9IHN0cmluZztcblxuZXhwb3J0IGludGVyZmFjZSBDb250ZW50VHlwZSB7XG5cdGlkOiBzdHJpbmc7XG5cdG5hbWU6IHN0cmluZztcblx0Zm9sZGVyOiBzdHJpbmc7XG5cdGxpbmtCYXNlUGF0aDogc3RyaW5nO1xuXHR0ZW1wbGF0ZTogc3RyaW5nO1xuXHRlbmFibGVkOiBib29sZWFuO1xuXHRjcmVhdGlvbk1vZGU6IFwiZmlsZVwiIHwgXCJmb2xkZXJcIjtcblx0aW5kZXhGaWxlTmFtZTogc3RyaW5nO1xuXHRpZ25vcmVTdWJmb2xkZXJzOiBib29sZWFuO1xuXHRlbmFibGVVbmRlcnNjb3JlUHJlZml4OiBib29sZWFuO1xuXHR1c2VNZHhFeHRlbnNpb246IGJvb2xlYW47XG5cdGNvbGxhcHNlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZUNyZWF0aW9uT3B0aW9ucyB7XG5cdGZpbGU6IFRGaWxlO1xuXHR0aXRsZTogc3RyaW5nO1xuXHR0eXBlOiBDb250ZW50VHlwZUlkOyAvLyBDb250ZW50IHR5cGUgSUQgKHN0cmluZylcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZW5hbWVPcHRpb25zIHtcblx0ZmlsZTogVEZpbGU7XG5cdHRpdGxlOiBzdHJpbmc7XG5cdHR5cGU6IENvbnRlbnRUeXBlSWQ7IC8vIENvbnRlbnQgdHlwZSBJRCAoc3RyaW5nKVxufVxuXG5leHBvcnQgY29uc3QgS05PV05fQVJSQVlfS0VZUyA9IFsndGFncycsICdhbGlhc2VzJywgJ2Nzc2NsYXNzZXMnXSBhcyBjb25zdDtcblxuZXhwb3J0IGNvbnN0IENPTlNUQU5UUyA9IHtcblx0REVCT1VOQ0VfTVM6IDUwMCxcblx0U1RBVF9NVElNRV9USFJFU0hPTEQ6IDEwMDAsXG5cdEVESVRPUl9TVEFCSUxJWkVfREVMQVk6IDEwMCxcblx0RklMRV9FWFBMT1JFUl9SRVZFQUxfREVMQVk6IDIwMCxcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXN0cm9Db21wb3NlclBsdWdpbkludGVyZmFjZSB7XG5cdHNldHRpbmdzOiBBc3Ryb0NvbXBvc2VyU2V0dGluZ3M7XG5cdHNhdmVTZXR0aW5ncygpOiBQcm9taXNlPHZvaWQ+O1xuXHRyZWdpc3RlckNyZWF0ZUV2ZW50KCk6IHZvaWQ7XG5cdHJlZ2lzdGVyUmliYm9uSWNvbnM/KCk6IHZvaWQ7XG5cdHVwZGF0ZUhlbHBCdXR0b24/KCk6IFByb21pc2U8dm9pZD47XG59IiwgImltcG9ydCB7IEFzdHJvQ29tcG9zZXJTZXR0aW5ncyB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmV4cG9ydCB0eXBlIHsgQXN0cm9Db21wb3NlclNldHRpbmdzIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmV4cG9ydCB7IENPTlNUQU5UUyB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBBc3Ryb0NvbXBvc2VyU2V0dGluZ3MgPSB7XG5cdGRlZmF1bHRUZW1wbGF0ZTpcblx0XHQnLS0tXFxudGl0bGU6IFwie3t0aXRsZX19XCJcXG5kYXRlOiB7e2RhdGV9fVxcbnRhZ3M6IFtdXFxuLS0tXFxuJyxcblx0YXV0b0luc2VydFByb3BlcnRpZXM6IHRydWUsXG5cdGRhdGVGb3JtYXQ6IFwiWVlZWS1NTS1ERFwiLFxuXHRlbmFibGVDb3B5SGVhZGluZ0xpbms6IHRydWUsXG5cdGNvcHlIZWFkaW5nTGlua0Zvcm1hdDogXCJvYnNpZGlhblwiLFxuXHRhZGRUcmFpbGluZ1NsYXNoVG9MaW5rczogZmFsc2UsXG5cdGVuYWJsZU9wZW5UZXJtaW5hbENvbW1hbmQ6IGZhbHNlLFxuXHR0ZXJtaW5hbFByb2plY3RSb290UGF0aDogXCJcIixcblx0dGVybWluYWxBcHBsaWNhdGlvbk5hbWU6IFwiXCIsXG5cdGVuYWJsZVRlcm1pbmFsRGVidWdMb2dnaW5nOiBmYWxzZSxcblx0ZW5hYmxlVGVybWluYWxSaWJib25JY29uOiBmYWxzZSxcblx0ZW5hYmxlT3BlbkNvbmZpZ0ZpbGVDb21tYW5kOiBmYWxzZSxcblx0Y29uZmlnRmlsZVBhdGg6IFwiXCIsXG5cdGVuYWJsZUNvbmZpZ1JpYmJvbkljb246IGZhbHNlLFxuXHRjb250ZW50VHlwZXM6IFtdLFxuXHRtaWdyYXRpb25Db21wbGV0ZWQ6IGZhbHNlLFxuXHRoZWxwQnV0dG9uUmVwbGFjZW1lbnQ6IHtcblx0XHRlbmFibGVkOiBmYWxzZSxcblx0XHRjb21tYW5kSWQ6ICdlZGl0LWFzdHJvLWNvbmZpZycsXG5cdFx0aWNvbklkOiAnd3JlbmNoJyxcblx0fSxcblx0c2hvd01keEZpbGVzSW5FeHBsb3JlcjogZmFsc2UsXG59O1xuIiwgImltcG9ydCB7IFBsdWdpbiwgRWRpdG9yLCBNYXJrZG93blZpZXcsIFRGaWxlLCBOb3RpY2UsIEFwcCwgTWFya2Rvd25GaWxlSW5mbywgUGxhdGZvcm0sIFRGb2xkZXIgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgQXN0cm9Db21wb3NlclNldHRpbmdzLCBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlLCBDb250ZW50VHlwZSB9IGZyb20gXCIuLi90eXBlc1wiO1xyXG5pbXBvcnQgeyBGaWxlT3BlcmF0aW9ucyB9IGZyb20gXCIuLi91dGlscy9maWxlLW9wZXJhdGlvbnNcIjtcclxuaW1wb3J0IHsgVGVtcGxhdGVQYXJzZXIgfSBmcm9tIFwiLi4vdXRpbHMvdGVtcGxhdGUtcGFyc2luZ1wiO1xyXG5pbXBvcnQgeyBMaW5rQ29udmVydGVyIH0gZnJvbSBcIi4uL3V0aWxzL2xpbmstY29udmVyc2lvblwiO1xyXG5pbXBvcnQgeyBUaXRsZU1vZGFsIH0gZnJvbSBcIi4uL3VpL3RpdGxlLW1vZGFsXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJDb21tYW5kcyhwbHVnaW46IFBsdWdpbiwgc2V0dGluZ3M6IEFzdHJvQ29tcG9zZXJTZXR0aW5ncyk6IHZvaWQge1xyXG5cdC8vIFRlcm1pbmFsIGFuZCBjb25maWcgY29tbWFuZHMgYXJlIGRlc2t0b3Atb25seSAtIE5FVkVSIHJlZ2lzdGVyIG9uIG1vYmlsZVxyXG5cdC8vIENoZWNrIFBsYXRmb3JtLmlzTW9iaWxlIC0gaWYgdHJ1ZSwgdGhlc2UgY29tbWFuZHMgbXVzdCBORVZFUiBiZSByZWdpc3RlcmVkXHJcblx0Y29uc3QgaXNNb2JpbGUgPSBQbGF0Zm9ybS5pc01vYmlsZTtcclxuXHRcclxuXHQvLyBJZiBvbiBtb2JpbGUsIGFic29sdXRlbHkgZG8gbm90IHJlZ2lzdGVyIHRlcm1pbmFsL2NvbmZpZyBjb21tYW5kc1xyXG5cdC8vIFRoZXkgdXNlIE5vZGUuanMvRWxlY3Ryb24gQVBJcyB0aGF0IGRvbid0IGV4aXN0IG9uIG1vYmlsZVxyXG5cdGlmIChpc01vYmlsZSkge1xyXG5cdFx0Ly8gT24gbW9iaWxlLCBvbmx5IHJlZ2lzdGVyIHRoZSBzYWZlIGNvbW1hbmRzIHRoYXQgd29yayBvbiBtb2JpbGVcclxuXHRcdGNvbnN0IHBsdWdpbkludGVyZmFjZSA9IHBsdWdpbiBhcyB1bmtub3duIGFzIEFzdHJvQ29tcG9zZXJQbHVnaW5JbnRlcmZhY2U7XHJcblx0XHRjb25zdCBmaWxlT3BzID0gbmV3IEZpbGVPcGVyYXRpb25zKHBsdWdpbi5hcHAsIHNldHRpbmdzLCBwbHVnaW5JbnRlcmZhY2UgYXMgQXN0cm9Db21wb3NlclBsdWdpbkludGVyZmFjZSAmIHsgcGx1Z2luQ3JlYXRlZEZpbGVzPzogU2V0PHN0cmluZz4gfSk7XHJcblx0XHRjb25zdCBsaW5rQ29udmVydGVyID0gbmV3IExpbmtDb252ZXJ0ZXIoc2V0dGluZ3MsIHBsdWdpbkludGVyZmFjZSk7XHJcblx0XHRcclxuXHRcdC8vIFJlZ2lzdGVyIG9ubHkgbW9iaWxlLXNhZmUgY29tbWFuZHNcclxuXHRcdHBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6IFwic3RhbmRhcmRpemUtcHJvcGVydGllc1wiLFxyXG5cdFx0XHRuYW1lOiBcIlN0YW5kYXJkaXplIHByb3BlcnRpZXNcIixcclxuXHRcdFx0aWNvbjogXCJmaWxlLWNoZWNrXCIsXHJcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIGN0eDogTWFya2Rvd25WaWV3IHwgTWFya2Rvd25GaWxlSW5mbykgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGZpbGUgPSBjdHggaW5zdGFuY2VvZiBNYXJrZG93blZpZXcgPyBjdHguZmlsZSA6IGN0eC5maWxlO1xyXG5cdFx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHRcdC8vIEdldCBmcmVzaCBzZXR0aW5ncyBmcm9tIHBsdWdpblxyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFNldHRpbmdzID0gcGx1Z2luSW50ZXJmYWNlLnNldHRpbmdzIHx8IHNldHRpbmdzO1xyXG5cdFx0XHRcdFx0dm9pZCBzdGFuZGFyZGl6ZVByb3BlcnRpZXMocGx1Z2luLmFwcCwgY3VycmVudFNldHRpbmdzLCBmaWxlLCBwbHVnaW5JbnRlcmZhY2UsIGVkaXRvcik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0cGx1Z2luLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogXCJjb252ZXJ0LXdpa2lsaW5rcy1hc3Ryb1wiLFxyXG5cdFx0XHRuYW1lOiBcIkNvbnZlcnQgaW50ZXJuYWwgbGlua3MgZm9yIGFzdHJvXCIsXHJcblx0XHRcdGljb246IFwibGluay0yXCIsXHJcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIGN0eDogTWFya2Rvd25WaWV3IHwgTWFya2Rvd25GaWxlSW5mbykgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGZpbGUgPSBjdHggaW5zdGFuY2VvZiBNYXJrZG93blZpZXcgPyBjdHguZmlsZSA6IGN0eC5maWxlO1xyXG5cdFx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHRcdGxpbmtDb252ZXJ0ZXIuY29udmVydFdpa2lsaW5rc0ZvckFzdHJvKGVkaXRvciwgZmlsZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gSGVscGVyIGZ1bmN0aW9uIGZvciByZW5hbWUgY29tbWFuZCAobW9iaWxlIHZlcnNpb24pXHJcblx0XHQvLyBVc2VzIHRoZSBzYW1lIGxvZ2ljIGFzIEZpbGVPcGVyYXRpb25zLmRldGVybWluZVR5cGUoKSB0byBlbnN1cmUgY29uc2lzdGVuY3lcclxuXHRcdGZ1bmN0aW9uIGhhc01hdGNoaW5nQ29udGVudFR5cGUoZmlsZTogVEZpbGUsIHNldHRpbmdzOiBBc3Ryb0NvbXBvc2VyU2V0dGluZ3MpOiBib29sZWFuIHtcclxuXHRcdFx0Y29uc3QgdHlwZSA9IGZpbGVPcHMuZGV0ZXJtaW5lVHlwZShmaWxlKTtcclxuXHRcdFx0Ly8gSWYgZGV0ZXJtaW5lVHlwZSByZXR1cm5zIFwibm90ZVwiLCBpdCBtZWFucyBubyBjb250ZW50IHR5cGUgbWF0Y2hlZFxyXG5cdFx0XHRpZiAodHlwZSA9PT0gXCJub3RlXCIpIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIG1hdGNoZWQgY29udGVudCB0eXBlIGlzIGVuYWJsZWRcclxuXHRcdFx0Y29uc3QgY29udGVudFR5cGUgPSBmaWxlT3BzLmdldENvbnRlbnRUeXBlKHR5cGUpO1xyXG5cdFx0XHRyZXR1cm4gY29udGVudFR5cGUgIT09IG51bGwgJiYgY29udGVudFR5cGUuZW5hYmxlZDtcclxuXHRcdH1cclxuXHJcblx0XHRwbHVnaW4uYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiBcInJlbmFtZS1jb250ZW50XCIsXHJcblx0XHRcdG5hbWU6IFwiUmVuYW1lIGN1cnJlbnQgY29udGVudFwiLFxyXG5cdFx0XHRpY29uOiBcInBlbmNpbFwiLFxyXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCBjdHg6IE1hcmtkb3duVmlldyB8IE1hcmtkb3duRmlsZUluZm8pID0+IHtcclxuXHRcdFx0XHRjb25zdCBmaWxlID0gY3R4IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3ID8gY3R4LmZpbGUgOiBjdHguZmlsZTtcclxuXHRcdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRcdFx0XHRpZiAoIWhhc01hdGNoaW5nQ29udGVudFR5cGUoZmlsZSwgc2V0dGluZ3MpKSB7XHJcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJDYW5ub3QgcmVuYW1lOiB0aGlzIGZpbGUgaXMgbm90IHBhcnQgb2YgYSBjb25maWd1cmVkIGNvbnRlbnQgdHlwZSBmb2xkZXIuXCIpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGNvbnN0IHR5cGUgPSBmaWxlT3BzLmRldGVybWluZVR5cGUoZmlsZSk7XHJcblx0XHRcdFx0XHRjb25zdCBjYWNoZSA9IHBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XHJcblx0XHRcdFx0XHRjb25zdCB0aXRsZUtleSA9IGZpbGVPcHMuZ2V0VGl0bGVLZXkodHlwZSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmICghY2FjaGU/LmZyb250bWF0dGVyIHx8ICEodGl0bGVLZXkgaW4gY2FjaGUuZnJvbnRtYXR0ZXIpKSB7XHJcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYENhbm5vdCByZW5hbWU6IE5vICR7dGl0bGVLZXl9IGZvdW5kIGluIHByb3BlcnRpZXNgKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRuZXcgVGl0bGVNb2RhbChwbHVnaW4uYXBwLCBmaWxlLCBwbHVnaW4gYXMgdW5rbm93biBhcyBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlLCB0eXBlLCB0cnVlKS5vcGVuKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gRE8gTk9UIHJlZ2lzdGVyIHRlcm1pbmFsIG9yIGNvbmZpZyBjb21tYW5kcyBvbiBtb2JpbGUgLSByZXR1cm4gZWFybHlcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblx0XHJcblx0Ly8gRGVza3RvcDogcmVnaXN0ZXIgYWxsIGNvbW1hbmRzIGluY2x1ZGluZyB0ZXJtaW5hbCBhbmQgY29uZmlnXHJcblx0Y29uc3QgcGx1Z2luSW50ZXJmYWNlID0gcGx1Z2luIGFzIHVua25vd24gYXMgQXN0cm9Db21wb3NlclBsdWdpbkludGVyZmFjZTtcclxuXHJcblxyXG5cdC8vIEhlbHBlciBmdW5jdGlvbiB0byBjaGVjayBpZiBhIGZpbGUgbWF0Y2hlcyBhbnkgY29uZmlndXJlZCBjb250ZW50IHR5cGVcclxuXHQvLyBVc2VzIHRoZSBzYW1lIGxvZ2ljIGFzIEZpbGVPcGVyYXRpb25zLmRldGVybWluZVR5cGUoKSB0byBlbnN1cmUgY29uc2lzdGVuY3lcclxuXHQvLyBHZXRzIGZyZXNoIHNldHRpbmdzIGZyb20gcGx1Z2luIHRvIGVuc3VyZSB3ZSBjaGVjayBhZ2FpbnN0IGN1cnJlbnQgY29udGVudCB0eXBlc1xyXG5cdGZ1bmN0aW9uIGhhc01hdGNoaW5nQ29udGVudFR5cGUoZmlsZTogVEZpbGUsIHNldHRpbmdzOiBBc3Ryb0NvbXBvc2VyU2V0dGluZ3MpOiBib29sZWFuIHtcclxuXHRcdC8vIEdldCBmcmVzaCBzZXR0aW5ncyBmcm9tIHBsdWdpbiBpZiBhdmFpbGFibGVcclxuXHRcdGNvbnN0IGN1cnJlbnRTZXR0aW5ncyA9IChwbHVnaW4gYXMgdW5rbm93biBhcyBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlKT8uc2V0dGluZ3MgfHwgc2V0dGluZ3M7XHJcblx0XHQvLyBDcmVhdGUgYSB0ZW1wb3JhcnkgRmlsZU9wZXJhdGlvbnMgd2l0aCBmcmVzaCBzZXR0aW5nc1xyXG5cdFx0Y29uc3QgdGVtcEZpbGVPcHMgPSBuZXcgRmlsZU9wZXJhdGlvbnMocGx1Z2luLmFwcCwgY3VycmVudFNldHRpbmdzLCBwbHVnaW4gYXMgdW5rbm93biBhcyBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlICYgeyBwbHVnaW5DcmVhdGVkRmlsZXM/OiBTZXQ8c3RyaW5nPiB9KTtcclxuXHRcdGNvbnN0IHR5cGUgPSB0ZW1wRmlsZU9wcy5kZXRlcm1pbmVUeXBlKGZpbGUpO1xyXG5cdFx0Ly8gSWYgZGV0ZXJtaW5lVHlwZSByZXR1cm5zIFwibm90ZVwiLCBpdCBtZWFucyBubyBjb250ZW50IHR5cGUgbWF0Y2hlZFxyXG5cdFx0aWYgKHR5cGUgPT09IFwibm90ZVwiKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdC8vIENoZWNrIGlmIHRoZSBtYXRjaGVkIGNvbnRlbnQgdHlwZSBpcyBlbmFibGVkXHJcblx0XHRjb25zdCBjb250ZW50VHlwZSA9IHRlbXBGaWxlT3BzLmdldENvbnRlbnRUeXBlKHR5cGUpO1xyXG5cdFx0cmV0dXJuIGNvbnRlbnRUeXBlICE9PSBudWxsICYmIGNvbnRlbnRUeXBlLmVuYWJsZWQ7XHJcblx0fVxyXG5cclxuXHQvLyBTdGFuZGFyZGl6ZSBQcm9wZXJ0aWVzIGNvbW1hbmRcclxuXHRwbHVnaW4uYWRkQ29tbWFuZCh7XHJcblx0XHRpZDogXCJzdGFuZGFyZGl6ZS1wcm9wZXJ0aWVzXCIsXHJcblx0XHRuYW1lOiBcIlN0YW5kYXJkaXplIHByb3BlcnRpZXNcIixcclxuXHRcdGljb246IFwiZmlsZS1jaGVja1wiLFxyXG5cdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgY3R4OiBNYXJrZG93blZpZXcgfCBNYXJrZG93bkZpbGVJbmZvKSA9PiB7XHJcblx0XHRcdGNvbnN0IGZpbGUgPSBjdHggaW5zdGFuY2VvZiBNYXJrZG93blZpZXcgPyBjdHguZmlsZSA6IGN0eC5maWxlO1xyXG5cdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRcdFx0dm9pZCBzdGFuZGFyZGl6ZVByb3BlcnRpZXMocGx1Z2luLmFwcCwgc2V0dGluZ3MsIGZpbGUsIHBsdWdpbiBhcyB1bmtub3duIGFzIEFzdHJvQ29tcG9zZXJQbHVnaW5JbnRlcmZhY2UsIGVkaXRvcik7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0fSk7XHJcblxyXG5cdC8vIENvbnZlcnQgV2lraWxpbmtzIGNvbW1hbmRcclxuXHRwbHVnaW4uYWRkQ29tbWFuZCh7XHJcblx0XHRpZDogXCJjb252ZXJ0LXdpa2lsaW5rcy1hc3Ryb1wiLFxyXG5cdFx0bmFtZTogXCJDb252ZXJ0IGludGVybmFsIGxpbmtzIGZvciBhc3Ryb1wiLFxyXG5cdFx0aWNvbjogXCJsaW5rLTJcIixcclxuXHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIGN0eDogTWFya2Rvd25WaWV3IHwgTWFya2Rvd25GaWxlSW5mbykgPT4ge1xyXG5cdFx0XHRjb25zdCBmaWxlID0gY3R4IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3ID8gY3R4LmZpbGUgOiBjdHguZmlsZTtcclxuXHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdC8vIEdldCBmcmVzaCBzZXR0aW5ncyBmcm9tIHBsdWdpbiBhbmQgY3JlYXRlIExpbmtDb252ZXJ0ZXIgd2l0aCBpdFxyXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRTZXR0aW5ncyA9IHBsdWdpbkludGVyZmFjZS5zZXR0aW5ncyB8fCBzZXR0aW5ncztcclxuXHRcdFx0XHRjb25zdCBjdXJyZW50TGlua0NvbnZlcnRlciA9IG5ldyBMaW5rQ29udmVydGVyKGN1cnJlbnRTZXR0aW5ncywgcGx1Z2luSW50ZXJmYWNlKTtcclxuXHRcdFx0XHRjdXJyZW50TGlua0NvbnZlcnRlci5jb252ZXJ0V2lraWxpbmtzRm9yQXN0cm8oZWRpdG9yLCBmaWxlKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHR9KTtcclxuXHJcblx0XHQvLyBSZW5hbWUgQ29udGVudCBjb21tYW5kXHJcblx0XHRwbHVnaW4uYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiBcInJlbmFtZS1jb250ZW50XCIsXHJcblx0XHRcdG5hbWU6IFwiUmVuYW1lIGN1cnJlbnQgY29udGVudFwiLFxyXG5cdFx0XHRpY29uOiBcInBlbmNpbFwiLFxyXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCBjdHg6IE1hcmtkb3duVmlldyB8IE1hcmtkb3duRmlsZUluZm8pID0+IHtcclxuXHRcdFx0XHRjb25zdCBmaWxlID0gY3R4IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3ID8gY3R4LmZpbGUgOiBjdHguZmlsZTtcclxuXHRcdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRcdFx0XHQvLyBHZXQgZnJlc2ggc2V0dGluZ3MgZnJvbSBwbHVnaW5cclxuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRTZXR0aW5ncyA9IHBsdWdpbkludGVyZmFjZS5zZXR0aW5ncyB8fCBzZXR0aW5ncztcclxuXHRcdFx0XHRcdC8vIENyZWF0ZSBGaWxlT3BlcmF0aW9ucyB3aXRoIGZyZXNoIHNldHRpbmdzXHJcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50RmlsZU9wcyA9IG5ldyBGaWxlT3BlcmF0aW9ucyhwbHVnaW4uYXBwLCBjdXJyZW50U2V0dGluZ3MsIHBsdWdpbkludGVyZmFjZSBhcyBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlICYgeyBwbHVnaW5DcmVhdGVkRmlsZXM/OiBTZXQ8c3RyaW5nPiB9KTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBmaWxlIG1hdGNoZXMgYW55IGNvbmZpZ3VyZWQgY29udGVudCB0eXBlXHJcblx0XHRcdFx0XHRpZiAoIWhhc01hdGNoaW5nQ29udGVudFR5cGUoZmlsZSwgY3VycmVudFNldHRpbmdzKSkge1xyXG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQ2Fubm90IHJlbmFtZTogdGhpcyBmaWxlIGlzIG5vdCBwYXJ0IG9mIGEgY29uZmlndXJlZCBjb250ZW50IHR5cGUgZm9sZGVyLlwiKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBEZXRlcm1pbmUgY29udGVudCB0eXBlIGZyb20gZm9sZGVyIHN0cnVjdHVyZVxyXG5cdFx0XHRcdFx0Y29uc3QgdHlwZSA9IGN1cnJlbnRGaWxlT3BzLmRldGVybWluZVR5cGUoZmlsZSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIEFsd2F5cyBvcGVuIHRoZSBtb2RhbCAtIGl0IHdpbGwgaGFuZGxlIGZpbGVzIHdpdGhvdXQgZnJvbnRtYXR0ZXIgb3IgdGl0bGUga2V5XHJcblx0XHRcdFx0XHQvLyBJZiB0aGVyZSdzIG5vIHRpdGxlIGluIGZyb250bWF0dGVyLCB0aGUgbW9kYWwgd2lsbCB1c2UgdGhlIGZpbGVuYW1lIGFzIGZhbGxiYWNrXHJcblx0XHRcdFx0XHQvLyBhbmQgdGhlIHJlbmFtZSB3aWxsIHByb2NlZWQgd2l0aCBrZWJhYi1jYXNlIHZlcnNpb24gb2Ygd2hhdCB1c2VyIHR5cGVzXHJcblx0XHRcdFx0XHRuZXcgVGl0bGVNb2RhbChwbHVnaW4uYXBwLCBmaWxlLCBwbHVnaW5JbnRlcmZhY2UsIHR5cGUsIHRydWUpLm9wZW4oKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHJcblx0Ly8gT3BlbiBUZXJtaW5hbCBjb21tYW5kIChkZXNrdG9wIG9ubHkgLSBub3QgYXZhaWxhYmxlIG9uIG1vYmlsZSlcclxuXHRpZiAoIWlzTW9iaWxlKSB7XHJcblx0XHRwbHVnaW4uYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiBcIm9wZW4tcHJvamVjdC10ZXJtaW5hbFwiLFxyXG5cdFx0XHRuYW1lOiBcIk9wZW4gcHJvamVjdCB0ZXJtaW5hbFwiLFxyXG5cdFx0XHRpY29uOiBcInRlcm1pbmFsLXNxdWFyZVwiLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRTZXR0aW5ncyA9IChwbHVnaW4gYXMgdW5rbm93biBhcyBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlKS5zZXR0aW5ncztcclxuXHRcdFx0XHRpZiAoIWN1cnJlbnRTZXR0aW5ncy5lbmFibGVPcGVuVGVybWluYWxDb21tYW5kKSB7XHJcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiT3BlbiB0ZXJtaW5hbCBjb21tYW5kIGlzIGRpc2FibGVkLiBFbmFibGUgaXQgaW4gc2V0dGluZ3MgdG8gdXNlIHRoaXMgY29tbWFuZC5cIik7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdG9wZW5UZXJtaW5hbEluUHJvamVjdFJvb3QocGx1Z2luLmFwcCwgY3VycmVudFNldHRpbmdzKTtcclxuXHRcdFx0fSxcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Ly8gRWRpdCBDb25maWcgRmlsZSBjb21tYW5kIChkZXNrdG9wIG9ubHkgLSBub3QgYXZhaWxhYmxlIG9uIG1vYmlsZSlcclxuXHRpZiAoIWlzTW9iaWxlKSB7XHJcblx0XHRwbHVnaW4uYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiBcImVkaXQtYXN0cm8tY29uZmlnXCIsXHJcblx0XHRcdG5hbWU6IFwiRWRpdCBhc3RybyBjb25maWdcIixcclxuXHRcdFx0aWNvbjogXCJ3cmVuY2hcIixcclxuXHRcdFx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRjb25zdCBjdXJyZW50U2V0dGluZ3MgPSAocGx1Z2luIGFzIHVua25vd24gYXMgQXN0cm9Db21wb3NlclBsdWdpbkludGVyZmFjZSkuc2V0dGluZ3M7XHJcblx0XHRcdFx0aWYgKCFjdXJyZW50U2V0dGluZ3MuZW5hYmxlT3BlbkNvbmZpZ0ZpbGVDb21tYW5kKSB7XHJcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiRWRpdCBjb25maWcgZmlsZSBjb21tYW5kIGlzIGRpc2FibGVkLiBFbmFibGUgaXQgaW4gc2V0dGluZ3MgdG8gdXNlIHRoaXMgY29tbWFuZC5cIik7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGF3YWl0IG9wZW5Db25maWdGaWxlKHBsdWdpbi5hcHAsIGN1cnJlbnRTZXR0aW5ncyk7XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHR9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHN0YW5kYXJkaXplUHJvcGVydGllcyhhcHA6IEFwcCwgc2V0dGluZ3M6IEFzdHJvQ29tcG9zZXJTZXR0aW5ncywgZmlsZTogVEZpbGUsIHBsdWdpbj86IEFzdHJvQ29tcG9zZXJQbHVnaW5JbnRlcmZhY2UsIGVkaXRvcj86IEVkaXRvcik6IFByb21pc2U8dm9pZD4ge1xyXG5cdC8vIEdldCBmcmVzaCBzZXR0aW5ncyBmcm9tIHBsdWdpbiBpZiBhdmFpbGFibGVcclxuXHRjb25zdCBjdXJyZW50U2V0dGluZ3MgPSBwbHVnaW4/LnNldHRpbmdzIHx8IHNldHRpbmdzO1xyXG5cdGNvbnN0IHRlbXBsYXRlUGFyc2VyID0gbmV3IFRlbXBsYXRlUGFyc2VyKGFwcCwgY3VycmVudFNldHRpbmdzKTtcclxuXHRjb25zdCBmaWxlT3BzID0gbmV3IEZpbGVPcGVyYXRpb25zKGFwcCwgY3VycmVudFNldHRpbmdzLCBwbHVnaW4pO1xyXG5cdFxyXG5cdC8vIFByZXNlcnZlIGN1cnNvciBwb3NpdGlvbiBpZiBlZGl0b3IgaXMgcHJvdmlkZWRcclxuXHRsZXQgY3Vyc29yUG9zaXRpb246IHsgbGluZTogbnVtYmVyOyBjaDogbnVtYmVyIH0gfCBudWxsID0gbnVsbDtcclxuXHRsZXQgb3JpZ2luYWxDb250ZW50ID0gXCJcIjtcclxuXHRpZiAoZWRpdG9yKSB7XHJcblx0XHRjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcblx0XHRjdXJzb3JQb3NpdGlvbiA9IHsgbGluZTogY3Vyc29yLmxpbmUsIGNoOiBjdXJzb3IuY2ggfTtcclxuXHRcdG9yaWdpbmFsQ29udGVudCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xyXG5cdH1cclxuXHRcclxuXHQvLyBEZXRlcm1pbmUgY29udGVudCB0eXBlIHVzaW5nIHRoZSBleGlzdGluZyBsb2dpY1xyXG5cdGNvbnN0IHR5cGUgPSBmaWxlT3BzLmRldGVybWluZVR5cGUoZmlsZSk7XHJcblx0XHJcblx0Ly8gQ2hlY2sgaWYgdGhpcyBmaWxlIGhhcyBhIHZhbGlkIGNvbnRlbnQgdHlwZSAobm90IGp1c3QgXCJub3RlXCIpXHJcblx0aWYgKHR5cGUgPT09IFwibm90ZVwiKSB7XHJcblx0XHRuZXcgTm90aWNlKFwiTm8gcHJvcGVydGllcyB0ZW1wbGF0ZSBzcGVjaWZpZWQgZm9yIHRoaXMgY29udGVudC4gVGhpcyBmaWxlIGRvZXNuJ3QgbWF0Y2ggYW55IGNvbmZpZ3VyZWQgY29udGVudCB0eXBlIGZvbGRlcnMuXCIpO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHRcclxuXHRsZXQgdGVtcGxhdGVTdHJpbmc6IHN0cmluZztcclxuXHRcclxuXHQvLyBEZXRlcm1pbmUgdGVtcGxhdGUgYmFzZWQgb24gY29udGVudCB0eXBlXHJcblx0aWYgKHR5cGUgPT09IFwibm90ZVwiKSB7XHJcblx0XHRuZXcgTm90aWNlKFwiTm8gcHJvcGVydGllcyB0ZW1wbGF0ZSBzcGVjaWZpZWQgZm9yIHRoaXMgY29udGVudC4gVGhpcyBmaWxlIGRvZXNuJ3QgbWF0Y2ggYW55IGNvbmZpZ3VyZWQgY29udGVudCB0eXBlIGZvbGRlcnMuXCIpO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHRcclxuXHRjb25zdCBjb250ZW50VHlwZSA9IGZpbGVPcHMuZ2V0Q29udGVudFR5cGUodHlwZSk7XHJcblx0aWYgKCFjb250ZW50VHlwZSkge1xyXG5cdFx0bmV3IE5vdGljZShcIkNvbnRlbnQgdHlwZSBub3QgZm91bmQuXCIpO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHRcclxuXHR0ZW1wbGF0ZVN0cmluZyA9IGNvbnRlbnRUeXBlLnRlbXBsYXRlO1xyXG5cclxuXHQvLyBXYWl0IGJyaWVmbHkgdG8gYWxsb3cgZWRpdG9yIHN0YXRlIHRvIHN0YWJpbGl6ZVxyXG5cdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcclxuXHJcblx0Ly8gUmUtcmVhZCBjb250ZW50IHRvIGVuc3VyZSBsYXRlc3Qgc3RhdGUgYWZ0ZXIgZWRpdG9yIGNoYW5nZXNcclxuXHRjb25zdCBjb250ZW50ID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcblx0Y29uc3QgdGl0bGUgPSBmaWxlLmJhc2VuYW1lLnJlcGxhY2UoL15fLywgXCJcIik7XHJcblx0XHJcblx0Y29uc3QgcGFyc2VkID0gdGVtcGxhdGVQYXJzZXIucGFyc2VGcm9udG1hdHRlcihjb250ZW50KTtcclxuXHRjb25zdCB7IHRlbXBsYXRlUHJvcHMsIHRlbXBsYXRlVmFsdWVzIH0gPSB0ZW1wbGF0ZVBhcnNlci5wYXJzZVRlbXBsYXRlKHRlbXBsYXRlU3RyaW5nLCB0aXRsZSk7XHJcblxyXG5cdC8vIE1lcmdlIHRlbXBsYXRlIHByb3BlcnRpZXMgd2l0aCBleGlzdGluZyBvbmVzLCBwcmVzZXJ2aW5nIGFsbCBleGlzdGluZ1xyXG5cdGNvbnN0IGZpbmFsUHJvcHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHsgLi4ucGFyc2VkLnByb3BlcnRpZXMgfTtcclxuXHRjb25zdCBhcnJheUtleXMgPSBuZXcgU2V0PHN0cmluZz4oKTsgLy8gVHJhY2sgd2hpY2gga2V5cyBhcmUgYXJyYXlzXHJcblx0XHJcblx0Ly8gR2VuZXJhdGUgc2x1ZyBmcm9tIHRpdGxlIGZvciBzbHVnIHByb3BlcnR5IGF1dG8tcG9wdWxhdGlvblxyXG5cdGNvbnN0IHNsdWcgPSBmaWxlT3BzLnRvS2ViYWJDYXNlKHRpdGxlKTtcclxuXHRcclxuXHRmb3IgKGNvbnN0IGtleSBvZiB0ZW1wbGF0ZVByb3BzKSB7XHJcblx0XHRpZiAoIShrZXkgaW4gcGFyc2VkLnByb3BlcnRpZXMpKSB7XHJcblx0XHRcdC8vIFByb3BlcnR5IGRvZXNuJ3QgZXhpc3QsIGFkZCBpdCBmcm9tIHRlbXBsYXRlXHJcblx0XHRcdGNvbnN0IHRlbXBsYXRlVmFsdWUgPSB0ZW1wbGF0ZVZhbHVlc1trZXldO1xyXG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheSh0ZW1wbGF0ZVZhbHVlKSkge1xyXG5cdFx0XHRcdGZpbmFsUHJvcHNba2V5XSA9IHRlbXBsYXRlVmFsdWU7XHJcblx0XHRcdFx0YXJyYXlLZXlzLmFkZChrZXkpOyAvLyBNYXJrIGFzIGFycmF5XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZmluYWxQcm9wc1trZXldID0gW3RlbXBsYXRlVmFsdWUgfHwgXCJcIl07XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIFByb3BlcnR5IGV4aXN0cywgY2hlY2sgaWYgaXQncyBhbiBhcnJheSB0eXBlXHJcblx0XHRcdGNvbnN0IHRlbXBsYXRlVmFsdWUgPSB0ZW1wbGF0ZVZhbHVlc1trZXldO1xyXG5cdFx0XHRjb25zdCBpc0FycmF5VmFsdWUgPSBBcnJheS5pc0FycmF5KHRlbXBsYXRlVmFsdWUpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGlzQXJyYXlWYWx1ZSkge1xyXG5cdFx0XHRcdC8vIFRoaXMgaXMgYW4gYXJyYXkgcHJvcGVydHkgLSBwcmVzZXJ2ZSBleGlzdGluZyB2YWx1ZXMgYW5kIG1lcmdlIHdpdGggdGVtcGxhdGVcclxuXHRcdFx0XHRjb25zdCBleGlzdGluZ0l0ZW1zID0gcGFyc2VkLnByb3BlcnRpZXNba2V5XSB8fCBbXTtcclxuXHRcdFx0XHRjb25zdCBuZXdJdGVtcyA9IHRlbXBsYXRlVmFsdWUuZmlsdGVyKGl0ZW0gPT4gIWV4aXN0aW5nSXRlbXMuaW5jbHVkZXMoaXRlbSkpO1xyXG5cdFx0XHRcdGZpbmFsUHJvcHNba2V5XSA9IFsuLi5leGlzdGluZ0l0ZW1zLCAuLi5uZXdJdGVtc107XHJcblx0XHRcdFx0YXJyYXlLZXlzLmFkZChrZXkpOyAvLyBNYXJrIGFzIGFycmF5XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gRm9yIG5vbi1hcnJheSB2YWx1ZXMsIGNoZWNrIGlmIGl0J3Mgc2x1ZyBhbmQgbmVlZHMgYXV0by1wb3B1bGF0aW9uXHJcblx0XHRcdFx0aWYgKGtleSA9PT0gXCJzbHVnXCIpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nU2x1ZyA9IHBhcnNlZC5wcm9wZXJ0aWVzW2tleV1bMF0gfHwgXCJcIjtcclxuXHRcdFx0XHRcdC8vIE9ubHkgYXV0by1wb3B1bGF0ZSBpZiBzbHVnIGlzIGVtcHR5IG9yIG1pc3NpbmdcclxuXHRcdFx0XHRcdGlmICghZXhpc3RpbmdTbHVnIHx8IGV4aXN0aW5nU2x1Zy50cmltKCkgPT09IFwiXCIpIHtcclxuXHRcdFx0XHRcdFx0ZmluYWxQcm9wc1trZXldID0gW3NsdWddO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gSWYgc2x1ZyBoYXMgYSB2YWx1ZSwgcHJlc2VydmUgaXQgKGRvbid0IG92ZXJ3cml0ZSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gRm9yIG90aGVyIG5vbi1hcnJheSB2YWx1ZXMsIGtlZXAgZXhpc3RpbmcgdmFsdWUgKGRvbid0IG92ZXJ3cml0ZSlcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBBbHNvIGNoZWNrIGlmIHNsdWcgcHJvcGVydHkgZXhpc3RzIGluIGZyb250bWF0dGVyIGJ1dCBpcyBlbXB0eSAoZXZlbiBpZiBub3QgaW4gdGVtcGxhdGUpXHJcblx0Ly8gT25seSBhdXRvLXBvcHVsYXRlIGlmIHRlbXBsYXRlIGhhcyB7e3NsdWd9fSBwbGFjZWhvbGRlclxyXG5cdGlmIChcInNsdWdcIiBpbiBwYXJzZWQucHJvcGVydGllcyAmJiB0ZW1wbGF0ZVN0cmluZy5pbmNsdWRlcyhcInt7c2x1Z319XCIpKSB7XHJcblx0XHRjb25zdCBleGlzdGluZ1NsdWcgPSBwYXJzZWQucHJvcGVydGllc1tcInNsdWdcIl1bMF0gfHwgXCJcIjtcclxuXHRcdGlmICghZXhpc3RpbmdTbHVnIHx8IGV4aXN0aW5nU2x1Zy50cmltKCkgPT09IFwiXCIpIHtcclxuXHRcdFx0Ly8gU2x1ZyBleGlzdHMgYnV0IGlzIGVtcHR5LCBhbmQgdGVtcGxhdGUgaGFzIHt7c2x1Z319IC0gYXV0by1wb3B1bGF0ZSBpdFxyXG5cdFx0XHRmaW5hbFByb3BzW1wic2x1Z1wiXSA9IFtzbHVnXTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIEFsc28gYWRkIGFueSBleGlzdGluZyBhcnJheSBrZXlzIHRoYXQgd2VyZW4ndCBpbiB0aGUgdGVtcGxhdGVcclxuXHRmb3IgKGNvbnN0IGtleSBpbiBwYXJzZWQucHJvcGVydGllcykge1xyXG5cdFx0aWYgKHBhcnNlZC5wcm9wZXJ0aWVzW2tleV0ubGVuZ3RoID4gMSkge1xyXG5cdFx0XHRhcnJheUtleXMuYWRkKGtleSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRjb25zdCBuZXdDb250ZW50ID0gdGVtcGxhdGVQYXJzZXIuYnVpbGRGcm9udG1hdHRlckNvbnRlbnQoZmluYWxQcm9wcywgYXJyYXlLZXlzKSArIHBhcnNlZC5ib2R5Q29udGVudDtcclxuXHJcblx0YXdhaXQgYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBuZXdDb250ZW50KTtcclxuXHRcclxuXHQvLyBSZXN0b3JlIGN1cnNvciBwb3NpdGlvbiBpZiBlZGl0b3Igd2FzIHByb3ZpZGVkIGFuZCBmaWxlIGlzIHN0aWxsIG9wZW5cclxuXHRpZiAoZWRpdG9yICYmIGN1cnNvclBvc2l0aW9uKSB7XHJcblx0XHQvLyBXYWl0IGZvciBPYnNpZGlhbiB0byByZWxvYWQgdGhlIGZpbGUgaW4gdGhlIGVkaXRvclxyXG5cdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwKSk7XHJcblx0XHRcclxuXHRcdC8vIFRyeSB0byBnZXQgdGhlIGFjdGl2ZSBlZGl0b3IgZm9yIHRoaXMgZmlsZVxyXG5cdFx0Y29uc3QgYWN0aXZlVmlldyA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0aWYgKGFjdGl2ZVZpZXcgJiYgYWN0aXZlVmlldy5maWxlID09PSBmaWxlICYmIGFjdGl2ZVZpZXcuZWRpdG9yKSB7XHJcblx0XHRcdGNvbnN0IGFjdGl2ZUVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xyXG5cdFx0XHRjb25zdCBuZXdMaW5lQ291bnQgPSBuZXdDb250ZW50LnNwbGl0KCdcXG4nKS5sZW5ndGg7XHJcblx0XHRcdGNvbnN0IG9yaWdpbmFsTGluZUNvdW50ID0gb3JpZ2luYWxDb250ZW50LnNwbGl0KCdcXG4nKS5sZW5ndGg7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDYWxjdWxhdGUgbmV3IGN1cnNvciBwb3NpdGlvblxyXG5cdFx0XHRsZXQgbmV3TGluZSA9IGN1cnNvclBvc2l0aW9uLmxpbmU7XHJcblx0XHRcdGxldCBuZXdDaCA9IGN1cnNvclBvc2l0aW9uLmNoO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQWRqdXN0IGZvciBjb250ZW50IGNoYW5nZXNcclxuXHRcdFx0aWYgKG5ld0xpbmVDb3VudCAhPT0gb3JpZ2luYWxMaW5lQ291bnQpIHtcclxuXHRcdFx0XHQvLyBJZiBsaW5lcyB3ZXJlIGFkZGVkL3JlbW92ZWQsIGFkanVzdCBsaW5lIG51bWJlclxyXG5cdFx0XHRcdGlmIChuZXdMaW5lID49IG5ld0xpbmVDb3VudCkge1xyXG5cdFx0XHRcdFx0bmV3TGluZSA9IE1hdGgubWF4KDAsIG5ld0xpbmVDb3VudCAtIDEpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQWRqdXN0IGNvbHVtbiBwb3NpdGlvbiBpZiBsaW5lIGxlbmd0aCBjaGFuZ2VkXHJcblx0XHRcdGNvbnN0IG5ld0xpbmVMZW5ndGggPSBuZXdDb250ZW50LnNwbGl0KCdcXG4nKVtuZXdMaW5lXT8ubGVuZ3RoIHx8IDA7XHJcblx0XHRcdGlmIChuZXdDaCA+IG5ld0xpbmVMZW5ndGgpIHtcclxuXHRcdFx0XHRuZXdDaCA9IE1hdGgubWF4KDAsIG5ld0xpbmVMZW5ndGgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBSZXN0b3JlIGN1cnNvciBwb3NpdGlvblxyXG5cdFx0XHRhY3RpdmVFZGl0b3Iuc2V0Q3Vyc29yKHsgbGluZTogbmV3TGluZSwgY2g6IG5ld0NoIH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRuZXcgTm90aWNlKFwiUHJvcGVydGllcyBzdGFuZGFyZGl6ZWQgdXNpbmcgdGVtcGxhdGUuXCIpO1xyXG59XHJcblxyXG4vKipcclxuICogUmVuYW1lIGEgZmlsZSBieSBwYXRoIChmb3IgcHJvZ3JhbW1hdGljIHVzZSwgZS5nLiwgZnJvbSBvdGhlciBwbHVnaW5zKVxyXG4gKiBUaGlzIGFsbG93cyB0aGUgcmVuYW1lIG1vZGFsIHRvIGFwcGVhciB3aXRob3V0IG9wZW5pbmcgdGhlIGZpbGUgZmlyc3RcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW5hbWVDb250ZW50QnlQYXRoKFxyXG5cdGFwcDogQXBwLFxyXG5cdGZpbGVQYXRoOiBzdHJpbmcsXHJcblx0c2V0dGluZ3M6IEFzdHJvQ29tcG9zZXJTZXR0aW5ncyxcclxuXHRwbHVnaW46IEFzdHJvQ29tcG9zZXJQbHVnaW5JbnRlcmZhY2VcclxuKTogdm9pZCB7XHJcblx0Y29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xyXG5cdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcclxuXHRcdG5ldyBOb3RpY2UoYEZpbGUgbm90IGZvdW5kOiAke2ZpbGVQYXRofWApO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgZmlsZU9wcyA9IG5ldyBGaWxlT3BlcmF0aW9ucyhhcHAsIHNldHRpbmdzLCBwbHVnaW4gYXMgdW5rbm93biBhcyBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlICYgeyBwbHVnaW5DcmVhdGVkRmlsZXM/OiBTZXQ8c3RyaW5nPiB9KTtcclxuXHJcblx0Ly8gSGVscGVyIGZ1bmN0aW9uIHRvIGNoZWNrIGlmIGZpbGUgbWF0Y2hlcyBjb250ZW50IHR5cGVcclxuXHQvLyBVc2VzIHRoZSBzYW1lIGxvZ2ljIGFzIEZpbGVPcGVyYXRpb25zLmRldGVybWluZVR5cGUoKSB0byBlbnN1cmUgY29uc2lzdGVuY3lcclxuXHRmdW5jdGlvbiBoYXNNYXRjaGluZ0NvbnRlbnRUeXBlKGZpbGU6IFRGaWxlLCBzZXR0aW5nczogQXN0cm9Db21wb3NlclNldHRpbmdzKTogYm9vbGVhbiB7XHJcblx0XHRjb25zdCB0eXBlID0gZmlsZU9wcy5kZXRlcm1pbmVUeXBlKGZpbGUpO1xyXG5cdFx0Ly8gSWYgZGV0ZXJtaW5lVHlwZSByZXR1cm5zIFwibm90ZVwiLCBpdCBtZWFucyBubyBjb250ZW50IHR5cGUgbWF0Y2hlZFxyXG5cdFx0aWYgKHR5cGUgPT09IFwibm90ZVwiKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdC8vIENoZWNrIGlmIHRoZSBtYXRjaGVkIGNvbnRlbnQgdHlwZSBpcyBlbmFibGVkXHJcblx0XHRjb25zdCBjb250ZW50VHlwZSA9IGZpbGVPcHMuZ2V0Q29udGVudFR5cGUodHlwZSk7XHJcblx0XHRyZXR1cm4gY29udGVudFR5cGUgIT09IG51bGwgJiYgY29udGVudFR5cGUuZW5hYmxlZDtcclxuXHR9XHJcblxyXG5cdGlmICghaGFzTWF0Y2hpbmdDb250ZW50VHlwZShmaWxlLCBzZXR0aW5ncykpIHtcclxuXHRcdG5ldyBOb3RpY2UoXCJDYW5ub3QgcmVuYW1lOiB0aGlzIGZpbGUgaXMgbm90IHBhcnQgb2YgYSBjb25maWd1cmVkIGNvbnRlbnQgdHlwZSBmb2xkZXIuXCIpO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgdHlwZSA9IGZpbGVPcHMuZGV0ZXJtaW5lVHlwZShmaWxlKTtcclxuXHRcclxuXHQvLyBBbHdheXMgb3BlbiB0aGUgbW9kYWwgLSBpdCB3aWxsIGhhbmRsZSBmaWxlcyB3aXRob3V0IGZyb250bWF0dGVyIG9yIHRpdGxlIGtleVxyXG5cdC8vIElmIHRoZXJlJ3Mgbm8gdGl0bGUgaW4gZnJvbnRtYXR0ZXIsIHRoZSBtb2RhbCB3aWxsIHVzZSB0aGUgZmlsZW5hbWUgYXMgZmFsbGJhY2tcclxuXHQvLyBhbmQgdGhlIHJlbmFtZSB3aWxsIHByb2NlZWQgd2l0aCBrZWJhYi1jYXNlIHZlcnNpb24gb2Ygd2hhdCB1c2VyIHR5cGVzXHJcblx0bmV3IFRpdGxlTW9kYWwoYXBwLCBmaWxlLCBwbHVnaW4sIHR5cGUsIHRydWUpLm9wZW4oKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlZ2lzdGVyIGNvbW1hbmRzIGZvciBlYWNoIGVuYWJsZWQgY29udGVudCB0eXBlXHJcbiAqIEVhY2ggY29tbWFuZCBjcmVhdGVzIGEgbmV3IGZpbGUgaW4gdGhlIGNvbnRlbnQgdHlwZSdzIGZvbGRlciBhbmQgb3BlbnMgdGhlIFRpdGxlTW9kYWxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckNvbnRlbnRUeXBlQ29tbWFuZHMocGx1Z2luOiBQbHVnaW4sIHNldHRpbmdzOiBBc3Ryb0NvbXBvc2VyU2V0dGluZ3MpOiB2b2lkIHtcclxuXHRjb25zdCBwbHVnaW5JbnRlcmZhY2UgPSBwbHVnaW4gYXMgdW5rbm93biBhcyBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlO1xyXG5cdGNvbnN0IGNvbnRlbnRUeXBlcyA9IHNldHRpbmdzLmNvbnRlbnRUeXBlcyB8fCBbXTtcclxuXHRcclxuXHQvLyBSZWdpc3RlciBhIGNvbW1hbmQgZm9yIGVhY2ggZW5hYmxlZCBjb250ZW50IHR5cGVcclxuXHRmb3IgKGNvbnN0IGNvbnRlbnRUeXBlIG9mIGNvbnRlbnRUeXBlcykge1xyXG5cdFx0aWYgKCFjb250ZW50VHlwZS5lbmFibGVkKSB7XHJcblx0XHRcdGNvbnRpbnVlOyAvLyBTa2lwIGRpc2FibGVkIGNvbnRlbnQgdHlwZXNcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Y29uc3QgY29tbWFuZElkID0gYGNyZWF0ZS1jb250ZW50LXR5cGUtJHtjb250ZW50VHlwZS5pZH1gO1xyXG5cdFx0Y29uc3QgY29tbWFuZE5hbWUgPSBgQ3JlYXRlIG5ldyBjb250ZW50IHR5cGU6ICR7Y29udGVudFR5cGUubmFtZX1gO1xyXG5cdFx0XHJcblx0XHRwbHVnaW4uYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiBjb21tYW5kSWQsXHJcblx0XHRcdG5hbWU6IGNvbW1hbmROYW1lLFxyXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdC8vIEdldCBmcmVzaCBzZXR0aW5ncyBmcm9tIHBsdWdpblxyXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRTZXR0aW5ncyA9IHBsdWdpbkludGVyZmFjZS5zZXR0aW5ncyB8fCBzZXR0aW5ncztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBEZXRlcm1pbmUgdGFyZ2V0IGZvbGRlciBmcm9tIGNvbnRlbnQgdHlwZSAob3IgdmF1bHQgcm9vdCBpZiBibGFuaylcclxuXHRcdFx0XHRsZXQgdGFyZ2V0Rm9sZGVyID0gY29udGVudFR5cGUuZm9sZGVyIHx8IFwiXCI7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQ3JlYXRlIGZvbGRlciBpZiBpdCBkb2Vzbid0IGV4aXN0IGFuZCBpcyBzcGVjaWZpZWRcclxuXHRcdFx0XHRpZiAodGFyZ2V0Rm9sZGVyICYmIHRhcmdldEZvbGRlci50cmltKCkgIT09IFwiXCIpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGZvbGRlciA9IHBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRhcmdldEZvbGRlcik7XHJcblx0XHRcdFx0XHRpZiAoIShmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xyXG5cdFx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHBsdWdpbi5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKHRhcmdldEZvbGRlcik7XHJcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xyXG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYEZhaWxlZCB0byBjcmVhdGUgZm9sZGVyOiAke2Vycm9yTWVzc2FnZX1gKTtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQ3JlYXRlIGEgdGVtcG9yYXJ5IGZpbGUgaW4gdGhlIHRhcmdldCBmb2xkZXJcclxuXHRcdFx0XHRjb25zdCB0ZW1wRmlsZU5hbWUgPSBcIlVudGl0bGVkLm1kXCI7XHJcblx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSB0YXJnZXRGb2xkZXIgPyBgJHt0YXJnZXRGb2xkZXJ9LyR7dGVtcEZpbGVOYW1lfWAgOiB0ZW1wRmlsZU5hbWU7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgZmlsZSBhbHJlYWR5IGV4aXN0cyAodW5saWtlbHkgYnV0IHBvc3NpYmxlKVxyXG5cdFx0XHRcdGNvbnN0IGV4aXN0aW5nRmlsZSA9IHBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcclxuXHRcdFx0XHRpZiAoZXhpc3RpbmdGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHRcdC8vIElmIGZpbGUgZXhpc3RzLCB1c2UgaXQgZGlyZWN0bHlcclxuXHRcdFx0XHRcdG5ldyBUaXRsZU1vZGFsKHBsdWdpbi5hcHAsIGV4aXN0aW5nRmlsZSwgcGx1Z2luSW50ZXJmYWNlLCBjb250ZW50VHlwZS5pZCwgZmFsc2UsIHRydWUpLm9wZW4oKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gTWFyayB0aGF0IHRoaXMgZmlsZSB3aWxsIGJlIGNyZWF0ZWQgYnkgdGhlIHBsdWdpblxyXG5cdFx0XHRcdC8vIFRoaXMgcHJldmVudHMgdGhlIGNyZWF0ZSBldmVudCBmcm9tIHRyaWdnZXJpbmcgYW5vdGhlciBtb2RhbFxyXG5cdFx0XHRcdGlmIChwbHVnaW5JbnRlcmZhY2UgJiYgJ3BsdWdpbkNyZWF0ZWRGaWxlcycgaW4gcGx1Z2luSW50ZXJmYWNlKSB7XHJcblx0XHRcdFx0XHRjb25zdCBwbHVnaW5XaXRoRmlsZXMgPSBwbHVnaW5JbnRlcmZhY2UgYXMgeyBwbHVnaW5DcmVhdGVkRmlsZXM/OiBTZXQ8c3RyaW5nPiB9O1xyXG5cdFx0XHRcdFx0aWYgKCFwbHVnaW5XaXRoRmlsZXMucGx1Z2luQ3JlYXRlZEZpbGVzKSB7XHJcblx0XHRcdFx0XHRcdHBsdWdpbldpdGhGaWxlcy5wbHVnaW5DcmVhdGVkRmlsZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHBsdWdpbldpdGhGaWxlcy5wbHVnaW5DcmVhdGVkRmlsZXMuYWRkKGZpbGVQYXRoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdC8vIENyZWF0ZSB0aGUgdGVtcG9yYXJ5IGZpbGVcclxuXHRcdFx0XHRcdGNvbnN0IHRlbXBGaWxlID0gYXdhaXQgcGx1Z2luLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIFwiXCIpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBPcGVuIHRoZSBUaXRsZU1vZGFsIHdpdGggdGhlIGZpbGUsIGNvbnRlbnQgdHlwZSBJRCwgYW5kIGlzTmV3Tm90ZSBmbGFnXHJcblx0XHRcdFx0XHRuZXcgVGl0bGVNb2RhbChwbHVnaW4uYXBwLCB0ZW1wRmlsZSwgcGx1Z2luSW50ZXJmYWNlLCBjb250ZW50VHlwZS5pZCwgZmFsc2UsIHRydWUpLm9wZW4oKTtcclxuXHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xyXG5cdFx0XHRcdFx0bmV3IE5vdGljZShgRmFpbGVkIHRvIGNyZWF0ZSBmaWxlOiAke2Vycm9yTWVzc2FnZX1gKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gQ2xlYW4gdXAgdGhlIHRyYWNraW5nIGlmIGZpbGUgY3JlYXRpb24gZmFpbGVkXHJcblx0XHRcdFx0XHRpZiAocGx1Z2luSW50ZXJmYWNlICYmICdwbHVnaW5DcmVhdGVkRmlsZXMnIGluIHBsdWdpbkludGVyZmFjZSkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBwbHVnaW5XaXRoRmlsZXMgPSBwbHVnaW5JbnRlcmZhY2UgYXMgeyBwbHVnaW5DcmVhdGVkRmlsZXM/OiBTZXQ8c3RyaW5nPiB9O1xyXG5cdFx0XHRcdFx0XHRwbHVnaW5XaXRoRmlsZXMucGx1Z2luQ3JlYXRlZEZpbGVzPy5kZWxldGUoZmlsZVBhdGgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdH0pO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIERlYnVnIGxvZ2dlciBmb3IgdGVybWluYWwgY29tbWFuZHNcclxuICovXHJcbmNvbnN0IHRlcm1pbmFsTG9nZ2VyID0ge1xyXG5cdGVuYWJsZWQ6IGZhbHNlLFxyXG5cdHNldEVuYWJsZWQodmFsdWU6IGJvb2xlYW4pIHtcclxuXHRcdHRoaXMuZW5hYmxlZCA9IHZhbHVlO1xyXG5cdH0sXHJcblx0bG9nKC4uLmFyZ3M6IHVua25vd25bXSkge1xyXG5cdFx0aWYgKHRoaXMuZW5hYmxlZCkge1xyXG5cdFx0XHRjb25zb2xlLmRlYnVnKFwiW2FzdHJvLWNvbXBvc2VyOnRlcm1pbmFsXVwiLCAuLi5hcmdzKTtcclxuXHRcdH1cclxuXHR9XHJcbn07XHJcblxyXG4vKipcclxuICogR2V0IGRlZmF1bHQgdGVybWluYWwgYXBwbGljYXRpb24gbmFtZSBiYXNlZCBvbiBwbGF0Zm9ybVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0RGVmYXVsdFRlcm1pbmFsQXBwKCk6IHN0cmluZyB7XHJcblx0aWYgKCFQbGF0Zm9ybS5pc0Rlc2t0b3BBcHApIHtcclxuXHRcdHJldHVybiBcIlwiO1xyXG5cdH1cclxuXHRpZiAoUGxhdGZvcm0uaXNNYWNPUykge1xyXG5cdFx0cmV0dXJuIFwiVGVybWluYWxcIjtcclxuXHR9XHJcblx0aWYgKFBsYXRmb3JtLmlzV2luKSB7XHJcblx0XHRyZXR1cm4gXCJjbWQuZXhlXCI7XHJcblx0fVxyXG5cdGlmIChQbGF0Zm9ybS5pc0xpbnV4KSB7XHJcblx0XHRyZXR1cm4gXCJnbm9tZS10ZXJtaW5hbFwiO1xyXG5cdH1cclxuXHRyZXR1cm4gXCJcIjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNhbml0aXplIHRlcm1pbmFsIGFwcGxpY2F0aW9uIG5hbWUgKHRyaW0gd2hpdGVzcGFjZSlcclxuICovXHJcbmZ1bmN0aW9uIHNhbml0aXplVGVybWluYWxBcHAodmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0cmV0dXJuIHZhbHVlLnRyaW0oKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEVzY2FwZSBkb3VibGUgcXVvdGVzIGluIGEgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBlc2NhcGVEb3VibGVRdW90ZXModmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0cmV0dXJuIHZhbHVlLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIE9wZW4gdGVybWluYWwgaW4gcHJvamVjdCByb290IGRpcmVjdG9yeVxyXG4gKiBFeHBvcnRlZCBmb3IgdXNlIGJ5IHJpYmJvbiBpY29uc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG9wZW5UZXJtaW5hbEluUHJvamVjdFJvb3QoYXBwOiBBcHAsIHNldHRpbmdzOiBBc3Ryb0NvbXBvc2VyU2V0dGluZ3MpOiB2b2lkIHtcclxuXHQvLyBVcGRhdGUgbG9nZ2VyIHN0YXRlXHJcblx0dGVybWluYWxMb2dnZXIuc2V0RW5hYmxlZChzZXR0aW5ncy5lbmFibGVUZXJtaW5hbERlYnVnTG9nZ2luZyk7XHJcblxyXG5cdHRyeSB7XHJcblx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLW5vZGVqcy1tb2R1bGVzLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tcmVxdWlyZS1pbXBvcnRzLCBuby11bmRlZlxyXG5cdFx0Y29uc3QgeyBleGVjIH0gPSByZXF1aXJlKCdjaGlsZF9wcm9jZXNzJykgYXMgeyBleGVjOiAoY29tbWFuZDogc3RyaW5nLCBjYWxsYmFjazogKGVycm9yOiB7IG1lc3NhZ2U/OiBzdHJpbmcgfSB8IG51bGwpID0+IHZvaWQpID0+IHZvaWQgfTtcclxuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tbm9kZWpzLW1vZHVsZXMsIEB0eXBlc2NyaXB0LWVzbGludC9uby1yZXF1aXJlLWltcG9ydHMsIG5vLXVuZGVmXHJcblx0XHRjb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpIGFzIHsgcmVzb2x2ZTogKC4uLmFyZ3M6IHN0cmluZ1tdKSA9PiBzdHJpbmcgfTtcclxuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tbm9kZWpzLW1vZHVsZXMsIEB0eXBlc2NyaXB0LWVzbGludC9uby1yZXF1aXJlLWltcG9ydHMsIG5vLXVuZGVmXHJcblx0XHRjb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJykgYXMgeyBleGlzdHNTeW5jOiAocGF0aDogc3RyaW5nKSA9PiBib29sZWFuIH07XHJcblxyXG5cdFx0Ly8gR2V0IHRoZSBhY3R1YWwgdmF1bHQgcGF0aCBzdHJpbmcgZnJvbSB0aGUgYWRhcHRlclxyXG5cdFx0Y29uc3QgYWRhcHRlciA9IGFwcC52YXVsdC5hZGFwdGVyIGFzIHVua25vd24gYXMgeyBiYXNlUGF0aD86IHN0cmluZzsgcGF0aD86IHN0cmluZyB9O1xyXG5cdFx0Y29uc3QgdmF1bHRQYXRoID0gYWRhcHRlci5iYXNlUGF0aCB8fCBhZGFwdGVyLnBhdGg7XHJcblx0XHRjb25zdCB2YXVsdFBhdGhTdHJpbmcgPSB0eXBlb2YgdmF1bHRQYXRoID09PSAnc3RyaW5nJyA/IHZhdWx0UGF0aCA6IFN0cmluZyh2YXVsdFBhdGgpO1xyXG5cclxuXHRcdC8vIFJlc29sdmUgcHJvamVjdCByb290IHBhdGhcclxuXHRcdGxldCBwcm9qZWN0UGF0aDogc3RyaW5nO1xyXG5cdFx0aWYgKHNldHRpbmdzLnRlcm1pbmFsUHJvamVjdFJvb3RQYXRoICYmIHNldHRpbmdzLnRlcm1pbmFsUHJvamVjdFJvb3RQYXRoLnRyaW0oKSkge1xyXG5cdFx0XHQvLyBVc2UgY3VzdG9tIHBhdGggcmVsYXRpdmUgdG8gdmF1bHRcclxuXHRcdFx0cHJvamVjdFBhdGggPSBwYXRoLnJlc29sdmUodmF1bHRQYXRoU3RyaW5nLCBzZXR0aW5ncy50ZXJtaW5hbFByb2plY3RSb290UGF0aCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBEZWZhdWx0OiB2YXVsdCBmb2xkZXIgaXRzZWxmXHJcblx0XHRcdHByb2plY3RQYXRoID0gdmF1bHRQYXRoU3RyaW5nO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFZlcmlmeSB0aGUgcGF0aCBleGlzdHNcclxuXHRcdGlmICghZnMuZXhpc3RzU3luYyhwcm9qZWN0UGF0aCkpIHtcclxuXHRcdFx0bmV3IE5vdGljZShgUHJvamVjdCByb290IGRpcmVjdG9yeSBub3QgZm91bmQgYXQ6ICR7cHJvamVjdFBhdGh9YCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBHZXQgdGVybWluYWwgYXBwbGljYXRpb24gbmFtZSAodXNlIGNvbmZpZ3VyZWQgb3IgZGVmYXVsdClcclxuXHRcdGNvbnN0IGNvbmZpZ3VyZWRBcHAgPSBzYW5pdGl6ZVRlcm1pbmFsQXBwKHNldHRpbmdzLnRlcm1pbmFsQXBwbGljYXRpb25OYW1lIHx8IFwiXCIpO1xyXG5cdFx0Y29uc3QgdGVybWluYWxBcHAgPSBjb25maWd1cmVkQXBwIHx8IGdldERlZmF1bHRUZXJtaW5hbEFwcCgpO1xyXG5cclxuXHRcdC8vIFdhcm4gaWYgdGVybWluYWwgYXBwIG5hbWUgaXMgZW1wdHkgKGJ1dCBzdGlsbCB0cnkgdG8gdXNlIGRlZmF1bHRzKVxyXG5cdFx0aWYgKCFjb25maWd1cmVkQXBwICYmICF0ZXJtaW5hbEFwcCkge1xyXG5cdFx0XHRuZXcgTm90aWNlKFwiVGVybWluYWwgYXBwbGljYXRpb24gbmFtZSBpcyBlbXB0eS4gUGxlYXNlIGNvbmZpZ3VyZSBpdCBpbiBzZXR0aW5ncy5cIik7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcclxuXHRcdGNvbnN0IHBsYXRmb3JtID0gcHJvY2Vzcy5wbGF0Zm9ybTtcclxuXHRcdHRlcm1pbmFsTG9nZ2VyLmxvZyhcIk9wZW5pbmcgdGVybWluYWxcIiwgeyBwbGF0Zm9ybSwgdGVybWluYWxBcHAsIHByb2plY3RQYXRoIH0pO1xyXG5cclxuXHRcdGlmIChwbGF0Zm9ybSA9PT0gJ3dpbjMyJykge1xyXG5cdFx0XHQvLyBXaW5kb3dzOiBVc2Ugc3RhcnQgY29tbWFuZCB3aXRoIGNvbmZpZ3VyYWJsZSB0ZXJtaW5hbFxyXG5cdFx0XHRjb25zdCBlc2NhcGVkUGF0aCA9IHByb2plY3RQYXRoLnJlcGxhY2UoL1wiL2csICdcIicpO1xyXG5cdFx0XHRjb25zdCBsb3dlckFwcCA9IHRlcm1pbmFsQXBwLnRvTG93ZXJDYXNlKCk7XHJcblxyXG5cdFx0XHRpZiAobG93ZXJBcHAgPT09IFwid3QuZXhlXCIgfHwgbG93ZXJBcHAgPT09IFwid3RcIiB8fCBsb3dlckFwcCA9PT0gXCJ3aW5kb3dzIHRlcm1pbmFsXCIpIHtcclxuXHRcdFx0XHQvLyBXaW5kb3dzIFRlcm1pbmFsXHJcblx0XHRcdFx0ZXhlYygnd2hlcmUgd3QnLCAoZXJyb3I6IHsgbWVzc2FnZT86IHN0cmluZyB9IHwgbnVsbCkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKCFlcnJvcikge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBjb21tYW5kID0gYHN0YXJ0IFwiXCIgd3QuZXhlIC1kIFwiJHtlc2NhcGVkUGF0aH1cImA7XHJcblx0XHRcdFx0XHRcdHRlcm1pbmFsTG9nZ2VyLmxvZyhcIldpbmRvd3MgbGF1bmNoICh3dClcIiwgeyBjb21tYW5kLCBwcm9qZWN0UGF0aCB9KTtcclxuXHRcdFx0XHRcdFx0ZXhlYyhjb21tYW5kLCAoZXhlY0Vycm9yOiB7IG1lc3NhZ2U/OiBzdHJpbmcgfSB8IG51bGwpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoZXhlY0Vycm9yKSB7XHJcblx0XHRcdFx0XHRcdFx0XHR0ZXJtaW5hbExvZ2dlci5sb2coXCJXaW5kb3dzIFRlcm1pbmFsIGZhaWxlZCwgZmFsbGluZyBiYWNrIHRvIGNtZFwiLCB7IGVycm9yOiBleGVjRXJyb3IubWVzc2FnZSB9KTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIEZhbGxiYWNrIHRvIGNtZFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgZmFsbGJhY2tDb21tYW5kID0gYHN0YXJ0IFwiXCIgY21kLmV4ZSAvSyBcImNkIC9kIFwiJHtlc2NhcGVkUGF0aH1cIlwiYDtcclxuXHRcdFx0XHRcdFx0XHRcdGV4ZWMoZmFsbGJhY2tDb21tYW5kLCAoY21kRXJyb3I6IHsgbWVzc2FnZT86IHN0cmluZyB9IHwgbnVsbCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoY21kRXJyb3IpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvciBvcGVuaW5nIHRlcm1pbmFsOiAke2NtZEVycm9yLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InfWApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0Ly8gV2luZG93cyBUZXJtaW5hbCBub3QgZm91bmQsIGZhbGxiYWNrIHRvIGNtZFxyXG5cdFx0XHRcdFx0XHR0ZXJtaW5hbExvZ2dlci5sb2coXCJXaW5kb3dzIFRlcm1pbmFsIG5vdCBmb3VuZCwgdXNpbmcgY21kXCIsIHt9KTtcclxuXHRcdFx0XHRcdFx0Y29uc3QgZmFsbGJhY2tDb21tYW5kID0gYHN0YXJ0IFwiXCIgY21kLmV4ZSAvSyBcImNkIC9kIFwiJHtlc2NhcGVkUGF0aH1cIlwiYDtcclxuXHRcdFx0XHRcdFx0ZXhlYyhmYWxsYmFja0NvbW1hbmQsIChjbWRFcnJvcjogeyBtZXNzYWdlPzogc3RyaW5nIH0gfCBudWxsKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKGNtZEVycm9yKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvciBvcGVuaW5nIHRlcm1pbmFsOiAke2NtZEVycm9yLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InfWApO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSBpZiAobG93ZXJBcHAgPT09IFwicG93ZXJzaGVsbFwiIHx8IGxvd2VyQXBwID09PSBcInBvd2Vyc2hlbGwuZXhlXCIpIHtcclxuXHRcdFx0XHQvLyBQb3dlclNoZWxsXHJcblx0XHRcdFx0Y29uc3QgZXNjYXBlZFBhdGhGb3JQUyA9IHByb2plY3RQYXRoLnJlcGxhY2UoLycvZywgXCInJ1wiKTtcclxuXHRcdFx0XHRjb25zdCBjb21tYW5kID0gYHN0YXJ0IFwiXCIgcG93ZXJzaGVsbCAtTm9FeGl0IC1Db21tYW5kIFwiU2V0LUxvY2F0aW9uICcke2VzY2FwZWRQYXRoRm9yUFN9JztcImA7XHJcblx0XHRcdFx0dGVybWluYWxMb2dnZXIubG9nKFwiV2luZG93cyBsYXVuY2ggKHBvd2Vyc2hlbGwpXCIsIHsgY29tbWFuZCwgcHJvamVjdFBhdGggfSk7XHJcblx0XHRcdFx0ZXhlYyhjb21tYW5kLCAoZXJyb3I6IHsgbWVzc2FnZT86IHN0cmluZyB9IHwgbnVsbCkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKGVycm9yKSB7XHJcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yIG9wZW5pbmcgdGVybWluYWw6ICR7ZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSBpZiAobG93ZXJBcHAgPT09IFwiY21kLmV4ZVwiIHx8IGxvd2VyQXBwID09PSBcImNtZFwiKSB7XHJcblx0XHRcdFx0Ly8gQ29tbWFuZCBQcm9tcHRcclxuXHRcdFx0XHRjb25zdCBjb21tYW5kID0gYHN0YXJ0IFwiXCIgY21kLmV4ZSAvSyBcImNkIC9kIFwiJHtlc2NhcGVkUGF0aH1cIlwiYDtcclxuXHRcdFx0XHR0ZXJtaW5hbExvZ2dlci5sb2coXCJXaW5kb3dzIGxhdW5jaCAoY21kKVwiLCB7IGNvbW1hbmQsIHByb2plY3RQYXRoIH0pO1xyXG5cdFx0XHRcdGV4ZWMoY29tbWFuZCwgKGVycm9yOiB7IG1lc3NhZ2U/OiBzdHJpbmcgfSB8IG51bGwpID0+IHtcclxuXHRcdFx0XHRcdGlmIChlcnJvcikge1xyXG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvciBvcGVuaW5nIHRlcm1pbmFsOiAke2Vycm9yLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InfWApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIEdlbmVyaWMgdGVybWluYWwgLSB0cnkgdG8gbGF1bmNoIGl0IGRpcmVjdGx5XHJcblx0XHRcdFx0Y29uc3QgY29tbWFuZCA9IGBzdGFydCBcIlwiIFwiJHt0ZXJtaW5hbEFwcH1cImA7XHJcblx0XHRcdFx0dGVybWluYWxMb2dnZXIubG9nKFwiV2luZG93cyBsYXVuY2ggKGdlbmVyaWMpXCIsIHsgY29tbWFuZCwgdGVybWluYWxBcHAsIHByb2plY3RQYXRoIH0pO1xyXG5cdFx0XHRcdGV4ZWMoY29tbWFuZCwgKGVycm9yOiB7IG1lc3NhZ2U/OiBzdHJpbmcgfSB8IG51bGwpID0+IHtcclxuXHRcdFx0XHRcdGlmIChlcnJvcikge1xyXG5cdFx0XHRcdFx0XHQvLyBGYWxsYmFjayB0byBjbWQgaWYgZ2VuZXJpYyBsYXVuY2ggZmFpbHNcclxuXHRcdFx0XHRcdFx0dGVybWluYWxMb2dnZXIubG9nKFwiR2VuZXJpYyB0ZXJtaW5hbCBmYWlsZWQsIGZhbGxpbmcgYmFjayB0byBjbWRcIiwgeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuXHRcdFx0XHRcdFx0Y29uc3QgZmFsbGJhY2tDb21tYW5kID0gYHN0YXJ0IFwiXCIgY21kLmV4ZSAvSyBcImNkIC9kIFwiJHtlc2NhcGVkUGF0aH1cIlwiYDtcclxuXHRcdFx0XHRcdFx0ZXhlYyhmYWxsYmFja0NvbW1hbmQsIChjbWRFcnJvcjogeyBtZXNzYWdlPzogc3RyaW5nIH0gfCBudWxsKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKGNtZEVycm9yKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvciBvcGVuaW5nIHRlcm1pbmFsOiAke2NtZEVycm9yLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InfWApO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAocGxhdGZvcm0gPT09ICdkYXJ3aW4nKSB7XHJcblx0XHRcdC8vIG1hY09TOiBVc2Ugb3BlbiAtYSAoc2ltcGxlciB0aGFuIG9zYXNjcmlwdClcclxuXHRcdFx0Y29uc3QgZXNjYXBlZEFwcCA9IGVzY2FwZURvdWJsZVF1b3Rlcyh0ZXJtaW5hbEFwcCk7XHJcblx0XHRcdGNvbnN0IGVzY2FwZWRQYXRoID0gZXNjYXBlRG91YmxlUXVvdGVzKHByb2plY3RQYXRoKTtcclxuXHRcdFx0Y29uc3QgY29tbWFuZCA9IGBvcGVuIC1uYSBcIiR7ZXNjYXBlZEFwcH1cIiBcIiR7ZXNjYXBlZFBhdGh9XCJgO1xyXG5cdFx0XHR0ZXJtaW5hbExvZ2dlci5sb2coXCJtYWNPUyBsYXVuY2hcIiwgeyBjb21tYW5kLCB0ZXJtaW5hbEFwcCwgcHJvamVjdFBhdGggfSk7XHJcblx0XHRcdGV4ZWMoY29tbWFuZCwgKGVycm9yOiB7IG1lc3NhZ2U/OiBzdHJpbmcgfSB8IG51bGwpID0+IHtcclxuXHRcdFx0XHRpZiAoZXJyb3IpIHtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yIG9wZW5pbmcgdGVybWluYWw6ICR7ZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIExpbnV4OiBUcnkgY29uZmlndXJhYmxlIHRlcm1pbmFsIHdpdGggZmFsbGJhY2sgY2hhaW5cclxuXHRcdFx0Y29uc3QgdGVybWluYWxzID0gdGVybWluYWxBcHAgPyBbdGVybWluYWxBcHBdIDogW1wiZ25vbWUtdGVybWluYWxcIiwgXCJrb25zb2xlXCIsIFwieHRlcm1cIl07XHJcblx0XHRcdGNvbnN0IHByb2plY3RQYXRoRXNjYXBlZCA9IHByb2plY3RQYXRoLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKTtcclxuXHJcblx0XHRcdC8vIFRyeSBlYWNoIHRlcm1pbmFsIHVudGlsIG9uZSB3b3Jrc1xyXG5cdFx0XHRjb25zdCB0cnlUZXJtaW5hbCA9IChpbmRleDogbnVtYmVyKSA9PiB7XHJcblx0XHRcdFx0aWYgKGluZGV4ID49IHRlcm1pbmFscy5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoJ05vIHN1cHBvcnRlZCB0ZXJtaW5hbCBmb3VuZC4gUGxlYXNlIGluc3RhbGwgYSB0ZXJtaW5hbCBhcHBsaWNhdGlvbiBvciBjb25maWd1cmUgb25lIGluIHNldHRpbmdzLicpO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y29uc3QgY3VycmVudFRlcm1pbmFsID0gdGVybWluYWxzW2luZGV4XTtcclxuXHRcdFx0XHRjb25zdCB0ZXJtaW5hbE5hbWUgPSBjdXJyZW50VGVybWluYWwuc3BsaXQoJyAnKVswXTtcclxuXHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGVybWluYWwgZXhpc3RzXHJcblx0XHRcdFx0ZXhlYyhgd2hpY2ggJHt0ZXJtaW5hbE5hbWV9YCwgKGVycm9yOiB7IG1lc3NhZ2U/OiBzdHJpbmcgfSB8IG51bGwpID0+IHtcclxuXHRcdFx0XHRcdGlmICghZXJyb3IpIHtcclxuXHRcdFx0XHRcdFx0Ly8gVGVybWluYWwgZm91bmQsIHRyeSB0byBsYXVuY2ggaXRcclxuXHRcdFx0XHRcdFx0bGV0IGNvbW1hbmQ6IHN0cmluZztcclxuXHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRUZXJtaW5hbC5pbmNsdWRlcyhcImdub21lLXRlcm1pbmFsXCIpKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29tbWFuZCA9IGBnbm9tZS10ZXJtaW5hbCAtLXdvcmtpbmctZGlyZWN0b3J5PVwiJHtwcm9qZWN0UGF0aEVzY2FwZWR9XCJgO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGN1cnJlbnRUZXJtaW5hbC5pbmNsdWRlcyhcImtvbnNvbGVcIikpIHtcclxuXHRcdFx0XHRcdFx0XHRjb21tYW5kID0gYGtvbnNvbGUgLS13b3JrZGlyIFwiJHtwcm9qZWN0UGF0aEVzY2FwZWR9XCJgO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdC8vIEdlbmVyaWMgdGVybWluYWxcclxuXHRcdFx0XHRcdFx0XHRjb21tYW5kID0gYCR7Y3VycmVudFRlcm1pbmFsfSAtZSBcImNkIFxcXFxcIiR7cHJvamVjdFBhdGhFc2NhcGVkfVxcXFxcIiAmJiBiYXNoXCJgO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHRlcm1pbmFsTG9nZ2VyLmxvZyhcIkxpbnV4IGxhdW5jaFwiLCB7IGNvbW1hbmQsIHRlcm1pbmFsOiBjdXJyZW50VGVybWluYWwsIHByb2plY3RQYXRoIH0pO1xyXG5cdFx0XHRcdFx0XHRleGVjKGNvbW1hbmQsIChleGVjRXJyb3I6IHsgbWVzc2FnZT86IHN0cmluZyB9IHwgbnVsbCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGlmIChleGVjRXJyb3IgJiYgaW5kZXggPCB0ZXJtaW5hbHMubGVuZ3RoIC0gMSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGVybWluYWxMb2dnZXIubG9nKFwiVGVybWluYWwgbGF1bmNoIGZhaWxlZCwgdHJ5aW5nIG5leHRcIiwgeyB0ZXJtaW5hbDogY3VycmVudFRlcm1pbmFsLCBlcnJvcjogZXhlY0Vycm9yLm1lc3NhZ2UgfSk7XHJcblx0XHRcdFx0XHRcdFx0XHR0cnlUZXJtaW5hbChpbmRleCArIDEpO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoZXhlY0Vycm9yKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvciBvcGVuaW5nIHRlcm1pbmFsOiAke2V4ZWNFcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0Ly8gVGVybWluYWwgbm90IGZvdW5kLCB0cnkgbmV4dFxyXG5cdFx0XHRcdFx0XHR0ZXJtaW5hbExvZ2dlci5sb2coXCJUZXJtaW5hbCBub3QgZm91bmQsIHRyeWluZyBuZXh0XCIsIHsgdGVybWluYWw6IGN1cnJlbnRUZXJtaW5hbCB9KTtcclxuXHRcdFx0XHRcdFx0dHJ5VGVybWluYWwoaW5kZXggKyAxKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHRyeVRlcm1pbmFsKDApO1xyXG5cdFx0fVxyXG5cdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHR0ZXJtaW5hbExvZ2dlci5sb2coXCJVbmV4cGVjdGVkIGVycm9yXCIsIHsgZXJyb3IgfSk7XHJcblx0XHRuZXcgTm90aWNlKGBFcnJvciBvcGVuaW5nIHRlcm1pbmFsOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKX1gKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBPcGVuIGNvbmZpZyBmaWxlIGluIGRlZmF1bHQgZWRpdG9yXHJcbiAqIEV4cG9ydGVkIGZvciB1c2UgYnkgcmliYm9uIGljb25zXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gb3BlbkNvbmZpZ0ZpbGUoYXBwOiBBcHAsIHNldHRpbmdzOiBBc3Ryb0NvbXBvc2VyU2V0dGluZ3MpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHR0cnkge1xyXG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1ub2RlanMtbW9kdWxlcywgQHR5cGVzY3JpcHQtZXNsaW50L25vLXJlcXVpcmUtaW1wb3J0cywgbm8tdW5kZWZcclxuXHRcdGNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKSBhcyB7IGV4aXN0c1N5bmM6IChwYXRoOiBzdHJpbmcpID0+IGJvb2xlYW4gfTtcclxuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tbm9kZWpzLW1vZHVsZXMsIEB0eXBlc2NyaXB0LWVzbGludC9uby1yZXF1aXJlLWltcG9ydHMsIG5vLXVuZGVmXHJcblx0XHRjb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpIGFzIHsgcmVzb2x2ZTogKC4uLmFyZ3M6IHN0cmluZ1tdKSA9PiBzdHJpbmcgfTtcclxuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tcmVxdWlyZS1pbXBvcnRzLCBuby11bmRlZlxyXG5cdFx0Y29uc3QgeyBzaGVsbCB9ID0gcmVxdWlyZSgnZWxlY3Ryb24nKSBhcyB7IHNoZWxsOiB7IG9wZW5QYXRoOiAocGF0aDogc3RyaW5nKSA9PiBQcm9taXNlPHN0cmluZz4gfSB9O1xyXG5cclxuXHRcdC8vIEdldCB0aGUgYWN0dWFsIHZhdWx0IHBhdGggc3RyaW5nIGZyb20gdGhlIGFkYXB0ZXJcclxuXHRcdGNvbnN0IGFkYXB0ZXIgPSBhcHAudmF1bHQuYWRhcHRlciBhcyB1bmtub3duIGFzIHsgYmFzZVBhdGg/OiBzdHJpbmc7IHBhdGg/OiBzdHJpbmcgfTtcclxuXHRcdGNvbnN0IHZhdWx0UGF0aCA9IGFkYXB0ZXIuYmFzZVBhdGggfHwgYWRhcHRlci5wYXRoO1xyXG5cdFx0Y29uc3QgdmF1bHRQYXRoU3RyaW5nID0gdHlwZW9mIHZhdWx0UGF0aCA9PT0gJ3N0cmluZycgPyB2YXVsdFBhdGggOiBTdHJpbmcodmF1bHRQYXRoKTtcclxuXHJcblx0XHQvLyBSZXNvbHZlIGNvbmZpZyBmaWxlIHBhdGhcclxuXHRcdGlmICghc2V0dGluZ3MuY29uZmlnRmlsZVBhdGggfHwgIXNldHRpbmdzLmNvbmZpZ0ZpbGVQYXRoLnRyaW0oKSkge1xyXG5cdFx0XHRuZXcgTm90aWNlKFwiUGxlYXNlIHNwZWNpZnkgYSBjb25maWcgZmlsZSBwYXRoIGluIHNldHRpbmdzLlwiKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFVzZSBjdXN0b20gcGF0aCByZWxhdGl2ZSB0byB2YXVsdFxyXG5cdFx0Y29uc3QgY29uZmlnUGF0aCA9IHBhdGgucmVzb2x2ZSh2YXVsdFBhdGhTdHJpbmcsIHNldHRpbmdzLmNvbmZpZ0ZpbGVQYXRoKTtcclxuXHJcblx0XHQvLyBDaGVjayBpZiBmaWxlIGV4aXN0c1xyXG5cdFx0aWYgKCFmcy5leGlzdHNTeW5jKGNvbmZpZ1BhdGgpKSB7XHJcblx0XHRcdG5ldyBOb3RpY2UoYENvbmZpZyBmaWxlIG5vdCBmb3VuZCBhdDogJHtjb25maWdQYXRofWApO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gVXNlIEVsZWN0cm9uJ3Mgc2hlbGwgdG8gb3BlbiB0aGUgZmlsZSB3aXRoIHRoZSBkZWZhdWx0IGVkaXRvclxyXG5cdFx0YXdhaXQgc2hlbGwub3BlblBhdGgoY29uZmlnUGF0aCk7XHJcblx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdG5ldyBOb3RpY2UoYEVycm9yIG9wZW5pbmcgY29uZmlnIGZpbGU6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpfWApO1xyXG5cdH1cclxufSIsICJpbXBvcnQgeyBBcHAsIFRGaWxlLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEFzdHJvQ29tcG9zZXJTZXR0aW5ncywgRmlsZUNyZWF0aW9uT3B0aW9ucywgUmVuYW1lT3B0aW9ucywgQ29udGVudFR5cGUsIENvbnRlbnRUeXBlSWQsIEFzdHJvQ29tcG9zZXJQbHVnaW5JbnRlcmZhY2UgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IG1hdGNoZXNGb2xkZXJQYXR0ZXJuLCBzb3J0QnlQYXR0ZXJuU3BlY2lmaWNpdHkgfSBmcm9tIFwiLi9wYXRoLW1hdGNoaW5nXCI7XG5cbmV4cG9ydCBjbGFzcyBGaWxlT3BlcmF0aW9ucyB7XG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgYXBwOiBBcHAsIHByaXZhdGUgc2V0dGluZ3M6IEFzdHJvQ29tcG9zZXJTZXR0aW5ncywgcHJpdmF0ZSBwbHVnaW4/OiBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlICYgeyBwbHVnaW5DcmVhdGVkRmlsZXM/OiBTZXQ8c3RyaW5nPiB9KSB7fVxuXHRcblx0Ly8gR2V0IGZyZXNoIHNldHRpbmdzIGZyb20gcGx1Z2luIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHVzZSBzdG9yZWQgc2V0dGluZ3Ncblx0cHJpdmF0ZSBnZXRTZXR0aW5ncygpOiBBc3Ryb0NvbXBvc2VyU2V0dGluZ3Mge1xuXHRcdC8vIEFsd2F5cyBwcmVmZXIgcGx1Z2luIHNldHRpbmdzICh0aGV5J3JlIGtlcHQgdXAgdG8gZGF0ZSlcblx0XHRpZiAodGhpcy5wbHVnaW4/LnNldHRpbmdzKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLnNldHRpbmdzO1xuXHR9XG5cblx0dG9LZWJhYkNhc2Uoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdHJldHVybiBzdHJcblx0XHRcdC50b0xvd2VyQ2FzZSgpXG5cdFx0XHQvLyBSZW1vdmUgb3IgcmVwbGFjZSBwcm9ibGVtYXRpYyBjaGFyYWN0ZXJzIGZvciBmaWxlbmFtZXNcblx0XHRcdC5yZXBsYWNlKC9bPD46XCIvXFxcXHw/Kl0vZywgXCJcIikgLy8gUmVtb3ZlIFdpbmRvd3MvVW5peCBpbnZhbGlkIGZpbGVuYW1lIGNoYXJhY3RlcnNcblx0XHRcdC5yZXBsYWNlKC9bJ1wiXS9nLCBcIlwiKSAvLyBSZW1vdmUgcXVvdGVzXG5cdFx0XHQucmVwbGFjZSgvW15cXHdcXHMtXS9nLCBcIlwiKSAvLyBSZW1vdmUgb3RoZXIgc3BlY2lhbCBjaGFyYWN0ZXJzIGJ1dCBrZWVwIGxldHRlcnMsIG51bWJlcnMsIHNwYWNlcywgaHlwaGVuc1xuXHRcdFx0LnRyaW0oKVxuXHRcdFx0LnJlcGxhY2UoL1xccysvZywgXCItXCIpXG5cdFx0XHQucmVwbGFjZSgvLSsvZywgXCItXCIpXG5cdFx0XHQucmVwbGFjZSgvXi18LSQvZywgXCJcIik7XG5cdH1cblxuXHRnZW5lcmF0ZUZpbGVuYW1lKHRpdGxlOiBzdHJpbmcsIGVuYWJsZVVuZGVyc2NvcmVQcmVmaXg6IGJvb2xlYW4gPSBmYWxzZSk6IHN0cmluZyB7XG5cdFx0Y29uc3Qga2ViYWJUaXRsZSA9IHRoaXMudG9LZWJhYkNhc2UodGl0bGUpO1xuXHRcdC8vIElmIGtlYmFiIGNhc2UgcmVzdWx0cyBpbiBlbXB0eSBzdHJpbmcsIHVzZSBhIGZhbGxiYWNrXG5cdFx0Y29uc3Qgc2FmZUtlYmFiVGl0bGUgPSBrZWJhYlRpdGxlIHx8IFwidW50aXRsZWRcIjtcblx0XHRjb25zdCBwcmVmaXggPSBlbmFibGVVbmRlcnNjb3JlUHJlZml4ID8gXCJfXCIgOiBcIlwiO1xuXHRcdHJldHVybiBgJHtwcmVmaXh9JHtzYWZlS2ViYWJUaXRsZX1gO1xuXHR9XG5cblx0ZGV0ZXJtaW5lVHlwZShmaWxlOiBURmlsZSk6IENvbnRlbnRUeXBlSWQge1xuXHRcdGNvbnN0IGZpbGVQYXRoID0gZmlsZS5wYXRoO1xuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xuXHRcdFxuXHRcdC8vIENoZWNrIGFsbCBjb250ZW50IHR5cGVzLCBzb3J0ZWQgYnkgcGF0dGVybiBzcGVjaWZpY2l0eSAobW9yZSBzcGVjaWZpYyBmaXJzdClcblx0XHRjb25zdCBjb250ZW50VHlwZXMgPSBzZXR0aW5ncy5jb250ZW50VHlwZXMgfHwgW107XG5cdFx0Y29uc3Qgc29ydGVkVHlwZXMgPSBzb3J0QnlQYXR0ZXJuU3BlY2lmaWNpdHkoY29udGVudFR5cGVzKTtcblx0XHRcblx0XHRmb3IgKGNvbnN0IGNvbnRlbnRUeXBlIG9mIHNvcnRlZFR5cGVzKSB7XG5cdFx0XHRpZiAoIWNvbnRlbnRUeXBlLmVuYWJsZWQpIGNvbnRpbnVlO1xuXHRcdFx0XG5cdFx0XHQvLyBIYW5kbGUgYmxhbmsgZm9sZGVyIChyb290KSAtIG1hdGNoZXMgZmlsZXMgaW4gdmF1bHQgcm9vdCBvbmx5XG5cdFx0XHRpZiAoIWNvbnRlbnRUeXBlLmZvbGRlciB8fCBjb250ZW50VHlwZS5mb2xkZXIudHJpbSgpID09PSBcIlwiKSB7XG5cdFx0XHRcdGlmICghZmlsZVBhdGguaW5jbHVkZXMoXCIvXCIpIHx8IGZpbGVQYXRoLnNwbGl0KFwiL1wiKS5sZW5ndGggPT09IDEpIHtcblx0XHRcdFx0XHRyZXR1cm4gY29udGVudFR5cGUuaWQ7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAobWF0Y2hlc0ZvbGRlclBhdHRlcm4oZmlsZVBhdGgsIGNvbnRlbnRUeXBlLmZvbGRlcikpIHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWdub3JlU3ViZm9sZGVycyBpZiBmb2xkZXIgaXMgc3BlY2lmaWVkXG5cdFx0XHRcdGlmIChjb250ZW50VHlwZS5pZ25vcmVTdWJmb2xkZXJzKSB7XG5cdFx0XHRcdFx0Y29uc3QgcGF0aFNlZ21lbnRzID0gZmlsZVBhdGguc3BsaXQoXCIvXCIpO1xuXHRcdFx0XHRcdGNvbnN0IHBhdGhEZXB0aCA9IHBhdGhTZWdtZW50cy5sZW5ndGg7XG5cdFx0XHRcdFx0Y29uc3QgcGF0dGVyblNlZ21lbnRzID0gY29udGVudFR5cGUuZm9sZGVyLnNwbGl0KFwiL1wiKTtcblx0XHRcdFx0XHRjb25zdCBleHBlY3RlZERlcHRoID0gcGF0dGVyblNlZ21lbnRzLmxlbmd0aDtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAoY29udGVudFR5cGUuY3JlYXRpb25Nb2RlID09PSBcImZvbGRlclwiKSB7XG5cdFx0XHRcdFx0XHQvLyBGb3IgZm9sZGVyLWJhc2VkIGNyZWF0aW9uLCBmaWxlcyBhcmUgb25lIGxldmVsIGRlZXBlciAoZS5nLiwgdGVzdC9teS1maWxlL2luZGV4Lm1kKVxuXHRcdFx0XHRcdFx0Ly8gU28gd2UgbmVlZCB0byBhbGxvdyBvbmUgZXh0cmEgbGV2ZWwgYmV5b25kIHRoZSBwYXR0ZXJuIGRlcHRoXG5cdFx0XHRcdFx0XHRjb25zdCBmb2xkZXJEZXB0aCA9IHBhdGhEZXB0aCAtIDE7IC8vIFN1YnRyYWN0IDEgZm9yIHRoZSBpbmRleC5tZCBmaWxlXG5cdFx0XHRcdFx0XHRpZiAoZm9sZGVyRGVwdGggPT09IGV4cGVjdGVkRGVwdGggfHwgZm9sZGVyRGVwdGggPT09IGV4cGVjdGVkRGVwdGggKyAxKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBjb250ZW50VHlwZS5pZDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gRm9yIGZpbGUtYmFzZWQgY3JlYXRpb24sIGZpbGVzIGFyZSBhdCB0aGUgc2FtZSBkZXB0aCBhcyB0aGUgcGF0dGVyblxuXHRcdFx0XHRcdFx0aWYgKHBhdGhEZXB0aCA9PT0gZXhwZWN0ZWREZXB0aCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gY29udGVudFR5cGUuaWQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiBjb250ZW50VHlwZS5pZDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHQvLyBJZiBubyBjb250ZW50IHR5cGUgbWF0Y2hlcywgcmV0dXJuIFwibm90ZVwiIGFzIGZhbGxiYWNrXG5cdFx0cmV0dXJuIFwibm90ZVwiO1xuXHR9XG5cblx0Z2V0Q29udGVudFR5cGUodHlwZUlkOiBDb250ZW50VHlwZUlkKTogQ29udGVudFR5cGUgfCBudWxsIHtcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMuZ2V0U2V0dGluZ3MoKTtcblx0XHRjb25zdCBjb250ZW50VHlwZXMgPSBzZXR0aW5ncy5jb250ZW50VHlwZXMgfHwgW107XG5cdFx0cmV0dXJuIGNvbnRlbnRUeXBlcy5maW5kKGN0ID0+IGN0LmlkID09PSB0eXBlSWQpIHx8IG51bGw7XG5cdH1cblxuXHRnZXRUaXRsZUtleSh0eXBlOiBDb250ZW50VHlwZUlkKTogc3RyaW5nIHtcblx0XHQvLyBGb3IgZ2VuZXJpYyBub3RlcywgYWx3YXlzIHVzZSBcInRpdGxlXCJcblx0XHRpZiAodHlwZSA9PT0gXCJub3RlXCIpIHJldHVybiBcInRpdGxlXCI7XG5cdFx0XG5cdFx0Y29uc3QgY29udGVudFR5cGUgPSB0aGlzLmdldENvbnRlbnRUeXBlKHR5cGUpO1xuXHRcdGlmICghY29udGVudFR5cGUpIHJldHVybiBcInRpdGxlXCI7XG5cdFx0XG5cdFx0Y29uc3QgdGVtcGxhdGUgPSBjb250ZW50VHlwZS50ZW1wbGF0ZTtcblx0XHRjb25zdCBsaW5lcyA9IHRlbXBsYXRlLnNwbGl0KFwiXFxuXCIpO1xuXHRcdGxldCBpblByb3BlcnRpZXMgPSBmYWxzZTtcblx0XHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcblx0XHRcdGNvbnN0IHRyaW1tZWQgPSBsaW5lLnRyaW0oKTtcblx0XHRcdGlmICh0cmltbWVkID09PSBcIi0tLVwiKSB7XG5cdFx0XHRcdGluUHJvcGVydGllcyA9ICFpblByb3BlcnRpZXM7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGluUHJvcGVydGllcykge1xuXHRcdFx0XHRjb25zdCBtYXRjaCA9IHRyaW1tZWQubWF0Y2goL14oXFx3Kyk6XFxzKiguKykkLyk7XG5cdFx0XHRcdGlmIChtYXRjaCkge1xuXHRcdFx0XHRcdGNvbnN0IGtleSA9IG1hdGNoWzFdO1xuXHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gbWF0Y2hbMl07XG5cdFx0XHRcdFx0aWYgKHZhbHVlLmluY2x1ZGVzKFwie3t0aXRsZX19XCIpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4ga2V5O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gXCJ0aXRsZVwiO1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlRmlsZShvcHRpb25zOiBGaWxlQ3JlYXRpb25PcHRpb25zKTogUHJvbWlzZTxURmlsZSB8IG51bGw+IHtcblx0XHRjb25zdCB7IGZpbGUsIHRpdGxlLCB0eXBlIH0gPSBvcHRpb25zO1xuXHRcdFxuXHRcdGlmICghdGl0bGUpIHtcblx0XHRcdG5ldyBOb3RpY2UoYFRpdGxlIGlzIHJlcXVpcmVkIHRvIGNyZWF0ZSBhICR7dHlwZX0uYCk7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBHZXQgY29udGVudCB0eXBlIHNldHRpbmdzXG5cdFx0Y29uc3QgY29udGVudFR5cGUgPSB0aGlzLmdldENvbnRlbnRUeXBlKHR5cGUpO1xuXHRcdGlmICghY29udGVudFR5cGUgJiYgdHlwZSAhPT0gXCJub3RlXCIpIHtcblx0XHRcdG5ldyBOb3RpY2UoYENvbnRlbnQgdHlwZSAke3R5cGV9IG5vdCBmb3VuZC5gKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdGNvbnN0IGtlYmFiVGl0bGUgPSB0aGlzLnRvS2ViYWJDYXNlKHRpdGxlKTtcblx0XHRjb25zdCBlbmFibGVVbmRlcnNjb3JlUHJlZml4ID0gY29udGVudFR5cGU/LmVuYWJsZVVuZGVyc2NvcmVQcmVmaXggfHwgZmFsc2U7XG5cdFx0Y29uc3QgcHJlZml4ID0gZW5hYmxlVW5kZXJzY29yZVByZWZpeCA/IFwiX1wiIDogXCJcIjtcblxuXHRcdGxldCB0YXJnZXRGb2xkZXIgPSBcIlwiO1xuXHRcdGlmICh0eXBlID09PSBcIm5vdGVcIikge1xuXHRcdFx0Ly8gRm9yIGdlbmVyaWMgbm90ZXMsIGtlZXAgdGhlbSBpbiB0aGVpciBjdXJyZW50IGxvY2F0aW9uXG5cdFx0XHR0YXJnZXRGb2xkZXIgPSBcIlwiO1xuXHRcdH0gZWxzZSBpZiAoY29udGVudFR5cGUpIHtcblx0XHRcdC8vIEdldCB0aGUgZGlyZWN0b3J5IHdoZXJlIHRoZSB1c2VyIGNyZWF0ZWQgdGhlIGZpbGVcblx0XHRcdGNvbnN0IG9yaWdpbmFsRGlyID0gZmlsZS5wYXJlbnQ/LnBhdGggfHwgXCJcIjtcblx0XHRcdFxuXHRcdFx0Ly8gUmVzcGVjdCB0aGUgdXNlcidzIGNob3NlbiBsb2NhdGlvbiAoc3ViZm9sZGVyKVxuXHRcdFx0Ly8gT25seSB1c2UgdGhlIGNvbmZpZ3VyZWQgZm9sZGVyIGlmIHRoZSB1c2VyIGNyZWF0ZWQgdGhlIGZpbGUgaW4gdGhlIHZhdWx0IHJvb3Rcblx0XHRcdGlmIChvcmlnaW5hbERpciA9PT0gXCJcIiB8fCBvcmlnaW5hbERpciA9PT0gXCIvXCIpIHtcblx0XHRcdFx0dGFyZ2V0Rm9sZGVyID0gY29udGVudFR5cGUuZm9sZGVyIHx8IFwiXCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0YXJnZXRGb2xkZXIgPSBvcmlnaW5hbERpcjtcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0aWYgKHRhcmdldEZvbGRlcikge1xuXHRcdFx0Y29uc3QgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRhcmdldEZvbGRlcik7XG5cdFx0XHRpZiAoIShmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIodGFyZ2V0Rm9sZGVyKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRjb25zdCBjcmVhdGlvbk1vZGUgPSBjb250ZW50VHlwZT8uY3JlYXRpb25Nb2RlIHx8IFwiZmlsZVwiO1xuXHRcdGlmIChjcmVhdGlvbk1vZGUgPT09IFwiZm9sZGVyXCIpIHtcblx0XHRcdHJldHVybiB0aGlzLmNyZWF0ZUZvbGRlclN0cnVjdHVyZShmaWxlLCBrZWJhYlRpdGxlLCBwcmVmaXgsIHRhcmdldEZvbGRlciwgdHlwZSwgY29udGVudFR5cGUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5jcmVhdGVGaWxlU3RydWN0dXJlKGZpbGUsIGtlYmFiVGl0bGUsIHByZWZpeCwgdGFyZ2V0Rm9sZGVyLCBjb250ZW50VHlwZSk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBjcmVhdGVGb2xkZXJTdHJ1Y3R1cmUoZmlsZTogVEZpbGUsIGtlYmFiVGl0bGU6IHN0cmluZywgcHJlZml4OiBzdHJpbmcsIHRhcmdldEZvbGRlcjogc3RyaW5nLCB0eXBlOiBDb250ZW50VHlwZUlkLCBjb250ZW50VHlwZTogQ29udGVudFR5cGUgfCBudWxsKTogUHJvbWlzZTxURmlsZSB8IG51bGw+IHtcblx0XHRjb25zdCBmb2xkZXJOYW1lID0gYCR7cHJlZml4fSR7a2ViYWJUaXRsZX1gO1xuXHRcdGxldCBmb2xkZXJQYXRoOiBzdHJpbmc7XG5cdFx0XG5cdFx0aWYgKHRhcmdldEZvbGRlcikge1xuXHRcdFx0Ly8gTW92ZSB0byB0YXJnZXQgZm9sZGVyXG5cdFx0XHRmb2xkZXJQYXRoID0gYCR7dGFyZ2V0Rm9sZGVyfS8ke2ZvbGRlck5hbWV9YDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gS2VlcCBpbiBjdXJyZW50IGxvY2F0aW9uXG5cdFx0XHRjb25zdCBjdXJyZW50RGlyID0gZmlsZS5wYXJlbnQgPyBmaWxlLnBhcmVudC5wYXRoIDogXCJcIjtcblx0XHRcdGlmIChjdXJyZW50RGlyICYmIGN1cnJlbnREaXIgIT09IFwiL1wiKSB7XG5cdFx0XHRcdGZvbGRlclBhdGggPSBgJHtjdXJyZW50RGlyfS8ke2ZvbGRlck5hbWV9YDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEZpbGUgaXMgaW4gdmF1bHQgcm9vdCwganVzdCB1c2UgZm9sZGVyIG5hbWVcblx0XHRcdFx0Zm9sZGVyUGF0aCA9IGZvbGRlck5hbWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcblx0XHRcdGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXJQYXRoKTtcblx0XHRcdH1cblx0XHR9IGNhdGNoIHtcblx0XHRcdC8vIEZvbGRlciBtaWdodCBhbHJlYWR5IGV4aXN0LCBwcm9jZWVkXG5cdFx0fVxuXG5cdFx0Y29uc3QgaW5kZXhGaWxlTmFtZSA9IGNvbnRlbnRUeXBlPy5pbmRleEZpbGVOYW1lIHx8IFwiaW5kZXhcIjtcblx0XHRjb25zdCBleHRlbnNpb24gPSBjb250ZW50VHlwZT8udXNlTWR4RXh0ZW5zaW9uID8gXCIubWR4XCIgOiBcIi5tZFwiO1xuXHRcdGNvbnN0IGZpbGVOYW1lID0gYCR7aW5kZXhGaWxlTmFtZX0ke2V4dGVuc2lvbn1gO1xuXHRcdGNvbnN0IG5ld1BhdGggPSBgJHtmb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWA7XG5cblx0XHRjb25zdCBleGlzdGluZ0ZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3UGF0aCk7XG5cdFx0aWYgKGV4aXN0aW5nRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRuZXcgTm90aWNlKGBGaWxlIGFscmVhZHkgZXhpc3RzIGF0ICR7bmV3UGF0aH0uYCk7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBUcmFjayB0aGF0IHRoaXMgZmlsZSB3aWxsIGJlIGNyZWF0ZWQgYnkgdGhlIHBsdWdpbiBCRUZPUkUgcmVuYW1pbmdcblx0XHQvLyBUaGlzIHByZXZlbnRzIHRoZSBjcmVhdGUgZXZlbnQgZnJvbSB0cmlnZ2VyaW5nIGFub3RoZXIgbW9kYWxcblx0XHRpZiAodGhpcy5wbHVnaW4gJiYgJ3BsdWdpbkNyZWF0ZWRGaWxlcycgaW4gdGhpcy5wbHVnaW4pIHtcblx0XHRcdGNvbnN0IHBsdWdpbldpdGhGaWxlcyA9IHRoaXMucGx1Z2luIGFzIHsgcGx1Z2luQ3JlYXRlZEZpbGVzPzogU2V0PHN0cmluZz4gfTtcblx0XHRcdHBsdWdpbldpdGhGaWxlcy5wbHVnaW5DcmVhdGVkRmlsZXM/LmFkZChuZXdQYXRoKTtcblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShmaWxlLCBuZXdQYXRoKTtcblx0XHRcdGNvbnN0IG5ld0ZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3UGF0aCk7XG5cdFx0XHRpZiAoIShuZXdGaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0Y29uc3QgZmlsZUV4cGxvcmVyID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShcImZpbGUtZXhwbG9yZXJcIilbMF07XG5cdFx0XHRcdGlmIChmaWxlRXhwbG9yZXIgJiYgZmlsZUV4cGxvcmVyLnZpZXcpIHtcblx0XHRcdFx0XHRjb25zdCB2aWV3ID0gZmlsZUV4cGxvcmVyLnZpZXc7XG5cdFx0XHRcdFx0aWYgKHZpZXcgJiYgdHlwZW9mIHZpZXcgPT09ICdvYmplY3QnICYmICd0cmVlJyBpbiB2aWV3KSB7XG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlVHJlZSA9ICh2aWV3IGFzIHsgdHJlZT86IHsgcmV2ZWFsRmlsZT86IChmaWxlOiBURmlsZSkgPT4gdm9pZCB9IH0pLnRyZWU7XG5cdFx0XHRcdFx0XHRpZiAoZmlsZVRyZWUgJiYgbmV3RmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIHR5cGVvZiBmaWxlVHJlZS5yZXZlYWxGaWxlID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRcdGZpbGVUcmVlLnJldmVhbEZpbGUobmV3RmlsZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LCAyMDApO1xuXG5cdFx0XHRjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpO1xuXHRcdFx0YXdhaXQgbGVhZi5vcGVuRmlsZShuZXdGaWxlKTtcblxuXHRcdFx0Ly8gUG9zaXRpb24gY3Vyc29yIGF0IHRoZSBlbmQgb2YgY29udGVudCBhZnRlciBlZGl0b3IgaXMgcmVhZHlcblx0XHRcdGNvbnN0IHBvc2l0aW9uQ3Vyc29yID0gKCkgPT4ge1xuXHRcdFx0XHRjb25zdCB2aWV3ID0gbGVhZi52aWV3O1xuXHRcdFx0XHRpZiAodmlldyAmJiAnZWRpdG9yJyBpbiB2aWV3KSB7XG5cdFx0XHRcdFx0Y29uc3QgZWRpdG9yID0gKHZpZXcgYXMgeyBlZGl0b3I/OiB7IHNldEN1cnNvcjogKHBvczogeyBsaW5lOiBudW1iZXI7IGNoOiBudW1iZXIgfSkgPT4gdm9pZDsgZ2V0VmFsdWU6ICgpID0+IHN0cmluZzsgZm9jdXM6ICgpID0+IHZvaWQgfSB9KS5lZGl0b3I7XG5cdFx0XHRcdFx0aWYgKGVkaXRvcikge1xuXHRcdFx0XHRcdFx0Y29uc3QgY29udGVudCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuXHRcdFx0XHRcdFx0aWYgKGNvbnRlbnQpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbGFzdExpbmUgPSBsaW5lcy5sZW5ndGggLSAxO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBsYXN0TGluZUxlbmd0aCA9IGxpbmVzW2xhc3RMaW5lXT8ubGVuZ3RoIHx8IDA7XG5cdFx0XHRcdFx0XHRcdGVkaXRvci5zZXRDdXJzb3IoeyBsaW5lOiBsYXN0TGluZSwgY2g6IGxhc3RMaW5lTGVuZ3RoIH0pO1xuXHRcdFx0XHRcdFx0XHRlZGl0b3IuZm9jdXMoKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH07XG5cdFx0XHRcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRpZiAoIXBvc2l0aW9uQ3Vyc29yKCkpIHtcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdHBvc2l0aW9uQ3Vyc29yKCk7XG5cdFx0XHRcdFx0fSwgMjAwKTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgMTAwKTtcblxuXHRcdFx0cmV0dXJuIG5ld0ZpbGU7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcblx0XHRcdG5ldyBOb3RpY2UoYEZhaWxlZCB0byBjcmVhdGUgZm9sZGVyIHN0cnVjdHVyZTogJHtlcnJvck1lc3NhZ2V9LmApO1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBjcmVhdGVGaWxlU3RydWN0dXJlKGZpbGU6IFRGaWxlLCBrZWJhYlRpdGxlOiBzdHJpbmcsIHByZWZpeDogc3RyaW5nLCB0YXJnZXRGb2xkZXI6IHN0cmluZywgY29udGVudFR5cGU6IENvbnRlbnRUeXBlIHwgbnVsbCk6IFByb21pc2U8VEZpbGUgfCBudWxsPiB7XG5cdFx0Y29uc3QgZXh0ZW5zaW9uID0gY29udGVudFR5cGU/LnVzZU1keEV4dGVuc2lvbiA/IFwiLm1keFwiIDogXCIubWRcIjtcblx0XHRjb25zdCBuZXdOYW1lID0gYCR7cHJlZml4fSR7a2ViYWJUaXRsZX0ke2V4dGVuc2lvbn1gO1xuXHRcdGxldCBuZXdQYXRoOiBzdHJpbmc7XG5cdFx0XG5cdFx0aWYgKHRhcmdldEZvbGRlcikge1xuXHRcdFx0Ly8gTW92ZSB0byB0YXJnZXQgZm9sZGVyXG5cdFx0XHRuZXdQYXRoID0gYCR7dGFyZ2V0Rm9sZGVyfS8ke25ld05hbWV9YDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gS2VlcCBpbiBjdXJyZW50IGxvY2F0aW9uLCBqdXN0IHJlbmFtZSB0aGUgZmlsZVxuXHRcdFx0Y29uc3QgY3VycmVudERpciA9IGZpbGUucGFyZW50ID8gZmlsZS5wYXJlbnQucGF0aCA6IFwiXCI7XG5cdFx0XHRpZiAoY3VycmVudERpciAmJiBjdXJyZW50RGlyICE9PSBcIi9cIikge1xuXHRcdFx0XHRuZXdQYXRoID0gYCR7Y3VycmVudERpcn0vJHtuZXdOYW1lfWA7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBGaWxlIGlzIGluIHZhdWx0IHJvb3QsIGp1c3QgdXNlIG5ldyBuYW1lXG5cdFx0XHRcdG5ld1BhdGggPSBuZXdOYW1lO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IGV4aXN0aW5nRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdQYXRoKTtcblx0XHRpZiAoZXhpc3RpbmdGaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZXhpc3RpbmdGaWxlICE9PSBmaWxlKSB7XG5cdFx0XHRuZXcgTm90aWNlKGBGaWxlIHdpdGggbmFtZSBcIiR7bmV3TmFtZX1cIiBhbHJlYWR5IGV4aXN0cy5gKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdC8vIFRyYWNrIHRoYXQgdGhpcyBmaWxlIHdpbGwgYmUgY3JlYXRlZCBieSB0aGUgcGx1Z2luIEJFRk9SRSByZW5hbWluZ1xuXHRcdC8vIFRoaXMgcHJldmVudHMgdGhlIGNyZWF0ZSBldmVudCBmcm9tIHRyaWdnZXJpbmcgYW5vdGhlciBtb2RhbFxuXHRcdGlmICh0aGlzLnBsdWdpbiAmJiAncGx1Z2luQ3JlYXRlZEZpbGVzJyBpbiB0aGlzLnBsdWdpbikge1xuXHRcdFx0Y29uc3QgcGx1Z2luV2l0aEZpbGVzID0gdGhpcy5wbHVnaW4gYXMgeyBwbHVnaW5DcmVhdGVkRmlsZXM/OiBTZXQ8c3RyaW5nPiB9O1xuXHRcdFx0cGx1Z2luV2l0aEZpbGVzLnBsdWdpbkNyZWF0ZWRGaWxlcz8uYWRkKG5ld1BhdGgpO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHQvLyBVc2UgZmlsZU1hbmFnZXIucmVuYW1lRmlsZSgpIHdoaWNoIHJlc3BlY3RzIHVzZXIgc2V0dGluZ3MgYW5kIGhhbmRsZXMgYWxsIGxpbmsgZm9ybWF0c1xuXHRcdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShmaWxlLCBuZXdQYXRoKTtcblx0XHRcdFxuXHRcdFx0Y29uc3QgbmV3RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdQYXRoKTtcblx0XHRcdGlmICghKG5ld0ZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIkZhaWxlZCB0byBsb2NhdGUgcmVuYW1lZCBmaWxlLlwiKTtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSk7XG5cdFx0XHRhd2FpdCBsZWFmLm9wZW5GaWxlKG5ld0ZpbGUpO1xuXG5cdFx0XHQvLyBQb3NpdGlvbiBjdXJzb3IgYXQgdGhlIGVuZCBvZiBjb250ZW50IGFmdGVyIGVkaXRvciBpcyByZWFkeVxuXHRcdFx0Y29uc3QgcG9zaXRpb25DdXJzb3IgPSAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHZpZXcgPSBsZWFmLnZpZXc7XG5cdFx0XHRcdGlmICh2aWV3ICYmICdlZGl0b3InIGluIHZpZXcpIHtcblx0XHRcdFx0XHRjb25zdCBlZGl0b3IgPSAodmlldyBhcyB7IGVkaXRvcj86IHsgc2V0Q3Vyc29yOiAocG9zOiB7IGxpbmU6IG51bWJlcjsgY2g6IG51bWJlciB9KSA9PiB2b2lkOyBnZXRWYWx1ZTogKCkgPT4gc3RyaW5nOyBmb2N1czogKCkgPT4gdm9pZCB9IH0pLmVkaXRvcjtcblx0XHRcdFx0XHRpZiAoZWRpdG9yKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBjb250ZW50ID0gZWRpdG9yLmdldFZhbHVlKCk7XG5cdFx0XHRcdFx0XHRpZiAoY29udGVudCkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBsYXN0TGluZSA9IGxpbmVzLmxlbmd0aCAtIDE7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGxhc3RMaW5lTGVuZ3RoID0gbGluZXNbbGFzdExpbmVdPy5sZW5ndGggfHwgMDtcblx0XHRcdFx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IGxhc3RMaW5lLCBjaDogbGFzdExpbmVMZW5ndGggfSk7XG5cdFx0XHRcdFx0XHRcdGVkaXRvci5mb2N1cygpO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fTtcblx0XHRcdFxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdGlmICghcG9zaXRpb25DdXJzb3IoKSkge1xuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0cG9zaXRpb25DdXJzb3IoKTtcblx0XHRcdFx0XHR9LCAyMDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCAxMDApO1xuXG5cdFx0XHRyZXR1cm4gbmV3RmlsZTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuXHRcdFx0bmV3IE5vdGljZShgRmFpbGVkIHRvIHJlbmFtZSBmaWxlOiAke2Vycm9yTWVzc2FnZX0uYCk7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdH1cblxuXG5cdGFzeW5jIHJlbmFtZUZpbGUob3B0aW9uczogUmVuYW1lT3B0aW9ucyk6IFByb21pc2U8VEZpbGUgfCBudWxsPiB7XG5cdFx0Y29uc3QgeyBmaWxlLCB0aXRsZSwgdHlwZSB9ID0gb3B0aW9ucztcblx0XHRcblx0XHRpZiAoIXRpdGxlKSB7XG5cdFx0XHRuZXcgTm90aWNlKGBUaXRsZSBpcyByZXF1aXJlZCB0byByZW5hbWUgdGhlIGNvbnRlbnQuYCk7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHRjb25zdCBjb250ZW50VHlwZSA9IHRoaXMuZ2V0Q29udGVudFR5cGUodHlwZSk7XG5cdFx0aWYgKCFjb250ZW50VHlwZSAmJiB0eXBlICE9PSBcIm5vdGVcIikge1xuXHRcdFx0bmV3IE5vdGljZShgQ29udGVudCB0eXBlICR7dHlwZX0gbm90IGZvdW5kLmApO1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0Y29uc3Qga2ViYWJUaXRsZSA9IHRoaXMudG9LZWJhYkNhc2UodGl0bGUpO1xuXHRcdGNvbnN0IHByZWZpeCA9IFwiXCI7XG5cblx0XHRjb25zdCBjcmVhdGlvbk1vZGUgPSBjb250ZW50VHlwZT8uY3JlYXRpb25Nb2RlIHx8IFwiZmlsZVwiO1xuXHRcdGlmIChjcmVhdGlvbk1vZGUgPT09IFwiZm9sZGVyXCIpIHtcblx0XHRcdHJldHVybiB0aGlzLnJlbmFtZUZvbGRlclN0cnVjdHVyZShmaWxlLCBrZWJhYlRpdGxlLCBwcmVmaXgsIHR5cGUsIGNvbnRlbnRUeXBlKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIHRoaXMucmVuYW1lRmlsZVN0cnVjdHVyZShmaWxlLCBrZWJhYlRpdGxlLCBwcmVmaXgsIGNvbnRlbnRUeXBlKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHJlbmFtZUZvbGRlclN0cnVjdHVyZShmaWxlOiBURmlsZSwga2ViYWJUaXRsZTogc3RyaW5nLCBwcmVmaXg6IHN0cmluZywgdHlwZTogQ29udGVudFR5cGVJZCwgY29udGVudFR5cGU6IENvbnRlbnRUeXBlIHwgbnVsbCk6IFByb21pc2U8VEZpbGUgfCBudWxsPiB7XG5cdFx0Ly8gU21hcnQgZGV0ZWN0aW9uOiB0cmVhdCBhcyBpbmRleCBpZiBmaWxlbmFtZSBtYXRjaGVzIHRoZSBpbmRleCBmaWxlIG5hbWVcblx0XHQvLyBEZWZhdWx0IHRvIFwiaW5kZXhcIiB3aGVuIGluZGV4RmlsZU5hbWUgaXMgYmxhbmtcblx0XHRjb25zdCBpbmRleEZpbGVOYW1lID0gY29udGVudFR5cGU/LmluZGV4RmlsZU5hbWUgfHwgXCJpbmRleFwiO1xuXHRcdGNvbnN0IGlzSW5kZXggPSBmaWxlLmJhc2VuYW1lID09PSBpbmRleEZpbGVOYW1lO1xuXHRcdGlmIChpc0luZGV4KSB7XG5cdFx0XHRpZiAoIWZpbGUucGFyZW50KSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJDYW5ub3QgcmVuYW1lOiBmaWxlIGhhcyBubyBwYXJlbnQgZm9sZGVyLlwiKTtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cdFx0XHRwcmVmaXggPSBmaWxlLnBhcmVudC5uYW1lLnN0YXJ0c1dpdGgoXCJfXCIpID8gXCJfXCIgOiBcIlwiO1xuXHRcdFx0Y29uc3QgbmV3Rm9sZGVyTmFtZSA9IGAke3ByZWZpeH0ke2tlYmFiVGl0bGV9YDtcblx0XHRcdGNvbnN0IHBhcmVudEZvbGRlciA9IGZpbGUucGFyZW50LnBhcmVudDtcblx0XHRcdGlmICghcGFyZW50Rm9sZGVyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJDYW5ub3QgcmVuYW1lOiBwYXJlbnQgZm9sZGVyIGhhcyBubyBwYXJlbnQuXCIpO1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblx0XHRcdC8vIEZpeCBwYXRoIGNvbnN0cnVjdGlvbiB0byBhdm9pZCBkb3VibGUgc2xhc2hlc1xuXHRcdFx0bGV0IG5ld0ZvbGRlclBhdGg6IHN0cmluZztcblx0XHRcdGlmIChwYXJlbnRGb2xkZXIucGF0aCA9PT0gXCJcIiB8fCBwYXJlbnRGb2xkZXIucGF0aCA9PT0gXCIvXCIpIHtcblx0XHRcdFx0Ly8gUGFyZW50IGlzIHZhdWx0IHJvb3Rcblx0XHRcdFx0bmV3Rm9sZGVyUGF0aCA9IG5ld0ZvbGRlck5hbWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBQYXJlbnQgaXMgaW4gYSBzdWJmb2xkZXJcblx0XHRcdFx0bmV3Rm9sZGVyUGF0aCA9IGAke3BhcmVudEZvbGRlci5wYXRofS8ke25ld0ZvbGRlck5hbWV9YDtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgZXhpc3RpbmdGb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3Rm9sZGVyUGF0aCk7XG5cdFx0XHRpZiAoZXhpc3RpbmdGb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEZvbGRlciBhbHJlYWR5IGV4aXN0cyBhdCAke25ld0ZvbGRlclBhdGh9LmApO1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShmaWxlLnBhcmVudCwgbmV3Rm9sZGVyUGF0aCk7XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEZhaWxlZCB0byByZW5hbWUgZm9sZGVyOiAke2Vycm9yTWVzc2FnZX0uYCk7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRjb25zdCBuZXdGaWxlUGF0aCA9IGAke25ld0ZvbGRlclBhdGh9LyR7ZmlsZS5uYW1lfWA7XG5cdFx0XHRjb25zdCBuZXdGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld0ZpbGVQYXRoKTtcblx0XHRcdGlmICghKG5ld0ZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIkZhaWxlZCB0byBsb2NhdGUgcmVuYW1lZCBmaWxlLlwiKTtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdFxuXHRcdFx0cmV0dXJuIG5ld0ZpbGU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICghZmlsZS5wYXJlbnQpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIkNhbm5vdCByZW5hbWU6IGZpbGUgaGFzIG5vIHBhcmVudCBmb2xkZXIuXCIpO1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblx0XHRcdHByZWZpeCA9IGZpbGUuYmFzZW5hbWUuc3RhcnRzV2l0aChcIl9cIikgPyBcIl9cIiA6IFwiXCI7XG5cdFx0XHQvLyBQcmVzZXJ2ZSB0aGUgb3JpZ2luYWwgZmlsZSBleHRlbnNpb25cblx0XHRcdGNvbnN0IGV4dGVuc2lvbiA9IGZpbGUuZXh0ZW5zaW9uO1xuXHRcdFx0Y29uc3QgbmV3TmFtZSA9IGAke3ByZWZpeH0ke2tlYmFiVGl0bGV9LiR7ZXh0ZW5zaW9ufWA7XG5cdFx0XHRjb25zdCBuZXdQYXRoID0gYCR7ZmlsZS5wYXJlbnQucGF0aH0vJHtuZXdOYW1lfWA7XG5cblx0XHRcdGNvbnN0IGV4aXN0aW5nRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdQYXRoKTtcblx0XHRcdGlmIChleGlzdGluZ0ZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBleGlzdGluZ0ZpbGUgIT09IGZpbGUpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRmlsZSBhbHJlYWR5IGV4aXN0cyBhdCAke25ld1BhdGh9LmApO1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVXNlIGZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoKSB3aGljaCBhdXRvbWF0aWNhbGx5IHVwZGF0ZXMgbGlua3Ncblx0XHRcdGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoZmlsZSwgbmV3UGF0aCk7XG5cdFx0XHRjb25zdCBuZXdGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld1BhdGgpO1xuXHRcdFx0aWYgKCEobmV3RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiRmFpbGVkIHRvIGxvY2F0ZSByZW5hbWVkIGZpbGUuXCIpO1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0XG5cdFx0XHRyZXR1cm4gbmV3RmlsZTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHJlbmFtZUZpbGVTdHJ1Y3R1cmUoZmlsZTogVEZpbGUsIGtlYmFiVGl0bGU6IHN0cmluZywgcHJlZml4OiBzdHJpbmcsIGNvbnRlbnRUeXBlOiBDb250ZW50VHlwZSB8IG51bGwpOiBQcm9taXNlPFRGaWxlIHwgbnVsbD4ge1xuXHRcdGlmICghZmlsZS5wYXJlbnQpIHtcblx0XHRcdG5ldyBOb3RpY2UoXCJDYW5ub3QgcmVuYW1lOiBmaWxlIGhhcyBubyBwYXJlbnQgZm9sZGVyLlwiKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0XHRcblx0XHQvLyBDaGVjayBpZiB0aGlzIGlzIGFuIGluZGV4IGZpbGUgLSBpZiBzbywgcmVuYW1lIHRoZSBwYXJlbnQgZm9sZGVyIGluc3RlYWRcblx0XHQvLyBTbWFydCBkZXRlY3Rpb246IG9ubHkgdHJlYXQgYXMgaW5kZXggaWYgaW5kZXhGaWxlTmFtZSBpcyBzcGVjaWZpZWQgYW5kIG1hdGNoZXNcblx0XHRjb25zdCBpbmRleEZpbGVOYW1lID0gY29udGVudFR5cGU/LmluZGV4RmlsZU5hbWUgfHwgXCJcIjtcblx0XHRjb25zdCBpc0luZGV4ID0gaW5kZXhGaWxlTmFtZSAmJiBcblx0XHRcdGluZGV4RmlsZU5hbWUudHJpbSgpICE9PSBcIlwiICYmIFxuXHRcdFx0ZmlsZS5iYXNlbmFtZSA9PT0gaW5kZXhGaWxlTmFtZTtcblx0XHRcblx0XHRpZiAoaXNJbmRleCkge1xuXHRcdFx0cHJlZml4ID0gZmlsZS5wYXJlbnQubmFtZS5zdGFydHNXaXRoKFwiX1wiKSA/IFwiX1wiIDogXCJcIjtcblx0XHRcdGNvbnN0IG5ld0ZvbGRlck5hbWUgPSBgJHtwcmVmaXh9JHtrZWJhYlRpdGxlfWA7XG5cdFx0XHRjb25zdCBwYXJlbnRGb2xkZXIgPSBmaWxlLnBhcmVudC5wYXJlbnQ7XG5cdFx0XHRpZiAoIXBhcmVudEZvbGRlcikge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQ2Fubm90IHJlbmFtZTogcGFyZW50IGZvbGRlciBoYXMgbm8gcGFyZW50LlwiKTtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cdFx0XHQvLyBGaXggcGF0aCBjb25zdHJ1Y3Rpb24gdG8gYXZvaWQgZG91YmxlIHNsYXNoZXNcblx0XHRcdGxldCBuZXdGb2xkZXJQYXRoOiBzdHJpbmc7XG5cdFx0XHRpZiAocGFyZW50Rm9sZGVyLnBhdGggPT09IFwiXCIgfHwgcGFyZW50Rm9sZGVyLnBhdGggPT09IFwiL1wiKSB7XG5cdFx0XHRcdC8vIFBhcmVudCBpcyB2YXVsdCByb290XG5cdFx0XHRcdG5ld0ZvbGRlclBhdGggPSBuZXdGb2xkZXJOYW1lO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gUGFyZW50IGlzIGluIGEgc3ViZm9sZGVyXG5cdFx0XHRcdG5ld0ZvbGRlclBhdGggPSBgJHtwYXJlbnRGb2xkZXIucGF0aH0vJHtuZXdGb2xkZXJOYW1lfWA7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGV4aXN0aW5nRm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld0ZvbGRlclBhdGgpO1xuXHRcdFx0aWYgKGV4aXN0aW5nRm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBGb2xkZXIgYWxyZWFkeSBleGlzdHMgYXQgJHtuZXdGb2xkZXJQYXRofS5gKTtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENhbGN1bGF0ZSB0aGUgbmV3IGZpbGUgcGF0aCBiZWZvcmUgcmVuYW1pbmdcblx0XHRcdGNvbnN0IG5ld0ZpbGVQYXRoID0gYCR7bmV3Rm9sZGVyUGF0aH0vJHtmaWxlLm5hbWV9YDtcblx0XHRcdFxuXHRcdFx0Ly8gVHJhY2sgdGhhdCB0aGlzIGZpbGUgd2lsbCBiZSBjcmVhdGVkIGJ5IHRoZSBwbHVnaW4gQkVGT1JFIHJlbmFtaW5nXG5cdFx0XHQvLyBUaGlzIHByZXZlbnRzIHRoZSBjcmVhdGUgZXZlbnQgZnJvbSB0cmlnZ2VyaW5nIGFub3RoZXIgbW9kYWxcblx0XHRcdGlmICh0aGlzLnBsdWdpbiAmJiAncGx1Z2luQ3JlYXRlZEZpbGVzJyBpbiB0aGlzLnBsdWdpbikge1xuXHRcdFx0XHRjb25zdCBwbHVnaW5XaXRoRmlsZXMgPSB0aGlzLnBsdWdpbiBhcyB7IHBsdWdpbkNyZWF0ZWRGaWxlcz86IFNldDxzdHJpbmc+IH07XG5cdFx0XHRcdHBsdWdpbldpdGhGaWxlcy5wbHVnaW5DcmVhdGVkRmlsZXM/LmFkZChuZXdGaWxlUGF0aCk7XG5cdFx0XHR9XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoZmlsZS5wYXJlbnQsIG5ld0ZvbGRlclBhdGgpO1xuXHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcignRmlsZU9wZXJhdGlvbnM6IEZvbGRlciByZW5hbWUgZmFpbGVkOicsIGVycm9yKTtcblx0XHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuXHRcdFx0XHRuZXcgTm90aWNlKGBGYWlsZWQgdG8gcmVuYW1lIGZvbGRlcjogJHtlcnJvck1lc3NhZ2V9LmApO1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Y29uc3QgbmV3RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdGaWxlUGF0aCk7XG5cdFx0XHRpZiAoIShuZXdGaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJGYWlsZWQgdG8gbG9jYXRlIHJlbmFtZWQgZmlsZS5cIik7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRyZXR1cm4gbmV3RmlsZTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gRm9yIG5vbi1pbmRleCBmaWxlcywgcmVuYW1lIHRoZSBmaWxlIGl0c2VsZlxuXHRcdHByZWZpeCA9IGZpbGUuYmFzZW5hbWUuc3RhcnRzV2l0aChcIl9cIikgPyBcIl9cIiA6IFwiXCI7XG5cdFx0Ly8gUHJlc2VydmUgdGhlIG9yaWdpbmFsIGZpbGUgZXh0ZW5zaW9uXG5cdFx0Y29uc3QgZXh0ZW5zaW9uID0gZmlsZS5leHRlbnNpb247XG5cdFx0Y29uc3QgbmV3TmFtZSA9IGAke3ByZWZpeH0ke2tlYmFiVGl0bGV9LiR7ZXh0ZW5zaW9ufWA7XG5cdFx0XG5cdFx0Ly8gRml4IHBhdGggY29uc3RydWN0aW9uIHRvIGF2b2lkIGRvdWJsZSBzbGFzaGVzXG5cdFx0bGV0IG5ld1BhdGg6IHN0cmluZztcblx0XHRpZiAoZmlsZS5wYXJlbnQucGF0aCA9PT0gXCJcIiB8fCBmaWxlLnBhcmVudC5wYXRoID09PSBcIi9cIikge1xuXHRcdFx0Ly8gRmlsZSBpcyBpbiB2YXVsdCByb290XG5cdFx0XHRuZXdQYXRoID0gbmV3TmFtZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gRmlsZSBpcyBpbiBhIHN1YmZvbGRlclxuXHRcdFx0bmV3UGF0aCA9IGAke2ZpbGUucGFyZW50LnBhdGh9LyR7bmV3TmFtZX1gO1xuXHRcdH1cblxuXHRcdGNvbnN0IGV4aXN0aW5nRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdQYXRoKTtcblx0XHRpZiAoZXhpc3RpbmdGaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZXhpc3RpbmdGaWxlICE9PSBmaWxlKSB7XG5cdFx0XHRuZXcgTm90aWNlKGBGaWxlIGFscmVhZHkgZXhpc3RzIGF0ICR7bmV3UGF0aH0uYCk7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBUcmFjayB0aGF0IHRoaXMgZmlsZSB3aWxsIGJlIGNyZWF0ZWQgYnkgdGhlIHBsdWdpbiBCRUZPUkUgcmVuYW1pbmdcblx0XHQvLyBUaGlzIHByZXZlbnRzIHRoZSBjcmVhdGUgZXZlbnQgZnJvbSB0cmlnZ2VyaW5nIGFub3RoZXIgbW9kYWxcblx0XHRpZiAodGhpcy5wbHVnaW4gJiYgJ3BsdWdpbkNyZWF0ZWRGaWxlcycgaW4gdGhpcy5wbHVnaW4pIHtcblx0XHRcdGNvbnN0IHBsdWdpbldpdGhGaWxlcyA9IHRoaXMucGx1Z2luIGFzIHsgcGx1Z2luQ3JlYXRlZEZpbGVzPzogU2V0PHN0cmluZz4gfTtcblx0XHRcdHBsdWdpbldpdGhGaWxlcy5wbHVnaW5DcmVhdGVkRmlsZXM/LmFkZChuZXdQYXRoKTtcblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShmaWxlLCBuZXdQYXRoKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcignRmlsZU9wZXJhdGlvbnM6IEZpbGUgcmVuYW1lIGZhaWxlZDonLCBlcnJvcik7XG5cdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG5cdFx0XHRuZXcgTm90aWNlKGBGYWlsZWQgdG8gcmVuYW1lIGZpbGU6ICR7ZXJyb3JNZXNzYWdlfS5gKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0XHRcblx0XHRjb25zdCBuZXdGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld1BhdGgpO1xuXHRcdGlmICghKG5ld0ZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdG5ldyBOb3RpY2UoXCJGYWlsZWQgdG8gbG9jYXRlIHJlbmFtZWQgZmlsZS5cIik7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdFx0XG5cdFx0cmV0dXJuIG5ld0ZpbGU7XG5cdH1cbn1cbiIsICIvKipcclxuICogVXRpbGl0eSBmdW5jdGlvbnMgZm9yIG1hdGNoaW5nIGZpbGUgcGF0aHMgYWdhaW5zdCBmb2xkZXIgcGF0dGVybnMgd2l0aCB3aWxkY2FyZCBzdXBwb3J0LlxyXG4gKiBcclxuICogV2lsZGNhcmQgcGF0dGVybnM6XHJcbiAqIC0gYGRvY3NgIG1hdGNoZXMgYGRvY3MvYCBhbmQgYW55dGhpbmcgdW5kZXIgaXRcclxuICogLSBgZG9jcy97YXN0ZXJpc2t9YCBtYXRjaGVzIGBkb2NzL2FueXRoaW5nL2AgYW5kIGFueXRoaW5nIHVuZGVyIGl0IChvbmUgbGV2ZWwgZGVlcClcclxuICogLSBgZG9jcy97YXN0ZXJpc2t9L3thc3Rlcmlza31gIG1hdGNoZXMgYGRvY3MvYW55dGhpbmcvYW55dGhpbmcvYCBhbmQgYW55dGhpbmcgdW5kZXIgaXQgKHR3byBsZXZlbHMgZGVlcClcclxuICogLSBldGMuXHJcbiAqIFxyXG4gKiBOb3RlOiB7YXN0ZXJpc2t9IHJlcHJlc2VudHMgdGhlIHdpbGRjYXJkIGNoYXJhY3RlciAqXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIENoZWNrcyBpZiBhIGZpbGUgcGF0aCBtYXRjaGVzIGEgZm9sZGVyIHBhdHRlcm4gKHN1cHBvcnRzIHdpbGRjYXJkcylcclxuICogQHBhcmFtIGZpbGVQYXRoIFRoZSBmaWxlIHBhdGggdG8gY2hlY2sgKGUuZy4sIFwiZG9jcy9leGFtcGxlLWEvZ2V0dGluZy1zdGFydGVkLm1kXCIpXHJcbiAqIEBwYXJhbSBmb2xkZXJQYXR0ZXJuIFRoZSBmb2xkZXIgcGF0dGVybiAtIHVzZSBhc3RlcmlzayBmb3Igd2lsZGNhcmRzIChlLmcuLCBcImRvY3NcIiwgXCJkb2NzL2FzdGVyaXNrXCIsIFwiZG9jcy9hc3Rlcmlzay9hc3Rlcmlza1wiKVxyXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBmaWxlIHBhdGggbWF0Y2hlcyB0aGUgcGF0dGVyblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoZXNGb2xkZXJQYXR0ZXJuKGZpbGVQYXRoOiBzdHJpbmcsIGZvbGRlclBhdHRlcm46IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdC8vIEhhbmRsZSBlbXB0eSBmb2xkZXIgcGF0dGVybiAocm9vdCBmb2xkZXIpIC0gbWF0Y2hlcyBmaWxlcyBpbiB2YXVsdCByb290IG9ubHlcclxuXHRpZiAoIWZvbGRlclBhdHRlcm4gfHwgZm9sZGVyUGF0dGVybi50cmltKCkgPT09IFwiXCIpIHtcclxuXHRcdC8vIFJvb3QgZm9sZGVyIG1hdGNoZXMgZmlsZXMgdGhhdCBkb24ndCBoYXZlIGFueSBwYXRoIHNlcGFyYXRvcnNcclxuXHRcdC8vIG9yIGFyZSBpbiB2YXVsdCByb290IChubyBsZWFkaW5nIHNsYXNoLCBzaW5nbGUgc2VnbWVudClcclxuXHRcdHJldHVybiAhZmlsZVBhdGguaW5jbHVkZXMoXCIvXCIpIHx8IChmaWxlUGF0aC5zcGxpdChcIi9cIikubGVuZ3RoID09PSAxKTtcclxuXHR9XHJcblxyXG5cdC8vIElmIHBhdHRlcm4gZG9lc24ndCBjb250YWluIHdpbGRjYXJkcywgdXNlIHNpbXBsZSBwcmVmaXggbWF0Y2hpbmdcclxuXHRpZiAoIWZvbGRlclBhdHRlcm4uaW5jbHVkZXMoXCIqXCIpKSB7XHJcblx0XHRyZXR1cm4gZmlsZVBhdGggPT09IGZvbGRlclBhdHRlcm4gfHwgZmlsZVBhdGguc3RhcnRzV2l0aChmb2xkZXJQYXR0ZXJuICsgXCIvXCIpO1xyXG5cdH1cclxuXHJcblx0Ly8gQ29udmVydCB3aWxkY2FyZCBwYXR0ZXJuIHRvIHJlZ2V4XHJcblx0Ly8gRXNjYXBlIHNwZWNpYWwgcmVnZXggY2hhcmFjdGVycyBleGNlcHQgKlxyXG5cdGNvbnN0IGVzY2FwZWRQYXR0ZXJuID0gZm9sZGVyUGF0dGVyblxyXG5cdFx0LnJlcGxhY2UoL1suKz9eJHt9KCl8W1xcXVxcXFxdL2csIFwiXFxcXCQmXCIpXHJcblx0XHQucmVwbGFjZSgvXFwqL2csIFwiW14vXStcIik7IC8vIFdpbGRjYXJkIG1hdGNoZXMgYW55IHBhdGggc2VnbWVudCAobm9uLXNsYXNoIGNoYXJhY3RlcnMpXHJcblxyXG5cdC8vIENyZWF0ZSByZWdleCB0aGF0IG1hdGNoZXMgdGhlIHBhdHRlcm4gYW5kIGFueXRoaW5nIGFmdGVyIGl0XHJcblx0Y29uc3QgcmVnZXhQYXR0ZXJuID0gYF4ke2VzY2FwZWRQYXR0ZXJufSg/Oi98JClgO1xyXG5cdGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChyZWdleFBhdHRlcm4pO1xyXG5cdHJldHVybiByZWdleC50ZXN0KGZpbGVQYXRoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldHMgdGhlIGRlcHRoIG9mIGEgZm9sZGVyIHBhdHRlcm4gKG51bWJlciBvZiBzZWdtZW50cylcclxuICogVXNlZCBmb3IgcHJpb3JpdGl6aW5nIG1vcmUgc3BlY2lmaWMgcGF0dGVybnNcclxuICogQmxhbmsvcm9vdCBmb2xkZXIgaGFzIGRlcHRoIDAgKGxlYXN0IHNwZWNpZmljKVxyXG4gKiBAcGFyYW0gZm9sZGVyUGF0dGVybiBUaGUgZm9sZGVyIHBhdHRlcm5cclxuICogQHJldHVybnMgVGhlIG51bWJlciBvZiBwYXRoIHNlZ21lbnRzIGluIHRoZSBwYXR0ZXJuICgwIGZvciByb290L2JsYW5rKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhdHRlcm5EZXB0aChmb2xkZXJQYXR0ZXJuOiBzdHJpbmcpOiBudW1iZXIge1xyXG5cdGlmICghZm9sZGVyUGF0dGVybiB8fCBmb2xkZXJQYXR0ZXJuLnRyaW0oKSA9PT0gXCJcIikgcmV0dXJuIDA7XHJcblx0cmV0dXJuIGZvbGRlclBhdHRlcm4uc3BsaXQoXCIvXCIpLmxlbmd0aDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNvcnRzIGNvbnRlbnQgdHlwZXMgYnkgcGF0dGVybiBzcGVjaWZpY2l0eSAobW9yZSBzcGVjaWZpYyBwYXR0ZXJucyBmaXJzdClcclxuICogVGhpcyBlbnN1cmVzIHRoYXQgbW9yZSBzcGVjaWZpYyBwYXR0ZXJucyBhcmUgY2hlY2tlZCBiZWZvcmUgbGVzcyBzcGVjaWZpYyBvbmVzXHJcbiAqIEJsYW5rL3Jvb3QgZm9sZGVyIHBhdHRlcm5zIChkZXB0aCAwKSBhcmUgc29ydGVkIGxhc3QgKGxlYXN0IHNwZWNpZmljKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNvcnRCeVBhdHRlcm5TcGVjaWZpY2l0eTxUIGV4dGVuZHMgeyBmb2xkZXI6IHN0cmluZyB9Pih0eXBlczogVFtdKTogVFtdIHtcclxuXHRyZXR1cm4gWy4uLnR5cGVzXS5zb3J0KChhLCBiKSA9PiB7XHJcblx0XHRjb25zdCBkZXB0aEEgPSBnZXRQYXR0ZXJuRGVwdGgoYS5mb2xkZXIpO1xyXG5cdFx0Y29uc3QgZGVwdGhCID0gZ2V0UGF0dGVybkRlcHRoKGIuZm9sZGVyKTtcclxuXHRcdC8vIE1vcmUgc3BlY2lmaWMgKGRlZXBlcikgcGF0dGVybnMgZmlyc3RcclxuXHRcdC8vIEJsYW5rIHBhdHRlcm5zIChkZXB0aCAwKSB3aWxsIGJlIHNvcnRlZCBsYXN0XHJcblx0XHRyZXR1cm4gZGVwdGhCIC0gZGVwdGhBO1xyXG5cdH0pO1xyXG59XHJcblxyXG4iLCAiaW1wb3J0IHsgQXBwLCBURmlsZSwgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IEFzdHJvQ29tcG9zZXJTZXR0aW5ncywgUGFyc2VkRnJvbnRtYXR0ZXIsIFRlbXBsYXRlVmFsdWVzLCBLTk9XTl9BUlJBWV9LRVlTLCBDb250ZW50VHlwZUlkIH0gZnJvbSBcIi4uL3R5cGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVGVtcGxhdGVQYXJzZXIge1xyXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgYXBwOiBBcHAsIHByaXZhdGUgc2V0dGluZ3M6IEFzdHJvQ29tcG9zZXJTZXR0aW5ncykge31cclxuXHJcblx0LyoqXHJcblx0ICogQ29udmVydCBhIHN0cmluZyB0byBrZWJhYi1jYXNlIGZvciBzbHVnIGdlbmVyYXRpb25cclxuXHQgKi9cclxuXHRwcml2YXRlIHRvS2ViYWJDYXNlKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBzdHJcclxuXHRcdFx0LnRvTG93ZXJDYXNlKClcclxuXHRcdFx0LnJlcGxhY2UoL1teYS16MC05XFxzLV0vZywgXCJcIilcclxuXHRcdFx0LnRyaW0oKVxyXG5cdFx0XHQucmVwbGFjZSgvXFxzKy9nLCBcIi1cIilcclxuXHRcdFx0LnJlcGxhY2UoLy0rL2csIFwiLVwiKVxyXG5cdFx0XHQucmVwbGFjZSgvXi18LSQvZywgXCJcIik7XHJcblx0fVxyXG5cclxuXHRwYXJzZUZyb250bWF0dGVyKGNvbnRlbnQ6IHN0cmluZyk6IFBhcnNlZEZyb250bWF0dGVyIHtcclxuXHRcdGxldCBwcm9wZXJ0aWVzRW5kID0gMDtcclxuXHRcdGxldCBwcm9wZXJ0aWVzVGV4dCA9IFwiXCI7XHJcblx0XHRjb25zdCBleGlzdGluZ1Byb3BlcnRpZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHt9O1xyXG5cclxuXHRcdC8vIFBhcnNlIGV4aXN0aW5nIHByb3BlcnRpZXMgd2l0aCBmYWxsYmFjayBmb3IgbWlzc2luZyBzZWNvbmQgLS0tXHJcblx0XHRpZiAoY29udGVudC5zdGFydHNXaXRoKFwiLS0tXCIpKSB7XHJcblx0XHRcdHByb3BlcnRpZXNFbmQgPSBjb250ZW50LmluZGV4T2YoXCJcXG4tLS1cIiwgMyk7XHJcblx0XHRcdGlmIChwcm9wZXJ0aWVzRW5kID09PSAtMSkge1xyXG5cdFx0XHRcdHByb3BlcnRpZXNFbmQgPSBjb250ZW50Lmxlbmd0aDsgLy8gVHJlYXQgZW50aXJlIGNvbnRlbnQgYXMgcHJvcGVydGllcyBpZiBubyBzZWNvbmQgLS0tXHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cHJvcGVydGllc0VuZCArPSA0OyAvLyBNb3ZlIHBhc3QgdGhlIHNlY29uZCAtLS1cclxuXHRcdFx0fVxyXG5cdFx0XHRwcm9wZXJ0aWVzVGV4dCA9IGNvbnRlbnQuc2xpY2UoNCwgcHJvcGVydGllc0VuZCAtIDQpLnRyaW0oKTtcclxuXHRcdFx0XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0bGV0IGN1cnJlbnRLZXk6IHN0cmluZyB8IG51bGwgPSBudWxsO1xyXG5cdFx0XHRcdGNvbnN0IGFycmF5S2V5cyA9IG5ldyBTZXQ8c3RyaW5nPigpOyAvLyBUcmFjayB3aGljaCBrZXlzIGFyZSBhcnJheXNcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRwcm9wZXJ0aWVzVGV4dC5zcGxpdChcIlxcblwiKS5mb3JFYWNoKChsaW5lKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCB0cmltbWVkTGluZSA9IGxpbmUudHJpbSgpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBNYXRjaCBwcm9wZXJ0eSBsaW5lcyAtIG1vcmUgZmxleGlibGUgcmVnZXggdG8gaGFuZGxlIHZhcmlvdXMgcHJvcGVydHkgbmFtZXNcclxuXHRcdFx0XHRcdGNvbnN0IG1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL14oW2EtekEtWl9dW2EtekEtWjAtOV8tXSopOlxccyooLiopJC8pO1xyXG5cdFx0XHRcdFx0aWYgKG1hdGNoKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IFssIGtleSwgdmFsdWVdID0gbWF0Y2g7XHJcblx0XHRcdFx0XHRcdGN1cnJlbnRLZXkgPSBrZXk7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHRyaW1tZWRWYWx1ZSA9IHZhbHVlID8gdmFsdWUudHJpbSgpIDogXCJcIjtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIENoZWNrIGZvciBicmFja2V0LXN5bnRheCBhcnJheXM6IFtpdGVtXSBvciBbXCJpdGVtMVwiLCBcIml0ZW0yXCJdIG9yIFtpdGVtMSwgaXRlbTJdXHJcblx0XHRcdFx0XHRcdGNvbnN0IGJyYWNrZXRBcnJheU1hdGNoID0gdHJpbW1lZFZhbHVlLm1hdGNoKC9eXFxbKC4qKVxcXSQvKTtcclxuXHRcdFx0XHRcdFx0aWYgKGJyYWNrZXRBcnJheU1hdGNoKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gVGhpcyBpcyBhIGJyYWNrZXQtZm9ybWF0IGFycmF5XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgYXJyYXlDb250ZW50ID0gYnJhY2tldEFycmF5TWF0Y2hbMV0udHJpbSgpO1xyXG5cdFx0XHRcdFx0XHRcdGV4aXN0aW5nUHJvcGVydGllc1trZXldID0gW107XHJcblx0XHRcdFx0XHRcdFx0YXJyYXlLZXlzLmFkZChrZXkpOyAvLyBNYXJrIHRoaXMga2V5IGFzIGFuIGFycmF5XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0aWYgKGFycmF5Q29udGVudCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUGFyc2UgYXJyYXkgaXRlbXMgLSBoYW5kbGUgYm90aCBxdW90ZWQgYW5kIHVucXVvdGVkIHZhbHVlc1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gU3BsaXQgYnkgY29tbWEsIGJ1dCByZXNwZWN0IHF1b3Rlc1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgaXRlbXM6IHN0cmluZ1tdID0gW107XHJcblx0XHRcdFx0XHRcdFx0XHRsZXQgY3VycmVudEl0ZW0gPSBcIlwiO1xyXG5cdFx0XHRcdFx0XHRcdFx0bGV0IGluUXVvdGVzID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0XHRsZXQgcXVvdGVDaGFyID0gJyc7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXlDb250ZW50Lmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNoYXIgPSBhcnJheUNvbnRlbnRbaV07XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIWluUXVvdGVzICYmIChjaGFyID09PSAnXCInIHx8IGNoYXIgPT09IFwiJ1wiKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGluUXVvdGVzID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRxdW90ZUNoYXIgPSBjaGFyO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGluUXVvdGVzICYmIGNoYXIgPT09IHF1b3RlQ2hhcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIGl0J3MgZXNjYXBlZFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChpID4gMCAmJiBhcnJheUNvbnRlbnRbaSAtIDFdID09PSAnXFxcXCcpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnRJdGVtICs9IGNoYXI7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGluUXVvdGVzID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRxdW90ZUNoYXIgPSAnJztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIWluUXVvdGVzICYmIGNoYXIgPT09ICcsJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEVuZCBvZiBjdXJyZW50IGl0ZW1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCB0cmltbWVkSXRlbSA9IGN1cnJlbnRJdGVtLnRyaW0oKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodHJpbW1lZEl0ZW0pIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlbW92ZSBzdXJyb3VuZGluZyBxdW90ZXMgaWYgcHJlc2VudFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgdW5xdW90ZWQgPSB0cmltbWVkSXRlbS5yZXBsYWNlKC9eW1wiJ118W1wiJ10kL2csICcnKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGl0ZW1zLnB1c2godW5xdW90ZWQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjdXJyZW50SXRlbSA9IFwiXCI7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y3VycmVudEl0ZW0gKz0gY2hhcjtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBBZGQgdGhlIGxhc3QgaXRlbVxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRJdGVtLnRyaW0oKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCB0cmltbWVkSXRlbSA9IGN1cnJlbnRJdGVtLnRyaW0oKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgdW5xdW90ZWQgPSB0cmltbWVkSXRlbS5yZXBsYWNlKC9eW1wiJ118W1wiJ10kL2csICcnKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aXRlbXMucHVzaCh1bnF1b3RlZCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdGV4aXN0aW5nUHJvcGVydGllc1trZXldID0gaXRlbXM7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdC8vIE5vdCBhIGJyYWNrZXQgYXJyYXksIGNoZWNrIGZvciBvdGhlciBhcnJheSBmb3JtYXRzXHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgaXNLbm93bkFycmF5S2V5ID0gS05PV05fQVJSQVlfS0VZUy5pbmNsdWRlcyhrZXkgYXMgdHlwZW9mIEtOT1dOX0FSUkFZX0tFWVNbbnVtYmVyXSk7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgaXNFbXB0eUFycmF5ID0gIXRyaW1tZWRWYWx1ZSB8fCB0cmltbWVkVmFsdWUgPT09IFwiXCI7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgaXNBcnJheVByb3BlcnR5ID0gaXNLbm93bkFycmF5S2V5IHx8IGlzRW1wdHlBcnJheTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRpZiAoaXNBcnJheVByb3BlcnR5KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRleGlzdGluZ1Byb3BlcnRpZXNba2V5XSA9IFtdO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXJyYXlLZXlzLmFkZChrZXkpOyAvLyBNYXJrIHRoaXMga2V5IGFzIGFuIGFycmF5XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFN0cmlwIHN1cnJvdW5kaW5nIHF1b3RlcyBmcm9tIHN0cmluZyB2YWx1ZXNcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHVucXVvdGVkVmFsdWUgPSB0cmltbWVkVmFsdWUucmVwbGFjZSgvXltcIiddfFtcIiddJC9nLCAnJyk7XHJcblx0XHRcdFx0XHRcdFx0XHRleGlzdGluZ1Byb3BlcnRpZXNba2V5XSA9IFt1bnF1b3RlZFZhbHVlXTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoY3VycmVudEtleSAmJiB0cmltbWVkTGluZS5zdGFydHNXaXRoKFwiLSBcIikpIHtcclxuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgY3VycmVudCBrZXkgaXMgYW4gYXJyYXkgcHJvcGVydHlcclxuXHRcdFx0XHRcdFx0Y29uc3QgaXNBcnJheVByb3BlcnR5ID0gYXJyYXlLZXlzLmhhcyhjdXJyZW50S2V5KTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlmIChpc0FycmF5UHJvcGVydHkpIHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBpdGVtID0gdHJpbW1lZExpbmUucmVwbGFjZSgvXi1cXHMqLywgXCJcIik7XHJcblx0XHRcdFx0XHRcdFx0aWYgKGl0ZW0pIGV4aXN0aW5nUHJvcGVydGllc1tjdXJyZW50S2V5XS5wdXNoKGl0ZW0pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHRyaW1tZWRMaW5lICYmICF0cmltbWVkTGluZS5zdGFydHNXaXRoKFwiLSBcIikgJiYgIXRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoXCIjXCIpKSB7XHJcblx0XHRcdFx0XHRcdC8vIEhhbmRsZSB1bnJlY29nbml6ZWQgcHJvcGVydGllcyB0aGF0IGRvbid0IG1hdGNoIHRoZSBzdGFuZGFyZCBmb3JtYXRcclxuXHRcdFx0XHRcdFx0Ly8gVGhpcyBpcyBhIGZhbGxiYWNrIHRvIHByZXNlcnZlIHByb3BlcnRpZXMgdGhhdCBtaWdodCBoYXZlIHNwZWNpYWwgZm9ybWF0dGluZ1xyXG5cdFx0XHRcdFx0XHRjb25zdCBrZXlNYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eKFteOl0rKTpcXHMqKC4qKSQvKTtcclxuXHRcdFx0XHRcdFx0aWYgKGtleU1hdGNoKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgWywga2V5LCB2YWx1ZV0gPSBrZXlNYXRjaDtcclxuXHRcdFx0XHRcdFx0XHRpZiAoIWV4aXN0aW5nUHJvcGVydGllc1trZXldKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRleGlzdGluZ1Byb3BlcnRpZXNba2V5XSA9IFt2YWx1ZSA/IHZhbHVlLnRyaW0oKSA6IFwiXCJdO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdC8vIFByZXNlcnZlIGFycmF5IGtleXMgaWYgdGhleSBleGlzdCB3aXRob3V0IHZhbHVlc1xyXG5cdFx0XHRcdEtOT1dOX0FSUkFZX0tFWVMuZm9yRWFjaChrZXkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHByb3BlcnRpZXNUZXh0LmluY2x1ZGVzKGtleSArICc6JykgJiYgIWV4aXN0aW5nUHJvcGVydGllc1trZXldKSB7XHJcblx0XHRcdFx0XHRcdGV4aXN0aW5nUHJvcGVydGllc1trZXldID0gW107XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdC8vIEZhbGxiYWNrIHRvIHRlbXBsYXRlIGlmIHBhcnNpbmcgZmFpbHNcclxuXHRcdFx0XHRuZXcgTm90aWNlKFwiRmFsbGluZyBiYWNrIHRvIHRlbXBsYXRlIGR1ZSB0byBwYXJzaW5nIGVycm9yLlwiKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGJvZHlDb250ZW50ID0gY29udGVudC5zbGljZShwcm9wZXJ0aWVzRW5kKTtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHByb3BlcnRpZXM6IGV4aXN0aW5nUHJvcGVydGllcyxcclxuXHRcdFx0cHJvcGVydGllc1RleHQsXHJcblx0XHRcdHByb3BlcnRpZXNFbmQsXHJcblx0XHRcdGJvZHlDb250ZW50XHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0cGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZVN0cmluZzogc3RyaW5nLCB0aXRsZTogc3RyaW5nKTogeyB0ZW1wbGF0ZVByb3BzOiBzdHJpbmdbXTsgdGVtcGxhdGVWYWx1ZXM6IFRlbXBsYXRlVmFsdWVzIH0ge1xyXG5cdFx0Y29uc3QgdGVtcGxhdGVMaW5lcyA9IHRlbXBsYXRlU3RyaW5nLnNwbGl0KFwiXFxuXCIpO1xyXG5cdFx0Y29uc3QgdGVtcGxhdGVQcm9wczogc3RyaW5nW10gPSBbXTtcclxuXHRcdGNvbnN0IHRlbXBsYXRlVmFsdWVzOiBUZW1wbGF0ZVZhbHVlcyA9IHt9O1xyXG5cdFx0bGV0IGluUHJvcGVydGllcyA9IGZhbHNlO1xyXG5cclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGVtcGxhdGVMaW5lcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRjb25zdCBsaW5lID0gdGVtcGxhdGVMaW5lc1tpXS50cmltKCk7XHJcblx0XHRcdGlmIChsaW5lID09PSBcIi0tLVwiKSB7XHJcblx0XHRcdFx0aW5Qcm9wZXJ0aWVzID0gIWluUHJvcGVydGllcztcclxuXHRcdFx0XHRpZiAoIWluUHJvcGVydGllcykge1xyXG5cdFx0XHRcdFx0YnJlYWs7IC8vIFN0b3AgYXQgc2Vjb25kIC0tLSB0byBleGNsdWRlIHBvc3QtcHJvcGVydHkgY29udGVudFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoaW5Qcm9wZXJ0aWVzKSB7XHJcblx0XHRcdFx0Y29uc3QgbWF0Y2ggPSBsaW5lLm1hdGNoKC9eKFxcdyspOlxccyooLiopJC8pO1xyXG5cdFx0XHRcdGlmIChtYXRjaCkge1xyXG5cdFx0XHRcdFx0Y29uc3QgWywga2V5LCB2YWx1ZV0gPSBtYXRjaDtcclxuXHRcdFx0XHRcdHRlbXBsYXRlUHJvcHMucHVzaChrZXkpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBDaGVjayBpZiB0aGlzIGlzIGFuIGFycmF5IHByb3BlcnR5IChrbm93biBhcnJheSBrZXlzIG9yIFlBTUwgbGlzdCBmb3JtYXQpXHJcblx0XHRcdFx0XHRjb25zdCBpc0tub3duQXJyYXlLZXkgPSBLTk9XTl9BUlJBWV9LRVlTLmluY2x1ZGVzKGtleSBhcyB0eXBlb2YgS05PV05fQVJSQVlfS0VZU1tudW1iZXJdKTtcclxuXHRcdFx0XHRcdC8vIENoZWNrIGlmIGl0J3MgYSBZQU1MIGxpc3QgZm9ybWF0IChubyB2YWx1ZSBhZnRlciBjb2xvbiwgZW1wdHkgYnJhY2tldHMsIG9yIGVtcHR5IHZhbHVlIG1lYW5zIGl0J3MgYW4gYXJyYXkpXHJcblx0XHRcdFx0XHRjb25zdCBpc0VtcHR5QXJyYXkgPSAhdmFsdWUgfHwgdmFsdWUudHJpbSgpID09PSBcIlwiIHx8IHZhbHVlLnRyaW0oKSA9PT0gXCJbXVwiO1xyXG5cdFx0XHRcdFx0Y29uc3QgaXNBcnJheVByb3BlcnR5ID0gaXNLbm93bkFycmF5S2V5IHx8IGlzRW1wdHlBcnJheTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKGlzQXJyYXlQcm9wZXJ0eSkge1xyXG5cdFx0XHRcdFx0XHQvLyBIYW5kbGUgYXJyYXkgcHJvcGVydGllc1xyXG5cdFx0XHRcdFx0XHRpZiAodmFsdWUgJiYgdmFsdWUuc3RhcnRzV2l0aChcIltcIikpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBIYW5kbGUgYnJhY2tldCBmb3JtYXQ6IFtcIml0ZW0xXCIsIFwiaXRlbTJcIl1cclxuXHRcdFx0XHRcdFx0XHRjb25zdCBpdGVtcyA9IHZhbHVlXHJcblx0XHRcdFx0XHRcdFx0XHQucmVwbGFjZSgvW1tcXF1dL2csIFwiXCIpXHJcblx0XHRcdFx0XHRcdFx0XHQuc3BsaXQoXCIsXCIpXHJcblx0XHRcdFx0XHRcdFx0XHQubWFwKHQgPT4gdC50cmltKCkpXHJcblx0XHRcdFx0XHRcdFx0XHQuZmlsdGVyKHQgPT4gdCk7XHJcblx0XHRcdFx0XHRcdFx0dGVtcGxhdGVWYWx1ZXNba2V5XSA9IGl0ZW1zO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdC8vIEhhbmRsZSBZQU1MIGxpc3QgZm9ybWF0OiBlbXB0eSBvciB3aXRoIC0gaXRlbXNcclxuXHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZVZhbHVlc1trZXldID0gW107XHJcblx0XHRcdFx0XHRcdFx0Ly8gTG9vayBhaGVhZCBmb3IgaXRlbSBsaXN0XHJcblx0XHRcdFx0XHRcdFx0Zm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgdGVtcGxhdGVMaW5lcy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbmV4dExpbmUgPSB0ZW1wbGF0ZUxpbmVzW2pdLnRyaW0oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChuZXh0TGluZS5zdGFydHNXaXRoKFwiLSBcIikpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgaXRlbSA9IG5leHRMaW5lLnJlcGxhY2UoL14tXFxzKi8sIFwiXCIpLnRyaW0oKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGl0ZW0pIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBhcnJheVZhbHVlID0gdGVtcGxhdGVWYWx1ZXNba2V5XTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoQXJyYXkuaXNBcnJheShhcnJheVZhbHVlKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXJyYXlWYWx1ZS5wdXNoKGl0ZW0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChuZXh0TGluZSA9PT0gXCItLS1cIiB8fCAobmV4dExpbmUgJiYgIW5leHRMaW5lLnN0YXJ0c1dpdGgoXCItIFwiKSAmJiBuZXh0TGluZS5pbmNsdWRlcyhcIjpcIikpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFN0b3AgYXQgbmV4dCBwcm9wZXJ0eSBvciBlbmQgb2YgcHJvcGVydGllcyBzZWN0aW9uXHJcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0Ly8gVGhpcyBpcyBhIHN0cmluZyBwcm9wZXJ0eSwgbm90IGFuIGFycmF5XHJcblx0XHRcdFx0XHRcdGNvbnN0IHNsdWcgPSB0aGlzLnRvS2ViYWJDYXNlKHRpdGxlKTtcclxuXHRcdFx0XHRcdFx0Y29uc3Qgc3RyaW5nVmFsdWUgPSAodmFsdWUgfHwgXCJcIilcclxuXHRcdFx0XHRcdFx0XHQucmVwbGFjZSgvXFx7XFx7dGl0bGVcXH1cXH0vZywgdGl0bGUpXHJcblx0XHRcdFx0XHRcdFx0LnJlcGxhY2UoL1xce1xce2RhdGVcXH1cXH0vZywgd2luZG93Lm1vbWVudChuZXcgRGF0ZSgpKS5mb3JtYXQodGhpcy5zZXR0aW5ncy5kYXRlRm9ybWF0KSlcclxuXHRcdFx0XHRcdFx0XHQucmVwbGFjZSgvXFx7XFx7c2x1Z1xcfVxcfS9nLCBzbHVnKTtcclxuXHRcdFx0XHRcdFx0Ly8gU3RvcmUgYXMgYSBzaW5nbGUgc3RyaW5nIHZhbHVlLCBub3QgaW4gYW4gYXJyYXlcclxuXHRcdFx0XHRcdFx0dGVtcGxhdGVWYWx1ZXNba2V5XSA9IHN0cmluZ1ZhbHVlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB7IHRlbXBsYXRlUHJvcHMsIHRlbXBsYXRlVmFsdWVzIH07XHJcblx0fVxyXG5cclxuXHRidWlsZEZyb250bWF0dGVyQ29udGVudChmaW5hbFByb3BzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4sIGFycmF5S2V5cz86IFNldDxzdHJpbmc+KTogc3RyaW5nIHtcclxuXHRcdGxldCBuZXdDb250ZW50ID0gXCItLS1cXG5cIjtcclxuXHRcdGZvciAoY29uc3Qga2V5IGluIGZpbmFsUHJvcHMpIHtcclxuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBpcyBhbiBhcnJheSBwcm9wZXJ0eVxyXG5cdFx0XHRjb25zdCBpc0FycmF5UHJvcGVydHkgPSBLTk9XTl9BUlJBWV9LRVlTLmluY2x1ZGVzKGtleSBhcyB0eXBlb2YgS05PV05fQVJSQVlfS0VZU1tudW1iZXJdKSB8fCBcclxuXHRcdFx0XHQoYXJyYXlLZXlzICYmIGFycmF5S2V5cy5oYXMoa2V5KSk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoaXNBcnJheVByb3BlcnR5KSB7XHJcblx0XHRcdFx0bmV3Q29udGVudCArPSBgJHtrZXl9OlxcbmA7XHJcblx0XHRcdFx0aWYgKGZpbmFsUHJvcHNba2V5XS5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHRmaW5hbFByb3BzW2tleV0uZm9yRWFjaChpdGVtID0+IHtcclxuXHRcdFx0XHRcdFx0bmV3Q29udGVudCArPSBgICAtICR7aXRlbX1cXG5gO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdG5ld0NvbnRlbnQgKz0gYCR7a2V5fTogJHtmaW5hbFByb3BzW2tleV1bMF0gfHwgXCJcIn1cXG5gO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRuZXdDb250ZW50ICs9IFwiLS0tXCI7XHJcblx0XHRyZXR1cm4gbmV3Q29udGVudDtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHVwZGF0ZVRpdGxlSW5Gcm9udG1hdHRlcihmaWxlOiBURmlsZSwgbmV3VGl0bGU6IHN0cmluZywgdHlwZTogQ29udGVudFR5cGVJZCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Ly8gQ2hlY2sgaWYgdGVtcGxhdGUgaGFzIHt7dGl0bGV9fSAtIGlmIG5vdCwgZG9uJ3QgdXBkYXRlIGZyb250bWF0dGVyIGF0IGFsbFxyXG5cdFx0Y29uc3QgdGl0bGVLZXkgPSB0aGlzLmdldFRpdGxlS2V5KHR5cGUpO1xyXG5cdFx0Y29uc3QgaGFzVGl0bGVJblRlbXBsYXRlID0gdGhpcy50ZW1wbGF0ZUhhc1RpdGxlKHR5cGUpO1xyXG5cdFx0XHJcblx0XHQvLyBJZiB0ZW1wbGF0ZSBkb2Vzbid0IGhhdmUge3t0aXRsZX19LCBkb24ndCBtb2RpZnkgZnJvbnRtYXR0ZXJcclxuXHRcdGlmICghaGFzVGl0bGVJblRlbXBsYXRlKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcblx0XHRsZXQgcHJvcGVydGllc0VuZCA9IDA7XHJcblx0XHRsZXQgcHJvcGVydGllc1RleHQgPSBcIlwiO1xyXG5cdFx0bGV0IGhhc0Zyb250bWF0dGVyID0gZmFsc2U7XHJcblxyXG5cdFx0aWYgKGNvbnRlbnQuc3RhcnRzV2l0aChcIi0tLVwiKSkge1xyXG5cdFx0XHRoYXNGcm9udG1hdHRlciA9IHRydWU7XHJcblx0XHRcdHByb3BlcnRpZXNFbmQgPSBjb250ZW50LmluZGV4T2YoXCJcXG4tLS1cIiwgMyk7XHJcblx0XHRcdGlmIChwcm9wZXJ0aWVzRW5kID09PSAtMSkge1xyXG5cdFx0XHRcdHByb3BlcnRpZXNFbmQgPSBjb250ZW50Lmxlbmd0aDtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRwcm9wZXJ0aWVzRW5kICs9IDQ7XHJcblx0XHRcdH1cclxuXHRcdFx0cHJvcGVydGllc1RleHQgPSBjb250ZW50LnNsaWNlKDQsIHByb3BlcnRpZXNFbmQgLSA0KS50cmltKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgcHJvcE9yZGVyOiBzdHJpbmdbXSA9IFtdO1xyXG5cdFx0Y29uc3QgZXhpc3Rpbmc6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHN0cmluZ1tdPiA9IHt9O1xyXG5cdFx0bGV0IGN1cnJlbnRLZXk6IHN0cmluZyB8IG51bGwgPSBudWxsO1xyXG5cdFx0bGV0IHRpdGxlS2V5UG9zaXRpb24gPSAtMTsgLy8gVHJhY2sgdGhlIG9yaWdpbmFsIHBvc2l0aW9uIG9mIHRoZSB0aXRsZSBrZXlcclxuXHJcblx0XHRjb25zdCBhcnJheUtleXMgPSBuZXcgU2V0PHN0cmluZz4oKTsgLy8gVHJhY2sgd2hpY2gga2V5cyBhcmUgYXJyYXlzXHJcblx0XHRcclxuXHRcdHByb3BlcnRpZXNUZXh0LnNwbGl0KFwiXFxuXCIpLmZvckVhY2goKGxpbmUsIGluZGV4KSA9PiB7XHJcblx0XHRcdGNvbnN0IHRyaW1tZWRMaW5lID0gbGluZS50cmltKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBNYXRjaCBwcm9wZXJ0eSBsaW5lcyAtIG1vcmUgZmxleGlibGUgcmVnZXggdG8gaGFuZGxlIHZhcmlvdXMgcHJvcGVydHkgbmFtZXNcclxuXHRcdFx0Y29uc3QgbWF0Y2ggPSB0cmltbWVkTGluZS5tYXRjaCgvXihbYS16QS1aX11bYS16QS1aMC05Xy1dKik6XFxzKiguKikkLyk7XHJcblx0XHRcdGlmIChtYXRjaCkge1xyXG5cdFx0XHRcdGNvbnN0IFssIGtleSwgdmFsdWVdID0gbWF0Y2g7XHJcblx0XHRcdFx0cHJvcE9yZGVyLnB1c2goa2V5KTtcclxuXHRcdFx0XHRjdXJyZW50S2V5ID0ga2V5O1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFRyYWNrIHRoZSBvcmlnaW5hbCBwb3NpdGlvbiBvZiB0aGUgdGl0bGUga2V5XHJcblx0XHRcdFx0aWYgKGtleSA9PT0gdGl0bGVLZXkpIHtcclxuXHRcdFx0XHRcdHRpdGxlS2V5UG9zaXRpb24gPSBpbmRleDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc3QgaXNLbm93bkFycmF5S2V5ID0gS05PV05fQVJSQVlfS0VZUy5pbmNsdWRlcyhrZXkgYXMgdHlwZW9mIEtOT1dOX0FSUkFZX0tFWVNbbnVtYmVyXSk7XHJcblx0XHRcdFx0Y29uc3QgaXNFbXB0eUFycmF5ID0gIXZhbHVlIHx8IHZhbHVlLnRyaW0oKSA9PT0gXCJcIiB8fCB2YWx1ZS50cmltKCkgPT09IFwiW11cIjtcclxuXHRcdFx0XHRjb25zdCBpc0FycmF5UHJvcGVydHkgPSBpc0tub3duQXJyYXlLZXkgfHwgaXNFbXB0eUFycmF5O1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChpc0FycmF5UHJvcGVydHkpIHtcclxuXHRcdFx0XHRcdGV4aXN0aW5nW2tleV0gPSBbXTtcclxuXHRcdFx0XHRcdGFycmF5S2V5cy5hZGQoa2V5KTsgLy8gTWFyayB0aGlzIGtleSBhcyBhbiBhcnJheVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRleGlzdGluZ1trZXldID0gdmFsdWUgPyB2YWx1ZS50cmltKCkgOiBcIlwiO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIGlmIChjdXJyZW50S2V5ICYmIGFycmF5S2V5cy5oYXMoY3VycmVudEtleSkgJiYgdHJpbW1lZExpbmUuc3RhcnRzV2l0aChcIi0gXCIpKSB7XHJcblx0XHRcdFx0Ly8gSGFuZGxlIGFycmF5IGl0ZW1zXHJcblx0XHRcdFx0Y29uc3QgaXRlbSA9IHRyaW1tZWRMaW5lLnJlcGxhY2UoL14tXFxzKi8sIFwiXCIpO1xyXG5cdFx0XHRcdGlmIChpdGVtKSAoZXhpc3RpbmdbY3VycmVudEtleV0gYXMgc3RyaW5nW10pLnB1c2goaXRlbSk7XHJcblx0XHRcdH0gZWxzZSBpZiAodHJpbW1lZExpbmUgJiYgIXRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoXCItIFwiKSAmJiAhdHJpbW1lZExpbmUuc3RhcnRzV2l0aChcIiNcIikpIHtcclxuXHRcdFx0XHQvLyBIYW5kbGUgdW5yZWNvZ25pemVkIHByb3BlcnRpZXMgdGhhdCBkb24ndCBtYXRjaCB0aGUgc3RhbmRhcmQgZm9ybWF0XHJcblx0XHRcdFx0Ly8gVGhpcyBpcyBhIGZhbGxiYWNrIHRvIHByZXNlcnZlIHByb3BlcnRpZXMgdGhhdCBtaWdodCBoYXZlIHNwZWNpYWwgZm9ybWF0dGluZ1xyXG5cdFx0XHRcdGNvbnN0IGtleU1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL14oW146XSspOlxccyooLiopJC8pO1xyXG5cdFx0XHRcdGlmIChrZXlNYXRjaCkge1xyXG5cdFx0XHRcdFx0Y29uc3QgWywga2V5LCB2YWx1ZV0gPSBrZXlNYXRjaDtcclxuXHRcdFx0XHRcdGlmICghcHJvcE9yZGVyLmluY2x1ZGVzKGtleSkpIHtcclxuXHRcdFx0XHRcdFx0cHJvcE9yZGVyLnB1c2goa2V5KTtcclxuXHRcdFx0XHRcdFx0ZXhpc3Rpbmdba2V5XSA9IHZhbHVlID8gdmFsdWUudHJpbSgpIDogXCJcIjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFByb3Blcmx5IGVzY2FwZSBZQU1MIHN0cmluZyB2YWx1ZXNcclxuXHRcdC8vIFlBTUwgc3RyaW5ncyB3aXRoIHF1b3RlcyBuZWVkIHRvIGJlIHdyYXBwZWQgaW4gc2luZ2xlIHF1b3RlcyBvciBlc2NhcGVkIHByb3Blcmx5XHJcblx0XHRsZXQgdGl0bGVWYWw6IHN0cmluZztcclxuXHRcdGlmIChuZXdUaXRsZS5pbmNsdWRlcygnXCInKSB8fCBuZXdUaXRsZS5pbmNsdWRlcyhcIidcIikgfHwgbmV3VGl0bGUuaW5jbHVkZXMoJ1xcbicpIHx8IG5ld1RpdGxlLmluY2x1ZGVzKCdcXFxcJykpIHtcclxuXHRcdFx0Ly8gRm9yIHN0cmluZ3Mgd2l0aCBxdW90ZXMsIG5ld2xpbmVzLCBvciBiYWNrc2xhc2hlcywgdXNlIHNpbmdsZSBxdW90ZXMgYW5kIGVzY2FwZSBzaW5nbGUgcXVvdGVzXHJcblx0XHRcdHRpdGxlVmFsID0gYCcke25ld1RpdGxlLnJlcGxhY2UoLycvZywgXCInJ1wiKX0nYDtcclxuXHRcdH0gZWxzZSBpZiAobmV3VGl0bGUuaW5jbHVkZXMoXCIgXCIpIHx8IG5ld1RpdGxlLmluY2x1ZGVzKFwiOlwiKSB8fCBuZXdUaXRsZS5pbmNsdWRlcyhcIiNcIikgfHwgbmV3VGl0bGUuaW5jbHVkZXMoXCJAXCIpKSB7XHJcblx0XHRcdC8vIEZvciBzdHJpbmdzIHdpdGggc3BhY2VzIG9yIHNwZWNpYWwgWUFNTCBjaGFyYWN0ZXJzLCB3cmFwIGluIGRvdWJsZSBxdW90ZXMgYW5kIGVzY2FwZSBkb3VibGUgcXVvdGVzXHJcblx0XHRcdHRpdGxlVmFsID0gYFwiJHtuZXdUaXRsZS5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJyl9XCJgO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gRm9yIHNpbXBsZSBzdHJpbmdzLCBubyBxdW90ZXMgbmVlZGVkXHJcblx0XHRcdHRpdGxlVmFsID0gbmV3VGl0bGU7XHJcblx0XHR9XHJcblx0XHRleGlzdGluZ1t0aXRsZUtleV0gPSB0aXRsZVZhbDtcclxuXHRcdFxyXG5cdFx0Ly8gQWxzbyB1cGRhdGUgc2x1ZyBpZiBpdCBleGlzdHMgaW4gZnJvbnRtYXR0ZXJcclxuXHRcdGlmIChcInNsdWdcIiBpbiBleGlzdGluZykge1xyXG5cdFx0XHRjb25zdCBuZXdTbHVnID0gdGhpcy50b0tlYmFiQ2FzZShuZXdUaXRsZSk7XHJcblx0XHRcdGV4aXN0aW5nW1wic2x1Z1wiXSA9IG5ld1NsdWc7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgdGl0bGUga2V5IHdhcyBmb3VuZCBpbiBvcmlnaW5hbCBwcm9wZXJ0aWVzLCBwcmVzZXJ2ZSBpdHMgcG9zaXRpb25cclxuXHRcdC8vIE90aGVyd2lzZSwgYWRkIGl0IGF0IHRoZSBlbmRcclxuXHRcdGlmICh0aXRsZUtleVBvc2l0aW9uID09PSAtMSkge1xyXG5cdFx0XHQvLyBUaXRsZSBrZXkgbm90IGZvdW5kIGluIG9yaWdpbmFsIHByb3BlcnRpZXMsIGFkZCBpdCBhdCB0aGUgZW5kXHJcblx0XHRcdHByb3BPcmRlci5wdXNoKHRpdGxlS2V5KTtcclxuXHRcdH1cclxuXHRcdC8vIElmIHRpdGxlS2V5UG9zaXRpb24gPj0gMCwgdGhlIHRpdGxlIGtleSBpcyBhbHJlYWR5IGluIHByb3BPcmRlciBhdCB0aGUgY29ycmVjdCBwb3NpdGlvblxyXG5cclxuXHRcdC8vIE9ubHkgY3JlYXRlL3VwZGF0ZSBmcm9udG1hdHRlciBpZiBpdCBhbHJlYWR5IGV4aXN0c1xyXG5cdFx0Ly8gRG9uJ3QgY3JlYXRlIGZyb250bWF0dGVyIGZyb20gc2NyYXRjaCBpZiBmaWxlIGhhZCBub25lXHJcblx0XHRpZiAoIWhhc0Zyb250bWF0dGVyKSB7XHJcblx0XHRcdC8vIEZpbGUgaGFkIG5vIGZyb250bWF0dGVyIC0gZG9uJ3QgY3JlYXRlIGl0LCBqdXN0IHJldHVyblxyXG5cdFx0XHQvLyBUaGUgcmVuYW1lIGFscmVhZHkgaGFwcGVuZWQsIHdlIGp1c3QgZG9uJ3QgdXBkYXRlIGZyb250bWF0dGVyXHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBCdWlsZCBuZXcgY29udGVudCB3aXRoIGZyb250bWF0dGVyXHJcblx0XHRsZXQgbmV3Q29udGVudCA9IFwiLS0tXFxuXCI7XHJcblx0XHRmb3IgKGNvbnN0IGtleSBvZiBwcm9wT3JkZXIpIHtcclxuXHRcdFx0Y29uc3QgdmFsID0gZXhpc3Rpbmdba2V5XTtcclxuXHRcdFx0aWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xyXG5cdFx0XHRcdG5ld0NvbnRlbnQgKz0gYCR7a2V5fTpcXG5gO1xyXG5cdFx0XHRcdGlmICh2YWwubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0dmFsLmZvckVhY2goKGl0ZW06IHN0cmluZykgPT4ge1xyXG5cdFx0XHRcdFx0XHRuZXdDb250ZW50ICs9IGAgIC0gJHtpdGVtfVxcbmA7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0bmV3Q29udGVudCArPSBgJHtrZXl9OiAke3ZhbCB8fCBcIlwifVxcbmA7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdG5ld0NvbnRlbnQgKz0gXCItLS1cXG5cIjtcclxuXHJcblx0XHQvLyBHZXQgYm9keSBjb250ZW50IChmcm9udG1hdHRlciBhbHJlYWR5IGV4aXN0ZWQsIHNvIHdlIGtub3cgcHJvcGVydGllc0VuZCBpcyBzZXQpXHJcblx0XHRjb25zdCBib2R5Q29udGVudCA9IGNvbnRlbnQuc2xpY2UocHJvcGVydGllc0VuZCk7XHJcblx0XHRuZXdDb250ZW50ICs9IGJvZHlDb250ZW50O1xyXG5cclxuXHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBuZXdDb250ZW50KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZ2V0VGl0bGVLZXkodHlwZTogQ29udGVudFR5cGVJZCk6IHN0cmluZyB7XHJcblx0XHRpZiAodHlwZSA9PT0gXCJub3RlXCIpIHJldHVybiBcInRpdGxlXCI7XHJcblx0XHRcclxuXHRcdGNvbnN0IGNvbnRlbnRUeXBlcyA9IHRoaXMuc2V0dGluZ3MuY29udGVudFR5cGVzIHx8IFtdO1xyXG5cdFx0Y29uc3QgY29udGVudFR5cGUgPSBjb250ZW50VHlwZXMuZmluZChjdCA9PiBjdC5pZCA9PT0gdHlwZSk7XHJcblx0XHRpZiAoIWNvbnRlbnRUeXBlKSByZXR1cm4gXCJ0aXRsZVwiO1xyXG5cdFx0XHJcblx0XHRjb25zdCB0ZW1wbGF0ZSA9IGNvbnRlbnRUeXBlLnRlbXBsYXRlO1xyXG5cdFx0Y29uc3QgbGluZXMgPSB0ZW1wbGF0ZS5zcGxpdChcIlxcblwiKTtcclxuXHRcdGxldCBpblByb3BlcnRpZXMgPSBmYWxzZTtcclxuXHRcdGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xyXG5cdFx0XHRjb25zdCB0cmltbWVkID0gbGluZS50cmltKCk7XHJcblx0XHRcdGlmICh0cmltbWVkID09PSBcIi0tLVwiKSB7XHJcblx0XHRcdFx0aW5Qcm9wZXJ0aWVzID0gIWluUHJvcGVydGllcztcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoaW5Qcm9wZXJ0aWVzKSB7XHJcblx0XHRcdFx0Y29uc3QgbWF0Y2ggPSB0cmltbWVkLm1hdGNoKC9eKFxcdyspOlxccyooLispJC8pO1xyXG5cdFx0XHRcdGlmIChtYXRjaCkge1xyXG5cdFx0XHRcdFx0Y29uc3Qga2V5ID0gbWF0Y2hbMV07XHJcblx0XHRcdFx0XHRjb25zdCB2YWx1ZSA9IG1hdGNoWzJdO1xyXG5cdFx0XHRcdFx0aWYgKHZhbHVlLmluY2x1ZGVzKFwie3t0aXRsZX19XCIpKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBrZXk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gXCJ0aXRsZVwiO1xyXG5cdH1cclxuXHRcclxuXHQvLyBDaGVjayBpZiB0aGUgdGVtcGxhdGUgZm9yIHRoaXMgY29udGVudCB0eXBlIGhhcyB7e3RpdGxlfX1cclxuXHRwcml2YXRlIHRlbXBsYXRlSGFzVGl0bGUodHlwZTogQ29udGVudFR5cGVJZCk6IGJvb2xlYW4ge1xyXG5cdFx0aWYgKHR5cGUgPT09IFwibm90ZVwiKSByZXR1cm4gdHJ1ZTsgLy8gTm90ZXMgYWx3YXlzIGhhdmUgdGl0bGVcclxuXHRcdFxyXG5cdFx0Y29uc3QgY29udGVudFR5cGVzID0gdGhpcy5zZXR0aW5ncy5jb250ZW50VHlwZXMgfHwgW107XHJcblx0XHRjb25zdCBjb250ZW50VHlwZSA9IGNvbnRlbnRUeXBlcy5maW5kKGN0ID0+IGN0LmlkID09PSB0eXBlKTtcclxuXHRcdGlmICghY29udGVudFR5cGUpIHJldHVybiB0cnVlOyAvLyBEZWZhdWx0IHRvIHRydWUgZm9yIHNhZmV0eVxyXG5cdFx0XHJcblx0XHRjb25zdCB0ZW1wbGF0ZSA9IGNvbnRlbnRUeXBlLnRlbXBsYXRlO1xyXG5cdFx0cmV0dXJuIHRlbXBsYXRlLmluY2x1ZGVzKFwie3t0aXRsZX19XCIpO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBURmlsZSwgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBBc3Ryb0NvbXBvc2VyU2V0dGluZ3MgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuaW1wb3J0IHsgbWF0Y2hlc0ZvbGRlclBhdHRlcm4sIHNvcnRCeVBhdHRlcm5TcGVjaWZpY2l0eSB9IGZyb20gXCIuL3BhdGgtbWF0Y2hpbmdcIjtcblxuZXhwb3J0IGNsYXNzIExpbmtDb252ZXJ0ZXIge1xuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHNldHRpbmdzOiBBc3Ryb0NvbXBvc2VyU2V0dGluZ3MsIHByaXZhdGUgcGx1Z2luPzogeyBzZXR0aW5ncz86IEFzdHJvQ29tcG9zZXJTZXR0aW5ncyB9KSB7fVxuXHRcblx0Ly8gR2V0IGZyZXNoIHNldHRpbmdzIGZyb20gcGx1Z2luIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHVzZSBzdG9yZWQgc2V0dGluZ3Ncblx0cHJpdmF0ZSBnZXRTZXR0aW5ncygpOiBBc3Ryb0NvbXBvc2VyU2V0dGluZ3Mge1xuXHRcdC8vIEFsd2F5cyBwcmVmZXIgcGx1Z2luIHNldHRpbmdzICh0aGV5J3JlIGtlcHQgdXAgdG8gZGF0ZSlcblx0XHRpZiAodGhpcy5wbHVnaW4/LnNldHRpbmdzKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLnNldHRpbmdzO1xuXHR9XG5cblx0dG9LZWJhYkNhc2Uoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdHJldHVybiBzdHJcblx0XHRcdC50b0xvd2VyQ2FzZSgpXG5cdFx0XHQucmVwbGFjZSgvW15hLXowLTlcXHMtXS9nLCBcIlwiKVxuXHRcdFx0LnRyaW0oKVxuXHRcdFx0LnJlcGxhY2UoL1xccysvZywgXCItXCIpXG5cdFx0XHQucmVwbGFjZSgvLSsvZywgXCItXCIpXG5cdFx0XHQucmVwbGFjZSgvXi18LSQvZywgXCJcIik7XG5cdH1cblxuXHRnZXRBc3Ryb1VybEZyb21JbnRlcm5hbExpbmsobGluazogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRjb25zdCBoYXNoSW5kZXggPSBsaW5rLmluZGV4T2YoJyMnKTtcblx0XHRsZXQgcGF0aCA9IGhhc2hJbmRleCA+PSAwID8gbGluay5zbGljZSgwLCBoYXNoSW5kZXgpIDogbGluaztcblx0XHRjb25zdCBhbmNob3IgPSBoYXNoSW5kZXggPj0gMCA/IGxpbmsuc2xpY2UoaGFzaEluZGV4KSA6ICcnO1xuXG5cdFx0Ly8gVVJMIGRlY29kZSB0aGUgcGF0aCB0byBoYW5kbGUgZW5jb2RlZCBjaGFyYWN0ZXJzIGxpa2UgJTIwXG5cdFx0cGF0aCA9IGRlY29kZVVSSUNvbXBvbmVudChwYXRoKTtcblx0XHRwYXRoID0gcGF0aC5yZXBsYWNlKC9cXC4obWR8bWR4KSQvLCBcIlwiKTtcblxuXHRcdC8vIERldGVybWluZSBjb250ZW50IHR5cGUgYW5kIGFwcHJvcHJpYXRlIGJhc2UgcGF0aCB1c2luZyBwYXR0ZXJuIHNwZWNpZmljaXR5XG5cdFx0Ly8gU3VwcG9ydCBib3RoIC5tZCBhbmQgLm1keCBleHRlbnNpb25zXG5cdFx0Y29uc3QgZmlsZUV4dGVuc2lvbiA9IGxpbmsuZW5kc1dpdGgoJy5tZHgnKSA/ICcubWR4JyA6ICcubWQnO1xuXHRcdGNvbnN0IGNvbnRlbnRUeXBlSW5mbyA9IHRoaXMuZ2V0Q29udGVudFR5cGVGb3JQYXRoKHBhdGggKyBmaWxlRXh0ZW5zaW9uKTtcblx0XHRsZXQgYmFzZVBhdGggPSBjb250ZW50VHlwZUluZm8uYmFzZVBhdGggfHwgXCJcIjtcblx0XHRsZXQgY29udGVudEZvbGRlciA9IGNvbnRlbnRUeXBlSW5mby5jb250ZW50Rm9sZGVyIHx8IFwiXCI7XG5cdFx0bGV0IGluZGV4RmlsZU5hbWUgPSBjb250ZW50VHlwZUluZm8uaW5kZXhGaWxlTmFtZSB8fCBcIlwiO1xuXG5cblx0XHQvLyBTdHJpcCBjb250ZW50IGZvbGRlciBpZiBwcmVzZW50XG5cdFx0aWYgKGNvbnRlbnRGb2xkZXIpIHtcblx0XHRcdHBhdGggPSBwYXRoLnNsaWNlKGNvbnRlbnRGb2xkZXIubGVuZ3RoICsgMSk7XG5cdFx0fVxuXG5cdFx0bGV0IGFkZFRyYWlsaW5nU2xhc2ggPSBmYWxzZTtcblx0XHRcblx0XHQvLyBTbWFydCBkZXRlY3Rpb246IGlmIHRoZSBmaWxlbmFtZSBtYXRjaGVzIHRoZSBpbmRleCBmaWxlIG5hbWUgKHJlZ2FyZGxlc3Mgb2YgY3JlYXRpb24gbW9kZSksXG5cdFx0Ly8gdHJlYXQgaXQgYXMgZm9sZGVyLWJhc2VkIGxvZ2ljXG5cdFx0Ly8gTm90ZTogV2Ugb25seSBzZXQgYWRkVHJhaWxpbmdTbGFzaCBoZXJlOyB0aGUgZmluYWwgY2hlY2sgd2lsbCBwcmV2ZW50IGl0IGlmIHRoZXJlJ3MgYW4gYW5jaG9yXG5cdFx0Y29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcvJyk7XG5cdFx0Y29uc3QgbGFzdFBhcnQgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTtcblx0XHRcblx0XHQvLyBDaGVjayBpZiB0aGUgbGFzdCBwYXJ0IG1hdGNoZXMgdGhlIHNwZWNpZmllZCBpbmRleCBmaWxlIG5hbWVcblx0XHRpZiAoaW5kZXhGaWxlTmFtZSAmJiBpbmRleEZpbGVOYW1lLnRyaW0oKSAhPT0gXCJcIiAmJiBsYXN0UGFydCA9PT0gaW5kZXhGaWxlTmFtZSkge1xuXHRcdFx0cGFydHMucG9wKCk7XG5cdFx0XHRwYXRoID0gcGFydHMuam9pbignLycpO1xuXHRcdFx0YWRkVHJhaWxpbmdTbGFzaCA9IHRydWU7XG5cdFx0fVxuXHRcdC8vIENoZWNrIGlmIHRoZSBsYXN0IHBhcnQgbWF0Y2hlcyB0aGUgZGVmYXVsdCBcImluZGV4XCIgKHdoZW4gbm8gaW5kZXhGaWxlTmFtZSBpcyBzcGVjaWZpZWQpXG5cdFx0ZWxzZSBpZiAoKCFpbmRleEZpbGVOYW1lIHx8IGluZGV4RmlsZU5hbWUudHJpbSgpID09PSBcIlwiKSAmJiBsYXN0UGFydCA9PT0gXCJpbmRleFwiKSB7XG5cdFx0XHRwYXJ0cy5wb3AoKTtcblx0XHRcdHBhdGggPSBwYXJ0cy5qb2luKCcvJyk7XG5cdFx0XHRhZGRUcmFpbGluZ1NsYXNoID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRjb25zdCBzbHVnUGFydHMgPSBwYXRoLnNwbGl0KCcvJykubWFwKHBhcnQgPT4gdGhpcy50b0tlYmFiQ2FzZShwYXJ0KSk7XG5cdFx0Y29uc3Qgc2x1ZyA9IHNsdWdQYXJ0cy5qb2luKCcvJyk7XG5cblx0XHQvLyBGb3JtYXQgYmFzZSBwYXRoXG5cdFx0aWYgKGJhc2VQYXRoKSB7XG5cdFx0XHQvLyBBZGQgbGVhZGluZyBzbGFzaCBpZiBub3QgcHJlc2VudCB0byBtYWtlIGl0IGFic29sdXRlIGZyb20gcm9vdFxuXHRcdFx0aWYgKCFiYXNlUGF0aC5zdGFydHNXaXRoKFwiL1wiKSkge1xuXHRcdFx0XHRiYXNlUGF0aCA9IFwiL1wiICsgYmFzZVBhdGg7XG5cdFx0XHR9XG5cdFx0XHQvLyBBZGQgdHJhaWxpbmcgc2xhc2ggaWYgbm90IHByZXNlbnRcblx0XHRcdGlmICghYmFzZVBhdGguZW5kc1dpdGgoXCIvXCIpKSB7XG5cdFx0XHRcdGJhc2VQYXRoICs9IFwiL1wiO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBXaGVuIG5vIGJhc2UgcGF0aCBpcyBzcGVjaWZpZWQsIGFkZCBsZWFkaW5nIHNsYXNoIHRvIG1ha2UgaXQgYWJzb2x1dGUgZnJvbSByb290XG5cdFx0XHRiYXNlUGF0aCA9IFwiL1wiO1xuXHRcdH1cblxuXHRcdC8vIERldGVybWluZSBpZiB3ZSBzaG91bGQgYWRkIHRyYWlsaW5nIHNsYXNoXG5cdFx0Ly8gQ1JJVElDQUw6IE5ldmVyIGFkZCB0cmFpbGluZyBzbGFzaCBiZWZvcmUgYW4gYW5jaG9yIChlLmcuLCAvYWJvdXQjaGVhZGluZyBub3QgL2Fib3V0LyNoZWFkaW5nKVxuXHRcdC8vIFRoaXMgaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgZm9yIGFuY2hvciBsaW5rcyBmcm9tIGNvcHkgaGVhZGluZyBVUkwgZnVuY3Rpb25hbGl0eVxuXHRcdC8vIEFuY2hvciBsaW5rcyBzaG91bGQgTkVWRVIgaGF2ZSB0cmFpbGluZyBzbGFzaGVzLCByZWdhcmRsZXNzIG9mIHNldHRpbmdzXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLmdldFNldHRpbmdzKCk7XG5cdFx0Y29uc3Qgc2hvdWxkQWRkVHJhaWxpbmdTbGFzaCA9IChzZXR0aW5ncy5hZGRUcmFpbGluZ1NsYXNoVG9MaW5rcyB8fCBhZGRUcmFpbGluZ1NsYXNoKSAmJiAhYW5jaG9yO1xuXG5cdFx0cmV0dXJuIGAke2Jhc2VQYXRofSR7c2x1Z30ke3Nob3VsZEFkZFRyYWlsaW5nU2xhc2ggPyAnLycgOiAnJ30ke2FuY2hvcn1gO1xuXHR9XG5cblx0cHJpdmF0ZSBnZXRBc3Ryb1VybEZyb21JbnRlcm5hbExpbmtXaXRoQ29udGV4dChsaW5rOiBzdHJpbmcsIGN1cnJlbnRGaWxlUGF0aDogc3RyaW5nLCBjdXJyZW50RmlsZUNvbnRlbnRUeXBlOiB7IGJhc2VQYXRoOiBzdHJpbmc7IGNyZWF0aW9uTW9kZTogXCJmaWxlXCIgfCBcImZvbGRlclwiOyBpbmRleEZpbGVOYW1lOiBzdHJpbmc7IGNvbnRlbnRGb2xkZXI6IHN0cmluZyB9KTogc3RyaW5nIHtcblx0XHRcblx0XHRjb25zdCBoYXNoSW5kZXggPSBsaW5rLmluZGV4T2YoJyMnKTtcblx0XHRsZXQgcGF0aCA9IGhhc2hJbmRleCA+PSAwID8gbGluay5zbGljZSgwLCBoYXNoSW5kZXgpIDogbGluaztcblx0XHRjb25zdCBhbmNob3IgPSBoYXNoSW5kZXggPj0gMCA/IGxpbmsuc2xpY2UoaGFzaEluZGV4KSA6ICcnO1xuXG5cdFx0Ly8gVVJMIGRlY29kZSB0aGUgcGF0aCB0byBoYW5kbGUgZW5jb2RlZCBjaGFyYWN0ZXJzIGxpa2UgJTIwXG5cdFx0cGF0aCA9IGRlY29kZVVSSUNvbXBvbmVudChwYXRoKTtcblx0XHRwYXRoID0gcGF0aC5yZXBsYWNlKC9cXC4obWR8bWR4KSQvLCBcIlwiKTtcblx0XHRcblxuXHRcdC8vIERldGVybWluZSBjb250ZW50IHR5cGUgYW5kIGFwcHJvcHJpYXRlIGJhc2UgcGF0aFxuXHRcdGxldCBiYXNlUGF0aCA9IFwiXCI7XG5cdFx0bGV0IGNvbnRlbnRGb2xkZXIgPSBcIlwiO1xuXHRcdGxldCBpbmRleEZpbGVOYW1lID0gXCJcIjtcblxuXHRcdC8vIFVzZSB0aGUgc2FtZSBsb2dpYyBhcyBnZXRDb250ZW50VHlwZUZvclBhdGggYnV0IGZvciB0aGUgdGFyZ2V0IGxpbmtcblx0XHQvLyBTdXBwb3J0IGJvdGggLm1kIGFuZCAubWR4IGV4dGVuc2lvbnMgLSB0cnkgLm1keCBmaXJzdCBpZiBsaW5rIHN1Z2dlc3RzIGl0XG5cdFx0Y29uc3QgZmlsZUV4dGVuc2lvbiA9IGxpbmsuZW5kc1dpdGgoJy5tZHgnKSA/ICcubWR4JyA6ICcubWQnO1xuXHRcdGNvbnN0IHRhcmdldENvbnRlbnRUeXBlID0gdGhpcy5nZXRDb250ZW50VHlwZUZvclBhdGgocGF0aCArIGZpbGVFeHRlbnNpb24pO1xuXHRcdFxuXHRcdC8vIElmIHRhcmdldCBsaW5rIGRvZXNuJ3QgaGF2ZSBhIGNsZWFyIGNvbnRlbnQgdHlwZSAobm8gZm9sZGVyIHBhdGgpLCB1c2UgY3VycmVudCBmaWxlJ3MgY29udGVudCB0eXBlXG5cdFx0aWYgKCF0YXJnZXRDb250ZW50VHlwZS5iYXNlUGF0aCAmJiBjdXJyZW50RmlsZUNvbnRlbnRUeXBlLmJhc2VQYXRoKSB7XG5cdFx0XHRiYXNlUGF0aCA9IGN1cnJlbnRGaWxlQ29udGVudFR5cGUuYmFzZVBhdGg7XG5cdFx0XHRpbmRleEZpbGVOYW1lID0gY3VycmVudEZpbGVDb250ZW50VHlwZS5pbmRleEZpbGVOYW1lO1xuXHRcdFx0Y29udGVudEZvbGRlciA9IGN1cnJlbnRGaWxlQ29udGVudFR5cGUuY29udGVudEZvbGRlcjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YmFzZVBhdGggPSB0YXJnZXRDb250ZW50VHlwZS5iYXNlUGF0aDtcblx0XHRcdGluZGV4RmlsZU5hbWUgPSB0YXJnZXRDb250ZW50VHlwZS5pbmRleEZpbGVOYW1lO1xuXHRcdFx0Y29udGVudEZvbGRlciA9IHRhcmdldENvbnRlbnRUeXBlLmNvbnRlbnRGb2xkZXI7XG5cdFx0fVxuXG5cdFx0Ly8gU3RyaXAgY29udGVudCBmb2xkZXIgaWYgcHJlc2VudFxuXHRcdGlmIChjb250ZW50Rm9sZGVyKSB7XG5cdFx0XHRwYXRoID0gcGF0aC5zbGljZShjb250ZW50Rm9sZGVyLmxlbmd0aCArIDEpO1xuXHRcdH1cblxuXHRcdGxldCBhZGRUcmFpbGluZ1NsYXNoID0gZmFsc2U7XG5cdFx0XG5cdFx0Ly8gU21hcnQgZGV0ZWN0aW9uOiBpZiB0aGUgZmlsZW5hbWUgbWF0Y2hlcyB0aGUgaW5kZXggZmlsZSBuYW1lIChyZWdhcmRsZXNzIG9mIGNyZWF0aW9uIG1vZGUpLFxuXHRcdC8vIHRyZWF0IGl0IGFzIGZvbGRlci1iYXNlZCBsb2dpY1xuXHRcdC8vIE5vdGU6IFdlIG9ubHkgc2V0IGFkZFRyYWlsaW5nU2xhc2ggaGVyZTsgdGhlIGZpbmFsIGNoZWNrIHdpbGwgcHJldmVudCBpdCBpZiB0aGVyZSdzIGFuIGFuY2hvclxuXHRcdGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLycpO1xuXHRcdGNvbnN0IGxhc3RQYXJ0ID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07XG5cdFx0XG5cdFx0Ly8gQ2hlY2sgaWYgdGhlIGxhc3QgcGFydCBtYXRjaGVzIHRoZSBzcGVjaWZpZWQgaW5kZXggZmlsZSBuYW1lXG5cdFx0aWYgKGluZGV4RmlsZU5hbWUgJiYgaW5kZXhGaWxlTmFtZS50cmltKCkgIT09IFwiXCIgJiYgbGFzdFBhcnQgPT09IGluZGV4RmlsZU5hbWUpIHtcblx0XHRcdHBhcnRzLnBvcCgpO1xuXHRcdFx0cGF0aCA9IHBhcnRzLmpvaW4oJy8nKTtcblx0XHRcdGFkZFRyYWlsaW5nU2xhc2ggPSB0cnVlO1xuXHRcdH1cblx0XHQvLyBDaGVjayBpZiB0aGUgbGFzdCBwYXJ0IG1hdGNoZXMgdGhlIGRlZmF1bHQgXCJpbmRleFwiICh3aGVuIG5vIGluZGV4RmlsZU5hbWUgaXMgc3BlY2lmaWVkKVxuXHRcdGVsc2UgaWYgKCghaW5kZXhGaWxlTmFtZSB8fCBpbmRleEZpbGVOYW1lLnRyaW0oKSA9PT0gXCJcIikgJiYgbGFzdFBhcnQgPT09IFwiaW5kZXhcIikge1xuXHRcdFx0cGFydHMucG9wKCk7XG5cdFx0XHRwYXRoID0gcGFydHMuam9pbignLycpO1xuXHRcdFx0YWRkVHJhaWxpbmdTbGFzaCA9IHRydWU7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc2x1Z1BhcnRzID0gcGF0aC5zcGxpdCgnLycpLm1hcChwYXJ0ID0+IHRoaXMudG9LZWJhYkNhc2UocGFydCkpO1xuXHRcdGNvbnN0IHNsdWcgPSBzbHVnUGFydHMuam9pbignLycpO1xuXG5cdFx0Ly8gRm9ybWF0IGJhc2UgcGF0aFxuXHRcdGlmIChiYXNlUGF0aCkge1xuXHRcdFx0Ly8gQWRkIGxlYWRpbmcgc2xhc2ggaWYgbm90IHByZXNlbnQgdG8gbWFrZSBpdCBhYnNvbHV0ZSBmcm9tIHJvb3Rcblx0XHRcdGlmICghYmFzZVBhdGguc3RhcnRzV2l0aChcIi9cIikpIHtcblx0XHRcdFx0YmFzZVBhdGggPSBcIi9cIiArIGJhc2VQYXRoO1xuXHRcdFx0fVxuXHRcdFx0Ly8gQWRkIHRyYWlsaW5nIHNsYXNoIGlmIG5vdCBwcmVzZW50XG5cdFx0XHRpZiAoIWJhc2VQYXRoLmVuZHNXaXRoKFwiL1wiKSkge1xuXHRcdFx0XHRiYXNlUGF0aCArPSBcIi9cIjtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gV2hlbiBubyBiYXNlIHBhdGggaXMgc3BlY2lmaWVkLCBhZGQgbGVhZGluZyBzbGFzaCB0byBtYWtlIGl0IGFic29sdXRlIGZyb20gcm9vdFxuXHRcdFx0YmFzZVBhdGggPSBcIi9cIjtcblx0XHR9XG5cblx0XHQvLyBEZXRlcm1pbmUgaWYgd2Ugc2hvdWxkIGFkZCB0cmFpbGluZyBzbGFzaFxuXHRcdC8vIENSSVRJQ0FMOiBOZXZlciBhZGQgdHJhaWxpbmcgc2xhc2ggYmVmb3JlIGFuIGFuY2hvciAoZS5nLiwgL2Fib3V0I2hlYWRpbmcgbm90IC9hYm91dC8jaGVhZGluZylcblx0XHQvLyBUaGlzIGlzIGVzcGVjaWFsbHkgaW1wb3J0YW50IGZvciBhbmNob3IgbGlua3MgZnJvbSBjb3B5IGhlYWRpbmcgVVJMIGZ1bmN0aW9uYWxpdHlcblx0XHQvLyBBbmNob3IgbGlua3Mgc2hvdWxkIE5FVkVSIGhhdmUgdHJhaWxpbmcgc2xhc2hlcywgcmVnYXJkbGVzcyBvZiBzZXR0aW5nc1xuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xuXHRcdGNvbnN0IHNob3VsZEFkZFRyYWlsaW5nU2xhc2ggPSAoc2V0dGluZ3MuYWRkVHJhaWxpbmdTbGFzaFRvTGlua3MgfHwgYWRkVHJhaWxpbmdTbGFzaCkgJiYgIWFuY2hvcjtcblxuXHRcdHJldHVybiBgJHtiYXNlUGF0aH0ke3NsdWd9JHtzaG91bGRBZGRUcmFpbGluZ1NsYXNoID8gJy8nIDogJyd9JHthbmNob3J9YDtcblx0fVxuXG5cdHByaXZhdGUgaXNJbkNvbmZpZ3VyZWRDb250ZW50RGlyZWN0b3J5KGZpbGVQYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcblx0XHQvLyBDaGVjayBhbGwgY29udGVudCB0eXBlcywgc29ydGVkIGJ5IHBhdHRlcm4gc3BlY2lmaWNpdHkgKG1vcmUgc3BlY2lmaWMgZmlyc3QpXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLmdldFNldHRpbmdzKCk7XG5cdFx0Y29uc3QgY29udGVudFR5cGVzID0gc2V0dGluZ3MuY29udGVudFR5cGVzIHx8IFtdO1xuXHRcdGNvbnN0IHNvcnRlZFR5cGVzID0gc29ydEJ5UGF0dGVyblNwZWNpZmljaXR5KGNvbnRlbnRUeXBlcyk7XG5cdFx0XG5cdFx0Zm9yIChjb25zdCBjb250ZW50VHlwZSBvZiBzb3J0ZWRUeXBlcykge1xuXHRcdFx0aWYgKCFjb250ZW50VHlwZS5lbmFibGVkKSBjb250aW51ZTtcblx0XHRcdFxuXHRcdFx0Ly8gSGFuZGxlIGJsYW5rIGZvbGRlciAocm9vdCkgLSBtYXRjaGVzIGZpbGVzIGluIHZhdWx0IHJvb3Qgb25seVxuXHRcdFx0aWYgKCFjb250ZW50VHlwZS5mb2xkZXIgfHwgY29udGVudFR5cGUuZm9sZGVyLnRyaW0oKSA9PT0gXCJcIikge1xuXHRcdFx0XHRpZiAoIWZpbGVQYXRoLmluY2x1ZGVzKFwiL1wiKSB8fCBmaWxlUGF0aC5zcGxpdChcIi9cIikubGVuZ3RoID09PSAxKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAobWF0Y2hlc0ZvbGRlclBhdHRlcm4oZmlsZVBhdGgsIGNvbnRlbnRUeXBlLmZvbGRlcikpIHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWdub3JlU3ViZm9sZGVycyBpZiBmb2xkZXIgaXMgc3BlY2lmaWVkXG5cdFx0XHRcdGlmIChjb250ZW50VHlwZS5pZ25vcmVTdWJmb2xkZXJzKSB7XG5cdFx0XHRcdFx0Y29uc3QgcGF0aFNlZ21lbnRzID0gZmlsZVBhdGguc3BsaXQoXCIvXCIpO1xuXHRcdFx0XHRcdGNvbnN0IHBhdGhEZXB0aCA9IHBhdGhTZWdtZW50cy5sZW5ndGg7XG5cdFx0XHRcdFx0Y29uc3QgcGF0dGVyblNlZ21lbnRzID0gY29udGVudFR5cGUuZm9sZGVyLnNwbGl0KFwiL1wiKTtcblx0XHRcdFx0XHRjb25zdCBleHBlY3RlZERlcHRoID0gcGF0dGVyblNlZ21lbnRzLmxlbmd0aDtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAoY29udGVudFR5cGUuY3JlYXRpb25Nb2RlID09PSBcImZvbGRlclwiKSB7XG5cdFx0XHRcdFx0XHQvLyBGb3IgZm9sZGVyLWJhc2VkIGNyZWF0aW9uLCBmaWxlcyBhcmUgb25lIGxldmVsIGRlZXBlciAoZS5nLiwgdGVzdC9teS1maWxlL2luZGV4Lm1kKVxuXHRcdFx0XHRcdFx0Ly8gU28gd2UgbmVlZCB0byBhbGxvdyBvbmUgZXh0cmEgbGV2ZWwgYmV5b25kIHRoZSBwYXR0ZXJuIGRlcHRoXG5cdFx0XHRcdFx0XHRjb25zdCBmb2xkZXJEZXB0aCA9IHBhdGhEZXB0aCAtIDE7IC8vIFN1YnRyYWN0IDEgZm9yIHRoZSBpbmRleC5tZCBmaWxlXG5cdFx0XHRcdFx0XHRpZiAoZm9sZGVyRGVwdGggPT09IGV4cGVjdGVkRGVwdGggfHwgZm9sZGVyRGVwdGggPT09IGV4cGVjdGVkRGVwdGggKyAxKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBGb3IgZmlsZS1iYXNlZCBjcmVhdGlvbiwgZmlsZXMgYXJlIGF0IHRoZSBzYW1lIGRlcHRoIGFzIHRoZSBwYXR0ZXJuXG5cdFx0XHRcdFx0XHRpZiAocGF0aERlcHRoID09PSBleHBlY3RlZERlcHRoKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRwcml2YXRlIGdldENvbnRlbnRUeXBlRm9yUGF0aChmaWxlUGF0aDogc3RyaW5nKTogeyBiYXNlUGF0aDogc3RyaW5nOyBjcmVhdGlvbk1vZGU6IFwiZmlsZVwiIHwgXCJmb2xkZXJcIjsgaW5kZXhGaWxlTmFtZTogc3RyaW5nOyBjb250ZW50Rm9sZGVyOiBzdHJpbmcgfSB7XG5cdFx0Ly8gQ2hlY2sgYWxsIGNvbnRlbnQgdHlwZXMsIHNvcnRlZCBieSBwYXR0ZXJuIHNwZWNpZmljaXR5IChtb3JlIHNwZWNpZmljIGZpcnN0KVxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xuXHRcdGNvbnN0IGNvbnRlbnRUeXBlcyA9IHNldHRpbmdzLmNvbnRlbnRUeXBlcyB8fCBbXTtcblx0XHRjb25zdCBzb3J0ZWRUeXBlcyA9IHNvcnRCeVBhdHRlcm5TcGVjaWZpY2l0eShjb250ZW50VHlwZXMpO1xuXHRcdFxuXHRcdGZvciAoY29uc3QgY29udGVudFR5cGUgb2Ygc29ydGVkVHlwZXMpIHtcblx0XHRcdGlmICghY29udGVudFR5cGUuZW5hYmxlZCkgY29udGludWU7XG5cdFx0XHRcblx0XHRcdC8vIEhhbmRsZSBibGFuayBmb2xkZXIgKHJvb3QpIC0gbWF0Y2hlcyBmaWxlcyBpbiB2YXVsdCByb290IG9ubHlcblx0XHRcdGlmICghY29udGVudFR5cGUuZm9sZGVyIHx8IGNvbnRlbnRUeXBlLmZvbGRlci50cmltKCkgPT09IFwiXCIpIHtcblx0XHRcdFx0aWYgKCFmaWxlUGF0aC5pbmNsdWRlcyhcIi9cIikgfHwgZmlsZVBhdGguc3BsaXQoXCIvXCIpLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRiYXNlUGF0aDogY29udGVudFR5cGUubGlua0Jhc2VQYXRoIHx8IFwiXCIsXG5cdFx0XHRcdFx0XHRjcmVhdGlvbk1vZGU6IGNvbnRlbnRUeXBlLmNyZWF0aW9uTW9kZSxcblx0XHRcdFx0XHRcdGluZGV4RmlsZU5hbWU6IGNvbnRlbnRUeXBlLmluZGV4RmlsZU5hbWUgfHwgXCJcIixcblx0XHRcdFx0XHRcdGNvbnRlbnRGb2xkZXI6IFwiXCJcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKG1hdGNoZXNGb2xkZXJQYXR0ZXJuKGZpbGVQYXRoLCBjb250ZW50VHlwZS5mb2xkZXIpKSB7XG5cdFx0XHRcdC8vIENoZWNrIGlnbm9yZVN1YmZvbGRlcnMgaWYgZm9sZGVyIGlzIHNwZWNpZmllZFxuXHRcdFx0XHRpZiAoY29udGVudFR5cGUuaWdub3JlU3ViZm9sZGVycykge1xuXHRcdFx0XHRcdGNvbnN0IHBhdGhTZWdtZW50cyA9IGZpbGVQYXRoLnNwbGl0KFwiL1wiKTtcblx0XHRcdFx0XHRjb25zdCBwYXRoRGVwdGggPSBwYXRoU2VnbWVudHMubGVuZ3RoO1xuXHRcdFx0XHRcdGNvbnN0IHBhdHRlcm5TZWdtZW50cyA9IGNvbnRlbnRUeXBlLmZvbGRlci5zcGxpdChcIi9cIik7XG5cdFx0XHRcdFx0Y29uc3QgZXhwZWN0ZWREZXB0aCA9IHBhdHRlcm5TZWdtZW50cy5sZW5ndGg7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKGNvbnRlbnRUeXBlLmNyZWF0aW9uTW9kZSA9PT0gXCJmb2xkZXJcIikge1xuXHRcdFx0XHRcdFx0Ly8gRm9yIGZvbGRlci1iYXNlZCBjcmVhdGlvbiwgZmlsZXMgYXJlIG9uZSBsZXZlbCBkZWVwZXIgKGUuZy4sIHRlc3QvbXktZmlsZS9pbmRleC5tZClcblx0XHRcdFx0XHRcdC8vIFNvIHdlIG5lZWQgdG8gYWxsb3cgb25lIGV4dHJhIGxldmVsIGJleW9uZCB0aGUgcGF0dGVybiBkZXB0aFxuXHRcdFx0XHRcdFx0Y29uc3QgZm9sZGVyRGVwdGggPSBwYXRoRGVwdGggLSAxOyAvLyBTdWJ0cmFjdCAxIGZvciB0aGUgaW5kZXgubWQgZmlsZVxuXHRcdFx0XHRcdFx0aWYgKGZvbGRlckRlcHRoID09PSBleHBlY3RlZERlcHRoIHx8IGZvbGRlckRlcHRoID09PSBleHBlY3RlZERlcHRoICsgMSkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRcdGJhc2VQYXRoOiBjb250ZW50VHlwZS5saW5rQmFzZVBhdGggfHwgXCJcIixcblx0XHRcdFx0XHRcdFx0XHRjcmVhdGlvbk1vZGU6IGNvbnRlbnRUeXBlLmNyZWF0aW9uTW9kZSxcblx0XHRcdFx0XHRcdFx0XHRpbmRleEZpbGVOYW1lOiBjb250ZW50VHlwZS5pbmRleEZpbGVOYW1lIHx8IFwiXCIsXG5cdFx0XHRcdFx0XHRcdFx0Y29udGVudEZvbGRlcjogY29udGVudFR5cGUuZm9sZGVyXG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIEZvciBmaWxlLWJhc2VkIGNyZWF0aW9uLCBmaWxlcyBhcmUgYXQgdGhlIHNhbWUgZGVwdGggYXMgdGhlIHBhdHRlcm5cblx0XHRcdFx0XHRcdGlmIChwYXRoRGVwdGggPT09IGV4cGVjdGVkRGVwdGgpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0XHRiYXNlUGF0aDogY29udGVudFR5cGUubGlua0Jhc2VQYXRoIHx8IFwiXCIsXG5cdFx0XHRcdFx0XHRcdFx0Y3JlYXRpb25Nb2RlOiBjb250ZW50VHlwZS5jcmVhdGlvbk1vZGUsXG5cdFx0XHRcdFx0XHRcdFx0aW5kZXhGaWxlTmFtZTogY29udGVudFR5cGUuaW5kZXhGaWxlTmFtZSB8fCBcIlwiLFxuXHRcdFx0XHRcdFx0XHRcdGNvbnRlbnRGb2xkZXI6IGNvbnRlbnRUeXBlLmZvbGRlclxuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0YmFzZVBhdGg6IGNvbnRlbnRUeXBlLmxpbmtCYXNlUGF0aCB8fCBcIlwiLFxuXHRcdFx0XHRcdFx0Y3JlYXRpb25Nb2RlOiBjb250ZW50VHlwZS5jcmVhdGlvbk1vZGUsXG5cdFx0XHRcdFx0XHRpbmRleEZpbGVOYW1lOiBjb250ZW50VHlwZS5pbmRleEZpbGVOYW1lIHx8IFwiXCIsXG5cdFx0XHRcdFx0XHRjb250ZW50Rm9sZGVyOiBjb250ZW50VHlwZS5mb2xkZXJcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdC8vIERlZmF1bHQgZmFsbGJhY2tcblx0XHRyZXR1cm4ge1xuXHRcdFx0YmFzZVBhdGg6IFwiXCIsXG5cdFx0XHRjcmVhdGlvbk1vZGU6IFwiZmlsZVwiLFxuXHRcdFx0aW5kZXhGaWxlTmFtZTogXCJcIixcblx0XHRcdGNvbnRlbnRGb2xkZXI6IFwiXCJcblx0XHR9O1xuXHR9XG5cblx0Y29udmVydFdpa2lsaW5rc0ZvckFzdHJvKGVkaXRvcjogRWRpdG9yLCBmaWxlOiBURmlsZSB8IG51bGwpOiB2b2lkIHtcblx0XHRpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiTm8gYWN0aXZlIGZpbGUuXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFByZXNlcnZlIGN1cnNvciBwb3NpdGlvbiBiZWZvcmUgbW9kaWZ5aW5nIGNvbnRlbnRcblx0XHRjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG5cdFx0Y29uc3Qgb3JpZ2luYWxMaW5lID0gY3Vyc29yLmxpbmU7XG5cdFx0Y29uc3Qgb3JpZ2luYWxDaCA9IGN1cnNvci5jaDtcblx0XHRjb25zdCBvcmlnaW5hbENvbnRlbnQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcblx0XHRjb25zdCBvcmlnaW5hbExpbmVDb3VudCA9IG9yaWdpbmFsQ29udGVudC5zcGxpdCgnXFxuJykubGVuZ3RoO1xuXHRcdGNvbnN0IG9yaWdpbmFsTGluZUxlbmd0aCA9IG9yaWdpbmFsQ29udGVudC5zcGxpdCgnXFxuJylbb3JpZ2luYWxMaW5lXT8ubGVuZ3RoIHx8IDA7XG5cblx0XHRjb25zdCBjb250ZW50ID0gZWRpdG9yLmdldFZhbHVlKCk7XG5cdFx0bGV0IG5ld0NvbnRlbnQgPSBjb250ZW50O1xuXHRcdGxldCBjb252ZXJ0ZWRDb3VudCA9IDA7XG5cdFx0bGV0IHNraXBwZWRDb3VudCA9IDA7XG5cdFx0Y29uc3Qgc2tpcHBlZExpbmtzOiBzdHJpbmdbXSA9IFtdO1xuXG5cdFx0Ly8gRGV0ZXJtaW5lIHRoZSBjdXJyZW50IGZpbGUncyBjb250ZW50IHR5cGUgZm9yIHJlbGF0aXZlIGxpbmtzXG5cdFx0Y29uc3QgY3VycmVudEZpbGVDb250ZW50VHlwZSA9IHRoaXMuZ2V0Q29udGVudFR5cGVGb3JQYXRoKGZpbGUucGF0aCk7XG5cblx0XHQvLyBEZWZpbmUgY29tbW9uIGltYWdlIGV4dGVuc2lvbnNcblx0XHRjb25zdCBpbWFnZUV4dGVuc2lvbnMgPSAvXFwuKHBuZ3xqcGd8anBlZ3xnaWZ8c3ZnKSQvaTtcblxuXHRcdC8vIEhlbHBlciBmdW5jdGlvbiB0byBjaGVjayBpZiBhIGxpbmsgY2FuIGJlIHJlbGlhYmx5IGNvbnZlcnRlZFxuXHRcdGNvbnN0IGNhbkNvbnZlcnRMaW5rID0gKGxpbmtUZXh0OiBzdHJpbmcpOiBib29sZWFuID0+IHtcblx0XHRcdC8vIERvbid0IGNvbnZlcnQgaWYgaXQncyBhbiBpbWFnZVxuXHRcdFx0aWYgKGltYWdlRXh0ZW5zaW9ucy50ZXN0KGxpbmtUZXh0KSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdC8vIERvbid0IGNvbnZlcnQgZXh0ZXJuYWwgbGlua3Ncblx0XHRcdGlmIChsaW5rVGV4dC5tYXRjaCgvXmh0dHBzPzpcXC9cXC8vKSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdC8vIERvbid0IGNvbnZlcnQgaWYgaXQncyBub3QgYSAubWQgb3IgLm1keCBmaWxlIGFuZCBkb2Vzbid0IGxvb2sgbGlrZSBhIHZhbGlkIGludGVybmFsIGxpbmtcblx0XHRcdGlmICghbGlua1RleHQuaW5jbHVkZXMoJy5tZCcpICYmICFsaW5rVGV4dC5pbmNsdWRlcygnLm1keCcpICYmICFsaW5rVGV4dC5tYXRjaCgvXlthLXpBLVowLTlfLV0rKFxcL1thLXpBLVowLTlfLV0rKSokLykpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDaGVjayBpZiB0aGUgdGFyZ2V0IGZpbGUgaXMgaW4gYW55IGNvbmZpZ3VyZWQgY29udGVudCBkaXJlY3Rvcnlcblx0XHRcdC8vIFN1cHBvcnQgYm90aCAubWQgYW5kIC5tZHggZXh0ZW5zaW9uc1xuXHRcdFx0bGV0IHRhcmdldFBhdGg6IHN0cmluZztcblx0XHRcdGlmIChsaW5rVGV4dC5lbmRzV2l0aCgnLm1kJykgfHwgbGlua1RleHQuZW5kc1dpdGgoJy5tZHgnKSkge1xuXHRcdFx0XHR0YXJnZXRQYXRoID0gbGlua1RleHQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBEZWZhdWx0IHRvIC5tZCBpZiBubyBleHRlbnNpb24gc3BlY2lmaWVkXG5cdFx0XHRcdHRhcmdldFBhdGggPSBsaW5rVGV4dCArICcubWQnO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBDaGVjayBpZiBpdCdzIGluIGEgY29uZmlndXJlZCBjb250ZW50IGRpcmVjdG9yeVxuXHRcdFx0Y29uc3QgaXNJbkNvbmZpZ3VyZWREaXJlY3RvcnkgPSB0aGlzLmlzSW5Db25maWd1cmVkQ29udGVudERpcmVjdG9yeSh0YXJnZXRQYXRoKTtcblx0XHRcdFxuXHRcdFx0Ly8gQWxzbyBjaGVjayBpZiBpdCdzIGEgc2ltcGxlIGZpbGVuYW1lIChubyBwYXRoKSBhbmQgY3VycmVudCBmaWxlIGhhcyBhIGNvbnRlbnQgdHlwZVxuXHRcdFx0Y29uc3QgaXNTaW1wbGVGaWxlbmFtZSA9ICF0YXJnZXRQYXRoLmluY2x1ZGVzKCcvJyk7XG5cdFx0XHRjb25zdCBoYXNDdXJyZW50Q29udGVudFR5cGUgPSBjdXJyZW50RmlsZUNvbnRlbnRUeXBlLmJhc2VQYXRoICE9PSBcIlwiIHx8IGN1cnJlbnRGaWxlQ29udGVudFR5cGUuY3JlYXRpb25Nb2RlICE9PSBcImZpbGVcIiB8fCBjdXJyZW50RmlsZUNvbnRlbnRUeXBlLmluZGV4RmlsZU5hbWUgIT09IFwiXCI7XG5cdFx0XHRcblx0XHRcdHJldHVybiBpc0luQ29uZmlndXJlZERpcmVjdG9yeSB8fCAoaXNTaW1wbGVGaWxlbmFtZSAmJiBoYXNDdXJyZW50Q29udGVudFR5cGUpO1xuXHRcdH07XG5cblx0XHQvLyBIYW5kbGUgcmVndWxhciBXaWtpbGlua3MgKG5vbi1pbWFnZSlcblx0XHRuZXdDb250ZW50ID0gbmV3Q29udGVudC5yZXBsYWNlKFxuXHRcdFx0L1xcW1xcWyhbXlxcXXxdKykoXFx8KFteXFxdXSspKT9cXF1cXF0vZyxcblx0XHRcdChtYXRjaDogc3RyaW5nLCBsaW5rVGV4dDogc3RyaW5nLCBfcGlwZTogc3RyaW5nIHwgdW5kZWZpbmVkLCBkaXNwbGF5VGV4dDogc3RyaW5nIHwgdW5kZWZpbmVkKSA9PiB7XG5cdFx0XHRcdC8vIENoZWNrIGlmIGl0J3MgYW4gaW1hZ2UgV2lraWxpbmtcblx0XHRcdFx0aWYgKGltYWdlRXh0ZW5zaW9ucy50ZXN0KGxpbmtUZXh0KSkge1xuXHRcdFx0XHRcdHNraXBwZWRDb3VudCsrO1xuXHRcdFx0XHRcdHNraXBwZWRMaW5rcy5wdXNoKGxpbmtUZXh0KTtcblx0XHRcdFx0XHRyZXR1cm4gbWF0Y2g7IC8vIElnbm9yZSBhbmQgcmV0dXJuIG9yaWdpbmFsIGltYWdlIFdpa2lsaW5rXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBDaGVjayBpZiB3ZSBjYW4gcmVsaWFibHkgY29udmVydCB0aGlzIGxpbmtcblx0XHRcdFx0aWYgKCFjYW5Db252ZXJ0TGluayhsaW5rVGV4dCkpIHtcblx0XHRcdFx0XHRza2lwcGVkQ291bnQrKztcblx0XHRcdFx0XHRza2lwcGVkTGlua3MucHVzaChsaW5rVGV4dCk7XG5cdFx0XHRcdFx0cmV0dXJuIG1hdGNoOyAvLyBSZXR1cm4gb3JpZ2luYWwgaWYgd2UgY2FuJ3QgY29udmVydCByZWxpYWJseVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgZGlzcGxheSA9IGRpc3BsYXlUZXh0IHx8IGxpbmtUZXh0LnJlcGxhY2UoL1xcLihtZHxtZHgpJC8sIFwiXCIpO1xuXG5cdFx0XHRcdC8vIEZvciByZWxhdGl2ZSBsaW5rcyAobm8gZm9sZGVyIHBhdGgpLCB1c2UgY3VycmVudCBmaWxlJ3MgY29udGVudCB0eXBlXG5cdFx0XHRcdGNvbnN0IHVybCA9IHRoaXMuZ2V0QXN0cm9VcmxGcm9tSW50ZXJuYWxMaW5rV2l0aENvbnRleHQobGlua1RleHQsIGZpbGUucGF0aCwgY3VycmVudEZpbGVDb250ZW50VHlwZSk7XG5cblx0XHRcdFx0Y29udmVydGVkQ291bnQrKztcblx0XHRcdFx0cmV0dXJuIGBbJHtkaXNwbGF5fV0oJHt1cmx9KWA7XG5cdFx0XHR9XG5cdFx0KTtcblxuXHRcdC8vIEhhbmRsZSBzdGFuZGFyZCBNYXJrZG93biBsaW5rcyAobm9uLWltYWdlLCBub24tZXh0ZXJuYWwpXG5cdFx0Ly8gT25seSBwcm9jZXNzIGxpbmtzIHRoYXQgY29udGFpbiAubWQgb3IgLm1keCB0byBhdm9pZCBwcm9jZXNzaW5nIGFscmVhZHktY29udmVydGVkIGxpbmtzXG5cdFx0bmV3Q29udGVudCA9IG5ld0NvbnRlbnQucmVwbGFjZShcblx0XHRcdC9cXFsoW15cXF1dKylcXF1cXCgoW14pXStcXC4obWR8bWR4KVteKV0qKVxcKS9nLFxuXHRcdFx0KG1hdGNoOiBzdHJpbmcsIGRpc3BsYXlUZXh0OiBzdHJpbmcsIGxpbms6IHN0cmluZykgPT4ge1xuXHRcdFx0XHQvLyBDaGVjayBpZiBpdCdzIGFuIGltYWdlIGxpbmsgb3IgZXh0ZXJuYWwgbGlua1xuXHRcdFx0XHRpZiAobGluay5tYXRjaCgvXmh0dHBzPzpcXC9cXC8vKSB8fCBpbWFnZUV4dGVuc2lvbnMudGVzdChsaW5rKSkge1xuXHRcdFx0XHRcdHNraXBwZWRDb3VudCsrO1xuXHRcdFx0XHRcdHNraXBwZWRMaW5rcy5wdXNoKGxpbmspO1xuXHRcdFx0XHRcdHJldHVybiBtYXRjaDsgLy8gSWdub3JlIGV4dGVybmFsIG9yIGltYWdlIGxpbmtzXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBDaGVjayBpZiB3ZSBjYW4gcmVsaWFibHkgY29udmVydCB0aGlzIGxpbmtcblx0XHRcdFx0aWYgKCFjYW5Db252ZXJ0TGluayhsaW5rKSkge1xuXHRcdFx0XHRcdHNraXBwZWRDb3VudCsrO1xuXHRcdFx0XHRcdHNraXBwZWRMaW5rcy5wdXNoKGxpbmspO1xuXHRcdFx0XHRcdHJldHVybiBtYXRjaDsgLy8gUmV0dXJuIG9yaWdpbmFsIGlmIHdlIGNhbid0IGNvbnZlcnQgcmVsaWFibHlcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IHVybCA9IHRoaXMuZ2V0QXN0cm9VcmxGcm9tSW50ZXJuYWxMaW5rV2l0aENvbnRleHQobGluaywgZmlsZS5wYXRoLCBjdXJyZW50RmlsZUNvbnRlbnRUeXBlKTtcblxuXHRcdFx0XHRjb252ZXJ0ZWRDb3VudCsrO1xuXHRcdFx0XHRyZXR1cm4gYFske2Rpc3BsYXlUZXh0fV0oJHt1cmx9KWA7XG5cdFx0XHR9XG5cdFx0KTtcblxuXHRcdC8vIEhhbmRsZSBpbWFnZSBsaW5rcyBpbiBNYXJrZG93biBmb3JtYXQgKGUuZy4sICFbSW1hZ2VdKG1vdW50YWlucy5wbmcpKVxuXHRcdG5ld0NvbnRlbnQgPSBuZXdDb250ZW50LnJlcGxhY2UoXG5cdFx0XHQvIVxcWyguKj8pXFxdXFwoKFteKV0rKVxcKS9nLFxuXHRcdFx0KG1hdGNoOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0c2tpcHBlZENvdW50Kys7XG5cdFx0XHRcdHJldHVybiBtYXRjaDsgLy8gSWdub3JlIGFsbCBpbWFnZSBsaW5rc1xuXHRcdFx0fVxuXHRcdCk7XG5cblx0XHQvLyBIYW5kbGUge3tlbWJlZH19IHN5bnRheFxuXHRcdG5ld0NvbnRlbnQgPSBuZXdDb250ZW50LnJlcGxhY2UoL1xce1xceyhbXn1dKylcXH1cXH0vZywgKG1hdGNoOiBzdHJpbmcsIGZpbGVOYW1lOiBzdHJpbmcpID0+IHtcblx0XHRcdGlmIChpbWFnZUV4dGVuc2lvbnMudGVzdChmaWxlTmFtZSkpIHtcblx0XHRcdFx0c2tpcHBlZENvdW50Kys7XG5cdFx0XHRcdHNraXBwZWRMaW5rcy5wdXNoKGZpbGVOYW1lKTtcblx0XHRcdFx0cmV0dXJuIG1hdGNoOyAvLyBJZ25vcmUgZW1iZWRkZWQgaW1hZ2VzXG5cdFx0XHR9XG5cblx0XHRcdC8vIENoZWNrIGlmIHdlIGNhbiByZWxpYWJseSBjb252ZXJ0IHRoaXMgbGlua1xuXHRcdFx0aWYgKCFjYW5Db252ZXJ0TGluayhmaWxlTmFtZSkpIHtcblx0XHRcdFx0c2tpcHBlZENvdW50Kys7XG5cdFx0XHRcdHNraXBwZWRMaW5rcy5wdXNoKGZpbGVOYW1lKTtcblx0XHRcdFx0cmV0dXJuIG1hdGNoOyAvLyBSZXR1cm4gb3JpZ2luYWwgaWYgd2UgY2FuJ3QgY29udmVydCByZWxpYWJseVxuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCB1cmwgPSB0aGlzLmdldEFzdHJvVXJsRnJvbUludGVybmFsTGlua1dpdGhDb250ZXh0KGZpbGVOYW1lLCBmaWxlLnBhdGgsIGN1cnJlbnRGaWxlQ29udGVudFR5cGUpO1xuXG5cdFx0XHRjb252ZXJ0ZWRDb3VudCsrO1xuXHRcdFx0cmV0dXJuIGBbRW1iZWRkZWQ6ICR7ZmlsZU5hbWV9XSgke3VybH0pYDtcblx0XHR9KTtcblxuXHRcdGVkaXRvci5zZXRWYWx1ZShuZXdDb250ZW50KTtcblx0XHRcblx0XHQvLyBSZXN0b3JlIGN1cnNvciBwb3NpdGlvbiwgYWRqdXN0aW5nIGZvciBjb250ZW50IGNoYW5nZXNcblx0XHRjb25zdCBuZXdMaW5lQ291bnQgPSBuZXdDb250ZW50LnNwbGl0KCdcXG4nKS5sZW5ndGg7XG5cdFx0Y29uc3QgbmV3TGluZUxlbmd0aCA9IG5ld0NvbnRlbnQuc3BsaXQoJ1xcbicpW29yaWdpbmFsTGluZV0/Lmxlbmd0aCB8fCAwO1xuXHRcdFxuXHRcdC8vIENhbGN1bGF0ZSBuZXcgY3Vyc29yIHBvc2l0aW9uXG5cdFx0bGV0IG5ld0xpbmUgPSBvcmlnaW5hbExpbmU7XG5cdFx0bGV0IG5ld0NoID0gb3JpZ2luYWxDaDtcblx0XHRcblx0XHQvLyBJZiBjb250ZW50IGxlbmd0aCBjaGFuZ2VkLCBhZGp1c3QgY3Vyc29yIHBvc2l0aW9uXG5cdFx0aWYgKG5ld0xpbmVDb3VudCAhPT0gb3JpZ2luYWxMaW5lQ291bnQpIHtcblx0XHRcdC8vIElmIGxpbmVzIHdlcmUgYWRkZWQvcmVtb3ZlZCBiZWZvcmUgY3Vyc29yLCBhZGp1c3QgbGluZSBudW1iZXJcblx0XHRcdC8vIEZvciBzaW1wbGljaXR5LCBrZWVwIHNhbWUgbGluZSBpZiBpdCBzdGlsbCBleGlzdHMsIG90aGVyd2lzZSBjbGFtcCB0byBlbmRcblx0XHRcdGlmIChuZXdMaW5lID49IG5ld0xpbmVDb3VudCkge1xuXHRcdFx0XHRuZXdMaW5lID0gTWF0aC5tYXgoMCwgbmV3TGluZUNvdW50IC0gMSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdC8vIEFkanVzdCBjb2x1bW4gcG9zaXRpb24gaWYgbGluZSBsZW5ndGggY2hhbmdlZFxuXHRcdGlmIChuZXdMaW5lTGVuZ3RoICE9PSBvcmlnaW5hbExpbmVMZW5ndGgpIHtcblx0XHRcdC8vIElmIGxpbmUgZ290IHNob3J0ZXIsIGNsYW1wIHRvIGVuZCBvZiBsaW5lXG5cdFx0XHRpZiAobmV3Q2ggPiBuZXdMaW5lTGVuZ3RoKSB7XG5cdFx0XHRcdG5ld0NoID0gTWF0aC5tYXgoMCwgbmV3TGluZUxlbmd0aCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdC8vIFJlc3RvcmUgY3Vyc29yIHBvc2l0aW9uXG5cdFx0ZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IG5ld0xpbmUsIGNoOiBuZXdDaCB9KTtcblx0XHRcblx0XHQvLyBTaG93IGFwcHJvcHJpYXRlIG5vdGljZSBiYXNlZCBvbiByZXN1bHRzXG5cdFx0aWYgKGNvbnZlcnRlZENvdW50ID4gMCAmJiBza2lwcGVkQ291bnQgPT09IDApIHtcblx0XHRcdG5ldyBOb3RpY2UoYENvbnZlcnRlZCAke2NvbnZlcnRlZENvdW50fSBpbnRlcm5hbCBsaW5rJHtjb252ZXJ0ZWRDb3VudCA+IDEgPyAncycgOiAnJ30gZm9yIEFzdHJvLmApO1xuXHRcdH0gZWxzZSBpZiAoY29udmVydGVkQ291bnQgPiAwICYmIHNraXBwZWRDb3VudCA+IDApIHtcblx0XHRcdG5ldyBOb3RpY2UoYENvbnZlcnRlZCAke2NvbnZlcnRlZENvdW50fSBsaW5rJHtjb252ZXJ0ZWRDb3VudCA+IDEgPyAncycgOiAnJ30gZm9yIEFzdHJvLiBTa2lwcGVkICR7c2tpcHBlZENvdW50fSBsaW5rJHtza2lwcGVkQ291bnQgPiAxID8gJ3MnIDogJyd9IG91dHNpZGUgY29uZmlndXJlZCBjb250ZW50IGRpcmVjdG9yaWVzLmApO1xuXHRcdH0gZWxzZSBpZiAoc2tpcHBlZENvdW50ID4gMCkge1xuXHRcdFx0bmV3IE5vdGljZShgTm8gbGlua3MgY29udmVydGVkLiBBbGwgJHtza2lwcGVkQ291bnR9IGxpbmske3NraXBwZWRDb3VudCA+IDEgPyAncycgOiAnJ30gYXJlIG91dHNpZGUgY29uZmlndXJlZCBjb250ZW50IGRpcmVjdG9yaWVzIG9yIGFyZSBpbWFnZXMvZXh0ZXJuYWwgbGlua3MuYCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG5ldyBOb3RpY2UoXCJObyBpbnRlcm5hbCBsaW5rcyBmb3VuZCB0byBjb252ZXJ0LlwiKTtcblx0XHR9XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBURmlsZSwgTm90aWNlLCBQbGF0Zm9ybSwgTWFya2Rvd25WaWV3IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlLCBDb250ZW50VHlwZUlkIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBGaWxlT3BlcmF0aW9ucyB9IGZyb20gXCIuLi91dGlscy9maWxlLW9wZXJhdGlvbnNcIjtcbmltcG9ydCB7IFRlbXBsYXRlUGFyc2VyIH0gZnJvbSBcIi4uL3V0aWxzL3RlbXBsYXRlLXBhcnNpbmdcIjtcblxuZXhwb3J0IGNsYXNzIFRpdGxlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGZpbGU6IFRGaWxlIHwgbnVsbDtcblx0cGx1Z2luOiBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlO1xuXHR0eXBlOiBDb250ZW50VHlwZUlkO1xuXHRpc1JlbmFtZTogYm9vbGVhbjtcblx0aXNOZXdOb3RlOiBib29sZWFuO1xuXHR0aXRsZUlucHV0ITogSFRNTElucHV0RWxlbWVudDtcblx0cHJpdmF0ZSBmaWxlT3BzOiBGaWxlT3BlcmF0aW9ucztcblx0cHJpdmF0ZSB0ZW1wbGF0ZVBhcnNlcjogVGVtcGxhdGVQYXJzZXI7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGZpbGU6IFRGaWxlIHwgbnVsbCwgcGx1Z2luOiBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlLCB0eXBlOiBDb250ZW50VHlwZUlkLCBpc1JlbmFtZSA9IGZhbHNlLCBpc05ld05vdGUgPSBmYWxzZSkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5maWxlID0gZmlsZTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0XHR0aGlzLnR5cGUgPSB0eXBlO1xuXHRcdHRoaXMuaXNSZW5hbWUgPSBpc1JlbmFtZTtcblx0XHR0aGlzLmlzTmV3Tm90ZSA9IGlzTmV3Tm90ZTtcblx0XHRcblx0XHQvLyBJbml0aWFsaXplIHV0aWxpdGllcyB3aXRoIGN1cnJlbnQgc2V0dGluZ3Ncblx0XHQvLyBGaWxlT3BlcmF0aW9ucyB3aWxsIGdldCBmcmVzaCBzZXR0aW5ncyBmcm9tIHBsdWdpbiBkeW5hbWljYWxseVxuXHRcdGNvbnN0IHNldHRpbmdzID0gcGx1Z2luLnNldHRpbmdzO1xuXHRcdHRoaXMuZmlsZU9wcyA9IG5ldyBGaWxlT3BlcmF0aW9ucyhhcHAsIHNldHRpbmdzLCBwbHVnaW4pO1xuXHRcdHRoaXMudGVtcGxhdGVQYXJzZXIgPSBuZXcgVGVtcGxhdGVQYXJzZXIoYXBwLCBzZXR0aW5ncyk7XG5cdH1cblxuXHRhc3luYyBnZXRDdXJyZW50VGl0bGVBc3luYygpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdGlmICghdGhpcy5maWxlKSB7XG5cdFx0XHRyZXR1cm4gXCJcIjtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gUmVhZCB0aGUgZmlsZSBjb250ZW50IGRpcmVjdGx5IHRvIGVuc3VyZSB3ZSBoYXZlIHRoZSBsYXRlc3QgdGl0bGVcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQodGhpcy5maWxlKTtcblx0XHRcdGNvbnN0IHRpdGxlS2V5ID0gdGhpcy5maWxlT3BzLmdldFRpdGxlS2V5KHRoaXMudHlwZSk7XG5cdFx0XHRjb25zdCB7IHByb3BlcnRpZXMgfSA9IHRoaXMudGVtcGxhdGVQYXJzZXIucGFyc2VGcm9udG1hdHRlcihjb250ZW50KTtcblx0XHRcdFxuXHRcdFx0aWYgKHRpdGxlS2V5IGluIHByb3BlcnRpZXMpIHtcblx0XHRcdFx0Y29uc3QgdGl0bGVWYWx1ZSA9IHByb3BlcnRpZXNbdGl0bGVLZXldO1xuXHRcdFx0XHRpZiAoQXJyYXkuaXNBcnJheSh0aXRsZVZhbHVlKSAmJiB0aXRsZVZhbHVlLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRyZXR1cm4gU3RyaW5nKHRpdGxlVmFsdWVbMF0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh0aXRsZVZhbHVlICE9PSBudWxsICYmIHRpdGxlVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHJldHVybiBTdHJpbmcodGl0bGVWYWx1ZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIHJlYWRpbmcgZmlsZSBmb3IgdGl0bGU6XCIsIGVycm9yKTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gRmFsbCBiYWNrIHRvIGZpbGVuYW1lLWJhc2VkIHRpdGxlXG5cdFx0cmV0dXJuIHRoaXMuZ2V0RmFsbGJhY2tUaXRsZSgpO1xuXHR9XG5cblx0Z2V0Q3VycmVudFRpdGxlKCk6IHN0cmluZyB7XG5cdFx0aWYgKCF0aGlzLmZpbGUpIHtcblx0XHRcdHJldHVybiBcIlwiO1xuXHRcdH1cblx0XHRcblx0XHRjb25zdCB0aXRsZUtleSA9IHRoaXMuZmlsZU9wcy5nZXRUaXRsZUtleSh0aGlzLnR5cGUpO1xuXHRcdGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUodGhpcy5maWxlKTtcblxuXHRcdGlmIChjYWNoZT8uZnJvbnRtYXR0ZXIgJiYgdGl0bGVLZXkgaW4gY2FjaGUuZnJvbnRtYXR0ZXIpIHtcblx0XHRcdGNvbnN0IHRpdGxlVmFsdWUgPSBjYWNoZS5mcm9udG1hdHRlclt0aXRsZUtleV0gYXMgdW5rbm93bjtcblx0XHRcdGlmICh0eXBlb2YgdGl0bGVWYWx1ZSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0cmV0dXJuIHRpdGxlVmFsdWU7XG5cdFx0XHR9XG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheSh0aXRsZVZhbHVlKSAmJiB0aXRsZVZhbHVlLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0Y29uc3QgZmlyc3RWYWx1ZSA9IHRpdGxlVmFsdWVbMF0gYXMgdW5rbm93bjtcblx0XHRcdFx0aWYgKHR5cGVvZiBmaXJzdFZhbHVlID09PSAnc3RyaW5nJykge1xuXHRcdFx0XHRcdHJldHVybiBmaXJzdFZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChmaXJzdFZhbHVlICE9IG51bGwpIHtcblx0XHRcdFx0XHRpZiAodHlwZW9mIGZpcnN0VmFsdWUgPT09ICdudW1iZXInIHx8IHR5cGVvZiBmaXJzdFZhbHVlID09PSAnYm9vbGVhbicpIHtcblx0XHRcdFx0XHRcdHJldHVybiBTdHJpbmcoZmlyc3RWYWx1ZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICh0eXBlb2YgZmlyc3RWYWx1ZSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0XHRcdHJldHVybiBmaXJzdFZhbHVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKHRpdGxlVmFsdWUgPT0gbnVsbCkge1xuXHRcdFx0XHRyZXR1cm4gJyc7XG5cdFx0XHR9XG5cdFx0XHRpZiAodHlwZW9mIHRpdGxlVmFsdWUgPT09ICdudW1iZXInIHx8IHR5cGVvZiB0aXRsZVZhbHVlID09PSAnYm9vbGVhbicpIHtcblx0XHRcdFx0cmV0dXJuIFN0cmluZyh0aXRsZVZhbHVlKTtcblx0XHRcdH1cblx0XHRcdGlmICh0eXBlb2YgdGl0bGVWYWx1ZSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0cmV0dXJuIHRpdGxlVmFsdWU7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gJyc7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmdldEZhbGxiYWNrVGl0bGUoKTtcblx0fVxuXG5cdHByaXZhdGUgZ2V0RmFsbGJhY2tUaXRsZSgpOiBzdHJpbmcge1xuXHRcdGlmICghdGhpcy5maWxlKSB7XG5cdFx0XHRyZXR1cm4gXCJcIjtcblx0XHR9XG5cdFx0XG5cdFx0bGV0IGJhc2VuYW1lID0gdGhpcy5maWxlLmJhc2VuYW1lO1xuXHRcdGlmICh0aGlzLmZpbGUucGFyZW50ICYmIHRoaXMudHlwZSAhPT0gXCJub3RlXCIpIHtcblx0XHRcdGNvbnN0IGNvbnRlbnRUeXBlID0gdGhpcy5maWxlT3BzLmdldENvbnRlbnRUeXBlKHRoaXMudHlwZSk7XG5cdFx0XHRjb25zdCBpbmRleEZpbGVOYW1lID0gY29udGVudFR5cGU/LmluZGV4RmlsZU5hbWUgfHwgXCJcIjtcblx0XHRcdGlmIChpbmRleEZpbGVOYW1lLnRyaW0oKSAhPT0gXCJcIiAmJiBiYXNlbmFtZSA9PT0gaW5kZXhGaWxlTmFtZSkge1xuXHRcdFx0XHRiYXNlbmFtZSA9IHRoaXMuZmlsZS5wYXJlbnQubmFtZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKGJhc2VuYW1lLnN0YXJ0c1dpdGgoXCJfXCIpKSB7XG5cdFx0XHRiYXNlbmFtZSA9IGJhc2VuYW1lLnNsaWNlKDEpO1xuXHRcdH1cblx0XHRyZXR1cm4gYmFzZW5hbWUucmVwbGFjZSgvLS9nLCBcIiBcIikuc3BsaXQoXCIgXCIpLm1hcCh3b3JkID0+IHdvcmQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB3b3JkLnNsaWNlKDEpKS5qb2luKFwiIFwiKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBFeHRyYWN0cyBhIHN1Z2dlc3RlZCB0aXRsZSBmcm9tIHRoZSBmaWxlIGJhc2VuYW1lIGZvciBuZXdseSBjcmVhdGVkIGZpbGVzLlxuXHQgKiBUaGlzIGlzIHVzZWQgd2hlbiBhIGZpbGUgaXMgY3JlYXRlZCBmcm9tIGEgbGluayAoZS5nLiwgW1tzRWZzbGVpZl1dKS5cblx0ICogUHJlc2VydmVzIHRoZSBvcmlnaW5hbCB0ZXh0IGFzIG11Y2ggYXMgcG9zc2libGUuXG5cdCAqL1xuXHRnZXRTdWdnZXN0ZWRUaXRsZUZyb21CYXNlbmFtZSgpOiBzdHJpbmcge1xuXHRcdGlmICghdGhpcy5maWxlKSB7XG5cdFx0XHRyZXR1cm4gXCJcIjtcblx0XHR9XG5cblx0XHRsZXQgYmFzZW5hbWUgPSB0aGlzLmZpbGUuYmFzZW5hbWU7XG5cblx0XHQvLyBIYW5kbGUgaW5kZXggZmlsZSBuYW1lcyAtIHVzZSBwYXJlbnQgZm9sZGVyIG5hbWUgaW5zdGVhZFxuXHRcdGlmICh0aGlzLmZpbGUucGFyZW50ICYmIHRoaXMudHlwZSAhPT0gXCJub3RlXCIpIHtcblx0XHRcdGNvbnN0IGNvbnRlbnRUeXBlID0gdGhpcy5maWxlT3BzLmdldENvbnRlbnRUeXBlKHRoaXMudHlwZSk7XG5cdFx0XHRjb25zdCBpbmRleEZpbGVOYW1lID0gY29udGVudFR5cGU/LmluZGV4RmlsZU5hbWUgfHwgXCJcIjtcblx0XHRcdGlmIChpbmRleEZpbGVOYW1lLnRyaW0oKSAhPT0gXCJcIiAmJiBiYXNlbmFtZSA9PT0gaW5kZXhGaWxlTmFtZSkge1xuXHRcdFx0XHRiYXNlbmFtZSA9IHRoaXMuZmlsZS5wYXJlbnQubmFtZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgbGVhZGluZyB1bmRlcnNjb3JlIGlmIHByZXNlbnRcblx0XHRpZiAoYmFzZW5hbWUuc3RhcnRzV2l0aChcIl9cIikpIHtcblx0XHRcdGJhc2VuYW1lID0gYmFzZW5hbWUuc2xpY2UoMSk7XG5cdFx0fVxuXG5cdFx0Ly8gUmV0dXJuIHRoZSBiYXNlbmFtZSBhcy1pcyB0byBwcmVzZXJ2ZSB1c2VyJ3Mgb3JpZ2luYWwgaW5wdXRcblx0XHQvLyAoZS5nLiwgXCJzRWZzbGVpZlwiIHN0YXlzIGFzIFwic0Vmc2xlaWZcIilcblx0XHRyZXR1cm4gYmFzZW5hbWU7XG5cdH1cblxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdFx0XG5cdFx0Ly8gQWRkIG1vYmlsZS1mcmllbmRseSBwb3NpdGlvbmluZyBjbGFzcyAtIGNoZWNrIGJvdGggd2lkdGggYW5kIHBsYXRmb3JtXG5cdFx0Y29uc3QgaXNNb2JpbGUgPSB3aW5kb3cuaW5uZXJXaWR0aCA8PSA3NjggfHwgUGxhdGZvcm0uaXNNb2JpbGU7XG5cdFx0aWYgKGlzTW9iaWxlKSB7XG5cdFx0XHR0aGlzLm1vZGFsRWwuYWRkQ2xhc3MoJ2FzdHJvLWNvbXBvc2VyLW1vYmlsZS1tb2RhbCcpO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLmlzUmVuYW1lKSB7XG5cdFx0XHRjb25zdCB0eXBlTmFtZSA9IHRoaXMuZ2V0VHlwZURpc3BsYXlOYW1lKCk7XG5cdFx0XHRcblx0XHRcdGlmICh0aGlzLnR5cGUgPT09IFwibm90ZVwiKSB7XG5cdFx0XHRcdC8vIEZvciBnZW5lcmljIG5vdGVzIG91dHNpZGUgb2YgYW55IGtub3duIGNvbnRlbnQgdHlwZVxuXHRcdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiUmVuYW1lIGNvbnRlbnRcIiB9KTtcblx0XHRcdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiRW50ZXIgYSB0aXRsZSBmb3IgdGhpcyBjb250ZW50OlwiIH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBgUmVuYW1lICR7dHlwZU5hbWV9IGNvbnRlbnRgIH0pO1xuXHRcdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogYEVudGVyIG5ldyB0aXRsZSBmb3IgeW91ciAke3R5cGVOYW1lfSBjb250ZW50OmAgfSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdHRoaXMudGl0bGVJbnB1dCA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImlucHV0XCIsIHtcblx0XHRcdFx0dHlwZTogXCJ0ZXh0XCIsXG5cdFx0XHRcdHBsYWNlaG9sZGVyOiBcIk5ldyBUaXRsZVwiLFxuXHRcdFx0XHRjbHM6IFwiYXN0cm8tY29tcG9zZXItdGl0bGUtaW5wdXRcIlxuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdC8vIEFzeW5jIGxvYWQgdGhlIGN1cnJlbnQgdGl0bGUgZnJvbSBmaWxlXG5cdFx0XHR2b2lkIHRoaXMuZ2V0Q3VycmVudFRpdGxlQXN5bmMoKS50aGVuKHRpdGxlID0+IHtcblx0XHRcdFx0dGhpcy50aXRsZUlucHV0LnZhbHVlID0gdGl0bGU7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2UgaWYgKHRoaXMuaXNOZXdOb3RlKSB7XG5cdFx0XHRjb25zdCB0eXBlTmFtZSA9IHRoaXMuZ2V0VHlwZURpc3BsYXlOYW1lKCk7XG5cdFx0XHRcblx0XHRcdGlmICh0aGlzLnR5cGUgPT09IFwibm90ZVwiKSB7XG5cdFx0XHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJOZXcgY29udGVudFwiIH0pO1xuXHRcdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJFbnRlciBhIHRpdGxlIGZvciB0aGlzIGNvbnRlbnQ6XCIgfSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IGBDcmVhdGUgbmV3ICR7dHlwZU5hbWV9IGNvbnRlbnRgIH0pO1xuXHRcdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogYEVudGVyIGEgdGl0bGUgZm9yIHlvdXIgbmV3ICR7dHlwZU5hbWV9IGNvbnRlbnQ6YCB9KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0dGhpcy50aXRsZUlucHV0ID0gY29udGVudEVsLmNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuXHRcdFx0XHR0eXBlOiBcInRleHRcIixcblx0XHRcdFx0cGxhY2Vob2xkZXI6IFwiTmV3IFRpdGxlXCIsXG5cdFx0XHRcdGNsczogXCJhc3Ryby1jb21wb3Nlci10aXRsZS1pbnB1dFwiXG5cdFx0XHR9KTtcblx0XHRcdC8vIExlYXZlIGlucHV0IGVtcHR5IGZvciBuZXcgbm90ZXMgLSB1c2VyIGNhbiB0eXBlIGRpcmVjdGx5XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IHR5cGVOYW1lID0gdGhpcy5nZXRUeXBlRGlzcGxheU5hbWUoKTtcblx0XHRcdFxuXHRcdFx0aWYgKHRoaXMudHlwZSA9PT0gXCJub3RlXCIpIHtcblx0XHRcdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIk5ldyBjb250ZW50XCIgfSk7XG5cdFx0XHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIkVudGVyIGEgdGl0bGUgZm9yIHRoaXMgY29udGVudDpcIiB9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogYENyZWF0ZSBuZXcgJHt0eXBlTmFtZX0gY29udGVudGAgfSk7XG5cdFx0XHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBgRW50ZXIgYSB0aXRsZSBmb3IgeW91ciBuZXcgJHt0eXBlTmFtZX0gY29udGVudDpgIH0pO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHR0aGlzLnRpdGxlSW5wdXQgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG5cdFx0XHRcdHR5cGU6IFwidGV4dFwiLFxuXHRcdFx0XHRwbGFjZWhvbGRlcjogXCJOZXcgVGl0bGVcIixcblx0XHRcdFx0Y2xzOiBcImFzdHJvLWNvbXBvc2VyLXRpdGxlLWlucHV0XCJcblx0XHRcdH0pO1xuXHRcdFx0Ly8gUHJlLXBvcHVsYXRlIHdpdGggc3VnZ2VzdGVkIHRpdGxlIGZyb20gYmFzZW5hbWUgaWYgYXZhaWxhYmxlXG5cdFx0XHQvLyBUaGlzIGhhbmRsZXMgZmlsZXMgY3JlYXRlZCBmcm9tIGxpbmtzIChlLmcuLCBbW3NFZnNsZWlmXV0pXG5cdFx0XHRpZiAodGhpcy5maWxlKSB7XG5cdFx0XHRcdGNvbnN0IHN1Z2dlc3RlZFRpdGxlID0gdGhpcy5nZXRTdWdnZXN0ZWRUaXRsZUZyb21CYXNlbmFtZSgpO1xuXHRcdFx0XHRpZiAoc3VnZ2VzdGVkVGl0bGUpIHtcblx0XHRcdFx0XHR0aGlzLnRpdGxlSW5wdXQudmFsdWUgPSBzdWdnZXN0ZWRUaXRsZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHR0aGlzLnRpdGxlSW5wdXQuZm9jdXMoKTtcblx0XHQvLyBGb3IgbmV3IG5vdGVzLCBlbnN1cmUgY3Vyc29yIGlzIGF0IHRoZSBzdGFydCAocG9zaXRpb24gMClcblx0XHRpZiAodGhpcy5pc05ld05vdGUpIHtcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnRpdGxlSW5wdXQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgMCk7XG5cdFx0XHR9LCAwKTtcblx0XHR9XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcImFzdHJvLWNvbXBvc2VyLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIsIGNsczogXCJhc3Ryby1jb21wb3Nlci1jYW5jZWwtYnV0dG9uXCIgfSk7XG5cdFx0Y2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNsb3NlKCk7XG5cblx0XHRjb25zdCBzdWJtaXRCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiB0aGlzLmlzUmVuYW1lID8gXCJSZW5hbWVcIiA6IFwiQ3JlYXRlXCIsIGNsczogW1wiYXN0cm8tY29tcG9zZXItY3JlYXRlLWJ1dHRvblwiLCBcIm1vZC1jdGFcIl0gfSk7XG5cdFx0c3VibWl0QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnN1Ym1pdCgpO1xuXG5cdFx0dGhpcy50aXRsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCAoZSkgPT4ge1xuXHRcdFx0aWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHZvaWQgdGhpcy5zdWJtaXQoKTtcblx0XHR9KTtcblx0fVxuXG5cdGFzeW5jIHN1Ym1pdCgpIHtcblx0XHRjb25zdCB0aXRsZSA9IHRoaXMudGl0bGVJbnB1dC52YWx1ZS50cmltKCk7XG5cdFx0XG5cdFx0aWYgKCF0aXRsZSkge1xuXHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBlbnRlciBhIHRpdGxlLlwiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0bGV0IG5ld0ZpbGU6IFRGaWxlIHwgbnVsbCA9IG51bGw7XG5cdFx0XHRpZiAodGhpcy5pc1JlbmFtZSkge1xuXHRcdFx0XHRuZXdGaWxlID0gYXdhaXQgdGhpcy5maWxlT3BzLnJlbmFtZUZpbGUoeyBmaWxlOiB0aGlzLmZpbGUhLCB0aXRsZSwgdHlwZTogdGhpcy50eXBlIH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKG5ld0ZpbGUpIHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnRlbXBsYXRlUGFyc2VyLnVwZGF0ZVRpdGxlSW5Gcm9udG1hdHRlcihuZXdGaWxlLCB0aXRsZSwgdGhpcy50eXBlKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyByZW5hbWVGaWxlIGFscmVhZHkgc2hvd2VkIGFuIGVycm9yIG5vdGljZSwgY2xvc2UgbW9kYWwgYW5kIHJldHVyblxuXHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAodGhpcy5pc05ld05vdGUpIHtcblx0XHRcdFx0Ly8gUHJvY2VzcyB0aGUgXCJVbnRpdGxlZFwiIGZpbGUgLSByZW5hbWUgaXQgYW5kIGFkZCBwcm9wZXJ0aWVzXG5cdFx0XHRcdC8vIFRoaXMgcmVzcGVjdHMgY3JlYXRpb25Nb2RlIChmb2xkZXIgdnMgZmlsZSkgYW5kIGRvZXNuJ3QgcmVxdWlyZSBkZWxldGlvblxuXHRcdFx0XHRpZiAodGhpcy5maWxlKSB7XG5cdFx0XHRcdFx0bmV3RmlsZSA9IGF3YWl0IHRoaXMuZmlsZU9wcy5jcmVhdGVGaWxlKHsgZmlsZTogdGhpcy5maWxlLCB0aXRsZSwgdHlwZTogdGhpcy50eXBlIH0pO1xuXHRcdFx0XHRcdC8vIEFsd2F5cyBpbnNlcnQgcHJvcGVydGllcyB3aGVuIGF1dG9JbnNlcnRQcm9wZXJ0aWVzIGlzIGVuYWJsZWRcblx0XHRcdFx0XHRjb25zdCBzaG91bGRJbnNlcnRQcm9wZXJ0aWVzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0luc2VydFByb3BlcnRpZXM7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKG5ld0ZpbGUgJiYgc2hvdWxkSW5zZXJ0UHJvcGVydGllcykge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hZGRQcm9wZXJ0aWVzVG9GaWxlKG5ld0ZpbGUsIHRpdGxlLCB0aGlzLnR5cGUpO1xuXHRcdFx0XHRcdFx0Ly8gUG9zaXRpb24gY3Vyc29yIGF0IGVuZCBhZnRlciBwcm9wZXJ0aWVzIGFyZSBhZGRlZFxuXHRcdFx0XHRcdFx0dGhpcy5wb3NpdGlvbkN1cnNvckF0RW5kKG5ld0ZpbGUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0aGlzLmZpbGUpIHtcblx0XHRcdFx0Ly8gV2UgaGF2ZSBhbiBleGlzdGluZyBmaWxlLCBwcm9jZXNzIGl0XG5cdFx0XHRcdG5ld0ZpbGUgPSBhd2FpdCB0aGlzLmZpbGVPcHMuY3JlYXRlRmlsZSh7IGZpbGU6IHRoaXMuZmlsZSwgdGl0bGUsIHR5cGU6IHRoaXMudHlwZSB9KTtcblx0XHRcdFx0Ly8gQWx3YXlzIGluc2VydCBwcm9wZXJ0aWVzIHdoZW4gYXV0b0luc2VydFByb3BlcnRpZXMgaXMgZW5hYmxlZFxuXHRcdFx0XHRjb25zdCBzaG91bGRJbnNlcnRQcm9wZXJ0aWVzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0luc2VydFByb3BlcnRpZXM7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAobmV3RmlsZSAmJiBzaG91bGRJbnNlcnRQcm9wZXJ0aWVzKSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5hZGRQcm9wZXJ0aWVzVG9GaWxlKG5ld0ZpbGUsIHRpdGxlLCB0aGlzLnR5cGUpO1xuXHRcdFx0XHRcdC8vIFBvc2l0aW9uIGN1cnNvciBhdCBlbmQgYWZ0ZXIgcHJvcGVydGllcyBhcmUgYWRkZWRcblx0XHRcdFx0XHR0aGlzLnBvc2l0aW9uQ3Vyc29yQXRFbmQobmV3RmlsZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEZhbGxiYWNrIC0gY3JlYXRlIG5ldyBmaWxlXG5cdFx0XHRcdG5ld0ZpbGUgPSBhd2FpdCB0aGlzLmNyZWF0ZU5ld0ZpbGUodGl0bGUpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRpZiAoIW5ld0ZpbGUpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRmFpbGVkIHRvICR7dGhpcy5pc1JlbmFtZSA/IFwicmVuYW1lXCIgOiBcImNyZWF0ZVwifSAke3RoaXMudHlwZX0uYCk7XG5cdFx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdUaXRsZU1vZGFsOiBFcnJvciBkdXJpbmcgcHJvY2VzczonLCBlcnJvcik7XG5cdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvciAke3RoaXMuaXNSZW5hbWUgPyBcInJlbmFtaW5nXCIgOiBcImNyZWF0aW5nXCJ9ICR7dGhpcy50eXBlfTogJHtlcnJvck1lc3NhZ2V9LmApO1xuXHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMuY2xvc2UoKTtcblx0fVxuXG5cdHByaXZhdGUgZ2V0VHlwZURpc3BsYXlOYW1lKCk6IHN0cmluZyB7XG5cdFx0aWYgKHRoaXMudHlwZSA9PT0gXCJub3RlXCIpIHtcblx0XHRcdHJldHVybiBcIkNvbnRlbnRcIjtcblx0XHR9XG5cdFx0Y29uc3QgY29udGVudFR5cGUgPSB0aGlzLmZpbGVPcHMuZ2V0Q29udGVudFR5cGUodGhpcy50eXBlKTtcblx0XHRyZXR1cm4gY29udGVudFR5cGUgPyBjb250ZW50VHlwZS5uYW1lIDogXCJDb250ZW50XCI7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGNyZWF0ZU5ld0ZpbGUodGl0bGU6IHN0cmluZyk6IFByb21pc2U8VEZpbGUgfCBudWxsPiB7XG5cdFx0Ly8gRGV0ZXJtaW5lIHRoZSBhcHByb3ByaWF0ZSBmb2xkZXIgYmFzZWQgb24gd2hlcmUgdGhlIHVzZXIgY3JlYXRlZCB0aGUgZmlsZVxuXHRcdGxldCB0YXJnZXRGb2xkZXI6IHN0cmluZztcblx0XHRcblx0XHQvLyBHZXQgdGhlIGRpcmVjdG9yeSB3aGVyZSB0aGUgdXNlciBjcmVhdGVkIHRoZSBmaWxlXG5cdFx0Y29uc3Qgb3JpZ2luYWxEaXIgPSB0aGlzLmZpbGU/LnBhcmVudD8ucGF0aCB8fCBcIlwiO1xuXHRcdFxuXHRcdGlmICh0aGlzLnR5cGUgIT09IFwibm90ZVwiKSB7XG5cdFx0XHRjb25zdCBjb250ZW50VHlwZSA9IHRoaXMuZmlsZU9wcy5nZXRDb250ZW50VHlwZSh0aGlzLnR5cGUpO1xuXHRcdFx0Ly8gRm9yIGNvbnRlbnQgdHlwZXMsIHJlc3BlY3QgdGhlIHVzZXIncyBjaG9zZW4gbG9jYXRpb24gKHN1YmZvbGRlcilcblx0XHRcdC8vIE9ubHkgdXNlIHRoZSBjb25maWd1cmVkIGZvbGRlciBpZiB0aGUgdXNlciBjcmVhdGVkIHRoZSBmaWxlIGluIHRoZSB2YXVsdCByb290XG5cdFx0XHRpZiAob3JpZ2luYWxEaXIgPT09IFwiXCIgfHwgb3JpZ2luYWxEaXIgPT09IFwiL1wiKSB7XG5cdFx0XHRcdHRhcmdldEZvbGRlciA9IGNvbnRlbnRUeXBlPy5mb2xkZXIgfHwgXCJcIjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRhcmdldEZvbGRlciA9IG9yaWdpbmFsRGlyO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBGb3Igbm90ZXMsIHVzZSB0aGUgb3JpZ2luYWwgZGlyZWN0b3J5XG5cdFx0XHR0YXJnZXRGb2xkZXIgPSBvcmlnaW5hbERpcjtcblx0XHR9XG5cblx0XHQvLyBDcmVhdGUgdGhlIGZpbGVuYW1lIGZyb20gdGhlIHRpdGxlXG5cdFx0Y29uc3QgZmlsZW5hbWUgPSB0aGlzLmZpbGVPcHMuZ2VuZXJhdGVGaWxlbmFtZSh0aXRsZSk7XG5cdFx0Y29uc3QgY29udGVudFR5cGUgPSB0aGlzLmZpbGVPcHMuZ2V0Q29udGVudFR5cGUodGhpcy50eXBlKTtcblx0XHRjb25zdCBleHRlbnNpb24gPSBjb250ZW50VHlwZT8udXNlTWR4RXh0ZW5zaW9uID8gXCIubWR4XCIgOiBcIi5tZFwiO1xuXHRcdGNvbnN0IGZpbGVQYXRoID0gdGFyZ2V0Rm9sZGVyID8gYCR7dGFyZ2V0Rm9sZGVyfS8ke2ZpbGVuYW1lfSR7ZXh0ZW5zaW9ufWAgOiBgJHtmaWxlbmFtZX0ke2V4dGVuc2lvbn1gO1xuXG5cdFx0Ly8gVHJhY2sgdGhhdCB0aGlzIGZpbGUgd2lsbCBiZSBjcmVhdGVkIGJ5IHRoZSBwbHVnaW4gQkVGT1JFIGNyZWF0aW5nIGl0XG5cdFx0Ly8gVGhpcyBwcmV2ZW50cyB0aGUgY3JlYXRlIGV2ZW50IGZyb20gdHJpZ2dlcmluZyBhbm90aGVyIG1vZGFsXG5cdFx0aWYgKHRoaXMucGx1Z2luICYmICdwbHVnaW5DcmVhdGVkRmlsZXMnIGluIHRoaXMucGx1Z2luKSB7XG5cdFx0XHQodGhpcy5wbHVnaW4gYXMgeyBwbHVnaW5DcmVhdGVkRmlsZXM/OiBTZXQ8c3RyaW5nPiB9KS5wbHVnaW5DcmVhdGVkRmlsZXM/LmFkZChmaWxlUGF0aCk7XG5cdFx0fVxuXG5cdFx0Ly8gQ3JlYXRlIHRoZSBmaWxlIHdpdGggaW5pdGlhbCBjb250ZW50XG5cdFx0bGV0IGluaXRpYWxDb250ZW50ID0gXCJcIjtcblx0XHQvLyBBbHdheXMgaW5zZXJ0IHByb3BlcnRpZXMgd2hlbiBhdXRvSW5zZXJ0UHJvcGVydGllcyBpcyBlbmFibGVkXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9JbnNlcnRQcm9wZXJ0aWVzKSB7XG5cdFx0XHRpbml0aWFsQ29udGVudCA9IHRoaXMuZ2VuZXJhdGVJbml0aWFsQ29udGVudCh0aXRsZSk7XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IG5ld0ZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGluaXRpYWxDb250ZW50KTtcblx0XHRcdFxuXHRcdFx0Ly8gT3BlbiB0aGUgbmV3IGZpbGVcblx0XHRcdGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpO1xuXHRcdFx0YXdhaXQgbGVhZi5vcGVuRmlsZShuZXdGaWxlKTtcblx0XHRcdFxuXHRcdFx0Ly8gUG9zaXRpb24gY3Vyc29yIGF0IHRoZSBlbmQgb2YgY29udGVudCBhZnRlciBlZGl0b3IgaXMgcmVhZHlcblx0XHRcdC8vIFVzZSBtdWx0aXBsZSBhdHRlbXB0cyB0byBlbnN1cmUgaXQgd29ya3MgZXZlbiBpZiBlZGl0b3IgaXNuJ3QgcmVhZHkgaW1tZWRpYXRlbHlcblx0XHRcdGNvbnN0IHBvc2l0aW9uQ3Vyc29yID0gKCkgPT4ge1xuXHRcdFx0XHRjb25zdCB2aWV3ID0gbGVhZi52aWV3O1xuXHRcdFx0XHRpZiAodmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldyAmJiB2aWV3LmVkaXRvcikge1xuXHRcdFx0XHRcdGNvbnN0IGVkaXRvciA9IHZpZXcuZWRpdG9yO1xuXHRcdFx0XHRcdGNvbnN0IGNvbnRlbnQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcblx0XHRcdFx0XHRpZiAoY29udGVudCkge1xuXHRcdFx0XHRcdFx0Y29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcblx0XHRcdFx0XHRcdGNvbnN0IGxhc3RMaW5lID0gbGluZXMubGVuZ3RoIC0gMTtcblx0XHRcdFx0XHRcdGNvbnN0IGxhc3RMaW5lTGVuZ3RoID0gbGluZXNbbGFzdExpbmVdPy5sZW5ndGggfHwgMDtcblx0XHRcdFx0XHRcdGVkaXRvci5zZXRDdXJzb3IoeyBsaW5lOiBsYXN0TGluZSwgY2g6IGxhc3RMaW5lTGVuZ3RoIH0pO1xuXHRcdFx0XHRcdFx0Ly8gRm9jdXMgdGhlIGVkaXRvciB0byBlbnN1cmUgY3Vyc29yIGlzIHZpc2libGUgYW5kIGZpbGVuYW1lIGlzbid0IHNlbGVjdGVkXG5cdFx0XHRcdFx0XHRlZGl0b3IuZm9jdXMoKTtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9O1xuXHRcdFx0XG5cdFx0XHQvLyBUcnkgaW1tZWRpYXRlbHlcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRpZiAoIXBvc2l0aW9uQ3Vyc29yKCkpIHtcblx0XHRcdFx0XHQvLyBJZiBpdCBkaWRuJ3Qgd29yaywgdHJ5IGFnYWluIGFmdGVyIGEgbG9uZ2VyIGRlbGF5XG5cdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0XHRwb3NpdGlvbkN1cnNvcigpO1xuXHRcdFx0XHRcdH0sIDIwMCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIDEwMCk7XG5cdFx0XHRcblx0XHRcdHJldHVybiBuZXdGaWxlO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgZmlsZTogJHtlcnJvck1lc3NhZ2V9YCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBnZW5lcmF0ZUluaXRpYWxDb250ZW50KHRpdGxlOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG5cdFx0Y29uc3QgZGF0ZVN0cmluZyA9IHdpbmRvdy5tb21lbnQobm93KS5mb3JtYXQodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGF0ZUZvcm1hdCk7XG5cdFx0Y29uc3Qgc2x1ZyA9IHRoaXMuZmlsZU9wcy50b0tlYmFiQ2FzZSh0aXRsZSk7XG5cblx0XHRsZXQgdGVtcGxhdGU6IHN0cmluZztcblx0XHRpZiAodGhpcy50eXBlID09PSBcIm5vdGVcIikge1xuXHRcdFx0Ly8gRm9yIGdlbmVyaWMgbm90ZXMsIHVzZSBhIHNpbXBsZSB0ZW1wbGF0ZVxuXHRcdFx0Ly8gUHJvcGVybHkgZXNjYXBlIHRoZSB0aXRsZSBmb3IgWUFNTFxuXHRcdFx0Y29uc3QgZXNjYXBlZFRpdGxlID0gdGhpcy5lc2NhcGVZYW1sU3RyaW5nKHRpdGxlKTtcblx0XHRcdHRlbXBsYXRlID0gYC0tLVxcbnRpdGxlOiAke2VzY2FwZWRUaXRsZX1cXG5kYXRlOiAke2RhdGVTdHJpbmd9XFxuLS0tXFxuYDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc3QgY29udGVudFR5cGUgPSB0aGlzLmZpbGVPcHMuZ2V0Q29udGVudFR5cGUodGhpcy50eXBlKTtcblx0XHRcdGlmICghY29udGVudFR5cGUpIHtcblx0XHRcdFx0Y29uc3QgZXNjYXBlZFRpdGxlID0gdGhpcy5lc2NhcGVZYW1sU3RyaW5nKHRpdGxlKTtcblx0XHRcdFx0dGVtcGxhdGUgPSBgLS0tXFxudGl0bGU6ICR7ZXNjYXBlZFRpdGxlfVxcbmRhdGU6ICR7ZGF0ZVN0cmluZ31cXG4tLS1cXG5gO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGVtcGxhdGUgPSBjb250ZW50VHlwZS50ZW1wbGF0ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0dGVtcGxhdGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKC9cXHtcXHt0aXRsZVxcfVxcfS9nLCB0aXRsZSk7XG5cdFx0dGVtcGxhdGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKC9cXHtcXHtkYXRlXFx9XFx9L2csIGRhdGVTdHJpbmcpO1xuXHRcdHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZSgvXFx7XFx7c2x1Z1xcfVxcfS9nLCBzbHVnKTtcblxuXHRcdHJldHVybiB0ZW1wbGF0ZTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgYWRkUHJvcGVydGllc1RvRmlsZShmaWxlOiBURmlsZSwgdGl0bGU6IHN0cmluZywgdHlwZTogQ29udGVudFR5cGVJZCkge1xuXHRcdGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG5cdFx0Y29uc3QgZGF0ZVN0cmluZyA9IHdpbmRvdy5tb21lbnQobm93KS5mb3JtYXQodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGF0ZUZvcm1hdCk7XG5cdFx0Y29uc3Qgc2x1ZyA9IHRoaXMuZmlsZU9wcy50b0tlYmFiQ2FzZSh0aXRsZSk7XG5cblx0XHRsZXQgdGVtcGxhdGU6IHN0cmluZztcblx0XHRpZiAodHlwZSA9PT0gXCJub3RlXCIpIHtcblx0XHRcdC8vIEZvciBnZW5lcmljIG5vdGVzLCB1c2UgYSBzaW1wbGUgdGVtcGxhdGVcblx0XHRcdC8vIFByb3Blcmx5IGVzY2FwZSB0aGUgdGl0bGUgZm9yIFlBTUxcblx0XHRcdGNvbnN0IGVzY2FwZWRUaXRsZSA9IHRoaXMuZXNjYXBlWWFtbFN0cmluZyh0aXRsZSk7XG5cdFx0XHR0ZW1wbGF0ZSA9IGAtLS1cXG50aXRsZTogJHtlc2NhcGVkVGl0bGV9XFxuZGF0ZTogJHtkYXRlU3RyaW5nfVxcbi0tLVxcbmA7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IGNvbnRlbnRUeXBlID0gdGhpcy5maWxlT3BzLmdldENvbnRlbnRUeXBlKHR5cGUpO1xuXHRcdFx0aWYgKCFjb250ZW50VHlwZSkge1xuXHRcdFx0XHRjb25zdCBlc2NhcGVkVGl0bGUgPSB0aGlzLmVzY2FwZVlhbWxTdHJpbmcodGl0bGUpO1xuXHRcdFx0XHR0ZW1wbGF0ZSA9IGAtLS1cXG50aXRsZTogJHtlc2NhcGVkVGl0bGV9XFxuZGF0ZTogJHtkYXRlU3RyaW5nfVxcbi0tLVxcbmA7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0ZW1wbGF0ZSA9IGNvbnRlbnRUeXBlLnRlbXBsYXRlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHR0ZW1wbGF0ZSA9IHRlbXBsYXRlLnJlcGxhY2UoL1xce1xce3RpdGxlXFx9XFx9L2csIHRpdGxlKTtcblx0XHR0ZW1wbGF0ZSA9IHRlbXBsYXRlLnJlcGxhY2UoL1xce1xce2RhdGVcXH1cXH0vZywgZGF0ZVN0cmluZyk7XG5cdFx0dGVtcGxhdGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKC9cXHtcXHtzbHVnXFx9XFx9L2csIHNsdWcpO1xuXG5cdFx0Ly8gRW5zdXJlIG5vIGV4dHJhIG5ld2xpbmVzIG9yIC0tLSBhcmUgYWRkZWQgYmV5b25kIHRoZSB0ZW1wbGF0ZVxuXHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCB0ZW1wbGF0ZSk7XG5cdH1cblxuXHRwcml2YXRlIHBvc2l0aW9uQ3Vyc29yQXRFbmQoZmlsZTogVEZpbGUpIHtcblx0XHRjb25zdCBwb3NpdGlvbkN1cnNvciA9ICgpID0+IHtcblx0XHRcdGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXHRcdFx0aWYgKHZpZXcgJiYgdmlldy5maWxlID09PSBmaWxlICYmIHZpZXcuZWRpdG9yKSB7XG5cdFx0XHRcdGNvbnN0IGVkaXRvciA9IHZpZXcuZWRpdG9yO1xuXHRcdFx0XHRjb25zdCBjb250ZW50ID0gZWRpdG9yLmdldFZhbHVlKCk7XG5cdFx0XHRcdGlmIChjb250ZW50KSB7XG5cdFx0XHRcdFx0Y29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcblx0XHRcdFx0XHRjb25zdCBsYXN0TGluZSA9IGxpbmVzLmxlbmd0aCAtIDE7XG5cdFx0XHRcdFx0Y29uc3QgbGFzdExpbmVMZW5ndGggPSBsaW5lc1tsYXN0TGluZV0/Lmxlbmd0aCB8fCAwO1xuXHRcdFx0XHRcdGVkaXRvci5zZXRDdXJzb3IoeyBsaW5lOiBsYXN0TGluZSwgY2g6IGxhc3RMaW5lTGVuZ3RoIH0pO1xuXHRcdFx0XHRcdC8vIEZvY3VzIHRoZSBlZGl0b3IgdG8gZW5zdXJlIGN1cnNvciBpcyB2aXNpYmxlXG5cdFx0XHRcdFx0ZWRpdG9yLmZvY3VzKCk7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xuXHRcdFxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0aWYgKCFwb3NpdGlvbkN1cnNvcigpKSB7XG5cdFx0XHRcdC8vIElmIGl0IGRpZG4ndCB3b3JrLCB0cnkgYWdhaW4gYWZ0ZXIgYSBsb25nZXIgZGVsYXlcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0cG9zaXRpb25DdXJzb3IoKTtcblx0XHRcdFx0fSwgMjAwKTtcblx0XHRcdH1cblx0XHR9LCAxMDApO1xuXHR9XG5cblx0cHJpdmF0ZSBlc2NhcGVZYW1sU3RyaW5nKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcblx0XHQvLyBQcm9wZXJseSBlc2NhcGUgWUFNTCBzdHJpbmcgdmFsdWVzXG5cdFx0Ly8gWUFNTCBzdHJpbmdzIHdpdGggcXVvdGVzIG5lZWQgdG8gYmUgd3JhcHBlZCBpbiBzaW5nbGUgcXVvdGVzIG9yIGVzY2FwZWQgcHJvcGVybHlcblx0XHRpZiAoc3RyLmluY2x1ZGVzKCdcIicpIHx8IHN0ci5pbmNsdWRlcyhcIidcIikgfHwgc3RyLmluY2x1ZGVzKCdcXG4nKSB8fCBzdHIuaW5jbHVkZXMoJ1xcXFwnKSkge1xuXHRcdFx0Ly8gRm9yIHN0cmluZ3Mgd2l0aCBxdW90ZXMsIG5ld2xpbmVzLCBvciBiYWNrc2xhc2hlcywgdXNlIHNpbmdsZSBxdW90ZXMgYW5kIGVzY2FwZSBzaW5nbGUgcXVvdGVzXG5cdFx0XHRyZXR1cm4gYCcke3N0ci5yZXBsYWNlKC8nL2csIFwiJydcIil9J2A7XG5cdFx0fSBlbHNlIGlmIChzdHIuaW5jbHVkZXMoXCIgXCIpIHx8IHN0ci5pbmNsdWRlcyhcIjpcIikgfHwgc3RyLmluY2x1ZGVzKFwiI1wiKSB8fCBzdHIuaW5jbHVkZXMoXCJAXCIpKSB7XG5cdFx0XHQvLyBGb3Igc3RyaW5ncyB3aXRoIHNwYWNlcyBvciBzcGVjaWFsIFlBTUwgY2hhcmFjdGVycywgd3JhcCBpbiBkb3VibGUgcXVvdGVzIGFuZCBlc2NhcGUgZG91YmxlIHF1b3Rlc1xuXHRcdFx0cmV0dXJuIGBcIiR7c3RyLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKX1cImA7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIEZvciBzaW1wbGUgc3RyaW5ncywgbm8gcXVvdGVzIG5lZWRlZFxuXHRcdFx0cmV0dXJuIHN0cjtcblx0XHR9XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBQbGF0Zm9ybSwgc2V0SWNvbiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBDb250ZW50VHlwZSwgQXN0cm9Db21wb3NlclBsdWdpbkludGVyZmFjZSwgQXN0cm9Db21wb3NlclNldHRpbmdzIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBDb21tYW5kUGlja2VyTW9kYWwgfSBmcm9tIFwiLi9jb21wb25lbnRzL0NvbW1hbmRQaWNrZXJNb2RhbFwiO1xuaW1wb3J0IHsgSWNvblBpY2tlck1vZGFsIH0gZnJvbSBcIi4vY29tcG9uZW50cy9JY29uUGlja2VyTW9kYWxcIjtcbmltcG9ydCB7IENvbmZpcm1Nb2RhbCB9IGZyb20gXCIuL2NvbXBvbmVudHMvQ29uZmlybU1vZGFsXCI7XG5pbXBvcnQgeyBjcmVhdGVTZXR0aW5nc0dyb3VwIH0gZnJvbSBcIi4uL3V0aWxzL3NldHRpbmdzLWNvbXBhdFwiO1xuaW1wb3J0IHsgcmVnaXN0ZXJDb250ZW50VHlwZUNvbW1hbmRzIH0gZnJvbSBcIi4uL2NvbW1hbmRzXCI7XG5cbmV4cG9ydCBjbGFzcyBBc3Ryb0NvbXBvc2VyU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IEFzdHJvQ29tcG9zZXJQbHVnaW5JbnRlcmZhY2U7XG5cdGF1dG9SZW5hbWVDb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdHBvc3RzRm9sZGVyQ29udGFpbmVyOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXHRvbmx5QXV0b21hdGVDb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdGNyZWF0aW9uTW9kZUNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0aW5kZXhGaWxlQ29udGFpbmVyOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXHRleGNsdWRlZERpcnNDb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdHVuZGVyc2NvcmVQcmVmaXhDb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdGF1dG9JbnNlcnRDb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdHBhZ2VzRmllbGRzQ29udGFpbmVyOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXHRwYWdlc0luZGV4RmlsZUNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0cGFnZXNPbmx5QXV0b21hdGVDb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdHRlcm1pbmFsQ29tbWFuZENvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0Y29uZmlnQ29tbWFuZENvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0Y3VzdG9tQ29udGVudFR5cGVzQ29udGFpbmVyOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXHR0ZXJtaW5hbFJpYmJvblRvZ2dsZTogU2V0dGluZyB8IG51bGwgPSBudWxsO1xuXHRjb25maWdSaWJib25Ub2dnbGU6IFNldHRpbmcgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSB0ZXJtaW5hbFJpYmJvblRvZ2dsZUNvbXBvbmVudDogeyBzZXREaXNhYmxlZDogKGRpc2FibGVkOiBib29sZWFuKSA9PiB2b2lkIH0gfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBjb25maWdSaWJib25Ub2dnbGVDb21wb25lbnQ6IHsgc2V0RGlzYWJsZWQ6IChkaXNhYmxlZDogYm9vbGVhbikgPT4gdm9pZCB9IHwgbnVsbCA9IG51bGw7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogUGx1Z2luKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luIGFzIHVua25vd24gYXMgQXN0cm9Db21wb3NlclBsdWdpbkludGVyZmFjZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZWZyZXNoIGp1c3QgdGhlIGNvbnRlbnQgdHlwZXMgc2VjdGlvblxuXHQgKiBNb3JlIGVmZmljaWVudCB0aGFuIHJlZnJlc2hpbmcgdGhlIGVudGlyZSBzZXR0aW5ncyB0YWJcblx0ICovXG5cdHB1YmxpYyByZWZyZXNoQ29udGVudFR5cGVzKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmN1c3RvbUNvbnRlbnRUeXBlc0NvbnRhaW5lcikge1xuXHRcdFx0dGhpcy5yZW5kZXJDdXN0b21Db250ZW50VHlwZXMoKTtcblx0XHR9XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdC8vIFVzZSBjdXJyZW50IHBsdWdpbiBzZXR0aW5ncyAoYWxyZWFkeSBsb2FkZWQgYW5kIHVwLXRvLWRhdGUpXG5cdFx0Ly8gQWx3YXlzIHJlYWQgZnJlc2ggc2V0dGluZ3MgdG8gZW5zdXJlIHdlIHNob3cgbWlncmF0ZWQgY29udGVudCB0eXBlcyBpbW1lZGlhdGVseVxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG5cdFx0XG5cdFx0Ly8gUmVuZGVyIHRoZSBzZXR0aW5ncyB0YWIgd2l0aCBjdXJyZW50IHNldHRpbmdzXG5cdFx0Ly8gVGhpcyB3aWxsIHNob3cgYWxsIGNvbnRlbnQgdHlwZXMgaW5jbHVkaW5nIG5ld2x5IG1pZ3JhdGVkIG9uZXNcblx0XHR0aGlzLnJlbmRlclNldHRpbmdzVGFiKGNvbnRhaW5lckVsLCBzZXR0aW5ncyk7XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlclNldHRpbmdzVGFiKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgc2V0dGluZ3M6IEFzdHJvQ29tcG9zZXJTZXR0aW5ncyk6IHZvaWQge1xuXG5cdFx0Ly8gR2xvYmFsIHNldHRpbmdzIChmaXJzdCBncm91cCAtIG5vIGhlYWRpbmcpXG5cdFx0Y29uc3QgZ2VuZXJhbEdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgdW5kZWZpbmVkLCAnYXN0cm8tY29tcG9zZXInKTtcblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZShcIkRhdGUgZm9ybWF0XCIpXG5cdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBEYXRlIGZvcm1hdCBjb2RlcyAoTU1NTSwgeXl5eSwgZXRjLikgYXJlIHRlY2huaWNhbCBub3RhdGlvbiwgbm90IFVJIHRleHRcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxuXHRcdFx0XHQuc2V0RGVzYyhcIkZvcm1hdCBmb3IgdGhlIGRhdGUgaW4gcHJvcGVydGllcyAoZS5nLiwgeXl5eS1tbS1kZCwgTU1NTSBELCB5eXl5LCB5eXl5LW1tLWRkIEhIOm1tKVwiKVxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogXCJZWVlZLU1NLUREXCIgaXMgYSBkYXRlIGZvcm1hdCBwbGFjZWhvbGRlciwgbm90IFVJIHRleHRcblx0XHRcdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2Vcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIllZWVktTU0tRERcIilcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShzZXR0aW5ncy5kYXRlRm9ybWF0KVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHNldHRpbmdzLmRhdGVGb3JtYXQgPSB2YWx1ZSB8fCBcIllZWVktTU0tRERcIjtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdH0pO1xuXG5cdFx0Z2VuZXJhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoXCJFbmFibGUgY29weSBoZWFkaW5nIGxpbmtzXCIpXG5cdFx0XHRcdC5zZXREZXNjKFwiQWRkIHJpZ2h0LWNsaWNrIGNvbnRleHQgbWVudSBvcHRpb24gdG8gY29weSBoZWFkaW5nIGxpbmtzIGluIHZhcmlvdXMgZm9ybWF0cy5cIilcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHNldHRpbmdzLmVuYWJsZUNvcHlIZWFkaW5nTGluaylcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuZW5hYmxlQ29weUhlYWRpbmdMaW5rID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnVwZGF0ZUNvcHlIZWFkaW5nRmllbGRzKCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdH0pO1xuXG5cdFx0Z2VuZXJhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoXCJEZWZhdWx0IGhlYWRpbmcgbGluayBmb3JtYXRcIilcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFwiQXN0cm9cIiBpcyBhIHByb3BlciBub3VuIChmcmFtZXdvcmsgbmFtZSkgYW5kIHNob3VsZCBiZSBjYXBpdGFsaXplZFxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXG5cdFx0XHRcdC5zZXREZXNjKFwiQ2hvb3NlIHRoZSBkZWZhdWx0IGZvcm1hdCBmb3IgY29waWVkIGhlYWRpbmcgbGlua3MuIE9ic2lkaWFuIGZvcm1hdCByZXNwZWN0cyB5b3VyIE9ic2lkaWFuIHNldHRpbmdzIGZvciB3aWtpbGluayB2cyBtYXJrZG93biBwcmVmZXJlbmNlLiBBc3RybyBsaW5rIHVzZXMgeW91ciBsaW5rIGJhc2UgcGF0aCBmcm9tIGFib3ZlIGFuZCBjb252ZXJ0cyB0aGUgaGVhZGluZyBpbnRvIGtlYmFiLWNhc2UgZm9ybWF0IGFzIGFuIGFuY2hvciBsaW5rXCIpXG5cdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+XG5cdFx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oXCJvYnNpZGlhblwiLCBcIk9ic2lkaWFuIGxpbmtcIilcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oXCJhc3Ryb1wiLCBcIkFzdHJvIGxpbmtcIilcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShzZXR0aW5ncy5jb3B5SGVhZGluZ0xpbmtGb3JtYXQpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuY29weUhlYWRpbmdMaW5rRm9ybWF0ID0gdmFsdWUgYXMgXCJvYnNpZGlhblwiIHwgXCJhc3Ryb1wiO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdCk7XG5cdFx0XHQvLyBBZGQgY29uZGl0aW9uYWwgdmlzaWJpbGl0eSBjbGFzc2VzIC0ga2VlcCBzZXR0aW5nIGluIGdyb3VwXG5cdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItdmlzaWJsZVwiLCBzZXR0aW5ncy5lbmFibGVDb3B5SGVhZGluZ0xpbmspO1xuXHRcdFx0c2V0dGluZy5zZXR0aW5nRWwuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLWhpZGRlblwiLCAhc2V0dGluZ3MuZW5hYmxlQ29weUhlYWRpbmdMaW5rKTtcblx0XHR9KTtcblxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKFwiQWRkIHRyYWlsaW5nIHNsYXNoIHRvIGxpbmtzXCIpXG5cdFx0XHRcdC5zZXREZXNjKFwiQWRkIHRyYWlsaW5nIHNsYXNoZXMgdG8gYWxsIGNvbnZlcnRlZCBpbnRlcm5hbCBsaW5rcyAoZS5nLiwgL2Fib3V0LyBpbnN0ZWFkIG9mIC9hYm91dCkuXCIpXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cblx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShzZXR0aW5ncy5hZGRUcmFpbGluZ1NsYXNoVG9MaW5rcylcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuYWRkVHJhaWxpbmdTbGFzaFRvTGlua3MgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdH0pO1xuXG5cdFx0Z2VuZXJhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFwiTURYXCIgaXMgYSBwcm9wZXIgbm91biAoZmlsZSBmb3JtYXQpIGFuZCBzaG91bGQgYmUgY2FwaXRhbGl6ZWRcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxuXHRcdFx0XHQuc2V0TmFtZShcIlNob3cgTURYIGZpbGVzIGluIGZpbGUgZXhwbG9yZXJcIilcblx0XHRcdFx0LnNldERlc2MoXCJNYWtlIC5tZHggZmlsZXMgdmlzaWJsZSBpbiBPYnNpZGlhbidzIGZpbGUgZXhwbG9yZXIuIFJlcXVpcmVzIHJlbG9hZCB0byB0YWtlIGVmZmVjdC5cIilcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHNldHRpbmdzLnNob3dNZHhGaWxlc0luRXhwbG9yZXIpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHNldHRpbmdzLnNob3dNZHhGaWxlc0luRXhwbG9yZXIgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gQXV0by1pbnNlcnQgcHJvcGVydGllcyAoZ2xvYmFsIHNldHRpbmcpXG5cdFx0Z2VuZXJhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoXCJBdXRvLWluc2VydCBwcm9wZXJ0aWVzXCIpXG5cdFx0XHRcdC5zZXREZXNjKFwiQXV0b21hdGljYWxseSBpbnNlcnQgdGhlIHByb3BlcnRpZXMgdGVtcGxhdGUgd2hlbiBjcmVhdGluZyBuZXcgZmlsZXMgZm9yIGFueSBjb250ZW50IHR5cGUuXCIpXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cblx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShzZXR0aW5ncy5hdXRvSW5zZXJ0UHJvcGVydGllcylcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuYXV0b0luc2VydFByb3BlcnRpZXMgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gQ29udGVudCB0eXBlc1xuXHRcdGNvbnN0IGNvbnRlbnRUeXBlc0dyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgXCJDb250ZW50IHR5cGVzXCIsICdhc3Ryby1jb21wb3NlcicpO1xuXG5cdFx0Ly8gQWRkIGNvbnRhaW5lciBhcyBhIHNldHRpbmcgLSBoaWRlIHRoZSBzZXR0aW5nJ3MgZGVmYXVsdCBVSSwgYWRkIG91ciBjb250YWluZXIgaW5zaWRlXG5cdFx0Y29udGVudFR5cGVzR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0Ly8gSGlkZSB0aGUgc2V0dGluZydzIGRlZmF1bHQgVUkgZWxlbWVudHMgdXNpbmcgQ1NTIGNsYXNzZXNcblx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLmFkZENsYXNzKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1oaWRkZW4tZWxlbWVudHNcIik7XG5cdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5hZGRDbGFzcyhcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLWZ1bGwtd2lkdGhcIik7XG5cdFx0XHQvLyBBZGQgb3VyIGNvbnRhaW5lciBpbnNpZGUgdGhlIHNldHRpbmcgZWxlbWVudCAtIGVuc3VyZSBpdCdzIHZpc2libGVcblx0XHRcdHRoaXMuY3VzdG9tQ29udGVudFR5cGVzQ29udGFpbmVyID0gc2V0dGluZy5zZXR0aW5nRWwuY3JlYXRlRGl2KHsgXG5cdFx0XHRcdGNsczogXCJjdXN0b20tY29udGVudC10eXBlcy1jb250YWluZXIgYXN0cm8tY29tcG9zZXItY3VzdG9tLXR5cGVzLWNvbnRhaW5lci12aXNpYmxlXCIgXG5cdFx0XHR9KTtcblx0XHR9KTtcblx0XHQvLyBSZW5kZXIgY29udGVudCB0eXBlcyBhZnRlciBjb250YWluZXIgaXMgY3JlYXRlZFxuXHRcdGlmICh0aGlzLmN1c3RvbUNvbnRlbnRUeXBlc0NvbnRhaW5lcikge1xuXHRcdFx0dGhpcy5yZW5kZXJDdXN0b21Db250ZW50VHlwZXMoKTtcblx0XHR9XG5cblx0XHQvLyBEZXZlbG9wZXIgY29tbWFuZHMgKGRlc2t0b3Agb25seSAtIG5vdCBhdmFpbGFibGUgb24gbW9iaWxlKVxuXHRcdGlmICghUGxhdGZvcm0uaXNNb2JpbGUpIHtcblx0XHRcdGNvbnN0IGRldmVsb3Blckdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgXCJEZXZlbG9wZXIgY29tbWFuZHNcIiwgJ2FzdHJvLWNvbXBvc2VyJyk7XG5cblx0XHRcdC8vIFRlcm1pbmFsIGNvbW1hbmQgc2V0dGluZ3Ncblx0XHRcdGRldmVsb3Blckdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdC5zZXROYW1lKFwiRW5hYmxlIG9wZW4gdGVybWluYWwgY29tbWFuZFwiKVxuXHRcdFx0XHRcdC5zZXREZXNjKFwiRW5hYmxlIGNvbW1hbmQgdG8gb3BlbiB0ZXJtaW5hbCBpbiBwcm9qZWN0IHJvb3QgZGlyZWN0b3J5LlwiKVxuXHRcdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cblx0XHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUoc2V0dGluZ3MuZW5hYmxlT3BlblRlcm1pbmFsQ29tbWFuZClcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYm9vbGVhbikgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLmVuYWJsZU9wZW5UZXJtaW5hbENvbW1hbmQgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnVwZGF0ZVRlcm1pbmFsQ29tbWFuZEZpZWxkcygpO1xuXHRcdFx0XHRcdFx0XHRcdC8vIHJlZ2lzdGVyUmliYm9uSWNvbnMgY2hlY2tzIGJvdGggY29tbWFuZCBhbmQgaWNvbiBzZXR0aW5nc1xuXHRcdFx0XHRcdFx0XHRcdC8vIElmIGNvbW1hbmQgaXMgZW5hYmxlZCBBTkQgaWNvbiBpcyBlbmFibGVkLCBpdCB3aWxsIHNob3c7IG90aGVyd2lzZSBpdCB3aWxsIGhpZGVcblx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4ucmVnaXN0ZXJSaWJib25JY29ucykge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJSaWJib25JY29ucygpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQpO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIENyZWF0ZSBjb250YWluZXIgZm9yIHRlcm1pbmFsIGNvbW1hbmQgZmllbGRzIC0ga2VlcCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSB3aXRoIHVwZGF0ZSBtZXRob2RzXG5cdFx0XHR0aGlzLnRlcm1pbmFsQ29tbWFuZENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogXCJ0ZXJtaW5hbC1jb21tYW5kLWZpZWxkc1wiIH0pO1xuXHRcdFx0dGhpcy50ZXJtaW5hbENvbW1hbmRDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLXZpc2libGVcIiwgc2V0dGluZ3MuZW5hYmxlT3BlblRlcm1pbmFsQ29tbWFuZCk7XG5cdFx0XHR0aGlzLnRlcm1pbmFsQ29tbWFuZENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItaGlkZGVuXCIsICFzZXR0aW5ncy5lbmFibGVPcGVuVGVybWluYWxDb21tYW5kKTtcblxuXHRcdFx0ZGV2ZWxvcGVyR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRjb25zdCBkZXNjRnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBUZXh0IGlzIGFscmVhZHkgaW4gc2VudGVuY2UgY2FzZTsgXCJPYnNpZGlhblwiIGlzIGEgcHJvcGVyIG5vdW5cblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxuXHRcdFx0XHRkZXNjRnJhZ21lbnQuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBcIlBhdGggcmVsYXRpdmUgdG8gdGhlIE9ic2lkaWFuIHZhdWx0IHJvb3QgZm9sZGVyLiBVc2UgLi4vLi4gZm9yIHR3byBsZXZlbHMgdXAuIExlYXZlIGJsYW5rIHRvIHVzZSB0aGUgdmF1bHQgZm9sZGVyXCIgfSk7XG5cdFx0XHRcdGRlc2NGcmFnbWVudC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IFwiVGhpcyBpcyB3aGVyZSB0aGUgdGVybWluYWwgd2lsbCBvcGVuLiBBYnNvbHV0ZSBwYXRocyB3b3JrIGFsc28uXCIgfSk7XG5cdFx0XHRcdHNldHRpbmdcblx0XHRcdFx0XHQuc2V0TmFtZShcIlByb2plY3Qgcm9vdCBkaXJlY3RvcnkgcGF0aFwiKVxuXHRcdFx0XHRcdC5zZXREZXNjKGRlc2NGcmFnbWVudClcblx0XHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiLi4vLi5cIilcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHNldHRpbmdzLnRlcm1pbmFsUHJvamVjdFJvb3RQYXRoKVxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy50ZXJtaW5hbFByb2plY3RSb290UGF0aCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdC8vIEFkZCBjbGFzcyBmb3IgY29uZGl0aW9uYWwgdmlzaWJpbGl0eSAtIGtlZXAgc2V0dGluZyBpbiBncm91cFxuXHRcdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItdmlzaWJsZVwiLCBzZXR0aW5ncy5lbmFibGVPcGVuVGVybWluYWxDb21tYW5kKTtcblx0XHRcdFx0c2V0dGluZy5zZXR0aW5nRWwuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLWhpZGRlblwiLCAhc2V0dGluZ3MuZW5hYmxlT3BlblRlcm1pbmFsQ29tbWFuZCk7XG5cdFx0XHR9KTtcblxuXHRcdFx0ZGV2ZWxvcGVyR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRjb25zdCBkZXNjRnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBUZXh0IGlzIGFscmVhZHkgaW4gc2VudGVuY2UgY2FzZTsgXCJtYWNPU1wiLCBcIldpbmRvd3NcIiwgXCJMaW51eFwiLCBcIlRlcm1pbmFsXCIsIFwiV2luZG93cyBUZXJtaW5hbFwiLCBcImNtZC5leGVcIiBhcmUgcHJvcGVyIG5vdW5zIG9yIHByb2R1Y3QgbmFtZXNcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxuXHRcdFx0XHRkZXNjRnJhZ21lbnQuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBcIkxlYXZlIGJsYW5rIHRvIHVzZSBwbGF0Zm9ybSBkZWZhdWx0cy4gT24gbWFjT1MsIHRoZSBkZWZhdWx0IGlzIFRlcm1pbmFsLiBPbiBXaW5kb3dzLCBpdCdzIFdpbmRvd3MgVGVybWluYWwgb3IgY21kLmV4ZS4gT24gTGludXgsIGl0J3MgZ25vbWUtdGVybWluYWwsIGtvbnNvbGUsIG9yIHh0ZXJtXCIgfSk7XG5cdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBUZXh0IGlzIGFscmVhZHkgaW4gc2VudGVuY2UgY2FzZTsgXCJUZXJtaW5hbFwiLCBcImlUZXJtXCIsIFwiUG93ZXJTaGVsbFwiLCBcIkFsYWNyaXR0eVwiIGFyZSBwcm9wZXIgbm91bnMgKHByb2R1Y3QgbmFtZXMpXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2Vcblx0XHRcdFx0ZGVzY0ZyYWdtZW50LmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogXCJFeGFtcGxlcyBpbmNsdWRlIFRlcm1pbmFsLCBpVGVybSwgUG93ZXJTaGVsbCwgYW5kIEFsYWNyaXR0eVwiIH0pO1xuXHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0LnNldE5hbWUoXCJUZXJtaW5hbCBhcHBsaWNhdGlvbiBuYW1lXCIpXG5cdFx0XHRcdFx0LnNldERlc2MoZGVzY0ZyYWdtZW50KVxuXHRcdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJUZXJtaW5hbFwiKVxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUoc2V0dGluZ3MudGVybWluYWxBcHBsaWNhdGlvbk5hbWUpXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLnRlcm1pbmFsQXBwbGljYXRpb25OYW1lID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0Ly8gQWRkIGNsYXNzIGZvciBjb25kaXRpb25hbCB2aXNpYmlsaXR5IC0ga2VlcCBzZXR0aW5nIGluIGdyb3VwXG5cdFx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLmNsYXNzTGlzdC50b2dnbGUoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWNvbnRhaW5lci12aXNpYmxlXCIsIHNldHRpbmdzLmVuYWJsZU9wZW5UZXJtaW5hbENvbW1hbmQpO1xuXHRcdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItaGlkZGVuXCIsICFzZXR0aW5ncy5lbmFibGVPcGVuVGVybWluYWxDb21tYW5kKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRkZXZlbG9wZXJHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRcdHNldHRpbmdcblx0XHRcdFx0XHQuc2V0TmFtZShcIkVuYWJsZSBkZWJ1ZyBsb2dnaW5nXCIpXG5cdFx0XHRcdFx0LnNldERlc2MoXCJMb2cgdGVybWluYWwgbGF1bmNoIGNvbW1hbmRzIGFuZCBwbGF0Zm9ybSBkZWNpc2lvbnMgdG8gdGhlIGRldmVsb3BlciBjb25zb2xlIGZvciB0cm91Ymxlc2hvb3RpbmcuXCIpXG5cdFx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZShzZXR0aW5ncy5lbmFibGVUZXJtaW5hbERlYnVnTG9nZ2luZylcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYm9vbGVhbikgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLmVuYWJsZVRlcm1pbmFsRGVidWdMb2dnaW5nID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0Ly8gQWRkIGNsYXNzIGZvciBjb25kaXRpb25hbCB2aXNpYmlsaXR5IC0ga2VlcCBzZXR0aW5nIGluIGdyb3VwXG5cdFx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLmNsYXNzTGlzdC50b2dnbGUoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWNvbnRhaW5lci12aXNpYmxlXCIsIHNldHRpbmdzLmVuYWJsZU9wZW5UZXJtaW5hbENvbW1hbmQpO1xuXHRcdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItaGlkZGVuXCIsICFzZXR0aW5ncy5lbmFibGVPcGVuVGVybWluYWxDb21tYW5kKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRkZXZlbG9wZXJHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRcdHNldHRpbmdcblx0XHRcdFx0XHQuc2V0TmFtZShcIlNob3cgb3BlbiB0ZXJtaW5hbCByaWJib24gaWNvblwiKVxuXHRcdFx0XHRcdC5zZXREZXNjKFwiQWRkIGEgcmliYm9uIGljb24gdG8gbGF1bmNoIHRoZSB0ZXJtaW5hbCBjb21tYW5kLlwiKVxuXHRcdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy50ZXJtaW5hbFJpYmJvblRvZ2dsZUNvbXBvbmVudCA9IHRvZ2dsZTtcblx0XHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUoc2V0dGluZ3MuZW5hYmxlVGVybWluYWxSaWJib25JY29uKVxuXHRcdFx0XHRcdFx0XHQuc2V0RGlzYWJsZWQoIXNldHRpbmdzLmVuYWJsZU9wZW5UZXJtaW5hbENvbW1hbmQpXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgc2V0dGluZ3MgZGlyZWN0bHkgb24gcGx1Z2luIGluc3RhbmNlXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlVGVybWluYWxSaWJib25JY29uID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuZW5hYmxlVGVybWluYWxSaWJib25JY29uID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gU21hbGwgZGVsYXkgdG8gZW5zdXJlIHNldHRpbmdzIGFyZSBzYXZlZCwgdGhlbiByZS1yZWdpc3RlclxuXHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnJlZ2lzdGVyUmliYm9uSWNvbnMpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJSaWJib25JY29ucygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0sIDUwKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdC8vIEFkZCBjbGFzcyBmb3IgY29uZGl0aW9uYWwgdmlzaWJpbGl0eSAtIGtlZXAgc2V0dGluZyBpbiBncm91cFxuXHRcdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItdmlzaWJsZVwiLCBzZXR0aW5ncy5lbmFibGVPcGVuVGVybWluYWxDb21tYW5kKTtcblx0XHRcdFx0c2V0dGluZy5zZXR0aW5nRWwuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLWhpZGRlblwiLCAhc2V0dGluZ3MuZW5hYmxlT3BlblRlcm1pbmFsQ29tbWFuZCk7XG5cdFx0XHRcdC8vIFN0b3JlIHJlZmVyZW5jZSBmb3IgdXBkYXRpbmcgZGlzYWJsZWQgc3RhdGVcblx0XHRcdFx0dGhpcy50ZXJtaW5hbFJpYmJvblRvZ2dsZSA9IHNldHRpbmc7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gQ29uZmlnIGZpbGUgY29tbWFuZCBzZXR0aW5nc1xuXHRcdFx0ZGV2ZWxvcGVyR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0LnNldE5hbWUoXCJFbmFibGUgZWRpdCBjb25maWcgZmlsZSBjb21tYW5kXCIpXG5cdFx0XHRcdFx0LnNldERlc2MoXCJFbmFibGUgY29tbWFuZCB0byBvcGVuIGFzdHJvIGNvbmZpZyBmaWxlIGluIGRlZmF1bHQgZWRpdG9yLlwiKVxuXHRcdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cblx0XHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUoc2V0dGluZ3MuZW5hYmxlT3BlbkNvbmZpZ0ZpbGVDb21tYW5kKVxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuZW5hYmxlT3BlbkNvbmZpZ0ZpbGVDb21tYW5kID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy51cGRhdGVDb25maWdDb21tYW5kRmllbGRzKCk7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gcmVnaXN0ZXJSaWJib25JY29ucyBjaGVja3MgYm90aCBjb21tYW5kIGFuZCBpY29uIHNldHRpbmdzXG5cdFx0XHRcdFx0XHRcdFx0Ly8gSWYgY29tbWFuZCBpcyBlbmFibGVkIEFORCBpY29uIGlzIGVuYWJsZWQsIGl0IHdpbGwgc2hvdzsgb3RoZXJ3aXNlIGl0IHdpbGwgaGlkZVxuXHRcdFx0XHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5yZWdpc3RlclJpYmJvbkljb25zKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlclJpYmJvbkljb25zKCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdCk7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gQ3JlYXRlIGNvbnRhaW5lciBmb3IgY29uZmlnIGNvbW1hbmQgZmllbGRzIC0ga2VlcCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSB3aXRoIHVwZGF0ZSBtZXRob2RzXG5cdFx0XHR0aGlzLmNvbmZpZ0NvbW1hbmRDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6IFwiY29uZmlnLWNvbW1hbmQtZmllbGRzXCIgfSk7XG5cdFx0XHR0aGlzLmNvbmZpZ0NvbW1hbmRDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLXZpc2libGVcIiwgc2V0dGluZ3MuZW5hYmxlT3BlbkNvbmZpZ0ZpbGVDb21tYW5kKTtcblx0XHRcdHRoaXMuY29uZmlnQ29tbWFuZENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItaGlkZGVuXCIsICFzZXR0aW5ncy5lbmFibGVPcGVuQ29uZmlnRmlsZUNvbW1hbmQpO1xuXG5cdFx0XHRkZXZlbG9wZXJHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGRlc2NGcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0XHRcdFx0ZGVzY0ZyYWdtZW50LmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogXCJQYXRoIHRvIHRoZSBjb25maWcgZmlsZSByZWxhdGl2ZSB0byB0aGUgdmF1bHQgcm9vdC4gVXNlIC4uL2NvbmZpZy50cyBvciAuLi8uLi9hc3Ryby5jb25maWcubWpzLlwiIH0pO1xuXHRcdFx0XHRkZXNjRnJhZ21lbnQuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBcIkFic29sdXRlIHBhdGhzIHdvcmsgYWxzby5cIiB9KTtcblx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdC5zZXROYW1lKFwiQ29uZmlnIGZpbGUgcGF0aFwiKVxuXHRcdFx0XHRcdC5zZXREZXNjKGRlc2NGcmFnbWVudClcblx0XHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiLi4vY29uZmlnLnRzXCIpXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZShzZXR0aW5ncy5jb25maWdGaWxlUGF0aClcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuY29uZmlnRmlsZVBhdGggPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHQvLyBBZGQgY2xhc3MgZm9yIGNvbmRpdGlvbmFsIHZpc2liaWxpdHkgLSBrZWVwIHNldHRpbmcgaW4gZ3JvdXBcblx0XHRcdFx0c2V0dGluZy5zZXR0aW5nRWwuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLXZpc2libGVcIiwgc2V0dGluZ3MuZW5hYmxlT3BlbkNvbmZpZ0ZpbGVDb21tYW5kKTtcblx0XHRcdFx0c2V0dGluZy5zZXR0aW5nRWwuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLWhpZGRlblwiLCAhc2V0dGluZ3MuZW5hYmxlT3BlbkNvbmZpZ0ZpbGVDb21tYW5kKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRkZXZlbG9wZXJHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRcdHNldHRpbmdcblx0XHRcdFx0XHQuc2V0TmFtZShcIlNob3cgb3BlbiBjb25maWcgcmliYm9uIGljb25cIilcblx0XHRcdFx0XHQuc2V0RGVzYyhcIkFkZCBhIHJpYmJvbiBpY29uIHRvIGxhdW5jaCB0aGUgY29uZmlnIGZpbGUgY29tbWFuZC5cIilcblx0XHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuY29uZmlnUmliYm9uVG9nZ2xlQ29tcG9uZW50ID0gdG9nZ2xlO1xuXHRcdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZShzZXR0aW5ncy5lbmFibGVDb25maWdSaWJib25JY29uKVxuXHRcdFx0XHRcdFx0XHQuc2V0RGlzYWJsZWQoIXNldHRpbmdzLmVuYWJsZU9wZW5Db25maWdGaWxlQ29tbWFuZClcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYm9vbGVhbikgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBzZXR0aW5ncyBkaXJlY3RseSBvbiBwbHVnaW4gaW5zdGFuY2Vcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb25maWdSaWJib25JY29uID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuZW5hYmxlQ29uZmlnUmliYm9uSWNvbiA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSBzZXR0aW5ncyBhcmUgc2F2ZWQsIHRoZW4gcmUtcmVnaXN0ZXJcblx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5yZWdpc3RlclJpYmJvbkljb25zKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVyUmliYm9uSWNvbnMoKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9LCA1MCk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHQvLyBBZGQgY2xhc3MgZm9yIGNvbmRpdGlvbmFsIHZpc2liaWxpdHkgLSBrZWVwIHNldHRpbmcgaW4gZ3JvdXBcblx0XHRcdFx0c2V0dGluZy5zZXR0aW5nRWwuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLXZpc2libGVcIiwgc2V0dGluZ3MuZW5hYmxlT3BlbkNvbmZpZ0ZpbGVDb21tYW5kKTtcblx0XHRcdFx0c2V0dGluZy5zZXR0aW5nRWwuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLWhpZGRlblwiLCAhc2V0dGluZ3MuZW5hYmxlT3BlbkNvbmZpZ0ZpbGVDb21tYW5kKTtcblx0XHRcdFx0Ly8gU3RvcmUgcmVmZXJlbmNlIGZvciB1cGRhdGluZyBkaXNhYmxlZCBzdGF0ZVxuXHRcdFx0XHR0aGlzLmNvbmZpZ1JpYmJvblRvZ2dsZSA9IHNldHRpbmc7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gSGVscCBidXR0b24gcmVwbGFjZW1lbnQgdG9nZ2xlIChwYXJ0IG9mIGRldmVsb3BlciBjb21tYW5kcyBncm91cClcblx0XHRcdGRldmVsb3Blckdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdC5zZXROYW1lKCdTd2FwIG91dCBoZWxwIGJ1dHRvbiBmb3IgY3VzdG9tIGFjdGlvbicpXG5cdFx0XHRcdFx0LnNldERlc2MoJ1JlcGxhY2UgdGhlIGhlbHAgYnV0dG9uIGluIHRoZSB2YXVsdCBwcm9maWxlIGFyZWEgd2l0aCBhIGN1c3RvbSBhY3Rpb24uJylcblx0XHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQ/LmVuYWJsZWQgPz8gZmFsc2UpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmICghc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50ID0ge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZW5hYmxlZDogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdFx0XHRjb21tYW5kSWQ6ICdlZGl0LWFzdHJvLWNvbmZpZycsXG5cdFx0XHRcdFx0XHRcdFx0XHRpY29uSWQ6ICd3cmVuY2gnLFxuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50LmVuYWJsZWQgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdC8vIFRyaWdnZXIgaGVscCBidXR0b24gcmVwbGFjZW1lbnQgdXBkYXRlIChpdCB3aWxsIHJlbG9hZCBzZXR0aW5ncylcblx0XHRcdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnVwZGF0ZUhlbHBCdXR0b24pIHtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi51cGRhdGVIZWxwQnV0dG9uKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIHRvIHNob3cvaGlkZSBvcHRpb25zXG5cdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xuXHRcdFx0XHRcdFx0fSkpO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIFNob3cgY29tbWFuZCBhbmQgaWNvbiBwaWNrZXJzIG9ubHkgaWYgZW5hYmxlZCAocGFydCBvZiBkZXZlbG9wZXIgY29tbWFuZHMgZ3JvdXApXG5cdFx0XHRpZiAoc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XG5cdFx0XHRcdC8vIENvbW1hbmQgcGlja2VyXG5cdFx0XHRcdGNvbnN0IGNvbW1hbmROYW1lID0gdGhpcy5nZXRDb21tYW5kTmFtZShzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuY29tbWFuZElkKTtcblx0XHRcdFx0ZGV2ZWxvcGVyR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRcdHNldHRpbmdcblx0XHRcdFx0XHRcdC5zZXROYW1lKCdDb21tYW5kJylcblx0XHRcdFx0XHRcdC5zZXREZXNjKCdTZWxlY3QgdGhlIGNvbW1hbmQgdG8gZXhlY3V0ZSB3aGVuIHRoZSBidXR0b24gaXMgY2xpY2tlZC4nKVxuXHRcdFx0XHRcdFx0LmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG5cdFx0XHRcdFx0XHRcdC5zZXRCdXR0b25UZXh0KGNvbW1hbmROYW1lIHx8ICdTZWxlY3QgY29tbWFuZCcpXG5cdFx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBDb21tYW5kUGlja2VyTW9kYWwodGhpcy5hcHAsIChjb21tYW5kSWQpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQgPSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbmFibGVkOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29tbWFuZElkOiAnZWRpdC1hc3Ryby1jb25maWcnLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWNvbklkOiAnd3JlbmNoJyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudC5jb21tYW5kSWQgPSBjb21tYW5kSWQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBUcmlnZ2VyIGhlbHAgYnV0dG9uIHJlcGxhY2VtZW50IHVwZGF0ZSBpbW1lZGlhdGVseSAoaXQgd2lsbCByZWxvYWQgc2V0dGluZ3MpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi51cGRhdGVIZWxwQnV0dG9uKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4udXBkYXRlSGVscEJ1dHRvbigpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciB0byBzaG93IHVwZGF0ZWQgY29tbWFuZCBuYW1lXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0XHRcdFx0XHRcdH0pKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Ly8gSWNvbiBwaWNrZXJcblx0XHRcdFx0Y29uc3QgaWNvbk5hbWUgPSB0aGlzLmdldEljb25OYW1lKHNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudC5pY29uSWQpO1xuXHRcdFx0XHRkZXZlbG9wZXJHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdFx0LnNldE5hbWUoJ0ljb24nKVxuXHRcdFx0XHRcdFx0LnNldERlc2MoJ1NlbGVjdCB0aGUgaWNvbiB0byBkaXNwbGF5IG9uIHRoZSBidXR0b24uJylcblx0XHRcdFx0XHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuXHRcdFx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChpY29uTmFtZSB8fCAnU2VsZWN0IGljb24uLi4nKVxuXHRcdFx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMuYXBwLCAoaWNvbklkKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICghc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50ID0ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZW5hYmxlZDogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbW1hbmRJZDogJ2VkaXQtYXN0cm8tY29uZmlnJyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGljb25JZDogJ3dyZW5jaCcsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuaWNvbklkID0gaWNvbklkO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVHJpZ2dlciBoZWxwIGJ1dHRvbiByZXBsYWNlbWVudCB1cGRhdGUgaW1tZWRpYXRlbHkgKGl0IHdpbGwgcmVsb2FkIHNldHRpbmdzKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4udXBkYXRlSGVscEJ1dHRvbikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnVwZGF0ZUhlbHBCdXR0b24oKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIgdG8gc2hvdyB1cGRhdGVkIGljb24gbmFtZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0XHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xuXHRcdFx0XHRcdFx0XHR9KSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXMudXBkYXRlQ29weUhlYWRpbmdGaWVsZHMoKTtcblx0XHQvLyBPbmx5IHVwZGF0ZSB0ZXJtaW5hbC9jb25maWcgZmllbGRzIGlmIG5vdCBvbiBtb2JpbGVcblx0XHRpZiAoIVBsYXRmb3JtLmlzTW9iaWxlKSB7XG5cdFx0XHR0aGlzLnVwZGF0ZVRlcm1pbmFsQ29tbWFuZEZpZWxkcygpO1xuXHRcdFx0dGhpcy51cGRhdGVDb25maWdDb21tYW5kRmllbGRzKCk7XG5cdFx0fVxuXHR9XG5cblxuXHR1cGRhdGVDb3B5SGVhZGluZ0ZpZWxkcygpIHtcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuXHRcdGNvbnN0IGlzVmlzaWJsZSA9IHNldHRpbmdzLmVuYWJsZUNvcHlIZWFkaW5nTGluaztcblx0XHRcblx0XHQvLyBVcGRhdGUgdGhlIFwiRGVmYXVsdCBoZWFkaW5nIGxpbmsgZm9ybWF0XCIgc2V0dGluZyBlbGVtZW50IHZpc2liaWxpdHlcblx0XHRjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGFpbmVyRWw7XG5cdFx0Y29uc3QgYWxsU2V0dGluZ3MgPSBjb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcuc2V0dGluZy1pdGVtJyk7XG5cdFx0YWxsU2V0dGluZ3MuZm9yRWFjaCgoc2V0dGluZ0VsKSA9PiB7XG5cdFx0XHRjb25zdCBuYW1lRWwgPSBzZXR0aW5nRWwucXVlcnlTZWxlY3RvcignLnNldHRpbmctaXRlbS1uYW1lJyk7XG5cdFx0XHRpZiAobmFtZUVsICYmIG5hbWVFbC50ZXh0Q29udGVudD8udHJpbSgpID09PSBcIkRlZmF1bHQgaGVhZGluZyBsaW5rIGZvcm1hdFwiKSB7XG5cdFx0XHRcdHNldHRpbmdFbC5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItdmlzaWJsZVwiLCBpc1Zpc2libGUpO1xuXHRcdFx0XHRzZXR0aW5nRWwuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLWhpZGRlblwiLCAhaXNWaXNpYmxlKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHVwZGF0ZVRlcm1pbmFsQ29tbWFuZEZpZWxkcygpIHtcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuXHRcdGNvbnN0IGlzVmlzaWJsZSA9IHNldHRpbmdzLmVuYWJsZU9wZW5UZXJtaW5hbENvbW1hbmQ7XG5cdFx0XG5cdFx0Ly8gVXBkYXRlIGNvbnRhaW5lciBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuXHRcdGlmICh0aGlzLnRlcm1pbmFsQ29tbWFuZENvbnRhaW5lcikge1xuXHRcdFx0dGhpcy50ZXJtaW5hbENvbW1hbmRDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLXZpc2libGVcIiwgaXNWaXNpYmxlKTtcblx0XHRcdHRoaXMudGVybWluYWxDb21tYW5kQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWNvbnRhaW5lci1oaWRkZW5cIiwgIWlzVmlzaWJsZSk7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIFVwZGF0ZSBpbmRpdmlkdWFsIHNldHRpbmcgZWxlbWVudHMgdGhhdCBhcmUgaW4gdGhlIGdyb3VwXG5cdFx0Ly8gRmluZCBzZXR0aW5ncyBieSB0aGVpciBuYW1lIHRleHQgY29udGVudFxuXHRcdGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250YWluZXJFbDtcblx0XHRjb25zdCBhbGxTZXR0aW5ncyA9IGNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZXR0aW5nLWl0ZW0nKTtcblx0XHRhbGxTZXR0aW5ncy5mb3JFYWNoKChzZXR0aW5nRWwpID0+IHtcblx0XHRcdGNvbnN0IG5hbWVFbCA9IHNldHRpbmdFbC5xdWVyeVNlbGVjdG9yKCcuc2V0dGluZy1pdGVtLW5hbWUnKTtcblx0XHRcdGlmIChuYW1lRWwpIHtcblx0XHRcdFx0Y29uc3QgbmFtZSA9IG5hbWVFbC50ZXh0Q29udGVudD8udHJpbSgpO1xuXHRcdFx0XHRpZiAobmFtZSA9PT0gXCJQcm9qZWN0IHJvb3QgZGlyZWN0b3J5IHBhdGhcIiB8fCBuYW1lID09PSBcIlNob3cgb3BlbiB0ZXJtaW5hbCByaWJib24gaWNvblwiKSB7XG5cdFx0XHRcdFx0c2V0dGluZ0VsLmNsYXNzTGlzdC50b2dnbGUoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWNvbnRhaW5lci12aXNpYmxlXCIsIGlzVmlzaWJsZSk7XG5cdFx0XHRcdFx0c2V0dGluZ0VsLmNsYXNzTGlzdC50b2dnbGUoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWNvbnRhaW5lci1oaWRkZW5cIiwgIWlzVmlzaWJsZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0XHRcblx0XHQvLyBVcGRhdGUgcmliYm9uIHRvZ2dsZSBkaXNhYmxlZCBzdGF0ZSB1c2luZyB0aGUgdG9nZ2xlIGNvbXBvbmVudFxuXHRcdGlmICh0aGlzLnRlcm1pbmFsUmliYm9uVG9nZ2xlQ29tcG9uZW50KSB7XG5cdFx0XHR0aGlzLnRlcm1pbmFsUmliYm9uVG9nZ2xlQ29tcG9uZW50LnNldERpc2FibGVkKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVPcGVuVGVybWluYWxDb21tYW5kKTtcblx0XHR9XG5cdH1cblxuXHR1cGRhdGVDb25maWdDb21tYW5kRmllbGRzKCkge1xuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG5cdFx0Y29uc3QgaXNWaXNpYmxlID0gc2V0dGluZ3MuZW5hYmxlT3BlbkNvbmZpZ0ZpbGVDb21tYW5kO1xuXHRcdFxuXHRcdC8vIFVwZGF0ZSBjb250YWluZXIgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcblx0XHRpZiAodGhpcy5jb25maWdDb21tYW5kQ29udGFpbmVyKSB7XG5cdFx0XHR0aGlzLmNvbmZpZ0NvbW1hbmRDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLXZpc2libGVcIiwgaXNWaXNpYmxlKTtcblx0XHRcdHRoaXMuY29uZmlnQ29tbWFuZENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItaGlkZGVuXCIsICFpc1Zpc2libGUpO1xuXHRcdH1cblx0XHRcblx0XHQvLyBVcGRhdGUgaW5kaXZpZHVhbCBzZXR0aW5nIGVsZW1lbnRzIHRoYXQgYXJlIGluIHRoZSBncm91cFxuXHRcdC8vIEZpbmQgc2V0dGluZ3MgYnkgdGhlaXIgbmFtZSB0ZXh0IGNvbnRlbnRcblx0XHRjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGFpbmVyRWw7XG5cdFx0Y29uc3QgYWxsU2V0dGluZ3MgPSBjb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcuc2V0dGluZy1pdGVtJyk7XG5cdFx0YWxsU2V0dGluZ3MuZm9yRWFjaCgoc2V0dGluZ0VsKSA9PiB7XG5cdFx0XHRjb25zdCBuYW1lRWwgPSBzZXR0aW5nRWwucXVlcnlTZWxlY3RvcignLnNldHRpbmctaXRlbS1uYW1lJyk7XG5cdFx0XHRpZiAobmFtZUVsKSB7XG5cdFx0XHRcdGNvbnN0IG5hbWUgPSBuYW1lRWwudGV4dENvbnRlbnQ/LnRyaW0oKTtcblx0XHRcdFx0aWYgKG5hbWUgPT09IFwiQ29uZmlnIGZpbGUgcGF0aFwiIHx8IG5hbWUgPT09IFwiU2hvdyBvcGVuIGNvbmZpZyByaWJib24gaWNvblwiKSB7XG5cdFx0XHRcdFx0c2V0dGluZ0VsLmNsYXNzTGlzdC50b2dnbGUoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWNvbnRhaW5lci12aXNpYmxlXCIsIGlzVmlzaWJsZSk7XG5cdFx0XHRcdFx0c2V0dGluZ0VsLmNsYXNzTGlzdC50b2dnbGUoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWNvbnRhaW5lci1oaWRkZW5cIiwgIWlzVmlzaWJsZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0XHRcblx0XHQvLyBVcGRhdGUgcmliYm9uIHRvZ2dsZSBkaXNhYmxlZCBzdGF0ZSB1c2luZyB0aGUgdG9nZ2xlIGNvbXBvbmVudFxuXHRcdGlmICh0aGlzLmNvbmZpZ1JpYmJvblRvZ2dsZUNvbXBvbmVudCkge1xuXHRcdFx0dGhpcy5jb25maWdSaWJib25Ub2dnbGVDb21wb25lbnQuc2V0RGlzYWJsZWQoIXRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZU9wZW5Db25maWdGaWxlQ29tbWFuZCk7XG5cdFx0fVxuXHR9XG5cblx0Y2hlY2tGb3JGb2xkZXJDb25mbGljdHMoKSB7XG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcblx0XHRjb25zdCBibGFua0ZvbGRlcnM6IHN0cmluZ1tdID0gW107XG5cdFx0Y29uc3QgZm9sZGVyQ29uZmxpY3RzOiB7IFtmb2xkZXI6IHN0cmluZ106IHN0cmluZ1tdIH0gPSB7fTtcblx0XHRcblx0XHQvLyBDaGVjayBjb250ZW50IHR5cGVzXG5cdFx0Y29uc3QgY29udGVudFR5cGVzID0gc2V0dGluZ3MuY29udGVudFR5cGVzIHx8IFtdO1xuXHRcdGZvciAoY29uc3QgY29udGVudFR5cGUgb2YgY29udGVudFR5cGVzKSB7XG5cdFx0XHRpZiAoY29udGVudFR5cGUuZW5hYmxlZCkge1xuXHRcdFx0XHRpZiAoIWNvbnRlbnRUeXBlLmZvbGRlciB8fCBjb250ZW50VHlwZS5mb2xkZXIudHJpbSgpID09PSBcIlwiKSB7XG5cdFx0XHRcdFx0YmxhbmtGb2xkZXJzLnB1c2goY29udGVudFR5cGUubmFtZSB8fCBcIkNvbnRlbnRcIik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWYgKCFmb2xkZXJDb25mbGljdHNbY29udGVudFR5cGUuZm9sZGVyXSkge1xuXHRcdFx0XHRcdFx0Zm9sZGVyQ29uZmxpY3RzW2NvbnRlbnRUeXBlLmZvbGRlcl0gPSBbXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Zm9sZGVyQ29uZmxpY3RzW2NvbnRlbnRUeXBlLmZvbGRlcl0ucHVzaChjb250ZW50VHlwZS5uYW1lIHx8IFwiQ29udGVudFwiKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHQvLyBDaGVjayBmb3IgY29uZmxpY3RzXG5cdFx0Ly8gV2FybmluZyBib3ggcmVtb3ZlZCAtIGNvbmZsaWN0cyBhcmUgc3RpbGwgZGV0ZWN0ZWQgYXQgcnVudGltZVxuXHR9XG5cblx0cHJpdmF0ZSBhZGRDdXN0b21Db250ZW50VHlwZSgpIHtcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuXHRcdGNvbnN0IGNvbnRlbnRUeXBlcyA9IHNldHRpbmdzLmNvbnRlbnRUeXBlcyB8fCBbXTtcblx0XHRjb25zdCBuZXdUeXBlOiBDb250ZW50VHlwZSA9IHtcblx0XHRcdGlkOiBgY29udGVudC0ke0RhdGUubm93KCl9YCxcblx0XHRcdG5hbWU6IGBDb250ZW50ICR7Y29udGVudFR5cGVzLmxlbmd0aCArIDF9YCxcblx0XHRcdGZvbGRlcjogXCJcIixcblx0XHRcdGxpbmtCYXNlUGF0aDogXCJcIixcblx0XHRcdHRlbXBsYXRlOiAnLS0tXFxudGl0bGU6IFwie3t0aXRsZX19XCJcXG5kYXRlOiB7e2RhdGV9fVxcbi0tLVxcbicsXG5cdFx0XHRlbmFibGVkOiB0cnVlLFxuXHRcdFx0Y3JlYXRpb25Nb2RlOiBcImZpbGVcIixcblx0XHRcdGluZGV4RmlsZU5hbWU6IFwiXCIsXG5cdFx0XHRpZ25vcmVTdWJmb2xkZXJzOiBmYWxzZSxcblx0XHRcdGVuYWJsZVVuZGVyc2NvcmVQcmVmaXg6IGZhbHNlLFxuXHRcdFx0dXNlTWR4RXh0ZW5zaW9uOiBmYWxzZSxcblx0XHR9O1xuXHRcdGNvbnRlbnRUeXBlcy5wdXNoKG5ld1R5cGUpO1xuXHRcdHNldHRpbmdzLmNvbnRlbnRUeXBlcyA9IGNvbnRlbnRUeXBlcztcblx0XHR2b2lkIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdHRoaXMucmVuZGVyQ3VzdG9tQ29udGVudFR5cGVzKCk7XG5cdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJDcmVhdGVFdmVudCgpO1xuXHRcdC8vIFJlLXJlZ2lzdGVyIGNvbnRlbnQgdHlwZSBjb21tYW5kcyB0byBpbmNsdWRlIHRoZSBuZXcgdHlwZVxuXHRcdHJlZ2lzdGVyQ29udGVudFR5cGVDb21tYW5kcyh0aGlzLnBsdWdpbiBhcyB1bmtub3duIGFzIFBsdWdpbiwgc2V0dGluZ3MpO1xuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJDdXN0b21Db250ZW50VHlwZXMoKSB7XG5cdFx0aWYgKCF0aGlzLmN1c3RvbUNvbnRlbnRUeXBlc0NvbnRhaW5lcikgcmV0dXJuO1xuXHRcdFxuXHRcdHRoaXMuY3VzdG9tQ29udGVudFR5cGVzQ29udGFpbmVyLmVtcHR5KCk7XG5cdFx0XG5cdFx0Ly8gQWx3YXlzIHJlYWQgZnJlc2ggc2V0dGluZ3MgZnJvbSBwbHVnaW4gdG8gZW5zdXJlIHdlIGhhdmUgbGF0ZXN0IGRhdGFcblx0XHQvLyBUaGlzIGlzIGNyaXRpY2FsIGFmdGVyIG1pZ3JhdGlvblxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG5cdFx0Y29uc3QgY29udGVudFR5cGVzID0gc2V0dGluZ3MuY29udGVudFR5cGVzIHx8IFtdO1xuXHRcdGNvbnRlbnRUeXBlcy5mb3JFYWNoKChjdXN0b21UeXBlOiBDb250ZW50VHlwZSwgaW5kZXg6IG51bWJlcikgPT4ge1xuXHRcdFx0aWYgKCF0aGlzLmN1c3RvbUNvbnRlbnRUeXBlc0NvbnRhaW5lcikgcmV0dXJuO1xuXHRcdFx0Y29uc3QgdHlwZUNvbnRhaW5lciA9IHRoaXMuY3VzdG9tQ29udGVudFR5cGVzQ29udGFpbmVyLmNyZWF0ZURpdih7IFxuXHRcdFx0XHRjbHM6IFwiY3VzdG9tLWNvbnRlbnQtdHlwZS1pdGVtXCIsXG5cdFx0XHRcdGF0dHI6IHsgXCJkYXRhLXR5cGUtaWRcIjogY3VzdG9tVHlwZS5pZCB9XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gSGVhZGVyIHdpdGggY29udHJvbHNcblx0XHRcdGNvbnN0IGhlYWRlciA9IHR5cGVDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcImN1c3RvbS1jb250ZW50LXR5cGUtaGVhZGVyXCIgfSk7XG5cdFx0XHRoZWFkZXIuY2xhc3NMaXN0LmFkZChcImFzdHJvLWNvbXBvc2VyLWN1c3RvbS10eXBlLWhlYWRlclwiKTtcblx0XHRcdFxuXHRcdFx0Ly8gTGVmdCBzaWRlIC0gY29sbGFwc2UvZXhwYW5kIGJ1dHRvblxuXHRcdFx0Y29uc3QgY29sbGFwc2VCdXR0b24gPSBoZWFkZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyBcblx0XHRcdFx0Y2xzOiBcImFzdHJvLWNvbXBvc2VyLWNvbGxhcHNlLWJ1dHRvblwiLFxuXHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkNvbGxhcHNlL2V4cGFuZFwiIH1cblx0XHRcdH0pO1xuXHRcdFx0Y29uc3QgaXNDb2xsYXBzZWQgPSBjdXN0b21UeXBlLmNvbGxhcHNlZCA/PyBmYWxzZTtcblx0XHRcdC8vIEFsd2F5cyB1c2UgY2hldnJvbi1kb3duLCByb3RhdGUgaXQgd2hlbiBjb2xsYXBzZWQgdG8gcG9pbnQgcmlnaHRcblx0XHRcdHNldEljb24oY29sbGFwc2VCdXR0b24sIFwiY2hldnJvbi1kb3duXCIpO1xuXHRcdFx0aWYgKGlzQ29sbGFwc2VkKSB7XG5cdFx0XHRcdGNvbGxhcHNlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJpcy1jb2xsYXBzZWRcIik7XG5cdFx0XHR9XG5cdFx0XHRjb2xsYXBzZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuXHRcdFx0XHR2b2lkIHRoaXMudG9nZ2xlQ29udGVudFR5cGVDb2xsYXBzZShjdXN0b21UeXBlLmlkKTtcblx0XHRcdFx0Ly8gVXBkYXRlIGNsYXNzIGFmdGVyIHRvZ2dsZSAoaWNvbiBzdGF5cyB0aGUgc2FtZSwganVzdCByb3RhdGVzKVxuXHRcdFx0XHRjb25zdCB1cGRhdGVkVHlwZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnRlbnRUeXBlcy5maW5kKChjdDogQ29udGVudFR5cGUpID0+IGN0LmlkID09PSBjdXN0b21UeXBlLmlkKTtcblx0XHRcdFx0aWYgKHVwZGF0ZWRUeXBlKSB7XG5cdFx0XHRcdFx0aWYgKHVwZGF0ZWRUeXBlLmNvbGxhcHNlZCkge1xuXHRcdFx0XHRcdFx0Y29sbGFwc2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImlzLWNvbGxhcHNlZFwiKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29sbGFwc2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImlzLWNvbGxhcHNlZFwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBNaWRkbGUgbGVmdCAtIGNvbnRlbnQgdHlwZSBuYW1lXG5cdFx0XHRjb25zdCBoZWFkZXJOYW1lID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogXCJhc3Ryby1jb21wb3Nlci1oZWFkZXItbmFtZVwiIH0pO1xuXHRcdFx0aGVhZGVyTmFtZS5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGN1c3RvbVR5cGUubmFtZSB8fCBgQ29udGVudCAke2luZGV4ICsgMX1gLCBjbHM6IFwic2V0dGluZy1pdGVtLW5hbWVcIiB9KTtcblx0XHRcdFxuXHRcdFx0Ly8gTWlkZGxlIHJpZ2h0IC0gdXAvZG93biBidXR0b25zIChzaWRlLWJ5LXNpZGUpXG5cdFx0XHRjb25zdCByZW9yZGVyQ29udGFpbmVyID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogXCJhc3Ryby1jb21wb3Nlci1yZW9yZGVyLWJ1dHRvbnNcIiB9KTtcblx0XHRcdGNvbnN0IHVwQnV0dG9uID0gcmVvcmRlckNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogXCJhc3Ryby1jb21wb3Nlci1yZW9yZGVyLWJ1dHRvblwiLFxuXHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIk1vdmUgdXBcIiB9XG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24odXBCdXR0b24sIFwiY2hldnJvbi11cFwiKTtcblx0XHRcdHVwQnV0dG9uLmRpc2FibGVkID0gaW5kZXggPT09IDA7XG5cdFx0XHR1cEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuXHRcdFx0XHR2b2lkIHRoaXMubW92ZUNvbnRlbnRUeXBlVXAoY3VzdG9tVHlwZS5pZCk7XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0Y29uc3QgZG93bkJ1dHRvbiA9IHJlb3JkZXJDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRjbHM6IFwiYXN0cm8tY29tcG9zZXItcmVvcmRlci1idXR0b25cIixcblx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJNb3ZlIGRvd25cIiB9XG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24oZG93bkJ1dHRvbiwgXCJjaGV2cm9uLWRvd25cIik7XG5cdFx0XHRkb3duQnV0dG9uLmRpc2FibGVkID0gaW5kZXggPT09IGNvbnRlbnRUeXBlcy5sZW5ndGggLSAxO1xuXHRcdFx0ZG93bkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuXHRcdFx0XHR2b2lkIHRoaXMubW92ZUNvbnRlbnRUeXBlRG93bihjdXN0b21UeXBlLmlkKTtcblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBSaWdodCBzaWRlIC0gdG9nZ2xlXG5cdFx0XHRjb25zdCB0b2dnbGVDb250YWluZXIgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiBcImNoZWNrYm94LWNvbnRhaW5lclwiIH0pO1xuXHRcdFx0aWYgKGN1c3RvbVR5cGUuZW5hYmxlZCkge1xuXHRcdFx0XHR0b2dnbGVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImlzLWVuYWJsZWRcIik7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGNvbnN0IHRvZ2dsZSA9IHRvZ2dsZUNvbnRhaW5lci5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJjaGVja2JveFwiLCBjbHM6IFwiY2hlY2tib3gtaW5wdXRcIiB9KTtcblx0XHRcdHRvZ2dsZS5jaGVja2VkID0gY3VzdG9tVHlwZS5lbmFibGVkO1xuXHRcdFx0XG5cdFx0XHQvLyBBZGQgY2xpY2sgZXZlbnQgdG8gdGhlIGNvbnRhaW5lciBhcyB3ZWxsXG5cdFx0XHR0b2dnbGVDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG5cdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0Y29uc3QgbmV3VmFsdWUgPSAhY3VzdG9tVHlwZS5lbmFibGVkO1xuXHRcdFx0XHRcdGN1c3RvbVR5cGUuZW5hYmxlZCA9IG5ld1ZhbHVlO1xuXHRcdFx0XHRcdHRvZ2dsZS5jaGVja2VkID0gbmV3VmFsdWU7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJDcmVhdGVFdmVudCgpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIFVwZGF0ZSB0aGUgY29udGFpbmVyIGNsYXNzIGZvciB2aXN1YWwgZmVlZGJhY2tcblx0XHRcdFx0XHRpZiAobmV3VmFsdWUpIHtcblx0XHRcdFx0XHRcdHRvZ2dsZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiaXMtZW5hYmxlZFwiKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dG9nZ2xlQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1lbmFibGVkXCIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBVcGRhdGUgdmlzaWJpbGl0eVxuXHRcdFx0XHRcdHRoaXMudXBkYXRlQ3VzdG9tQ29udGVudFR5cGVWaXNpYmlsaXR5KGN1c3RvbVR5cGUuaWQsIG5ld1ZhbHVlKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBSZS1yZWdpc3RlciBjb250ZW50IHR5cGUgY29tbWFuZHMgdG8gcmVmbGVjdCBlbmFibGVkL2Rpc2FibGVkIHN0YXRlXG5cdFx0XHRcdFx0cmVnaXN0ZXJDb250ZW50VHlwZUNvbW1hbmRzKHRoaXMucGx1Z2luIGFzIHVua25vd24gYXMgUGx1Z2luLCB0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gQ29uZmxpY3QgY2hlY2tpbmcgcmVtb3ZlZCBmcm9tIHNldHRpbmdzIFVJXG5cdFx0XHRcdH0pKCk7XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0Ly8gQWxzbyBhZGQgY2hhbmdlIGV2ZW50IGFzIGJhY2t1cFxuXHRcdFx0dG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKGUpID0+IHtcblx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQ7XG5cdFx0XHRcdFx0Y3VzdG9tVHlwZS5lbmFibGVkID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJDcmVhdGVFdmVudCgpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIFVwZGF0ZSB0aGUgY29udGFpbmVyIGNsYXNzIGZvciB2aXN1YWwgZmVlZGJhY2tcblx0XHRcdFx0XHRpZiAodmFsdWUpIHtcblx0XHRcdFx0XHRcdHRvZ2dsZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiaXMtZW5hYmxlZFwiKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dG9nZ2xlQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1lbmFibGVkXCIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBVcGRhdGUgdmlzaWJpbGl0eVxuXHRcdFx0XHRcdHRoaXMudXBkYXRlQ3VzdG9tQ29udGVudFR5cGVWaXNpYmlsaXR5KGN1c3RvbVR5cGUuaWQsIHZhbHVlKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBSZS1yZWdpc3RlciBjb250ZW50IHR5cGUgY29tbWFuZHMgdG8gcmVmbGVjdCBlbmFibGVkL2Rpc2FibGVkIHN0YXRlXG5cdFx0XHRcdFx0cmVnaXN0ZXJDb250ZW50VHlwZUNvbW1hbmRzKHRoaXMucGx1Z2luIGFzIHVua25vd24gYXMgUGx1Z2luLCB0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XG5cdFx0XHRcdH0pKCk7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gU2V0dGluZ3MgY29udGFpbmVyIHRoYXQgY2FuIGJlIGNvbGxhcHNlZFxuXHRcdFx0Y29uc3Qgc2V0dGluZ3NDb250YWluZXIgPSB0eXBlQ29udGFpbmVyLmNyZWF0ZURpdih7IFxuXHRcdFx0XHRjbHM6IFwiY3VzdG9tLWNvbnRlbnQtdHlwZS1zZXR0aW5nc1wiLFxuXHRcdFx0XHRhdHRyOiB7IFwiZGF0YS10eXBlLWlkXCI6IGN1c3RvbVR5cGUuaWQgfVxuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdC8vIFNldCBpbml0aWFsIHZpc2liaWxpdHkgc3RhdGUgYmFzZWQgb24gZW5hYmxlZCBhbmQgY29sbGFwc2VkIHN0YXRlXG5cdFx0XHRjb25zdCBpbml0aWFsbHlDb2xsYXBzZWQgPSBjdXN0b21UeXBlLmNvbGxhcHNlZCA/PyBmYWxzZTtcblx0XHRcdGNvbnN0IGluaXRpYWxseVZpc2libGUgPSBjdXN0b21UeXBlLmVuYWJsZWQgJiYgIWluaXRpYWxseUNvbGxhcHNlZDtcblx0XHRcdGlmIChpbml0aWFsbHlWaXNpYmxlKSB7XG5cdFx0XHRcdHNldHRpbmdzQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWNvbnRhaW5lci12aXNpYmxlXCIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c2V0dGluZ3NDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLWhpZGRlblwiKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29udGVudCB0eXBlIG5hbWVcblx0XHRcdGNvbnN0IG5hbWVDb250YWluZXIgPSBzZXR0aW5nc0NvbnRhaW5lci5jcmVhdGVEaXYoKTtcblx0XHRcdG5ldyBTZXR0aW5nKG5hbWVDb250YWluZXIpXG5cdFx0XHRcdC5zZXROYW1lKFwiQ29udGVudCB0eXBlIG5hbWVcIilcblx0XHRcdFx0LnNldERlc2MoXCJEaXNwbGF5IG5hbWUgZm9yIHRoaXMgY29udGVudCB0eXBlIChlLmcuLCAncHJvamVjdHMnLCAnbm90ZXMnLCAndHV0b3JpYWxzJylcIilcblx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcblx0XHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJFbnRlciBjb250ZW50IHR5cGUgbmFtZVwiKVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKGN1c3RvbVR5cGUubmFtZSlcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRcdFx0XHRjdXN0b21UeXBlLm5hbWUgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdC8vIFJlLXJlZ2lzdGVyIGNvbnRlbnQgdHlwZSBjb21tYW5kcyB0byB1cGRhdGUgY29tbWFuZCBuYW1lXG5cdFx0XHRcdFx0XHRcdHJlZ2lzdGVyQ29udGVudFR5cGVDb21tYW5kcyh0aGlzLnBsdWdpbiBhcyB1bmtub3duIGFzIFBsdWdpbiwgdGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHQvLyBGb2xkZXIgbG9jYXRpb25cblx0XHRcdGNvbnN0IGZvbGRlckNvbnRhaW5lciA9IHNldHRpbmdzQ29udGFpbmVyLmNyZWF0ZURpdigpO1xuXHRcdFx0Y29uc3QgZm9sZGVyU2V0dGluZyA9IG5ldyBTZXR0aW5nKGZvbGRlckNvbnRhaW5lcilcblx0XHRcdFx0LnNldE5hbWUoXCJGb2xkZXIgbG9jYXRpb25cIilcblx0XHRcdFx0LnNldERlc2MoXCJGb2xkZXIgcGF0aCB3aGVyZSB0aGlzIGNvbnRlbnQgdHlwZSB3aWxsIGJlIGNyZWF0ZWQuIExlYXZlIGJsYW5rIHRvIHVzZSB0aGUgdmF1bHQgZm9sZGVyLiBTdXBwb3J0cyB3aWxkY2FyZHMgbGlrZSBkaXJlY3RvcnkvKiBvciBkaXJlY3RvcnkvKi8qIHRvIG1hdGNoIHNwZWNpZmljIGZvbGRlciBkZXB0aHMuXCIpXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG5cdFx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiRW50ZXIgZm9sZGVyIHBhdGggKGUuZy4sICdkb2NzJywgJ2RvY3MvKicsICdkb2NzLyovKicpIG9yIGxlYXZlIGJsYW5rIGZvciB2YXVsdCByb290XCIpXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoY3VzdG9tVHlwZS5mb2xkZXIpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0XHRcdFx0Y3VzdG9tVHlwZS5mb2xkZXIgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVyQ3JlYXRlRXZlbnQoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy51cGRhdGVDdXN0b21Db250ZW50VHlwZUlnbm9yZVN1YmZvbGRlcnNGaWVsZChjdXN0b21UeXBlLmlkKTtcblx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIGNvbmZsaWN0IHdhcm5pbmdzIGZvciBhbGwgY29udGVudCB0eXBlcyAoZm9sZGVyIGNoYW5nZSBtYXkgYWZmZWN0IG90aGVycylcblx0XHRcdFx0XHRcdFx0Y29uc3QgYWxsQ29udGVudFR5cGVzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGVudFR5cGVzIHx8IFtdO1xuXHRcdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGN0IG9mIGFsbENvbnRlbnRUeXBlcykge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMudXBkYXRlRm9sZGVyQ29uZmxpY3RXYXJuaW5nKGN0LmlkLCBudWxsKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBBZGQgY29uZmxpY3Qgd2FybmluZyBlbGVtZW50XG5cdFx0XHRmb2xkZXJDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcImFzdHJvLWNvbXBvc2VyLWNvbmZsaWN0LXdhcm5pbmcgaGlkZGVuXCIsIGF0dHI6IHsgXCJkYXRhLXR5cGUtaWRcIjogY3VzdG9tVHlwZS5pZCB9IH0pO1xuXHRcdFx0dGhpcy51cGRhdGVGb2xkZXJDb25mbGljdFdhcm5pbmcoY3VzdG9tVHlwZS5pZCwgZm9sZGVyU2V0dGluZyk7XG5cblx0XHRcdC8vIElnbm9yZSBzdWJmb2xkZXJzIChvbmx5IHNob3cgd2hlbiBmb2xkZXIgaXMgc2V0KVxuXHRcdFx0Y29uc3QgaWdub3JlU3ViZm9sZGVyc0NvbnRhaW5lciA9IHNldHRpbmdzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJjdXN0b20taWdub3JlLXN1YmZvbGRlcnMtZmllbGRcIiB9KTtcblx0XHRcdGlnbm9yZVN1YmZvbGRlcnNDb250YWluZXIuc2V0QXR0cmlidXRlKFwiZGF0YS10eXBlLWlkXCIsIGN1c3RvbVR5cGUuaWQpO1xuXHRcdFx0aWdub3JlU3ViZm9sZGVyc0NvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItdmlzaWJsZVwiLCAhIWN1c3RvbVR5cGUuZm9sZGVyKTtcblx0XHRcdGlnbm9yZVN1YmZvbGRlcnNDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLWhpZGRlblwiLCAhY3VzdG9tVHlwZS5mb2xkZXIpO1xuXHRcdFx0bmV3IFNldHRpbmcoaWdub3JlU3ViZm9sZGVyc0NvbnRhaW5lcilcblx0XHRcdFx0LnNldE5hbWUoXCJJZ25vcmUgc3ViZm9sZGVyc1wiKVxuXHRcdFx0XHQuc2V0RGVzYyhcIldoZW4gZW5hYmxlZCwgYXV0b21hdGlvbiB3aWxsIG9ubHkgdHJpZ2dlciBmb3IgbmV3IC5tZCBmaWxlcyB3aXRoaW4gdGhpcyBjb250ZW50IHR5cGUncyBmb2xkZXIgYW5kIG9uZSBsZXZlbCBkb3duIChmb3IgZm9sZGVyLWJhc2VkIGNvbnRlbnQpLiBGaWxlcyBpbiBkZWVwZXIgc3ViZm9sZGVycyB3aWxsIGJlIGlnbm9yZWQuXCIpXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cblx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShjdXN0b21UeXBlLmlnbm9yZVN1YmZvbGRlcnMgfHwgZmFsc2UpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGN1c3RvbVR5cGUuaWdub3JlU3ViZm9sZGVycyA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdCk7XG5cblx0XHRcdC8vIFVuZGVyc2NvcmUgcHJlZml4XG5cdFx0XHRjb25zdCB1bmRlcnNjb3JlUHJlZml4Q29udGFpbmVyID0gc2V0dGluZ3NDb250YWluZXIuY3JlYXRlRGl2KCk7XG5cdFx0XHRuZXcgU2V0dGluZyh1bmRlcnNjb3JlUHJlZml4Q29udGFpbmVyKVxuXHRcdFx0XHQuc2V0TmFtZShcIlVzZSB1bmRlcnNjb3JlIHByZWZpeCBmb3IgZHJhZnRzXCIpXG5cdFx0XHRcdC5zZXREZXNjKFwiQWRkIGFuIHVuZGVyc2NvcmUgcHJlZml4IChfY29udGVudC10aXRsZSkgdG8gbmV3IG5vdGVzIGJ5IGRlZmF1bHQgd2hlbiBlbmFibGVkLiBUaGlzIGhpZGVzIHRoZW0gZnJvbSBhc3Rybywgd2hpY2ggY2FuIGJlIGhlbHBmdWwgZm9yIGRyYWZ0c1wiKVxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoY3VzdG9tVHlwZS5lbmFibGVVbmRlcnNjb3JlUHJlZml4IHx8IGZhbHNlKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYm9vbGVhbikgPT4ge1xuXHRcdFx0XHRcdFx0XHRjdXN0b21UeXBlLmVuYWJsZVVuZGVyc2NvcmVQcmVmaXggPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXG5cdFx0XHQvLyBMaW5rIGJhc2UgcGF0aFxuXHRcdFx0Y29uc3QgbGlua0NvbnRhaW5lciA9IHNldHRpbmdzQ29udGFpbmVyLmNyZWF0ZURpdigpO1xuXHRcdFx0bmV3IFNldHRpbmcobGlua0NvbnRhaW5lcilcblx0XHRcdFx0LnNldE5hbWUoXCJMaW5rIGJhc2UgcGF0aFwiKVxuXHRcdFx0XHQuc2V0RGVzYyhcIkJhc2UgcGF0aCBmb3IgY29udmVydGVkIGxpbmtzIChlLmcuLCAnL3Byb2plY3RzLycsICcvbm90ZXMvdHV0b3JpYWxzLycsIGxlYXZlIGJsYW5rIGZvciByb290IC8pLlwiKVxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xuXHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIkVudGVyIGxpbmsgYmFzZSBwYXRoXCIpXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoY3VzdG9tVHlwZS5saW5rQmFzZVBhdGggfHwgXCJcIilcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRcdFx0XHRjdXN0b21UeXBlLmxpbmtCYXNlUGF0aCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0Ly8gQ3JlYXRpb24gbW9kZVxuXHRcdFx0Y29uc3QgY3JlYXRpb25Nb2RlQ29udGFpbmVyID0gc2V0dGluZ3NDb250YWluZXIuY3JlYXRlRGl2KCk7XG5cdFx0XHRuZXcgU2V0dGluZyhjcmVhdGlvbk1vZGVDb250YWluZXIpXG5cdFx0XHRcdC5zZXROYW1lKFwiQ3JlYXRpb24gbW9kZVwiKVxuXHRcdFx0XHQuc2V0RGVzYyhcIkhvdyB0byBjcmVhdGUgbmV3IGVudHJpZXM6IGZpbGUtYmFzZWQgb3IgZm9sZGVyLWJhc2VkIHdpdGggYW4gaW5kZXggZmlsZS5cIilcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT5cblx0XHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihcImZpbGVcIiwgXCJGaWxlLWJhc2VkIChjb250ZW50LXRpdGxlLm1kKVwiKVxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihcImZvbGRlclwiLCBcIkZvbGRlci1iYXNlZCAoY29udGVudC10aXRsZS9pbmRleC5tZClcIilcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShjdXN0b21UeXBlLmNyZWF0aW9uTW9kZSlcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRcdFx0XHRjdXN0b21UeXBlLmNyZWF0aW9uTW9kZSA9IHZhbHVlIGFzIFwiZmlsZVwiIHwgXCJmb2xkZXJcIjtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMudXBkYXRlQ3VzdG9tQ29udGVudFR5cGVJbmRleEZpbGVGaWVsZChjdXN0b21UeXBlLmlkKTtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdCk7XG5cblx0XHRcdC8vIFVzZSBNRFggZXh0ZW5zaW9uXG5cdFx0XHRjb25zdCB1c2VNZHhDb250YWluZXIgPSBzZXR0aW5nc0NvbnRhaW5lci5jcmVhdGVEaXYoKTtcblx0XHRcdG5ldyBTZXR0aW5nKHVzZU1keENvbnRhaW5lcilcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFwiTURYXCIgaXMgYSBwcm9wZXIgbm91biAoZmlsZSBmb3JtYXQpIGFuZCBzaG91bGQgYmUgY2FwaXRhbGl6ZWRcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxuXHRcdFx0XHQuc2V0TmFtZShcIlVzZSBNRFggaW5zdGVhZCBvZiBNRFwiKVxuXHRcdFx0XHQuc2V0RGVzYyhcIkNyZWF0ZSBmaWxlcyB3aXRoIC5tZHggZXh0ZW5zaW9uIGluc3RlYWQgb2YgLm1kIGV4dGVuc2lvbi5cIilcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKGN1c3RvbVR5cGUudXNlTWR4RXh0ZW5zaW9uIHx8IGZhbHNlKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYm9vbGVhbikgPT4ge1xuXHRcdFx0XHRcdFx0XHRjdXN0b21UeXBlLnVzZU1keEV4dGVuc2lvbiA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdCk7XG5cblx0XHRcdC8vIEluZGV4IGZpbGUgbmFtZSAob25seSBzaG93IGZvciBmb2xkZXItYmFzZWQpXG5cdFx0XHRjb25zdCBpbmRleEZpbGVDb250YWluZXIgPSBzZXR0aW5nc0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwiY3VzdG9tLWluZGV4LWZpbGUtZmllbGRcIiB9KTtcblx0XHRcdGluZGV4RmlsZUNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItdmlzaWJsZVwiLCBjdXN0b21UeXBlLmNyZWF0aW9uTW9kZSA9PT0gXCJmb2xkZXJcIik7XG5cdFx0aW5kZXhGaWxlQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWNvbnRhaW5lci1oaWRkZW5cIiwgY3VzdG9tVHlwZS5jcmVhdGlvbk1vZGUgIT09IFwiZm9sZGVyXCIpO1xuXHRcdFx0bmV3IFNldHRpbmcoaW5kZXhGaWxlQ29udGFpbmVyKVxuXHRcdFx0XHQuc2V0TmFtZShcIkluZGV4IGZpbGUgbmFtZVwiKVxuXHRcdFx0XHQuc2V0RGVzYyhcIk5hbWUgZm9yIGluZGV4IGZpbGVzIGluIGZvbGRlci1iYXNlZCBjb250ZW50ICh3aXRob3V0IC5tZCBleHRlbnNpb24pLiBEZWZhdWx0cyB0byAnaW5kZXgnIGlmIGxlZnQgYmxhbmsuXCIpXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIkluZGV4XCIpXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoY3VzdG9tVHlwZS5pbmRleEZpbGVOYW1lKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGN1c3RvbVR5cGUuaW5kZXhGaWxlTmFtZSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdCk7XG5cblx0XHRcdC8vIFRlbXBsYXRlXG5cdFx0XHRjb25zdCB0ZW1wbGF0ZUNvbnRhaW5lciA9IHNldHRpbmdzQ29udGFpbmVyLmNyZWF0ZURpdigpO1xuXHRcdFx0bmV3IFNldHRpbmcodGVtcGxhdGVDb250YWluZXIpXG5cdFx0XHRcdC5zZXROYW1lKFwiUHJvcGVydGllcyB0ZW1wbGF0ZVwiKVxuXHRcdFx0XHQuYWRkVGV4dEFyZWEoKHRleHQpID0+IHtcblx0XHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJy0tLVxcbnRpdGxlOiBcInt7dGl0bGV9fVwiXFxuZGF0ZToge3tkYXRlfX1cXG4tLS1cXG4nKVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKGN1c3RvbVR5cGUudGVtcGxhdGUpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0XHRcdFx0Y3VzdG9tVHlwZS50ZW1wbGF0ZSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHRleHQuaW5wdXRFbC5jbGFzc0xpc3QuYWRkKFwiYXN0cm8tY29tcG9zZXItdGVtcGxhdGUtdGV4dGFyZWFcIik7XG5cdFx0XHRcdFx0cmV0dXJuIHRleHQ7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC50aGVuKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRcdHNldHRpbmcuZGVzY0VsLmVtcHR5KCk7XG5cdFx0XHRcdGNvbnN0IGRlc2NEaXYgPSBzZXR0aW5nLmRlc2NFbC5jcmVhdGVFbChcImRpdlwiKTtcblx0XHRcdFx0ZGVzY0Rpdi5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IFwiVGVtcGxhdGUgZm9yIG5ldyBmaWxlcyBvZiB0aGlzIGNvbnRlbnQgdHlwZS5cIiB9KTtcblx0XHRcdFx0ZGVzY0Rpdi5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IFwiVmFyaWFibGVzIGluY2x1ZGUge3t0aXRsZX19LCB7e2RhdGV9fSwgYW5kIHt7c2x1Z319LlwiIH0pO1xuXHRcdFx0XHRkZXNjRGl2LmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogXCJEbyBub3Qgd3JhcCB7e2RhdGV9fSBpbiBxdW90ZXMgYXMgaXQgcmVwcmVzZW50cyBhIGRhdGV0aW1lIHZhbHVlLCBub3QgYSBzdHJpbmcuXCIgfSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHQvLyBSZW1vdmUgYnV0dG9uIGF0IHRoZSBib3R0b20gKG5vIGRpdmlkZXIpXG5cdFx0XHRjb25zdCByZW1vdmVDb250YWluZXIgPSBzZXR0aW5nc0NvbnRhaW5lci5jcmVhdGVEaXYoKTtcblx0XHRcdGNvbnN0IHJlbW92ZVNldHRpbmcgPSBuZXcgU2V0dGluZyhyZW1vdmVDb250YWluZXIpXG5cdFx0XHRcdC5zZXROYW1lKFwiXCIpXG5cdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xuXHRcdFx0XHRcdGJ1dHRvblxuXHRcdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJSZW1vdmVcIilcblx0XHRcdFx0XHRcdC5zZXRXYXJuaW5nKClcblx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29udGVudFR5cGUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250ZW50VHlwZXMuZmluZChjdCA9PiBjdC5pZCA9PT0gY3VzdG9tVHlwZS5pZCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHR5cGVOYW1lID0gY29udGVudFR5cGU/Lm5hbWUgfHwgXCJjb250ZW50IHR5cGVcIjtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgQ29uZmlybU1vZGFsKFxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0XHRcdFx0XHRcdGBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcmVtb3ZlIFwiJHt0eXBlTmFtZX1cIj8gVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZS5gLFxuXHRcdFx0XHRcdFx0XHRcdFwiUmVtb3ZlXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJDYW5jZWxcIlxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBjb25maXJtZWQgPSBhd2FpdCBtb2RhbC53YWl0Rm9yUmVzdWx0KCk7XG5cdFx0XHRcdFx0XHRcdGlmIChjb25maXJtZWQpIHtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnJlbW92ZUN1c3RvbUNvbnRlbnRUeXBlKGN1c3RvbVR5cGUuaWQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdC8vIEhpZGUgdGhlIGRpdmlkZXIgbGluZSBmb3IgdGhlIHJlbW92ZSBidXR0b25cblx0XHRcdHJlbW92ZVNldHRpbmcuc2V0dGluZ0VsLmNsYXNzTGlzdC5hZGQoXCJhc3Ryby1jb21wb3Nlci1yZW1vdmUtc2V0dGluZ1wiKTtcblxuXHRcdFx0Ly8gU2V0IGluaXRpYWwgdmlzaWJpbGl0eSAoY2hlY2tzIGJvdGggZW5hYmxlZCBhbmQgY29sbGFwc2VkIHN0YXRlKVxuXHRcdFx0dGhpcy51cGRhdGVDdXN0b21Db250ZW50VHlwZVZpc2liaWxpdHkoY3VzdG9tVHlwZS5pZCwgY3VzdG9tVHlwZS5lbmFibGVkKTtcblx0XHR9KTtcblx0XHRcblx0XHQvLyBVcGRhdGUgY29uZmxpY3Qgd2FybmluZ3MgZm9yIGFsbCB0eXBlcyBhZnRlciByZW5kZXJpbmcgKGZvbGRlciBjaGFuZ2VzIG1heSBhZmZlY3Qgb3RoZXJzKVxuXHRcdGNvbnRlbnRUeXBlcy5mb3JFYWNoKChjdXN0b21UeXBlOiBDb250ZW50VHlwZSkgPT4ge1xuXHRcdFx0dGhpcy51cGRhdGVGb2xkZXJDb25mbGljdFdhcm5pbmcoY3VzdG9tVHlwZS5pZCwgbnVsbCk7XG5cdFx0fSk7XG5cblx0XHQvLyBBZGQgZmxvYXRpbmcgYnV0dG9uIGZvciBjcmVhdGluZyBuZXcgY3VzdG9tIGNvbnRlbnQgdHlwZXMgKG5vIHNldHRpbmdzIGJhY2tncm91bmQpXG5cdFx0Y29uc3QgYWRkQnV0dG9uQ29udGFpbmVyID0gdGhpcy5jdXN0b21Db250ZW50VHlwZXNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcImFzdHJvLWNvbXBvc2VyLWFkZC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3QgYWRkQnV0dG9uID0gYWRkQnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdGNsczogXCJtb2QtY3RhXCIsXG5cdFx0XHR0ZXh0OiBcIkFkZCBjb250ZW50IHR5cGVcIlxuXHRcdH0pO1xuXHRcdGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuXHRcdFx0dGhpcy5hZGRDdXN0b21Db250ZW50VHlwZSgpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSB1cGRhdGVDdXN0b21Db250ZW50VHlwZVZpc2liaWxpdHkodHlwZUlkOiBzdHJpbmcsIGVuYWJsZWQ6IGJvb2xlYW4pIHtcblx0XHRjb25zdCBzZXR0aW5nc0NvbnRhaW5lciA9IHRoaXMuY3VzdG9tQ29udGVudFR5cGVzQ29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKGBbZGF0YS10eXBlLWlkPVwiJHt0eXBlSWR9XCJdLmN1c3RvbS1jb250ZW50LXR5cGUtc2V0dGluZ3NgKSBhcyBIVE1MRWxlbWVudDtcblx0XHRpZiAoc2V0dGluZ3NDb250YWluZXIpIHtcblx0XHRcdGNvbnN0IGNvbnRlbnRUeXBlcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnRlbnRUeXBlcyB8fCBbXTtcblx0XHRcdGNvbnN0IGNvbnRlbnRUeXBlID0gY29udGVudFR5cGVzLmZpbmQoKGN0OiBDb250ZW50VHlwZSkgPT4gY3QuaWQgPT09IHR5cGVJZCk7XG5cdFx0XHRjb25zdCBpc0NvbGxhcHNlZCA9IGNvbnRlbnRUeXBlPy5jb2xsYXBzZWQgPz8gZmFsc2U7XG5cdFx0XHRjb25zdCBzaG91bGRCZVZpc2libGUgPSBlbmFibGVkICYmICFpc0NvbGxhcHNlZDtcblx0XHRcdFxuXHRcdFx0c2V0dGluZ3NDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLXZpc2libGVcIiwgc2hvdWxkQmVWaXNpYmxlKTtcblx0XHRcdHNldHRpbmdzQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWNvbnRhaW5lci1oaWRkZW5cIiwgIXNob3VsZEJlVmlzaWJsZSk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSB1cGRhdGVDdXN0b21Db250ZW50VHlwZUluZGV4RmlsZUZpZWxkKHR5cGVJZDogc3RyaW5nKSB7XG5cdFx0Y29uc3QgY29udGVudFR5cGVzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGVudFR5cGVzIHx8IFtdO1xuXHRcdGNvbnN0IGN1c3RvbVR5cGUgPSBjb250ZW50VHlwZXMuZmluZCh0eXBlID0+IHR5cGUuaWQgPT09IHR5cGVJZCk7XG5cdFx0aWYgKCFjdXN0b21UeXBlKSByZXR1cm47XG5cblx0XHRjb25zdCBpbmRleEZpbGVDb250YWluZXIgPSB0aGlzLmN1c3RvbUNvbnRlbnRUeXBlc0NvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcihgW2RhdGEtdHlwZS1pZD1cIiR7dHlwZUlkfVwiXSAuY3VzdG9tLWluZGV4LWZpbGUtZmllbGRgKSBhcyBIVE1MRWxlbWVudDtcblx0XHRpZiAoaW5kZXhGaWxlQ29udGFpbmVyKSB7XG5cdFx0XHRpbmRleEZpbGVDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLXZpc2libGVcIiwgY3VzdG9tVHlwZS5jcmVhdGlvbk1vZGUgPT09IFwiZm9sZGVyXCIpO1xuXHRcdGluZGV4RmlsZUNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItaGlkZGVuXCIsIGN1c3RvbVR5cGUuY3JlYXRpb25Nb2RlICE9PSBcImZvbGRlclwiKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHVwZGF0ZUN1c3RvbUNvbnRlbnRUeXBlSWdub3JlU3ViZm9sZGVyc0ZpZWxkKHR5cGVJZDogc3RyaW5nKSB7XG5cdFx0Y29uc3QgY29udGVudFR5cGVzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGVudFR5cGVzIHx8IFtdO1xuXHRcdGNvbnN0IGN1c3RvbVR5cGUgPSBjb250ZW50VHlwZXMuZmluZCh0eXBlID0+IHR5cGUuaWQgPT09IHR5cGVJZCk7XG5cdFx0aWYgKCFjdXN0b21UeXBlKSByZXR1cm47XG5cblx0XHRjb25zdCBpZ25vcmVTdWJmb2xkZXJzQ29udGFpbmVyID0gdGhpcy5jdXN0b21Db250ZW50VHlwZXNDb250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXR5cGUtaWQ9XCIke3R5cGVJZH1cIl0uY3VzdG9tLWlnbm9yZS1zdWJmb2xkZXJzLWZpZWxkYCkgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0aWYgKGlnbm9yZVN1YmZvbGRlcnNDb250YWluZXIpIHtcblx0XHRcdGlnbm9yZVN1YmZvbGRlcnNDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLXZpc2libGVcIiwgISFjdXN0b21UeXBlLmZvbGRlciAmJiBjdXN0b21UeXBlLmZvbGRlci50cmltKCkgIT09IFwiXCIpO1xuXHRcdFx0aWdub3JlU3ViZm9sZGVyc0NvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItaGlkZGVuXCIsICFjdXN0b21UeXBlLmZvbGRlciB8fCBjdXN0b21UeXBlLmZvbGRlci50cmltKCkgPT09IFwiXCIpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgdXBkYXRlRm9sZGVyQ29uZmxpY3RXYXJuaW5nKHR5cGVJZDogc3RyaW5nLCBzZXR0aW5nOiBTZXR0aW5nIHwgbnVsbCkge1xuXHRcdGNvbnN0IGNvbnRlbnRUeXBlcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnRlbnRUeXBlcyB8fCBbXTtcblx0XHRjb25zdCBjdXJyZW50VHlwZSA9IGNvbnRlbnRUeXBlcy5maW5kKHR5cGUgPT4gdHlwZS5pZCA9PT0gdHlwZUlkKTtcblx0XHRpZiAoIWN1cnJlbnRUeXBlKSByZXR1cm47XG5cblx0XHRjb25zdCBjb25mbGljdFdhcm5pbmdFbCA9IHRoaXMuY3VzdG9tQ29udGVudFR5cGVzQ29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKGBbZGF0YS10eXBlLWlkPVwiJHt0eXBlSWR9XCJdLmFzdHJvLWNvbXBvc2VyLWNvbmZsaWN0LXdhcm5pbmdgKSBhcyBIVE1MRWxlbWVudDtcblx0XHRpZiAoIWNvbmZsaWN0V2FybmluZ0VsKSByZXR1cm47XG5cblx0XHQvLyBGaW5kIGNvbmZsaWN0cyAtIG90aGVyIGNvbnRlbnQgdHlwZXMgd2l0aCB0aGUgc2FtZSBmb2xkZXIgcGF0dGVyblxuXHRcdGNvbnN0IGN1cnJlbnRGb2xkZXIgPSAoY3VycmVudFR5cGUuZm9sZGVyIHx8IFwiXCIpLnRyaW0oKTtcblx0XHRjb25zdCBjb25mbGljdGluZ1R5cGVzOiBzdHJpbmdbXSA9IFtdO1xuXHRcdFxuXHRcdGZvciAoY29uc3Qgb3RoZXJUeXBlIG9mIGNvbnRlbnRUeXBlcykge1xuXHRcdFx0aWYgKG90aGVyVHlwZS5pZCA9PT0gdHlwZUlkIHx8ICFvdGhlclR5cGUuZW5hYmxlZCkgY29udGludWU7XG5cdFx0XHRcblx0XHRcdGNvbnN0IG90aGVyRm9sZGVyID0gKG90aGVyVHlwZS5mb2xkZXIgfHwgXCJcIikudHJpbSgpO1xuXHRcdFx0XG5cdFx0XHQvLyBDaGVjayBpZiBmb2xkZXJzIGNvbmZsaWN0XG5cdFx0XHQvLyBCb3RoIGJsYW5rID0gY29uZmxpY3QgKGJvdGggbWF0Y2ggdmF1bHQgcm9vdClcblx0XHRcdGlmIChjdXJyZW50Rm9sZGVyID09PSBcIlwiICYmIG90aGVyRm9sZGVyID09PSBcIlwiKSB7XG5cdFx0XHRcdGNvbmZsaWN0aW5nVHlwZXMucHVzaChvdGhlclR5cGUubmFtZSB8fCBcIlVubmFtZWRcIik7XG5cdFx0XHR9XG5cdFx0XHQvLyBTYW1lIGZvbGRlciA9IGNvbmZsaWN0XG5cdFx0XHRlbHNlIGlmIChjdXJyZW50Rm9sZGVyID09PSBvdGhlckZvbGRlciAmJiBjdXJyZW50Rm9sZGVyICE9PSBcIlwiKSB7XG5cdFx0XHRcdGNvbmZsaWN0aW5nVHlwZXMucHVzaChvdGhlclR5cGUubmFtZSB8fCBcIlVubmFtZWRcIik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGNvbmZsaWN0aW5nVHlwZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29uZmxpY3RXYXJuaW5nRWwucmVtb3ZlQ2xhc3MoXCJoaWRkZW5cIik7XG5cdFx0XHRjb25mbGljdFdhcm5pbmdFbC50ZXh0Q29udGVudCA9IGBDb25mbGljdDogJHtjb25mbGljdGluZ1R5cGVzLmpvaW4oXCIsIFwiKX0gYWxzbyB1c2Uke2NvbmZsaWN0aW5nVHlwZXMubGVuZ3RoID09PSAxID8gXCJzXCIgOiBcIlwifSB0aGlzIGZvbGRlci4gTW9yZSBzcGVjaWZpYyBwYXR0ZXJucyB3aWxsIHRha2UgcHJpb3JpdHkuYDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uZmxpY3RXYXJuaW5nRWwuYWRkQ2xhc3MoXCJoaWRkZW5cIik7XG5cdFx0fVxuXHR9XG5cblxuXHRwcml2YXRlIGFzeW5jIG1vdmVDb250ZW50VHlwZVVwKHR5cGVJZDogc3RyaW5nKSB7XG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcblx0XHRjb25zdCBjb250ZW50VHlwZXMgPSBzZXR0aW5ncy5jb250ZW50VHlwZXMgfHwgW107XG5cdFx0Y29uc3QgY3VycmVudEluZGV4ID0gY29udGVudFR5cGVzLmZpbmRJbmRleCgoY3Q6IENvbnRlbnRUeXBlKSA9PiBjdC5pZCA9PT0gdHlwZUlkKTtcblx0XHRcblx0XHRpZiAoY3VycmVudEluZGV4IDw9IDApIHJldHVybjsgLy8gQWxyZWFkeSBhdCB0aGUgdG9wXG5cdFx0XG5cdFx0Ly8gU3dhcCB3aXRoIHByZXZpb3VzIGl0ZW1cblx0XHRbY29udGVudFR5cGVzW2N1cnJlbnRJbmRleF0sIGNvbnRlbnRUeXBlc1tjdXJyZW50SW5kZXggLSAxXV0gPSBbY29udGVudFR5cGVzW2N1cnJlbnRJbmRleCAtIDFdLCBjb250ZW50VHlwZXNbY3VycmVudEluZGV4XV07XG5cdFx0c2V0dGluZ3MuY29udGVudFR5cGVzID0gY29udGVudFR5cGVzO1xuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdHRoaXMucmVuZGVyQ3VzdG9tQ29udGVudFR5cGVzKCk7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIG1vdmVDb250ZW50VHlwZURvd24odHlwZUlkOiBzdHJpbmcpIHtcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuXHRcdGNvbnN0IGNvbnRlbnRUeXBlcyA9IHNldHRpbmdzLmNvbnRlbnRUeXBlcyB8fCBbXTtcblx0XHRjb25zdCBjdXJyZW50SW5kZXggPSBjb250ZW50VHlwZXMuZmluZEluZGV4KChjdDogQ29udGVudFR5cGUpID0+IGN0LmlkID09PSB0eXBlSWQpO1xuXHRcdFxuXHRcdGlmIChjdXJyZW50SW5kZXggPCAwIHx8IGN1cnJlbnRJbmRleCA+PSBjb250ZW50VHlwZXMubGVuZ3RoIC0gMSkgcmV0dXJuOyAvLyBBbHJlYWR5IGF0IHRoZSBib3R0b21cblx0XHRcblx0XHQvLyBTd2FwIHdpdGggbmV4dCBpdGVtXG5cdFx0W2NvbnRlbnRUeXBlc1tjdXJyZW50SW5kZXhdLCBjb250ZW50VHlwZXNbY3VycmVudEluZGV4ICsgMV1dID0gW2NvbnRlbnRUeXBlc1tjdXJyZW50SW5kZXggKyAxXSwgY29udGVudFR5cGVzW2N1cnJlbnRJbmRleF1dO1xuXHRcdHNldHRpbmdzLmNvbnRlbnRUeXBlcyA9IGNvbnRlbnRUeXBlcztcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHR0aGlzLnJlbmRlckN1c3RvbUNvbnRlbnRUeXBlcygpO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyB0b2dnbGVDb250ZW50VHlwZUNvbGxhcHNlKHR5cGVJZDogc3RyaW5nKSB7XG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcblx0XHRjb25zdCBjb250ZW50VHlwZXMgPSBzZXR0aW5ncy5jb250ZW50VHlwZXMgfHwgW107XG5cdFx0Y29uc3QgY29udGVudFR5cGUgPSBjb250ZW50VHlwZXMuZmluZCgoY3Q6IENvbnRlbnRUeXBlKSA9PiBjdC5pZCA9PT0gdHlwZUlkKTtcblx0XHRcblx0XHRpZiAoIWNvbnRlbnRUeXBlKSByZXR1cm47XG5cdFx0XG5cdFx0Y29udGVudFR5cGUuY29sbGFwc2VkID0gIWNvbnRlbnRUeXBlLmNvbGxhcHNlZDtcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHR0aGlzLnVwZGF0ZUN1c3RvbUNvbnRlbnRUeXBlVmlzaWJpbGl0eSh0eXBlSWQsIGNvbnRlbnRUeXBlLmVuYWJsZWQpO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyByZW1vdmVDdXN0b21Db250ZW50VHlwZSh0eXBlSWQ6IHN0cmluZykge1xuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG5cdFx0Y29uc3QgY29udGVudFR5cGVzID0gc2V0dGluZ3MuY29udGVudFR5cGVzIHx8IFtdO1xuXHRcdHNldHRpbmdzLmNvbnRlbnRUeXBlcyA9IGNvbnRlbnRUeXBlcy5maWx0ZXIoKGN0OiBDb250ZW50VHlwZSkgPT4gY3QuaWQgIT09IHR5cGVJZCk7XG5cdFx0Ly8gQ1JJVElDQUw6IEF3YWl0IHRoZSBzYXZlIHRvIGVuc3VyZSBkZWxldGlvbiBpcyBwZXJzaXN0ZWQgYmVmb3JlIGFueSByZWxvYWRzIGhhcHBlblxuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdHRoaXMucmVuZGVyQ3VzdG9tQ29udGVudFR5cGVzKCk7XG5cdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJDcmVhdGVFdmVudCgpO1xuXHRcdC8vIFJlLXJlZ2lzdGVyIGNvbnRlbnQgdHlwZSBjb21tYW5kcyB0byByZW1vdmUgdGhlIGRlbGV0ZWQgdHlwZVxuXHRcdHJlZ2lzdGVyQ29udGVudFR5cGVDb21tYW5kcyh0aGlzLnBsdWdpbiBhcyB1bmtub3duIGFzIFBsdWdpbiwgc2V0dGluZ3MpO1xuXHR9XG5cblx0cHJpdmF0ZSBnZXRDb21tYW5kTmFtZShjb21tYW5kSWQ6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0aWYgKCFjb21tYW5kSWQpIHJldHVybiAnJztcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgY29tbWFuZFJlZ2lzdHJ5ID0gKHRoaXMuYXBwIGFzIHVua25vd24gYXMgeyBjb21tYW5kcz86IHsgbGlzdENvbW1hbmRzPzogKCkgPT4gQXJyYXk8eyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfT47IGNvbW1hbmRzPzogUmVjb3JkPHN0cmluZywgeyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfT4gfSB9KS5jb21tYW5kcztcblx0XHRcdFxuXHRcdFx0Ly8gTWV0aG9kIDE6IFRyeSBsaXN0Q29tbWFuZHMoKVxuXHRcdFx0aWYgKGNvbW1hbmRSZWdpc3RyeSAmJiB0eXBlb2YgY29tbWFuZFJlZ2lzdHJ5Lmxpc3RDb21tYW5kcyA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGNvbnN0IGFsbENvbW1hbmRzID0gY29tbWFuZFJlZ2lzdHJ5Lmxpc3RDb21tYW5kcygpO1xuXHRcdFx0XHRcdGNvbnN0IGNvbW1hbmQgPSBhbGxDb21tYW5kcy5maW5kKChjbWQ6IHsgaWQ6IHN0cmluZzsgbmFtZT86IHN0cmluZyB9KSA9PiBjbWQuaWQgPT09IGNvbW1hbmRJZCk7XG5cdFx0XHRcdFx0aWYgKGNvbW1hbmQ/Lm5hbWUpIHtcblx0XHRcdFx0XHRcdHJldHVybiBjb21tYW5kLm5hbWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKCdbQXN0cm8gQ29tcG9zZXJdIEVycm9yIGdldHRpbmcgY29tbWFuZCBuYW1lIHZpYSBsaXN0Q29tbWFuZHMoKTonLCBlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBNZXRob2QgMjogVHJ5IGFjY2Vzc2luZyB0aGUgaW50ZXJuYWwgY29tbWFuZHMgcmVnaXN0cnkgZGlyZWN0bHlcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IHJlZ2lzdHJ5ID0gY29tbWFuZFJlZ2lzdHJ5Py5jb21tYW5kcztcblx0XHRcdFx0aWYgKHJlZ2lzdHJ5ICYmIHR5cGVvZiByZWdpc3RyeSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0XHRjb25zdCBjb21tYW5kID0gKHJlZ2lzdHJ5IGFzIFJlY29yZDxzdHJpbmcsIHsgbmFtZT86IHN0cmluZyB9PilbY29tbWFuZElkXTtcblx0XHRcdFx0XHRpZiAoY29tbWFuZD8ubmFtZSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGNvbW1hbmQubmFtZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKCdbQXN0cm8gQ29tcG9zZXJdIEVycm9yIGdldHRpbmcgY29tbWFuZCBuYW1lIHZpYSByZWdpc3RyeTonLCBlKTtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRjb25zb2xlLndhcm4oJ1tBc3RybyBDb21wb3Nlcl0gRXJyb3IgZ2V0dGluZyBjb21tYW5kIG5hbWU6JywgZSk7XG5cdFx0fVxuXHRcdC8vIFJldHVybiBlbXB0eSBzdHJpbmcgaWYgY29tbWFuZCBub3QgZm91bmQsIHNvIGl0IHNob3dzIFwiU2VsZWN0IGNvbW1hbmQuLi5cIiBwbGFjZWhvbGRlclxuXHRcdHJldHVybiAnJztcblx0fVxuXG5cdHByaXZhdGUgZ2V0SWNvbk5hbWUoaWNvbklkOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdGlmICghaWNvbklkKSByZXR1cm4gJyc7XG5cdFx0Ly8gQ29udmVydCBpY29uIElEIHRvIGEgcmVhZGFibGUgbmFtZSwgcmVtb3ZpbmcgbHVjaWRlLSBwcmVmaXggaWYgcHJlc2VudFxuXHRcdHJldHVybiBpY29uSWRcblx0XHRcdC5yZXBsYWNlKC9ebHVjaWRlLS8sICcnKSAvLyBSZW1vdmUgbHVjaWRlLSBwcmVmaXhcblx0XHRcdC5zcGxpdCgnLScpXG5cdFx0XHQubWFwKHdvcmQgPT4gd29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc2xpY2UoMSkpXG5cdFx0XHQuam9pbignICcpO1xuXHR9XG59XG4iLCAiLyoqXHJcbiAqIENvbW1hbmQgUGlja2VyIE1vZGFsXHJcbiAqIFNlYXJjaGFibGUgbW9kYWwgZm9yIHNlbGVjdGluZyBhbiBPYnNpZGlhbiBjb21tYW5kXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBGdXp6eVN1Z2dlc3RNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmludGVyZmFjZSBDb21tYW5kT3B0aW9uIHtcclxuXHRpZDogc3RyaW5nO1xyXG5cdG5hbWU6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbW1hbmRQaWNrZXJNb2RhbCBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPENvbW1hbmRPcHRpb24+IHtcclxuXHRwcml2YXRlIG9uU2VsZWN0OiAoY29tbWFuZElkOiBzdHJpbmcpID0+IHZvaWQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvblNlbGVjdDogKGNvbW1hbmRJZDogc3RyaW5nKSA9PiB2b2lkKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5vblNlbGVjdCA9IG9uU2VsZWN0O1xyXG5cdH1cclxuXHJcblx0Z2V0SXRlbXMoKTogQ29tbWFuZE9wdGlvbltdIHtcclxuXHRcdC8vIEdldCBhbGwgYXZhaWxhYmxlIGNvbW1hbmRzXHJcblx0XHQvLyBUcnkgbXVsdGlwbGUgbWV0aG9kcyB0byBlbnN1cmUgd2UgZ2V0IEFMTCBjb21tYW5kcywgbm90IGp1c3QgY29udGV4dC1maWx0ZXJlZCBvbmVzXHJcblx0XHRjb25zdCBjb21tYW5kUmVnaXN0cnkgPSAodGhpcy5hcHAgYXMgeyBjb21tYW5kcz86IHsgbGlzdENvbW1hbmRzPzogKCkgPT4gQ29tbWFuZE9wdGlvbltdOyBjb21tYW5kcz86IFJlY29yZDxzdHJpbmcsIENvbW1hbmRPcHRpb24+OyBjb21tYW5kUmVnaXN0cnk/OiBSZWNvcmQ8c3RyaW5nLCBDb21tYW5kT3B0aW9uPiB9IH0pLmNvbW1hbmRzO1xyXG5cdFx0XHJcblx0XHQvLyBVc2UgYSBTZXQgdG8gZGVkdXBsaWNhdGUgYnkgY29tbWFuZCBJRFxyXG5cdFx0Y29uc3QgY29tbWFuZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBDb21tYW5kT3B0aW9uPigpO1xyXG5cdFx0XHJcblx0XHQvLyBNZXRob2QgMTogVHJ5IGxpc3RDb21tYW5kcygpIC0gYnV0IHRoaXMgbWlnaHQgYmUgY29udGV4dC1maWx0ZXJlZFxyXG5cdFx0aWYgKGNvbW1hbmRSZWdpc3RyeSAmJiB0eXBlb2YgY29tbWFuZFJlZ2lzdHJ5Lmxpc3RDb21tYW5kcyA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGNvbnN0IGNvbW1hbmRzID0gY29tbWFuZFJlZ2lzdHJ5Lmxpc3RDb21tYW5kcygpO1xyXG5cdFx0XHRcdGZvciAoY29uc3QgY29tbWFuZCBvZiBjb21tYW5kcykge1xyXG5cdFx0XHRcdFx0aWYgKGNvbW1hbmQgJiYgY29tbWFuZC5pZCAmJiBjb21tYW5kLm5hbWUgJiYgIWNvbW1hbmRNYXAuaGFzKGNvbW1hbmQuaWQpKSB7XHJcblx0XHRcdFx0XHRcdGNvbW1hbmRNYXAuc2V0KGNvbW1hbmQuaWQsIHtcclxuXHRcdFx0XHRcdFx0XHRpZDogY29tbWFuZC5pZCxcclxuXHRcdFx0XHRcdFx0XHRuYW1lOiBjb21tYW5kLm5hbWVcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdFx0Y29uc29sZS53YXJuKCdbQXN0cm8gQ29tcG9zZXJdIEVycm9yIGdldHRpbmcgY29tbWFuZHMgdmlhIGxpc3RDb21tYW5kcygpOicsIGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIE1ldGhvZCAyOiBUcnkgYWNjZXNzaW5nIHRoZSBpbnRlcm5hbCBjb21tYW5kcyByZWdpc3RyeSBkaXJlY3RseVxyXG5cdFx0Ly8gVGhpcyBzaG91bGQgZ2l2ZSB1cyBBTEwgY29tbWFuZHMgcmVnYXJkbGVzcyBvZiBjb250ZXh0XHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCByZWdpc3RyeSA9IGNvbW1hbmRSZWdpc3RyeT8uY29tbWFuZHM7XHJcblx0XHRcdGlmIChyZWdpc3RyeSAmJiB0eXBlb2YgcmVnaXN0cnkgPT09ICdvYmplY3QnKSB7XHJcblx0XHRcdFx0Y29uc3QgYWxsQ29tbWFuZHMgPSBPYmplY3QudmFsdWVzKHJlZ2lzdHJ5KTtcclxuXHRcdFx0XHRmb3IgKGNvbnN0IGNvbW1hbmQgb2YgYWxsQ29tbWFuZHMpIHtcclxuXHRcdFx0XHRcdGlmIChjb21tYW5kICYmIGNvbW1hbmQuaWQgJiYgY29tbWFuZC5uYW1lICYmICFjb21tYW5kTWFwLmhhcyhjb21tYW5kLmlkKSkge1xyXG5cdFx0XHRcdFx0XHRjb21tYW5kTWFwLnNldChjb21tYW5kLmlkLCB7XHJcblx0XHRcdFx0XHRcdFx0aWQ6IGNvbW1hbmQuaWQsXHJcblx0XHRcdFx0XHRcdFx0bmFtZTogY29tbWFuZC5uYW1lXHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSBjYXRjaCAoZSkge1xyXG5cdFx0XHRjb25zb2xlLndhcm4oJ1tBc3RybyBDb21wb3Nlcl0gRXJyb3IgZ2V0dGluZyBjb21tYW5kcyB2aWEgcmVnaXN0cnk6JywgZSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIE1ldGhvZCAzOiBUcnkgYWNjZXNzaW5nIHZpYSBpbnRlcm5hbCBzdHJ1Y3R1cmUgKGZhbGxiYWNrKVxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgaW50ZXJuYWxSZWdpc3RyeSA9IGNvbW1hbmRSZWdpc3RyeT8uY29tbWFuZFJlZ2lzdHJ5O1xyXG5cdFx0XHRpZiAoaW50ZXJuYWxSZWdpc3RyeSAmJiB0eXBlb2YgaW50ZXJuYWxSZWdpc3RyeSA9PT0gJ29iamVjdCcpIHtcclxuXHRcdFx0XHRjb25zdCBhbGxDb21tYW5kcyA9IE9iamVjdC52YWx1ZXMoaW50ZXJuYWxSZWdpc3RyeSk7XHJcblx0XHRcdFx0Zm9yIChjb25zdCBjb21tYW5kIG9mIGFsbENvbW1hbmRzKSB7XHJcblx0XHRcdFx0XHRpZiAoY29tbWFuZCAmJiBjb21tYW5kLmlkICYmIGNvbW1hbmQubmFtZSAmJiAhY29tbWFuZE1hcC5oYXMoY29tbWFuZC5pZCkpIHtcclxuXHRcdFx0XHRcdFx0Y29tbWFuZE1hcC5zZXQoY29tbWFuZC5pZCwge1xyXG5cdFx0XHRcdFx0XHRcdGlkOiBjb21tYW5kLmlkLFxyXG5cdFx0XHRcdFx0XHRcdG5hbWU6IGNvbW1hbmQubmFtZVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKCdbQXN0cm8gQ29tcG9zZXJdIEVycm9yIGdldHRpbmcgY29tbWFuZHMgdmlhIGludGVybmFsIHJlZ2lzdHJ5OicsIGUpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRjb25zdCBjb21tYW5kT3B0aW9ucyA9IEFycmF5LmZyb20oY29tbWFuZE1hcC52YWx1ZXMoKSk7XHJcblx0XHRcclxuXHRcdC8vIFNvcnQgYWxwaGFiZXRpY2FsbHkgYnkgbmFtZVxyXG5cdFx0Y29tbWFuZE9wdGlvbnMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSk7XHJcblx0XHRcclxuXHRcdHJldHVybiBjb21tYW5kT3B0aW9ucztcclxuXHR9XHJcblxyXG5cdGdldEl0ZW1UZXh0KGl0ZW06IENvbW1hbmRPcHRpb24pOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIGl0ZW0ubmFtZTtcclxuXHR9XHJcblxyXG5cdG9uQ2hvb3NlSXRlbShpdGVtOiBDb21tYW5kT3B0aW9uLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KTogdm9pZCB7XHJcblx0XHR0aGlzLm9uU2VsZWN0KGl0ZW0uaWQpO1xyXG5cdH1cclxuXHJcblx0Ly8gT3ZlcnJpZGUgdG8gc2hvdyBjb21tYW5kIG5hbWUgb25seVxyXG5cdHJlbmRlclN1Z2dlc3Rpb24obWF0Y2g6IHsgaXRlbTogQ29tbWFuZE9wdGlvbiB9LCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGl0ZW0gPSBtYXRjaC5pdGVtO1xyXG5cdFx0ZWwuY3JlYXRlRGl2KHsgY2xzOiAnc3VnZ2VzdGlvbi10aXRsZScsIHRleHQ6IGl0ZW0ubmFtZSB9KTtcclxuXHR9XHJcbn1cclxuXHJcbiIsICIvKipcclxuICogSWNvbiBQaWNrZXIgTW9kYWxcclxuICogU2VhcmNoYWJsZSBtb2RhbCBmb3Igc2VsZWN0aW5nIGEgTHVjaWRlIGljb25cclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIEZ1enp5U3VnZ2VzdE1vZGFsLCBzZXRJY29uLCBnZXRJY29uSWRzLCByZXF1aXJlQXBpVmVyc2lvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmludGVyZmFjZSBJY29uT3B0aW9uIHtcclxuXHRpZDogc3RyaW5nO1xyXG5cdG5hbWU6IHN0cmluZztcclxufVxyXG5cclxuLy8gR2V0IGljb24gbGlzdCBmcm9tIE9ic2lkaWFuIEFQSSBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSB1c2UgZmFsbGJhY2sgbGlzdFxyXG5jb25zdCBnZXRJY29uTGlzdCA9ICgpOiBzdHJpbmdbXSA9PiB7XHJcblx0aWYgKHJlcXVpcmVBcGlWZXJzaW9uICYmIHJlcXVpcmVBcGlWZXJzaW9uKCcxLjcuMycpICYmIGdldEljb25JZHMpIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdHJldHVybiBnZXRJY29uSWRzKCk7XHJcblx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdGNvbnNvbGUud2FybignW0FzdHJvIENvbXBvc2VyXSBFcnJvciBnZXR0aW5nIGljb24gSURzIGZyb20gT2JzaWRpYW46JywgZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cdC8vIEZhbGxiYWNrIHRvIGEgYmFzaWMgbGlzdCBpZiBBUEkgaXMgbm90IGF2YWlsYWJsZVxyXG5cdHJldHVybiBbXHJcblx0XHQnc2V0dGluZ3MtMicsICdzZXR0aW5ncycsICdoZWxwLWNpcmNsZScsICdpbmZvJywgJ3N0YXInLCAnaGVhcnQnLCAnYm9va21hcmsnLFxyXG5cdFx0J2hvbWUnLCAnc2VhcmNoJywgJ2JlbGwnLCAnbWFpbCcsICd1c2VyJywgJ3VzZXJzJywgJ2ZvbGRlcicsICdmaWxlJywgJ2ZpbGUtdGV4dCcsXHJcblx0XHQnaW1hZ2UnLCAndmlkZW8nLCAnbXVzaWMnLCAnY2FsZW5kYXInLCAnY2xvY2snLCAnZWRpdCcsICdwZW5jaWwnLCAndHJhc2gnLFxyXG5cdFx0J2NvcHknLCAnY3V0JywgJ3Bhc3RlJywgJ2Rvd25sb2FkJywgJ3VwbG9hZCcsICdzYXZlJywgJ3NoYXJlJywgJ2xpbmsnLFxyXG5cdFx0J2V4dGVybmFsLWxpbmsnLCAnbG9jaycsICd1bmxvY2snLCAnZXllJywgJ2V5ZS1vZmYnLCAna2V5JywgJ3NoaWVsZCcsXHJcblx0XHQnY2hlY2snLCAneCcsICdwbHVzJywgJ21pbnVzJywgJ2Fycm93LWxlZnQnLCAnYXJyb3ctcmlnaHQnLCAnYXJyb3ctdXAnLFxyXG5cdFx0J2Fycm93LWRvd24nLCAnY2hldnJvbi1sZWZ0JywgJ2NoZXZyb24tcmlnaHQnLCAnY2hldnJvbi11cCcsICdjaGV2cm9uLWRvd24nLFxyXG5cdFx0J21lbnUnLCAnbW9yZS1ob3Jpem9udGFsJywgJ21vcmUtdmVydGljYWwnLCAnZ3JpZCcsICdsaXN0JywgJ2xheW91dCcsXHJcblx0XHQnY29sdW1ucycsICdyb3dzJywgJ21heGltaXplJywgJ21pbmltaXplJywgJ3pvb20taW4nLCAnem9vbS1vdXQnLFxyXG5cdFx0J3JlZnJlc2gtY3cnLCAncGxheScsICdwYXVzZScsICdzdG9wJywgJ3N1bicsICdtb29uJywgJ2Nsb3VkJywgJ3phcCcsXHJcblx0XHQnd2FuZC0yJywgJ3dhbmQnLCAnd2FuZC1zcGFya2xlcycsICdwYWxldHRlJywgJ2JydXNoJywgJ3NsaWRlcnMnLFxyXG5cdFx0J3Bvd2VyJywgJ3dpZmknLCAnYmx1ZXRvb3RoJywgJ21vbml0b3InLCAnbGFwdG9wJywgJ3NtYXJ0cGhvbmUnLFxyXG5cdFx0J2NhbWVyYScsICdtaWMnLCAnaGVhZHBob25lcycsICdjb2RlJywgJ3Rlcm1pbmFsJywgJ3Rlcm1pbmFsLXNxdWFyZScsXHJcblx0XHQnZ2l0aHViJywgJ2dpdGxhYicsICdnaXQtYnJhbmNoJywgJ2dpdC1jb21taXQnLCAnZGF0YWJhc2UnLCAnc2VydmVyJyxcclxuXHRcdCdjbG91ZC1kb3dubG9hZCcsICdjbG91ZC11cGxvYWQnLCAndGFnJywgJ3RhZ3MnLCAnZmxhZycsICdwaW4nLFxyXG5cdFx0J21hcC1waW4nLCAnY29tcGFzcycsICdnbG9iZScsICdyb2NrZXQnLCAnY2FyJywgJ2Jpa2UnLCAncm9ib3QnLFxyXG5cdFx0J2FwcGxlJywgJ3dpbmRvd3MnLCAnbGludXgnLCAnY2hyb21lJywgJ2ZpcmVmb3gnLCAnc2FmYXJpJyxcclxuXHRcdCdjcmVkaXQtY2FyZCcsICd3YWxsZXQnLCAnY29pbnMnLCAnYm9vaycsICdib29rLW9wZW4nLCAnYXdhcmQnLFxyXG5cdFx0J3Ryb3BoeScsICdiYWRnZScsICd3cmVuY2gnLCAndG9vbCcsICdwYWNrYWdlJywgJ2JveCcsICdhcmNoaXZlJyxcclxuXHRcdCdzZW5kJywgJ3JlcGx5JywgJ2ZvcndhcmQnLCAnbWFpbC1vcGVuJywgJ3RhZy1wbHVzJywgJ3RhZy1taW51cycsXHJcblx0XHQnZmxhZy1vZmYnLCAncGluLW9mZicsICdtYXAtcGluLW9mZicsICduYXZpZ2F0aW9uJywgJ21hcCcsICdlYXJ0aCcsXHJcblx0XHQncGxhbmUnLCAnc2hpcCcsICdhbmNob3InLCAnaGVsaWNvcHRlcicsICdkcm9uZScsICdhbmRyb2lkJyxcclxuXHRcdCdrZXlob2xlJywgJ2tleXMnLCAnZmluZ2VycHJpbnQnLCAnc2NhbicsICdxci1jb2RlJywgJ2JhcmNvZGUnLFxyXG5cdFx0J3JlY2VpcHQnLCAncGlnZ3ktYmFuaycsICdiYW5rbm90ZSdcclxuXHRdO1xyXG59O1xyXG5cclxuLy8gQ29udmVydCBpY29uIElEcyB0byBJY29uT3B0aW9uIGZvcm1hdFxyXG5jb25zdCBMVUNJREVfSUNPTlM6IEljb25PcHRpb25bXSA9IGdldEljb25MaXN0KCkubWFwKGlkID0+ICh7XHJcblx0aWQ6IGlkLFxyXG5cdG5hbWU6IGlkXHJcblx0XHQucmVwbGFjZSgvXmx1Y2lkZS0vLCAnJykgLy8gUmVtb3ZlIGx1Y2lkZS0gcHJlZml4IGZvciBkaXNwbGF5XHJcblx0XHQucmVwbGFjZSgvLS9nLCAnICcpXHJcblx0XHQucmVwbGFjZSgvKF5cXHd7MX0pfChcXHMrXFx3ezF9KS9nLCAobGV0dGVyKSA9PiBsZXR0ZXIudG9VcHBlckNhc2UoKSlcclxufSkpLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xyXG5cclxuZXhwb3J0IGNsYXNzIEljb25QaWNrZXJNb2RhbCBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPEljb25PcHRpb24+IHtcclxuXHRwcml2YXRlIG9uU2VsZWN0OiAoaWNvbklkOiBzdHJpbmcpID0+IHZvaWQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvblNlbGVjdDogKGljb25JZDogc3RyaW5nKSA9PiB2b2lkKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5vblNlbGVjdCA9IG9uU2VsZWN0O1xyXG5cdH1cclxuXHJcblx0Z2V0SXRlbXMoKTogSWNvbk9wdGlvbltdIHtcclxuXHRcdHJldHVybiBMVUNJREVfSUNPTlM7XHJcblx0fVxyXG5cclxuXHRnZXRJdGVtVGV4dChpdGVtOiBJY29uT3B0aW9uKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBpdGVtLm5hbWU7XHJcblx0fVxyXG5cclxuXHRvbkNob29zZUl0ZW0oaXRlbTogSWNvbk9wdGlvbiwgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG5cdFx0dGhpcy5vblNlbGVjdChpdGVtLmlkKTtcclxuXHR9XHJcblxyXG5cdC8vIE92ZXJyaWRlIHRvIHNob3cgaWNvbiBwcmV2aWV3XHJcblx0cmVuZGVyU3VnZ2VzdGlvbihtYXRjaDogeyBpdGVtOiBJY29uT3B0aW9uIH0sIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgaXRlbSA9IG1hdGNoLml0ZW07XHJcblx0XHRlbC5hZGRDbGFzcygnbW9kLWNvbXBsZXgnKTtcclxuXHRcdGNvbnN0IGNvbnRlbnQgPSBlbC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLWNvbnRlbnQnIH0pO1xyXG5cdFx0Y29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLXRpdGxlJywgdGV4dDogaXRlbS5uYW1lIH0pO1xyXG5cdFx0XHJcblx0XHQvLyBDcmVhdGUgaWNvbiBwcmV2aWV3IHVzaW5nIE9ic2lkaWFuJ3Mgc2V0SWNvblxyXG5cdFx0Y29uc3QgYXV4ID0gZWwuY3JlYXRlRGl2KHsgY2xzOiAnc3VnZ2VzdGlvbi1hdXgnIH0pO1xyXG5cdFx0c2V0SWNvbihhdXguY3JlYXRlU3Bhbih7IGNsczogJ3N1Z2dlc3Rpb24tZmxhaXInIH0pLCBpdGVtLmlkKTtcclxuXHR9XHJcbn1cclxuXHJcbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdHJlc3VsdDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdHJlc29sdmVQcm9taXNlOiAoKHJlc3VsdDogYm9vbGVhbikgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHByaXZhdGUgbWVzc2FnZTogc3RyaW5nLCBwcml2YXRlIGNvbmZpcm1UZXh0OiBzdHJpbmcgPSBcIkNvbmZpcm1cIiwgcHJpdmF0ZSBjYW5jZWxUZXh0OiBzdHJpbmcgPSBcIkNhbmNlbFwiKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdH1cclxuXHJcblx0b25PcGVuKCkge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHRcdGNvbnRlbnRFbC5hZGRDbGFzcyhcImFzdHJvLWNvbXBvc2VyLWNvbmZpcm0tbW9kYWxcIik7XHJcblxyXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IHRoaXMubWVzc2FnZSB9KTtcclxuXHJcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcclxuXHJcblx0XHRjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xyXG5cdFx0XHR0ZXh0OiB0aGlzLmNhbmNlbFRleHQsXHJcblx0XHR9KTtcclxuXHRcdGNhbmNlbEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnJlc3VsdCA9IGZhbHNlO1xyXG5cdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHR9O1xyXG5cclxuXHRcdGNvbnN0IGNvbmZpcm1CdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xyXG5cdFx0XHR0ZXh0OiB0aGlzLmNvbmZpcm1UZXh0LFxyXG5cdFx0XHRjbHM6IFwibW9kLWN0YSBtb2Qtd2FybmluZ1wiLFxyXG5cdFx0fSk7XHJcblx0XHRjb25maXJtQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcblx0XHRcdHRoaXMucmVzdWx0ID0gdHJ1ZTtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKSB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdFx0aWYgKHRoaXMucmVzb2x2ZVByb21pc2UpIHtcclxuXHRcdFx0dGhpcy5yZXNvbHZlUHJvbWlzZSh0aGlzLnJlc3VsdCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhc3luYyB3YWl0Rm9yUmVzdWx0KCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcblx0XHRcdHRoaXMucmVzb2x2ZVByb21pc2UgPSByZXNvbHZlO1xyXG5cdFx0XHR0aGlzLm9wZW4oKTtcclxuXHRcdH0pO1xyXG5cdH1cclxufVxyXG5cclxuIiwgIi8qKlxyXG4gKiBDb21wYXRpYmlsaXR5IHV0aWxpdGllcyBmb3Igc2V0dGluZ3NcclxuICogUHJvdmlkZXMgYmFja3dhcmQgY29tcGF0aWJpbGl0eSBmb3IgU2V0dGluZ0dyb3VwIChyZXF1aXJlcyBBUEkgMS4xMS4wKylcclxuICovXHJcblxyXG5pbXBvcnQgeyBTZXR0aW5nLCByZXF1aXJlQXBpVmVyc2lvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0ICogYXMgT2JzaWRpYW5Nb2R1bGUgZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuLyoqXHJcbiAqIEludGVyZmFjZSB0aGF0IHdvcmtzIHdpdGggYm90aCBTZXR0aW5nR3JvdXAgYW5kIGZhbGxiYWNrIGNvbnRhaW5lclxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTZXR0aW5nc0NvbnRhaW5lciB7XHJcblx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIHNldHRpbmdzIGNvbnRhaW5lciB0aGF0IHVzZXMgU2V0dGluZ0dyb3VwIGlmIGF2YWlsYWJsZSAoQVBJIDEuMTEuMCspLFxyXG4gKiBvdGhlcndpc2UgZmFsbHMgYmFjayB0byBjcmVhdGluZyBhIGhlYWRpbmcgYW5kIHVzaW5nIHRoZSBjb250YWluZXIgZGlyZWN0bHkuXHJcbiAqIFxyXG4gKiBVc2VzIHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjAnKSB0byBjaGVjayBpZiBTZXR0aW5nR3JvdXAgaXMgYXZhaWxhYmxlLlxyXG4gKiBUaGlzIGlzIHRoZSBvZmZpY2lhbCBPYnNpZGlhbiBBUEkgbWV0aG9kIGZvciB2ZXJzaW9uIGNoZWNraW5nLlxyXG4gKiBcclxuICogQHBhcmFtIGNvbnRhaW5lckVsIC0gVGhlIGNvbnRhaW5lciBlbGVtZW50IGZvciBzZXR0aW5nc1xyXG4gKiBAcGFyYW0gaGVhZGluZyAtIFRoZSBoZWFkaW5nIHRleHQgZm9yIHRoZSBzZXR0aW5ncyBncm91cCAob3B0aW9uYWwpXHJcbiAqIEBwYXJhbSBtYW5pZmVzdElkIC0gVGhlIHBsdWdpbidzIG1hbmlmZXN0IElEIGZvciBDU1Mgc2NvcGluZyAocmVxdWlyZWQgZm9yIGZhbGxiYWNrIG1vZGUpXHJcbiAqIEByZXR1cm5zIEEgY29udGFpbmVyIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIHNldHRpbmdzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2V0dGluZ3NHcm91cChcclxuXHRjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXHJcblx0aGVhZGluZz86IHN0cmluZyxcclxuXHRtYW5pZmVzdElkPzogc3RyaW5nXHJcbik6IFNldHRpbmdzQ29udGFpbmVyIHtcclxuXHQvLyBDaGVjayBpZiBTZXR0aW5nR3JvdXAgaXMgYXZhaWxhYmxlIChBUEkgMS4xMS4wKylcclxuXHQvLyByZXF1aXJlQXBpVmVyc2lvbiBpcyB0aGUgb2ZmaWNpYWwgT2JzaWRpYW4gQVBJIG1ldGhvZCBmb3IgdmVyc2lvbiBjaGVja2luZ1xyXG5cdGlmIChyZXF1aXJlQXBpVmVyc2lvbignMS4xMS4wJykpIHtcclxuXHRcdC8vIFVzZSBTZXR0aW5nR3JvdXAgLSBpdCdzIGd1YXJhbnRlZWQgdG8gZXhpc3QgaWYgcmVxdWlyZUFwaVZlcnNpb24gcmV0dXJucyB0cnVlXHJcblx0XHQvLyBBY2Nlc3MgU2V0dGluZ0dyb3VwIHZpYSB0eXBlIGFzc2VydGlvbiBzaW5jZSBpdCBtYXkgbm90IGJlIGluIHR5cGUgZGVmaW5pdGlvbnNcclxuXHRcdC8vIGZvciBvbGRlciBUeXBlU2NyaXB0IHZlcnNpb25zLCBidXQgZXhpc3RzIGF0IHJ1bnRpbWUgaW4gT2JzaWRpYW4gMS4xMS4wK1xyXG5cdFx0Ly8gVXNpbmcgdW5rbm93biBpbnN0ZWFkIG9mIGFueSB0byBzYXRpc2Z5IGVzbGludCB3aGlsZSBtYWludGFpbmluZyB0eXBlIHNhZmV0eVxyXG5cdFx0Y29uc3QgU2V0dGluZ0dyb3VwQ2xhc3MgPSAoT2JzaWRpYW5Nb2R1bGUgYXMgdW5rbm93biBhcyB7IFNldHRpbmdHcm91cD86IG5ldyAoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSA9PiB7XHJcblx0XHRcdHNldEhlYWRpbmcoaGVhZGluZzogc3RyaW5nKToge1xyXG5cdFx0XHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKTogdm9pZDtcclxuXHRcdFx0fTtcclxuXHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xyXG5cdFx0fSB9KS5TZXR0aW5nR3JvdXA7XHJcblx0XHRcclxuXHRcdGlmIChTZXR0aW5nR3JvdXBDbGFzcykge1xyXG5cdFx0XHRjb25zdCBncm91cCA9IGhlYWRpbmcgXHJcblx0XHRcdFx0PyBuZXcgU2V0dGluZ0dyb3VwQ2xhc3MoY29udGFpbmVyRWwpLnNldEhlYWRpbmcoaGVhZGluZylcclxuXHRcdFx0XHQ6IG5ldyBTZXR0aW5nR3JvdXBDbGFzcyhjb250YWluZXJFbCk7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpIHtcclxuXHRcdFx0XHRcdGdyb3VwLmFkZFNldHRpbmcoY2IpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Ly8gRmFsbGJhY2sgcGF0aCAoZWl0aGVyIEFQSSA8IDEuMTEuMCBvciBTZXR0aW5nR3JvdXAgbm90IGZvdW5kKVxyXG5cdC8vIEFkZCBzY29waW5nIGNsYXNzIHRvIGNvbnRhaW5lckVsIHRvIHNjb3BlIENTUyB0byBvbmx5IHRoaXMgcGx1Z2luJ3Mgc2V0dGluZ3NcclxuXHRpZiAobWFuaWZlc3RJZCkge1xyXG5cdFx0Y29udGFpbmVyRWwuYWRkQ2xhc3MoYCR7bWFuaWZlc3RJZH0tc2V0dGluZ3MtY29tcGF0YCk7XHJcblx0fVxyXG5cdFxyXG5cdHtcclxuXHRcdC8vIEZhbGxiYWNrOiBDcmVhdGUgYSBoZWFkaW5nIG1hbnVhbGx5IGZvciBvbGRlciBBUEkgdmVyc2lvbnNcclxuXHRcdC8vIE5vdGU6IFdoaWxlIGJlc3QgcHJhY3RpY2UgcHJlZmVycyBTZXR0aW5nLnNldEhlYWRpbmcoKSwgdGhlIGZhbGxiYWNrIHBhdGhcclxuXHRcdC8vIGlzIGZvciB2ZXJzaW9ucyB0aGF0IG1heSBub3Qgc3VwcG9ydCBpdCwgc28gbWFudWFsIGhlYWRpbmcgaXMgYXBwcm9wcmlhdGUgaGVyZVxyXG5cdFx0aWYgKGhlYWRpbmcpIHtcclxuXHRcdFx0Y29uc3QgaGVhZGluZ0VsID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCdzZXR0aW5nLWdyb3VwLWhlYWRpbmcnKTtcclxuXHRcdFx0aGVhZGluZ0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogaGVhZGluZyB9KTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpIHtcclxuXHRcdFx0XHRjb25zdCBzZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpO1xyXG5cdFx0XHRcdGNiKHNldHRpbmcpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBNaWdyYXRpb25Db25mbGljdFJlc3VsdCB7XHJcblx0YWN0aW9uOiBcInNraXBcIiB8IFwibWlncmF0ZVwiO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTWlncmF0aW9uTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcblx0cmVzdWx0OiBNaWdyYXRpb25Db25mbGljdFJlc3VsdCB8IG51bGwgPSBudWxsO1xyXG5cdHJlc29sdmVQcm9taXNlOiAoKHJlc3VsdDogTWlncmF0aW9uQ29uZmxpY3RSZXN1bHQpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBjb25mbGljdHM6IHN0cmluZ1tdKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdH1cclxuXHJcblx0b25PcGVuKCkge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHRcdGNvbnRlbnRFbC5hZGRDbGFzcyhcImFzdHJvLWNvbXBvc2VyLW1pZ3JhdGlvbi1tb2RhbFwiKTtcclxuXHJcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiTWlncmF0aW9uIGNvbmZsaWN0IGRldGVjdGVkXCIgfSk7XHJcblxyXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7XHJcblx0XHRcdHRleHQ6IFwiWW91IGhhdmUgZXhpc3RpbmcgY29udGVudCB0eXBlcyB3aXRoIG5hbWVzIHRoYXQgY29uZmxpY3Qgd2l0aCBwb3N0cyBvciBwYWdlcy4gSG93IHdvdWxkIHlvdSBsaWtlIHRvIHByb2NlZWQ/XCIsXHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zdCBjb25mbGljdExpc3QgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJ1bFwiKTtcclxuXHRcdGNvbmZsaWN0TGlzdC5jcmVhdGVFbChcImxpXCIsIHsgdGV4dDogXCJTa2lwIG1pZ3JhdGlvbjoga2VlcCB5b3VyIGV4aXN0aW5nIHBvc3RzL3BhZ2VzIHNldHRpbmdzICh0aGV5IHdpbGwgYmUgaWdub3JlZClcIiB9KTtcclxuXHRcdGNvbmZsaWN0TGlzdC5jcmVhdGVFbChcImxpXCIsIHsgdGV4dDogXCJNaWdyYXRlIHdpdGggcmVuYW1lZCB0eXBlczogY3JlYXRlICdwb3N0cyAobWlncmF0ZWQpJyBhbmQgJ3BhZ2VzIChtaWdyYXRlZCknIGNvbnRlbnQgdHlwZXNcIiB9KTtcclxuXHJcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcclxuXHJcblx0XHRjb25zdCBza2lwQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcclxuXHRcdFx0dGV4dDogXCJTa2lwIG1pZ3JhdGlvblwiLFxyXG5cdFx0XHRjbHM6IFwibW9kLWN0YVwiLFxyXG5cdFx0fSk7XHJcblx0XHRza2lwQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcblx0XHRcdHRoaXMucmVzdWx0ID0geyBhY3Rpb246IFwic2tpcFwiIH07XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH07XHJcblxyXG5cdFx0Y29uc3QgbWlncmF0ZUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XHJcblx0XHRcdHRleHQ6IFwiTWlncmF0ZSB3aXRoIHJlbmFtZWQgdHlwZXNcIixcclxuXHRcdFx0Y2xzOiBcIm1vZC1jdGFcIixcclxuXHRcdH0pO1xyXG5cdFx0bWlncmF0ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnJlc3VsdCA9IHsgYWN0aW9uOiBcIm1pZ3JhdGVcIiB9O1xyXG5cdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0XHRpZiAodGhpcy5yZXNvbHZlUHJvbWlzZSAmJiB0aGlzLnJlc3VsdCkge1xyXG5cdFx0XHR0aGlzLnJlc29sdmVQcm9taXNlKHRoaXMucmVzdWx0KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIHdhaXRGb3JSZXN1bHQoKTogUHJvbWlzZTxNaWdyYXRpb25Db25mbGljdFJlc3VsdD4ge1xyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcblx0XHRcdHRoaXMucmVzb2x2ZVByb21pc2UgPSByZXNvbHZlO1xyXG5cdFx0XHR0aGlzLm9wZW4oKTtcclxuXHRcdH0pO1xyXG5cdH1cclxufVxyXG5cclxuIiwgImltcG9ydCB7IFRGaWxlLCBIZWFkaW5nQ2FjaGUsIEFwcCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQXN0cm9Db21wb3NlclNldHRpbmdzIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBtYXRjaGVzRm9sZGVyUGF0dGVybiwgc29ydEJ5UGF0dGVyblNwZWNpZmljaXR5IH0gZnJvbSBcIi4vcGF0aC1tYXRjaGluZ1wiO1xuXG5leHBvcnQgY2xhc3MgSGVhZGluZ0xpbmtHZW5lcmF0b3Ige1xuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHNldHRpbmdzOiBBc3Ryb0NvbXBvc2VyU2V0dGluZ3MpIHt9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIHRleHQgdG8ga2ViYWItY2FzZSBzbHVnIGZvciBVUkxzXG5cdCAqL1xuXHRwcml2YXRlIHRvS2ViYWJDYXNlKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gc3RyXG5cdFx0XHQudG9Mb3dlckNhc2UoKVxuXHRcdFx0LnJlcGxhY2UoL1teYS16MC05XFxzLV0vZywgXCJcIilcblx0XHRcdC50cmltKClcblx0XHRcdC5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKVxuXHRcdFx0LnJlcGxhY2UoLy0rL2csIFwiLVwiKVxuXHRcdFx0LnJlcGxhY2UoL14tfC0kL2csIFwiXCIpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldHMgdGhlIEFzdHJvLWNvbXBhdGlibGUgVVJMIGZyb20gYW4gaW50ZXJuYWwgbGluayAoY29waWVkIGZyb20gTGlua0NvbnZlcnRlcilcblx0ICovXG5cdHByaXZhdGUgZ2V0QXN0cm9VcmxGcm9tSW50ZXJuYWxMaW5rKGxpbms6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Y29uc3QgaGFzaEluZGV4ID0gbGluay5pbmRleE9mKCcjJyk7XG5cdFx0bGV0IHBhdGggPSBoYXNoSW5kZXggPj0gMCA/IGxpbmsuc2xpY2UoMCwgaGFzaEluZGV4KSA6IGxpbms7XG5cdFx0Y29uc3QgYW5jaG9yID0gaGFzaEluZGV4ID49IDAgPyBsaW5rLnNsaWNlKGhhc2hJbmRleCkgOiAnJztcblxuXHRcdHBhdGggPSBwYXRoLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXG5cdFx0Ly8gRGV0ZXJtaW5lIGNvbnRlbnQgdHlwZSBhbmQgYXBwcm9wcmlhdGUgYmFzZSBwYXRoXG5cdFx0bGV0IGJhc2VQYXRoID0gXCJcIjtcblx0XHRsZXQgY29udGVudEZvbGRlciA9IFwiXCI7XG5cdFx0bGV0IGNyZWF0aW9uTW9kZTogXCJmaWxlXCIgfCBcImZvbGRlclwiID0gXCJmaWxlXCI7XG5cdFx0bGV0IGluZGV4RmlsZU5hbWUgPSBcIlwiO1xuXG5cdFx0Ly8gQ2hlY2sgYWxsIGNvbnRlbnQgdHlwZXMsIHNvcnRlZCBieSBwYXR0ZXJuIHNwZWNpZmljaXR5IChtb3JlIHNwZWNpZmljIGZpcnN0KVxuXHRcdGNvbnN0IGNvbnRlbnRUeXBlcyA9IHRoaXMuc2V0dGluZ3MuY29udGVudFR5cGVzIHx8IFtdO1xuXHRcdGNvbnN0IHNvcnRlZFR5cGVzID0gc29ydEJ5UGF0dGVyblNwZWNpZmljaXR5KGNvbnRlbnRUeXBlcyk7XG5cdFx0XG5cdFx0Zm9yIChjb25zdCBjb250ZW50VHlwZSBvZiBzb3J0ZWRUeXBlcykge1xuXHRcdFx0aWYgKCFjb250ZW50VHlwZS5lbmFibGVkKSBjb250aW51ZTtcblx0XHRcdFxuXHRcdFx0bGV0IG1hdGNoZXMgPSBmYWxzZTtcblx0XHRcdFxuXHRcdFx0Ly8gSGFuZGxlIGJsYW5rIGZvbGRlciAocm9vdCkgLSBtYXRjaGVzIGZpbGVzIGluIHZhdWx0IHJvb3Qgb25seVxuXHRcdFx0aWYgKCFjb250ZW50VHlwZS5mb2xkZXIgfHwgY29udGVudFR5cGUuZm9sZGVyLnRyaW0oKSA9PT0gXCJcIikge1xuXHRcdFx0XHRpZiAoIXBhdGguaW5jbHVkZXMoXCIvXCIpIHx8IHBhdGguc3BsaXQoXCIvXCIpLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0XHRcdG1hdGNoZXMgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKG1hdGNoZXNGb2xkZXJQYXR0ZXJuKHBhdGgsIGNvbnRlbnRUeXBlLmZvbGRlcikpIHtcblx0XHRcdFx0bWF0Y2hlcyA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGlmIChtYXRjaGVzKSB7XG5cdFx0XHRcdGNvbnRlbnRGb2xkZXIgPSBjb250ZW50VHlwZS5mb2xkZXIgfHwgXCJcIjtcblx0XHRcdFx0YmFzZVBhdGggPSBjb250ZW50VHlwZS5saW5rQmFzZVBhdGggfHwgXCJcIjtcblx0XHRcdFx0Y3JlYXRpb25Nb2RlID0gY29udGVudFR5cGUuY3JlYXRpb25Nb2RlO1xuXHRcdFx0XHRpbmRleEZpbGVOYW1lID0gY29udGVudFR5cGUuaW5kZXhGaWxlTmFtZSB8fCBcIlwiO1xuXHRcdFx0XHRicmVhazsgLy8gTW9zdCBzcGVjaWZpYyBwYXR0ZXJuIHdpbnNcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBTdHJpcCBjb250ZW50IGZvbGRlciBpZiBwcmVzZW50XG5cdFx0aWYgKGNvbnRlbnRGb2xkZXIpIHtcblx0XHRcdHBhdGggPSBwYXRoLnNsaWNlKGNvbnRlbnRGb2xkZXIubGVuZ3RoICsgMSk7XG5cdFx0fVxuXG5cdFx0bGV0IGFkZFRyYWlsaW5nU2xhc2ggPSBmYWxzZTtcblx0XHRcblx0XHQvLyBTbWFydCBkZXRlY3Rpb246IGlmIHRoZSBmaWxlbmFtZSBtYXRjaGVzIHRoZSBpbmRleCBmaWxlIG5hbWUgKHJlZ2FyZGxlc3Mgb2YgY3JlYXRpb24gbW9kZSksXG5cdFx0Ly8gdHJlYXQgaXQgYXMgZm9sZGVyLWJhc2VkIGxvZ2ljXG5cdFx0Ly8gTm90ZTogV2Ugb25seSBzZXQgYWRkVHJhaWxpbmdTbGFzaCBoZXJlOyB0aGUgZmluYWwgY2hlY2sgd2lsbCBwcmV2ZW50IGl0IGlmIHRoZXJlJ3MgYW4gYW5jaG9yXG5cdFx0aWYgKGluZGV4RmlsZU5hbWUgJiYgaW5kZXhGaWxlTmFtZS50cmltKCkgIT09IFwiXCIpIHtcblx0XHRcdGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLycpO1xuXHRcdFx0aWYgKHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdID09PSBpbmRleEZpbGVOYW1lKSB7XG5cdFx0XHRcdHBhcnRzLnBvcCgpO1xuXHRcdFx0XHRwYXRoID0gcGFydHMuam9pbignLycpO1xuXHRcdFx0XHRhZGRUcmFpbGluZ1NsYXNoID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGNyZWF0aW9uTW9kZSA9PT0gXCJmb2xkZXJcIikge1xuXHRcdFx0Ly8gRmFsbGJhY2sgdG8gb3JpZ2luYWwgbG9naWMgaWYgbm8gaW5kZXggZmlsZSBuYW1lIGlzIHNwZWNpZmllZFxuXHRcdFx0Ly8gRGVmYXVsdCB0byBcImluZGV4XCIgd2hlbiBpbmRleEZpbGVOYW1lIGlzIGJsYW5rXG5cdFx0XHRjb25zdCBkZWZhdWx0SW5kZXhOYW1lID0gXCJpbmRleFwiO1xuXHRcdFx0Y29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcvJyk7XG5cdFx0XHRpZiAocGFydHNbcGFydHMubGVuZ3RoIC0gMV0gPT09IGRlZmF1bHRJbmRleE5hbWUpIHtcblx0XHRcdFx0cGFydHMucG9wKCk7XG5cdFx0XHRcdHBhdGggPSBwYXJ0cy5qb2luKCcvJyk7XG5cdFx0XHRcdGFkZFRyYWlsaW5nU2xhc2ggPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IHNsdWdQYXJ0cyA9IHBhdGguc3BsaXQoJy8nKS5tYXAocGFydCA9PiB0aGlzLnRvS2ViYWJDYXNlKHBhcnQpKTtcblx0XHRjb25zdCBzbHVnID0gc2x1Z1BhcnRzLmpvaW4oJy8nKTtcblxuXHRcdC8vIEZvcm1hdCBiYXNlIHBhdGhcblx0XHRpZiAoYmFzZVBhdGgpIHtcblx0XHRcdGlmICghYmFzZVBhdGguc3RhcnRzV2l0aChcIi9cIikpIGJhc2VQYXRoID0gXCIvXCIgKyBiYXNlUGF0aDtcblx0XHRcdGlmICghYmFzZVBhdGguZW5kc1dpdGgoXCIvXCIpKSBiYXNlUGF0aCArPSBcIi9cIjtcblx0XHR9XG5cblx0XHQvLyBEZXRlcm1pbmUgaWYgd2Ugc2hvdWxkIGFkZCB0cmFpbGluZyBzbGFzaFxuXHRcdC8vIENSSVRJQ0FMOiBOZXZlciBhZGQgdHJhaWxpbmcgc2xhc2ggYmVmb3JlIGFuIGFuY2hvciAoZS5nLiwgL2Fib3V0I2hlYWRpbmcgbm90IC9hYm91dC8jaGVhZGluZylcblx0XHQvLyBUaGlzIGlzIGVzcGVjaWFsbHkgaW1wb3J0YW50IGZvciBhbmNob3IgbGlua3MgZnJvbSBjb3B5IGhlYWRpbmcgVVJMIGZ1bmN0aW9uYWxpdHlcblx0XHQvLyBBbmNob3IgbGlua3Mgc2hvdWxkIE5FVkVSIGhhdmUgdHJhaWxpbmcgc2xhc2hlcywgcmVnYXJkbGVzcyBvZiBzZXR0aW5nc1xuXHRcdGNvbnN0IHNob3VsZEFkZFRyYWlsaW5nU2xhc2ggPSAodGhpcy5zZXR0aW5ncy5hZGRUcmFpbGluZ1NsYXNoVG9MaW5rcyB8fCBhZGRUcmFpbGluZ1NsYXNoKSAmJiAhYW5jaG9yO1xuXG5cdFx0cmV0dXJuIGAke2Jhc2VQYXRofSR7c2x1Z30ke3Nob3VsZEFkZFRyYWlsaW5nU2xhc2ggPyAnLycgOiAnJ30ke2FuY2hvcn1gO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdlbmVyYXRlcyBhIHN0YW5kYXJkIE9ic2lkaWFuIGxpbmsgdG8gYSBoZWFkaW5nLCByZXNwZWN0aW5nIHVzZXIncyBsaW5rIGZvcm1hdCBwcmVmZXJlbmNlXG5cdCAqL1xuXHRnZW5lcmF0ZU9ic2lkaWFuTGluayhhcHA6IEFwcCwgZmlsZTogVEZpbGUsIGhlYWRpbmc6IEhlYWRpbmdDYWNoZSk6IHN0cmluZyB7XG5cdFx0Y29uc3QgaGVhZGluZ1RleHQgPSBoZWFkaW5nLmhlYWRpbmc7XG5cdFx0XG5cdFx0Ly8gQ2hlY2sgaWYgdXNlciBwcmVmZXJzIHdpa2lsaW5rcyBieSB0ZXN0aW5nIE9ic2lkaWFuJ3MgZGVmYXVsdCBiZWhhdmlvclxuXHRcdGNvbnN0IHRlc3RMaW5rID0gYXBwLmZpbGVNYW5hZ2VyLmdlbmVyYXRlTWFya2Rvd25MaW5rKGZpbGUsICcnLCAnJyk7XG5cdFx0aWYgKHRlc3RMaW5rLnN0YXJ0c1dpdGgoJ1tbJykpIHtcblx0XHRcdC8vIFVzZXIgcHJlZmVycyB3aWtpbGlua3MgLSB1c2UganVzdCB0aGUgZmlsZW5hbWUgKGJhc2VuYW1lKSB3aXRob3V0IHBhdGhcblx0XHRcdGNvbnN0IGZpbGVOYW1lID0gZmlsZS5iYXNlbmFtZTtcblx0XHRcdHJldHVybiBgW1ske2ZpbGVOYW1lfSMke2hlYWRpbmdUZXh0fXwke2hlYWRpbmdUZXh0fV1dYDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gVXNlciBwcmVmZXJzIG1hcmtkb3duIGxpbmtzIC0gdXNlIE9ic2lkaWFuJ3MgbWV0aG9kIHdpdGggaGVhZGluZyB0ZXh0IGFzLWlzIChVUkwtZW5jb2RlZClcblx0XHRcdC8vIEdldCB0aGUgYmFzZSBsaW5rIGZyb20gT2JzaWRpYW4gKHJlc3BlY3RzIHVzZXIncyBwYXRoIHNldHRpbmdzKVxuXHRcdFx0Y29uc3QgYmFzZUxpbmsgPSBhcHAuZmlsZU1hbmFnZXIuZ2VuZXJhdGVNYXJrZG93bkxpbmsoZmlsZSwgJycsICcnKTtcblx0XHRcdC8vIEV4dHJhY3QgdGhlIHBhdGggcGFydCBhbmQgYWRkIG91ciBhbmNob3Igd2l0aCBwcm9wZXIgZGlzcGxheSB0ZXh0XG5cdFx0XHRpZiAoYmFzZUxpbmsuc3RhcnRzV2l0aCgnW1snKSkge1xuXHRcdFx0XHQvLyBUaGlzIHNob3VsZG4ndCBoYXBwZW4gc2luY2Ugd2UncmUgaW4gdGhlIG1hcmtkb3duIGJyYW5jaCwgYnV0IGp1c3QgaW4gY2FzZVxuXHRcdFx0XHRjb25zdCBmaWxlTmFtZSA9IGZpbGUuYmFzZW5hbWU7XG5cdFx0XHRcdHJldHVybiBgW1ske2ZpbGVOYW1lfSMke2hlYWRpbmdUZXh0fXwke2hlYWRpbmdUZXh0fV1dYDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEV4dHJhY3QgdGhlIHBhdGggZnJvbSB0aGUgZ2VuZXJhdGVkIGxpbmsgYW5kIHJlY29uc3RydWN0IHdpdGggcHJvcGVyIGRpc3BsYXkgdGV4dFxuXHRcdFx0XHRjb25zdCBtYXRjaCA9IGJhc2VMaW5rLm1hdGNoKC9cXFsoW15cXF1dKylcXF1cXCgoW14pXSspXFwpLyk7XG5cdFx0XHRcdGlmIChtYXRjaCkge1xuXHRcdFx0XHRcdGNvbnN0IFssICwgcGF0aF0gPSBtYXRjaDtcblx0XHRcdFx0XHQvLyBGb3IgT2JzaWRpYW4sIHVzZSB0aGUgaGVhZGluZyB0ZXh0IGFzLWlzIChVUkwtZW5jb2RlZCksIG5vdCBrZWJhYi1jYXNlXG5cdFx0XHRcdFx0cmV0dXJuIGBbJHtoZWFkaW5nVGV4dH1dKCR7cGF0aH0jJHtlbmNvZGVVUklDb21wb25lbnQoaGVhZGluZ1RleHQpfSlgO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIEZhbGxiYWNrIHRvIG1hbnVhbCBjb25zdHJ1Y3Rpb25cblx0XHRcdFx0XHRjb25zdCBlbmNvZGVkRmlsZW5hbWUgPSBlbmNvZGVVUklDb21wb25lbnQoZmlsZS5uYW1lKTtcblx0XHRcdFx0XHQvLyBGb3IgT2JzaWRpYW4sIHVzZSB0aGUgaGVhZGluZyB0ZXh0IGFzLWlzIChVUkwtZW5jb2RlZClcblx0XHRcdFx0XHRyZXR1cm4gYFske2hlYWRpbmdUZXh0fV0oJHtlbmNvZGVkRmlsZW5hbWV9IyR7ZW5jb2RlVVJJQ29tcG9uZW50KGhlYWRpbmdUZXh0KX0pYDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBHZW5lcmF0ZXMgYSBzdGFuZGFyZCBPYnNpZGlhbiB3aWtpbGluayB0byBhIGhlYWRpbmdcblx0ICovXG5cdGdlbmVyYXRlT2JzaWRpYW5XaWtpbGluayhmaWxlOiBURmlsZSwgaGVhZGluZzogSGVhZGluZ0NhY2hlKTogc3RyaW5nIHtcblx0XHRjb25zdCBoZWFkaW5nVGV4dCA9IGhlYWRpbmcuaGVhZGluZztcblx0XHQvLyBVc2UganVzdCB0aGUgZmlsZW5hbWUgKGJhc2VuYW1lKSwgbm90IHRoZSBmdWxsIHBhdGhcblx0XHRjb25zdCBmaWxlTmFtZSA9IGZpbGUuYmFzZW5hbWU7XG5cdFx0cmV0dXJuIGBbWyR7ZmlsZU5hbWV9IyR7aGVhZGluZ1RleHR9fCR7aGVhZGluZ1RleHR9XV1gO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdlbmVyYXRlcyBhbiBBc3Ryby1jb21wYXRpYmxlIG1hcmtkb3duIGxpbmsgdG8gYSBoZWFkaW5nXG5cdCAqL1xuXHRnZW5lcmF0ZUFzdHJvTGluayhmaWxlOiBURmlsZSwgaGVhZGluZzogSGVhZGluZ0NhY2hlKTogc3RyaW5nIHtcblx0XHRjb25zdCBoZWFkaW5nVGV4dCA9IGhlYWRpbmcuaGVhZGluZztcblx0XHRjb25zdCBhbmNob3IgPSB0aGlzLnRvS2ViYWJDYXNlKGhlYWRpbmdUZXh0KTtcblx0XHQvLyBVc2UgdGhlIHNhbWUgbG9naWMgYXMgdGhlIGV4aXN0aW5nIGxpbmsgY29udmVydGVyXG5cdFx0Y29uc3QgaW50ZXJuYWxMaW5rID0gYCR7ZmlsZS5wYXRofSMke2FuY2hvcn1gO1xuXHRcdGNvbnN0IGFzdHJvVXJsID0gdGhpcy5nZXRBc3Ryb1VybEZyb21JbnRlcm5hbExpbmsoaW50ZXJuYWxMaW5rKTtcblx0XHRyZXR1cm4gYFske2hlYWRpbmdUZXh0fV0oJHthc3Ryb1VybH0pYDtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZW5lcmF0ZXMgYW4gQXN0cm8tY29tcGF0aWJsZSB3aWtpbGluayB0byBhIGhlYWRpbmdcblx0ICovXG5cdGdlbmVyYXRlQXN0cm9XaWtpbGluayhmaWxlOiBURmlsZSwgaGVhZGluZzogSGVhZGluZ0NhY2hlKTogc3RyaW5nIHtcblx0XHRjb25zdCBoZWFkaW5nVGV4dCA9IGhlYWRpbmcuaGVhZGluZztcblx0XHRjb25zdCBhbmNob3IgPSB0aGlzLnRvS2ViYWJDYXNlKGhlYWRpbmdUZXh0KTtcblx0XHQvLyBVc2UgdGhlIHNhbWUgbG9naWMgYXMgdGhlIGV4aXN0aW5nIGxpbmsgY29udmVydGVyXG5cdFx0Y29uc3QgaW50ZXJuYWxMaW5rID0gYCR7ZmlsZS5wYXRofSMke2FuY2hvcn1gO1xuXHRcdGNvbnN0IGFzdHJvVXJsID0gdGhpcy5nZXRBc3Ryb1VybEZyb21JbnRlcm5hbExpbmsoaW50ZXJuYWxMaW5rKTtcblx0XHQvLyBDcmVhdGUgYSB3aWtpbGluayB3aXRoIHRoZSBBc3RybyBVUkwgYXMgdGhlIHRhcmdldFxuXHRcdHJldHVybiBgW1ske2hlYWRpbmdUZXh0fXwke2FzdHJvVXJsfV1dYDtcblx0fVxuXG5cdC8qKlxuXHQgKiBFeHRyYWN0cyB0aGUgVVJMIGZyb20gYSBtYXJrZG93biBsaW5rIG9yIHdpa2lsaW5rXG5cdCAqL1xuXHRleHRyYWN0VXJsKGxpbms6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Ly8gSGFuZGxlIG1hcmtkb3duIGxpbmtzOiBbdGV4dF0odXJsKVxuXHRcdGNvbnN0IG1hcmtkb3duTWF0Y2ggPSBsaW5rLm1hdGNoKC9cXFsoW15cXF1dKylcXF1cXCgoW14pXSspXFwpLyk7XG5cdFx0aWYgKG1hcmtkb3duTWF0Y2gpIHtcblx0XHRcdHJldHVybiBtYXJrZG93bk1hdGNoWzJdO1xuXHRcdH1cblx0XHRcblx0XHQvLyBIYW5kbGUgd2lraWxpbmtzOiBbW3BhdGgjaGVhZGluZ3x0ZXh0XV0gb3IgW1twYXRoI2hlYWRpbmddXVxuXHRcdGNvbnN0IHdpa2lsaW5rTWF0Y2ggPSBsaW5rLm1hdGNoKC9cXFtcXFsoW15cXF1dKylcXF1cXF0vKTtcblx0XHRpZiAod2lraWxpbmtNYXRjaCkge1xuXHRcdFx0Y29uc3QgY29udGVudCA9IHdpa2lsaW5rTWF0Y2hbMV07XG5cdFx0XHQvLyBFeHRyYWN0IHRoZSBwYXRoIHBhcnQgKGJlZm9yZSB8IGlmIHByZXNlbnQpXG5cdFx0XHRjb25zdCBwYXRoUGFydCA9IGNvbnRlbnQuc3BsaXQoJ3wnKVswXTtcblx0XHRcdHJldHVybiBwYXRoUGFydDtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gSWYgaXQgZG9lc24ndCBtYXRjaCBlaXRoZXIgZm9ybWF0LCByZXR1cm4gYXMtaXMgKG1pZ2h0IGFscmVhZHkgYmUgYSBVUkwpXG5cdFx0cmV0dXJuIGxpbms7XG5cdH1cblxuXHQvKipcblx0ICogR2VuZXJhdGVzIHRoZSBhcHByb3ByaWF0ZSBsaW5rIGZvcm1hdCBiYXNlZCBvbiBzZXR0aW5nc1xuXHQgKi9cblx0Z2VuZXJhdGVMaW5rKGFwcDogQXBwLCBmaWxlOiBURmlsZSwgaGVhZGluZzogSGVhZGluZ0NhY2hlKTogc3RyaW5nIHtcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5jb3B5SGVhZGluZ0xpbmtGb3JtYXQgPT09IFwiYXN0cm9cIikge1xuXHRcdFx0Ly8gQXN0cm8gZm9ybWF0IGFsd2F5cyB1c2VzIG1hcmtkb3duIGxpbmtzICh3aWtpbGlua3Mgd2l0aCBBc3RybyBVUkxzIGRvbid0IG1ha2Ugc2Vuc2UpXG5cdFx0XHRyZXR1cm4gdGhpcy5nZW5lcmF0ZUFzdHJvTGluayhmaWxlLCBoZWFkaW5nKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gVXNlIE9ic2lkaWFuJ3MgYnVpbHQtaW4gbWV0aG9kIHdoaWNoIHJlc3BlY3RzIHVzZXIgc2V0dGluZ3Ncblx0XHRcdHJldHVybiB0aGlzLmdlbmVyYXRlT2JzaWRpYW5MaW5rKGFwcCwgZmlsZSwgaGVhZGluZyk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEZpbmRzIHRoZSBoZWFkaW5nIGF0IGEgc3BlY2lmaWMgbGluZSBpbiBhIGZpbGVcblx0ICovXG5cdGZpbmRIZWFkaW5nQXRMaW5lKGFwcDogQXBwLCBmaWxlOiBURmlsZSwgbGluZTogbnVtYmVyKTogSGVhZGluZ0NhY2hlIHwgbnVsbCB7XG5cdFx0Y29uc3QgY2FjaGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG5cdFx0aWYgKCFjYWNoZSB8fCAhY2FjaGUuaGVhZGluZ3MpIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdC8vIEZpbmQgdGhlIGhlYWRpbmcgdGhhdCBjb250YWlucyB0aGlzIGxpbmVcblx0XHRmb3IgKGxldCBpID0gY2FjaGUuaGVhZGluZ3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdGNvbnN0IGhlYWRpbmcgPSBjYWNoZS5oZWFkaW5nc1tpXTtcblx0XHRcdGlmIChoZWFkaW5nLnBvc2l0aW9uLnN0YXJ0LmxpbmUgPD0gbGluZSkge1xuXHRcdFx0XHRyZXR1cm4gaGVhZGluZztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsb0JBT087OztBQ2dGQSxJQUFNLG1CQUFtQixDQUFDLFFBQVEsV0FBVyxZQUFZO0FBRXpELElBQU0sWUFBWTtBQUFBLEVBQ3hCLGFBQWE7QUFBQSxFQUNiLHNCQUFzQjtBQUFBLEVBQ3RCLHdCQUF3QjtBQUFBLEVBQ3hCLDRCQUE0QjtBQUM3Qjs7O0FDekZPLElBQU0sbUJBQTBDO0FBQUEsRUFDdEQsaUJBQ0M7QUFBQSxFQUNELHNCQUFzQjtBQUFBLEVBQ3RCLFlBQVk7QUFBQSxFQUNaLHVCQUF1QjtBQUFBLEVBQ3ZCLHVCQUF1QjtBQUFBLEVBQ3ZCLHlCQUF5QjtBQUFBLEVBQ3pCLDJCQUEyQjtBQUFBLEVBQzNCLHlCQUF5QjtBQUFBLEVBQ3pCLHlCQUF5QjtBQUFBLEVBQ3pCLDRCQUE0QjtBQUFBLEVBQzVCLDBCQUEwQjtBQUFBLEVBQzFCLDZC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QUM5QyxXQUFXO0FBQUEsVUFDWCxTQUFTO0FBQUEsUUFDVixDQUFDO0FBQUEsTUFDRjtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQUEsRUFFUSxvQkFBb0I7QUFFM0IsYUFBUyxLQUFLLFlBQVksaUNBQWlDO0FBRzNELFFBQUksS0FBSyxrQkFBa0I7QUFDMUIsV0FBSyxpQkFBaUIsT0FBTztBQUM3QixXQUFLLG1CQUFtQjtBQUFBLElBQ3pCO0FBR0EsU0FBSyxvQkFBb0I7QUFBQSxFQUMxQjtBQUFBLEVBRVEsaUNBQWlDLGFBQTBCO0FBNW1DcEU7QUE2bUNFLFVBQU0seUJBQXlCLENBQUMsS0FBSyxTQUFTLDRCQUE0QixDQUFDLEtBQUssU0FBUztBQUN6RixVQUFNLHVCQUF1QixDQUFDLEtBQUssU0FBUywwQkFBMEIsQ0FBQyxLQUFLLFNBQVM7QUFHckYsVUFBTSxZQUFZLFlBQVksaUJBQWlCLFlBQVk7QUFDM0QsZUFBVyxRQUFRLE1BQU0sS0FBSyxTQUFTLEdBQUc7QUFFekMsWUFBTSxNQUFNLEtBQUssY0FBYyxLQUFLO0FBQ3BDLFVBQUksS0FBSztBQUNSLGNBQU0sV0FBVyxJQUFJLGFBQWEsYUFBYSxLQUM5QyxJQUFJLGFBQWEsY0FBYyxNQUM5QixJQUFJLFVBQVUsU0FBUyx3QkFBd0IsSUFBSSxvQkFBb0IsVUFDdkUsSUFBSSxVQUFVLFNBQVMsZUFBZSxJQUFJLFdBQVc7QUFHdkQsWUFBSSwwQkFBMEIsYUFBYSxtQkFBbUI7QUFDN0QsZ0JBQU0sYUFBVyxVQUFLLGdCQUFMLG1CQUFrQixrQkFBaUI7QUFDcEQsY0FBSSxTQUFTLFNBQVMsVUFBVSxLQUFLLFNBQVMsU0FBUyxrQkFBa0IsR0FBRztBQUMzRSxpQkFBSyxPQUFPO0FBQUEsVUFDYjtBQUFBLFFBQ0Q7QUFHQSxZQUFJLHdCQUF3QixhQUFhLFVBQVU7QUFDbEQsZ0JBQU0sYUFBVyxVQUFLLGdCQUFMLG1CQUFrQixrQkFBaUI7QUFDcEQsY0FBSSxTQUFTLFNBQVMsUUFBUSxLQUFLLFNBQVMsU0FBUyxjQUFjLEdBQUc7QUFDckUsaUJBQUssT0FBTztBQUFBLFVBQ2I7QUFBQSxRQUNEO0FBQUEsTUFDRDtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQ0Q7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAibmV3RmlsZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJjb250ZW50VHlwZSIsICJfYSIsICJoYXNNYXRjaGluZ0NvbnRlbnRUeXBlIiwgInNldHRpbmdzIiwgInBsdWdpbkludGVyZmFjZSIsICJmaWxlIiwgInR5cGUiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJ0b2dnbGUiLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgInZhdWx0QWN0aW9ucyJdCn0K
