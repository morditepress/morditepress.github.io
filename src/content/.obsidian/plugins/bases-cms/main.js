/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/utils/mdx-frontmatter.ts
function isMdxFile(file) {
  return file.extension === "mdx";
}
function parseMdxFrontmatter(content) {
  const frontmatterRegex = /^---\n([\s\S]*?)\n---\n/;
  const match = content.match(frontmatterRegex);
  if (!match) {
    return {
      frontmatter: {},
      body: content
    };
  }
  const frontmatterText = match[1];
  const bodyContent = content.slice(match[0].length);
  try {
    const parsed = (0, import_obsidian5.parseYaml)(frontmatterText);
    const frontmatter = parsed && typeof parsed === "object" ? parsed : {};
    return {
      frontmatter,
      body: bodyContent
    };
  } catch (e) {
    console.error("Error parsing MDX properties:", e);
    return {
      frontmatter: {},
      body: bodyContent
    };
  }
}
async function readMdxFrontmatter(app, file) {
  if (!isMdxFile(file)) {
    return null;
  }
  try {
    const content = await app.vault.read(file);
    const parsed = parseMdxFrontmatter(content);
    return parsed ? parsed.frontmatter : null;
  } catch (e) {
    console.error(`Error reading MDX properties from ${file.path}:`, e);
    return null;
  }
}
async function processMdxFrontMatter(app, file, callback) {
  if (!isMdxFile(file)) {
    throw new Error(`File ${file.path} is not an MDX file`);
  }
  try {
    const content = await app.vault.read(file);
    const parsed = parseMdxFrontmatter(content);
    if (!parsed) {
      throw new Error("Failed to parse existing frontmatter");
    }
    const frontmatter = { ...parsed.frontmatter };
    callback(frontmatter);
    const newFrontmatterText = (0, import_obsidian5.stringifyYaml)(frontmatter).trim();
    const newContent = `---
${newFrontmatterText}
---
${parsed.body}`;
    await app.vault.modify(file, newContent);
  } catch (e) {
    console.error(`Error processing MDX properties for ${file.path}:`, e);
    throw e;
  }
}
var import_obsidian5;
var init_mdx_frontmatter = __esm({
  "src/utils/mdx-frontmatter.ts"() {
    "use strict";
    import_obsidian5 = require("obsidian");
  }
});

// src/utils/frontmatter-helper.ts
async function getFileFrontmatter(app, file) {
  if (isMdxFile(file)) {
    return await readMdxFrontmatter(app, file);
  } else {
    const metadata = app.metadataCache.getFileCache(file);
    return (metadata == null ? void 0 : metadata.frontmatter) || null;
  }
}
async function processFileFrontMatter(app, file, callback) {
  if (isMdxFile(file)) {
    await processMdxFrontMatter(app, file, callback);
  } else {
    await app.fileManager.processFrontMatter(file, callback);
  }
}
var init_frontmatter_helper = __esm({
  "src/utils/frontmatter-helper.ts"() {
    "use strict";
    init_mdx_frontmatter();
  }
});

// src/shared/settings-schema.ts
var settings_schema_exports = {};
__export(settings_schema_exports, {
  getCMSViewOptions: () => getCMSViewOptions,
  readCMSSettings: () => readCMSSettings
});
function readCMSSettings(config, pluginSettings) {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u;
  const getConfig = (key) => {
    var _a2;
    return (_a2 = config == null ? void 0 : config.get) == null ? void 0 : _a2.call(config, key);
  };
  return {
    titleProperty: getConfig("titleProperty") || "",
    descriptionProperty: getConfig("descriptionProperty") || "",
    imageProperty: getConfig("imageProperty") || "",
    showTitle: true,
    // Always show title, defaulting to file name if no property set
    showDate: (_a = getConfig("showDate")) != null ? _a : false,
    dateProperty: getConfig("dateProperty") || "",
    dateIncludeTime: (_b = getConfig("dateIncludeTime")) != null ? _b : false,
    showTextPreview: (_c = getConfig("showTextPreview")) != null ? _c : true,
    fallbackToContent: (_d = getConfig("fallbackToContent")) != null ? _d : true,
    truncatePreviewProperty: (_e = getConfig("truncatePreviewProperty")) != null ? _e : false,
    fallbackToEmbeds: (() => {
      const value = getConfig("fallbackToEmbeds");
      if (value === "always" || value === "if-empty" || value === "never") {
        return value;
      }
      return value === false ? "never" : "if-empty";
    })(),
    propertyDisplay1: getConfig("propertyDisplay1") || "",
    propertyDisplay2: getConfig("propertyDisplay2") || "",
    propertyDisplay3: getConfig("propertyDisplay3") || "",
    propertyDisplay4: getConfig("propertyDisplay4") || "",
    propertyDisplay5: getConfig("propertyDisplay5") || "",
    propertyDisplay6: getConfig("propertyDisplay6") || "",
    propertyDisplay7: getConfig("propertyDisplay7") || "",
    propertyDisplay8: getConfig("propertyDisplay8") || "",
    propertyDisplay9: getConfig("propertyDisplay9") || "",
    propertyDisplay10: getConfig("propertyDisplay10") || "",
    propertyDisplay11: getConfig("propertyDisplay11") || "",
    propertyDisplay12: getConfig("propertyDisplay12") || "",
    propertyDisplay13: getConfig("propertyDisplay13") || "",
    propertyDisplay14: getConfig("propertyDisplay14") || "",
    propertyLayout12SideBySide: (_f = getConfig("propertyLayout12SideBySide")) != null ? _f : false,
    propertyLayout34SideBySide: (_g = getConfig("propertyLayout34SideBySide")) != null ? _g : false,
    propertyLayout56SideBySide: (_h = getConfig("propertyLayout56SideBySide")) != null ? _h : false,
    propertyLayout78SideBySide: (_i = getConfig("propertyLayout78SideBySide")) != null ? _i : false,
    propertyLayout910SideBySide: (_j = getConfig("propertyLayout910SideBySide")) != null ? _j : false,
    propertyLayout1112SideBySide: (_k = getConfig("propertyLayout1112SideBySide")) != null ? _k : false,
    propertyLayout1314SideBySide: (_l = getConfig("propertyLayout1314SideBySide")) != null ? _l : false,
    propertyGroup1Position: getConfig("propertyGroup1Position") || "bottom",
    propertyGroup2Position: getConfig("propertyGroup2Position") || "bottom",
    propertyGroup3Position: getConfig("propertyGroup3Position") || "bottom",
    propertyGroup4Position: getConfig("propertyGroup4Position") || "bottom",
    propertyGroup5Position: getConfig("propertyGroup5Position") || "bottom",
    propertyGroup6Position: getConfig("propertyGroup6Position") || "bottom",
    propertyGroup7Position: getConfig("propertyGroup7Position") || "bottom",
    imageFormat: getConfig("imageFormat") || "thumbnail",
    imagePosition: getConfig("imagePosition") || "right",
    propertyLabels: getConfig("propertyLabels") || "hide",
    showDraftStatus: (_m = getConfig("showDraftStatus")) != null ? _m : false,
    draftStatusProperty: getConfig("draftStatusProperty") || "",
    draftStatusReverse: (_n = getConfig("draftStatusReverse")) != null ? _n : false,
    draftStatusUseFilenamePrefix: (_o = getConfig("draftStatusUseFilenamePrefix")) != null ? _o : false,
    showTags: (_p = getConfig("showTags")) != null ? _p : false,
    tagsProperty: getConfig("tagsProperty") || "",
    maxTagsToShow: (_q = getConfig("maxTagsToShow")) != null ? _q : 3,
    customizeNewButton: (_r = getConfig("customizeNewButton")) != null ? _r : false,
    newNoteLocation: getConfig("newNoteLocation") || "",
    hideQuickEditIcon: (_s = getConfig("hideQuickEditIcon")) != null ? _s : false,
    cardSize: (_t = getConfig("cardSize")) != null ? _t : 250,
    imageAspectRatio: (_u = getConfig("imageAspectRatio")) != null ? _u : 0.55
  };
}
function getCMSViewOptions() {
  return [
    // Card size (standalone)
    {
      type: "slider",
      displayName: "Card size",
      key: "cardSize",
      min: 50,
      max: 800,
      step: 10,
      default: 250
    },
    // Title group
    {
      type: "group",
      displayName: "Title",
      items: [
        {
          type: "property",
          displayName: "Title property",
          key: "titleProperty",
          placeholder: "Select property",
          default: ""
        }
      ]
    },
    // Text preview group
    {
      type: "group",
      displayName: "Text preview",
      items: [
        {
          type: "toggle",
          displayName: "Show text preview",
          key: "showTextPreview",
          default: true
        },
        {
          type: "property",
          displayName: "Text preview property",
          key: "descriptionProperty",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Use note content if text preview property unavailable",
          key: "fallbackToContent",
          default: true
        },
        {
          type: "toggle",
          displayName: "Truncate preview property",
          key: "truncatePreviewProperty",
          default: false
        }
      ]
    },
    // Image group
    {
      type: "group",
      displayName: "Image",
      items: [
        {
          type: "dropdown",
          displayName: "Image format",
          key: "imageFormat",
          options: {
            "none": "No image",
            "thumbnail": "Thumbnail",
            "cover": "Cover"
          },
          default: "thumbnail"
        },
        {
          type: "property",
          displayName: "Image property",
          key: "imageProperty",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "dropdown",
          displayName: "Show image embeds",
          key: "fallbackToEmbeds",
          options: {
            "always": "Always",
            "if-empty": "If image property missing or empty",
            "never": "Never"
          },
          default: "if-empty"
        },
        {
          type: "slider",
          displayName: "Image aspect ratio",
          key: "imageAspectRatio",
          min: 0.1,
          max: 2,
          step: 0.05,
          default: 0.55,
          showWhen: {
            key: "imageFormat",
            value: "cover"
          }
        }
      ]
    },
    // Date group
    {
      type: "group",
      displayName: "Date",
      items: [
        {
          type: "toggle",
          displayName: "Show date",
          key: "showDate",
          default: false
        },
        {
          type: "property",
          displayName: "Date property",
          key: "dateProperty",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Include time",
          description: "When enabled, displays both date and time using your system locale settings",
          key: "dateIncludeTime",
          default: false
        }
      ]
    },
    // Draft status group
    {
      type: "group",
      displayName: "Draft status",
      items: [
        {
          type: "toggle",
          displayName: "Show draft status",
          key: "showDraftStatus",
          default: false
        },
        {
          type: "property",
          displayName: "Draft status property",
          key: "draftStatusProperty",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Reverse logic",
          key: "draftStatusReverse",
          default: false
        },
        {
          type: "toggle",
          displayName: "Filename underscore prefix as draft indicator",
          key: "draftStatusUseFilenamePrefix",
          default: false
        }
      ]
    },
    // Tags group
    {
      type: "group",
      displayName: "Tags",
      items: [
        {
          type: "toggle",
          displayName: "Show tags",
          key: "showTags",
          default: false
        },
        {
          type: "property",
          displayName: "Tags property",
          key: "tagsProperty",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "slider",
          displayName: "Maximum tags to show",
          key: "maxTagsToShow",
          min: 1,
          max: 50,
          step: 1,
          default: 3,
          showWhen: {
            key: "showTags",
            value: true
          }
        }
      ]
    },
    // Properties group
    {
      type: "group",
      displayName: "Properties",
      items: [
        {
          type: "dropdown",
          displayName: "Show property labels",
          key: "propertyLabels",
          options: {
            "hide": "Hide",
            "inline": "Inline",
            "above": "On top"
          },
          default: "hide"
        }
      ]
    },
    // Property group 1
    {
      type: "group",
      displayName: "Property group 1",
      items: [
        {
          type: "property",
          displayName: "First property",
          key: "propertyDisplay1",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Second property",
          key: "propertyDisplay2",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout12SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup1Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Property group 2
    {
      type: "group",
      displayName: "Property group 2",
      items: [
        {
          type: "property",
          displayName: "Third property",
          key: "propertyDisplay3",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Fourth property",
          key: "propertyDisplay4",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout34SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup2Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Property group 3
    {
      type: "group",
      displayName: "Property group 3",
      items: [
        {
          type: "property",
          displayName: "First property",
          key: "propertyDisplay5",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Second property",
          key: "propertyDisplay6",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout56SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup3Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Property group 4
    {
      type: "group",
      displayName: "Property group 4",
      items: [
        {
          type: "property",
          displayName: "First property",
          key: "propertyDisplay7",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Second property",
          key: "propertyDisplay8",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout78SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup4Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Property group 5
    {
      type: "group",
      displayName: "Property group 5",
      items: [
        {
          type: "property",
          displayName: "First property",
          key: "propertyDisplay9",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Second property",
          key: "propertyDisplay10",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout910SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup5Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Property group 6
    {
      type: "group",
      displayName: "Property group 6",
      items: [
        {
          type: "property",
          displayName: "First property",
          key: "propertyDisplay11",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Second property",
          key: "propertyDisplay12",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout1112SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup6Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Property group 7
    {
      type: "group",
      displayName: "Property group 7",
      items: [
        {
          type: "property",
          displayName: "First property",
          key: "propertyDisplay13",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Second property",
          key: "propertyDisplay14",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout1314SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup7Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Behavior group
    {
      type: "group",
      displayName: "Behavior",
      items: [
        {
          type: "toggle",
          displayName: "Open new notes directly",
          description: "Skip the Bases modal and create notes directly (like the file explorer). When disabled, uses normal Bases behavior with the property popup.",
          key: "customizeNewButton",
          default: false
        },
        {
          type: "text",
          displayName: "Location for new notes",
          description: 'Folder path where new notes will be created. Use / for vault root, or specify a folder path. Works independently of "Open new notes directly".',
          key: "newNoteLocation",
          placeholder: "Simply use / for vault folder",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Hide quick edit icon",
          key: "hideQuickEditIcon",
          default: false
        }
      ]
    }
  ];
}
var init_settings_schema = __esm({
  "src/shared/settings-schema.ts"() {
    "use strict";
  }
});

// src/utils/attachment-detection.ts
async function getAttachmentsInNote(app, file) {
  var _a;
  const attachments = [];
  const content = app.vault.getAbstractFileByPath(file.path);
  if (content instanceof import_obsidian17.TFile) {
    if (file.extension === "md") {
      const metadata = app.metadataCache.getFileCache(content);
      const embeds = (metadata == null ? void 0 : metadata.embeds) || [];
      for (const embed of embeds) {
        const embedFile = app.metadataCache.getFirstLinkpathDest(embed.link, file.path);
        if (embedFile instanceof import_obsidian17.TFile) {
          attachments.push(embedFile);
        }
      }
    }
    const frontmatter = await getFileFrontmatter(app, file);
    if (frontmatter) {
      const imagePropertyNames = ["image", "imageOG", "cover", "thumbnail"];
      const validImageExtensions = ["avif", "bmp", "gif", "jpeg", "jpg", "png", "svg", "webp"];
      for (const propName of imagePropertyNames) {
        const propValue = frontmatter[propName];
        if (!propValue) continue;
        const imagePaths = Array.isArray(propValue) ? propValue : [propValue];
        for (const imagePath of imagePaths) {
          if (typeof imagePath !== "string") continue;
          const cleanPath = imagePath.replace(/^!?\[\[([^\]]+)\]\]$/, "$1").trim();
          if (!cleanPath) continue;
          if (cleanPath.startsWith("http://") || cleanPath.startsWith("https://")) {
            continue;
          }
          let imageFile = app.metadataCache.getFirstLinkpathDest(cleanPath, file.path);
          if (!imageFile && cleanPath.startsWith("./")) {
            const relativePath = cleanPath.substring(2);
            const fullPath = ((_a = file.parent) == null ? void 0 : _a.path) ? `${file.parent.path}/${relativePath}` : relativePath;
            const resolvedFile = app.vault.getAbstractFileByPath(fullPath);
            if (resolvedFile instanceof import_obsidian17.TFile) {
              imageFile = resolvedFile;
            }
          }
          if (!imageFile) {
            const absoluteFile = app.vault.getAbstractFileByPath(cleanPath);
            if (absoluteFile instanceof import_obsidian17.TFile) {
              imageFile = absoluteFile;
            }
          }
          if (imageFile && validImageExtensions.includes(imageFile.extension)) {
            attachments.push(imageFile);
          }
        }
      }
    }
  }
  return attachments;
}
async function getAttachmentsInFolder(app, folder) {
  const attachments = [];
  for (const child of folder.children) {
    if (child instanceof import_obsidian17.TFile && (child.extension === "md" || child.extension === "mdx")) {
      attachments.push(...await getAttachmentsInNote(app, child));
    } else if (child instanceof import_obsidian17.TFolder) {
      attachments.push(...await getAttachmentsInFolder(app, child));
    }
  }
  return attachments;
}
async function isAttachmentUsedInOtherNotes(app, attachment, excludedNote, excludedFolder) {
  const allNotes = app.vault.getMarkdownFiles().filter(
    (file) => file.path !== excludedNote.path
  );
  const attachmentPath = attachment.path;
  const attachmentName = attachment.name;
  const attachmentBasename = attachment.basename;
  for (const note of allNotes) {
    if (excludedFolder && note.path.startsWith(excludedFolder.path + "/")) {
      continue;
    }
    const content = await app.vault.read(note);
    if (content.includes(attachmentPath) || content.includes(attachmentName) || content.includes(attachmentBasename) || content.includes(`![[${attachmentName}]]`) || content.includes(`[[${attachmentName}]]`) || content.includes(`(${attachmentName})`) || content.includes(`(${attachmentPath})`)) {
      return true;
    }
  }
  return false;
}
async function findUniqueAttachments(app, deletedNote, deletedFolder) {
  const attachments = [];
  attachments.push(...await getAttachmentsInNote(app, deletedNote));
  if (deletedFolder) {
    attachments.push(...await getAttachmentsInFolder(app, deletedFolder));
  }
  const uniqueAttachments = Array.from(new Set(attachments.map((a) => a.path))).map((path) => app.vault.getAbstractFileByPath(path)).filter((file) => file instanceof import_obsidian17.TFile);
  const result = [];
  for (const attachment of uniqueAttachments) {
    const isUsedElsewhere = await isAttachmentUsedInOtherNotes(
      app,
      attachment,
      deletedNote,
      deletedFolder
    );
    if (!isUsedElsewhere) {
      result.push(attachment);
    }
  }
  return result;
}
var import_obsidian17;
var init_attachment_detection = __esm({
  "src/utils/attachment-detection.ts"() {
    "use strict";
    import_obsidian17 = require("obsidian");
    init_frontmatter_helper();
  }
});

// src/utils/smart-deletion.ts
var smart_deletion_exports = {};
__export(smart_deletion_exports, {
  executeSmartDeletion: () => executeSmartDeletion,
  isFolderBasedContent: () => isFolderBasedContent,
  prepareDeletionPreview: () => prepareDeletionPreview,
  shouldDeleteParentFolder: () => shouldDeleteParentFolder
});
function isFolderBasedContent(file, config) {
  const configuredFilename = config.deleteParentFolderFilename || "index";
  return file.basename === configuredFilename && file.parent !== null;
}
function shouldDeleteParentFolder(file, config) {
  return config.deleteParentFolder && isFolderBasedContent(file, config);
}
async function prepareDeletionPreview(app, files, config) {
  const filesToDelete = [];
  const foldersToDelete = [];
  const attachmentsToDelete = [];
  for (const filePath of files) {
    const file = app.vault.getAbstractFileByPath(filePath);
    if (!(file instanceof import_obsidian18.TFile)) continue;
    if (shouldDeleteParentFolder(file, config)) {
      const parentFolder = file.parent;
      if (parentFolder && !foldersToDelete.includes(parentFolder)) {
        foldersToDelete.push(parentFolder);
        const folderFiles = parentFolder.children.filter(
          (child) => child instanceof import_obsidian18.TFile
        );
        filesToDelete.push(...folderFiles);
      }
    } else {
      filesToDelete.push(file);
    }
    if (config.deleteUniqueAttachments) {
      const parentFolder = shouldDeleteParentFolder(file, config) ? file.parent || void 0 : void 0;
      const uniqueAttachments2 = await findUniqueAttachments(
        app,
        file,
        parentFolder
      );
      attachmentsToDelete.push(...uniqueAttachments2);
    }
  }
  const uniqueFiles = Array.from(new Set(filesToDelete.map((f) => f.path))).map((path) => app.vault.getAbstractFileByPath(path)).filter((file) => file instanceof import_obsidian18.TFile);
  const uniqueAttachments = Array.from(new Set(attachmentsToDelete.map((a) => a.path))).map((path) => app.vault.getAbstractFileByPath(path)).filter((file) => file instanceof import_obsidian18.TFile);
  return {
    filesToDelete: uniqueFiles,
    foldersToDelete: Array.from(new Set(foldersToDelete)),
    attachmentsToDelete: uniqueAttachments
  };
}
async function executeSmartDeletion(app, preview) {
  let deletedCount = 0;
  let errorCount = 0;
  for (const file of preview.filesToDelete) {
    try {
      await app.fileManager.trashFile(file);
      deletedCount++;
    } catch (error) {
      console.error(`Error deleting file ${file.path}:`, error);
      errorCount++;
    }
  }
  for (const attachment of preview.attachmentsToDelete) {
    try {
      await app.fileManager.trashFile(attachment);
      deletedCount++;
    } catch (error) {
      console.error(`Error deleting attachment ${attachment.path}:`, error);
      errorCount++;
    }
  }
  for (const folder of preview.foldersToDelete) {
    try {
      await app.fileManager.trashFile(folder);
      deletedCount++;
    } catch (error) {
      console.error(`Error deleting folder ${folder.path}:`, error);
      errorCount++;
    }
  }
  if (errorCount > 0) {
    new import_obsidian18.Notice(`Deleted ${deletedCount} items, ${errorCount} errors occurred`);
  } else {
    new import_obsidian18.Notice(`Successfully deleted ${deletedCount} item${deletedCount !== 1 ? "s" : ""}`);
  }
}
var import_obsidian18;
var init_smart_deletion = __esm({
  "src/utils/smart-deletion.ts"() {
    "use strict";
    import_obsidian18 = require("obsidian");
    init_attachment_detection();
  }
});

// src/components/deletion-preview.ts
var deletion_preview_exports = {};
__export(deletion_preview_exports, {
  DeletionPreviewModal: () => DeletionPreviewModal
});
var import_obsidian19, DeletionPreviewModal;
var init_deletion_preview = __esm({
  "src/components/deletion-preview.ts"() {
    "use strict";
    import_obsidian19 = require("obsidian");
    init_smart_deletion();
    DeletionPreviewModal = class extends import_obsidian19.Modal {
      constructor(app, preview, onConfirm) {
        super(app);
        this.preview = preview;
        this.onConfirm = onConfirm;
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.empty();
        new import_obsidian19.Setting(contentEl).setName("Confirm deletion").setHeading();
        contentEl.createEl("p", {
          text: "The following items will be deleted:",
          cls: "bases-cms-deletion-warning"
        });
        if (this.preview.filesToDelete.length > 0) {
          contentEl.createEl("h3", { text: `Files (${this.preview.filesToDelete.length})` });
          const filesList = contentEl.createEl("ul", { cls: "bases-cms-deletion-list" });
          for (const file of this.preview.filesToDelete.slice(0, 20)) {
            const li = filesList.createEl("li");
            li.setText(file.path);
          }
          if (this.preview.filesToDelete.length > 20) {
            filesList.createEl("li", {
              text: `... and ${this.preview.filesToDelete.length - 20} more files`
            });
          }
        }
        if (this.preview.foldersToDelete.length > 0) {
          contentEl.createEl("h3", { text: `Folders (${this.preview.foldersToDelete.length})` });
          const foldersList = contentEl.createEl("ul", { cls: "bases-cms-deletion-list" });
          for (const folder of this.preview.foldersToDelete) {
            const li = foldersList.createEl("li");
            li.setText(folder.path);
          }
        }
        if (this.preview.attachmentsToDelete.length > 0) {
          contentEl.createEl("h3", { text: `Attachments (${this.preview.attachmentsToDelete.length})` });
          const attachmentsList = contentEl.createEl("ul", { cls: "bases-cms-deletion-list" });
          for (const attachment of this.preview.attachmentsToDelete.slice(0, 20)) {
            const li = attachmentsList.createEl("li");
            li.setText(attachment.path);
          }
          if (this.preview.attachmentsToDelete.length > 20) {
            attachmentsList.createEl("li", {
              text: `... and ${this.preview.attachmentsToDelete.length - 20} more attachments`
            });
          }
        }
        contentEl.createEl("p", {
          text: "This action cannot be undone.",
          cls: "bases-cms-deletion-warning"
        });
        const buttonContainer = contentEl.createDiv();
        buttonContainer.addClass("bases-cms-modal-button-container");
        const cancelBtn = buttonContainer.createEl("button");
        cancelBtn.setText("Cancel");
        cancelBtn.addEventListener("click", () => this.close());
        const deleteBtn = buttonContainer.createEl("button");
        deleteBtn.setText("Delete");
        deleteBtn.addClass("mod-cta");
        deleteBtn.addClass("destructive");
        deleteBtn.addEventListener("click", () => {
          void (async () => {
            await executeSmartDeletion(this.app, this.preview);
            this.onConfirm();
            this.close();
          })();
        });
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => BasesCMSPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian24 = require("obsidian");

// src/settings.ts
var import_obsidian4 = require("obsidian");

// src/components/command-picker-modal.ts
var import_obsidian = require("obsidian");
var CommandPickerModal = class extends import_obsidian.FuzzySuggestModal {
  constructor(app, onSelect) {
    super(app);
    this.onSelect = onSelect;
  }
  getItems() {
    const commandRegistry = this.app.commands;
    const commandMap = /* @__PURE__ */ new Map();
    if (commandRegistry && typeof commandRegistry.listCommands === "function") {
      try {
        const commands = commandRegistry.listCommands();
        for (const command of commands) {
          if (command && command.id && command.name && !commandMap.has(command.id)) {
            commandMap.set(command.id, {
              id: command.id,
              name: command.name
            });
          }
        }
      } catch (e) {
        console.warn("[Bases CMS] Error getting commands via listCommands():", e);
      }
    }
    try {
      const registry = commandRegistry == null ? void 0 : commandRegistry.commands;
      if (registry && typeof registry === "object") {
        const allCommands = Object.values(registry);
        for (const command of allCommands) {
          if (command && command.id && command.name && !commandMap.has(command.id)) {
            commandMap.set(command.id, {
              id: command.id,
              name: command.name
            });
          }
        }
      }
    } catch (e) {
      console.warn("[Bases CMS] Error getting commands via registry:", e);
    }
    try {
      const internalRegistry = commandRegistry == null ? void 0 : commandRegistry.commandRegistry;
      if (internalRegistry && typeof internalRegistry === "object") {
        const allCommands = Object.values(internalRegistry);
        for (const command of allCommands) {
          if (command && command.id && command.name && !commandMap.has(command.id)) {
            commandMap.set(command.id, {
              id: command.id,
              name: command.name
            });
          }
        }
      }
    } catch (e) {
      console.warn("[Bases CMS] Error getting commands via internal registry:", e);
    }
    const commandOptions = Array.from(commandMap.values());
    commandOptions.sort((a, b) => a.name.localeCompare(b.name));
    return commandOptions;
  }
  getItemText(item) {
    return item.name;
  }
  onChooseItem(item, evt) {
    this.onSelect(item.id);
  }
  // Override to show command name only
  renderSuggestion(match, el) {
    const item = match.item;
    el.createDiv({ cls: "suggestion-title", text: item.name });
  }
};

// src/components/icon-picker-modal.ts
var import_obsidian2 = require("obsidian");
var getIconList = () => {
  if (import_obsidian2.requireApiVersion && (0, import_obsidian2.requireApiVersion)("1.7.3") && import_obsidian2.getIconIds) {
    try {
      return (0, import_obsidian2.getIconIds)();
    } catch (e) {
      console.warn("[Bases CMS] Error getting icon IDs from Obsidian:", e);
    }
  }
  return [
    "settings-2",
    "settings",
    "help-circle",
    "info",
    "star",
    "heart",
    "bookmark",
    "home",
    "search",
    "bell",
    "mail",
    "user",
    "users",
    "folder",
    "file",
    "file-text",
    "image",
    "video",
    "music",
    "calendar",
    "clock",
    "edit",
    "pencil",
    "trash",
    "copy",
    "cut",
    "paste",
    "download",
    "upload",
    "save",
    "share",
    "link",
    "external-link",
    "lock",
    "unlock",
    "eye",
    "eye-off",
    "key",
    "shield",
    "check",
    "x",
    "plus",
    "minus",
    "arrow-left",
    "arrow-right",
    "arrow-up",
    "arrow-down",
    "chevron-left",
    "chevron-right",
    "chevron-up",
    "chevron-down",
    "menu",
    "more-horizontal",
    "more-vertical",
    "grid",
    "list",
    "layout",
    "columns",
    "rows",
    "maximize",
    "minimize",
    "zoom-in",
    "zoom-out",
    "refresh-cw",
    "play",
    "pause",
    "stop",
    "sun",
    "moon",
    "cloud",
    "zap",
    "wand-2",
    "wand",
    "wand-sparkles",
    "palette",
    "brush",
    "sliders",
    "power",
    "wifi",
    "bluetooth",
    "monitor",
    "laptop",
    "smartphone",
    "camera",
    "mic",
    "headphones",
    "code",
    "terminal",
    "terminal-square",
    "github",
    "gitlab",
    "git-branch",
    "git-commit",
    "database",
    "server",
    "cloud-download",
    "cloud-upload",
    "tag",
    "tags",
    "flag",
    "pin",
    "map-pin",
    "compass",
    "globe",
    "rocket",
    "car",
    "bike",
    "robot",
    "apple",
    "windows",
    "linux",
    "chrome",
    "firefox",
    "safari",
    "credit-card",
    "wallet",
    "coins",
    "book",
    "book-open",
    "award",
    "trophy",
    "badge",
    "wrench",
    "tool",
    "package",
    "box",
    "archive",
    "send",
    "reply",
    "forward",
    "mail-open",
    "tag-plus",
    "tag-minus",
    "flag-off",
    "pin-off",
    "map-pin-off",
    "navigation",
    "map",
    "earth",
    "plane",
    "ship",
    "anchor",
    "helicopter",
    "drone",
    "android",
    "keyhole",
    "keys",
    "fingerprint",
    "scan",
    "qr-code",
    "barcode",
    "receipt",
    "piggy-bank",
    "banknote",
    "pencil-line",
    "edit-2",
    "edit-3"
  ];
};
var LUCIDE_ICONS = getIconList().map((id) => ({
  id,
  name: id.replace(/^lucide-/, "").replace(/-/g, " ").replace(/(^\w{1})|(\s+\w{1})/g, (letter) => letter.toUpperCase())
})).sort((a, b) => a.name.localeCompare(b.name));
var IconPickerModal = class extends import_obsidian2.FuzzySuggestModal {
  constructor(app, onSelect) {
    super(app);
    this.onSelect = onSelect;
  }
  getItems() {
    return LUCIDE_ICONS;
  }
  getItemText(item) {
    return item.name;
  }
  onChooseItem(item, evt) {
    this.onSelect(item.id);
  }
  // Override to show icon preview
  renderSuggestion(match, el) {
    const item = match.item;
    el.addClass("mod-complex");
    const content = el.createDiv({ cls: "suggestion-content" });
    content.createDiv({ cls: "suggestion-title", text: item.name });
    const aux = el.createDiv({ cls: "suggestion-aux" });
    (0, import_obsidian2.setIcon)(aux.createSpan({ cls: "suggestion-flair" }), item.id);
  }
};

// src/utils/settings-compat.ts
var import_obsidian3 = require("obsidian");
function createSettingsGroup(containerEl, heading, manifestId) {
  if ((0, import_obsidian3.requireApiVersion)("1.11.0")) {
    const obsidianModule = require("obsidian");
    const SettingGroup = obsidianModule.SettingGroup;
    if (SettingGroup) {
      const group = new SettingGroup(containerEl).setHeading(heading);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  if (manifestId) {
    containerEl.addClass(`${manifestId}-settings-compat`);
  }
  const headingEl = containerEl.createDiv("setting-group-heading");
  headingEl.createEl("h3", { text: heading });
  return {
    addSetting(cb) {
      const setting = new import_obsidian3.Setting(containerEl);
      cb(setting);
    }
  };
}

// src/settings.ts
var BasesCMSSettingTab = class extends import_obsidian4.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  /**
   * Refresh toolbars in all active CMS views when settings change
   */
  refreshActiveToolbars() {
    const pluginWithMethod = this.plugin;
    if (pluginWithMethod && typeof pluginWithMethod.refreshAllToolbars === "function") {
      pluginWithMethod.refreshAllToolbars();
    }
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian4.Setting(containerEl).setName("Confirm bulk operations").setDesc("Show confirmation dialogs before performing bulk operations.").addToggle((toggle) => toggle.setValue(this.plugin.settings.confirmBulkOperations).onChange((value) => {
      void (async () => {
        this.plugin.settings.confirmBulkOperations = value;
        await this.plugin.saveData(this.plugin.settings);
      })();
    }));
    const toolbarButtonsGroup = createSettingsGroup(containerEl, "Toolbar buttons", "bases-cms");
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show select all button").setDesc("Display the select all button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarSelectAll);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarSelectAll = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show clear button").setDesc("Display the clear selection button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarClear);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarClear = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show publish button").setDesc("Display the publish button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarPublish);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarPublish = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show draft button").setDesc("Display the draft button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarDraft);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarDraft = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show tags button").setDesc("Display the tags button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarTags);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarTags = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show set button").setDesc("Display the set property button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarSet);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarSet = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show remove button").setDesc("Display the remove property button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarRemove);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarRemove = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show delete button").setDesc("Display the delete button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarDelete);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarDelete = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    const deletionsGroup = createSettingsGroup(containerEl, "Deletions", "bases-cms");
    deletionsGroup.addSetting((setting) => {
      setting.setName("Delete parent folder for specific file name").setDesc("When enabled, deleting a note will delete its parent folder and all its contents if the note file name matches the specified name.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.deleteParentFolder);
        toggle.onChange(async (value) => {
          this.plugin.settings.deleteParentFolder = value;
          await this.plugin.saveData(this.plugin.settings);
        });
      });
    });
    deletionsGroup.addSetting((setting) => {
      setting.setName("Folder deletion file name").setDesc("File name that triggers parent folder deletion.").addText((text) => {
        text.setPlaceholder("index");
        text.setValue(this.plugin.settings.deleteParentFolderFilename);
        text.onChange(async (value) => {
          this.plugin.settings.deleteParentFolderFilename = value;
          await this.plugin.saveData(this.plugin.settings);
        });
      }).setDisabled(!this.plugin.settings.deleteParentFolder);
    });
    deletionsGroup.addSetting((setting) => {
      setting.setName("Delete associated unique attachments").setDesc("When deleting a note, automatically delete attachments that are only used by that note. Attachments used by other notes will be preserved.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.deleteUniqueAttachments);
        toggle.onChange(async (value) => {
          this.plugin.settings.deleteUniqueAttachments = value;
          await this.plugin.saveData(this.plugin.settings);
        });
      });
    });
    deletionsGroup.addSetting((setting) => {
      setting.setName("Confirm deletions").setDesc("Show confirmation dialog before deleting files.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.confirmDeletions);
        toggle.onChange(async (value) => {
          this.plugin.settings.confirmDeletions = value;
          await this.plugin.saveData(this.plugin.settings);
        });
      });
    });
    const appearanceGroup = createSettingsGroup(containerEl, "Appearance", "bases-cms");
    appearanceGroup.addSetting((setting) => {
      setting.setName("Use home icon for CMS view").setDesc("Use the home icon instead of blocks icon for the CMS view in the Bases view selector. Restart Obsidian for this change to take effect.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.useHomeIcon);
        toggle.onChange(async (value) => {
          this.plugin.settings.useHomeIcon = value;
          await this.plugin.saveData(this.plugin.settings);
        });
      });
    });
    appearanceGroup.addSetting((setting) => {
      setting.setName("Force static image for animated GIFs").setDesc("When enabled, animated GIFs will display only the first frame when used as card covers or thumbnails.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.forceStaticGifImages);
        toggle.onChange(async (value) => {
          this.plugin.settings.forceStaticGifImages = value;
          await this.plugin.saveData(this.plugin.settings);
          const pluginWithMethod = this.plugin;
          if (pluginWithMethod.activeViews) {
            pluginWithMethod.activeViews.forEach((view) => {
              if (view.onDataUpdated) {
                view.onDataUpdated();
              }
            });
          }
        });
      });
    });
    const quickEditGroup = createSettingsGroup(containerEl, "Quick edit", "bases-cms");
    let quickEditCommandSetting;
    let quickEditIconSetting;
    let quickEditOpenFileSetting;
    quickEditGroup.addSetting((setting) => {
      setting.setName("Enable quick edit").setDesc("Show an icon on card titles that launches a command when clicked.").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableQuickEdit).onChange((value) => {
        void (async () => {
          this.plugin.settings.enableQuickEdit = value;
          await this.plugin.saveData(this.plugin.settings);
          const shouldHide = !value;
          const commandEl = quickEditCommandSetting == null ? void 0 : quickEditCommandSetting.settingEl;
          const iconEl = quickEditIconSetting == null ? void 0 : quickEditIconSetting.settingEl;
          const openFileEl = quickEditOpenFileSetting == null ? void 0 : quickEditOpenFileSetting.settingEl;
          if (commandEl) {
            commandEl.toggleClass("bases-cms-setting-hidden", shouldHide);
          }
          if (iconEl) {
            iconEl.toggleClass("bases-cms-setting-hidden", shouldHide);
          }
          if (openFileEl) {
            openFileEl.toggleClass("bases-cms-setting-hidden", shouldHide);
          }
        })();
      }));
    });
    quickEditGroup.addSetting((setting) => {
      quickEditCommandSetting = setting;
      setting.setName("Quick edit command").setDesc("The command to execute when clicking the quick edit icon on a card title.").addButton((button) => {
        var _a;
        const currentCommandName = this.plugin.settings.quickEditCommandName || (this.plugin.settings.quickEditCommand ? "Select command..." : "No command selected");
        button.setButtonText(currentCommandName).onClick(() => {
          const modal = new CommandPickerModal(this.app, (commandId) => {
            void (async () => {
              const commandRegistry = this.app.commands;
              let commandName = "";
              if (commandRegistry) {
                if (typeof commandRegistry.listCommands === "function") {
                  const commands = commandRegistry.listCommands();
                  const command = commands.find((cmd) => cmd.id === commandId);
                  if (command) {
                    commandName = command.name;
                  }
                }
                if (!commandName) {
                  const registry = commandRegistry.commands;
                  if (registry && registry[commandId]) {
                    commandName = registry[commandId].name || "";
                  }
                }
              }
              this.plugin.settings.quickEditCommand = commandId;
              this.plugin.settings.quickEditCommandName = commandName;
              await this.plugin.saveData(this.plugin.settings);
              this.display();
            })();
          });
          modal.open();
        });
        if (this.plugin.settings.quickEditCommand) {
          const clearButton = (_a = button.buttonEl.parentElement) == null ? void 0 : _a.createEl("button", {
            text: "Clear",
            attr: { style: "margin-left: 8px;" }
          });
          clearButton == null ? void 0 : clearButton.addEventListener("click", () => {
            void (async () => {
              this.plugin.settings.quickEditCommand = "";
              this.plugin.settings.quickEditCommandName = "";
              await this.plugin.saveData(this.plugin.settings);
              this.display();
            })();
          });
        }
      });
      setting.settingEl.toggleClass("bases-cms-setting-hidden", !this.plugin.settings.enableQuickEdit);
    });
    quickEditGroup.addSetting((setting) => {
      quickEditIconSetting = setting;
      setting.setName("Quick edit icon").setDesc("Select the icon to display for the quick edit button on card titles.").addButton((button) => {
        const iconName = this.getIconName(this.plugin.settings.quickEditIcon || "pencil-line");
        button.setButtonText(iconName || "Select icon...").onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            void (async () => {
              this.plugin.settings.quickEditIcon = iconId;
              await this.plugin.saveData(this.plugin.settings);
              this.display();
            })();
          });
          modal.open();
        });
      });
      setting.settingEl.toggleClass("bases-cms-setting-hidden", !this.plugin.settings.enableQuickEdit);
    });
    quickEditGroup.addSetting((setting) => {
      quickEditOpenFileSetting = setting;
      setting.setName("Attempt to open file and execute quick edit command").setDesc("For commands that don't have special handling, attempt to open the file and execute the command. Some commands may not work properly this way.").addToggle((toggle) => toggle.setValue(this.plugin.settings.quickEditOpenFile).onChange((value) => {
        void (async () => {
          this.plugin.settings.quickEditOpenFile = value;
          await this.plugin.saveData(this.plugin.settings);
        })();
      }));
      setting.settingEl.toggleClass("bases-cms-setting-hidden", !this.plugin.settings.enableQuickEdit);
    });
  }
  getIconName(iconId) {
    if (!iconId) return "";
    return iconId.replace(/^lucide-/, "").split("-").map((word) => word.charAt(0).toUpperCase() + word.slice(1)).join(" ");
  }
};

// src/types.ts
var DEFAULT_SETTINGS = {
  confirmBulkOperations: true,
  deleteParentFolder: false,
  deleteParentFolderFilename: "index",
  deleteUniqueAttachments: false,
  confirmDeletions: true,
  useHomeIcon: false,
  enableQuickEdit: false,
  quickEditCommand: "",
  quickEditCommandName: "",
  quickEditIcon: "pencil-line",
  quickEditOpenFile: false,
  showToolbarSelectAll: true,
  showToolbarClear: true,
  showToolbarDraft: true,
  showToolbarPublish: true,
  showToolbarTags: true,
  showToolbarSet: true,
  showToolbarRemove: true,
  showToolbarDelete: true,
  forceStaticGifImages: false
};

// src/views/cms-view.ts
var import_obsidian23 = require("obsidian");

// src/utils/css-props.ts
function setCssProps(element, props) {
  for (const [key, value] of Object.entries(props)) {
    if (key.startsWith("--")) {
      element.style.setProperty(key, String(value));
    } else {
      const cssKey = key.replace(/([A-Z])/g, "-$1").toLowerCase();
      element.style.setProperty(cssKey, String(value));
    }
  }
}

// src/shared/data-transform.ts
var import_obsidian7 = require("obsidian");

// src/utils/property.ts
var import_obsidian6 = require("obsidian");
init_frontmatter_helper();
async function getFirstBasesPropertyValue(entry, propertyString, app) {
  if (!propertyString || !propertyString.trim()) return null;
  const properties = propertyString.split(",").map((p) => p.trim()).filter((p) => p);
  for (const prop of properties) {
    const value = entry.getValue(prop);
    const valueObj = value;
    const propertyExists = valueObj && ("date" in valueObj && valueObj.date instanceof Date || "data" in valueObj && valueObj.data != null);
    if (propertyExists) {
      return value;
    }
    if (!propertyExists && app) {
      const file = app.vault.getAbstractFileByPath(entry.file.path);
      if (file instanceof import_obsidian6.TFile && file.extension === "mdx") {
        const frontmatter = await getFileFrontmatter(app, file);
        if (frontmatter) {
          const cleanProp = prop.startsWith("note.") ? prop.substring(5) : prop;
          const frontmatterValue = frontmatter[cleanProp];
          if (frontmatterValue != null) {
            return { data: frontmatterValue };
          }
        }
      }
    }
  }
  return null;
}
async function getAllBasesImagePropertyValues(entry, propertyString, app) {
  if (!propertyString || !propertyString.trim()) return [];
  const prop = propertyString.split(",")[0].trim();
  if (!prop) return [];
  const value = entry.getValue(prop);
  let data = null;
  if (value && "data" in value) {
    data = value.data;
  } else if (app) {
    const file = app.vault.getAbstractFileByPath(entry.file.path);
    if (file instanceof import_obsidian6.TFile && file.extension === "mdx") {
      const frontmatter = await getFileFrontmatter(app, file);
      if (frontmatter) {
        const cleanProp = prop.startsWith("note.") ? prop.substring(5) : prop;
        data = frontmatter[cleanProp];
      }
    }
  }
  if (data == null) return [];
  const images = [];
  if (Array.isArray(data)) {
    for (const item of data) {
      if (typeof item === "string" || typeof item === "number") {
        const str = String(item);
        if (str && str.trim()) {
          images.push(str);
        }
      }
    }
  } else if (data !== "") {
    if (typeof data === "string" || typeof data === "number") {
      const str = String(data);
      if (str.trim()) {
        images.push(str);
      }
    }
  }
  return images;
}
function getPropertyLabel(propertyName, app, basesConfig, basesController) {
  if (!propertyName || propertyName === "") return "";
  if (basesConfig) {
    const configWithDisplayName = basesConfig;
    if (typeof configWithDisplayName.getDisplayName === "function") {
      try {
        const displayName = configWithDisplayName.getDisplayName(propertyName);
        if (displayName && typeof displayName === "string" && displayName.trim() !== "") {
          return displayName;
        }
      } catch (e) {
      }
    }
  }
  return propertyName;
}

// src/utils/style-settings.ts
function hasBodyClass(className) {
  return document.body.classList.contains(className);
}
function getListSeparator() {
  let value = getComputedStyle(document.body).getPropertyValue(
    "--bases-cms-list-separator"
  );
  if (value.startsWith('"') && value.endsWith('"') || value.startsWith("'") && value.endsWith("'")) {
    value = value.slice(1, -1);
  }
  return value || ", ";
}
function getEmptyValueMarker() {
  let value = getComputedStyle(document.body).getPropertyValue(
    "--bases-cms-empty-value-marker"
  );
  if (value.startsWith('"') && value.endsWith('"') || value.startsWith("'") && value.endsWith("'")) {
    value = value.slice(1, -1);
  }
  return value || "\u2014";
}
function shouldHideMissingProperties() {
  return hasBodyClass("bases-cms-hide-missing-properties");
}
function shouldHideEmptyProperties() {
  const hasClass = hasBodyClass("bases-cms-hide-empty-properties");
  if (hasClass) return true;
  return false;
}
function getTagStyle() {
  if (hasBodyClass("bases-cms-tag-style-minimal")) return "minimal";
  if (hasBodyClass("bases-cms-tag-style-theme")) return "theme";
  return "plain";
}
function showTagHashPrefix() {
  return hasBodyClass("bases-cms-show-tag-hash");
}

// src/shared/data-transform.ts
init_frontmatter_helper();
function removeDuplication(str) {
  if (str.length === 0) return str;
  for (let len = 1; len <= Math.floor(str.length / 2); len++) {
    const prefix = str.substring(0, len);
    const repeatCount = Math.floor(str.length / len);
    if (repeatCount < 2) continue;
    let isCompleteDuplication = true;
    for (let i = 1; i < repeatCount; i++) {
      const segment = str.substring(i * len, (i + 1) * len);
      if (segment !== prefix) {
        isCompleteDuplication = false;
        break;
      }
    }
    const remainder = str.length % len;
    if (remainder > 0) {
      const lastSegment = str.substring(repeatCount * len);
      if (lastSegment !== prefix.substring(0, remainder)) {
        isCompleteDuplication = false;
      }
    }
    if (isCompleteDuplication) {
      return prefix;
    }
  }
  return str;
}
async function basesEntryToCardData(entry, settings, sortMethod, isShuffled, snippet, imageUrl, hasImageAvailable, app, mdxFrontmatterCache) {
  var _a;
  const fileName = entry.file.basename || entry.file.name;
  let titleValue = null;
  if (app) {
    const file = app.vault.getAbstractFileByPath(entry.file.path);
    if (file instanceof import_obsidian7.TFile && file.extension === "mdx" && mdxFrontmatterCache) {
      const frontmatter = mdxFrontmatterCache[entry.file.path];
      if (frontmatter) {
        const cleanProp = settings.titleProperty.startsWith("note.") ? settings.titleProperty.substring(5) : settings.titleProperty;
        const frontmatterValue = frontmatter[cleanProp];
        if (frontmatterValue != null) {
          titleValue = { data: frontmatterValue };
        }
      }
    }
  }
  if (!titleValue) {
    titleValue = await getFirstBasesPropertyValue(entry, settings.titleProperty, app);
  }
  const titleData = titleValue == null ? void 0 : titleValue.data;
  let title;
  if (titleData != null && titleData !== "") {
    if (Array.isArray(titleData)) {
      const items = titleData.map((item) => {
        if (item && typeof item === "object" && "data" in item) {
          return String(item.data);
        }
        return String(item);
      }).filter((s) => s.trim().length > 0);
      title = items.length > 0 ? items.join(", ") : fileName;
    } else if (typeof titleData === "string" || typeof titleData === "number") {
      title = String(titleData);
    } else {
      title = fileName;
    }
  } else {
    title = fileName;
  }
  const path = entry.file.path;
  const folderPath = path.split("/").slice(0, -1).join("/");
  let yamlTagsValue = entry.getValue("note.tags");
  let yamlTags = [];
  if (!yamlTagsValue && app) {
    const file = app.vault.getAbstractFileByPath(entry.file.path);
    if (file instanceof import_obsidian7.TFile && file.extension === "mdx") {
      let frontmatter = (_a = mdxFrontmatterCache == null ? void 0 : mdxFrontmatterCache[entry.file.path]) != null ? _a : null;
      if (frontmatter === void 0) {
        frontmatter = await getFileFrontmatter(app, file);
      }
      if (frontmatter == null ? void 0 : frontmatter.tags) {
        const tagData = frontmatter.tags;
        const rawTags = Array.isArray(tagData) ? tagData.map((t) => {
          if (t && typeof t === "object" && t !== null) {
            return JSON.stringify(t);
          }
          if (typeof t === "string" || typeof t === "number") {
            return String(t);
          }
          return t ? JSON.stringify(t) : "";
        }) : (() => {
          if (tagData && typeof tagData === "object" && tagData !== null) {
            return [JSON.stringify(tagData)];
          }
          if (typeof tagData === "string" || typeof tagData === "number") {
            return [String(tagData)];
          }
          return tagData ? [JSON.stringify(tagData)] : [""];
        })();
        yamlTags = rawTags.map((tag) => tag.replace(/^#/, ""));
      }
    }
  }
  if (yamlTagsValue && yamlTagsValue.data != null) {
    const tagData = yamlTagsValue.data;
    const rawTags = Array.isArray(tagData) ? tagData.map((t) => {
      if (t && typeof t === "object" && "data" in t) {
        return String(t.data);
      }
      return typeof t === "string" || typeof t === "number" ? String(t) : "";
    }).filter((t) => t) : typeof tagData === "string" || typeof tagData === "number" ? [String(tagData)] : [];
    yamlTags = rawTags.map((tag) => tag.replace(/^#/, ""));
  }
  let allTagsValue = entry.getValue("file.tags");
  let tags = [];
  if (allTagsValue && allTagsValue.data != null) {
    const tagData = allTagsValue.data;
    const rawTags = Array.isArray(tagData) ? tagData.map((t) => {
      if (t && typeof t === "object" && t !== null && "data" in t) {
        const itemData = t.data;
        if (itemData && typeof itemData === "object" && itemData !== null) {
          return JSON.stringify(itemData);
        }
        return String(itemData);
      }
      if (t && typeof t === "object" && t !== null) {
        return JSON.stringify(t);
      }
      return typeof t === "string" || typeof t === "number" ? String(t) : "";
    }).filter((t) => typeof t === "string" && t.length > 0) : (() => {
      if (tagData && typeof tagData === "object" && tagData !== null) {
        return [JSON.stringify(tagData)];
      }
      return typeof tagData === "string" || typeof tagData === "number" ? [String(tagData)] : [];
    })();
    tags = rawTags.map((tag) => tag.replace(/^#/, ""));
  } else if (!allTagsValue && app) {
    const file = app.vault.getAbstractFileByPath(entry.file.path);
    if (file instanceof import_obsidian7.TFile && file.extension === "mdx") {
      tags = [...yamlTags];
    }
  }
  const ctime = entry.file.stat.ctime;
  const mtime = entry.file.stat.mtime;
  let displayTags = [];
  if (settings.showTags && settings.tagsProperty) {
    const tagsValue = await getFirstBasesPropertyValue(entry, settings.tagsProperty, app);
    if (tagsValue && tagsValue.data != null) {
      const tagData = tagsValue.data;
      if (Array.isArray(tagData)) {
        displayTags = tagData.map((t) => {
          if (t && typeof t === "object" && "data" in t) {
            return String(t.data);
          }
          return typeof t === "string" || typeof t === "number" ? String(t) : "";
        }).filter((t) => typeof t === "string" && t.length > 0);
      } else if (typeof tagData === "string" || typeof tagData === "number") {
        displayTags = [String(tagData)];
      }
    }
  }
  const cardData = {
    path,
    name: fileName,
    title,
    tags,
    yamlTags,
    ctime,
    mtime,
    folderPath,
    snippet,
    imageUrl,
    hasImageAvailable: hasImageAvailable || false,
    displayTags: displayTags.length > 0 ? displayTags : void 0
  };
  const props = [
    settings.propertyDisplay1,
    settings.propertyDisplay2,
    settings.propertyDisplay3,
    settings.propertyDisplay4,
    settings.propertyDisplay5,
    settings.propertyDisplay6,
    settings.propertyDisplay7,
    settings.propertyDisplay8,
    settings.propertyDisplay9,
    settings.propertyDisplay10,
    settings.propertyDisplay11,
    settings.propertyDisplay12,
    settings.propertyDisplay13,
    settings.propertyDisplay14
  ];
  const seen = /* @__PURE__ */ new Set();
  const effectiveProps = props.map((prop) => {
    if (!prop || prop === "") return "";
    if (seen.has(prop)) return "";
    seen.add(prop);
    return prop;
  });
  cardData.propertyName1 = effectiveProps[0] || void 0;
  cardData.propertyName2 = effectiveProps[1] || void 0;
  cardData.propertyName3 = effectiveProps[2] || void 0;
  cardData.propertyName4 = effectiveProps[3] || void 0;
  cardData.propertyName5 = effectiveProps[4] || void 0;
  cardData.propertyName6 = effectiveProps[5] || void 0;
  cardData.propertyName7 = effectiveProps[6] || void 0;
  cardData.propertyName8 = effectiveProps[7] || void 0;
  cardData.propertyName9 = effectiveProps[8] || void 0;
  cardData.propertyName10 = effectiveProps[9] || void 0;
  cardData.propertyName11 = effectiveProps[10] || void 0;
  cardData.propertyName12 = effectiveProps[11] || void 0;
  cardData.propertyName13 = effectiveProps[12] || void 0;
  cardData.propertyName14 = effectiveProps[13] || void 0;
  cardData.property1 = effectiveProps[0] ? await resolveBasesPropertyAsync(effectiveProps[0], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property2 = effectiveProps[1] ? await resolveBasesPropertyAsync(effectiveProps[1], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property3 = effectiveProps[2] ? await resolveBasesPropertyAsync(effectiveProps[2], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property4 = effectiveProps[3] ? await resolveBasesPropertyAsync(effectiveProps[3], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property5 = effectiveProps[4] ? await resolveBasesPropertyAsync(effectiveProps[4], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property6 = effectiveProps[5] ? await resolveBasesPropertyAsync(effectiveProps[5], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property7 = effectiveProps[6] ? await resolveBasesPropertyAsync(effectiveProps[6], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property8 = effectiveProps[7] ? await resolveBasesPropertyAsync(effectiveProps[7], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property9 = effectiveProps[8] ? await resolveBasesPropertyAsync(effectiveProps[8], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property10 = effectiveProps[9] ? await resolveBasesPropertyAsync(effectiveProps[9], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property11 = effectiveProps[10] ? await resolveBasesPropertyAsync(effectiveProps[10], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property12 = effectiveProps[11] ? await resolveBasesPropertyAsync(effectiveProps[11], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property13 = effectiveProps[12] ? await resolveBasesPropertyAsync(effectiveProps[12], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property14 = effectiveProps[13] ? await resolveBasesPropertyAsync(effectiveProps[13], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  return cardData;
}
async function transformBasesEntries(entries, settings, sortMethod, isShuffled, snippets, images, hasImageAvailable, app, mdxFrontmatterCache) {
  return Promise.all(entries.map((entry) => basesEntryToCardData(
    entry,
    settings,
    sortMethod,
    isShuffled,
    snippets[entry.file.path],
    images[entry.file.path],
    hasImageAvailable[entry.file.path],
    app,
    mdxFrontmatterCache
  )));
}
async function resolveBasesPropertyAsync(propertyName, entry, cardData, settings, app, mdxFrontmatterCache) {
  if (!propertyName || propertyName === "") {
    return null;
  }
  if (propertyName === "file.path" || propertyName === "file path") {
    return cardData.folderPath || null;
  }
  if (propertyName === "tags" || propertyName === "note.tags") {
    return cardData.yamlTags.length > 0 ? "tags" : null;
  }
  if (propertyName === "file.tags" || propertyName === "file tags") {
    return cardData.tags.length > 0 ? "tags" : null;
  }
  if (propertyName === "file.ctime" || propertyName === "created time") {
    return new Date(cardData.ctime).toLocaleDateString();
  }
  if (propertyName === "file.mtime" || propertyName === "modified time") {
    return new Date(cardData.mtime).toLocaleDateString();
  }
  let value = null;
  if (app) {
    const file = app.vault.getAbstractFileByPath(entry.file.path);
    if (file instanceof import_obsidian7.TFile && file.extension === "mdx" && mdxFrontmatterCache) {
      const frontmatter = mdxFrontmatterCache[entry.file.path];
      if (frontmatter) {
        const cleanProp = propertyName.startsWith("note.") ? propertyName.substring(5) : propertyName;
        const frontmatterValue = frontmatter[cleanProp];
        if (frontmatterValue != null) {
          value = { data: frontmatterValue };
        }
      }
    }
  }
  if (!value) {
    value = await getFirstBasesPropertyValue(entry, propertyName, app);
  }
  if (!value) return null;
  const valueObj = value;
  if (!valueObj) return null;
  if ("date" in valueObj && valueObj.date instanceof Date) {
    return valueObj.date.toLocaleDateString();
  }
  const data = valueObj.data;
  if (data == null) {
    return null;
  }
  if (data === "") {
    return "";
  }
  if (typeof data === "string") {
    const trimmed = data.trim();
    if (trimmed.length === 0) {
      return "";
    }
    return removeDuplication(trimmed);
  }
  if (Array.isArray(data)) {
    if (data.length === 0) {
      return "";
    }
    const uniqueItems = /* @__PURE__ */ new Set();
    const result = [];
    for (const item of data) {
      let str;
      if (item && typeof item === "object" && "data" in item) {
        const itemData = item.data;
        if (itemData && typeof itemData === "object" && !Array.isArray(itemData) && "data" in itemData) {
          str = String(itemData.data);
        } else {
          str = String(itemData);
        }
      } else if (item && typeof item === "object" && item !== null) {
        str = String(item);
      } else {
        str = String(item);
      }
      const trimmed = str.trim();
      if (trimmed && trimmed !== "") {
        const deduplicated = removeDuplication(trimmed);
        if (deduplicated && deduplicated !== "" && !uniqueItems.has(deduplicated)) {
          uniqueItems.add(deduplicated);
          result.push(deduplicated);
        }
      }
    }
    if (result.length > 0) {
      return result.join(getListSeparator());
    }
    return null;
  }
  if (typeof data === "string") {
    let str = data.trim();
    if (str.length === 0) {
      return null;
    }
    return removeDuplication(str);
  }
  if (typeof data === "number" || typeof data === "boolean") {
    return String(data);
  }
  return null;
}

// src/views/cms-view.ts
init_settings_schema();

// src/utils/image.ts
var import_obsidian8 = require("obsidian");
function isExternalUrl(url) {
  return /^https?:\/\//i.test(url);
}
function hasValidImageExtension(path) {
  return /\.(avif|bmp|gif|jpe?g|png|svg|webp)$/i.test(path);
}
function validateImageUrl(url) {
  return new Promise((resolve) => {
    const img = new Image();
    img.onload = () => resolve(true);
    img.onerror = () => resolve(false);
    setTimeout(() => resolve(false), 5e3);
    img.src = url;
  });
}
function stripWikilinkSyntax(path) {
  const wikilinkMatch = path.match(/^!?\[\[([^\]|]+)(?:\|[^\]]*)?\]\]$/);
  return wikilinkMatch ? wikilinkMatch[1].trim() : path;
}
async function processImagePaths(imagePaths) {
  const internalPaths = [];
  const externalUrlCandidates = [];
  for (const imgPath of imagePaths) {
    const cleanPath = stripWikilinkSyntax(imgPath);
    if (cleanPath.length === 0) continue;
    if (isExternalUrl(cleanPath)) {
      externalUrlCandidates.push(cleanPath);
    } else {
      if (hasValidImageExtension(cleanPath)) {
        internalPaths.push(cleanPath);
      }
    }
  }
  const validationPromises = externalUrlCandidates.map(
    (url) => validateImageUrl(url).then((isValid) => isValid ? url : null)
  );
  const validatedUrls = await Promise.all(validationPromises);
  const externalUrls = validatedUrls.filter((url) => url !== null);
  return { internalPaths, externalUrls };
}
function resolveInternalImagePaths(internalPaths, sourcePath, app) {
  const validImageExtensions = ["avif", "bmp", "gif", "jpeg", "jpg", "png", "svg", "webp"];
  const resourcePaths = [];
  for (const propPath of internalPaths) {
    let imageFile = app.metadataCache.getFirstLinkpathDest(propPath, sourcePath);
    if (!imageFile && propPath.startsWith("./")) {
      const sourceFile = app.vault.getAbstractFileByPath(sourcePath);
      if (sourceFile && sourceFile.parent) {
        const relativePath = propPath.substring(2);
        const fullPath = sourceFile.parent.path ? `${sourceFile.parent.path}/${relativePath}` : relativePath;
        const resolvedFile = app.vault.getAbstractFileByPath(fullPath);
        if (resolvedFile instanceof import_obsidian8.TFile) {
          imageFile = resolvedFile;
        }
      }
    }
    if (!imageFile) {
      const absoluteFile = app.vault.getAbstractFileByPath(propPath);
      if (absoluteFile instanceof import_obsidian8.TFile) {
        imageFile = absoluteFile;
      }
    }
    if (imageFile && validImageExtensions.includes(imageFile.extension)) {
      const resourcePath = app.vault.getResourcePath(imageFile);
      resourcePaths.push(resourcePath);
    }
  }
  return resourcePaths;
}
async function extractEmbedImages(file, app) {
  const validImageExtensions = ["avif", "bmp", "gif", "jpeg", "jpg", "png", "svg", "webp"];
  const metadata = app.metadataCache.getFileCache(file);
  const bodyResourcePaths = [];
  const bodyExternalUrlCandidates = /* @__PURE__ */ new Set();
  if (metadata == null ? void 0 : metadata.embeds) {
    for (const embed of metadata.embeds) {
      const embedLink = embed.link;
      if (isExternalUrl(embedLink)) {
        if (hasValidImageExtension(embedLink) || !embedLink.includes(".")) {
          bodyExternalUrlCandidates.add(embedLink);
        }
      } else {
        const targetFile = app.metadataCache.getFirstLinkpathDest(embedLink, file.path);
        if (targetFile && validImageExtensions.includes(targetFile.extension)) {
          const resourcePath = app.vault.getResourcePath(targetFile);
          bodyResourcePaths.push(resourcePath);
        }
      }
    }
  }
  if (file.extension === "md" || file.extension === "mdx") {
    try {
      const content = await app.vault.cachedRead(file);
      const markdownImageRegex = /!\[([^\]]*)\]\((https?:\/\/[^\s)]+)/gi;
      let match;
      while ((match = markdownImageRegex.exec(content)) !== null) {
        const url = match[2].trim();
        const cleanUrl = url.replace(/["')\s]+$/, "");
        if (isExternalUrl(cleanUrl) && (hasValidImageExtension(cleanUrl) || !cleanUrl.includes("."))) {
          bodyExternalUrlCandidates.add(cleanUrl);
        }
      }
      const htmlImgRegex = /<img[^>]+src\s*=\s*["']?(https?:\/\/[^\s"'<>]+)/gi;
      while ((match = htmlImgRegex.exec(content)) !== null) {
        const url = match[1].trim();
        const cleanUrl = url.replace(/["'\s>]+$/, "");
        if (isExternalUrl(cleanUrl) && (hasValidImageExtension(cleanUrl) || !cleanUrl.includes("."))) {
          bodyExternalUrlCandidates.add(cleanUrl);
        }
      }
    } catch (error) {
      console.warn(`Failed to read file content for image extraction: ${file.path}`, error);
    }
  }
  const externalUrlArray = Array.from(bodyExternalUrlCandidates);
  const validationPromises = externalUrlArray.map(
    (url) => validateImageUrl(url).then((isValid) => isValid ? url : null)
  );
  const validatedUrls = await Promise.all(validationPromises);
  const bodyExternalUrls = validatedUrls.filter((url) => url !== null);
  return [...bodyResourcePaths, ...bodyExternalUrls];
}
function isGifUrl(url) {
  return /\.gif(\?|#|$)/i.test(url) || /\.gif$/i.test(url);
}
async function convertGifToStatic(url, forceStatic) {
  if (!forceStatic || !isGifUrl(url)) {
    return url;
  }
  return new Promise((resolve) => {
    const img = new Image();
    img.crossOrigin = "anonymous";
    img.onload = () => {
      try {
        const canvas = document.createElement("canvas");
        canvas.width = img.width;
        canvas.height = img.height;
        const ctx = canvas.getContext("2d");
        if (ctx) {
          ctx.drawImage(img, 0, 0);
          const dataUrl = canvas.toDataURL("image/png");
          resolve(dataUrl);
        } else {
          resolve(url);
        }
      } catch (error) {
        console.warn("Failed to convert GIF to static image:", error);
        resolve(url);
      }
    };
    img.onerror = () => {
      resolve(url);
    };
    setTimeout(() => {
      resolve(url);
    }, 5e3);
    img.src = url;
  });
}

// src/utils/preview.ts
var markdownPatterns = [
  /`([^`]+)`/g,
  /\*\*\*((?:(?!\*\*\*).)+)\*\*\*/g,
  /___((?:(?!___).)+)___/g,
  /\*\*((?:(?!\*\*).)+)\*\*/g,
  /__((?:(?!__).)+)__/g,
  /\*((?:(?!\*).)+)\*/g,
  /_((?:(?!_).)+)_/g,
  /~~((?:(?!~~).)+)~~/g,
  /==((?:(?!==).)+)==/g,
  /\[([^\]]+)\]\([^)]+\)/g,
  /!\[\[[^\]]+\]\]/g,
  /\[\[[^\]|]+\|[^\]]+\]\]/g,
  /\[\[[^\]]+\]\]/g,
  /#[a-zA-Z0-9_\-/]+/g,
  /^[-*+]\s*\[[ xX]\]\s+/gm,
  /^(\d+\.\s*)\[[ xX]\]\s+/gm,
  /^(\d+\)\s*)\[[ xX]\]\s+/gm,
  /^[-*+]\s+/gm,
  /^#{1,6}\s+.+$/gm,
  /^\s*(?:[-_*])\s*(?:[-_*])\s*(?:[-_*])[\s\-_*]*$/gm,
  /^\s*\|.*\|.*$/gm,
  /\^\[[^\]]*?]/g,
  /\[\^[^\]]+]/g,
  /^\s*\[\^[^\]]+]:.*$/gm,
  /<([a-z][a-z0-9]*)\b[^>]*>(.*?)<\/\1>/gi,
  /<[^>]+>/g
];
function protectEscapedChars(text) {
  const map = /* @__PURE__ */ new Map();
  let counter = 0;
  const result = text.replace(/\\(.)/g, (match, char) => {
    const placeholder = `\xA7\xA7ESCAPED${counter}\xA7\xA7`;
    map.set(placeholder, char);
    counter++;
    return placeholder;
  });
  return { text: result, map };
}
function restoreEscapedChars(text, map) {
  let result = text;
  map.forEach((char, placeholder) => {
    result = result.split(placeholder).join(char);
  });
  return result;
}
function removeCodeBlocks(text) {
  let result = text;
  let changed = true;
  while (changed) {
    changed = false;
    const openMatch = result.match(/^([`~]{3,})/m);
    if (!openMatch) break;
    const fenceChar = openMatch[1][0];
    const fenceLength = openMatch[1].length;
    const openIndex = openMatch.index;
    const escapedChar = fenceChar.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
    const closePattern = new RegExp(`^${escapedChar}{${fenceLength}}\\s*$`, "m");
    const afterOpen = result.substring(openIndex + openMatch[1].length);
    const closeMatch = afterOpen.match(closePattern);
    if (closeMatch) {
      const closeIndex = openIndex + openMatch[1].length + closeMatch.index;
      const blockEnd = closeIndex + closeMatch[0].length;
      result = result.substring(0, openIndex) + result.substring(blockEnd);
      changed = true;
    } else {
      const lineEnd = result.indexOf("\n", openIndex);
      if (lineEnd === -1) {
        result = result.substring(0, openIndex);
      } else {
        result = result.substring(0, openIndex) + result.substring(lineEnd + 1);
      }
      changed = true;
    }
  }
  return result;
}
function stripMarkdownSyntax(text) {
  if (!text || text.trim().length === 0) return "";
  text = text.replace(/^>\s*\[![\w-]+\][+-]?.*$/gm, "");
  text = text.replace(/^>\s?/gm, "");
  const { text: protectedText, map: escapedCharsMap } = protectEscapedChars(text);
  let result = removeCodeBlocks(protectedText);
  markdownPatterns.forEach((pattern) => {
    result = result.replace(pattern, (match, ...groups) => {
      if (match.match(/<[a-z][a-z0-9]*\b[^>]*>.*?<\//i)) {
        return groups[1] || "";
      }
      if (groups.length > 0 && groups[0] !== void 0) {
        for (let i = 0; i < groups.length - 2; i++) {
          if (typeof groups[i] === "string") {
            return groups[i];
          }
        }
      }
      return "";
    });
  });
  result = restoreEscapedChars(result, escapedCharsMap);
  return result;
}
function sanitizeForPreview(content, omitFirstLine = false, filename, titleValue) {
  const cleaned = content.replace(/^---[\s\S]*?---/, "").trim();
  let stripped = stripMarkdownSyntax(cleaned);
  const firstLineEnd = stripped.indexOf("\n");
  const firstLine = (firstLineEnd !== -1 ? stripped.substring(0, firstLineEnd) : stripped).trim();
  if (omitFirstLine || filename && firstLine === filename || titleValue && firstLine === titleValue) {
    stripped = firstLineEnd !== -1 ? stripped.substring(firstLineEnd + 1).trim() : "";
  }
  const normalized = stripped.replace(/\^[a-zA-Z0-9-]+/g, "").split(/\s+/).filter((word) => word).join(" ").trim().replace(/\.{2,}/g, (match) => match.replace(/\./g, "\u2024"));
  const wasTruncated = normalized.length > 500;
  let preview = normalized.substring(0, 500);
  if (wasTruncated) {
    preview += "\u2026";
  }
  return preview;
}
async function loadFilePreview(file, app, propertyValue, settings, fileName, titleValue) {
  let result = null;
  if (propertyValue != null) {
    if (Array.isArray(propertyValue)) {
      const items = propertyValue.map((item) => {
        if (item && typeof item === "object" && "data" in item) {
          return String(item.data);
        }
        return String(item);
      }).filter((s) => s.trim().length > 0);
      result = items.length > 0 ? items.join(", ") : null;
    } else if (typeof propertyValue === "string" || typeof propertyValue === "number") {
      const str = String(propertyValue).trim();
      result = str.length > 0 ? str : null;
    }
  }
  if (result) {
    if (settings.truncatePreviewProperty) {
      const wasTruncated = result.length > 500;
      result = result.substring(0, 500);
      if (wasTruncated) {
        result += "\u2026";
      }
    }
    return result;
  }
  if (settings.fallbackToContent) {
    const content = await app.vault.cachedRead(file);
    return sanitizeForPreview(
      content,
      settings.omitFirstLine,
      fileName,
      titleValue
    );
  }
  return "";
}

// src/shared/content-loader.ts
async function loadImageForEntry(path, file, app, imagePropertyValues, fallbackToEmbeds, imageCache, hasImageCache) {
  const hasPropertyValues = imagePropertyValues && Array.isArray(imagePropertyValues) && imagePropertyValues.length > 0;
  const shouldFallback = fallbackToEmbeds === true || fallbackToEmbeds === "always" || fallbackToEmbeds === "if-empty" && !hasPropertyValues;
  if (!shouldFallback && path in imageCache) {
    delete imageCache[path];
    delete hasImageCache[path];
  }
  if (path in imageCache && !hasPropertyValues && shouldFallback) {
    return;
  }
  try {
    const { internalPaths, externalUrls } = await processImagePaths(imagePropertyValues);
    let validImages = [
      ...resolveInternalImagePaths(internalPaths, path, app),
      ...externalUrls
      // External URLs already validated by processImagePaths
    ];
    if (validImages.length === 0 && !hasPropertyValues && shouldFallback) {
      validImages = await extractEmbedImages(file, app);
    }
    if (validImages.length > 0) {
      imageCache[path] = validImages.length > 1 ? validImages : validImages[0];
      hasImageCache[path] = true;
    } else if (hasPropertyValues) {
      delete imageCache[path];
      hasImageCache[path] = true;
    } else if (!shouldFallback) {
      delete imageCache[path];
      delete hasImageCache[path];
    }
  } catch (error) {
    console.error(`Failed to load image for ${path}:`, error);
  }
}
async function loadImagesForEntries(entries, fallbackToEmbeds, app, imageCache, hasImageCache) {
  const entriesToProcess = entries.filter((entry) => {
    const hasPropertyValues = entry.imagePropertyValues && Array.isArray(entry.imagePropertyValues) && entry.imagePropertyValues.length > 0;
    return !(entry.path in imageCache) || hasPropertyValues;
  });
  const BATCH_SIZE = 50;
  for (let i = 0; i < entriesToProcess.length; i += BATCH_SIZE) {
    const batch = entriesToProcess.slice(i, i + BATCH_SIZE);
    await Promise.all(
      batch.map(async (entry) => {
        await loadImageForEntry(
          entry.path,
          entry.file,
          app,
          entry.imagePropertyValues,
          fallbackToEmbeds,
          imageCache,
          hasImageCache
        );
      })
    );
  }
}
async function loadSnippetsForEntries(entries, fallbackToContent, omitFirstLine, app, snippetCache, truncatePreviewProperty) {
  await Promise.all(
    entries.map(async (entry) => {
      if (entry.path in snippetCache) {
        return;
      }
      try {
        if (entry.file.extension === "md" || entry.file.extension === "mdx") {
          snippetCache[entry.path] = await loadFilePreview(
            entry.file,
            app,
            entry.descriptionData,
            {
              fallbackToContent,
              omitFirstLine,
              truncatePreviewProperty
            },
            entry.fileName,
            entry.titleString
          );
        } else {
          snippetCache[entry.path] = "";
        }
      } catch (error) {
        console.error(`Failed to load snippet for ${entry.path}:`, error);
        snippetCache[entry.path] = "";
      }
    })
  );
}

// src/views/shared-renderer.ts
var import_obsidian12 = require("obsidian");

// src/utils/draft-status-badge.ts
var import_obsidian9 = require("obsidian");
init_frontmatter_helper();
async function calculateDraftStatusAsync(entry, settings, app, mdxFrontmatterCache) {
  var _a;
  let booleanValue = null;
  let isDraft = false;
  if (settings.draftStatusUseFilenamePrefix && entry.file && entry.file.name) {
    const fileName = entry.file.name;
    const startsWithUnderscore = fileName.startsWith("_");
    booleanValue = startsWithUnderscore;
    isDraft = settings.draftStatusReverse ? !booleanValue : booleanValue;
  } else if (settings.draftStatusProperty) {
    const draftValue = entry.getValue(settings.draftStatusProperty);
    if (draftValue && "data" in draftValue && typeof draftValue.data === "boolean") {
      booleanValue = draftValue.data;
      isDraft = settings.draftStatusReverse ? !booleanValue : booleanValue;
    } else {
      const file = app.vault.getAbstractFileByPath(entry.file.path);
      if (file instanceof import_obsidian9.TFile && file.extension === "mdx") {
        let frontmatter = null;
        if (mdxFrontmatterCache) {
          frontmatter = (_a = mdxFrontmatterCache[entry.file.path]) != null ? _a : null;
        }
        if (frontmatter === void 0) {
          frontmatter = await getFileFrontmatter(app, file);
        }
        if (frontmatter) {
          const cleanProp = settings.draftStatusProperty.startsWith("note.") ? settings.draftStatusProperty.substring(5) : settings.draftStatusProperty;
          const frontmatterValue = frontmatter[cleanProp];
          if (typeof frontmatterValue === "boolean") {
            booleanValue = frontmatterValue;
            isDraft = settings.draftStatusReverse ? !booleanValue : booleanValue;
          }
        }
      }
    }
  }
  return { booleanValue, isDraft };
}
function calculateDraftStatus(entry, settings) {
  let booleanValue = null;
  let isDraft = false;
  if (settings.draftStatusUseFilenamePrefix && entry.file && entry.file.name) {
    const fileName = entry.file.name;
    const startsWithUnderscore = fileName.startsWith("_");
    booleanValue = startsWithUnderscore;
    isDraft = settings.draftStatusReverse ? !booleanValue : booleanValue;
  } else if (settings.draftStatusProperty) {
    const draftValue = entry.getValue(settings.draftStatusProperty);
    if (draftValue && "data" in draftValue && typeof draftValue.data === "boolean") {
      booleanValue = draftValue.data;
      isDraft = settings.draftStatusReverse ? !booleanValue : booleanValue;
    }
  }
  return { booleanValue, isDraft };
}
function renderDraftStatusBadge(container, entry, cardPath, settings, onPropertyToggle, app, mdxFrontmatterCache) {
  if (!settings.showDraftStatus) {
    return;
  }
  const { booleanValue: syncValue, isDraft: syncIsDraft } = calculateDraftStatus(entry, settings);
  if (syncValue !== null) {
    renderBadge(container, syncValue, syncIsDraft, onPropertyToggle, cardPath);
  } else if (app) {
    const file = app.vault.getAbstractFileByPath(entry.file.path);
    if (file instanceof import_obsidian9.TFile && file.extension === "mdx" && mdxFrontmatterCache) {
      const frontmatter = mdxFrontmatterCache[entry.file.path];
      if (frontmatter && settings.draftStatusProperty) {
        const cleanProp = settings.draftStatusProperty.startsWith("note.") ? settings.draftStatusProperty.substring(5) : settings.draftStatusProperty;
        const frontmatterValue = frontmatter[cleanProp];
        if (typeof frontmatterValue === "boolean") {
          const booleanValue = frontmatterValue;
          const isDraft = settings.draftStatusReverse ? !booleanValue : booleanValue;
          renderBadge(container, booleanValue, isDraft, onPropertyToggle, cardPath);
          return;
        }
      }
    }
    void (async () => {
      const { booleanValue, isDraft } = await calculateDraftStatusAsync(entry, settings, app, mdxFrontmatterCache);
      if (booleanValue !== null && container.isConnected) {
        renderBadge(container, booleanValue, isDraft, onPropertyToggle, cardPath);
      }
    })();
  }
}
function renderBadge(container, booleanValue, isDraft, onPropertyToggle, cardPath) {
  if (container.querySelector(".card-status-badge")) {
    return;
  }
  const statusBadge = container.createDiv("card-status-badge");
  if (isDraft) {
    statusBadge.addClass("status-draft");
    statusBadge.appendText("Draft");
  } else {
    statusBadge.addClass("status-published");
    statusBadge.appendText("Published");
  }
  if (onPropertyToggle) {
    statusBadge.addClass("bases-cms-cursor-pointer");
    statusBadge.addEventListener("click", (e) => {
      e.stopPropagation();
      const newValue = !booleanValue;
      void onPropertyToggle(cardPath, "draft", newValue);
    });
  }
}

// src/utils/quick-edit-icon.ts
var import_obsidian10 = require("obsidian");
function showRenameDialog(app, file) {
  const modal = new import_obsidian10.Modal(app);
  modal.titleEl.setText("Rename file");
  const inputContainer = modal.contentEl.createDiv();
  setCssProps(inputContainer, {
    width: "100%"
  });
  const input = new import_obsidian10.TextComponent(inputContainer);
  input.setValue(file.basename);
  setCssProps(input.inputEl, {
    width: "100%",
    boxSizing: "border-box"
  });
  input.inputEl.focus();
  input.inputEl.select();
  const buttonContainer = modal.contentEl.createDiv({ cls: "modal-button-container" });
  const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
  cancelButton.addEventListener("click", () => modal.close());
  const renameButton = buttonContainer.createEl("button", {
    text: "Rename",
    cls: "mod-cta"
  });
  const handleRename = async () => {
    const newName = input.getValue().trim();
    if (!newName || newName === file.basename) {
      modal.close();
      return;
    }
    const pathParts = file.path.split("/");
    pathParts[pathParts.length - 1] = newName + (file.extension ? `.${file.extension}` : "");
    const newPath = pathParts.join("/");
    try {
      await app.fileManager.renameFile(file, newPath);
      modal.close();
    } catch (error) {
      console.error("[Bases CMS] Error renaming file:", error);
      modal.close();
    }
  };
  renameButton.addEventListener("click", () => {
    void handleRename();
  });
  input.inputEl.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      e.preventDefault();
      void handleRename();
    } else if (e.key === "Escape") {
      e.preventDefault();
      modal.close();
    }
  });
  modal.open();
}
function isObsidianRenameCommand(commandId) {
  const lowerId = commandId.toLowerCase();
  return commandId === "file-explorer:rename-file" || commandId === "rename-file" || commandId === "file:rename-file" || lowerId.includes("rename") && lowerId.includes("file") && !lowerId.includes(":");
}
function isProblematicCommand(commandId, commandName) {
  const lowerId = commandId.toLowerCase();
  const lowerName = commandName.toLowerCase();
  const problematicPatterns = [
    "add tag",
    "add-tag",
    "insert-template",
    "insert-template",
    "editor:",
    "markdown:"
  ];
  return problematicPatterns.some(
    (pattern) => lowerId.includes(pattern) || lowerName.includes(pattern)
  );
}
function setupQuickEditIcon(app, plugin, titleEl, cardEl, cardPath, settings) {
  if (!plugin.settings.enableQuickEdit || !plugin.settings.quickEditCommand || plugin.settings.quickEditCommand === "" || settings.hideQuickEditIcon) {
    return;
  }
  const quickEditIcon = titleEl.createSpan("bases-cms-quick-edit-icon");
  quickEditIcon.addClass("bases-cms-cursor-default");
  (0, import_obsidian10.setIcon)(quickEditIcon, plugin.settings.quickEditIcon || "pencil-line");
  titleEl.addEventListener("click", (e) => {
    if (quickEditIcon.contains(e.target)) {
      e.stopPropagation();
      e.stopImmediatePropagation();
    }
  }, true);
  cardEl.addEventListener("click", (e) => {
    void (async () => {
      var _a, _b, _c, _d;
      const target = e.target;
      if (!quickEditIcon.contains(target) && !target.closest(".bases-cms-quick-edit-icon")) {
        return;
      }
      e.stopPropagation();
      e.stopImmediatePropagation();
      e.preventDefault();
      const file = app.vault.getAbstractFileByPath(cardPath);
      if (file instanceof import_obsidian10.TFile) {
        const commandId = plugin.settings.quickEditCommand;
        const commandRegistry = app.commands;
        const command = (_a = commandRegistry == null ? void 0 : commandRegistry.commands) == null ? void 0 : _a[commandId];
        const commandName = (command == null ? void 0 : command.name) || "";
        const lowerCommandName = commandName.toLowerCase();
        if (isObsidianRenameCommand(commandId) || lowerCommandName.includes("rename") && lowerCommandName.includes("file")) {
          showRenameDialog(app, file);
          return;
        }
        if (isProblematicCommand(commandId, commandName)) {
          if (plugin.settings.quickEditOpenFile) {
          } else {
            new import_obsidian10.Notice(`The "${commandName}" command requires the file to be open in an editor. Enable "Attempt to open file and execute quick edit command" in settings to try anyway.`, 5e3);
            return;
          }
        }
        let helperCalled = false;
        try {
          let pluginId = null;
          let baseCommandId = commandId;
          if (commandId.includes(":")) {
            const parts = commandId.split(":");
            pluginId = parts[0];
            baseCommandId = parts.slice(1).join(":");
          } else {
            const appWithCommands = app;
            const commandRegistry2 = appWithCommands.commands;
            const command2 = (_b = commandRegistry2 == null ? void 0 : commandRegistry2.commands) == null ? void 0 : _b[commandId];
            if (command2) {
              const sourcePlugin = command2.plugin || command2.sourcePlugin;
              if (sourcePlugin) {
                pluginId = ((_c = sourcePlugin.manifest) == null ? void 0 : _c.id) || sourcePlugin.pluginId || null;
              }
            }
          }
          if (pluginId) {
            const plugins = app.plugins;
            const sourcePlugin = (_d = plugins == null ? void 0 : plugins.plugins) == null ? void 0 : _d[pluginId];
            if (sourcePlugin) {
              const methodName = baseCommandId.split("-").map(
                (part, index) => index === 0 ? part : part.charAt(0).toUpperCase() + part.slice(1)
              ).join("") + "ByPath";
              if (sourcePlugin && typeof sourcePlugin[methodName] === "function") {
                await sourcePlugin[methodName](cardPath);
                helperCalled = true;
                return;
              }
            }
          }
        } catch (e2) {
        }
        if (!helperCalled) {
          if (!plugin.settings.quickEditOpenFile) {
            new import_obsidian10.Notice(`This command doesn't have special handling. Enable "Attempt to open file and execute quick edit command" in settings to try executing it.`, 5e3);
            return;
          }
          const leaf = app.workspace.getLeaf(false);
          await leaf.openFile(file);
          app.workspace.setActiveLeaf(leaf, { focus: true });
          let attempts = 0;
          const maxAttempts = 30;
          const executeCommand = () => {
            const finalActiveFile = app.workspace.getActiveFile();
            if (finalActiveFile === file) {
              void (async () => {
                var _a2, _b2;
                try {
                  await ((_b2 = (_a2 = app.commands) == null ? void 0 : _a2.executeCommandById) == null ? void 0 : _b2.call(_a2, plugin.settings.quickEditCommand));
                } catch (e2) {
                }
              })();
            }
          };
          const checkEditorReady = () => {
            const view = leaf.view;
            const viewWithEditor = view;
            const activeFile = app.workspace.getActiveFile();
            if (view && "editor" in view && viewWithEditor.editor && activeFile === file) {
              requestAnimationFrame(() => {
                requestAnimationFrame(() => {
                  setTimeout(() => {
                    executeCommand();
                  }, 200);
                });
              });
            } else if (attempts < maxAttempts) {
              attempts++;
              setTimeout(checkEditorReady, 50);
            }
          };
          checkEditorReady();
        }
      }
    })();
  }, true);
  quickEditIcon.addEventListener("mousedown", (e) => {
    e.stopPropagation();
    e.stopImmediatePropagation();
    e.preventDefault();
  }, true);
}

// src/utils/property-renderer.ts
var import_obsidian11 = require("obsidian");
var PropertyRenderer = class {
  constructor(app, getBasesConfig, getBasesController) {
    this.app = app;
    this.getBasesConfig = getBasesConfig;
    this.getBasesController = getBasesController;
  }
  /**
   * Renders property fields for a card
   * @param position - 'top' to render only top-positioned groups, 'bottom' to render only bottom-positioned groups, undefined to render all
   */
  renderProperties(cardEl, card, entry, settings, onPropertyToggle, position) {
    const props = [
      settings.propertyDisplay1,
      settings.propertyDisplay2,
      settings.propertyDisplay3,
      settings.propertyDisplay4,
      settings.propertyDisplay5,
      settings.propertyDisplay6,
      settings.propertyDisplay7,
      settings.propertyDisplay8,
      settings.propertyDisplay9,
      settings.propertyDisplay10,
      settings.propertyDisplay11,
      settings.propertyDisplay12,
      settings.propertyDisplay13,
      settings.propertyDisplay14
    ];
    const seen = /* @__PURE__ */ new Set();
    const effectiveProps = props.map((prop) => {
      if (!prop || prop === "") return "";
      if (seen.has(prop)) return "";
      seen.add(prop);
      return prop;
    });
    const values = effectiveProps.map((prop, index) => {
      if (!prop) return null;
      const cardProperty = `property${index + 1}`;
      const cardValue = card[cardProperty];
      if (cardValue !== void 0 && cardValue !== null) {
        return cardValue;
      }
      try {
        const value = entry.getValue(prop);
        if (!value) return null;
        if ("date" in value && value.date instanceof Date) {
          return value.date.toLocaleDateString();
        }
        if ("data" in value && value.data != null) {
          const data = value.data;
          if (Array.isArray(data)) {
            return data.map((item) => {
              if (item && typeof item === "object" && item !== null && !Array.isArray(item)) {
                return JSON.stringify(item);
              }
              return String(item);
            }).join(", ");
          }
          if (data && typeof data === "object" && data !== null && !Array.isArray(data)) {
            return JSON.stringify(data);
          }
          if (typeof data === "string" || typeof data === "number" || typeof data === "boolean") {
            return String(data);
          }
          return data ? JSON.stringify(data) : "";
        }
      } catch (e) {
      }
      return null;
    });
    const propertyGroups = [
      {
        props: [effectiveProps[0], effectiveProps[1]],
        values: [values[0], values[1]],
        sideBySide: settings.propertyLayout12SideBySide,
        position: settings.propertyGroup1Position
      },
      {
        props: [effectiveProps[2], effectiveProps[3]],
        values: [values[2], values[3]],
        sideBySide: settings.propertyLayout34SideBySide,
        position: settings.propertyGroup2Position
      },
      {
        props: [effectiveProps[4], effectiveProps[5]],
        values: [values[4], values[5]],
        sideBySide: settings.propertyLayout56SideBySide,
        position: settings.propertyGroup3Position
      },
      {
        props: [effectiveProps[6], effectiveProps[7]],
        values: [values[6], values[7]],
        sideBySide: settings.propertyLayout78SideBySide,
        position: settings.propertyGroup4Position
      },
      {
        props: [effectiveProps[8], effectiveProps[9]],
        values: [values[8], values[9]],
        sideBySide: settings.propertyLayout910SideBySide,
        position: settings.propertyGroup5Position
      },
      {
        props: [effectiveProps[10], effectiveProps[11]],
        values: [values[10], values[11]],
        sideBySide: settings.propertyLayout1112SideBySide,
        position: settings.propertyGroup6Position
      },
      {
        props: [effectiveProps[12], effectiveProps[13]],
        values: [values[12], values[13]],
        sideBySide: settings.propertyLayout1314SideBySide,
        position: settings.propertyGroup7Position
      }
    ];
    const topGroups = [];
    const bottomGroups = [];
    propertyGroups.forEach((group, index) => {
      const hasContent = group.props[0] !== "" || group.props[1] !== "";
      if (hasContent) {
        if (group.position === "top") {
          topGroups.push(group);
        } else {
          bottomGroups.push(group);
        }
      }
    });
    const shouldHideProperty = (propName, propValue) => {
      var _a, _b, _c;
      if (!propName || propName === "") return true;
      const isEmptyValue = propValue === null || propValue === "" || typeof propValue === "string" && propValue.trim() === "";
      let propertyExists = false;
      try {
        const filePath = (_a = entry == null ? void 0 : entry.file) == null ? void 0 : _a.path;
        if (filePath && ((_b = this.app) == null ? void 0 : _b.vault) && ((_c = this.app) == null ? void 0 : _c.metadataCache)) {
          const file = this.app.vault.getAbstractFileByPath(filePath);
          if (file instanceof import_obsidian11.TFile) {
            if (file.extension === "mdx") {
              propertyExists = !isEmptyValue;
            } else {
              const metadata = this.app.metadataCache.getFileCache(file);
              if (metadata && metadata.frontmatter) {
                const propertyNames = propName.split(",").map((p) => p.trim()).filter((p) => p);
                for (const prop of propertyNames) {
                  const propKey = prop.replace(/^(note|formula|file)\./, "");
                  if (propKey in metadata.frontmatter) {
                    propertyExists = true;
                    break;
                  }
                }
              }
            }
          }
        }
      } catch (e) {
      }
      if (shouldHideMissingProperties() && !propertyExists) {
        return true;
      }
      if (shouldHideEmptyProperties() && propertyExists && isEmptyValue) {
        return true;
      }
      if (shouldHideEmptyProperties() && isEmptyValue) {
        return true;
      }
      return false;
    };
    if ((position === "top" || position === void 0) && topGroups.length > 0) {
      const topMetaEl = cardEl.createDiv("card-properties properties-top");
      topGroups.forEach((group, groupIndex) => {
        const prop1ShouldRender = group.props[0] && !shouldHideProperty(group.props[0], group.values[0]);
        const prop2ShouldRender = group.props[1] && !shouldHideProperty(group.props[1], group.values[1]);
        if (!prop1ShouldRender && !prop2ShouldRender) {
          return;
        }
        const rowEl = topMetaEl.createDiv(`property-row property-row-group-${groupIndex + 1}`);
        if (group.sideBySide) {
          rowEl.addClass("property-row-side-by-side");
        }
        const field1El = rowEl.createDiv("property-field property-field-1");
        if (prop1ShouldRender) {
          this.renderPropertyContent(field1El, group.props[0], group.values[0], card, entry, settings, onPropertyToggle);
        }
        const field2El = rowEl.createDiv("property-field property-field-2");
        if (prop2ShouldRender) {
          this.renderPropertyContent(field2El, group.props[1], group.values[1], card, entry, settings, onPropertyToggle);
        }
      });
    }
    if ((position === "bottom" || position === void 0) && bottomGroups.length > 0) {
      const bottomMetaEl = cardEl.createDiv("card-properties properties-bottom");
      bottomGroups.forEach((group, groupIndex) => {
        const prop1ShouldRender = group.props[0] && !shouldHideProperty(group.props[0], group.values[0]);
        const prop2ShouldRender = group.props[1] && !shouldHideProperty(group.props[1], group.values[1]);
        if (!prop1ShouldRender && !prop2ShouldRender) {
          return;
        }
        const rowEl = bottomMetaEl.createDiv(`property-row property-row-group-${groupIndex + 1}`);
        if (group.sideBySide) {
          rowEl.addClass("property-row-side-by-side");
        }
        const field1El = rowEl.createDiv("property-field property-field-1");
        if (prop1ShouldRender) {
          this.renderPropertyContent(field1El, group.props[0], group.values[0], card, entry, settings, onPropertyToggle);
        }
        const field2El = rowEl.createDiv("property-field property-field-2");
        if (prop2ShouldRender) {
          this.renderPropertyContent(field2El, group.props[1], group.values[1], card, entry, settings, onPropertyToggle);
        }
      });
    }
  }
  /**
   * Renders individual property content
   */
  renderPropertyContent(container, propertyName, resolvedValue, card, entry, settings, onPropertyToggle) {
    if (propertyName === "") return;
    if (resolvedValue === null && shouldHideMissingProperties()) {
      return;
    }
    if (resolvedValue === "" && shouldHideEmptyProperties()) {
      return;
    }
    if (!resolvedValue && settings.propertyLabels === "hide") {
      return;
    }
    if (settings.propertyLabels === "hide") {
      if ((propertyName === "tags" || propertyName === "note.tags") && card.yamlTags.length === 0) {
        return;
      }
      if ((propertyName === "file.tags" || propertyName === "file tags") && card.tags.length === 0) {
        return;
      }
    }
    const basesConfig = this.getBasesConfig ? this.getBasesConfig() : void 0;
    const basesController = this.getBasesController ? this.getBasesController() : void 0;
    const propertyLabel = getPropertyLabel(propertyName, this.app, basesConfig, basesController);
    const isCustomLabel = propertyLabel.toLowerCase() !== propertyName.toLowerCase();
    if (settings.propertyLabels === "above") {
      const labelEl = container.createDiv("property-label");
      if (isCustomLabel) {
        labelEl.addClass("property-label-custom");
      }
      labelEl.textContent = propertyLabel;
    }
    const metaContent = container.createDiv("property-content");
    if (settings.propertyLabels === "inline") {
      metaContent.addClass("property-content-inline");
    }
    if (settings.propertyLabels === "inline") {
      const labelSpan = metaContent.createSpan("property-label-inline");
      labelSpan.textContent = propertyLabel + ": ";
    }
    if (!resolvedValue) {
      const emptyMarker = metaContent.createSpan("property-empty-marker");
      emptyMarker.textContent = getEmptyValueMarker();
      return;
    }
    const isKnownTimestampProperty = propertyName === "file.mtime" || propertyName === "file.ctime" || propertyName === "modified time" || propertyName === "created time";
    if (isKnownTimestampProperty) {
      const timestampWrapper = metaContent.createSpan();
      timestampWrapper.appendText(resolvedValue);
    } else if ((propertyName === "tags" || propertyName === "note.tags") && card.yamlTags.length > 0) {
      const tagsWrapper = metaContent.createDiv("tags-wrapper");
      const tagStyle = getTagStyle();
      if (tagStyle !== "plain") {
        tagsWrapper.addClass(`tag-style-${tagStyle}`);
      }
      card.yamlTags.forEach((tag) => {
        const tagEl = tagsWrapper.createEl("a", {
          cls: "tag",
          text: showTagHashPrefix() ? `#${tag}` : tag,
          href: "#"
        });
        tagEl.addEventListener("click", (e) => {
          var _a, _b, _c;
          e.preventDefault();
          const searchPlugin = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["global-search"];
          if ((_c = searchPlugin == null ? void 0 : searchPlugin.instance) == null ? void 0 : _c.openGlobalSearch) {
            searchPlugin.instance.openGlobalSearch("tag:" + tag);
          }
        });
      });
    } else if ((propertyName === "file.tags" || propertyName === "file tags") && card.tags.length > 0) {
      const tagsWrapper = metaContent.createDiv("tags-wrapper");
      const tagStyle = getTagStyle();
      if (tagStyle !== "plain") {
        tagsWrapper.addClass(`tag-style-${tagStyle}`);
      }
      card.tags.forEach((tag) => {
        const tagEl = tagsWrapper.createEl("a", {
          cls: "tag",
          text: showTagHashPrefix() ? `#${tag}` : tag,
          href: "#"
        });
        tagEl.addEventListener("click", (e) => {
          var _a, _b, _c;
          e.preventDefault();
          const searchPlugin = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["global-search"];
          if ((_c = searchPlugin == null ? void 0 : searchPlugin.instance) == null ? void 0 : _c.openGlobalSearch) {
            searchPlugin.instance.openGlobalSearch("tag:" + tag);
          }
        });
      });
    } else {
      if (!this.app || !this.app.metadataCache) {
        const textWrapper = metaContent.createDiv("text-wrapper");
        this.renderPropertyValueWithLinks(textWrapper, resolvedValue, card.path, propertyName);
        return;
      }
      let propInfo = void 0;
      try {
        const metadataCache = this.app.metadataCache;
        const getAllPropertyInfos = metadataCache.getAllPropertyInfos;
        if (typeof getAllPropertyInfos === "function") {
          const propertyInfos = getAllPropertyInfos();
          propInfo = propertyInfos[propertyName.toLowerCase()];
        }
      } catch (e) {
      }
      let entryValue = null;
      try {
        if (entry && typeof entry.getValue === "function") {
          entryValue = entry.getValue(propertyName);
        }
      } catch (e) {
      }
      const isCheckbox = (propInfo == null ? void 0 : propInfo.widget) === "checkbox" || entryValue && "data" in entryValue && typeof entryValue.data === "boolean";
      if (isCheckbox && onPropertyToggle) {
        const checkbox = metaContent.createEl("input", { type: "checkbox" });
        checkbox.checked = entryValue && "data" in entryValue ? Boolean(entryValue.data) : false;
        metaContent.createSpan({ text: propertyLabel });
        checkbox.addEventListener("change", (e) => {
          e.stopPropagation();
          const checked = checkbox.checked;
          void (async () => {
            try {
              const cleanProperty = propertyName.startsWith("note.") ? propertyName.substring(5) : propertyName;
              await onPropertyToggle(card.path, cleanProperty, checked);
            } catch (e2) {
              checkbox.checked = !checked;
            }
          })();
        });
        checkbox.addEventListener("click", (e) => {
          e.stopPropagation();
        });
      } else {
        const textWrapper = metaContent.createDiv("text-wrapper");
        this.renderPropertyValueWithLinks(textWrapper, resolvedValue, card.path, propertyName);
      }
    }
    if (!metaContent.textContent || metaContent.textContent.trim().length === 0) {
      metaContent.remove();
    }
  }
  /**
   * Renders property value with clickable links
   * Detects wikilinks [[...]], markdown links [...](...), and URLs
   * For image properties, also makes file paths clickable (like Obsidian does)
   */
  renderPropertyValueWithLinks(container, value, sourcePath, propertyName) {
    if (!value) {
      container.appendText(getEmptyValueMarker());
      return;
    }
    const trimmedValue = value.trim();
    if ((trimmedValue.startsWith("http://") || trimmedValue.startsWith("https://")) && !trimmedValue.includes(" ")) {
      const linkEl = container.createEl("a", {
        cls: "external-link",
        href: trimmedValue
      });
      linkEl.textContent = trimmedValue;
      linkEl.setAttr("target", "_blank");
      linkEl.setAttr("rel", "noopener");
      linkEl.addEventListener("click", (e) => {
        e.stopPropagation();
      });
      return;
    }
    const isImageProperty = propertyName && (propertyName.toLowerCase().includes("image") || propertyName.toLowerCase() === "cover" || propertyName.toLowerCase() === "thumbnail");
    if (isImageProperty && !trimmedValue.includes(" ") && !trimmedValue.startsWith("http://") && !trimmedValue.startsWith("https://") && (trimmedValue.includes("/") || trimmedValue.includes("\\") || trimmedValue.match(/\.(png|jpg|jpeg|gif|svg|webp|mp4|mov|avi)$/i))) {
      const linkEl = container.createEl("a", {
        cls: "internal-link",
        href: trimmedValue
      });
      linkEl.textContent = trimmedValue;
      linkEl.addEventListener("click", (e) => {
        e.stopPropagation();
        e.preventDefault();
        const newLeaf = e.metaKey || e.ctrlKey;
        void this.app.workspace.openLinkText(trimmedValue, sourcePath, newLeaf);
      });
      return;
    }
    const wikilinkRegex = /\[\[([^\]]+)\]\]/g;
    const markdownLinkRegex = /\[([^\]]+)\]\(([^)]+)\)/g;
    const matches = [];
    for (const m of value.matchAll(wikilinkRegex)) {
      if (m.index !== void 0) {
        matches.push({ index: m.index, type: "wikilink", match: m });
      }
    }
    for (const m of value.matchAll(markdownLinkRegex)) {
      if (m.index !== void 0) {
        matches.push({ index: m.index, type: "markdown", match: m });
      }
    }
    matches.sort((a, b) => a.index - b.index);
    let lastIndex = 0;
    for (const { index, type, match } of matches) {
      if (index > lastIndex) {
        container.appendText(value.substring(lastIndex, index));
      }
      if (type === "wikilink") {
        const linkContent = match[1];
        const parts = linkContent.split("|");
        const linkPath = parts[0].trim();
        const displayText = parts.length > 1 ? parts[1].trim() : linkPath;
        const linkEl = container.createEl("a", {
          cls: "internal-link",
          href: linkPath
        });
        linkEl.textContent = displayText;
        linkEl.addEventListener("click", (e) => {
          e.stopPropagation();
          e.preventDefault();
          const newLeaf = e.metaKey || e.ctrlKey;
          void this.app.workspace.openLinkText(linkPath, sourcePath, newLeaf);
        });
      } else if (type === "markdown") {
        const linkText = match[1];
        const linkUrl = match[2];
        if (linkUrl.startsWith("http://") || linkUrl.startsWith("https://")) {
          const linkEl = container.createEl("a", {
            cls: "external-link",
            href: linkUrl
          });
          linkEl.textContent = linkText;
          linkEl.setAttr("target", "_blank");
          linkEl.setAttr("rel", "noopener");
          linkEl.addEventListener("click", (e) => {
            e.stopPropagation();
          });
        } else {
          const linkEl = container.createEl("a", {
            cls: "internal-link",
            href: linkUrl
          });
          linkEl.textContent = linkText;
          linkEl.addEventListener("click", (e) => {
            e.stopPropagation();
            e.preventDefault();
            const newLeaf = e.metaKey || e.ctrlKey;
            void this.app.workspace.openLinkText(linkUrl, sourcePath, newLeaf);
          });
        }
      }
      lastIndex = index + match[0].length;
    }
    if (lastIndex < value.length) {
      container.appendText(value.substring(lastIndex));
    } else if (matches.length === 0) {
      container.appendText(value);
    }
  }
};

// src/views/shared-renderer.ts
init_frontmatter_helper();
var SharedCardRenderer = class {
  constructor(app, plugin, propertyObservers, updateLayoutRef, basesConfig, basesController) {
    this.app = app;
    this.plugin = plugin;
    this.propertyObservers = propertyObservers;
    this.updateLayoutRef = updateLayoutRef;
    this.basesConfig = basesConfig;
    this.basesController = basesController;
    this.propertyRenderer = new PropertyRenderer(
      this.app,
      () => this.basesConfig,
      // Pass a getter function so it always gets the latest config
      () => this.basesController
      // Pass a getter function so it always gets the latest controller
    );
  }
  /**
   * Set MDX frontmatter cache for synchronous access during rendering
   */
  setMdxFrontmatterCache(cache) {
    this.mdxFrontmatterCache = cache;
  }
  /**
   * Renders a complete card with CMS features
   */
  renderCard(container, card, entry, settings, hoverParent, isSelected, onSelect, onPropertyToggle, toolbarActions) {
    const cardEl = container.createDiv("card bases-cms-card");
    setCssProps(cardEl, {
      display: "block",
      position: "relative"
    });
    if (settings.imageFormat === "cover") {
      cardEl.classList.add("image-format-cover");
    } else if (settings.imageFormat === "thumbnail") {
      cardEl.classList.add("image-format-thumbnail");
      cardEl.classList.add(`thumbnail-${settings.imagePosition}`);
    }
    cardEl.setAttribute("data-path", card.path);
    cardEl.setAttribute("data-href", card.path);
    cardEl.addClass("bases-cms-cursor-pointer");
    const checkboxEl = cardEl.createDiv("bases-cms-select-checkbox");
    const checkbox = checkboxEl.createEl("input", { type: "checkbox", cls: "selection-checkbox" });
    checkbox.checked = isSelected;
    checkbox.addEventListener("change", (e) => {
      e.stopPropagation();
      e.stopImmediatePropagation();
      onSelect(card.path, checkbox.checked);
    });
    checkbox.addEventListener("click", (e) => {
      e.stopPropagation();
      e.stopImmediatePropagation();
    });
    if (settings.showDraftStatus && settings.imageFormat !== "cover") {
      renderDraftStatusBadge(cardEl, entry, card.path, settings, onPropertyToggle, this.app, this.mdxFrontmatterCache);
    }
    cardEl.addEventListener("click", (e) => {
      const target = e.target;
      const quickEditIcon = target.closest(".bases-cms-quick-edit-icon");
      if (quickEditIcon) {
        e.stopPropagation();
        e.stopImmediatePropagation();
        e.preventDefault();
        return;
      }
      if (checkboxEl.contains(target) || target.tagName === "INPUT" || target.closest("input") || target.closest(".bases-cms-property") || target.closest(".card-status-badge")) {
        return;
      }
      const newLeaf = e.metaKey || e.ctrlKey;
      void this.app.workspace.openLinkText(card.path, "", newLeaf);
    });
    cardEl.addEventListener("contextmenu", (e) => {
      const target = e.target;
      if (checkboxEl.contains(target) || target.tagName === "INPUT" || target.closest("input") || target.closest(".bases-cms-property") || target.closest(".card-status-badge") || target.closest(".bases-cms-quick-edit-icon")) {
        return;
      }
      const file = this.app.vault.getAbstractFileByPath(card.path);
      if (file && file instanceof import_obsidian12.TFile) {
        e.stopPropagation();
        const menu = new import_obsidian12.Menu();
        const currentlySelected = checkbox.checked;
        if (currentlySelected) {
          menu.addItem((item) => {
            item.setTitle("Unselect");
            item.setIcon("square");
            item.onClick(() => {
              onSelect(card.path, false);
            });
          });
        } else {
          menu.addItem((item) => {
            item.setTitle("Select");
            item.setIcon("copy-check");
            item.onClick(() => {
              onSelect(card.path, true);
            });
          });
        }
        menu.addSeparator();
        this.app.workspace.trigger("file-menu", menu, file, "bases");
        menu.addSeparator();
        menu.addItem((item) => {
          item.setTitle("Delete");
          item.setIcon("trash-2");
          item.onClick(async () => {
            if (toolbarActions) {
              await toolbarActions.handleDelete();
            }
          });
        });
        menu.showAtMouseEvent(e);
        setTimeout(() => {
          const menuEl = document.querySelector(".menu");
          if (!menuEl) return;
          const menuItems = Array.from(menuEl.querySelectorAll(".menu-item"));
          const deleteItem = menuItems.find((item) => {
            var _a;
            const title = (_a = item.textContent) == null ? void 0 : _a.trim();
            return title === "Delete";
          });
          if (deleteItem) {
            deleteItem.addClass("is-danger");
            const icon = deleteItem.querySelector("svg");
            if (icon) {
              setCssProps(icon, {
                color: "var(--text-error)",
                stroke: "var(--text-error)"
              });
            }
            const title = deleteItem.querySelector(".menu-item-title");
            if (title) {
              setCssProps(title, {
                color: "var(--text-error)"
              });
            }
          }
        }, 0);
      }
    });
    const titleEl = cardEl.createDiv("card-title");
    titleEl.appendText(card.title);
    setupQuickEditIcon(this.app, this.plugin, titleEl, cardEl, card.path, settings);
    if (settings.showDate && settings.dateProperty) {
      let dateValue = entry.getValue(settings.dateProperty);
      const hasValidDate = dateValue && ("date" in dateValue && dateValue.date instanceof Date || "data" in dateValue && dateValue.data != null);
      if (!hasValidDate) {
        const file = this.app.vault.getAbstractFileByPath(entry.file.path);
        if (file instanceof import_obsidian12.TFile && file.extension === "mdx") {
          void (async () => {
            const frontmatter = await getFileFrontmatter(this.app, file);
            if (frontmatter) {
              const cleanProp = settings.dateProperty.startsWith("note.") ? settings.dateProperty.substring(5) : settings.dateProperty;
              const frontmatterValue = frontmatter[cleanProp];
              if (frontmatterValue != null) {
                let date = null;
                if (frontmatterValue instanceof Date) {
                  date = frontmatterValue;
                } else if (frontmatterValue && typeof frontmatterValue === "object" && "getTime" in frontmatterValue) {
                  const dateLike = frontmatterValue;
                  try {
                    const timestamp = dateLike.getTime();
                    if (typeof timestamp === "number" && !isNaN(timestamp)) {
                      date = new Date(timestamp);
                    }
                  } catch (e) {
                  }
                }
                if (!date && typeof frontmatterValue === "string") {
                  const dateStr = frontmatterValue.trim();
                  const isoDateStr = dateStr.includes("T") ? dateStr : `${dateStr}T00:00:00`;
                  const parsedDate = new Date(isoDateStr);
                  if (!isNaN(parsedDate.getTime())) {
                    date = parsedDate;
                  } else {
                    const fallbackDate = new Date(dateStr);
                    if (!isNaN(fallbackDate.getTime())) {
                      date = fallbackDate;
                    }
                  }
                }
                if (!date && typeof frontmatterValue === "number") {
                  const parsedDate = new Date(frontmatterValue);
                  if (!isNaN(parsedDate.getTime())) {
                    date = parsedDate;
                  }
                }
                if (date) {
                  requestAnimationFrame(() => {
                    if (cardEl.isConnected) {
                      let dateString;
                      if (settings.dateIncludeTime) {
                        const datePart = date.toLocaleDateString();
                        const timePart = date.toLocaleTimeString(void 0, {
                          hour: "numeric",
                          minute: "2-digit",
                          hour12: true
                        });
                        dateString = `${datePart}, ${timePart}`;
                      } else {
                        dateString = date.toLocaleDateString();
                      }
                      let dateEl = cardEl.querySelector(".card-date");
                      if (!dateEl) {
                        const titleEl2 = cardEl.querySelector(".card-title");
                        if (titleEl2 && titleEl2.parentElement) {
                          dateEl = titleEl2.parentElement.createDiv("card-date");
                          titleEl2.parentElement.insertBefore(dateEl, titleEl2.nextSibling);
                        } else {
                          dateEl = cardEl.createDiv("card-date");
                        }
                      }
                      dateEl.setText(dateString);
                    }
                  });
                }
              }
            }
          })();
        }
      }
      if (hasValidDate && dateValue) {
        const dateObj = dateValue;
        let date = null;
        if (dateObj && "date" in dateObj && dateObj.date instanceof Date) {
          date = dateObj.date;
        } else if (dateObj && "data" in dateObj && dateObj.data) {
          const data = dateObj.data;
          if (data instanceof Date) {
            date = data;
          } else if (typeof data === "string" || typeof data === "number") {
            const parsedDate = new Date(data);
            if (!isNaN(parsedDate.getTime())) {
              date = parsedDate;
            }
          }
        }
        if (date) {
          let dateString;
          if (settings.dateIncludeTime) {
            const datePart = date.toLocaleDateString();
            const timePart = date.toLocaleTimeString(void 0, {
              hour: "numeric",
              minute: "2-digit",
              hour12: true
            });
            dateString = `${datePart}, ${timePart}`;
          } else {
            dateString = date.toLocaleDateString();
          }
          const dateEl = cardEl.createDiv("card-date");
          dateEl.appendText(dateString);
        }
      }
    }
    this.propertyRenderer.renderProperties(cardEl, card, entry, settings, onPropertyToggle, "top");
    if (settings.showTextPreview || settings.showTags && card.displayTags && card.displayTags.length > 0 || settings.imageFormat === "thumbnail" || settings.imageFormat === "cover" || settings.imageFormat !== "none" && (card.imageUrl || card.hasImageAvailable)) {
      const contentContainer = cardEl.createDiv("card-content");
      if (settings.imageFormat === "thumbnail" && card.imageUrl) {
        const rawUrls = Array.isArray(card.imageUrl) ? card.imageUrl : [card.imageUrl];
        const imageUrls = rawUrls.filter((url) => url && typeof url === "string" && url.trim().length > 0);
        if (imageUrls.length > 0) {
          const imageEl = contentContainer.createDiv("card-thumbnail");
          const imageEmbedContainer = imageEl.createDiv("image-embed");
          const originalUrl = imageUrls[0];
          void (async () => {
            const finalUrl = await convertGifToStatic(originalUrl, this.plugin.settings.forceStaticGifImages);
            imageEmbedContainer.style.backgroundImage = `url("${finalUrl}")`;
          })();
          imageEmbedContainer.style.backgroundImage = `url("${originalUrl}")`;
          setCssProps(imageEmbedContainer, {
            backgroundSize: "cover",
            backgroundPosition: "center center",
            backgroundRepeat: "no-repeat"
          });
        }
      }
      if (settings.imageFormat === "thumbnail") {
        const textWrapper = contentContainer.createDiv("card-text-wrapper");
        if (settings.showTextPreview) {
          const textPreviewEl = textWrapper.createDiv("card-text-preview");
          if (card.snippet) {
            textPreviewEl.setText(card.snippet);
          }
          cardEl.__textPreviewEl = textPreviewEl;
          cardEl.__cardPath = card.path;
        }
        if (settings.showTags && card.displayTags && card.displayTags.length > 0) {
          const tagsContainer = textWrapper.createDiv("card-tags");
          const tagStyle = getTagStyle();
          if (tagStyle !== "plain") {
            tagsContainer.addClass(`tag-style-${tagStyle}`);
          }
          const maxTags = settings.maxTagsToShow;
          const tagsToShow = card.displayTags.slice(0, maxTags);
          const remainingCount = card.displayTags.length - maxTags;
          tagsToShow.forEach((tag) => {
            const tagEl = tagsContainer.createSpan("card-tag");
            tagEl.appendText(showTagHashPrefix() ? `#${tag}` : tag);
          });
          if (remainingCount > 0) {
            const moreEl = tagsContainer.createSpan("card-tag-more");
            moreEl.appendText(`+${remainingCount} more`);
          }
        }
      } else {
        if (settings.showTextPreview) {
          const textPreviewEl = contentContainer.createDiv("card-text-preview");
          if (card.snippet) {
            textPreviewEl.setText(card.snippet);
          }
          cardEl.__textPreviewEl = textPreviewEl;
          cardEl.__cardPath = card.path;
        }
        if (settings.showTags && card.displayTags && card.displayTags.length > 0) {
          const tagsContainer = contentContainer.createDiv("card-tags");
          const tagStyle = getTagStyle();
          if (tagStyle !== "plain") {
            tagsContainer.addClass(`tag-style-${tagStyle}`);
          }
          const maxTags = settings.maxTagsToShow;
          const tagsToShow = card.displayTags.slice(0, maxTags);
          const remainingCount = card.displayTags.length - maxTags;
          tagsToShow.forEach((tag) => {
            const tagEl = tagsContainer.createSpan("card-tag");
            tagEl.appendText(showTagHashPrefix() ? `#${tag}` : tag);
          });
          if (remainingCount > 0) {
            const moreEl = tagsContainer.createSpan("card-tag-more");
            moreEl.appendText(`+${remainingCount} more`);
          }
        }
      }
      if (settings.imageFormat === "cover") {
        if (card.imageUrl) {
          const rawUrls = Array.isArray(card.imageUrl) ? card.imageUrl : [card.imageUrl];
          const imageUrls = rawUrls.filter((url) => url && typeof url === "string" && url.trim().length > 0);
          if (imageUrls.length > 0) {
            const imageEl = contentContainer.createDiv("card-cover");
            const imageEmbedContainer = imageEl.createDiv("image-embed");
            const originalUrl = imageUrls[0];
            void (async () => {
              const finalUrl = await convertGifToStatic(originalUrl, this.plugin.settings.forceStaticGifImages);
              imageEmbedContainer.style.backgroundImage = `url("${finalUrl}")`;
            })();
            imageEmbedContainer.style.backgroundImage = `url("${originalUrl}")`;
            setCssProps(imageEmbedContainer, {
              backgroundSize: "cover",
              backgroundPosition: "center center",
              backgroundRepeat: "no-repeat"
            });
            if (settings.showDraftStatus) {
              renderDraftStatusBadge(imageEl, entry, card.path, settings, onPropertyToggle, this.app, this.mdxFrontmatterCache);
            }
            this.propertyRenderer.renderProperties(cardEl, card, entry, settings, onPropertyToggle, "bottom");
            return;
          }
        }
        if (card.hasImageAvailable && !card.imageUrl) {
          const placeholderEl = contentContainer.createDiv("card-cover-placeholder");
          renderDraftStatusBadge(placeholderEl, entry, card.path, settings, onPropertyToggle, this.app, this.mdxFrontmatterCache);
        } else if (!card.imageUrl) {
          const placeholderEl = contentContainer.createDiv("card-cover-placeholder");
          renderDraftStatusBadge(placeholderEl, entry, card.path, settings, onPropertyToggle, this.app, this.mdxFrontmatterCache);
        }
      }
    }
    this.propertyRenderer.renderProperties(cardEl, card, entry, settings, onPropertyToggle, "bottom");
    return;
  }
};

// src/components/bulk-toolbar.ts
var import_obsidian21 = require("obsidian");

// src/utils/bulk-operations.ts
var import_obsidian13 = require("obsidian");

// src/utils/frontmatter.ts
init_frontmatter_helper();
async function addProperties(app, file, props, overwrite) {
  await processFileFrontMatter(app, file, (frontmatter) => {
    for (const [key, value] of props) {
      if (key === "tags" && !Object.prototype.hasOwnProperty.call(frontmatter, "tags") && !Array.isArray(value.data)) {
        frontmatter[key] = [value.data];
        continue;
      }
      if (!frontmatter[key] || overwrite) {
        frontmatter[key] = value.data;
        continue;
      }
      const type1 = value.type;
      const existingValue = frontmatter[key];
      const type2 = Array.isArray(existingValue) ? "list" : typeof existingValue === "number" ? "number" : typeof existingValue === "boolean" ? "checkbox" : "text";
      if (canBeAppended(type1, type2)) {
        if (frontmatter[key] === value.data) continue;
        if (!value.data) continue;
        const arr = mergeIntoArrays(frontmatter[key], value.data);
        frontmatter[key] = arr;
        continue;
      } else {
        frontmatter[key] = value.data;
        continue;
      }
    }
  });
}
async function removeProperties(app, file, props) {
  await processFileFrontMatter(app, file, (frontmatter) => {
    for (const prop of props) {
      frontmatter[prop] = void 0;
    }
  });
}
function canBeAppended(str1, str2) {
  const arr = ["number", "date", "datetime", "checkbox"];
  if (arr.includes(str1) || arr.includes(str2)) return false;
  return true;
}
function mergeIntoArrays(...args) {
  const arrays = args.map((arg) => Array.isArray(arg) ? arg : [arg]);
  const flattened = arrays.flat();
  const unique = [...new Set(flattened)];
  return unique;
}

// src/utils/bulk-operations.ts
init_frontmatter_helper();
var BulkOperations = class {
  constructor(app) {
    this.app = app;
  }
  /**
   * Set draft status for multiple files
   * Respects filename prefix mode and reverse logic settings
   */
  async setDraft(files, draft, settings) {
    await this.batchProcessFiles(files, async (file) => {
      if (settings) {
        if (settings.draftStatusUseFilenamePrefix) {
          const fileName = file.basename;
          const startsWithUnderscore = fileName.startsWith("_");
          const currentPath = file.path;
          const pathParts = currentPath.split("/");
          let targetValue = draft;
          if (settings.draftStatusReverse) {
            targetValue = !draft;
          }
          if (targetValue === true) {
            if (!startsWithUnderscore) {
              const newName = `_${fileName}${file.extension ? `.${file.extension}` : ""}`;
              pathParts[pathParts.length - 1] = newName;
              const newPath = pathParts.join("/");
              await this.app.fileManager.renameFile(file, newPath);
            }
          } else {
            if (startsWithUnderscore) {
              const newName = fileName.substring(1) + (file.extension ? `.${file.extension}` : "");
              pathParts[pathParts.length - 1] = newName;
              const newPath = pathParts.join("/");
              await this.app.fileManager.renameFile(file, newPath);
            }
          }
        } else {
          const cleanConfigProperty = settings.draftStatusProperty && settings.draftStatusProperty.trim() ? settings.draftStatusProperty.startsWith("note.") ? settings.draftStatusProperty.substring(5) : settings.draftStatusProperty : "draft";
          let targetValue = draft;
          if (settings.draftStatusReverse) {
            targetValue = !draft;
          }
          await processFileFrontMatter(this.app, file, (frontmatter) => {
            frontmatter[cleanConfigProperty] = targetValue;
          });
        }
      } else {
        await processFileFrontMatter(this.app, file, (frontmatter) => {
          frontmatter.draft = draft;
        });
      }
    });
    new import_obsidian13.Notice(`Set ${files.length} file${files.length !== 1 ? "s" : ""} to ${draft ? "draft" : "published"}`);
  }
  /**
   * Add tags to multiple files
   */
  async addTags(files, tags) {
    const props = /* @__PURE__ */ new Map();
    props.set("tags", {
      type: "tags",
      data: tags,
      overwrite: false,
      delimiter: ","
    });
    await this.batchProcessFiles(files, async (file) => {
      await addProperties(this.app, file, props, false);
    });
    new import_obsidian13.Notice(`Added tags to ${files.length} file${files.length !== 1 ? "s" : ""}`);
  }
  /**
   * Remove tags from multiple files
   */
  async removeTags(files, tagsToRemove) {
    await this.batchProcessFiles(files, async (file) => {
      const frontmatter = await getFileFrontmatter(this.app, file);
      if (frontmatter == null ? void 0 : frontmatter.tags) {
        const fmTags = frontmatter.tags;
        const currentTags = Array.isArray(fmTags) ? fmTags : [fmTags];
        const updatedTags = currentTags.filter(
          (tag) => !tagsToRemove.includes(tag)
        );
        await processFileFrontMatter(this.app, file, (fm) => {
          if (updatedTags.length > 0) {
            fm.tags = updatedTags;
          } else {
            fm.tags = void 0;
          }
        });
      }
    });
    new import_obsidian13.Notice(`Removed tags from ${files.length} file${files.length !== 1 ? "s" : ""}`);
  }
  /**
   * Set a property value for multiple files
   */
  async setProperty(files, property, value, propertyType = "text") {
    const cleanProperty = property.startsWith("note.") ? property.substring(5) : property;
    const props = /* @__PURE__ */ new Map();
    props.set(cleanProperty, {
      type: propertyType,
      data: value,
      overwrite: true,
      delimiter: ","
    });
    await this.batchProcessFiles(files, async (file) => {
      await addProperties(this.app, file, props, true);
    });
    new import_obsidian13.Notice(`Set ${cleanProperty} on ${files.length} file${files.length !== 1 ? "s" : ""}`);
  }
  /**
   * Remove a property from multiple files
   */
  async removeProperty(files, property) {
    const cleanProperty = property.startsWith("note.") ? property.substring(5) : property;
    await this.batchProcessFiles(files, async (file) => {
      await removeProperties(this.app, file, [cleanProperty]);
    });
    new import_obsidian13.Notice(`Removed ${cleanProperty} from ${files.length} file${files.length !== 1 ? "s" : ""}`);
  }
  /**
   * Batch process files with progress indication
   */
  async batchProcessFiles(files, processor) {
    let processed = 0;
    const total = files.length;
    for (const filePath of files) {
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian13.TFile) {
        try {
          await processor(file);
          processed++;
        } catch (error) {
          console.error(`Error processing ${filePath}:`, error);
        }
      }
    }
    if (processed < total) {
      new import_obsidian13.Notice(`Processed ${processed} of ${total} files`);
    }
  }
};

// src/components/manage-tags-modal.ts
var import_obsidian14 = require("obsidian");
init_frontmatter_helper();
var ManageTagsModal = class extends import_obsidian14.Modal {
  constructor(app, files) {
    super(app);
    this.tagsToAdd = "";
    this.tagsToRemove = /* @__PURE__ */ new Set();
    this.files = files;
    this.bulkOps = new BulkOperations(app);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    new import_obsidian14.Setting(contentEl).setName("Manage tags").setHeading();
    contentEl.createEl("p", { text: `Managing tags for ${this.files.length} file${this.files.length !== 1 ? "s" : ""}` });
    new import_obsidian14.Setting(contentEl).setName("Add tags").setDesc("Enter tags to add (comma-separated).").addText((text) => {
      text.setPlaceholder("tag1, tag2, tag3").onChange((value) => {
        this.tagsToAdd = value;
      });
    });
    contentEl.createEl("h3", { text: "Remove tags" });
    const removeContainer = contentEl.createDiv();
    const allTags = /* @__PURE__ */ new Set();
    for (const filePath of this.files) {
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian14.TFile) {
        if (file.extension === "mdx") {
          void (async () => {
            const frontmatter = await getFileFrontmatter(this.app, file);
            if (frontmatter == null ? void 0 : frontmatter.tags) {
              const tags = Array.isArray(frontmatter.tags) ? frontmatter.tags : [frontmatter.tags];
              tags.forEach((tag) => {
                if (!allTags.has(tag)) {
                  allTags.add(tag);
                  if (this.contentEl && this.contentEl.isConnected && removeContainer.isConnected) {
                    this.addTagCheckbox(removeContainer, tag);
                  }
                }
              });
            }
          })();
        } else {
          const metadata = this.app.metadataCache.getFileCache(file);
          const frontmatter = metadata == null ? void 0 : metadata.frontmatter;
          if (frontmatter == null ? void 0 : frontmatter.tags) {
            const tags = Array.isArray(frontmatter.tags) ? frontmatter.tags : [frontmatter.tags];
            tags.forEach((tag) => allTags.add(tag));
          }
        }
      }
    }
    for (const tag of Array.from(allTags).sort()) {
      new import_obsidian14.Setting(removeContainer).setName(tag).addToggle((toggle) => {
        toggle.setValue(this.tagsToRemove.has(tag)).onChange((value) => {
          if (value) {
            this.tagsToRemove.add(tag);
          } else {
            this.tagsToRemove.delete(tag);
          }
        });
      });
    }
    const buttonContainer = contentEl.createDiv();
    buttonContainer.addClass("bases-cms-modal-button-container");
    const cancelBtn = buttonContainer.createEl("button");
    cancelBtn.setText("Cancel");
    cancelBtn.addEventListener("click", () => this.close());
    const applyBtn = buttonContainer.createEl("button");
    applyBtn.setText("Apply");
    applyBtn.addClass("mod-cta");
    applyBtn.addEventListener("click", () => {
      void (async () => {
        await this.applyChanges();
        this.close();
      })();
    });
  }
  addTagCheckbox(container, tag) {
    new import_obsidian14.Setting(container).setName(tag).addToggle((toggle) => {
      toggle.setValue(this.tagsToRemove.has(tag)).onChange((value) => {
        if (value) {
          this.tagsToRemove.add(tag);
        } else {
          this.tagsToRemove.delete(tag);
        }
      });
    });
  }
  async applyChanges() {
    if (this.tagsToAdd.trim()) {
      const tagsToAdd = this.tagsToAdd.split(",").map((t) => t.trim()).filter((t) => t.length > 0);
      if (tagsToAdd.length > 0) {
        await this.bulkOps.addTags(this.files, tagsToAdd);
      }
    }
    if (this.tagsToRemove.size > 0) {
      await this.bulkOps.removeTags(this.files, Array.from(this.tagsToRemove));
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/components/set-property-modal.ts
var import_obsidian15 = require("obsidian");
var SetPropertyModal = class extends import_obsidian15.Modal {
  constructor(app, files) {
    super(app);
    this.propertyName = "";
    this.propertyValue = "";
    this.propertyType = "text";
    this.files = files;
    this.bulkOps = new BulkOperations(app);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    new import_obsidian15.Setting(contentEl).setName("Set property").setHeading();
    contentEl.createEl("p", { text: `Setting property on ${this.files.length} file${this.files.length !== 1 ? "s" : ""}` });
    new import_obsidian15.Setting(contentEl).setName("Property name").setDesc("Enter the property name to set.").addText((text) => {
      text.setPlaceholder("Enter name").onChange((value) => {
        this.propertyName = value;
      });
    });
    new import_obsidian15.Setting(contentEl).setName("Property type").setDesc("Select the property type.").addDropdown((dropdown) => {
      dropdown.addOption("text", "Text").addOption("number", "Number").addOption("checkbox", "Checkbox").addOption("date", "Date").setValue(this.propertyType).onChange((value) => {
        this.propertyType = value;
      });
    });
    new import_obsidian15.Setting(contentEl).setName("Property value").setDesc("Enter the property value.").addText((text) => {
      text.setPlaceholder("Enter value").onChange((value) => {
        this.propertyValue = value;
      });
    });
    const buttonContainer = contentEl.createDiv();
    buttonContainer.addClass("bases-cms-modal-button-container");
    const cancelBtn = buttonContainer.createEl("button");
    cancelBtn.setText("Cancel");
    cancelBtn.addEventListener("click", () => this.close());
    const applyBtn = buttonContainer.createEl("button");
    applyBtn.setText("Apply");
    applyBtn.addClass("mod-cta");
    applyBtn.addEventListener("click", () => {
      void (async () => {
        if (this.propertyName && this.propertyValue) {
          await this.applyChanges();
          this.close();
        }
      })();
    });
  }
  async applyChanges() {
    let value = this.propertyValue;
    if (this.propertyType === "number") {
      value = Number(this.propertyValue);
    } else if (this.propertyType === "checkbox") {
      value = this.propertyValue.toLowerCase() === "true" || this.propertyValue === "1";
    } else if (this.propertyType === "date") {
      value = this.propertyValue;
    }
    await this.bulkOps.setProperty(this.files, this.propertyName, value, this.propertyType);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/components/remove-property-modal.ts
var import_obsidian16 = require("obsidian");
init_frontmatter_helper();
var RemovePropertyModal = class extends import_obsidian16.Modal {
  constructor(app, files) {
    super(app);
    this.propertiesToRemove = /* @__PURE__ */ new Set();
    this.files = files;
    this.bulkOps = new BulkOperations(app);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    new import_obsidian16.Setting(contentEl).setName("Remove property").setHeading();
    contentEl.createEl("p", { text: `Removing properties from ${this.files.length} file${this.files.length !== 1 ? "s" : ""}` });
    const propertiesContainer = contentEl.createDiv();
    const allProperties = /* @__PURE__ */ new Set();
    for (const filePath of this.files) {
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian16.TFile && file.extension !== "mdx") {
        const metadata = this.app.metadataCache.getFileCache(file);
        const frontmatter = metadata == null ? void 0 : metadata.frontmatter;
        if (frontmatter) {
          for (const key in frontmatter) {
            if (key !== "tags" && key !== "title") {
              allProperties.add(key);
            }
          }
        }
      }
    }
    for (const prop of Array.from(allProperties).sort()) {
      this.addPropertyCheckbox(propertiesContainer, prop);
    }
    void (async () => {
      for (const filePath of this.files) {
        const file = this.app.vault.getAbstractFileByPath(filePath);
        if (file instanceof import_obsidian16.TFile && file.extension === "mdx") {
          const frontmatter = await getFileFrontmatter(this.app, file);
          if (frontmatter) {
            for (const key in frontmatter) {
              if (key !== "tags" && key !== "title") {
                if (!allProperties.has(key)) {
                  allProperties.add(key);
                  if (this.contentEl && this.contentEl.isConnected && propertiesContainer.isConnected) {
                    this.addPropertyCheckbox(propertiesContainer, key);
                  }
                }
              }
            }
          }
        }
      }
    })();
    if (allProperties.size === 0) {
      contentEl.createEl("p", { text: "No properties found in selected files." });
    }
    const buttonContainer = contentEl.createDiv();
    buttonContainer.addClass("bases-cms-modal-button-container");
    const cancelBtn = buttonContainer.createEl("button");
    cancelBtn.setText("Cancel");
    cancelBtn.addEventListener("click", () => this.close());
    const applyBtn = buttonContainer.createEl("button");
    applyBtn.setText("Apply");
    applyBtn.addClass("mod-cta");
    applyBtn.addEventListener("click", () => {
      void (async () => {
        if (this.propertiesToRemove.size > 0) {
          await this.applyChanges();
          this.close();
        }
      })();
    });
  }
  addPropertyCheckbox(container, prop) {
    new import_obsidian16.Setting(container).setName(prop).addToggle((toggle) => {
      toggle.setValue(this.propertiesToRemove.has(prop)).onChange((value) => {
        if (value) {
          this.propertiesToRemove.add(prop);
        } else {
          this.propertiesToRemove.delete(prop);
        }
      });
    });
  }
  async applyChanges() {
    for (const prop of this.propertiesToRemove) {
      await this.bulkOps.removeProperty(this.files, prop);
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/utils/toolbar-actions.ts
init_deletion_preview();

// src/components/bulk-operation-confirm.ts
var import_obsidian20 = require("obsidian");
var BulkOperationConfirmModal = class extends import_obsidian20.Modal {
  constructor(app, files, operation, onConfirm) {
    super(app);
    this.files = files;
    this.operation = operation;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    const operationName = this.operation === "draft" ? "mark as draft" : "mark as published";
    const headingText = operationName.charAt(0).toUpperCase() + operationName.slice(1);
    new import_obsidian20.Setting(contentEl).setName(`Confirm ${headingText}`).setHeading();
    contentEl.createEl("p", {
      text: `Are you sure you want to ${operationName} ${this.files.length} file${this.files.length !== 1 ? "s" : ""}?`
    });
    if (this.files.length > 0) {
      const filesList = contentEl.createEl("ul", { cls: "bases-cms-deletion-list" });
      for (const filePath of this.files.slice(0, 20)) {
        const li = filesList.createEl("li");
        li.setText(filePath);
      }
      if (this.files.length > 20) {
        filesList.createEl("li", {
          text: `... and ${this.files.length - 20} more file${this.files.length - 20 !== 1 ? "s" : ""}`
        });
      }
    }
    const buttonContainer = contentEl.createDiv();
    buttonContainer.addClass("bases-cms-modal-button-container");
    const cancelBtn = buttonContainer.createEl("button");
    cancelBtn.setText("Cancel");
    cancelBtn.addEventListener("click", () => this.close());
    const confirmBtn = buttonContainer.createEl("button");
    confirmBtn.setText("Confirm");
    confirmBtn.addClass("mod-cta");
    confirmBtn.addEventListener("click", () => {
      this.onConfirm();
      this.close();
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/utils/toolbar-actions.ts
init_smart_deletion();
var ToolbarActions = class {
  constructor(app, plugin, getSelectedFiles, clearSelection, refreshView, showToolbar) {
    this.app = app;
    this.plugin = plugin;
    this.getSelectedFiles = getSelectedFiles;
    this.clearSelection = clearSelection;
    this.refreshView = refreshView;
    this.showToolbar = showToolbar;
    this.bulkOps = new BulkOperations(app);
  }
  async handleSetDraft(settings) {
    const files = this.getSelectedFiles();
    if (files.length === 0) return;
    if (this.plugin.settings.confirmBulkOperations) {
      const modal = new BulkOperationConfirmModal(
        this.app,
        files,
        "draft",
        () => {
          void (async () => {
            await this.bulkOps.setDraft(files, true, settings);
            this.refreshView();
          })();
        }
      );
      modal.open();
    } else {
      await this.bulkOps.setDraft(files, true, settings);
      this.refreshView();
    }
  }
  async handlePublish(settings) {
    const files = this.getSelectedFiles();
    if (files.length === 0) return;
    if (this.plugin.settings.confirmBulkOperations) {
      const modal = new BulkOperationConfirmModal(
        this.app,
        files,
        "publish",
        () => {
          void (async () => {
            await this.bulkOps.setDraft(files, false, settings);
            this.refreshView();
          })();
        }
      );
      modal.open();
    } else {
      await this.bulkOps.setDraft(files, false, settings);
      this.refreshView();
    }
  }
  handleManageTags() {
    const files = this.getSelectedFiles();
    if (files.length === 0) return;
    const modal = new ManageTagsModal(this.app, files);
    modal.onClose = () => {
      this.showToolbar();
      this.refreshView();
    };
    modal.open();
  }
  handleSetProperty() {
    const files = this.getSelectedFiles();
    if (files.length === 0) return;
    const modal = new SetPropertyModal(this.app, files);
    modal.onClose = () => {
      this.showToolbar();
      this.refreshView();
    };
    modal.open();
  }
  handleRemoveProperty() {
    const files = this.getSelectedFiles();
    if (files.length === 0) return;
    const modal = new RemovePropertyModal(this.app, files);
    modal.onClose = () => {
      this.showToolbar();
      this.refreshView();
    };
    modal.open();
  }
  async handleDelete() {
    const files = this.getSelectedFiles();
    if (files.length === 0) return;
    if (this.plugin.settings.confirmDeletions) {
      const preview = await prepareDeletionPreview(
        this.app,
        files,
        this.plugin.settings
      );
      const modal = new DeletionPreviewModal(
        this.app,
        preview,
        () => {
          this.clearSelection();
          this.refreshView();
        }
      );
      modal.open();
    } else {
      const preview = await prepareDeletionPreview(
        this.app,
        files,
        this.plugin.settings
      );
      await executeSmartDeletion(this.app, preview);
      this.clearSelection();
      this.refreshView();
    }
  }
};

// src/components/bulk-toolbar.ts
var BulkToolbar = class {
  constructor(app, plugin, container, getSelectedFiles, clearSelection, refreshView, selectAllCallback, settings) {
    this.app = app;
    this.plugin = plugin;
    this.container = container;
    this.getSelectedFiles = getSelectedFiles;
    this.clearSelection = clearSelection;
    this.refreshView = refreshView;
    this.toolbarEl = null;
    this.countEl = null;
    this.resizeObserver = null;
    this.timeoutIds = [];
    this.selectAllCallback = selectAllCallback;
    this.settings = settings;
    this.actions = new ToolbarActions(
      this.app,
      this.plugin,
      this.getSelectedFiles,
      this.clearSelection,
      this.refreshView,
      () => this.show()
    );
    this.createToolbar();
  }
  /**
   * Update settings (called when view settings change)
   */
  updateSettings(settings) {
    this.settings = settings;
  }
  /**
   * Get toolbar actions (for use in context menus)
   */
  getActions() {
    return this.actions;
  }
  createToolbar() {
    this.toolbarEl = document.createElement("div");
    this.toolbarEl.className = "bases-toolbar bases-cms-bulk-toolbar bases-cms-bulk-toolbar-hidden";
    this.toolbarEl.__bulkToolbarInstance = this;
    this.createToolbarContent();
    this.positionToolbar();
    const timeoutId = window.setTimeout(() => this.positionToolbar(), 100);
    this.timeoutIds.push(timeoutId);
  }
  positionToolbar() {
    if (!this.toolbarEl) return;
    let basesHeader = this.container.closest(".bases-header");
    if (!basesHeader) {
      let parent = this.container.parentElement;
      while (parent && !basesHeader) {
        if (parent.classList.contains("bases-header")) {
          basesHeader = parent;
          break;
        }
        parent = parent.parentElement;
      }
    }
    if (!basesHeader) {
      const allHeaders = Array.from(document.querySelectorAll(".bases-header"));
      for (const header of allHeaders) {
        if (header.contains(this.container)) {
          basesHeader = header;
          break;
        }
      }
    }
    const viewContent = this.container.closest(".view-content");
    if (viewContent) {
      if (this.toolbarEl.parentElement !== viewContent) {
        if (this.toolbarEl.parentElement) {
          this.toolbarEl.remove();
        }
        viewContent.insertBefore(this.toolbarEl, this.container);
      } else if (this.toolbarEl.nextSibling !== this.container) {
        if (this.toolbarEl.parentElement) {
          this.toolbarEl.remove();
        }
        viewContent.insertBefore(this.toolbarEl, this.container);
      }
    } else if (basesHeader && basesHeader.parentElement) {
      if (this.toolbarEl.parentElement !== basesHeader.parentElement) {
        if (this.toolbarEl.parentElement) {
          this.toolbarEl.remove();
        }
        basesHeader.parentElement.insertBefore(this.toolbarEl, basesHeader.nextSibling);
      }
    } else {
      const parent = this.container.parentElement;
      if (parent) {
        if (this.toolbarEl.parentElement !== parent || this.toolbarEl.nextSibling !== this.container) {
          if (this.toolbarEl.parentElement) {
            this.toolbarEl.remove();
          }
          parent.insertBefore(this.toolbarEl, this.container);
        }
      }
    }
  }
  createToolbarContent() {
    if (!this.toolbarEl) return;
    const leftContainer = this.toolbarEl.createDiv("bases-cms-bulk-toolbar-left");
    const createBasesButton = (iconName, text, onClick, container, isDestructive = false) => {
      const toolbarItem = container.createDiv("bases-toolbar-item");
      const button = toolbarItem.createDiv("text-icon-button");
      if (isDestructive) {
        button.addClass("destructive");
      }
      button.setAttribute("tabindex", "0");
      const iconEl = button.createSpan("text-button-icon");
      (0, import_obsidian21.setIcon)(iconEl, iconName);
      const textEl = button.createSpan("text-button-label");
      textEl.setText(text);
      button.addEventListener("click", onClick);
      return button;
    };
    if (this.plugin.settings.showToolbarSelectAll) {
      createBasesButton("copy-check", "Select all", () => this.handleSelectAll(), leftContainer);
    }
    if (this.plugin.settings.showToolbarClear) {
      createBasesButton("square-x", "Clear", () => this.clearSelection(), leftContainer);
    }
    const countItem = leftContainer.createDiv("bases-toolbar-item bases-cms-selected-count");
    this.countEl = countItem.createSpan("text-button-label");
    this.countEl.setText("0 selected");
    const rightContainer = this.toolbarEl.createDiv("bases-cms-bulk-toolbar-right");
    if (this.plugin.settings.showToolbarPublish) {
      createBasesButton("book-check", "Publish", () => {
        void this.actions.handlePublish(this.settings);
      }, rightContainer);
    }
    if (this.plugin.settings.showToolbarDraft) {
      createBasesButton("book-dashed", "Draft", () => {
        void this.actions.handleSetDraft(this.settings);
      }, rightContainer);
    }
    if (this.plugin.settings.showToolbarTags) {
      createBasesButton("tags", "Tags", () => this.actions.handleManageTags(), rightContainer);
    }
    if (this.plugin.settings.showToolbarSet) {
      createBasesButton("list-check", "Set", () => this.actions.handleSetProperty(), rightContainer);
    }
    if (this.plugin.settings.showToolbarRemove) {
      createBasesButton("list-x", "Remove", () => this.actions.handleRemoveProperty(), rightContainer);
    }
    if (this.plugin.settings.showToolbarDelete) {
      createBasesButton("trash-2", "Delete", () => {
        void this.actions.handleDelete();
      }, rightContainer, true);
    }
    this.setupResponsiveBehavior();
  }
  setupResponsiveBehavior() {
    if (!this.toolbarEl) return;
    const timeoutId1 = window.setTimeout(() => {
      this.updateCollapsedState();
    }, 100);
    this.timeoutIds.push(timeoutId1);
    if (this.toolbarEl) {
      this.resizeObserver = new ResizeObserver(() => {
        this.updateCollapsedState();
      });
      this.resizeObserver.observe(this.toolbarEl);
    }
    const container = this.container;
    if (container) {
      const containerObserver = new ResizeObserver(() => {
        const timeoutId = window.setTimeout(() => {
          this.updateCollapsedState();
        }, 10);
        this.timeoutIds.push(timeoutId);
      });
      containerObserver.observe(container);
      this.containerObserver = containerObserver;
    }
  }
  updateCollapsedState() {
    if (!this.toolbarEl) return;
    const toolbarWidth = this.toolbarEl.offsetWidth;
    const isCollapsed = toolbarWidth < 680;
    if (isCollapsed) {
      this.toolbarEl.addClass("collapsed");
    } else {
      this.toolbarEl.removeClass("collapsed");
    }
  }
  updateCount(count) {
    if (this.countEl) {
      this.countEl.setText(`${count} selected`);
    }
  }
  handleSelectAll() {
    if (this.selectAllCallback) {
      this.selectAllCallback();
    }
  }
  show() {
    if (!this.toolbarEl) {
      console.warn("[Bases CMS] Toolbar element not found, recreating...");
      this.createToolbar();
    }
    if (this.toolbarEl) {
      this.positionToolbar();
      if (!this.toolbarEl.parentElement) {
        console.warn("[Bases CMS] Toolbar not in DOM, repositioning...");
        this.positionToolbar();
      }
      this.toolbarEl.removeClass("bases-cms-bulk-toolbar-hidden");
      this.toolbarEl.addClass("bases-cms-bulk-toolbar-visible");
      void this.toolbarEl.offsetHeight;
      const timeoutId = window.setTimeout(() => {
        if (this.toolbarEl) {
          this.toolbarEl.removeClass("bases-cms-bulk-toolbar-animating-out");
          this.toolbarEl.addClass("bases-cms-bulk-toolbar-animating-in");
        }
      }, 10);
      this.timeoutIds.push(timeoutId);
    } else {
      console.error("[Bases CMS] Failed to show toolbar - element is null");
    }
  }
  hide() {
    if (this.toolbarEl) {
      this.toolbarEl.removeClass("bases-cms-bulk-toolbar-animating-in");
      this.toolbarEl.addClass("bases-cms-bulk-toolbar-animating-out");
      const timeoutId = window.setTimeout(() => {
        if (this.toolbarEl) {
          this.toolbarEl.removeClass("bases-cms-bulk-toolbar-visible");
          this.toolbarEl.addClass("bases-cms-bulk-toolbar-hidden");
        }
      }, 200);
      this.timeoutIds.push(timeoutId);
    }
  }
  /**
   * Recreate the toolbar with updated settings
   * Preserves visibility state and count
   */
  recreate() {
    const wasVisible = this.toolbarEl && !this.toolbarEl.hasClass("bases-cms-bulk-toolbar-hidden");
    let currentCount = 0;
    if (this.countEl && this.countEl.textContent) {
      const match = this.countEl.textContent.match(/\d+/);
      if (match) {
        currentCount = parseInt(match[0], 10);
      }
    }
    this.destroy();
    this.createToolbar();
    if (wasVisible && this.toolbarEl && currentCount > 0) {
      this.updateCount(currentCount);
      this.show();
    }
  }
  destroy() {
    this.timeoutIds.forEach((id) => window.clearTimeout(id));
    this.timeoutIds = [];
    if (this.resizeObserver) {
      this.resizeObserver.disconnect();
      this.resizeObserver = null;
    }
    const containerObserver = this.containerObserver;
    if (containerObserver) {
      containerObserver.disconnect();
      this.containerObserver = void 0;
    }
    if (this.toolbarEl) {
      this.toolbarEl.remove();
      this.toolbarEl = null;
    }
  }
};

// src/utils/new-note-interceptor.ts
init_settings_schema();
function setupNewNoteInterceptor(app, containerEl, config, pluginSettings, registerCleanup) {
  const interceptNewButton = (e) => {
    const target = e.target;
    const buttonEl = target.closest('.bases-toolbar-new-item-menu, .bases-toolbar-new-item-menu .text-icon-button, [data-action="new-item"], button[aria-label*="new"], button[aria-label*="New"], .bases-toolbar button');
    if (!buttonEl) {
      return;
    }
    if (target.closest(".bases-cms-bulk-toolbar, .bases-cms-container .card")) {
      return;
    }
    const activeLeaf = app.workspace.activeLeaf;
    const activeView = activeLeaf == null ? void 0 : activeLeaf.view;
    const activeViewContainer = activeView == null ? void 0 : activeView.containerEl;
    const isCMSView = (activeView == null ? void 0 : activeView.type) === "bases-cms" || (activeViewContainer == null ? void 0 : activeViewContainer.querySelector(".bases-cms-container")) !== null;
    if (!isCMSView) {
      return;
    }
    const isOurView = activeViewContainer && (activeViewContainer === containerEl || activeViewContainer.contains(containerEl) || containerEl.contains(activeViewContainer));
    if (!isOurView) {
      return;
    }
    const containerWithView = containerEl;
    const viewInstance = containerWithView.__cmsView;
    const viewConfig = (viewInstance == null ? void 0 : viewInstance.config) || containerWithView.__cmsConfig || config;
    const settings = readCMSSettings(viewConfig, pluginSettings);
    const hasCustomLocation = settings.newNoteLocation && settings.newNoteLocation.trim() !== "";
    if (settings.customizeNewButton || hasCustomLocation) {
      e.preventDefault();
      e.stopPropagation();
      e.stopImmediatePropagation();
      void (async () => {
        var _a;
        const locationInput = ((_a = settings.newNoteLocation) == null ? void 0 : _a.trim()) || "";
        if (locationInput === "" && !settings.customizeNewButton) {
          const vaultConfig = app.vault.config;
          const newFileLocation = (vaultConfig == null ? void 0 : vaultConfig.newFileLocation) || "folder";
          const newFileFolderPath = (vaultConfig == null ? void 0 : vaultConfig.newFileFolderPath) || "";
          let filePath = "Untitled.md";
          if (newFileLocation === "folder" && newFileFolderPath) {
            filePath = `${newFileFolderPath}/Untitled.md`;
          } else if (newFileLocation === "current") {
            const activeFile = app.workspace.getActiveFile();
            if (activeFile && activeFile.parent) {
              filePath = `${activeFile.parent.path}/Untitled.md`;
            }
          } else if (newFileLocation === "root") {
            filePath = "Untitled.md";
          }
          const file = await app.vault.create(filePath, "");
          if (settings.customizeNewButton) {
            await app.workspace.openLinkText(file.path, "", false);
          }
          return;
        }
        if (locationInput === "/" || locationInput.replace(/\//g, "") === "") {
          const newFile = await app.vault.create("Untitled.md", "");
          if (settings.customizeNewButton) {
            await app.workspace.openLinkText(newFile.path, "", false);
          }
          return;
        }
        const folderPath = locationInput.replace(/^\/+|\/+$/g, "");
        let folder = app.vault.getAbstractFileByPath(folderPath);
        if (!folder || !("children" in folder)) {
          await app.vault.createFolder(folderPath);
          folder = app.vault.getAbstractFileByPath(folderPath);
        }
        if (folder && "children" in folder) {
          const newFile = await app.vault.create(`${folderPath}/Untitled.md`, "");
          if (settings.customizeNewButton) {
            await app.workspace.openLinkText(newFile.path, "", false);
          }
        }
      })().catch((error) => {
        console.error("[CMS] Error creating new note:", error);
      });
    }
  };
  document.addEventListener("click", interceptNewButton, true);
  const observer = new MutationObserver(() => {
    const buttons2 = document.querySelectorAll('.bases-toolbar-new-item-menu, .bases-toolbar-new-item-menu .text-icon-button, [data-action="new-item"]');
    buttons2.forEach((buttonEl) => {
      const buttonWithFlag = buttonEl;
      if (!buttonWithFlag.__cmsIntercepted) {
        buttonWithFlag.__cmsIntercepted = true;
        buttonEl.addEventListener("click", interceptNewButton, true);
      }
    });
  });
  observer.observe(document.body, { childList: true, subtree: true });
  const buttons = document.querySelectorAll('.bases-toolbar-new-item-menu, .bases-toolbar-new-item-menu .text-icon-button, [data-action="new-item"]');
  buttons.forEach((buttonEl) => {
    const buttonWithFlag = buttonEl;
    if (!buttonWithFlag.__cmsIntercepted) {
      buttonWithFlag.__cmsIntercepted = true;
      buttonEl.addEventListener("click", interceptNewButton, true);
    }
  });
  registerCleanup(() => {
    document.removeEventListener("click", interceptNewButton, true);
    observer.disconnect();
  });
}

// src/utils/property-toggle-handler.ts
var import_obsidian22 = require("obsidian");
init_settings_schema();
init_frontmatter_helper();
var PropertyToggleHandler = class {
  constructor(app, config, pluginSettings, onRefresh) {
    this.app = app;
    this.config = config;
    this.pluginSettings = pluginSettings;
    this.onRefresh = onRefresh;
  }
  async handlePropertyToggle(path, property, value) {
    try {
      const file = this.app.vault.getAbstractFileByPath(path);
      if (!(file instanceof import_obsidian22.TFile)) return;
      const cleanProperty = property.startsWith("note.") ? property.substring(5) : property;
      const settings = readCMSSettings(
        this.config,
        this.pluginSettings
      );
      const isDraftProperty = settings.showDraftStatus && cleanProperty === "draft";
      let shouldRefresh = false;
      if (isDraftProperty) {
        if (settings.draftStatusUseFilenamePrefix) {
          const fileName = file.basename;
          const startsWithUnderscore = fileName.startsWith("_");
          const currentPath = file.path;
          const pathParts = currentPath.split("/");
          if (value === true) {
            if (!startsWithUnderscore) {
              const newName = `_${fileName}${file.extension ? `.${file.extension}` : ""}`;
              pathParts[pathParts.length - 1] = newName;
              const newPath = pathParts.join("/");
              await this.app.fileManager.renameFile(file, newPath);
              shouldRefresh = true;
            }
          } else {
            if (startsWithUnderscore) {
              const newName = fileName.substring(1) + (file.extension ? `.${file.extension}` : "");
              pathParts[pathParts.length - 1] = newName;
              const newPath = pathParts.join("/");
              await this.app.fileManager.renameFile(file, newPath);
              shouldRefresh = true;
            }
          }
        } else {
          const cleanConfigProperty = settings.draftStatusProperty && settings.draftStatusProperty.trim() ? settings.draftStatusProperty.startsWith("note.") ? settings.draftStatusProperty.substring(5) : settings.draftStatusProperty : "draft";
          await processFileFrontMatter(this.app, file, (frontmatter) => {
            frontmatter[cleanConfigProperty] = value;
          });
          shouldRefresh = true;
        }
      } else {
        await processFileFrontMatter(this.app, file, (frontmatter) => {
          frontmatter[cleanProperty] = value;
        });
        shouldRefresh = true;
      }
      if (shouldRefresh) {
        requestAnimationFrame(() => {
          window.setTimeout(() => {
            try {
              this.onRefresh();
            } catch (error) {
              console.error("Error refreshing view after property toggle:", error);
            }
          }, 100);
        });
      }
    } catch (error) {
      console.error("Error toggling property:", error);
    }
  }
};

// src/utils/scroll-layout-manager.ts
init_settings_schema();
var ScrollLayoutManager = class {
  constructor(containerEl, app, config, pluginSettings, onLoadMore, registerCleanup) {
    this.containerEl = containerEl;
    this.app = app;
    this.pluginSettings = pluginSettings;
    this.onLoadMore = onLoadMore;
    this.registerCleanup = registerCleanup;
    this.scrollListener = null;
    this.scrollThrottleTimeout = null;
    this.resizeObserver = null;
    this.windowResizeHandler = null;
    this.isLoading = false;
    this.displayedCount = 50;
    this.totalEntries = 0;
    this.configPollInterval = null;
    this.lastCardSize = null;
    this.lastImageAspectRatio = null;
    var _a;
    this.config = config;
    const isMobile = (_a = this.app.isMobile) != null ? _a : false;
    this.displayedCount = isMobile ? 25 : 50;
  }
  /**
   * Update the config reference (useful when config becomes available after construction)
   */
  updateConfig(config) {
    this.config = config;
  }
  setDisplayedCount(count) {
    this.displayedCount = count;
  }
  /**
   * Reset displayed count and scroll position
   */
  resetScroll() {
    var _a;
    const isMobile = (_a = this.app.isMobile) != null ? _a : false;
    this.displayedCount = isMobile ? 25 : 50;
    this.containerEl.scrollTop = 0;
  }
  getDisplayedCount() {
    return this.displayedCount;
  }
  setIsLoading(loading) {
    this.isLoading = loading;
  }
  setupInfiniteScroll(totalEntries) {
    this.totalEntries = totalEntries;
    if (this.scrollListener) {
      this.containerEl.removeEventListener("scroll", this.scrollListener);
      this.scrollListener = null;
    }
    if (this.displayedCount >= totalEntries) {
      return;
    }
    this.scrollListener = () => {
      var _a;
      if (this.scrollThrottleTimeout !== null) {
        return;
      }
      if (this.isLoading) {
        return;
      }
      const scrollTop = this.containerEl.scrollTop;
      const scrollHeight = this.containerEl.scrollHeight;
      const clientHeight = this.containerEl.clientHeight;
      const distanceFromBottom = scrollHeight - (scrollTop + clientHeight);
      const isMobile = (_a = this.app.isMobile) != null ? _a : false;
      const viewportMultiplier = isMobile ? 1 : 2;
      const threshold = clientHeight * viewportMultiplier;
      if (distanceFromBottom < threshold && this.displayedCount < totalEntries) {
        this.isLoading = true;
        const batchSize = 50;
        this.displayedCount = Math.min(this.displayedCount + batchSize, totalEntries);
        this.onLoadMore();
      }
      this.scrollThrottleTimeout = window.setTimeout(() => {
        this.scrollThrottleTimeout = null;
      }, 100);
    };
    this.containerEl.addEventListener("scroll", this.scrollListener);
    this.registerCleanup(() => {
      if (this.scrollListener) {
        this.containerEl.removeEventListener("scroll", this.scrollListener);
      }
      if (this.scrollThrottleTimeout !== null) {
        window.clearTimeout(this.scrollThrottleTimeout);
      }
    });
  }
  setupResizeObserver() {
    if (this.resizeObserver) {
      return;
    }
    const updateGrid = () => {
      if (!this.config || typeof this.config.get !== "function") {
        return;
      }
      const currentSettings = readCMSSettings(
        this.config,
        this.pluginSettings
      );
      const cardMinWidth = currentSettings.cardSize;
      const imageAspectRatio = currentSettings.imageAspectRatio;
      this.containerEl.style.setProperty("--card-min-width", `${cardMinWidth}px`);
      this.containerEl.style.setProperty("--bases-cms-image-aspect-ratio", String(imageAspectRatio));
      this.lastCardSize = cardMinWidth;
      this.lastImageAspectRatio = imageAspectRatio;
    };
    this.resizeObserver = new ResizeObserver(updateGrid);
    this.resizeObserver.observe(this.containerEl);
    updateGrid();
    this.configPollInterval = window.setInterval(() => {
      if (!this.config || typeof this.config.get !== "function") {
        return;
      }
      const currentSettings = readCMSSettings(
        this.config,
        this.pluginSettings
      );
      const currentCardSize = currentSettings.cardSize;
      const currentImageAspectRatio = currentSettings.imageAspectRatio;
      if (this.lastCardSize !== currentCardSize || this.lastImageAspectRatio !== currentImageAspectRatio) {
        this.containerEl.style.setProperty("--card-min-width", `${currentCardSize}px`);
        this.containerEl.style.setProperty("--bases-cms-image-aspect-ratio", String(currentImageAspectRatio));
        this.lastCardSize = currentCardSize;
        this.lastImageAspectRatio = currentImageAspectRatio;
      }
    }, 100);
    this.registerCleanup(() => {
      if (this.configPollInterval !== null) {
        window.clearInterval(this.configPollInterval);
        this.configPollInterval = null;
      }
    });
  }
  updateGridLayout(settings) {
    this.containerEl.style.setProperty("--card-min-width", `${settings.cardSize}px`);
    this.containerEl.style.setProperty("--bases-cms-image-aspect-ratio", String(settings.imageAspectRatio));
    this.lastCardSize = settings.cardSize;
    this.lastImageAspectRatio = settings.imageAspectRatio;
  }
  cleanup() {
    if (this.resizeObserver) {
      this.resizeObserver.disconnect();
      this.resizeObserver = null;
    }
    if (this.windowResizeHandler) {
      window.removeEventListener("resize", this.windowResizeHandler);
      this.windowResizeHandler = null;
    }
    if (this.scrollListener) {
      this.containerEl.removeEventListener("scroll", this.scrollListener);
      this.scrollListener = null;
    }
    if (this.scrollThrottleTimeout !== null) {
      window.clearTimeout(this.scrollThrottleTimeout);
      this.scrollThrottleTimeout = null;
    }
    if (this.configPollInterval !== null) {
      window.clearInterval(this.configPollInterval);
      this.configPollInterval = null;
    }
  }
};

// src/utils/view-switch-listener.ts
var ViewSwitchListener = class {
  constructor(containerEl, plugin, config, controller, data, selectedFiles, onSelectionCleared, registerCleanup) {
    this.containerEl = containerEl;
    this.plugin = plugin;
    this.config = config;
    this.controller = controller;
    this.data = data;
    this.selectedFiles = selectedFiles;
    this.onSelectionCleared = onSelectionCleared;
    this.registerCleanup = registerCleanup;
    this.mutationObserver = null;
    this.backupInterval = null;
    this.currentBaseIdentifier = null;
  }
  setup(handleSelectionChange) {
    const startObserving = () => {
      if (this.mutationObserver) return;
      this.mutationObserver = new MutationObserver((mutations) => {
        if (this.selectedFiles.size === 0) {
          return;
        }
        for (const mutation of mutations) {
          if (mutation.type === "childList" && mutation.removedNodes.length > 0) {
            let foundSelectedCard = false;
            for (const path of this.selectedFiles) {
              const card = this.containerEl.querySelector(`[data-path="${path}"]`);
              if (card) {
                foundSelectedCard = true;
                break;
              }
            }
            const allCards = this.containerEl.querySelectorAll(".card[data-path]");
            if (!foundSelectedCard || allCards.length === 0) {
              this.selectedFiles.clear();
              this.onSelectionCleared();
              break;
            }
          }
        }
      });
      if (this.containerEl) {
        this.mutationObserver.observe(this.containerEl, {
          childList: true,
          subtree: true
        });
      }
    };
    const stopObserving = () => {
      if (this.mutationObserver) {
        this.mutationObserver.disconnect();
        this.mutationObserver = null;
        if (this.selectedFiles.size > 0) {
          this.selectedFiles.clear();
        }
        this.onSelectionCleared();
      }
    };
    const getBaseIdentifier = () => {
      var _a, _b, _c, _d;
      try {
        if ((_a = this.config) == null ? void 0 : _a.getName) {
          return this.config.getName();
        }
        if ((_b = this.config) == null ? void 0 : _b.name) {
          return String(this.config.name);
        }
        if (this.controller) {
          if ((_c = this.controller) == null ? void 0 : _c.getBaseName) {
            return this.controller.getBaseName();
          }
          if ((_d = this.controller) == null ? void 0 : _d.baseName) {
            return String(this.controller.baseName);
          }
        }
        if (this.data) {
          if (this.data.baseName) {
            return String(this.data.baseName);
          }
        }
      } catch (e) {
      }
      return null;
    };
    const backupCheck = () => {
      if (this.selectedFiles.size === 0) {
        if (this.backupInterval !== null) {
          window.clearInterval(this.backupInterval);
          this.backupInterval = null;
        }
        return;
      }
      const currentBaseId = getBaseIdentifier();
      if (this.currentBaseIdentifier !== null && currentBaseId !== null && this.currentBaseIdentifier !== currentBaseId) {
        this.selectedFiles.clear();
        this.onSelectionCleared();
        stopObserving();
        if (this.backupInterval !== null) {
          window.clearInterval(this.backupInterval);
          this.backupInterval = null;
        }
        return;
      }
      const allCards = this.containerEl.querySelectorAll(".card[data-path]");
      if (allCards.length === 0) {
        this.selectedFiles.clear();
        this.onSelectionCleared();
      }
    };
    const originalHandleSelectionChange = handleSelectionChange.bind(this);
    const wrappedHandleSelectionChange = (path, selected) => {
      originalHandleSelectionChange(path, selected);
      if (this.selectedFiles.size > 0) {
        if (this.currentBaseIdentifier === null) {
          this.currentBaseIdentifier = getBaseIdentifier();
        }
        startObserving();
        if (this.backupInterval === null) {
          this.backupInterval = this.plugin.registerInterval(window.setInterval(backupCheck, 500));
        }
      } else {
        this.currentBaseIdentifier = null;
        stopObserving();
        if (this.backupInterval !== null) {
          window.clearInterval(this.backupInterval);
          this.backupInterval = null;
        }
      }
    };
    this.registerCleanup(() => {
      stopObserving();
      if (this.backupInterval !== null) {
        window.clearInterval(this.backupInterval);
        this.backupInterval = null;
      }
    });
    return wrappedHandleSelectionChange;
  }
  cleanup() {
    if (this.mutationObserver) {
      this.mutationObserver.disconnect();
      this.mutationObserver = null;
    }
    if (this.backupInterval !== null) {
      window.clearInterval(this.backupInterval);
      this.backupInterval = null;
    }
  }
};

// src/views/cms-view.ts
init_frontmatter_helper();

// src/utils/embedded-view-detector.ts
function isEmbeddedView(containerEl) {
  if (!containerEl) {
    return false;
  }
  const embedParent = containerEl.closest(".markdown-embed, .internal-embed, .markdown-embed-content");
  return embedParent !== null;
}

// src/views/cms-view.ts
var CMS_VIEW_TYPE = "bases-cms";
var BasesCMSView = class extends import_obsidian23.BasesView {
  constructor(controller, containerEl, plugin) {
    super(controller);
    this.type = CMS_VIEW_TYPE;
    this.selectedFiles = /* @__PURE__ */ new Set();
    this.snippets = {};
    this.images = {};
    this.hasImageAvailable = {};
    this.mdxFrontmatterCache = {};
    this.updateLayoutRef = { current: null };
    this.propertyObservers = [];
    this.bulkToolbar = null;
    this.isRefreshingWithSelection = false;
    this.propertyToggleHandler = null;
    this.viewSwitchListener = null;
    this.settingsPollInterval = null;
    this.lastSettings = null;
    this.lastUpdateId = 0;
    this.lastBaseId = null;
    this.hasAutoSwitched = false;
    this.basesController = controller;
    this.containerEl = containerEl;
    this.plugin = plugin;
    this.isEmbedded = isEmbeddedView(containerEl);
    this.cardRenderer = new SharedCardRenderer(
      this.app,
      this.plugin,
      this.propertyObservers,
      this.updateLayoutRef,
      void 0,
      // Config not available in constructor
      controller
    );
    this.containerEl.addClass("bases-cms");
    this.containerEl.addClass("bases-cms-container");
    try {
      this.propertyToggleHandler = new PropertyToggleHandler(
        this.app,
        this.config,
        this.plugin.settings,
        () => this.onDataUpdated()
      );
    } catch (e) {
      this.propertyToggleHandler = null;
    }
    try {
      const configToUse = this.config && typeof this.config.get === "function" ? this.config : { get: () => void 0 };
      this.scrollLayoutManager = new ScrollLayoutManager(
        this.containerEl,
        this.app,
        configToUse,
        this.plugin.settings,
        () => this.onDataUpdated(),
        (cleanup) => this.register(cleanup)
      );
    } catch (e) {
      const dummyConfig = { get: () => void 0 };
      this.scrollLayoutManager = new ScrollLayoutManager(
        this.containerEl,
        this.app,
        dummyConfig,
        this.plugin.settings,
        () => this.onDataUpdated(),
        (cleanup) => this.register(cleanup)
      );
    }
    try {
      this.viewSwitchListener = new ViewSwitchListener(
        this.containerEl,
        this.plugin,
        this.config,
        this.controller,
        this.data,
        this.selectedFiles,
        () => this.updateSelectionUI(),
        (cleanup) => this.register(cleanup)
      );
    } catch (e) {
      this.viewSwitchListener = null;
    }
    if (this.viewSwitchListener) {
      const originalHandleSelectionChange = this.handleSelectionChange.bind(this);
      this.handleSelectionChange = this.viewSwitchListener.setup(originalHandleSelectionChange);
    }
  }
  /**
   * Sort entries by property using consistent logic for both MD and MDX files
   */
  async sortEntriesByProperty(entries, propertyName, direction) {
    if (!propertyName || propertyName === "") {
      return entries;
    }
    if (propertyName === "file.ctime" || propertyName === "file.mtime") {
      const isCtime = propertyName === "file.ctime";
      return [...entries].sort((a, b) => {
        const aTime = isCtime ? a.file.stat.ctime : a.file.stat.mtime;
        const bTime = isCtime ? b.file.stat.ctime : b.file.stat.mtime;
        const comparison = aTime - bTime;
        return direction === "desc" ? -comparison : comparison;
      });
    }
    const entriesWithValues = await Promise.all(
      entries.map(async (entry) => {
        const value = await getFirstBasesPropertyValue(entry, propertyName, this.app);
        return { entry, value };
      })
    );
    return entriesWithValues.sort((a, b) => {
      const aVal = a.value;
      const bVal = b.value;
      if (aVal == null && bVal == null) return 0;
      if (aVal == null) return 1;
      if (bVal == null) return -1;
      const aDate = this.parseDateValue(aVal);
      const bDate = this.parseDateValue(bVal);
      if (aDate && bDate) {
        const comparison2 = aDate.getTime() - bDate.getTime();
        return direction === "desc" ? -comparison2 : comparison2;
      }
      if (aDate && !bDate) {
        return direction === "desc" ? -1 : 1;
      }
      if (!aDate && bDate) {
        return direction === "desc" ? 1 : -1;
      }
      const aStr = this.valueToString(aVal);
      const bStr = this.valueToString(bVal);
      const comparison = aStr.localeCompare(bStr);
      return direction === "desc" ? -comparison : comparison;
    }).map((item) => item.entry);
  }
  /**
   * Parse a date value using the same logic as the shared renderer
   */
  parseDateValue(value) {
    if (!value) return null;
    if (typeof value === "object" && "date" in value && value.date instanceof Date) {
      return value.date;
    }
    let data = value;
    if (typeof value === "object" && "data" in value) {
      data = value.data;
    }
    if (!data) return null;
    if (data instanceof Date) {
      return data;
    }
    if (data && typeof data === "object" && "getTime" in data) {
      const dateLike = data;
      try {
        const timestamp = dateLike.getTime();
        if (typeof timestamp === "number" && !isNaN(timestamp)) {
          return new Date(timestamp);
        }
      } catch (e) {
      }
    }
    if (typeof data === "string") {
      const dateStr = data.trim();
      const isoDateStr = dateStr.includes("T") ? dateStr : `${dateStr}T00:00:00`;
      const parsedDate = new Date(isoDateStr);
      if (!isNaN(parsedDate.getTime())) {
        return parsedDate;
      } else {
        const fallbackDate = new Date(dateStr);
        if (!isNaN(fallbackDate.getTime())) {
          return fallbackDate;
        }
      }
    }
    if (typeof data === "number") {
      const parsedDate = new Date(data);
      if (!isNaN(parsedDate.getTime())) {
        return parsedDate;
      }
    }
    return null;
  }
  /**
   * Convert a value to string for comparison
   */
  valueToString(value) {
    if (!value) return "";
    let data = value;
    if (typeof value === "object" && "data" in value) {
      data = value.data;
    }
    if (typeof data === "string") {
      return data;
    } else if (typeof data === "number" || typeof data === "boolean") {
      return String(data);
    } else {
      return "";
    }
  }
  /**
   * Continue processing data after sorting is complete
   */
  async continueDataProcessing(processedGroups, settings, totalEntriesCount, savedScrollTop, updateId) {
    var _a;
    const isStillValid = () => updateId === this.lastUpdateId;
    const visibleEntries = [];
    let remainingCount = this.scrollLayoutManager.getDisplayedCount();
    for (const processedGroup of processedGroups) {
      if (remainingCount <= 0) break;
      const entriesToTake = Math.min(processedGroup.entries.length, remainingCount);
      visibleEntries.push(...processedGroup.entries.slice(0, entriesToTake));
      remainingCount -= entriesToTake;
    }
    await this.loadContentForEntries(visibleEntries, settings);
    if (!isStillValid()) return;
    if (this.config && !this.containerEl.__cmsInterceptorSetup) {
      try {
        this.containerEl.__cmsInterceptorSetup = true;
        const containerWithConfig = this.containerEl;
        containerWithConfig.__cmsConfig = this.config;
        containerWithConfig.__cmsView = this;
        setupNewNoteInterceptor(
          this.app,
          this.containerEl,
          this.config,
          this.plugin.settings,
          (cleanup) => this.register(cleanup)
        );
      } catch (e) {
        this.containerEl.__cmsInterceptorSetup = true;
      }
    }
    if (!isStillValid()) return;
    this.cardRenderer.basesConfig = this.config;
    if (this.cardRenderer && typeof this.cardRenderer.setMdxFrontmatterCache === "function") {
      this.cardRenderer.setMdxFrontmatterCache(this.mdxFrontmatterCache);
    }
    this.containerEl.empty();
    this.mdxFrontmatterCache = {};
    this.propertyObservers.forEach((obs) => obs.disconnect());
    this.propertyObservers = [];
    const feedEl = this.containerEl.createDiv("bases-cms-grid");
    let displayedSoFar = 0;
    let totalCardsRendered = 0;
    for (const processedGroup of processedGroups) {
      if (displayedSoFar >= this.scrollLayoutManager.getDisplayedCount()) break;
      const entriesToDisplay = Math.min(processedGroup.entries.length, this.scrollLayoutManager.getDisplayedCount() - displayedSoFar);
      if (entriesToDisplay === 0) continue;
      const groupEntries = processedGroup.entries.slice(0, entriesToDisplay);
      const groupEl = feedEl.createDiv("bases-cms-group");
      if (processedGroup.group.hasKey()) {
        const headerEl = groupEl.createDiv("bases-cms-group-heading");
        const valueEl = headerEl.createDiv("bases-cms-group-value");
        const keyValue = ((_a = processedGroup.group.key) == null ? void 0 : _a.toString()) || "";
        valueEl.setText(keyValue);
      }
      const cards = await transformBasesEntries(
        groupEntries,
        settings,
        "",
        // sortMethod not used in transformBasesEntries
        false,
        this.snippets,
        this.images,
        this.hasImageAvailable,
        this.app,
        this.mdxFrontmatterCache
      );
      if (!isStillValid()) return;
      for (let i = 0; i < cards.length; i++) {
        const card = cards[i];
        const entry = groupEntries[i];
        try {
          this.renderCard(groupEl, card, entry, displayedSoFar + i, settings);
          totalCardsRendered++;
        } catch (e) {
        }
      }
      displayedSoFar += entriesToDisplay;
    }
    if (!isStillValid()) return;
    if (totalCardsRendered === 0 && totalEntriesCount > 0) {
      throw new Error("No cards were rendered despite having entries. Check card rendering logic.");
    }
    if (savedScrollTop > 0) {
      this.containerEl.scrollTop = savedScrollTop;
    }
    this.scrollLayoutManager.setupInfiniteScroll(totalEntriesCount);
    this.scrollLayoutManager.setupResizeObserver();
    this.setupSettingsPolling(settings);
    this.updateSelectionUI();
    this.scrollLayoutManager.setIsLoading(false);
  }
  onDataUpdated() {
    const updateId = ++this.lastUpdateId;
    void (async () => {
      try {
        const isStillValid = () => updateId === this.lastUpdateId;
        if (!this.data) {
          if (this.containerEl.children.length === 0) {
            const loadingEl = this.containerEl.createDiv("bases-cms-loading");
            loadingEl.setText("Loading...");
            setCssProps(loadingEl, {
              padding: "20px",
              textAlign: "center"
            });
          }
          setTimeout(() => {
            if (isStillValid() && this.data) {
              this.onDataUpdated();
            }
          }, 100);
          return;
        }
        const data = this.data;
        const topLevelDefaultView = data == null ? void 0 : data.defaultView;
        const config = this.config;
        const currentViewName = typeof config.getName === "function" ? config.getName() : config.name;
        if (topLevelDefaultView && currentViewName !== topLevelDefaultView) {
          if (!this.hasAutoSwitched) {
            this.hasAutoSwitched = true;
            const controller = this.basesController;
            console.debug("Bases CMS: Default view sync triggered", {
              target: topLevelDefaultView,
              current: currentViewName
            });
            if (typeof controller.selectView === "function") {
              controller.selectView(topLevelDefaultView);
              return;
            } else if (typeof controller.setView === "function") {
              controller.setView(topLevelDefaultView);
              return;
            } else if (typeof controller.switchView === "function") {
              controller.switchView(topLevelDefaultView);
              return;
            }
          }
        }
        const currentBaseId = this.getBaseIdentifier();
        if (this.lastBaseId !== currentBaseId) {
          this.lastBaseId = currentBaseId;
          this.scrollLayoutManager.resetScroll();
          this.snippets = {};
          this.images = {};
          this.hasImageAvailable = {};
          this.mdxFrontmatterCache = {};
        }
        if (!this.data.groupedData || !this.data.data) {
          setTimeout(() => {
            if (isStillValid() && this.data && this.data.groupedData && this.data.data) {
              this.onDataUpdated();
            }
          }, 100);
          return;
        }
        if (!isStillValid()) return;
        const groupedData = this.data.groupedData;
        const allEntries = this.data.data;
        const settings = readCMSSettings(
          this.config,
          this.plugin.settings
        );
        if (!isStillValid()) return;
        if (this.config && typeof this.config.get === "function") {
          try {
            this.scrollLayoutManager.updateConfig(this.config);
          } catch (e) {
          }
        }
        this.scrollLayoutManager.updateGridLayout(settings);
        const savedScrollTop = this.containerEl.scrollTop;
        const sortConfigs = this.config.getSort();
        let processedGroups = groupedData.map((group) => ({
          group,
          entries: [...group.entries]
        }));
        if (sortConfigs && sortConfigs.length > 0) {
          const firstSort = sortConfigs[0];
          const property = firstSort.property;
          const direction = firstSort.direction.toLowerCase();
          if (property && !property.includes("ctime") && !property.includes("mtime")) {
            void (async () => {
              try {
                const allEntries2 = [];
                for (const processedGroup of processedGroups) {
                  allEntries2.push(...processedGroup.entries);
                }
                const sortedEntries = await this.sortEntriesByProperty(allEntries2, property, direction);
                const sortedProcessedGroups = [{
                  group: {
                    hasKey: () => false,
                    key: null,
                    entries: sortedEntries
                  },
                  entries: sortedEntries
                }];
                await this.continueDataProcessing(sortedProcessedGroups, settings, allEntries2.length, savedScrollTop, updateId);
              } catch (error) {
                console.error("Bases CMS: Error during custom sorting:", error);
                await this.continueDataProcessing(processedGroups, settings, allEntries.length, savedScrollTop, updateId);
              }
            })();
            return;
          }
        }
        this.continueDataProcessing(processedGroups, settings, allEntries.length, savedScrollTop, updateId);
      } catch (error) {
        try {
          this.scrollLayoutManager.setIsLoading(false);
        } catch (e) {
        }
        if (this.containerEl && this.containerEl.isConnected) {
          this.containerEl.empty();
          const errorEl = this.containerEl.createDiv("bases-cms-error");
          errorEl.setText("Error loading view. Check console for details.");
          setCssProps(errorEl, {
            padding: "20px",
            textAlign: "center",
            color: "var(--text-error)",
            margin: "20px"
          });
        }
        console.error("Bases CMS: Error in onDataUpdated:", error);
      }
    })();
  }
  /**
   * Get a unique identifier for the current base configuration
   */
  getBaseIdentifier() {
    try {
      if (this.config && typeof this.config.getName === "function") {
        return this.config.getName();
      }
      if (this.config && this.config.name) {
        return String(this.config.name);
      }
      if (this.data && this.data.baseName) {
        return String(this.data.baseName);
      }
    } catch (e) {
    }
    return null;
  }
  /**
   * Setup polling to detect settings changes and refresh view
   */
  setupSettingsPolling(initialSettings) {
    if (this.settingsPollInterval !== null) {
      return;
    }
    this.lastSettings = {
      descriptionProperty: initialSettings.descriptionProperty,
      showTextPreview: initialSettings.showTextPreview,
      fallbackToContent: initialSettings.fallbackToContent,
      truncatePreviewProperty: initialSettings.truncatePreviewProperty,
      imageProperty: initialSettings.imageProperty,
      imageFormat: initialSettings.imageFormat,
      fallbackToEmbeds: initialSettings.fallbackToEmbeds,
      propertyDisplay1: initialSettings.propertyDisplay1,
      propertyDisplay2: initialSettings.propertyDisplay2,
      propertyDisplay3: initialSettings.propertyDisplay3,
      propertyDisplay4: initialSettings.propertyDisplay4,
      propertyDisplay5: initialSettings.propertyDisplay5,
      propertyDisplay6: initialSettings.propertyDisplay6,
      propertyDisplay7: initialSettings.propertyDisplay7,
      propertyDisplay8: initialSettings.propertyDisplay8,
      propertyDisplay9: initialSettings.propertyDisplay9,
      propertyDisplay10: initialSettings.propertyDisplay10,
      propertyDisplay11: initialSettings.propertyDisplay11,
      propertyDisplay12: initialSettings.propertyDisplay12,
      propertyDisplay13: initialSettings.propertyDisplay13,
      propertyDisplay14: initialSettings.propertyDisplay14
    };
    this.settingsPollInterval = window.setInterval(() => {
      if (!this.config || typeof this.config.get !== "function") {
        return;
      }
      const currentSettings = readCMSSettings(
        this.config,
        this.plugin.settings
      );
      if (!this.lastSettings) {
        return;
      }
      const settingsChanged = this.lastSettings.descriptionProperty !== currentSettings.descriptionProperty || this.lastSettings.showTextPreview !== currentSettings.showTextPreview || this.lastSettings.fallbackToContent !== currentSettings.fallbackToContent || this.lastSettings.truncatePreviewProperty !== currentSettings.truncatePreviewProperty || this.lastSettings.imageProperty !== currentSettings.imageProperty || this.lastSettings.imageFormat !== currentSettings.imageFormat || this.lastSettings.fallbackToEmbeds !== currentSettings.fallbackToEmbeds || this.lastSettings.propertyDisplay1 !== currentSettings.propertyDisplay1 || this.lastSettings.propertyDisplay2 !== currentSettings.propertyDisplay2 || this.lastSettings.propertyDisplay3 !== currentSettings.propertyDisplay3 || this.lastSettings.propertyDisplay4 !== currentSettings.propertyDisplay4 || this.lastSettings.propertyDisplay5 !== currentSettings.propertyDisplay5 || this.lastSettings.propertyDisplay6 !== currentSettings.propertyDisplay6 || this.lastSettings.propertyDisplay7 !== currentSettings.propertyDisplay7 || this.lastSettings.propertyDisplay8 !== currentSettings.propertyDisplay8 || this.lastSettings.propertyDisplay9 !== currentSettings.propertyDisplay9 || this.lastSettings.propertyDisplay10 !== currentSettings.propertyDisplay10 || this.lastSettings.propertyDisplay11 !== currentSettings.propertyDisplay11 || this.lastSettings.propertyDisplay12 !== currentSettings.propertyDisplay12 || this.lastSettings.propertyDisplay13 !== currentSettings.propertyDisplay13 || this.lastSettings.propertyDisplay14 !== currentSettings.propertyDisplay14;
      if (settingsChanged) {
        if (this.lastSettings.descriptionProperty !== currentSettings.descriptionProperty || this.lastSettings.showTextPreview !== currentSettings.showTextPreview || this.lastSettings.fallbackToContent !== currentSettings.fallbackToContent || this.lastSettings.truncatePreviewProperty !== currentSettings.truncatePreviewProperty) {
          this.snippets = {};
        }
        if (this.lastSettings.imageProperty !== currentSettings.imageProperty || this.lastSettings.imageFormat !== currentSettings.imageFormat || this.lastSettings.fallbackToEmbeds !== currentSettings.fallbackToEmbeds) {
          this.images = {};
          this.hasImageAvailable = {};
        }
        this.lastSettings = {
          descriptionProperty: currentSettings.descriptionProperty,
          showTextPreview: currentSettings.showTextPreview,
          fallbackToContent: currentSettings.fallbackToContent,
          truncatePreviewProperty: currentSettings.truncatePreviewProperty,
          imageProperty: currentSettings.imageProperty,
          imageFormat: currentSettings.imageFormat,
          fallbackToEmbeds: currentSettings.fallbackToEmbeds,
          propertyDisplay1: currentSettings.propertyDisplay1,
          propertyDisplay2: currentSettings.propertyDisplay2,
          propertyDisplay3: currentSettings.propertyDisplay3,
          propertyDisplay4: currentSettings.propertyDisplay4,
          propertyDisplay5: currentSettings.propertyDisplay5,
          propertyDisplay6: currentSettings.propertyDisplay6,
          propertyDisplay7: currentSettings.propertyDisplay7,
          propertyDisplay8: currentSettings.propertyDisplay8,
          propertyDisplay9: currentSettings.propertyDisplay9,
          propertyDisplay10: currentSettings.propertyDisplay10,
          propertyDisplay11: currentSettings.propertyDisplay11,
          propertyDisplay12: currentSettings.propertyDisplay12,
          propertyDisplay13: currentSettings.propertyDisplay13,
          propertyDisplay14: currentSettings.propertyDisplay14
        };
        this.onDataUpdated();
      }
    }, 100);
    this.register(() => {
      if (this.settingsPollInterval !== null) {
        window.clearInterval(this.settingsPollInterval);
        this.settingsPollInterval = null;
      }
    });
  }
  /**
   * Preload MDX frontmatter for all visible entries to prevent flashing
   * This ensures all MDX data is available synchronously during card transformation
   */
  async preloadMdxFrontmatter(entries) {
    const mdxEntries = entries.filter((entry) => {
      const file = this.app.vault.getAbstractFileByPath(entry.file.path);
      return file instanceof import_obsidian23.TFile && file.extension === "mdx" && !(entry.file.path in this.mdxFrontmatterCache);
    });
    if (mdxEntries.length === 0) {
      return;
    }
    await Promise.all(
      mdxEntries.map(async (entry) => {
        const file = this.app.vault.getAbstractFileByPath(entry.file.path);
        if (file instanceof import_obsidian23.TFile) {
          try {
            const frontmatter = await getFileFrontmatter(this.app, file);
            this.mdxFrontmatterCache[entry.file.path] = frontmatter;
          } catch (error) {
            console.error(`Bases CMS: Error preloading properties for ${entry.file.path}:`, error);
            this.mdxFrontmatterCache[entry.file.path] = null;
          }
        }
      })
    );
  }
  async loadContentForEntries(entries, settings) {
    if (settings.showTextPreview) {
      const snippetEntriesPromises = entries.filter((entry) => !(entry.file.path in this.snippets)).map(async (entry) => {
        const file = this.app.vault.getAbstractFileByPath(entry.file.path);
        if (!(file instanceof import_obsidian23.TFile)) return null;
        const descValue = await getFirstBasesPropertyValue(entry, settings.descriptionProperty, this.app);
        return {
          path: entry.file.path,
          file,
          descriptionData: descValue == null ? void 0 : descValue.data
        };
      });
      const snippetEntries = (await Promise.all(snippetEntriesPromises)).filter((e) => e !== null);
      if (snippetEntries.length > 0) {
        await loadSnippetsForEntries(
          snippetEntries,
          settings.fallbackToContent,
          false,
          this.app,
          this.snippets,
          settings.truncatePreviewProperty
        );
      }
    }
    if (settings.imageFormat !== "none") {
      const imageEntriesPromises = entries.filter((entry) => !(entry.file.path in this.images)).map(async (entry) => {
        const file = this.app.vault.getAbstractFileByPath(entry.file.path);
        if (!(file instanceof import_obsidian23.TFile)) return null;
        const imagePropertyValues = await getAllBasesImagePropertyValues(entry, settings.imageProperty, this.app);
        return {
          path: entry.file.path,
          file,
          imagePropertyValues
        };
      });
      const imageEntries = (await Promise.all(imageEntriesPromises)).filter((e) => e !== null);
      if (imageEntries.length > 0) {
        await loadImagesForEntries(
          imageEntries,
          settings.fallbackToEmbeds,
          this.app,
          this.images,
          this.hasImageAvailable
        );
      }
    }
  }
  /**
   * Direct delete handler for context menu - deletes a single file without selection
   */
  getDirectDeleteHandler(filePath) {
    return async () => {
      const { prepareDeletionPreview: prepareDeletionPreview2, executeSmartDeletion: executeSmartDeletion2 } = await Promise.resolve().then(() => (init_smart_deletion(), smart_deletion_exports));
      const { DeletionPreviewModal: DeletionPreviewModal2 } = await Promise.resolve().then(() => (init_deletion_preview(), deletion_preview_exports));
      if (this.plugin.settings.confirmDeletions) {
        const preview = await prepareDeletionPreview2(
          this.app,
          [filePath],
          this.plugin.settings
        );
        const modal = new DeletionPreviewModal2(
          this.app,
          preview,
          () => {
            this.onDataUpdated();
          }
        );
        modal.open();
      } else {
        const preview = await prepareDeletionPreview2(
          this.app,
          [filePath],
          this.plugin.settings
        );
        await executeSmartDeletion2(this.app, preview);
        this.onDataUpdated();
      }
    };
  }
  renderCard(container, card, entry, index, settings) {
    const isSelected = this.selectedFiles.has(card.path);
    return this.cardRenderer.renderCard(
      container,
      card,
      entry,
      settings,
      this,
      isSelected,
      (path, selected) => {
        this.handleSelectionChange(path, selected);
      },
      (path, property, value) => {
        void this.handlePropertyToggle(path, property, value);
      },
      { handleDelete: this.getDirectDeleteHandler(card.path) }
    );
  }
  /**
   * Update card image when it becomes available
   * Called asynchronously after images load
   */
  updateCardImage(path, imageUrl) {
    var _a;
    const cardEl = this.containerEl.querySelector(`.card[data-path="${path}"]`);
    if (!cardEl) return;
    const url = Array.isArray(imageUrl) ? imageUrl[0] : imageUrl;
    if (!url) return;
    let imageEmbedContainer = cardEl.querySelector(".image-embed");
    if (!imageEmbedContainer) {
      const placeholder = cardEl.querySelector(".card-cover-placeholder, .card-thumbnail-placeholder");
      const isThumbnail = cardEl.classList.contains("image-format-thumbnail");
      const isCover = cardEl.classList.contains("image-format-cover");
      if (placeholder) {
        const existingBadge = placeholder.querySelector(".card-status-badge");
        const imageClassName = placeholder.classList.contains("card-cover-placeholder") ? "card-cover" : "card-thumbnail";
        const imageEl = (_a = placeholder.parentElement) == null ? void 0 : _a.createDiv(imageClassName);
        if (imageEl) {
          imageEmbedContainer = imageEl.createDiv("image-embed");
          if (existingBadge) {
            imageEl.appendChild(existingBadge);
          }
          placeholder.remove();
        }
      } else if (isThumbnail) {
        const contentContainer = cardEl.querySelector(".card-content");
        if (contentContainer) {
          const textWrapper = contentContainer.querySelector(".card-text-wrapper");
          const imageEl = textWrapper ? contentContainer.insertBefore(contentContainer.createDiv("card-thumbnail"), textWrapper) : contentContainer.createDiv("card-thumbnail");
          imageEmbedContainer = imageEl.createDiv("image-embed");
        }
      } else if (isCover) {
        const contentContainer = cardEl.querySelector(".card-content");
        if (contentContainer) {
          const imageEl = contentContainer.createDiv("card-cover");
          imageEmbedContainer = imageEl.createDiv("image-embed");
        }
      }
    }
    if (imageEmbedContainer) {
      void (async () => {
        const finalUrl = await convertGifToStatic(url, this.plugin.settings.forceStaticGifImages);
        imageEmbedContainer.style.backgroundImage = `url("${finalUrl}")`;
      })();
      imageEmbedContainer.style.backgroundImage = `url("${url}")`;
      setCssProps(imageEmbedContainer, {
        backgroundSize: "cover",
        backgroundPosition: "center center",
        backgroundRepeat: "no-repeat"
      });
    }
  }
  getSortMethod() {
    const sortConfigs = this.config.getSort();
    if (sortConfigs && sortConfigs.length > 0) {
      const firstSort = sortConfigs[0];
      const property = firstSort.property;
      const direction = firstSort.direction.toLowerCase();
      if (property.includes("ctime")) {
        return `ctime-${direction}`;
      }
      if (property.includes("mtime")) {
        return `mtime-${direction}`;
      }
    }
    return "mtime-desc";
  }
  handleSelectionChange(path, selected) {
    if (selected) {
      this.selectedFiles.add(path);
    } else {
      this.selectedFiles.delete(path);
    }
    this.updateSelectionUI();
    if (this.selectedFiles.size === 0) {
      if (this.bulkToolbar) {
        this.bulkToolbar.hide();
        const toolbarEl = this.containerEl.querySelector(".bases-cms-bulk-toolbar");
        if (toolbarEl instanceof HTMLElement) {
          toolbarEl.removeClass("bases-cms-bulk-toolbar-visible");
          toolbarEl.addClass("bases-cms-bulk-toolbar-hidden");
        }
      }
    }
  }
  async handlePropertyToggle(path, property, value) {
    if (this.propertyToggleHandler) {
      await this.propertyToggleHandler.handlePropertyToggle(path, property, value);
    }
  }
  selectAll() {
    const cards = this.containerEl.querySelectorAll(".bases-cms-card");
    cards.forEach((cardEl) => {
      const path = cardEl.getAttribute("data-path");
      if (path) {
        this.selectedFiles.add(path);
      }
    });
    this.updateSelectionUI();
  }
  deselectAll() {
    this.selectedFiles.clear();
    this.updateSelectionUI();
  }
  /**
   * Refresh the toolbar when settings change
   * Called from settings tab when toolbar button visibility settings are updated
   */
  refreshToolbar() {
    if (this.bulkToolbar) {
      const currentCount = this.selectedFiles.size;
      this.bulkToolbar.recreate();
      if (currentCount > 0) {
        this.bulkToolbar.updateCount(currentCount);
      }
    }
  }
  updateSelectionUI() {
    const cards = this.containerEl.querySelectorAll(".card");
    cards.forEach((cardEl) => {
      const path = cardEl.getAttribute("data-path");
      const checkbox = cardEl.querySelector('input[type="checkbox"].selection-checkbox');
      if (path) {
        const isSelected = this.selectedFiles.has(path);
        if (isSelected) {
          cardEl.addClass("selected");
        } else {
          cardEl.removeClass("selected");
        }
        if (checkbox) {
          checkbox.checked = isSelected;
        }
      }
    });
    if (this.selectedFiles.size > 0) {
      const orphanedToolbars = document.querySelectorAll(".bases-cms-bulk-toolbar");
      orphanedToolbars.forEach((toolbar) => {
        const toolbarInstance = toolbar.__bulkToolbarInstance;
        if (!toolbarInstance || toolbarInstance !== this.bulkToolbar) {
          toolbar.remove();
        }
      });
      if (!this.bulkToolbar) {
        const settings = readCMSSettings(
          this.config,
          this.plugin.settings
        );
        this.bulkToolbar = new BulkToolbar(
          this.app,
          this.plugin,
          this.containerEl,
          () => Array.from(this.selectedFiles),
          () => {
            this.selectedFiles.clear();
            this.updateSelectionUI();
          },
          () => {
            const selectedPaths = Array.from(this.selectedFiles);
            this.isRefreshingWithSelection = true;
            if (this.bulkToolbar && selectedPaths.length > 0) {
              this.bulkToolbar.show();
            }
            this.onDataUpdated();
            window.setTimeout(() => {
              selectedPaths.forEach((path) => {
                if (this.app.vault.getAbstractFileByPath(path)) {
                  this.selectedFiles.add(path);
                }
              });
              this.isRefreshingWithSelection = false;
              this.updateSelectionUI();
              if (this.selectedFiles.size > 0 && this.bulkToolbar) {
                this.bulkToolbar.show();
                this.bulkToolbar.updateCount(this.selectedFiles.size);
              }
              window.setTimeout(() => {
                if (this.selectedFiles.size > 0 && this.bulkToolbar) {
                  this.bulkToolbar.show();
                  this.bulkToolbar.updateCount(this.selectedFiles.size);
                }
              }, 100);
            }, 250);
          },
          () => {
            this.selectAll();
          },
          settings
        );
      } else {
        const settings = readCMSSettings(
          this.config,
          this.plugin.settings
        );
        this.bulkToolbar.updateSettings(settings);
      }
      this.bulkToolbar.updateCount(this.selectedFiles.size);
      this.bulkToolbar.show();
    } else {
      if (this.bulkToolbar && !this.isRefreshingWithSelection) {
        this.bulkToolbar.hide();
        const toolbarEl = this.containerEl.querySelector(".bases-cms-bulk-toolbar");
        if (toolbarEl instanceof HTMLElement) {
          toolbarEl.removeClass("bases-cms-bulk-toolbar-visible");
          toolbarEl.addClass("bases-cms-bulk-toolbar-hidden");
        }
      }
    }
  }
  onClose() {
    this.scrollLayoutManager.cleanup();
    if (this.viewSwitchListener) {
      this.viewSwitchListener.cleanup();
    }
    if (this.settingsPollInterval !== null) {
      window.clearInterval(this.settingsPollInterval);
      this.settingsPollInterval = null;
    }
    this.propertyObservers.forEach((obs) => obs.disconnect());
    this.propertyObservers = [];
    if (this.bulkToolbar) {
      this.bulkToolbar.destroy();
    }
    this.selectedFiles.clear();
    const orphanedToolbars = document.querySelectorAll(".bases-cms-bulk-toolbar");
    orphanedToolbars.forEach((toolbar) => toolbar.remove());
    const pluginWithMethod = this.plugin;
    if (pluginWithMethod && typeof pluginWithMethod.removeView === "function") {
      pluginWithMethod.removeView(this);
    }
  }
  /**
   * Override new note creation to use custom location if configured
   */
  async onNew() {
    var _a;
    const settings = readCMSSettings(
      this.config,
      this.plugin.settings
    );
    if (settings.customizeNewButton) {
      try {
        const locationInput = ((_a = settings.newNoteLocation) == null ? void 0 : _a.trim()) || "";
        if (locationInput === "") {
          const vaultConfig = this.app.vault.config;
          const newFileLocation = (vaultConfig == null ? void 0 : vaultConfig.newFileLocation) || "folder";
          const newFileFolderPath = (vaultConfig == null ? void 0 : vaultConfig.newFileFolderPath) || "";
          let filePath = "Untitled.md";
          if (newFileLocation === "folder" && newFileFolderPath) {
            filePath = `${newFileFolderPath}/Untitled.md`;
          } else if (newFileLocation === "current") {
            const activeFile = this.app.workspace.getActiveFile();
            if (activeFile && activeFile.parent) {
              filePath = `${activeFile.parent.path}/Untitled.md`;
            }
          } else if (newFileLocation === "root") {
            filePath = "Untitled.md";
          }
          const file = await this.app.vault.create(filePath, "");
          await this.app.workspace.openLinkText(file.path, "", false);
          return true;
        }
        if (locationInput === "/" || locationInput.replace(/\//g, "") === "") {
          const newFile = await this.app.vault.create("Untitled.md", "");
          await this.app.workspace.openLinkText(newFile.path, "", false);
          return true;
        }
        const folderPath = locationInput.replace(/^\/+|\/+$/g, "");
        let folder = this.app.vault.getAbstractFileByPath(folderPath);
        if (!folder || !("children" in folder)) {
          await this.app.vault.createFolder(folderPath);
          folder = this.app.vault.getAbstractFileByPath(folderPath);
        }
        if (folder && "children" in folder) {
          const newFile = await this.app.vault.create(`${folderPath}/Untitled.md`, "");
          await this.app.workspace.openLinkText(newFile.path, "", false);
          return true;
        }
      } catch (e) {
      }
    }
    return false;
  }
};

// src/utils/view-registration.ts
function registerBasesCMSView(plugin, retries = 5) {
  try {
    const basesPlugin = plugin;
    if (typeof basesPlugin.registerBasesView === "function") {
      basesPlugin.registerBasesView(CMS_VIEW_TYPE, {
        name: "CMS",
        icon: plugin.settings.useHomeIcon ? "lucide-home" : "lucide-blocks",
        factory: (controller, containerEl) => {
          const view = new BasesCMSView(controller, containerEl, plugin);
          const pluginWithViews = plugin;
          if (pluginWithViews.activeViews) {
            pluginWithViews.activeViews.add(view);
          }
          if (view.isEmbedded) {
            let retryCount = 0;
            const maxRetries = 8;
            const baseDelay = 250;
            const tryRefresh = () => {
              try {
                const containerEl2 = view.containerEl;
                if (!containerEl2 || !containerEl2.isConnected) {
                  return;
                }
                const viewData = view.data;
                const hasData = viewData && viewData.data && viewData.groupedData;
                if (typeof view.onDataUpdated === "function") {
                  view.onDataUpdated();
                }
                if (!hasData && retryCount < maxRetries) {
                  retryCount++;
                  const delay = baseDelay + retryCount * 100;
                  window.setTimeout(tryRefresh, delay);
                }
              } catch (error) {
                console.warn("Bases CMS: Error refreshing newly created embedded view:", error);
              }
            };
            window.setTimeout(tryRefresh, baseDelay);
          }
          return view;
        },
        options: getCMSViewOptions2()
      });
    } else if (retries > 0) {
      const pluginWithTimeout = plugin;
      const registrationTimeout = pluginWithTimeout.registrationTimeout;
      if (registrationTimeout !== null && registrationTimeout !== void 0) {
        window.clearTimeout(registrationTimeout);
      }
      pluginWithTimeout.registrationTimeout = window.setTimeout(() => {
        pluginWithTimeout.registrationTimeout = null;
        registerBasesCMSView(plugin, retries - 1);
      }, 200);
    } else {
      console.warn("Bases CMS: registerBasesView not available. Is Bases plugin installed?");
    }
  } catch (error) {
    console.error("Bases CMS: Error registering view:", error);
  }
}
function getCMSViewOptions2() {
  const { getCMSViewOptions: getCMSViewOptions3 } = (init_settings_schema(), __toCommonJS(settings_schema_exports));
  return getCMSViewOptions3;
}

// src/main.ts
var BasesCMSPlugin = class extends import_obsidian24.Plugin {
  constructor() {
    super(...arguments);
    this.activeViews = /* @__PURE__ */ new Set();
    this.registrationTimeout = null;
    this.refreshEmbeddedViewsTimeout = null;
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new BasesCMSSettingTab(this.app, this));
    registerBasesCMSView(this);
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", () => {
        this.refreshEmbeddedViews();
      })
    );
    this.registerEvent(
      this.app.workspace.on("file-open", () => {
        this.refreshEmbeddedViews();
      })
    );
  }
  onunload() {
    if (this.registrationTimeout !== null) {
      window.clearTimeout(this.registrationTimeout);
      this.registrationTimeout = null;
    }
    if (this.refreshEmbeddedViewsTimeout !== null) {
      window.clearTimeout(this.refreshEmbeddedViewsTimeout);
      this.refreshEmbeddedViewsTimeout = null;
    }
    this.activeViews.clear();
  }
  async loadSettings() {
    const data = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, data);
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  /**
   * Refresh toolbars in all active CMS views
   */
  refreshAllToolbars() {
    const viewsToRemove = [];
    this.activeViews.forEach((view) => {
      const containerEl = view.containerEl;
      if (!containerEl || !containerEl.parentElement) {
        viewsToRemove.push(view);
      }
    });
    viewsToRemove.forEach((view) => this.activeViews.delete(view));
    this.activeViews.forEach((view) => {
      if (view && typeof view.refreshToolbar === "function") {
        view.refreshToolbar();
      }
    });
  }
  /**
   * Remove a view from tracking when it's closed
   */
  removeView(view) {
    this.activeViews.delete(view);
  }
  /**
   * Refresh all embedded CMS views when the active file changes
   * This ensures embedded views update their filters when using this.file properties
   * Debounced to avoid excessive refreshes when switching files quickly
   */
  refreshEmbeddedViews() {
    if (this.refreshEmbeddedViewsTimeout !== null) {
      window.clearTimeout(this.refreshEmbeddedViewsTimeout);
    }
    this.refreshEmbeddedViewsTimeout = window.setTimeout(() => {
      this.refreshEmbeddedViewsTimeout = null;
      const viewsToRemove = [];
      this.activeViews.forEach((view) => {
        const containerEl = view.containerEl;
        if (!containerEl || !containerEl.parentElement) {
          viewsToRemove.push(view);
        }
      });
      viewsToRemove.forEach((view) => this.activeViews.delete(view));
      let refreshedCount = 0;
      this.activeViews.forEach((view) => {
        if (view.isEmbedded) {
          try {
            const containerEl = view.containerEl;
            if (containerEl && containerEl.isConnected) {
              if (typeof view.onDataUpdated === "function") {
                view.onDataUpdated();
                refreshedCount++;
              }
            }
          } catch (error) {
            console.warn("Bases CMS: Error refreshing embedded view:", error);
          }
        }
      });
      if (refreshedCount > 0) {
        console.debug(`Bases CMS: Refreshed ${refreshedCount} embedded view(s) after active file change`);
      }
    }, 150);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL3V0aWxzL21keC1mcm9udG1hdHRlci50cyIsICJzcmMvdXRpbHMvZnJvbnRtYXR0ZXItaGVscGVyLnRzIiwgInNyYy9zaGFyZWQvc2V0dGluZ3Mtc2NoZW1hLnRzIiwgInNyYy91dGlscy9hdHRhY2htZW50LWRldGVjdGlvbi50cyIsICJzcmMvdXRpbHMvc21hcnQtZGVsZXRpb24udHMiLCAic3JjL2NvbXBvbmVudHMvZGVsZXRpb24tcHJldmlldy50cyIsICJzcmMvbWFpbi50cyIsICJzcmMvc2V0dGluZ3MudHMiLCAic3JjL2NvbXBvbmVudHMvY29tbWFuZC1waWNrZXItbW9kYWwudHMiLCAic3JjL2NvbXBvbmVudHMvaWNvbi1waWNrZXItbW9kYWwudHMiLCAic3JjL3V0aWxzL3NldHRpbmdzLWNvbXBhdC50cyIsICJzcmMvdHlwZXMudHMiLCAic3JjL3ZpZXdzL2Ntcy12aWV3LnRzIiwgInNyYy91dGlscy9jc3MtcHJvcHMudHMiLCAic3JjL3NoYXJlZC9kYXRhLXRyYW5zZm9ybS50cyIsICJzcmMvdXRpbHMvcHJvcGVydHkudHMiLCAic3JjL3V0aWxzL3N0eWxlLXNldHRpbmdzLnRzIiwgInNyYy91dGlscy9pbWFnZS50cyIsICJzcmMvdXRpbHMvcHJldmlldy50cyIsICJzcmMvc2hhcmVkL2NvbnRlbnQtbG9hZGVyLnRzIiwgInNyYy92aWV3cy9zaGFyZWQtcmVuZGVyZXIudHMiLCAic3JjL3V0aWxzL2RyYWZ0LXN0YXR1cy1iYWRnZS50cyIsICJzcmMvdXRpbHMvcXVpY2stZWRpdC1pY29uLnRzIiwgInNyYy91dGlscy9wcm9wZXJ0eS1yZW5kZXJlci50cyIsICJzcmMvY29tcG9uZW50cy9idWxrLXRvb2xiYXIudHMiLCAic3JjL3V0aWxzL2J1bGstb3BlcmF0aW9ucy50cyIsICJzcmMvdXRpbHMvZnJvbnRtYXR0ZXIudHMiLCAic3JjL2NvbXBvbmVudHMvbWFuYWdlLXRhZ3MtbW9kYWwudHMiLCAic3JjL2NvbXBvbmVudHMvc2V0LXByb3BlcnR5LW1vZGFsLnRzIiwgInNyYy9jb21wb25lbnRzL3JlbW92ZS1wcm9wZXJ0eS1tb2RhbC50cyIsICJzcmMvdXRpbHMvdG9vbGJhci1hY3Rpb25zLnRzIiwgInNyYy9jb21wb25lbnRzL2J1bGstb3BlcmF0aW9uLWNvbmZpcm0udHMiLCAic3JjL3V0aWxzL25ldy1ub3RlLWludGVyY2VwdG9yLnRzIiwgInNyYy91dGlscy9wcm9wZXJ0eS10b2dnbGUtaGFuZGxlci50cyIsICJzcmMvdXRpbHMvc2Nyb2xsLWxheW91dC1tYW5hZ2VyLnRzIiwgInNyYy91dGlscy92aWV3LXN3aXRjaC1saXN0ZW5lci50cyIsICJzcmMvdXRpbHMvZW1iZWRkZWQtdmlldy1kZXRlY3Rvci50cyIsICJzcmMvdXRpbHMvdmlldy1yZWdpc3RyYXRpb24udHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qKlxyXG4gKiBNRFggRnJvbnRtYXR0ZXIgVXRpbGl0aWVzXHJcbiAqIE1hbnVhbCBmcm9udG1hdHRlciBwYXJzaW5nIGFuZCBtb2RpZmljYXRpb24gZm9yIE1EWCBmaWxlc1xyXG4gKiBPYnNpZGlhbidzIG1ldGFkYXRhQ2FjaGUgYW5kIHByb2Nlc3NGcm9udE1hdHRlciBvbmx5IHdvcmsgZm9yIC5tZCBmaWxlc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIHBhcnNlWWFtbCwgc3RyaW5naWZ5WWFtbCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGZpbGUgaXMgYW4gTURYIGZpbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc01keEZpbGUoZmlsZTogVEZpbGUpOiBib29sZWFuIHtcclxuXHRyZXR1cm4gZmlsZS5leHRlbnNpb24gPT09ICdtZHgnO1xyXG59XHJcblxyXG4vKipcclxuICogUGFyc2UgZnJvbnRtYXR0ZXIgZnJvbSByYXcgZmlsZSBjb250ZW50XHJcbiAqIFJldHVybnMgdGhlIGZyb250bWF0dGVyIG9iamVjdCBhbmQgdGhlIGJvZHkgY29udGVudCBzZXBhcmF0ZWx5XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNZHhGcm9udG1hdHRlcihcclxuXHRjb250ZW50OiBzdHJpbmdcclxuKTogeyBmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgdW5rbm93bj47IGJvZHk6IHN0cmluZyB9IHwgbnVsbCB7XHJcblx0Y29uc3QgZnJvbnRtYXR0ZXJSZWdleCA9IC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tXFxuLztcclxuXHRjb25zdCBtYXRjaCA9IGNvbnRlbnQubWF0Y2goZnJvbnRtYXR0ZXJSZWdleCk7XHJcblxyXG5cdGlmICghbWF0Y2gpIHtcclxuXHRcdC8vIE5vIGZyb250bWF0dGVyIGZvdW5kXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRmcm9udG1hdHRlcjoge30sXHJcblx0XHRcdGJvZHk6IGNvbnRlbnQsXHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0Y29uc3QgZnJvbnRtYXR0ZXJUZXh0ID0gbWF0Y2hbMV07XHJcblx0Y29uc3QgYm9keUNvbnRlbnQgPSBjb250ZW50LnNsaWNlKG1hdGNoWzBdLmxlbmd0aCk7XHJcblxyXG5cdHRyeSB7XHJcblx0XHRjb25zdCBwYXJzZWQgPSBwYXJzZVlhbWwoZnJvbnRtYXR0ZXJUZXh0KSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGwgfCB1bmRlZmluZWQ7XHJcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHBhcnNlZCAmJiB0eXBlb2YgcGFyc2VkID09PSAnb2JqZWN0JyA/IHBhcnNlZCA6IHt9O1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0ZnJvbnRtYXR0ZXIsXHJcblx0XHRcdGJvZHk6IGJvZHlDb250ZW50LFxyXG5cdFx0fTtcclxuXHR9IGNhdGNoIChlKSB7XHJcblx0XHRjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIE1EWCBwcm9wZXJ0aWVzOicsIGUpO1xyXG5cdFx0Ly8gUmV0dXJuIGVtcHR5IGZyb250bWF0dGVyIGJ1dCBwcmVzZXJ2ZSBib2R5XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRmcm9udG1hdHRlcjoge30sXHJcblx0XHRcdGJvZHk6IGJvZHlDb250ZW50LFxyXG5cdFx0fTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZWFkIGFuZCBwYXJzZSBmcm9udG1hdHRlciBmcm9tIGFuIE1EWCBmaWxlXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVhZE1keEZyb250bWF0dGVyKFxyXG5cdGFwcDogQXBwLFxyXG5cdGZpbGU6IFRGaWxlXHJcbik6IFByb21pc2U8UmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsPiB7XHJcblx0aWYgKCFpc01keEZpbGUoZmlsZSkpIHtcclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxuXHJcblx0dHJ5IHtcclxuXHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcclxuXHRcdGNvbnN0IHBhcnNlZCA9IHBhcnNlTWR4RnJvbnRtYXR0ZXIoY29udGVudCk7XHJcblx0XHRyZXR1cm4gcGFyc2VkID8gcGFyc2VkLmZyb250bWF0dGVyIDogbnVsbDtcclxuXHR9IGNhdGNoIChlKSB7XHJcblx0XHRjb25zb2xlLmVycm9yKGBFcnJvciByZWFkaW5nIE1EWCBwcm9wZXJ0aWVzIGZyb20gJHtmaWxlLnBhdGh9OmAsIGUpO1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogV3JpdGUgdXBkYXRlZCBmcm9udG1hdHRlciB0byBhbiBNRFggZmlsZVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdyaXRlTWR4RnJvbnRtYXR0ZXIoXHJcblx0YXBwOiBBcHAsXHJcblx0ZmlsZTogVEZpbGUsXHJcblx0ZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIHVua25vd24+XHJcbik6IFByb21pc2U8dm9pZD4ge1xyXG5cdGlmICghaXNNZHhGaWxlKGZpbGUpKSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoYEZpbGUgJHtmaWxlLnBhdGh9IGlzIG5vdCBhbiBNRFggZmlsZWApO1xyXG5cdH1cclxuXHJcblx0dHJ5IHtcclxuXHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcclxuXHRcdGNvbnN0IHBhcnNlZCA9IHBhcnNlTWR4RnJvbnRtYXR0ZXIoY29udGVudCk7XHJcblxyXG5cdFx0aWYgKCFwYXJzZWQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gcGFyc2UgZXhpc3RpbmcgZnJvbnRtYXR0ZXInKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBTdHJpbmdpZnkgdGhlIHVwZGF0ZWQgZnJvbnRtYXR0ZXJcclxuXHRcdGNvbnN0IG5ld0Zyb250bWF0dGVyVGV4dCA9IHN0cmluZ2lmeVlhbWwoZnJvbnRtYXR0ZXIpLnRyaW0oKTtcclxuXHJcblx0XHQvLyBSZWNvbnN0cnVjdCBmaWxlIGNvbnRlbnRcclxuXHRcdGNvbnN0IG5ld0NvbnRlbnQgPSBgLS0tXFxuJHtuZXdGcm9udG1hdHRlclRleHR9XFxuLS0tXFxuJHtwYXJzZWQuYm9keX1gO1xyXG5cclxuXHRcdC8vIFdyaXRlIGJhY2sgdG8gZmlsZVxyXG5cdFx0YXdhaXQgYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBuZXdDb250ZW50KTtcclxuXHR9IGNhdGNoIChlKSB7XHJcblx0XHRjb25zb2xlLmVycm9yKGBFcnJvciB3cml0aW5nIE1EWCBwcm9wZXJ0aWVzIHRvICR7ZmlsZS5wYXRofTpgLCBlKTtcclxuXHRcdHRocm93IGU7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogUHJvY2VzcyBmcm9udG1hdHRlciBmb3IgYW4gTURYIGZpbGUgKHNpbWlsYXIgQVBJIHRvIHByb2Nlc3NGcm9udE1hdHRlcilcclxuICogVGhlIGNhbGxiYWNrIHJlY2VpdmVzIHRoZSBmcm9udG1hdHRlciBvYmplY3QgYW5kIGNhbiBtb2RpZnkgaXRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzTWR4RnJvbnRNYXR0ZXIoXHJcblx0YXBwOiBBcHAsXHJcblx0ZmlsZTogVEZpbGUsXHJcblx0Y2FsbGJhY2s6IChmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pID0+IHZvaWRcclxuKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0aWYgKCFpc01keEZpbGUoZmlsZSkpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihgRmlsZSAke2ZpbGUucGF0aH0gaXMgbm90IGFuIE1EWCBmaWxlYCk7XHJcblx0fVxyXG5cclxuXHR0cnkge1xyXG5cdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG5cdFx0Y29uc3QgcGFyc2VkID0gcGFyc2VNZHhGcm9udG1hdHRlcihjb250ZW50KTtcclxuXHJcblx0XHRpZiAoIXBhcnNlZCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBleGlzdGluZyBmcm9udG1hdHRlcicpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENyZWF0ZSBhIGNvcHkgb2YgdGhlIGZyb250bWF0dGVyIGZvciB0aGUgY2FsbGJhY2sgdG8gbW9kaWZ5XHJcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHsgLi4ucGFyc2VkLmZyb250bWF0dGVyIH07XHJcblxyXG5cdFx0Ly8gQ2FsbCB0aGUgY2FsbGJhY2sgdG8gbW9kaWZ5IGZyb250bWF0dGVyXHJcblx0XHRjYWxsYmFjayhmcm9udG1hdHRlcik7XHJcblxyXG5cdFx0Ly8gU3RyaW5naWZ5IHRoZSB1cGRhdGVkIGZyb250bWF0dGVyXHJcblx0XHRjb25zdCBuZXdGcm9udG1hdHRlclRleHQgPSBzdHJpbmdpZnlZYW1sKGZyb250bWF0dGVyKS50cmltKCk7XHJcblxyXG5cdFx0Ly8gUmVjb25zdHJ1Y3QgZmlsZSBjb250ZW50XHJcblx0XHRjb25zdCBuZXdDb250ZW50ID0gYC0tLVxcbiR7bmV3RnJvbnRtYXR0ZXJUZXh0fVxcbi0tLVxcbiR7cGFyc2VkLmJvZHl9YDtcclxuXHJcblx0XHQvLyBXcml0ZSBiYWNrIHRvIGZpbGVcclxuXHRcdGF3YWl0IGFwcC52YXVsdC5tb2RpZnkoZmlsZSwgbmV3Q29udGVudCk7XHJcblx0fSBjYXRjaCAoZSkge1xyXG5cdFx0Y29uc29sZS5lcnJvcihgRXJyb3IgcHJvY2Vzc2luZyBNRFggcHJvcGVydGllcyBmb3IgJHtmaWxlLnBhdGh9OmAsIGUpO1xyXG5cdFx0dGhyb3cgZTtcclxuXHR9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBVbmlmaWVkIEZyb250bWF0dGVyIEhlbHBlclxyXG4gKiBQcm92aWRlcyBhIHVuaWZpZWQgaW50ZXJmYWNlIGZvciByZWFkaW5nIGFuZCBtb2RpZnlpbmcgZnJvbnRtYXR0ZXJcclxuICogV29ya3MgZm9yIGJvdGggLm1kIGZpbGVzICh1c2luZyBPYnNpZGlhbidzIGNhY2hlKSBhbmQgLm1keCBmaWxlcyAobWFudWFsIHBhcnNpbmcpXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHtcclxuXHRpc01keEZpbGUsXHJcblx0cmVhZE1keEZyb250bWF0dGVyLFxyXG5cdHByb2Nlc3NNZHhGcm9udE1hdHRlcixcclxufSBmcm9tICcuL21keC1mcm9udG1hdHRlcic7XHJcblxyXG4vKipcclxuICogR2V0IGZyb250bWF0dGVyIGZyb20gYSBmaWxlICh3b3JrcyBmb3IgYm90aCAubWQgYW5kIC5tZHgpXHJcbiAqIEZvciAubWQgZmlsZXMsIHVzZXMgT2JzaWRpYW4ncyBtZXRhZGF0YSBjYWNoZSAoZmFzdClcclxuICogRm9yIC5tZHggZmlsZXMsIHVzZXMgbWFudWFsIHBhcnNpbmdcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRGaWxlRnJvbnRtYXR0ZXIoXHJcblx0YXBwOiBBcHAsXHJcblx0ZmlsZTogVEZpbGVcclxuKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGw+IHtcclxuXHRpZiAoaXNNZHhGaWxlKGZpbGUpKSB7XHJcblx0XHQvLyBNRFggZmlsZXM6IHVzZSBtYW51YWwgcGFyc2luZ1xyXG5cdFx0cmV0dXJuIGF3YWl0IHJlYWRNZHhGcm9udG1hdHRlcihhcHAsIGZpbGUpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHQvLyAubWQgZmlsZXM6IHVzZSBPYnNpZGlhbidzIG1ldGFkYXRhIGNhY2hlXHJcblx0XHRjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcclxuXHRcdHJldHVybiBtZXRhZGF0YT8uZnJvbnRtYXR0ZXIgfHwgbnVsbDtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQcm9jZXNzIGZyb250bWF0dGVyIGZvciBhIGZpbGUgKHdvcmtzIGZvciBib3RoIC5tZCBhbmQgLm1keClcclxuICogU2ltaWxhciBBUEkgdG8gYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlciBidXQgd29ya3MgZm9yIE1EWCBmaWxlcyB0b29cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzRmlsZUZyb250TWF0dGVyKFxyXG5cdGFwcDogQXBwLFxyXG5cdGZpbGU6IFRGaWxlLFxyXG5cdGNhbGxiYWNrOiAoZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIHVua25vd24+KSA9PiB2b2lkXHJcbik6IFByb21pc2U8dm9pZD4ge1xyXG5cdGlmIChpc01keEZpbGUoZmlsZSkpIHtcclxuXHRcdC8vIE1EWCBmaWxlczogdXNlIG1hbnVhbCBwcm9jZXNzaW5nXHJcblx0XHRhd2FpdCBwcm9jZXNzTWR4RnJvbnRNYXR0ZXIoYXBwLCBmaWxlLCBjYWxsYmFjayk7XHJcblx0fSBlbHNlIHtcclxuXHRcdC8vIC5tZCBmaWxlczogdXNlIE9ic2lkaWFuJ3MgYnVpbHQtaW4gbWV0aG9kXHJcblx0XHRhd2FpdCBhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUsIGNhbGxiYWNrKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGZpbGUgaXMgYW4gTURYIGZpbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc01keEZpbGVIZWxwZXIoZmlsZTogVEZpbGUpOiBib29sZWFuIHtcclxuXHRyZXR1cm4gaXNNZHhGaWxlKGZpbGUpO1xyXG59XHJcbiIsICIvKipcbiAqIFNldHRpbmdzIHNjaGVtYSBmb3IgQ01TIHZpZXdzXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBCYXNlc0NNU1NldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHR5cGUgeyBDTVNTZXR0aW5ncyB9IGZyb20gJy4vZGF0YS10cmFuc2Zvcm0nO1xuXG4vLyBCYXNlcyBjb25maWcgb2JqZWN0IGludGVyZmFjZVxuaW50ZXJmYWNlIEJhc2VzQ29uZmlnIHtcblx0Z2V0KGtleTogc3RyaW5nKTogdW5rbm93bjtcbn1cblxuLyoqXG4gKiBSZWFkIENNUyBzZXR0aW5ncyBmcm9tIEJhc2VzIGNvbmZpZyB3aXRoIHBsdWdpbiBkZWZhdWx0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVhZENNU1NldHRpbmdzKFxuXHRjb25maWc6IEJhc2VzQ29uZmlnIHwgdW5kZWZpbmVkLFxuXHRwbHVnaW5TZXR0aW5nczogQmFzZXNDTVNTZXR0aW5nc1xuKTogQ01TU2V0dGluZ3Mge1xuXHQvLyBIZWxwZXIgdG8gc2FmZWx5IGdldCBjb25maWcgdmFsdWVzXG5cdGNvbnN0IGdldENvbmZpZyA9IChrZXk6IHN0cmluZyk6IHVua25vd24gPT4ge1xuXHRcdHJldHVybiBjb25maWc/LmdldD8uKGtleSk7XG5cdH07XG5cdFxuXHRyZXR1cm4ge1xuXHRcdHRpdGxlUHJvcGVydHk6IChnZXRDb25maWcoJ3RpdGxlUHJvcGVydHknKSBhcyBzdHJpbmcpIHx8ICcnLFxuXHRcdGRlc2NyaXB0aW9uUHJvcGVydHk6IChnZXRDb25maWcoJ2Rlc2NyaXB0aW9uUHJvcGVydHknKSBhcyBzdHJpbmcpIHx8ICcnLFxuXHRcdGltYWdlUHJvcGVydHk6IChnZXRDb25maWcoJ2ltYWdlUHJvcGVydHknKSBhcyBzdHJpbmcpIHx8ICcnLFxuXHRcdHNob3dUaXRsZTogdHJ1ZSwgLy8gQWx3YXlzIHNob3cgdGl0bGUsIGRlZmF1bHRpbmcgdG8gZmlsZSBuYW1lIGlmIG5vIHByb3BlcnR5IHNldFxuXHRcdHNob3dEYXRlOiAoZ2V0Q29uZmlnKCdzaG93RGF0ZScpIGFzIGJvb2xlYW4pID8/IGZhbHNlLFxuXHRcdGRhdGVQcm9wZXJ0eTogKGdldENvbmZpZygnZGF0ZVByb3BlcnR5JykgYXMgc3RyaW5nKSB8fCAnJyxcblx0XHRkYXRlSW5jbHVkZVRpbWU6IChnZXRDb25maWcoJ2RhdGVJbmNsdWRlVGltZScpIGFzIGJvb2xlYW4pID8/IGZhbHNlLFxuXHRcdHNob3dUZXh0UHJldmlldzogKGdldENvbmZpZygnc2hvd1RleHRQcmV2aWV3JykgYXMgYm9vbGVhbikgPz8gdHJ1ZSxcblx0XHRmYWxsYmFja1RvQ29udGVudDogKGdldENvbmZpZygnZmFsbGJhY2tUb0NvbnRlbnQnKSBhcyBib29sZWFuKSA/PyB0cnVlLFxuXHRcdHRydW5jYXRlUHJldmlld1Byb3BlcnR5OiAoZ2V0Q29uZmlnKCd0cnVuY2F0ZVByZXZpZXdQcm9wZXJ0eScpIGFzIGJvb2xlYW4pID8/IGZhbHNlLFxuXHRcdGZhbGxiYWNrVG9FbWJlZHM6ICgoKSA9PiB7XG5cdFx0XHRjb25zdCB2YWx1ZSA9IGdldENvbmZpZygnZmFsbGJhY2tUb0VtYmVkcycpO1xuXHRcdFx0aWYgKHZhbHVlID09PSAnYWx3YXlzJyB8fCB2YWx1ZSA9PT0gJ2lmLWVtcHR5JyB8fCB2YWx1ZSA9PT0gJ25ldmVyJykge1xuXHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHR9XG5cdFx0XHQvLyBMZWdhY3kgYm9vbGVhbiBzdXBwb3J0IC0gZGVmYXVsdCB0byAnaWYtZW1wdHknIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG5cdFx0XHRyZXR1cm4gKHZhbHVlID09PSBmYWxzZSkgPyAnbmV2ZXInIDogJ2lmLWVtcHR5Jztcblx0XHR9KSgpLFxuXHRcdHByb3BlcnR5RGlzcGxheTE6IChnZXRDb25maWcoJ3Byb3BlcnR5RGlzcGxheTEnKSBhcyBzdHJpbmcpIHx8ICcnLFxuXHRcdHByb3BlcnR5RGlzcGxheTI6IChnZXRDb25maWcoJ3Byb3BlcnR5RGlzcGxheTInKSBhcyBzdHJpbmcpIHx8ICcnLFxuXHRcdHByb3BlcnR5RGlzcGxheTM6IChnZXRDb25maWcoJ3Byb3BlcnR5RGlzcGxheTMnKSBhcyBzdHJpbmcpIHx8ICcnLFxuXHRcdHByb3BlcnR5RGlzcGxheTQ6IChnZXRDb25maWcoJ3Byb3BlcnR5RGlzcGxheTQnKSBhcyBzdHJpbmcpIHx8ICcnLFxuXHRcdHByb3BlcnR5RGlzcGxheTU6IChnZXRDb25maWcoJ3Byb3BlcnR5RGlzcGxheTUnKSBhcyBzdHJpbmcpIHx8ICcnLFxuXHRcdHByb3BlcnR5RGlzcGxheTY6IChnZXRDb25maWcoJ3Byb3BlcnR5RGlzcGxheTYnKSBhcyBzdHJpbmcpIHx8ICcnLFxuXHRcdHByb3BlcnR5RGlzcGxheTc6IChnZXRDb25maWcoJ3Byb3BlcnR5RGlzcGxheTcnKSBhcyBzdHJpbmcpIHx8ICcnLFxuXHRcdHByb3BlcnR5RGlzcGxheTg6IChnZXRDb25maWcoJ3Byb3BlcnR5RGlzcGxheTgnKSBhcyBzdHJpbmcpIHx8ICcnLFxuXHRcdHByb3BlcnR5RGlzcGxheTk6IChnZXRDb25maWcoJ3Byb3BlcnR5RGlzcGxheTknKSBhcyBzdHJpbmcpIHx8ICcnLFxuXHRcdHByb3BlcnR5RGlzcGxheTEwOiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eURpc3BsYXkxMCcpIGFzIHN0cmluZykgfHwgJycsXG5cdFx0cHJvcGVydHlEaXNwbGF5MTE6IChnZXRDb25maWcoJ3Byb3BlcnR5RGlzcGxheTExJykgYXMgc3RyaW5nKSB8fCAnJyxcblx0XHRwcm9wZXJ0eURpc3BsYXkxMjogKGdldENvbmZpZygncHJvcGVydHlEaXNwbGF5MTInKSBhcyBzdHJpbmcpIHx8ICcnLFxuXHRcdHByb3BlcnR5RGlzcGxheTEzOiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eURpc3BsYXkxMycpIGFzIHN0cmluZykgfHwgJycsXG5cdFx0cHJvcGVydHlEaXNwbGF5MTQ6IChnZXRDb25maWcoJ3Byb3BlcnR5RGlzcGxheTE0JykgYXMgc3RyaW5nKSB8fCAnJyxcblx0XHRwcm9wZXJ0eUxheW91dDEyU2lkZUJ5U2lkZTogKGdldENvbmZpZygncHJvcGVydHlMYXlvdXQxMlNpZGVCeVNpZGUnKSBhcyBib29sZWFuKSA/PyBmYWxzZSxcblx0XHRwcm9wZXJ0eUxheW91dDM0U2lkZUJ5U2lkZTogKGdldENvbmZpZygncHJvcGVydHlMYXlvdXQzNFNpZGVCeVNpZGUnKSBhcyBib29sZWFuKSA/PyBmYWxzZSxcblx0XHRwcm9wZXJ0eUxheW91dDU2U2lkZUJ5U2lkZTogKGdldENvbmZpZygncHJvcGVydHlMYXlvdXQ1NlNpZGVCeVNpZGUnKSBhcyBib29sZWFuKSA/PyBmYWxzZSxcblx0XHRwcm9wZXJ0eUxheW91dDc4U2lkZUJ5U2lkZTogKGdldENvbmZpZygncHJvcGVydHlMYXlvdXQ3OFNpZGVCeVNpZGUnKSBhcyBib29sZWFuKSA/PyBmYWxzZSxcblx0XHRwcm9wZXJ0eUxheW91dDkxMFNpZGVCeVNpZGU6IChnZXRDb25maWcoJ3Byb3BlcnR5TGF5b3V0OTEwU2lkZUJ5U2lkZScpIGFzIGJvb2xlYW4pID8/IGZhbHNlLFxuXHRcdHByb3BlcnR5TGF5b3V0MTExMlNpZGVCeVNpZGU6IChnZXRDb25maWcoJ3Byb3BlcnR5TGF5b3V0MTExMlNpZGVCeVNpZGUnKSBhcyBib29sZWFuKSA/PyBmYWxzZSxcblx0XHRwcm9wZXJ0eUxheW91dDEzMTRTaWRlQnlTaWRlOiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eUxheW91dDEzMTRTaWRlQnlTaWRlJykgYXMgYm9vbGVhbikgPz8gZmFsc2UsXG5cdFx0cHJvcGVydHlHcm91cDFQb3NpdGlvbjogKGdldENvbmZpZygncHJvcGVydHlHcm91cDFQb3NpdGlvbicpIGFzICd0b3AnIHwgJ2JvdHRvbScpIHx8ICdib3R0b20nLFxuXHRcdHByb3BlcnR5R3JvdXAyUG9zaXRpb246IChnZXRDb25maWcoJ3Byb3BlcnR5R3JvdXAyUG9zaXRpb24nKSBhcyAndG9wJyB8ICdib3R0b20nKSB8fCAnYm90dG9tJyxcblx0XHRwcm9wZXJ0eUdyb3VwM1Bvc2l0aW9uOiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eUdyb3VwM1Bvc2l0aW9uJykgYXMgJ3RvcCcgfCAnYm90dG9tJykgfHwgJ2JvdHRvbScsXG5cdFx0cHJvcGVydHlHcm91cDRQb3NpdGlvbjogKGdldENvbmZpZygncHJvcGVydHlHcm91cDRQb3NpdGlvbicpIGFzICd0b3AnIHwgJ2JvdHRvbScpIHx8ICdib3R0b20nLFxuXHRcdHByb3BlcnR5R3JvdXA1UG9zaXRpb246IChnZXRDb25maWcoJ3Byb3BlcnR5R3JvdXA1UG9zaXRpb24nKSBhcyAndG9wJyB8ICdib3R0b20nKSB8fCAnYm90dG9tJyxcblx0XHRwcm9wZXJ0eUdyb3VwNlBvc2l0aW9uOiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eUdyb3VwNlBvc2l0aW9uJykgYXMgJ3RvcCcgfCAnYm90dG9tJykgfHwgJ2JvdHRvbScsXG5cdFx0cHJvcGVydHlHcm91cDdQb3NpdGlvbjogKGdldENvbmZpZygncHJvcGVydHlHcm91cDdQb3NpdGlvbicpIGFzICd0b3AnIHwgJ2JvdHRvbScpIHx8ICdib3R0b20nLFxuXHRcdGltYWdlRm9ybWF0OiAoZ2V0Q29uZmlnKCdpbWFnZUZvcm1hdCcpIGFzICdub25lJyB8ICd0aHVtYm5haWwnIHwgJ2NvdmVyJykgfHwgJ3RodW1ibmFpbCcsXG5cdFx0aW1hZ2VQb3NpdGlvbjogKGdldENvbmZpZygnaW1hZ2VQb3NpdGlvbicpIGFzICdsZWZ0JyB8ICdyaWdodCcgfCAndG9wJyB8ICdib3R0b20nKSB8fCAncmlnaHQnLFxuXHRcdHByb3BlcnR5TGFiZWxzOiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eUxhYmVscycpIGFzICdoaWRlJyB8ICdpbmxpbmUnIHwgJ2Fib3ZlJykgfHwgJ2hpZGUnLFxuXHRcdHNob3dEcmFmdFN0YXR1czogKGdldENvbmZpZygnc2hvd0RyYWZ0U3RhdHVzJykgYXMgYm9vbGVhbikgPz8gZmFsc2UsXG5cdFx0ZHJhZnRTdGF0dXNQcm9wZXJ0eTogKGdldENvbmZpZygnZHJhZnRTdGF0dXNQcm9wZXJ0eScpIGFzIHN0cmluZykgfHwgJycsXG5cdFx0ZHJhZnRTdGF0dXNSZXZlcnNlOiAoZ2V0Q29uZmlnKCdkcmFmdFN0YXR1c1JldmVyc2UnKSBhcyBib29sZWFuKSA/PyBmYWxzZSxcblx0XHRkcmFmdFN0YXR1c1VzZUZpbGVuYW1lUHJlZml4OiAoZ2V0Q29uZmlnKCdkcmFmdFN0YXR1c1VzZUZpbGVuYW1lUHJlZml4JykgYXMgYm9vbGVhbikgPz8gZmFsc2UsXG5cdFx0c2hvd1RhZ3M6IChnZXRDb25maWcoJ3Nob3dUYWdzJykgYXMgYm9vbGVhbikgPz8gZmFsc2UsXG5cdFx0dGFnc1Byb3BlcnR5OiAoZ2V0Q29uZmlnKCd0YWdzUHJvcGVydHknKSBhcyBzdHJpbmcpIHx8ICcnLFxuXHRcdG1heFRhZ3NUb1Nob3c6IChnZXRDb25maWcoJ21heFRhZ3NUb1Nob3cnKSBhcyBudW1iZXIpID8/IDMsXG5cdFx0Y3VzdG9taXplTmV3QnV0dG9uOiAoZ2V0Q29uZmlnKCdjdXN0b21pemVOZXdCdXR0b24nKSBhcyBib29sZWFuKSA/PyBmYWxzZSxcblx0XHRuZXdOb3RlTG9jYXRpb246IChnZXRDb25maWcoJ25ld05vdGVMb2NhdGlvbicpIGFzIHN0cmluZykgfHwgJycsXG5cdFx0aGlkZVF1aWNrRWRpdEljb246IChnZXRDb25maWcoJ2hpZGVRdWlja0VkaXRJY29uJykgYXMgYm9vbGVhbikgPz8gZmFsc2UsXG5cdFx0Y2FyZFNpemU6IChnZXRDb25maWcoJ2NhcmRTaXplJykgYXMgbnVtYmVyKSA/PyAyNTAsXG5cdFx0aW1hZ2VBc3BlY3RSYXRpbzogKGdldENvbmZpZygnaW1hZ2VBc3BlY3RSYXRpbycpIGFzIG51bWJlcikgPz8gMC41NSxcblx0fTtcbn1cblxuLyoqXG4gKiBDTVMgdmlldyBvcHRpb25zIGZvciBCYXNlcyBjb25maWd1cmF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDTVNWaWV3T3B0aW9ucygpOiB1bmtub3duW10ge1xuXHRyZXR1cm4gW1xuXHRcdC8vIENhcmQgc2l6ZSAoc3RhbmRhbG9uZSlcblx0XHR7XG5cdFx0XHR0eXBlOiAnc2xpZGVyJyxcblx0XHRcdGRpc3BsYXlOYW1lOiAnQ2FyZCBzaXplJyxcblx0XHRcdGtleTogJ2NhcmRTaXplJyxcblx0XHRcdG1pbjogNTAsXG5cdFx0XHRtYXg6IDgwMCxcblx0XHRcdHN0ZXA6IDEwLFxuXHRcdFx0ZGVmYXVsdDogMjUwXG5cdFx0fSxcblx0XHQvLyBUaXRsZSBncm91cFxuXHRcdHtcblx0XHRcdHR5cGU6ICdncm91cCcsXG5cdFx0XHRkaXNwbGF5TmFtZTogJ1RpdGxlJyxcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAncHJvcGVydHknLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnVGl0bGUgcHJvcGVydHknLFxuXHRcdFx0XHRcdGtleTogJ3RpdGxlUHJvcGVydHknLFxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAnU2VsZWN0IHByb3BlcnR5Jyxcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xuXHRcdFx0XHR9XG5cdFx0XHRdXG5cdFx0fSxcblx0XHQvLyBUZXh0IHByZXZpZXcgZ3JvdXBcblx0XHR7XG5cdFx0XHR0eXBlOiAnZ3JvdXAnLFxuXHRcdFx0ZGlzcGxheU5hbWU6ICdUZXh0IHByZXZpZXcnLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnU2hvdyB0ZXh0IHByZXZpZXcnLFxuXHRcdFx0XHRcdGtleTogJ3Nob3dUZXh0UHJldmlldycsXG5cdFx0XHRcdFx0ZGVmYXVsdDogdHJ1ZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5Jyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1RleHQgcHJldmlldyBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0a2V5OiAnZGVzY3JpcHRpb25Qcm9wZXJ0eScsXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxuXHRcdFx0XHRcdGRlZmF1bHQ6ICcnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAndG9nZ2xlJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1VzZSBub3RlIGNvbnRlbnQgaWYgdGV4dCBwcmV2aWV3IHByb3BlcnR5IHVuYXZhaWxhYmxlJyxcblx0XHRcdFx0XHRrZXk6ICdmYWxsYmFja1RvQ29udGVudCcsXG5cdFx0XHRcdFx0ZGVmYXVsdDogdHJ1ZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3RvZ2dsZScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdUcnVuY2F0ZSBwcmV2aWV3IHByb3BlcnR5Jyxcblx0XHRcdFx0XHRrZXk6ICd0cnVuY2F0ZVByZXZpZXdQcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGVmYXVsdDogZmFsc2Vcblx0XHRcdFx0fVxuXHRcdFx0XVxuXHRcdH0sXG5cdFx0Ly8gSW1hZ2UgZ3JvdXBcblx0XHR7XG5cdFx0XHR0eXBlOiAnZ3JvdXAnLFxuXHRcdFx0ZGlzcGxheU5hbWU6ICdJbWFnZScsXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2Ryb3Bkb3duJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ0ltYWdlIGZvcm1hdCcsXG5cdFx0XHRcdFx0a2V5OiAnaW1hZ2VGb3JtYXQnLFxuXHRcdFx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0XHRcdCdub25lJzogJ05vIGltYWdlJyxcblx0XHRcdFx0XHRcdCd0aHVtYm5haWwnOiAnVGh1bWJuYWlsJyxcblx0XHRcdFx0XHRcdCdjb3Zlcic6ICdDb3Zlcidcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGRlZmF1bHQ6ICd0aHVtYm5haWwnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAncHJvcGVydHknLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnSW1hZ2UgcHJvcGVydHknLFxuXHRcdFx0XHRcdGtleTogJ2ltYWdlUHJvcGVydHknLFxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAnU2VsZWN0IHByb3BlcnR5Jyxcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2Ryb3Bkb3duJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1Nob3cgaW1hZ2UgZW1iZWRzJyxcblx0XHRcdFx0XHRrZXk6ICdmYWxsYmFja1RvRW1iZWRzJyxcblx0XHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0XHQnYWx3YXlzJzogJ0Fsd2F5cycsXG5cdFx0XHRcdFx0XHQnaWYtZW1wdHknOiAnSWYgaW1hZ2UgcHJvcGVydHkgbWlzc2luZyBvciBlbXB0eScsXG5cdFx0XHRcdFx0XHQnbmV2ZXInOiAnTmV2ZXInXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRkZWZhdWx0OiAnaWYtZW1wdHknXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnc2xpZGVyJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ0ltYWdlIGFzcGVjdCByYXRpbycsXG5cdFx0XHRcdFx0a2V5OiAnaW1hZ2VBc3BlY3RSYXRpbycsXG5cdFx0XHRcdFx0bWluOiAwLjEsXG5cdFx0XHRcdFx0bWF4OiAyLjAsXG5cdFx0XHRcdFx0c3RlcDogMC4wNSxcblx0XHRcdFx0XHRkZWZhdWx0OiAwLjU1LFxuXHRcdFx0XHRcdHNob3dXaGVuOiB7XG5cdFx0XHRcdFx0XHRrZXk6ICdpbWFnZUZvcm1hdCcsXG5cdFx0XHRcdFx0XHR2YWx1ZTogJ2NvdmVyJ1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XVxuXHRcdH0sXG5cdFx0Ly8gRGF0ZSBncm91cFxuXHRcdHtcblx0XHRcdHR5cGU6ICdncm91cCcsXG5cdFx0XHRkaXNwbGF5TmFtZTogJ0RhdGUnLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnU2hvdyBkYXRlJyxcblx0XHRcdFx0XHRrZXk6ICdzaG93RGF0ZScsXG5cdFx0XHRcdFx0ZGVmYXVsdDogZmFsc2Vcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdEYXRlIHByb3BlcnR5Jyxcblx0XHRcdFx0XHRrZXk6ICdkYXRlUHJvcGVydHknLFxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAnU2VsZWN0IHByb3BlcnR5Jyxcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3RvZ2dsZScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdJbmNsdWRlIHRpbWUnLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiAnV2hlbiBlbmFibGVkLCBkaXNwbGF5cyBib3RoIGRhdGUgYW5kIHRpbWUgdXNpbmcgeW91ciBzeXN0ZW0gbG9jYWxlIHNldHRpbmdzJyxcblx0XHRcdFx0XHRrZXk6ICdkYXRlSW5jbHVkZVRpbWUnLFxuXHRcdFx0XHRcdGRlZmF1bHQ6IGZhbHNlXG5cdFx0XHRcdH1cblx0XHRcdF1cblx0XHR9LFxuXHRcdC8vIERyYWZ0IHN0YXR1cyBncm91cFxuXHRcdHtcblx0XHRcdHR5cGU6ICdncm91cCcsXG5cdFx0XHRkaXNwbGF5TmFtZTogJ0RyYWZ0IHN0YXR1cycsXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3RvZ2dsZScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdTaG93IGRyYWZ0IHN0YXR1cycsXG5cdFx0XHRcdFx0a2V5OiAnc2hvd0RyYWZ0U3RhdHVzJyxcblx0XHRcdFx0XHRkZWZhdWx0OiBmYWxzZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5Jyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ0RyYWZ0IHN0YXR1cyBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0a2V5OiAnZHJhZnRTdGF0dXNQcm9wZXJ0eScsXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxuXHRcdFx0XHRcdGRlZmF1bHQ6ICcnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAndG9nZ2xlJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1JldmVyc2UgbG9naWMnLFxuXHRcdFx0XHRcdGtleTogJ2RyYWZ0U3RhdHVzUmV2ZXJzZScsXG5cdFx0XHRcdFx0ZGVmYXVsdDogZmFsc2Vcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnRmlsZW5hbWUgdW5kZXJzY29yZSBwcmVmaXggYXMgZHJhZnQgaW5kaWNhdG9yJyxcblx0XHRcdFx0XHRrZXk6ICdkcmFmdFN0YXR1c1VzZUZpbGVuYW1lUHJlZml4Jyxcblx0XHRcdFx0XHRkZWZhdWx0OiBmYWxzZVxuXHRcdFx0XHR9XG5cdFx0XHRdXG5cdFx0fSxcblx0XHQvLyBUYWdzIGdyb3VwXG5cdFx0e1xuXHRcdFx0dHlwZTogJ2dyb3VwJyxcblx0XHRcdGRpc3BsYXlOYW1lOiAnVGFncycsXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3RvZ2dsZScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdTaG93IHRhZ3MnLFxuXHRcdFx0XHRcdGtleTogJ3Nob3dUYWdzJyxcblx0XHRcdFx0XHRkZWZhdWx0OiBmYWxzZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5Jyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1RhZ3MgcHJvcGVydHknLFxuXHRcdFx0XHRcdGtleTogJ3RhZ3NQcm9wZXJ0eScsXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxuXHRcdFx0XHRcdGRlZmF1bHQ6ICcnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnc2xpZGVyJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ01heGltdW0gdGFncyB0byBzaG93Jyxcblx0XHRcdFx0XHRrZXk6ICdtYXhUYWdzVG9TaG93Jyxcblx0XHRcdFx0XHRtaW46IDEsXG5cdFx0XHRcdFx0bWF4OiA1MCxcblx0XHRcdFx0XHRzdGVwOiAxLFxuXHRcdFx0XHRcdGRlZmF1bHQ6IDMsXG5cdFx0XHRcdFx0c2hvd1doZW46IHtcblx0XHRcdFx0XHRcdGtleTogJ3Nob3dUYWdzJyxcblx0XHRcdFx0XHRcdHZhbHVlOiB0cnVlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRdXG5cdFx0fSxcblx0XHQvLyBQcm9wZXJ0aWVzIGdyb3VwXG5cdFx0e1xuXHRcdFx0dHlwZTogJ2dyb3VwJyxcblx0XHRcdGRpc3BsYXlOYW1lOiAnUHJvcGVydGllcycsXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2Ryb3Bkb3duJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1Nob3cgcHJvcGVydHkgbGFiZWxzJyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eUxhYmVscycsXG5cdFx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdFx0J2hpZGUnOiAnSGlkZScsXG5cdFx0XHRcdFx0XHQnaW5saW5lJzogJ0lubGluZScsXG5cdFx0XHRcdFx0XHQnYWJvdmUnOiAnT24gdG9wJ1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZGVmYXVsdDogJ2hpZGUnXG5cdFx0XHRcdH1cblx0XHRcdF1cblx0XHR9LFxuXHRcdC8vIFByb3BlcnR5IGdyb3VwIDFcblx0XHR7XG5cdFx0XHR0eXBlOiAnZ3JvdXAnLFxuXHRcdFx0ZGlzcGxheU5hbWU6ICdQcm9wZXJ0eSBncm91cCAxJyxcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAncHJvcGVydHknLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnRmlyc3QgcHJvcGVydHknLFxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5RGlzcGxheTEnLFxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAnU2VsZWN0IHByb3BlcnR5Jyxcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5Jyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1NlY29uZCBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlEaXNwbGF5MicsXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxuXHRcdFx0XHRcdGRlZmF1bHQ6ICcnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAndG9nZ2xlJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1Nob3cgc2lkZS1ieS1zaWRlJyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eUxheW91dDEyU2lkZUJ5U2lkZScsXG5cdFx0XHRcdFx0ZGVmYXVsdDogZmFsc2Vcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdkcm9wZG93bicsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdQb3NpdGlvbicsXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlHcm91cDFQb3NpdGlvbicsXG5cdFx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdFx0J3RvcCc6ICdUb3AnLFxuXHRcdFx0XHRcdFx0J2JvdHRvbSc6ICdCb3R0b20nXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRkZWZhdWx0OiAnYm90dG9tJ1xuXHRcdFx0XHR9XG5cdFx0XHRdXG5cdFx0fSxcblx0XHQvLyBQcm9wZXJ0eSBncm91cCAyXG5cdFx0e1xuXHRcdFx0dHlwZTogJ2dyb3VwJyxcblx0XHRcdGRpc3BsYXlOYW1lOiAnUHJvcGVydHkgZ3JvdXAgMicsXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5Jyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1RoaXJkIHByb3BlcnR5Jyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eURpc3BsYXkzJyxcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdGb3VydGggcHJvcGVydHknLFxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5RGlzcGxheTQnLFxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAnU2VsZWN0IHByb3BlcnR5Jyxcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3RvZ2dsZScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdTaG93IHNpZGUtYnktc2lkZScsXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlMYXlvdXQzNFNpZGVCeVNpZGUnLFxuXHRcdFx0XHRcdGRlZmF1bHQ6IGZhbHNlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnZHJvcGRvd24nLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnUG9zaXRpb24nLFxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5R3JvdXAyUG9zaXRpb24nLFxuXHRcdFx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0XHRcdCd0b3AnOiAnVG9wJyxcblx0XHRcdFx0XHRcdCdib3R0b20nOiAnQm90dG9tJ1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZGVmYXVsdDogJ2JvdHRvbSdcblx0XHRcdFx0fVxuXHRcdFx0XVxuXHRcdH0sXG5cdFx0Ly8gUHJvcGVydHkgZ3JvdXAgM1xuXHRcdHtcblx0XHRcdHR5cGU6ICdncm91cCcsXG5cdFx0XHRkaXNwbGF5TmFtZTogJ1Byb3BlcnR5IGdyb3VwIDMnLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdGaXJzdCBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlEaXNwbGF5NScsXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxuXHRcdFx0XHRcdGRlZmF1bHQ6ICcnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAncHJvcGVydHknLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnU2Vjb25kIHByb3BlcnR5Jyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eURpc3BsYXk2Jyxcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnU2hvdyBzaWRlLWJ5LXNpZGUnLFxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5TGF5b3V0NTZTaWRlQnlTaWRlJyxcblx0XHRcdFx0XHRkZWZhdWx0OiBmYWxzZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2Ryb3Bkb3duJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1Bvc2l0aW9uJyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eUdyb3VwM1Bvc2l0aW9uJyxcblx0XHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0XHQndG9wJzogJ1RvcCcsXG5cdFx0XHRcdFx0XHQnYm90dG9tJzogJ0JvdHRvbSdcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGRlZmF1bHQ6ICdib3R0b20nXG5cdFx0XHRcdH1cblx0XHRcdF1cblx0XHR9LFxuXHRcdC8vIFByb3BlcnR5IGdyb3VwIDRcblx0XHR7XG5cdFx0XHR0eXBlOiAnZ3JvdXAnLFxuXHRcdFx0ZGlzcGxheU5hbWU6ICdQcm9wZXJ0eSBncm91cCA0Jyxcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAncHJvcGVydHknLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnRmlyc3QgcHJvcGVydHknLFxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5RGlzcGxheTcnLFxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAnU2VsZWN0IHByb3BlcnR5Jyxcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5Jyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1NlY29uZCBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlEaXNwbGF5OCcsXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxuXHRcdFx0XHRcdGRlZmF1bHQ6ICcnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAndG9nZ2xlJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1Nob3cgc2lkZS1ieS1zaWRlJyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eUxheW91dDc4U2lkZUJ5U2lkZScsXG5cdFx0XHRcdFx0ZGVmYXVsdDogZmFsc2Vcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdkcm9wZG93bicsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdQb3NpdGlvbicsXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlHcm91cDRQb3NpdGlvbicsXG5cdFx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdFx0J3RvcCc6ICdUb3AnLFxuXHRcdFx0XHRcdFx0J2JvdHRvbSc6ICdCb3R0b20nXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRkZWZhdWx0OiAnYm90dG9tJ1xuXHRcdFx0XHR9XG5cdFx0XHRdXG5cdFx0fSxcblx0XHQvLyBQcm9wZXJ0eSBncm91cCA1XG5cdFx0e1xuXHRcdFx0dHlwZTogJ2dyb3VwJyxcblx0XHRcdGRpc3BsYXlOYW1lOiAnUHJvcGVydHkgZ3JvdXAgNScsXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5Jyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ0ZpcnN0IHByb3BlcnR5Jyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eURpc3BsYXk5Jyxcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdTZWNvbmQgcHJvcGVydHknLFxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5RGlzcGxheTEwJyxcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnU2hvdyBzaWRlLWJ5LXNpZGUnLFxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5TGF5b3V0OTEwU2lkZUJ5U2lkZScsXG5cdFx0XHRcdFx0ZGVmYXVsdDogZmFsc2Vcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdkcm9wZG93bicsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdQb3NpdGlvbicsXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlHcm91cDVQb3NpdGlvbicsXG5cdFx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdFx0J3RvcCc6ICdUb3AnLFxuXHRcdFx0XHRcdFx0J2JvdHRvbSc6ICdCb3R0b20nXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRkZWZhdWx0OiAnYm90dG9tJ1xuXHRcdFx0XHR9XG5cdFx0XHRdXG5cdFx0fSxcblx0XHQvLyBQcm9wZXJ0eSBncm91cCA2XG5cdFx0e1xuXHRcdFx0dHlwZTogJ2dyb3VwJyxcblx0XHRcdGRpc3BsYXlOYW1lOiAnUHJvcGVydHkgZ3JvdXAgNicsXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5Jyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ0ZpcnN0IHByb3BlcnR5Jyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eURpc3BsYXkxMScsXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxuXHRcdFx0XHRcdGRlZmF1bHQ6ICcnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAncHJvcGVydHknLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnU2Vjb25kIHByb3BlcnR5Jyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eURpc3BsYXkxMicsXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxuXHRcdFx0XHRcdGRlZmF1bHQ6ICcnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAndG9nZ2xlJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1Nob3cgc2lkZS1ieS1zaWRlJyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eUxheW91dDExMTJTaWRlQnlTaWRlJyxcblx0XHRcdFx0XHRkZWZhdWx0OiBmYWxzZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2Ryb3Bkb3duJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1Bvc2l0aW9uJyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eUdyb3VwNlBvc2l0aW9uJyxcblx0XHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0XHQndG9wJzogJ1RvcCcsXG5cdFx0XHRcdFx0XHQnYm90dG9tJzogJ0JvdHRvbSdcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGRlZmF1bHQ6ICdib3R0b20nXG5cdFx0XHRcdH1cblx0XHRcdF1cblx0XHR9LFxuXHRcdC8vIFByb3BlcnR5IGdyb3VwIDdcblx0XHR7XG5cdFx0XHR0eXBlOiAnZ3JvdXAnLFxuXHRcdFx0ZGlzcGxheU5hbWU6ICdQcm9wZXJ0eSBncm91cCA3Jyxcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAncHJvcGVydHknLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnRmlyc3QgcHJvcGVydHknLFxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5RGlzcGxheTEzJyxcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdTZWNvbmQgcHJvcGVydHknLFxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5RGlzcGxheTE0Jyxcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnU2hvdyBzaWRlLWJ5LXNpZGUnLFxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5TGF5b3V0MTMxNFNpZGVCeVNpZGUnLFxuXHRcdFx0XHRcdGRlZmF1bHQ6IGZhbHNlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnZHJvcGRvd24nLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnUG9zaXRpb24nLFxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5R3JvdXA3UG9zaXRpb24nLFxuXHRcdFx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0XHRcdCd0b3AnOiAnVG9wJyxcblx0XHRcdFx0XHRcdCdib3R0b20nOiAnQm90dG9tJ1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZGVmYXVsdDogJ2JvdHRvbSdcblx0XHRcdFx0fVxuXHRcdFx0XVxuXHRcdH0sXG5cdFx0Ly8gQmVoYXZpb3IgZ3JvdXBcblx0XHR7XG5cdFx0XHR0eXBlOiAnZ3JvdXAnLFxuXHRcdFx0ZGlzcGxheU5hbWU6ICdCZWhhdmlvcicsXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3RvZ2dsZScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdPcGVuIG5ldyBub3RlcyBkaXJlY3RseScsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246ICdTa2lwIHRoZSBCYXNlcyBtb2RhbCBhbmQgY3JlYXRlIG5vdGVzIGRpcmVjdGx5IChsaWtlIHRoZSBmaWxlIGV4cGxvcmVyKS4gV2hlbiBkaXNhYmxlZCwgdXNlcyBub3JtYWwgQmFzZXMgYmVoYXZpb3Igd2l0aCB0aGUgcHJvcGVydHkgcG9wdXAuJyxcblx0XHRcdFx0XHRrZXk6ICdjdXN0b21pemVOZXdCdXR0b24nLFxuXHRcdFx0XHRcdGRlZmF1bHQ6IGZhbHNlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAndGV4dCcsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdMb2NhdGlvbiBmb3IgbmV3IG5vdGVzJyxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogJ0ZvbGRlciBwYXRoIHdoZXJlIG5ldyBub3RlcyB3aWxsIGJlIGNyZWF0ZWQuIFVzZSAvIGZvciB2YXVsdCByb290LCBvciBzcGVjaWZ5IGEgZm9sZGVyIHBhdGguIFdvcmtzIGluZGVwZW5kZW50bHkgb2YgXCJPcGVuIG5ldyBub3RlcyBkaXJlY3RseVwiLicsXG5cdFx0XHRcdFx0a2V5OiAnbmV3Tm90ZUxvY2F0aW9uJyxcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NpbXBseSB1c2UgLyBmb3IgdmF1bHQgZm9sZGVyJyxcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3RvZ2dsZScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdIaWRlIHF1aWNrIGVkaXQgaWNvbicsXG5cdFx0XHRcdFx0a2V5OiAnaGlkZVF1aWNrRWRpdEljb24nLFxuXHRcdFx0XHRcdGRlZmF1bHQ6IGZhbHNlXG5cdFx0XHRcdH1cblx0XHRcdF1cblx0XHR9XG5cdF07XG59XG5cbiIsICIvKipcclxuICogQXR0YWNobWVudCBkZXRlY3Rpb24gdXRpbGl0aWVzXHJcbiAqIERldGVjdHMgdW5pcXVlIGF0dGFjaG1lbnRzIHRoYXQgYXJlIG9ubHkgdXNlZCBieSBzcGVjaWZpYyBmaWxlcy9mb2xkZXJzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBURmlsZSwgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgZ2V0RmlsZUZyb250bWF0dGVyIH0gZnJvbSAnLi9mcm9udG1hdHRlci1oZWxwZXInO1xyXG5cclxuLyoqXHJcbiAqIEZpbmQgYWxsIGF0dGFjaG1lbnRzIGluIGEgbm90ZVxyXG4gKiBJbmNsdWRlcyBib3RoIGVtYmVkZGVkIGltYWdlcyBpbiBtYXJrZG93biBhbmQgaW1hZ2VzIHJlZmVyZW5jZWQgaW4gZnJvbnRtYXR0ZXIgcHJvcGVydGllc1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEF0dGFjaG1lbnRzSW5Ob3RlKGFwcDogQXBwLCBmaWxlOiBURmlsZSk6IFByb21pc2U8VEZpbGVbXT4ge1xyXG5cdGNvbnN0IGF0dGFjaG1lbnRzOiBURmlsZVtdID0gW107XHJcblx0Y29uc3QgY29udGVudCA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZS5wYXRoKTtcclxuXHRcclxuXHRpZiAoY29udGVudCBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHQvLyBHZXQgZW1iZWRkZWQgaW1hZ2VzIGZyb20gbWFya2Rvd24gYm9keSAob25seSB3b3JrcyBmb3IgLm1kIGZpbGVzKVxyXG5cdFx0aWYgKGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnKSB7XHJcblx0XHRcdGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGNvbnRlbnQpO1xyXG5cdFx0XHRjb25zdCBlbWJlZHMgPSBtZXRhZGF0YT8uZW1iZWRzIHx8IFtdO1xyXG5cdFx0XHRmb3IgKGNvbnN0IGVtYmVkIG9mIGVtYmVkcykge1xyXG5cdFx0XHRcdGNvbnN0IGVtYmVkRmlsZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGVtYmVkLmxpbmssIGZpbGUucGF0aCk7XHJcblx0XHRcdFx0aWYgKGVtYmVkRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRcdFx0XHRhdHRhY2htZW50cy5wdXNoKGVtYmVkRmlsZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIEdldCBpbWFnZXMgZnJvbSBmcm9udG1hdHRlciBwcm9wZXJ0aWVzICh3b3JrcyBmb3IgYm90aCAubWQgYW5kIC5tZHgpXHJcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IGF3YWl0IGdldEZpbGVGcm9udG1hdHRlcihhcHAsIGZpbGUpO1xyXG5cdFx0aWYgKGZyb250bWF0dGVyKSB7XHJcblx0XHRcdGNvbnN0IGltYWdlUHJvcGVydHlOYW1lcyA9IFsnaW1hZ2UnLCAnaW1hZ2VPRycsICdjb3ZlcicsICd0aHVtYm5haWwnXTtcclxuXHRcdFx0Y29uc3QgdmFsaWRJbWFnZUV4dGVuc2lvbnMgPSBbJ2F2aWYnLCAnYm1wJywgJ2dpZicsICdqcGVnJywgJ2pwZycsICdwbmcnLCAnc3ZnJywgJ3dlYnAnXTtcclxuXHRcdFx0XHJcblx0XHRcdGZvciAoY29uc3QgcHJvcE5hbWUgb2YgaW1hZ2VQcm9wZXJ0eU5hbWVzKSB7XHJcblx0XHRcdFx0Y29uc3QgcHJvcFZhbHVlID0gZnJvbnRtYXR0ZXJbcHJvcE5hbWVdO1xyXG5cdFx0XHRcdGlmICghcHJvcFZhbHVlKSBjb250aW51ZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBIYW5kbGUgYXJyYXkgb2YgaW1hZ2UgcGF0aHNcclxuXHRcdFx0XHRjb25zdCBpbWFnZVBhdGhzID0gQXJyYXkuaXNBcnJheShwcm9wVmFsdWUpID8gcHJvcFZhbHVlIDogW3Byb3BWYWx1ZV07XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Zm9yIChjb25zdCBpbWFnZVBhdGggb2YgaW1hZ2VQYXRocykge1xyXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBpbWFnZVBhdGggIT09ICdzdHJpbmcnKSBjb250aW51ZTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gU3RyaXAgd2lraWxpbmsgc3ludGF4IGlmIHByZXNlbnRcclxuXHRcdFx0XHRcdGNvbnN0IGNsZWFuUGF0aCA9IGltYWdlUGF0aC5yZXBsYWNlKC9eIT9cXFtcXFsoW15cXF1dKylcXF1cXF0kLywgJyQxJykudHJpbSgpO1xyXG5cdFx0XHRcdFx0aWYgKCFjbGVhblBhdGgpIGNvbnRpbnVlO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBTa2lwIGV4dGVybmFsIFVSTHNcclxuXHRcdFx0XHRcdGlmIChjbGVhblBhdGguc3RhcnRzV2l0aCgnaHR0cDovLycpIHx8IGNsZWFuUGF0aC5zdGFydHNXaXRoKCdodHRwczovLycpKSB7XHJcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBUcnkgdG8gcmVzb2x2ZSB0aGUgaW1hZ2UgZmlsZVxyXG5cdFx0XHRcdFx0bGV0IGltYWdlRmlsZTogVEZpbGUgfCBudWxsID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QoY2xlYW5QYXRoLCBmaWxlLnBhdGgpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBJZiBub3QgZm91bmQgYW5kIHBhdGggc3RhcnRzIHdpdGggLi8sIHRyeSByZXNvbHZpbmcgcmVsYXRpdmUgdG8gZmlsZSdzIGRpcmVjdG9yeVxyXG5cdFx0XHRcdFx0aWYgKCFpbWFnZUZpbGUgJiYgY2xlYW5QYXRoLnN0YXJ0c1dpdGgoJy4vJykpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgcmVsYXRpdmVQYXRoID0gY2xlYW5QYXRoLnN1YnN0cmluZygyKTtcclxuXHRcdFx0XHRcdFx0Y29uc3QgZnVsbFBhdGggPSBmaWxlLnBhcmVudD8ucGF0aCBcclxuXHRcdFx0XHRcdFx0XHQ/IGAke2ZpbGUucGFyZW50LnBhdGh9LyR7cmVsYXRpdmVQYXRofWBcclxuXHRcdFx0XHRcdFx0XHQ6IHJlbGF0aXZlUGF0aDtcclxuXHRcdFx0XHRcdFx0Y29uc3QgcmVzb2x2ZWRGaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmdWxsUGF0aCk7XHJcblx0XHRcdFx0XHRcdGlmIChyZXNvbHZlZEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdFx0XHRcdGltYWdlRmlsZSA9IHJlc29sdmVkRmlsZTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBJZiBzdGlsbCBub3QgZm91bmQsIHRyeSBhcyBhYnNvbHV0ZSBwYXRoXHJcblx0XHRcdFx0XHRpZiAoIWltYWdlRmlsZSkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBhYnNvbHV0ZUZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGNsZWFuUGF0aCk7XHJcblx0XHRcdFx0XHRcdGlmIChhYnNvbHV0ZUZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdFx0XHRcdGltYWdlRmlsZSA9IGFic29sdXRlRmlsZTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBPbmx5IGFkZCBpZiBpdCdzIGEgdmFsaWQgaW1hZ2UgZmlsZVxyXG5cdFx0XHRcdFx0aWYgKGltYWdlRmlsZSAmJiB2YWxpZEltYWdlRXh0ZW5zaW9ucy5pbmNsdWRlcyhpbWFnZUZpbGUuZXh0ZW5zaW9uKSkge1xyXG5cdFx0XHRcdFx0XHRhdHRhY2htZW50cy5wdXNoKGltYWdlRmlsZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiBhdHRhY2htZW50cztcclxufVxyXG5cclxuLyoqXHJcbiAqIEZpbmQgYWxsIGF0dGFjaG1lbnRzIGluIGEgZm9sZGVyXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXR0YWNobWVudHNJbkZvbGRlcihhcHA6IEFwcCwgZm9sZGVyOiBURm9sZGVyKTogUHJvbWlzZTxURmlsZVtdPiB7XHJcblx0Y29uc3QgYXR0YWNobWVudHM6IFRGaWxlW10gPSBbXTtcclxuXHRcclxuXHRmb3IgKGNvbnN0IGNoaWxkIG9mIGZvbGRlci5jaGlsZHJlbikge1xyXG5cdFx0aWYgKGNoaWxkIGluc3RhbmNlb2YgVEZpbGUgJiYgKGNoaWxkLmV4dGVuc2lvbiA9PT0gJ21kJyB8fCBjaGlsZC5leHRlbnNpb24gPT09ICdtZHgnKSkge1xyXG5cdFx0XHRhdHRhY2htZW50cy5wdXNoKC4uLmF3YWl0IGdldEF0dGFjaG1lbnRzSW5Ob3RlKGFwcCwgY2hpbGQpKTtcclxuXHRcdH0gZWxzZSBpZiAoY2hpbGQgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcblx0XHRcdGF0dGFjaG1lbnRzLnB1c2goLi4uYXdhaXQgZ2V0QXR0YWNobWVudHNJbkZvbGRlcihhcHAsIGNoaWxkKSk7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiBhdHRhY2htZW50cztcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGFuIGF0dGFjaG1lbnQgaXMgdXNlZCBpbiBvdGhlciBub3Rlc1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGlzQXR0YWNobWVudFVzZWRJbk90aGVyTm90ZXMoXHJcblx0YXBwOiBBcHAsXHJcblx0YXR0YWNobWVudDogVEZpbGUsXHJcblx0ZXhjbHVkZWROb3RlOiBURmlsZSxcclxuXHRleGNsdWRlZEZvbGRlcj86IFRGb2xkZXJcclxuKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0Y29uc3QgYWxsTm90ZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcihcclxuXHRcdGZpbGUgPT4gZmlsZS5wYXRoICE9PSBleGNsdWRlZE5vdGUucGF0aFxyXG5cdCk7XHJcblx0XHJcblx0Y29uc3QgYXR0YWNobWVudFBhdGggPSBhdHRhY2htZW50LnBhdGg7XHJcblx0Y29uc3QgYXR0YWNobWVudE5hbWUgPSBhdHRhY2htZW50Lm5hbWU7XHJcblx0Y29uc3QgYXR0YWNobWVudEJhc2VuYW1lID0gYXR0YWNobWVudC5iYXNlbmFtZTtcclxuXHRcclxuXHRmb3IgKGNvbnN0IG5vdGUgb2YgYWxsTm90ZXMpIHtcclxuXHRcdC8vIFNraXAgbm90ZXMgaW4gZXhjbHVkZWQgZm9sZGVyXHJcblx0XHRpZiAoZXhjbHVkZWRGb2xkZXIgJiYgbm90ZS5wYXRoLnN0YXJ0c1dpdGgoZXhjbHVkZWRGb2xkZXIucGF0aCArICcvJykpIHtcclxuXHRcdFx0Y29udGludWU7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChub3RlKTtcclxuXHRcdFxyXG5cdFx0Ly8gQ2hlY2sgZm9yIHZhcmlvdXMgcmVmZXJlbmNlIHBhdHRlcm5zXHJcblx0XHRpZiAoXHJcblx0XHRcdGNvbnRlbnQuaW5jbHVkZXMoYXR0YWNobWVudFBhdGgpIHx8XHJcblx0XHRcdGNvbnRlbnQuaW5jbHVkZXMoYXR0YWNobWVudE5hbWUpIHx8XHJcblx0XHRcdGNvbnRlbnQuaW5jbHVkZXMoYXR0YWNobWVudEJhc2VuYW1lKSB8fFxyXG5cdFx0XHRjb250ZW50LmluY2x1ZGVzKGAhW1ske2F0dGFjaG1lbnROYW1lfV1dYCkgfHxcclxuXHRcdFx0Y29udGVudC5pbmNsdWRlcyhgW1ske2F0dGFjaG1lbnROYW1lfV1dYCkgfHxcclxuXHRcdFx0Y29udGVudC5pbmNsdWRlcyhgKCR7YXR0YWNobWVudE5hbWV9KWApIHx8XHJcblx0XHRcdGNvbnRlbnQuaW5jbHVkZXMoYCgke2F0dGFjaG1lbnRQYXRofSlgKVxyXG5cdFx0KSB7XHJcblx0XHRcdHJldHVybiB0cnVlOyAvLyBBdHRhY2htZW50IGlzIHVzZWQgZWxzZXdoZXJlXHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiBmYWxzZTsgLy8gQXR0YWNobWVudCBpcyB1bmlxdWUgdG8gZGVsZXRlZCBub3RlL2ZvbGRlclxyXG59XHJcblxyXG4vKipcclxuICogRmluZCB1bmlxdWUgYXR0YWNobWVudHMgZm9yIGEgbm90ZS9mb2xkZXJcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaW5kVW5pcXVlQXR0YWNobWVudHMoXHJcblx0YXBwOiBBcHAsXHJcblx0ZGVsZXRlZE5vdGU6IFRGaWxlLFxyXG5cdGRlbGV0ZWRGb2xkZXI/OiBURm9sZGVyXHJcbik6IFByb21pc2U8VEZpbGVbXT4ge1xyXG5cdC8vIEdldCBhbGwgYXR0YWNobWVudHMgaW4gZGVsZXRlZCBub3RlL2ZvbGRlclxyXG5cdGNvbnN0IGF0dGFjaG1lbnRzOiBURmlsZVtdID0gW107XHJcblx0XHJcblx0YXR0YWNobWVudHMucHVzaCguLi5hd2FpdCBnZXRBdHRhY2htZW50c0luTm90ZShhcHAsIGRlbGV0ZWROb3RlKSk7XHJcblx0XHJcblx0aWYgKGRlbGV0ZWRGb2xkZXIpIHtcclxuXHRcdGF0dGFjaG1lbnRzLnB1c2goLi4uYXdhaXQgZ2V0QXR0YWNobWVudHNJbkZvbGRlcihhcHAsIGRlbGV0ZWRGb2xkZXIpKTtcclxuXHR9XHJcblx0XHJcblx0Ly8gUmVtb3ZlIGR1cGxpY2F0ZXNcclxuXHRjb25zdCB1bmlxdWVBdHRhY2htZW50cyA9IEFycmF5LmZyb20obmV3IFNldChhdHRhY2htZW50cy5tYXAoYSA9PiBhLnBhdGgpKSlcclxuXHRcdC5tYXAocGF0aCA9PiBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpKVxyXG5cdFx0LmZpbHRlcigoZmlsZSk6IGZpbGUgaXMgVEZpbGUgPT4gZmlsZSBpbnN0YW5jZW9mIFRGaWxlKTtcclxuXHRcclxuXHQvLyBDaGVjayBlYWNoIGF0dGFjaG1lbnQgYWdhaW5zdCBhbGwgb3RoZXIgbm90ZXNcclxuXHRjb25zdCByZXN1bHQ6IFRGaWxlW10gPSBbXTtcclxuXHRcclxuXHRmb3IgKGNvbnN0IGF0dGFjaG1lbnQgb2YgdW5pcXVlQXR0YWNobWVudHMpIHtcclxuXHRcdGNvbnN0IGlzVXNlZEVsc2V3aGVyZSA9IGF3YWl0IGlzQXR0YWNobWVudFVzZWRJbk90aGVyTm90ZXMoXHJcblx0XHRcdGFwcCxcclxuXHRcdFx0YXR0YWNobWVudCxcclxuXHRcdFx0ZGVsZXRlZE5vdGUsXHJcblx0XHRcdGRlbGV0ZWRGb2xkZXJcclxuXHRcdCk7XHJcblx0XHRcclxuXHRcdGlmICghaXNVc2VkRWxzZXdoZXJlKSB7XHJcblx0XHRcdHJlc3VsdC5wdXNoKGF0dGFjaG1lbnQpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5cclxuIiwgIi8qKlxyXG4gKiBTbWFydCBkZWxldGlvbiB1dGlsaXRpZXNcclxuICogSGFuZGxlcyBmb2xkZXItYmFzZWQgY29udGVudCBkZWxldGlvbiBhbmQgdW5pcXVlIGF0dGFjaG1lbnQgZGV0ZWN0aW9uXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBURmlsZSwgVEZvbGRlciwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBCYXNlc0NNU1NldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBmaW5kVW5pcXVlQXR0YWNobWVudHMgfSBmcm9tICcuL2F0dGFjaG1lbnQtZGV0ZWN0aW9uJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGVsZXRpb25QcmV2aWV3IHtcclxuXHRmaWxlc1RvRGVsZXRlOiBURmlsZVtdO1xyXG5cdGZvbGRlcnNUb0RlbGV0ZTogVEZvbGRlcltdO1xyXG5cdGF0dGFjaG1lbnRzVG9EZWxldGU6IFRGaWxlW107XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGZpbGUgaXMgZm9sZGVyLWJhc2VkIGNvbnRlbnRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0ZvbGRlckJhc2VkQ29udGVudChmaWxlOiBURmlsZSwgY29uZmlnOiBCYXNlc0NNU1NldHRpbmdzKTogYm9vbGVhbiB7XHJcblx0Y29uc3QgY29uZmlndXJlZEZpbGVuYW1lID0gY29uZmlnLmRlbGV0ZVBhcmVudEZvbGRlckZpbGVuYW1lIHx8ICdpbmRleCc7XHJcblx0cmV0dXJuIGZpbGUuYmFzZW5hbWUgPT09IGNvbmZpZ3VyZWRGaWxlbmFtZSAmJiBmaWxlLnBhcmVudCAhPT0gbnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIHNob3VsZCBkZWxldGUgcGFyZW50IGZvbGRlclxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZERlbGV0ZVBhcmVudEZvbGRlcihmaWxlOiBURmlsZSwgY29uZmlnOiBCYXNlc0NNU1NldHRpbmdzKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIGNvbmZpZy5kZWxldGVQYXJlbnRGb2xkZXIgJiYgaXNGb2xkZXJCYXNlZENvbnRlbnQoZmlsZSwgY29uZmlnKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFByZXBhcmUgZGVsZXRpb24gcHJldmlld1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByZXBhcmVEZWxldGlvblByZXZpZXcoXHJcblx0YXBwOiBBcHAsXHJcblx0ZmlsZXM6IHN0cmluZ1tdLFxyXG5cdGNvbmZpZzogQmFzZXNDTVNTZXR0aW5nc1xyXG4pOiBQcm9taXNlPERlbGV0aW9uUHJldmlldz4ge1xyXG5cdGNvbnN0IGZpbGVzVG9EZWxldGU6IFRGaWxlW10gPSBbXTtcclxuXHRjb25zdCBmb2xkZXJzVG9EZWxldGU6IFRGb2xkZXJbXSA9IFtdO1xyXG5cdGNvbnN0IGF0dGFjaG1lbnRzVG9EZWxldGU6IFRGaWxlW10gPSBbXTtcclxuXHRcclxuXHRmb3IgKGNvbnN0IGZpbGVQYXRoIG9mIGZpbGVzKSB7XHJcblx0XHRjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XHJcblx0XHRpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSBjb250aW51ZTtcclxuXHRcdFxyXG5cdFx0Ly8gQ2hlY2sgaWYgc2hvdWxkIGRlbGV0ZSBwYXJlbnQgZm9sZGVyXHJcblx0XHRpZiAoc2hvdWxkRGVsZXRlUGFyZW50Rm9sZGVyKGZpbGUsIGNvbmZpZykpIHtcclxuXHRcdFx0Y29uc3QgcGFyZW50Rm9sZGVyID0gZmlsZS5wYXJlbnQ7XHJcblx0XHRcdGlmIChwYXJlbnRGb2xkZXIgJiYgIWZvbGRlcnNUb0RlbGV0ZS5pbmNsdWRlcyhwYXJlbnRGb2xkZXIpKSB7XHJcblx0XHRcdFx0Zm9sZGVyc1RvRGVsZXRlLnB1c2gocGFyZW50Rm9sZGVyKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBHZXQgYWxsIGZpbGVzIGluIGZvbGRlciBmb3IgZGVsZXRpb25cclxuXHRcdFx0XHRjb25zdCBmb2xkZXJGaWxlcyA9IHBhcmVudEZvbGRlci5jaGlsZHJlbi5maWx0ZXIoXHJcblx0XHRcdFx0XHQoY2hpbGQpOiBjaGlsZCBpcyBURmlsZSA9PiBjaGlsZCBpbnN0YW5jZW9mIFRGaWxlXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0XHRmaWxlc1RvRGVsZXRlLnB1c2goLi4uZm9sZGVyRmlsZXMpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRmaWxlc1RvRGVsZXRlLnB1c2goZmlsZSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIEZpbmQgdW5pcXVlIGF0dGFjaG1lbnRzIGlmIHNldHRpbmcgZW5hYmxlZFxyXG5cdFx0aWYgKGNvbmZpZy5kZWxldGVVbmlxdWVBdHRhY2htZW50cykge1xyXG5cdFx0XHRjb25zdCBwYXJlbnRGb2xkZXIgPSBzaG91bGREZWxldGVQYXJlbnRGb2xkZXIoZmlsZSwgY29uZmlnKSBcclxuXHRcdFx0XHQ/IChmaWxlLnBhcmVudCB8fCB1bmRlZmluZWQpXHJcblx0XHRcdFx0OiB1bmRlZmluZWQ7XHJcblx0XHRcdGNvbnN0IHVuaXF1ZUF0dGFjaG1lbnRzID0gYXdhaXQgZmluZFVuaXF1ZUF0dGFjaG1lbnRzKFxyXG5cdFx0XHRcdGFwcCxcclxuXHRcdFx0XHRmaWxlLFxyXG5cdFx0XHRcdHBhcmVudEZvbGRlclxyXG5cdFx0XHQpO1xyXG5cdFx0XHRhdHRhY2htZW50c1RvRGVsZXRlLnB1c2goLi4udW5pcXVlQXR0YWNobWVudHMpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBSZW1vdmUgZHVwbGljYXRlc1xyXG5cdGNvbnN0IHVuaXF1ZUZpbGVzID0gQXJyYXkuZnJvbShuZXcgU2V0KGZpbGVzVG9EZWxldGUubWFwKGYgPT4gZi5wYXRoKSkpXHJcblx0XHQubWFwKHBhdGggPT4gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKSlcclxuXHRcdC5maWx0ZXIoKGZpbGUpOiBmaWxlIGlzIFRGaWxlID0+IGZpbGUgaW5zdGFuY2VvZiBURmlsZSk7XHJcblx0XHJcblx0Y29uc3QgdW5pcXVlQXR0YWNobWVudHMgPSBBcnJheS5mcm9tKG5ldyBTZXQoYXR0YWNobWVudHNUb0RlbGV0ZS5tYXAoYSA9PiBhLnBhdGgpKSlcclxuXHRcdC5tYXAocGF0aCA9PiBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpKVxyXG5cdFx0LmZpbHRlcigoZmlsZSk6IGZpbGUgaXMgVEZpbGUgPT4gZmlsZSBpbnN0YW5jZW9mIFRGaWxlKTtcclxuXHRcclxuXHRyZXR1cm4ge1xyXG5cdFx0ZmlsZXNUb0RlbGV0ZTogdW5pcXVlRmlsZXMsXHJcblx0XHRmb2xkZXJzVG9EZWxldGU6IEFycmF5LmZyb20obmV3IFNldChmb2xkZXJzVG9EZWxldGUpKSxcclxuXHRcdGF0dGFjaG1lbnRzVG9EZWxldGU6IHVuaXF1ZUF0dGFjaG1lbnRzLFxyXG5cdH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFeGVjdXRlIHNtYXJ0IGRlbGV0aW9uXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZVNtYXJ0RGVsZXRpb24oXHJcblx0YXBwOiBBcHAsXHJcblx0cHJldmlldzogRGVsZXRpb25QcmV2aWV3XHJcbik6IFByb21pc2U8dm9pZD4ge1xyXG5cdGxldCBkZWxldGVkQ291bnQgPSAwO1xyXG5cdGxldCBlcnJvckNvdW50ID0gMDtcclxuXHRcclxuXHQvLyBEZWxldGUgZmlsZXNcclxuXHRmb3IgKGNvbnN0IGZpbGUgb2YgcHJldmlldy5maWxlc1RvRGVsZXRlKSB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRhd2FpdCBhcHAuZmlsZU1hbmFnZXIudHJhc2hGaWxlKGZpbGUpO1xyXG5cdFx0XHRkZWxldGVkQ291bnQrKztcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoYEVycm9yIGRlbGV0aW5nIGZpbGUgJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcclxuXHRcdFx0ZXJyb3JDb3VudCsrO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBEZWxldGUgYXR0YWNobWVudHNcclxuXHRmb3IgKGNvbnN0IGF0dGFjaG1lbnQgb2YgcHJldmlldy5hdHRhY2htZW50c1RvRGVsZXRlKSB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRhd2FpdCBhcHAuZmlsZU1hbmFnZXIudHJhc2hGaWxlKGF0dGFjaG1lbnQpO1xyXG5cdFx0XHRkZWxldGVkQ291bnQrKztcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoYEVycm9yIGRlbGV0aW5nIGF0dGFjaG1lbnQgJHthdHRhY2htZW50LnBhdGh9OmAsIGVycm9yKTtcclxuXHRcdFx0ZXJyb3JDb3VudCsrO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBEZWxldGUgZm9sZGVycyAocmVjdXJzaXZlKVxyXG5cdGZvciAoY29uc3QgZm9sZGVyIG9mIHByZXZpZXcuZm9sZGVyc1RvRGVsZXRlKSB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRhd2FpdCBhcHAuZmlsZU1hbmFnZXIudHJhc2hGaWxlKGZvbGRlcik7XHJcblx0XHRcdGRlbGV0ZWRDb3VudCsrO1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihgRXJyb3IgZGVsZXRpbmcgZm9sZGVyICR7Zm9sZGVyLnBhdGh9OmAsIGVycm9yKTtcclxuXHRcdFx0ZXJyb3JDb3VudCsrO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRpZiAoZXJyb3JDb3VudCA+IDApIHtcclxuXHRcdG5ldyBOb3RpY2UoYERlbGV0ZWQgJHtkZWxldGVkQ291bnR9IGl0ZW1zLCAke2Vycm9yQ291bnR9IGVycm9ycyBvY2N1cnJlZGApO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRuZXcgTm90aWNlKGBTdWNjZXNzZnVsbHkgZGVsZXRlZCAke2RlbGV0ZWRDb3VudH0gaXRlbSR7ZGVsZXRlZENvdW50ICE9PSAxID8gJ3MnIDogJyd9YCk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuIiwgIi8qKlxyXG4gKiBEZWxldGlvbiBQcmV2aWV3IE1vZGFsXHJcbiAqIFNob3dzIHByZXZpZXcgb2Ygd2hhdCB3aWxsIGJlIGRlbGV0ZWQgYmVmb3JlIGNvbmZpcm1hdGlvblxyXG4gKi9cclxuXHJcbmltcG9ydCB7IE1vZGFsLCBBcHAsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IERlbGV0aW9uUHJldmlldyB9IGZyb20gJy4uL3V0aWxzL3NtYXJ0LWRlbGV0aW9uJztcclxuaW1wb3J0IHsgZXhlY3V0ZVNtYXJ0RGVsZXRpb24gfSBmcm9tICcuLi91dGlscy9zbWFydC1kZWxldGlvbic7XHJcblxyXG5leHBvcnQgY2xhc3MgRGVsZXRpb25QcmV2aWV3TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcblx0cHJpdmF0ZSBwcmV2aWV3OiBEZWxldGlvblByZXZpZXc7XHJcblx0cHJpdmF0ZSBvbkNvbmZpcm06ICgpID0+IHZvaWQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwcmV2aWV3OiBEZWxldGlvblByZXZpZXcsIG9uQ29uZmlybTogKCkgPT4gdm9pZCkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMucHJldmlldyA9IHByZXZpZXc7XHJcblx0XHR0aGlzLm9uQ29uZmlybSA9IG9uQ29uZmlybTtcclxuXHR9XHJcblxyXG5cdG9uT3BlbigpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKS5zZXROYW1lKCdDb25maXJtIGRlbGV0aW9uJykuc2V0SGVhZGluZygpO1xyXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyBcclxuXHRcdFx0dGV4dDogJ1RoZSBmb2xsb3dpbmcgaXRlbXMgd2lsbCBiZSBkZWxldGVkOicsXHJcblx0XHRcdGNsczogJ2Jhc2VzLWNtcy1kZWxldGlvbi13YXJuaW5nJ1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gRmlsZXMgdG8gZGVsZXRlXHJcblx0XHRpZiAodGhpcy5wcmV2aWV3LmZpbGVzVG9EZWxldGUubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiBgRmlsZXMgKCR7dGhpcy5wcmV2aWV3LmZpbGVzVG9EZWxldGUubGVuZ3RofSlgIH0pO1xyXG5cdFx0XHRjb25zdCBmaWxlc0xpc3QgPSBjb250ZW50RWwuY3JlYXRlRWwoJ3VsJywgeyBjbHM6ICdiYXNlcy1jbXMtZGVsZXRpb24tbGlzdCcgfSk7XHJcblx0XHRcdGZvciAoY29uc3QgZmlsZSBvZiB0aGlzLnByZXZpZXcuZmlsZXNUb0RlbGV0ZS5zbGljZSgwLCAyMCkpIHtcclxuXHRcdFx0XHRjb25zdCBsaSA9IGZpbGVzTGlzdC5jcmVhdGVFbCgnbGknKTtcclxuXHRcdFx0XHRsaS5zZXRUZXh0KGZpbGUucGF0aCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHRoaXMucHJldmlldy5maWxlc1RvRGVsZXRlLmxlbmd0aCA+IDIwKSB7XHJcblx0XHRcdFx0ZmlsZXNMaXN0LmNyZWF0ZUVsKCdsaScsIHsgXHJcblx0XHRcdFx0XHR0ZXh0OiBgLi4uIGFuZCAke3RoaXMucHJldmlldy5maWxlc1RvRGVsZXRlLmxlbmd0aCAtIDIwfSBtb3JlIGZpbGVzYFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRm9sZGVycyB0byBkZWxldGVcclxuXHRcdGlmICh0aGlzLnByZXZpZXcuZm9sZGVyc1RvRGVsZXRlLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0Y29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogYEZvbGRlcnMgKCR7dGhpcy5wcmV2aWV3LmZvbGRlcnNUb0RlbGV0ZS5sZW5ndGh9KWAgfSk7XHJcblx0XHRcdGNvbnN0IGZvbGRlcnNMaXN0ID0gY29udGVudEVsLmNyZWF0ZUVsKCd1bCcsIHsgY2xzOiAnYmFzZXMtY21zLWRlbGV0aW9uLWxpc3QnIH0pO1xyXG5cdFx0XHRmb3IgKGNvbnN0IGZvbGRlciBvZiB0aGlzLnByZXZpZXcuZm9sZGVyc1RvRGVsZXRlKSB7XHJcblx0XHRcdFx0Y29uc3QgbGkgPSBmb2xkZXJzTGlzdC5jcmVhdGVFbCgnbGknKTtcclxuXHRcdFx0XHRsaS5zZXRUZXh0KGZvbGRlci5wYXRoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEF0dGFjaG1lbnRzIHRvIGRlbGV0ZVxyXG5cdFx0aWYgKHRoaXMucHJldmlldy5hdHRhY2htZW50c1RvRGVsZXRlLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0Y29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogYEF0dGFjaG1lbnRzICgke3RoaXMucHJldmlldy5hdHRhY2htZW50c1RvRGVsZXRlLmxlbmd0aH0pYCB9KTtcclxuXHRcdFx0Y29uc3QgYXR0YWNobWVudHNMaXN0ID0gY29udGVudEVsLmNyZWF0ZUVsKCd1bCcsIHsgY2xzOiAnYmFzZXMtY21zLWRlbGV0aW9uLWxpc3QnIH0pO1xyXG5cdFx0XHRmb3IgKGNvbnN0IGF0dGFjaG1lbnQgb2YgdGhpcy5wcmV2aWV3LmF0dGFjaG1lbnRzVG9EZWxldGUuc2xpY2UoMCwgMjApKSB7XHJcblx0XHRcdFx0Y29uc3QgbGkgPSBhdHRhY2htZW50c0xpc3QuY3JlYXRlRWwoJ2xpJyk7XHJcblx0XHRcdFx0bGkuc2V0VGV4dChhdHRhY2htZW50LnBhdGgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0aGlzLnByZXZpZXcuYXR0YWNobWVudHNUb0RlbGV0ZS5sZW5ndGggPiAyMCkge1xyXG5cdFx0XHRcdGF0dGFjaG1lbnRzTGlzdC5jcmVhdGVFbCgnbGknLCB7IFxyXG5cdFx0XHRcdFx0dGV4dDogYC4uLiBhbmQgJHt0aGlzLnByZXZpZXcuYXR0YWNobWVudHNUb0RlbGV0ZS5sZW5ndGggLSAyMH0gbW9yZSBhdHRhY2htZW50c2BcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFdhcm5pbmdcclxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHtcclxuXHRcdFx0dGV4dDogJ1RoaXMgYWN0aW9uIGNhbm5vdCBiZSB1bmRvbmUuJyxcclxuXHRcdFx0Y2xzOiAnYmFzZXMtY21zLWRlbGV0aW9uLXdhcm5pbmcnXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBCdXR0b25zXHJcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XHJcblx0XHRidXR0b25Db250YWluZXIuYWRkQ2xhc3MoJ2Jhc2VzLWNtcy1tb2RhbC1idXR0b24tY29udGFpbmVyJyk7XHJcblxyXG5cdFx0Y29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nKTtcclxuXHRcdGNhbmNlbEJ0bi5zZXRUZXh0KCdDYW5jZWwnKTtcclxuXHRcdGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcblxyXG5cdFx0Y29uc3QgZGVsZXRlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nKTtcclxuXHRcdGRlbGV0ZUJ0bi5zZXRUZXh0KCdEZWxldGUnKTtcclxuXHRcdGRlbGV0ZUJ0bi5hZGRDbGFzcygnbW9kLWN0YScpO1xyXG5cdFx0ZGVsZXRlQnRuLmFkZENsYXNzKCdkZXN0cnVjdGl2ZScpO1xyXG5cdFx0ZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0YXdhaXQgZXhlY3V0ZVNtYXJ0RGVsZXRpb24odGhpcy5hcHAsIHRoaXMucHJldmlldyk7XHJcblx0XHRcdFx0dGhpcy5vbkNvbmZpcm0oKTtcclxuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdH0pKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdH1cclxufVxyXG5cclxuXHJcbiIsICJpbXBvcnQgeyBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEJhc2VzQ01TU2V0dGluZ1RhYiB9IGZyb20gJy4vc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBCYXNlc0NNU1ZpZXcgfSBmcm9tICcuL3ZpZXdzL2Ntcy12aWV3JztcclxuaW1wb3J0IHsgQmFzZXNDTVNTZXR0aW5ncywgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gJy4vdHlwZXMnO1xyXG5pbXBvcnQgeyByZWdpc3RlckJhc2VzQ01TVmlldyB9IGZyb20gJy4vdXRpbHMvdmlldy1yZWdpc3RyYXRpb24nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFzZXNDTVNQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdHNldHRpbmdzITogQmFzZXNDTVNTZXR0aW5ncztcclxuXHRhY3RpdmVWaWV3czogU2V0PEJhc2VzQ01TVmlldz4gPSBuZXcgU2V0KCk7XHJcblx0cmVnaXN0cmF0aW9uVGltZW91dDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XHJcblx0cHJpdmF0ZSByZWZyZXNoRW1iZWRkZWRWaWV3c1RpbWVvdXQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuXHRcdC8vIFJlZ2lzdGVyIHNldHRpbmdzIHRhYlxyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBCYXNlc0NNU1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHJcblx0XHQvLyBSZWdpc3RlciBDTVMgdmlldyB3aXRoIEJhc2UgcGx1Z2luXHJcblx0XHQvLyBHcmFjZWZ1bCBkZWdyYWRhdGlvbjogaWYgQmFzZSBwbHVnaW4gbm90IGluc3RhbGxlZCwgdGhpcyB3aWxsIHNpbXBseSBkbyBub3RoaW5nXHJcblx0XHQvLyBPbiBtb2JpbGUsIEJhc2VzIHBsdWdpbiBtYXkgbm90IGJlIGxvYWRlZCB5ZXQsIHNvIHdlIHdhaXQgYSBiaXRcclxuXHRcdHJlZ2lzdGVyQmFzZXNDTVNWaWV3KHRoaXMpO1xyXG5cclxuXHRcdC8vIExpc3RlbiBmb3IgYWN0aXZlIGZpbGUgY2hhbmdlcyB0byByZWZyZXNoIGVtYmVkZGVkIHZpZXdzXHJcblx0XHQvLyBUaGlzIGVuc3VyZXMgZW1iZWRkZWQgdmlld3MgdXBkYXRlIHdoZW4gdGhlIGFjdGl2ZSBmaWxlIGNoYW5nZXMgKGZvciBkeW5hbWljIGZpbHRlcnMgdXNpbmcgdGhpcy5maWxlKVxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2FjdGl2ZS1sZWFmLWNoYW5nZScsICgpID0+IHtcclxuXHRcdFx0XHR0aGlzLnJlZnJlc2hFbWJlZGRlZFZpZXdzKCk7XHJcblx0XHRcdH0pXHJcblx0XHQpO1xyXG5cclxuXHRcdC8vIEFsc28gbGlzdGVuIGZvciBmaWxlLW9wZW4gZXZlbnRzIGFzIGEgYmFja3VwXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZS1vcGVuJywgKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMucmVmcmVzaEVtYmVkZGVkVmlld3MoKTtcclxuXHRcdFx0fSlcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHRvbnVubG9hZCgpIHtcclxuXHRcdC8vIENsZWFyIGFueSBwZW5kaW5nIHJlZ2lzdHJhdGlvbiB0aW1lb3V0XHJcblx0XHRpZiAodGhpcy5yZWdpc3RyYXRpb25UaW1lb3V0ICE9PSBudWxsKSB7XHJcblx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5yZWdpc3RyYXRpb25UaW1lb3V0KTtcclxuXHRcdFx0dGhpcy5yZWdpc3RyYXRpb25UaW1lb3V0ID0gbnVsbDtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDbGVhciBhbnkgcGVuZGluZyBlbWJlZGRlZCB2aWV3IHJlZnJlc2ggdGltZW91dFxyXG5cdFx0aWYgKHRoaXMucmVmcmVzaEVtYmVkZGVkVmlld3NUaW1lb3V0ICE9PSBudWxsKSB7XHJcblx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5yZWZyZXNoRW1iZWRkZWRWaWV3c1RpbWVvdXQpO1xyXG5cdFx0XHR0aGlzLnJlZnJlc2hFbWJlZGRlZFZpZXdzVGltZW91dCA9IG51bGw7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIENsZWFuIHVwIGFjdGl2ZSB2aWV3c1xyXG5cdFx0dGhpcy5hY3RpdmVWaWV3cy5jbGVhcigpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKSBhcyBQYXJ0aWFsPEJhc2VzQ01TU2V0dGluZ3M+O1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGRhdGEpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlZnJlc2ggdG9vbGJhcnMgaW4gYWxsIGFjdGl2ZSBDTVMgdmlld3NcclxuXHQgKi9cclxuXHRyZWZyZXNoQWxsVG9vbGJhcnMoKTogdm9pZCB7XHJcblx0XHQvLyBDbGVhbiB1cCBhbnkgdmlld3MgdGhhdCBhcmUgbm8gbG9uZ2VyIGFjdGl2ZVxyXG5cdFx0Y29uc3Qgdmlld3NUb1JlbW92ZTogQmFzZXNDTVNWaWV3W10gPSBbXTtcclxuXHRcdHRoaXMuYWN0aXZlVmlld3MuZm9yRWFjaCh2aWV3ID0+IHtcclxuXHRcdFx0Ly8gQ2hlY2sgaWYgdmlldyBpcyBzdGlsbCBpbiBET01cclxuXHRcdFx0Y29uc3QgY29udGFpbmVyRWwgPSAodmlldyBhcyB1bmtub3duIGFzIHsgY29udGFpbmVyRWw/OiBIVE1MRWxlbWVudCB9KS5jb250YWluZXJFbDtcclxuXHRcdFx0aWYgKCFjb250YWluZXJFbCB8fCAhY29udGFpbmVyRWwucGFyZW50RWxlbWVudCkge1xyXG5cdFx0XHRcdHZpZXdzVG9SZW1vdmUucHVzaCh2aWV3KTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdC8vIFJlbW92ZSBpbmFjdGl2ZSB2aWV3c1xyXG5cdFx0dmlld3NUb1JlbW92ZS5mb3JFYWNoKHZpZXcgPT4gdGhpcy5hY3RpdmVWaWV3cy5kZWxldGUodmlldykpO1xyXG5cdFx0XHJcblx0XHQvLyBSZWZyZXNoIGFsbCBhY3RpdmUgdmlld3NcclxuXHRcdHRoaXMuYWN0aXZlVmlld3MuZm9yRWFjaCh2aWV3ID0+IHtcclxuXHRcdFx0aWYgKHZpZXcgJiYgdHlwZW9mIHZpZXcucmVmcmVzaFRvb2xiYXIgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHR2aWV3LnJlZnJlc2hUb29sYmFyKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVtb3ZlIGEgdmlldyBmcm9tIHRyYWNraW5nIHdoZW4gaXQncyBjbG9zZWRcclxuXHQgKi9cclxuXHRyZW1vdmVWaWV3KHZpZXc6IEJhc2VzQ01TVmlldyk6IHZvaWQge1xyXG5cdFx0dGhpcy5hY3RpdmVWaWV3cy5kZWxldGUodmlldyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZWZyZXNoIGFsbCBlbWJlZGRlZCBDTVMgdmlld3Mgd2hlbiB0aGUgYWN0aXZlIGZpbGUgY2hhbmdlc1xyXG5cdCAqIFRoaXMgZW5zdXJlcyBlbWJlZGRlZCB2aWV3cyB1cGRhdGUgdGhlaXIgZmlsdGVycyB3aGVuIHVzaW5nIHRoaXMuZmlsZSBwcm9wZXJ0aWVzXHJcblx0ICogRGVib3VuY2VkIHRvIGF2b2lkIGV4Y2Vzc2l2ZSByZWZyZXNoZXMgd2hlbiBzd2l0Y2hpbmcgZmlsZXMgcXVpY2tseVxyXG5cdCAqL1xyXG5cdHJlZnJlc2hFbWJlZGRlZFZpZXdzKCk6IHZvaWQge1xyXG5cdFx0Ly8gRGVib3VuY2UgdG8gYXZvaWQgZXhjZXNzaXZlIHJlZnJlc2hlcyB3aGVuIHN3aXRjaGluZyBmaWxlcyBxdWlja2x5XHJcblx0XHRpZiAodGhpcy5yZWZyZXNoRW1iZWRkZWRWaWV3c1RpbWVvdXQgIT09IG51bGwpIHtcclxuXHRcdFx0d2luZG93LmNsZWFyVGltZW91dCh0aGlzLnJlZnJlc2hFbWJlZGRlZFZpZXdzVGltZW91dCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5yZWZyZXNoRW1iZWRkZWRWaWV3c1RpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdHRoaXMucmVmcmVzaEVtYmVkZGVkVmlld3NUaW1lb3V0ID0gbnVsbDtcclxuXHJcblx0XHRcdC8vIENsZWFuIHVwIGFueSB2aWV3cyB0aGF0IGFyZSBubyBsb25nZXIgYWN0aXZlXHJcblx0XHRcdGNvbnN0IHZpZXdzVG9SZW1vdmU6IEJhc2VzQ01TVmlld1tdID0gW107XHJcblx0XHRcdHRoaXMuYWN0aXZlVmlld3MuZm9yRWFjaCh2aWV3ID0+IHtcclxuXHRcdFx0XHQvLyBDaGVjayBpZiB2aWV3IGlzIHN0aWxsIGluIERPTVxyXG5cdFx0XHRcdGNvbnN0IGNvbnRhaW5lckVsID0gKHZpZXcgYXMgdW5rbm93biBhcyB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfSkuY29udGFpbmVyRWw7XHJcblx0XHRcdFx0aWYgKCFjb250YWluZXJFbCB8fCAhY29udGFpbmVyRWwucGFyZW50RWxlbWVudCkge1xyXG5cdFx0XHRcdFx0dmlld3NUb1JlbW92ZS5wdXNoKHZpZXcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBSZW1vdmUgaW5hY3RpdmUgdmlld3NcclxuXHRcdFx0dmlld3NUb1JlbW92ZS5mb3JFYWNoKHZpZXcgPT4gdGhpcy5hY3RpdmVWaWV3cy5kZWxldGUodmlldykpO1xyXG5cclxuXHRcdFx0Ly8gUmVmcmVzaCBhbGwgZW1iZWRkZWQgdmlld3NcclxuXHRcdFx0bGV0IHJlZnJlc2hlZENvdW50ID0gMDtcclxuXHRcdFx0dGhpcy5hY3RpdmVWaWV3cy5mb3JFYWNoKHZpZXcgPT4ge1xyXG5cdFx0XHRcdC8vIE9ubHkgcmVmcmVzaCBlbWJlZGRlZCB2aWV3c1xyXG5cdFx0XHRcdGlmICh2aWV3LmlzRW1iZWRkZWQpIHtcclxuXHRcdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIHZpZXcgaXMgc3RpbGwgY29ubmVjdGVkIHRvIERPTVxyXG5cdFx0XHRcdFx0XHRjb25zdCBjb250YWluZXJFbCA9ICh2aWV3IGFzIHVua25vd24gYXMgeyBjb250YWluZXJFbD86IEhUTUxFbGVtZW50IH0pLmNvbnRhaW5lckVsO1xyXG5cdFx0XHRcdFx0XHRpZiAoY29udGFpbmVyRWwgJiYgY29udGFpbmVyRWwuaXNDb25uZWN0ZWQpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBUcmlnZ2VyIHJlZnJlc2ggYnkgY2FsbGluZyBvbkRhdGFVcGRhdGVkXHJcblx0XHRcdFx0XHRcdFx0Ly8gVGhlIEJhc2VzIHBsdWdpbiB3aWxsIHJlLWV2YWx1YXRlIGZpbHRlcnMgd2l0aCB0aGUgbmV3IHRoaXMuZmlsZSBjb250ZXh0XHJcblx0XHRcdFx0XHRcdFx0aWYgKHR5cGVvZiAodmlldyBhcyB7IG9uRGF0YVVwZGF0ZWQ/OiAoKSA9PiB2b2lkIH0pLm9uRGF0YVVwZGF0ZWQgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRcdFx0XHRcdCh2aWV3IGFzIHsgb25EYXRhVXBkYXRlZDogKCkgPT4gdm9pZCB9KS5vbkRhdGFVcGRhdGVkKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRyZWZyZXNoZWRDb3VudCsrO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0XHRcdFx0Ly8gU2lsZW50bHkgaWdub3JlIGVycm9ycyBmb3IgaW5kaXZpZHVhbCB2aWV3c1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oJ0Jhc2VzIENNUzogRXJyb3IgcmVmcmVzaGluZyBlbWJlZGRlZCB2aWV3OicsIGVycm9yKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gTG9nIGZvciBkZWJ1Z2dpbmcgKGNhbiBiZSByZW1vdmVkIGluIHByb2R1Y3Rpb24pXHJcblx0XHRcdGlmIChyZWZyZXNoZWRDb3VudCA+IDApIHtcclxuXHRcdFx0XHRjb25zb2xlLmRlYnVnKGBCYXNlcyBDTVM6IFJlZnJlc2hlZCAke3JlZnJlc2hlZENvdW50fSBlbWJlZGRlZCB2aWV3KHMpIGFmdGVyIGFjdGl2ZSBmaWxlIGNoYW5nZWApO1xyXG5cdFx0XHR9XHJcblx0XHR9LCAxNTApOyAvLyAxNTBtcyBkZWJvdW5jZSAtIHNob3J0IGVub3VnaCB0byBmZWVsIHJlc3BvbnNpdmUsIGxvbmcgZW5vdWdoIHRvIGJhdGNoIHJhcGlkIGNoYW5nZXNcclxuXHR9XHJcblxyXG59XHJcblxyXG5cclxuIiwgImltcG9ydCB7IFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIEFwcCwgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBCYXNlc0NNU1NldHRpbmdzIH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCB7IENvbW1hbmRQaWNrZXJNb2RhbCB9IGZyb20gJy4vY29tcG9uZW50cy9jb21tYW5kLXBpY2tlci1tb2RhbCc7XHJcbmltcG9ydCB7IEljb25QaWNrZXJNb2RhbCB9IGZyb20gJy4vY29tcG9uZW50cy9pY29uLXBpY2tlci1tb2RhbCc7XHJcbmltcG9ydCB7IGNyZWF0ZVNldHRpbmdzR3JvdXAgfSBmcm9tICcuL3V0aWxzL3NldHRpbmdzLWNvbXBhdCc7XHJcblxyXG5leHBvcnQgY2xhc3MgQmFzZXNDTVNTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblx0cGx1Z2luOiBQbHVnaW4gJiB7IHNldHRpbmdzOiBCYXNlc0NNU1NldHRpbmdzIH07XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFBsdWdpbiAmIHsgc2V0dGluZ3M6IEJhc2VzQ01TU2V0dGluZ3MgfSkge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZWZyZXNoIHRvb2xiYXJzIGluIGFsbCBhY3RpdmUgQ01TIHZpZXdzIHdoZW4gc2V0dGluZ3MgY2hhbmdlXHJcblx0ICovXHJcblx0cHJpdmF0ZSByZWZyZXNoQWN0aXZlVG9vbGJhcnMoKTogdm9pZCB7XHJcblx0XHQvLyBVc2UgdGhlIHBsdWdpbidzIG1ldGhvZCB0byByZWZyZXNoIGFsbCB0b29sYmFyc1xyXG5cdFx0Y29uc3QgcGx1Z2luV2l0aE1ldGhvZCA9IHRoaXMucGx1Z2luIGFzIHsgcmVmcmVzaEFsbFRvb2xiYXJzPzogKCkgPT4gdm9pZCB9O1xyXG5cdFx0aWYgKHBsdWdpbldpdGhNZXRob2QgJiYgdHlwZW9mIHBsdWdpbldpdGhNZXRob2QucmVmcmVzaEFsbFRvb2xiYXJzID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdHBsdWdpbldpdGhNZXRob2QucmVmcmVzaEFsbFRvb2xiYXJzKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuXHRcdC8vIEJ1bGsgb3BlcmF0aW9uIHNldHRpbmdzXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ0NvbmZpcm0gYnVsayBvcGVyYXRpb25zJylcclxuXHRcdFx0LnNldERlc2MoJ1Nob3cgY29uZmlybWF0aW9uIGRpYWxvZ3MgYmVmb3JlIHBlcmZvcm1pbmcgYnVsayBvcGVyYXRpb25zLicpXHJcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25maXJtQnVsa09wZXJhdGlvbnMpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25maXJtQnVsa09wZXJhdGlvbnMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0Ly8gVG9vbGJhciBidXR0b24gdmlzaWJpbGl0eSBzZXR0aW5nc1xyXG5cdFx0Y29uc3QgdG9vbGJhckJ1dHRvbnNHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsICdUb29sYmFyIGJ1dHRvbnMnLCAnYmFzZXMtY21zJyk7XHJcblxyXG5cdFx0dG9vbGJhckJ1dHRvbnNHcm91cC5hZGRTZXR0aW5nKHNldHRpbmcgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1Nob3cgc2VsZWN0IGFsbCBidXR0b24nKVxyXG5cdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBBbHJlYWR5IGluIHNlbnRlbmNlIGNhc2VcclxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0LnNldERlc2MoJ0Rpc3BsYXkgdGhlIHNlbGVjdCBhbGwgYnV0dG9uIGluIHRoZSBDTVMgdG9vbGJhci4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhclNlbGVjdEFsbCk7XHJcblx0XHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyU2VsZWN0QWxsID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5yZWZyZXNoQWN0aXZlVG9vbGJhcnMoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dG9vbGJhckJ1dHRvbnNHcm91cC5hZGRTZXR0aW5nKHNldHRpbmcgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1Nob3cgY2xlYXIgYnV0dG9uJylcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogQWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXREZXNjKCdEaXNwbGF5IHRoZSBjbGVhciBzZWxlY3Rpb24gYnV0dG9uIGluIHRoZSBDTVMgdG9vbGJhci4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhckNsZWFyKTtcclxuXHRcdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJDbGVhciA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVmcmVzaEFjdGl2ZVRvb2xiYXJzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRvb2xiYXJCdXR0b25zR3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdTaG93IHB1Ymxpc2ggYnV0dG9uJylcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogQWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXREZXNjKCdEaXNwbGF5IHRoZSBwdWJsaXNoIGJ1dHRvbiBpbiB0aGUgQ01TIHRvb2xiYXIuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJQdWJsaXNoKTtcclxuXHRcdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJQdWJsaXNoID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5yZWZyZXNoQWN0aXZlVG9vbGJhcnMoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dG9vbGJhckJ1dHRvbnNHcm91cC5hZGRTZXR0aW5nKHNldHRpbmcgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1Nob3cgZHJhZnQgYnV0dG9uJylcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogQWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXREZXNjKCdEaXNwbGF5IHRoZSBkcmFmdCBidXR0b24gaW4gdGhlIENNUyB0b29sYmFyLicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyRHJhZnQpO1xyXG5cdFx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhckRyYWZ0ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5yZWZyZXNoQWN0aXZlVG9vbGJhcnMoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dG9vbGJhckJ1dHRvbnNHcm91cC5hZGRTZXR0aW5nKHNldHRpbmcgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1Nob3cgdGFncyBidXR0b24nKVxyXG5cdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBBbHJlYWR5IGluIHNlbnRlbmNlIGNhc2VcclxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0LnNldERlc2MoJ0Rpc3BsYXkgdGhlIHRhZ3MgYnV0dG9uIGluIHRoZSBDTVMgdG9vbGJhci4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhclRhZ3MpO1xyXG5cdFx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhclRhZ3MgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlZnJlc2hBY3RpdmVUb29sYmFycygpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0b29sYmFyQnV0dG9uc0dyb3VwLmFkZFNldHRpbmcoc2V0dGluZyA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnU2hvdyBzZXQgYnV0dG9uJylcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogQWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXREZXNjKCdEaXNwbGF5IHRoZSBzZXQgcHJvcGVydHkgYnV0dG9uIGluIHRoZSBDTVMgdG9vbGJhci4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhclNldCk7XHJcblx0XHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyU2V0ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5yZWZyZXNoQWN0aXZlVG9vbGJhcnMoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dG9vbGJhckJ1dHRvbnNHcm91cC5hZGRTZXR0aW5nKHNldHRpbmcgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1Nob3cgcmVtb3ZlIGJ1dHRvbicpXHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IEFscmVhZHkgaW4gc2VudGVuY2UgY2FzZVxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0RGVzYygnRGlzcGxheSB0aGUgcmVtb3ZlIHByb3BlcnR5IGJ1dHRvbiBpbiB0aGUgQ01TIHRvb2xiYXIuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJSZW1vdmUpO1xyXG5cdFx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhclJlbW92ZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVmcmVzaEFjdGl2ZVRvb2xiYXJzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRvb2xiYXJCdXR0b25zR3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdTaG93IGRlbGV0ZSBidXR0b24nKVxyXG5cdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBBbHJlYWR5IGluIHNlbnRlbmNlIGNhc2VcclxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0LnNldERlc2MoJ0Rpc3BsYXkgdGhlIGRlbGV0ZSBidXR0b24gaW4gdGhlIENNUyB0b29sYmFyLicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyRGVsZXRlKTtcclxuXHRcdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJEZWxldGUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlZnJlc2hBY3RpdmVUb29sYmFycygpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBEZWxldGlvbiBzZXR0aW5nc1xyXG5cdFx0Y29uc3QgZGVsZXRpb25zR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lckVsLCAnRGVsZXRpb25zJywgJ2Jhc2VzLWNtcycpO1xyXG5cclxuXHRcdGRlbGV0aW9uc0dyb3VwLmFkZFNldHRpbmcoc2V0dGluZyA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRGVsZXRlIHBhcmVudCBmb2xkZXIgZm9yIHNwZWNpZmljIGZpbGUgbmFtZScpXHJcblx0XHRcdFx0LnNldERlc2MoJ1doZW4gZW5hYmxlZCwgZGVsZXRpbmcgYSBub3RlIHdpbGwgZGVsZXRlIGl0cyBwYXJlbnQgZm9sZGVyIGFuZCBhbGwgaXRzIGNvbnRlbnRzIGlmIHRoZSBub3RlIGZpbGUgbmFtZSBtYXRjaGVzIHRoZSBzcGVjaWZpZWQgbmFtZS4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWxldGVQYXJlbnRGb2xkZXIpO1xyXG5cdFx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWxldGVQYXJlbnRGb2xkZXIgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRkZWxldGlvbnNHcm91cC5hZGRTZXR0aW5nKHNldHRpbmcgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0ZvbGRlciBkZWxldGlvbiBmaWxlIG5hbWUnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdGaWxlIG5hbWUgdGhhdCB0cmlnZ2VycyBwYXJlbnQgZm9sZGVyIGRlbGV0aW9uLicpXHJcblx0XHRcdFx0LmFkZFRleHQodGV4dCA9PiB7XHJcblx0XHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogUGxhY2Vob2xkZXIgdGV4dCwgbm90IFVJIHRleHRcclxuXHRcdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHRcdHRleHQuc2V0UGxhY2Vob2xkZXIoJ2luZGV4Jyk7XHJcblx0XHRcdFx0XHR0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlbGV0ZVBhcmVudEZvbGRlckZpbGVuYW1lKTtcclxuXHRcdFx0XHRcdHRleHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlbGV0ZVBhcmVudEZvbGRlckZpbGVuYW1lID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LnNldERpc2FibGVkKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWxldGVQYXJlbnRGb2xkZXIpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0ZGVsZXRpb25zR3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdEZWxldGUgYXNzb2NpYXRlZCB1bmlxdWUgYXR0YWNobWVudHMnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdXaGVuIGRlbGV0aW5nIGEgbm90ZSwgYXV0b21hdGljYWxseSBkZWxldGUgYXR0YWNobWVudHMgdGhhdCBhcmUgb25seSB1c2VkIGJ5IHRoYXQgbm90ZS4gQXR0YWNobWVudHMgdXNlZCBieSBvdGhlciBub3RlcyB3aWxsIGJlIHByZXNlcnZlZC4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWxldGVVbmlxdWVBdHRhY2htZW50cyk7XHJcblx0XHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlbGV0ZVVuaXF1ZUF0dGFjaG1lbnRzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0ZGVsZXRpb25zR3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdDb25maXJtIGRlbGV0aW9ucycpXHJcblx0XHRcdFx0LnNldERlc2MoJ1Nob3cgY29uZmlybWF0aW9uIGRpYWxvZyBiZWZvcmUgZGVsZXRpbmcgZmlsZXMuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlybURlbGV0aW9ucyk7XHJcblx0XHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1EZWxldGlvbnMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBJY29uIHNldHRpbmdzXHJcblx0XHRjb25zdCBhcHBlYXJhbmNlR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lckVsLCAnQXBwZWFyYW5jZScsICdiYXNlcy1jbXMnKTtcclxuXHJcblx0XHRhcHBlYXJhbmNlR3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBBbHJlYWR5IGluIHNlbnRlbmNlIGNhc2U7IFwiQ01TXCIgaXMgYSBwcm9wZXIgbm91blxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0TmFtZSgnVXNlIGhvbWUgaWNvbiBmb3IgQ01TIHZpZXcnKVxyXG5cdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBBbHJlYWR5IGluIHNlbnRlbmNlIGNhc2U7IFwiQ01TXCIgYW5kIFwiT2JzaWRpYW5cIiBhcmUgcHJvcGVyIG5vdW5zXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXREZXNjKCdVc2UgdGhlIGhvbWUgaWNvbiBpbnN0ZWFkIG9mIGJsb2NrcyBpY29uIGZvciB0aGUgQ01TIHZpZXcgaW4gdGhlIEJhc2VzIHZpZXcgc2VsZWN0b3IuIFJlc3RhcnQgT2JzaWRpYW4gZm9yIHRoaXMgY2hhbmdlIHRvIHRha2UgZWZmZWN0LicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZUhvbWVJY29uKTtcclxuXHRcdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlSG9tZUljb24gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRhcHBlYXJhbmNlR3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBBbHJlYWR5IGluIHNlbnRlbmNlIGNhc2U7IFwiR0lGc1wiIGlzIGEgcHJvcGVyIG5vdW4vYWNyb255bVxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0TmFtZSgnRm9yY2Ugc3RhdGljIGltYWdlIGZvciBhbmltYXRlZCBHSUZzJylcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogQWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlOyBcIkdJRnNcIiBpcyBhIHByb3BlciBub3VuL2Fjcm9ueW1cclxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0LnNldERlc2MoJ1doZW4gZW5hYmxlZCwgYW5pbWF0ZWQgR0lGcyB3aWxsIGRpc3BsYXkgb25seSB0aGUgZmlyc3QgZnJhbWUgd2hlbiB1c2VkIGFzIGNhcmQgY292ZXJzIG9yIHRodW1ibmFpbHMuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9yY2VTdGF0aWNHaWZJbWFnZXMpO1xyXG5cdFx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb3JjZVN0YXRpY0dpZkltYWdlcyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHRcdC8vIFJlZnJlc2ggYWxsIGFjdGl2ZSB2aWV3cyB0byBhcHBseSB0aGUgY2hhbmdlXHJcblx0XHRcdFx0XHRcdGNvbnN0IHBsdWdpbldpdGhNZXRob2QgPSB0aGlzLnBsdWdpbiBhcyB7IGFjdGl2ZVZpZXdzPzogU2V0PHsgb25EYXRhVXBkYXRlZD86ICgpID0+IHZvaWQgfT4gfTtcclxuXHRcdFx0XHRcdFx0aWYgKHBsdWdpbldpdGhNZXRob2QuYWN0aXZlVmlld3MpIHtcclxuXHRcdFx0XHRcdFx0XHRwbHVnaW5XaXRoTWV0aG9kLmFjdGl2ZVZpZXdzLmZvckVhY2godmlldyA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAodmlldy5vbkRhdGFVcGRhdGVkKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZpZXcub25EYXRhVXBkYXRlZCgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFByb3BlcnRpZXMgaW5mbyBtb2RhbCBzZXR0aW5nXHJcblx0XHQvLyBRdWljayBlZGl0IHNldHRpbmdzXHJcblx0XHRjb25zdCBxdWlja0VkaXRHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsICdRdWljayBlZGl0JywgJ2Jhc2VzLWNtcycpO1xyXG5cclxuXHRcdC8vIERlZmluZSBxdWljayBlZGl0IHNldHRpbmdzIGZpcnN0IChuZWVkZWQgZm9yIHZpc2liaWxpdHkgdG9nZ2xpbmcpXHJcblx0XHRsZXQgcXVpY2tFZGl0Q29tbWFuZFNldHRpbmc6IFNldHRpbmc7XHJcblx0XHRsZXQgcXVpY2tFZGl0SWNvblNldHRpbmc6IFNldHRpbmc7XHJcblx0XHRsZXQgcXVpY2tFZGl0T3BlbkZpbGVTZXR0aW5nOiBTZXR0aW5nO1xyXG5cclxuXHRcdHF1aWNrRWRpdEdyb3VwLmFkZFNldHRpbmcoc2V0dGluZyA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRW5hYmxlIHF1aWNrIGVkaXQnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdTaG93IGFuIGljb24gb24gY2FyZCB0aXRsZXMgdGhhdCBsYXVuY2hlcyBhIGNvbW1hbmQgd2hlbiBjbGlja2VkLicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlUXVpY2tFZGl0KVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlUXVpY2tFZGl0ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0XHRcdC8vIFNob3cvaGlkZSBjb21tYW5kIHNlbGVjdG9yIGFuZCByZWxhdGVkIHNldHRpbmdzIGJhc2VkIG9uIHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNob3VsZEhpZGUgPSAhdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0Ly8gRXh0cmFjdCBzZXR0aW5nRWwgcHJvcGVydGllcyB0byBhdm9pZCBwcm9taXNlIG1pc3VzZSBlcnJvcnNcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBjb21tYW5kRWwgPSBxdWlja0VkaXRDb21tYW5kU2V0dGluZz8uc2V0dGluZ0VsO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGljb25FbCA9IHF1aWNrRWRpdEljb25TZXR0aW5nPy5zZXR0aW5nRWw7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgb3BlbkZpbGVFbCA9IHF1aWNrRWRpdE9wZW5GaWxlU2V0dGluZz8uc2V0dGluZ0VsO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChjb21tYW5kRWwpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbW1hbmRFbC50b2dnbGVDbGFzcygnYmFzZXMtY21zLXNldHRpbmctaGlkZGVuJywgc2hvdWxkSGlkZSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGlmIChpY29uRWwpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGljb25FbC50b2dnbGVDbGFzcygnYmFzZXMtY21zLXNldHRpbmctaGlkZGVuJywgc2hvdWxkSGlkZSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGlmIChvcGVuRmlsZUVsKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRvcGVuRmlsZUVsLnRvZ2dsZUNsYXNzKCdiYXNlcy1jbXMtc2V0dGluZy1oaWRkZW4nLCBzaG91bGRIaWRlKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBDb21tYW5kIHBpY2tlciBzZXR0aW5nXHJcblx0XHRxdWlja0VkaXRHcm91cC5hZGRTZXR0aW5nKHNldHRpbmcgPT4ge1xyXG5cdFx0XHRxdWlja0VkaXRDb21tYW5kU2V0dGluZyA9IHNldHRpbmc7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnUXVpY2sgZWRpdCBjb21tYW5kJylcclxuXHRcdFx0XHQuc2V0RGVzYygnVGhlIGNvbW1hbmQgdG8gZXhlY3V0ZSB3aGVuIGNsaWNraW5nIHRoZSBxdWljayBlZGl0IGljb24gb24gYSBjYXJkIHRpdGxlLicpXHJcblx0XHRcdFx0LmFkZEJ1dHRvbihidXR0b24gPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudENvbW1hbmROYW1lID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucXVpY2tFZGl0Q29tbWFuZE5hbWUgfHwgXHJcblx0XHRcdFx0XHRcdCh0aGlzLnBsdWdpbi5zZXR0aW5ncy5xdWlja0VkaXRDb21tYW5kID8gJ1NlbGVjdCBjb21tYW5kLi4uJyA6ICdObyBjb21tYW5kIHNlbGVjdGVkJyk7XHJcblx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChjdXJyZW50Q29tbWFuZE5hbWUpXHJcblx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBDb21tYW5kUGlja2VyTW9kYWwodGhpcy5hcHAsIChjb21tYW5kSWQ6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBHZXQgY29tbWFuZCBuYW1lIGJ5IGxvb2tpbmcgaXQgdXBcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgY29tbWFuZFJlZ2lzdHJ5ID0gKHRoaXMuYXBwIGFzIHsgY29tbWFuZHM/OiB7IGxpc3RDb21tYW5kcz86ICgpID0+IEFycmF5PHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nIH0+OyBjb21tYW5kcz86IFJlY29yZDxzdHJpbmcsIHsgbmFtZT86IHN0cmluZyB9PiB9IH0pLmNvbW1hbmRzO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRsZXQgY29tbWFuZE5hbWUgPSAnJztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFRyeSB0byBmaW5kIHRoZSBjb21tYW5kIG5hbWVcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNvbW1hbmRSZWdpc3RyeSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFRyeSBsaXN0Q29tbWFuZHMoKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh0eXBlb2YgY29tbWFuZFJlZ2lzdHJ5Lmxpc3RDb21tYW5kcyA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgY29tbWFuZHMgPSBjb21tYW5kUmVnaXN0cnkubGlzdENvbW1hbmRzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBjb21tYW5kID0gY29tbWFuZHMuZmluZCgoY21kKSA9PiBjbWQuaWQgPT09IGNvbW1hbmRJZCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoY29tbWFuZCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb21tYW5kTmFtZSA9IGNvbW1hbmQubmFtZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRmFsbGJhY2s6IHRyeSBkaXJlY3QgcmVnaXN0cnkgYWNjZXNzXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFjb21tYW5kTmFtZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgcmVnaXN0cnkgPSBjb21tYW5kUmVnaXN0cnkuY29tbWFuZHM7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAocmVnaXN0cnkgJiYgcmVnaXN0cnlbY29tbWFuZElkXSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb21tYW5kTmFtZSA9IHJlZ2lzdHJ5W2NvbW1hbmRJZF0ubmFtZSB8fCAnJztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdENvbW1hbmQgPSBjb21tYW5kSWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdENvbW1hbmROYW1lID0gY29tbWFuZE5hbWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciB0byB1cGRhdGUgdGhlIFVJXHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBBZGQgYSBjbGVhciBidXR0b24gaWYgYSBjb21tYW5kIGlzIHNlbGVjdGVkXHJcblx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucXVpY2tFZGl0Q29tbWFuZCkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBjbGVhckJ1dHRvbiA9IGJ1dHRvbi5idXR0b25FbC5wYXJlbnRFbGVtZW50Py5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdHRleHQ6ICdDbGVhcicsXHJcblx0XHRcdFx0XHRcdFx0YXR0cjogeyBzdHlsZTogJ21hcmdpbi1sZWZ0OiA4cHg7JyB9XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRjbGVhckJ1dHRvbj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucXVpY2tFZGl0Q29tbWFuZCA9ICcnO1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucXVpY2tFZGl0Q29tbWFuZE5hbWUgPSAnJztcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciB0byB1cGRhdGUgdGhlIFVJXHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcclxuXHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0Ly8gSGlkZSBjb21tYW5kIHNlbGVjdG9yIGlmIHF1aWNrIGVkaXQgaXMgZGlzYWJsZWRcclxuXHRcdFx0c2V0dGluZy5zZXR0aW5nRWwudG9nZ2xlQ2xhc3MoJ2Jhc2VzLWNtcy1zZXR0aW5nLWhpZGRlbicsICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVRdWlja0VkaXQpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gSWNvbiBwaWNrZXIgc2V0dGluZ1xyXG5cdFx0cXVpY2tFZGl0R3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0cXVpY2tFZGl0SWNvblNldHRpbmcgPSBzZXR0aW5nO1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1F1aWNrIGVkaXQgaWNvbicpXHJcblx0XHRcdFx0LnNldERlc2MoJ1NlbGVjdCB0aGUgaWNvbiB0byBkaXNwbGF5IGZvciB0aGUgcXVpY2sgZWRpdCBidXR0b24gb24gY2FyZCB0aXRsZXMuJylcclxuXHRcdFx0XHQuYWRkQnV0dG9uKGJ1dHRvbiA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBpY29uTmFtZSA9IHRoaXMuZ2V0SWNvbk5hbWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucXVpY2tFZGl0SWNvbiB8fCAncGVuY2lsLWxpbmUnKTtcclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KGljb25OYW1lIHx8ICdTZWxlY3QgaWNvbi4uLicpXHJcblx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBJY29uUGlja2VyTW9kYWwodGhpcy5hcHAsIChpY29uSWQpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucXVpY2tFZGl0SWNvbiA9IGljb25JZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIgdG8gc2hvdyB1cGRhdGVkIGljb24gbmFtZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0Ly8gSGlkZSBpY29uIHNlbGVjdG9yIGlmIHF1aWNrIGVkaXQgaXMgZGlzYWJsZWRcclxuXHRcdFx0c2V0dGluZy5zZXR0aW5nRWwudG9nZ2xlQ2xhc3MoJ2Jhc2VzLWNtcy1zZXR0aW5nLWhpZGRlbicsICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVRdWlja0VkaXQpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gUXVpY2sgZWRpdCBvcGVuIGZpbGUgc2V0dGluZ1xyXG5cdFx0cXVpY2tFZGl0R3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0cXVpY2tFZGl0T3BlbkZpbGVTZXR0aW5nID0gc2V0dGluZztcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdBdHRlbXB0IHRvIG9wZW4gZmlsZSBhbmQgZXhlY3V0ZSBxdWljayBlZGl0IGNvbW1hbmQnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdGb3IgY29tbWFuZHMgdGhhdCBkb25cXCd0IGhhdmUgc3BlY2lhbCBoYW5kbGluZywgYXR0ZW1wdCB0byBvcGVuIHRoZSBmaWxlIGFuZCBleGVjdXRlIHRoZSBjb21tYW5kLiBTb21lIGNvbW1hbmRzIG1heSBub3Qgd29yayBwcm9wZXJseSB0aGlzIHdheS4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdE9wZW5GaWxlKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucXVpY2tFZGl0T3BlbkZpbGUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHRcdC8vIEhpZGUgdGhpcyBzZXR0aW5nIGlmIHF1aWNrIGVkaXQgaXMgZGlzYWJsZWRcclxuXHRcdFx0c2V0dGluZy5zZXR0aW5nRWwudG9nZ2xlQ2xhc3MoJ2Jhc2VzLWNtcy1zZXR0aW5nLWhpZGRlbicsICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVRdWlja0VkaXQpO1xyXG5cdFx0fSk7XHJcblxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBnZXRJY29uTmFtZShpY29uSWQ6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHRpZiAoIWljb25JZCkgcmV0dXJuICcnO1xyXG5cdFx0Ly8gQ29udmVydCBpY29uIElEIHRvIGEgcmVhZGFibGUgbmFtZSwgcmVtb3ZpbmcgbHVjaWRlLSBwcmVmaXggaWYgcHJlc2VudFxyXG5cdFx0cmV0dXJuIGljb25JZFxyXG5cdFx0XHQucmVwbGFjZSgvXmx1Y2lkZS0vLCAnJykgLy8gUmVtb3ZlIGx1Y2lkZS0gcHJlZml4XHJcblx0XHRcdC5zcGxpdCgnLScpXHJcblx0XHRcdC5tYXAod29yZCA9PiB3b3JkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgd29yZC5zbGljZSgxKSlcclxuXHRcdFx0LmpvaW4oJyAnKTtcclxuXHR9XHJcbn1cclxuXHJcblxyXG4iLCAiLyoqXHJcbiAqIENvbW1hbmQgUGlja2VyIE1vZGFsXHJcbiAqIFNlYXJjaGFibGUgbW9kYWwgZm9yIHNlbGVjdGluZyBhbiBPYnNpZGlhbiBjb21tYW5kXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBGdXp6eVN1Z2dlc3RNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmludGVyZmFjZSBDb21tYW5kT3B0aW9uIHtcclxuXHRpZDogc3RyaW5nO1xyXG5cdG5hbWU6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbW1hbmRQaWNrZXJNb2RhbCBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPENvbW1hbmRPcHRpb24+IHtcclxuXHRwcml2YXRlIG9uU2VsZWN0OiAoY29tbWFuZElkOiBzdHJpbmcpID0+IHZvaWQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvblNlbGVjdDogKGNvbW1hbmRJZDogc3RyaW5nKSA9PiB2b2lkKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5vblNlbGVjdCA9IG9uU2VsZWN0O1xyXG5cdH1cclxuXHJcblx0Z2V0SXRlbXMoKTogQ29tbWFuZE9wdGlvbltdIHtcclxuXHRcdC8vIEdldCBhbGwgYXZhaWxhYmxlIGNvbW1hbmRzXHJcblx0XHQvLyBUcnkgbXVsdGlwbGUgbWV0aG9kcyB0byBlbnN1cmUgd2UgZ2V0IEFMTCBjb21tYW5kcywgbm90IGp1c3QgY29udGV4dC1maWx0ZXJlZCBvbmVzXHJcblx0XHRjb25zdCBjb21tYW5kUmVnaXN0cnkgPSAodGhpcy5hcHAgYXMgeyBjb21tYW5kcz86IHsgbGlzdENvbW1hbmRzPzogKCkgPT4gQ29tbWFuZE9wdGlvbltdOyBjb21tYW5kcz86IFJlY29yZDxzdHJpbmcsIENvbW1hbmRPcHRpb24+OyBjb21tYW5kUmVnaXN0cnk/OiBSZWNvcmQ8c3RyaW5nLCBDb21tYW5kT3B0aW9uPiB9IH0pLmNvbW1hbmRzO1xyXG5cdFx0XHJcblx0XHQvLyBVc2UgYSBTZXQgdG8gZGVkdXBsaWNhdGUgYnkgY29tbWFuZCBJRFxyXG5cdFx0Y29uc3QgY29tbWFuZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBDb21tYW5kT3B0aW9uPigpO1xyXG5cdFx0XHJcblx0XHQvLyBNZXRob2QgMTogVHJ5IGxpc3RDb21tYW5kcygpIC0gYnV0IHRoaXMgbWlnaHQgYmUgY29udGV4dC1maWx0ZXJlZFxyXG5cdFx0aWYgKGNvbW1hbmRSZWdpc3RyeSAmJiB0eXBlb2YgY29tbWFuZFJlZ2lzdHJ5Lmxpc3RDb21tYW5kcyA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGNvbnN0IGNvbW1hbmRzID0gY29tbWFuZFJlZ2lzdHJ5Lmxpc3RDb21tYW5kcygpO1xyXG5cdFx0XHRcdGZvciAoY29uc3QgY29tbWFuZCBvZiBjb21tYW5kcykge1xyXG5cdFx0XHRcdFx0aWYgKGNvbW1hbmQgJiYgY29tbWFuZC5pZCAmJiBjb21tYW5kLm5hbWUgJiYgIWNvbW1hbmRNYXAuaGFzKGNvbW1hbmQuaWQpKSB7XHJcblx0XHRcdFx0XHRcdGNvbW1hbmRNYXAuc2V0KGNvbW1hbmQuaWQsIHtcclxuXHRcdFx0XHRcdFx0XHRpZDogY29tbWFuZC5pZCxcclxuXHRcdFx0XHRcdFx0XHRuYW1lOiBjb21tYW5kLm5hbWVcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdFx0Y29uc29sZS53YXJuKCdbQmFzZXMgQ01TXSBFcnJvciBnZXR0aW5nIGNvbW1hbmRzIHZpYSBsaXN0Q29tbWFuZHMoKTonLCBlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBNZXRob2QgMjogVHJ5IGFjY2Vzc2luZyB0aGUgaW50ZXJuYWwgY29tbWFuZHMgcmVnaXN0cnkgZGlyZWN0bHlcclxuXHRcdC8vIFRoaXMgc2hvdWxkIGdpdmUgdXMgQUxMIGNvbW1hbmRzIHJlZ2FyZGxlc3Mgb2YgY29udGV4dFxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgcmVnaXN0cnkgPSBjb21tYW5kUmVnaXN0cnk/LmNvbW1hbmRzO1xyXG5cdFx0XHRpZiAocmVnaXN0cnkgJiYgdHlwZW9mIHJlZ2lzdHJ5ID09PSAnb2JqZWN0Jykge1xyXG5cdFx0XHRcdGNvbnN0IGFsbENvbW1hbmRzID0gT2JqZWN0LnZhbHVlcyhyZWdpc3RyeSk7XHJcblx0XHRcdFx0Zm9yIChjb25zdCBjb21tYW5kIG9mIGFsbENvbW1hbmRzKSB7XHJcblx0XHRcdFx0XHRpZiAoY29tbWFuZCAmJiBjb21tYW5kLmlkICYmIGNvbW1hbmQubmFtZSAmJiAhY29tbWFuZE1hcC5oYXMoY29tbWFuZC5pZCkpIHtcclxuXHRcdFx0XHRcdFx0Y29tbWFuZE1hcC5zZXQoY29tbWFuZC5pZCwge1xyXG5cdFx0XHRcdFx0XHRcdGlkOiBjb21tYW5kLmlkLFxyXG5cdFx0XHRcdFx0XHRcdG5hbWU6IGNvbW1hbmQubmFtZVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKCdbQmFzZXMgQ01TXSBFcnJvciBnZXR0aW5nIGNvbW1hbmRzIHZpYSByZWdpc3RyeTonLCBlKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gTWV0aG9kIDM6IFRyeSBhY2Nlc3NpbmcgdmlhIGludGVybmFsIHN0cnVjdHVyZSAoZmFsbGJhY2spXHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCBpbnRlcm5hbFJlZ2lzdHJ5ID0gY29tbWFuZFJlZ2lzdHJ5Py5jb21tYW5kUmVnaXN0cnk7XHJcblx0XHRcdGlmIChpbnRlcm5hbFJlZ2lzdHJ5ICYmIHR5cGVvZiBpbnRlcm5hbFJlZ2lzdHJ5ID09PSAnb2JqZWN0Jykge1xyXG5cdFx0XHRcdGNvbnN0IGFsbENvbW1hbmRzID0gT2JqZWN0LnZhbHVlcyhpbnRlcm5hbFJlZ2lzdHJ5KTtcclxuXHRcdFx0XHRmb3IgKGNvbnN0IGNvbW1hbmQgb2YgYWxsQ29tbWFuZHMpIHtcclxuXHRcdFx0XHRcdGlmIChjb21tYW5kICYmIGNvbW1hbmQuaWQgJiYgY29tbWFuZC5uYW1lICYmICFjb21tYW5kTWFwLmhhcyhjb21tYW5kLmlkKSkge1xyXG5cdFx0XHRcdFx0XHRjb21tYW5kTWFwLnNldChjb21tYW5kLmlkLCB7XHJcblx0XHRcdFx0XHRcdFx0aWQ6IGNvbW1hbmQuaWQsXHJcblx0XHRcdFx0XHRcdFx0bmFtZTogY29tbWFuZC5uYW1lXHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSBjYXRjaCAoZSkge1xyXG5cdFx0XHRjb25zb2xlLndhcm4oJ1tCYXNlcyBDTVNdIEVycm9yIGdldHRpbmcgY29tbWFuZHMgdmlhIGludGVybmFsIHJlZ2lzdHJ5OicsIGUpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRjb25zdCBjb21tYW5kT3B0aW9ucyA9IEFycmF5LmZyb20oY29tbWFuZE1hcC52YWx1ZXMoKSk7XHJcblx0XHRcclxuXHRcdC8vIFNvcnQgYWxwaGFiZXRpY2FsbHkgYnkgbmFtZVxyXG5cdFx0Y29tbWFuZE9wdGlvbnMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSk7XHJcblx0XHRcclxuXHRcdHJldHVybiBjb21tYW5kT3B0aW9ucztcclxuXHR9XHJcblxyXG5cdGdldEl0ZW1UZXh0KGl0ZW06IENvbW1hbmRPcHRpb24pOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIGl0ZW0ubmFtZTtcclxuXHR9XHJcblxyXG5cdG9uQ2hvb3NlSXRlbShpdGVtOiBDb21tYW5kT3B0aW9uLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KTogdm9pZCB7XHJcblx0XHR0aGlzLm9uU2VsZWN0KGl0ZW0uaWQpO1xyXG5cdH1cclxuXHJcblx0Ly8gT3ZlcnJpZGUgdG8gc2hvdyBjb21tYW5kIG5hbWUgb25seVxyXG5cdHJlbmRlclN1Z2dlc3Rpb24obWF0Y2g6IHsgaXRlbTogQ29tbWFuZE9wdGlvbiB9LCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGl0ZW0gPSBtYXRjaC5pdGVtO1xyXG5cdFx0ZWwuY3JlYXRlRGl2KHsgY2xzOiAnc3VnZ2VzdGlvbi10aXRsZScsIHRleHQ6IGl0ZW0ubmFtZSB9KTtcclxuXHR9XHJcbn1cclxuXHJcblxyXG4iLCAiLyoqXHJcbiAqIEljb24gUGlja2VyIE1vZGFsXHJcbiAqIFNlYXJjaGFibGUgbW9kYWwgZm9yIHNlbGVjdGluZyBhIEx1Y2lkZSBpY29uXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBGdXp6eVN1Z2dlc3RNb2RhbCwgc2V0SWNvbiwgZ2V0SWNvbklkcywgcmVxdWlyZUFwaVZlcnNpb24gfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbnRlcmZhY2UgSWNvbk9wdGlvbiB7XHJcblx0aWQ6IHN0cmluZztcclxuXHRuYW1lOiBzdHJpbmc7XHJcbn1cclxuXHJcbi8vIEdldCBpY29uIGxpc3QgZnJvbSBPYnNpZGlhbiBBUEkgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgdXNlIGZhbGxiYWNrIGxpc3RcclxuY29uc3QgZ2V0SWNvbkxpc3QgPSAoKTogc3RyaW5nW10gPT4ge1xyXG5cdGlmIChyZXF1aXJlQXBpVmVyc2lvbiAmJiByZXF1aXJlQXBpVmVyc2lvbignMS43LjMnKSAmJiBnZXRJY29uSWRzKSB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRyZXR1cm4gZ2V0SWNvbklkcygpO1xyXG5cdFx0fSBjYXRjaCAoZSkge1xyXG5cdFx0XHRjb25zb2xlLndhcm4oJ1tCYXNlcyBDTVNdIEVycm9yIGdldHRpbmcgaWNvbiBJRHMgZnJvbSBPYnNpZGlhbjonLCBlKTtcclxuXHRcdH1cclxuXHR9XHJcblx0Ly8gRmFsbGJhY2sgdG8gYSBiYXNpYyBsaXN0IGlmIEFQSSBpcyBub3QgYXZhaWxhYmxlXHJcblx0cmV0dXJuIFtcclxuXHRcdCdzZXR0aW5ncy0yJywgJ3NldHRpbmdzJywgJ2hlbHAtY2lyY2xlJywgJ2luZm8nLCAnc3RhcicsICdoZWFydCcsICdib29rbWFyaycsXHJcblx0XHQnaG9tZScsICdzZWFyY2gnLCAnYmVsbCcsICdtYWlsJywgJ3VzZXInLCAndXNlcnMnLCAnZm9sZGVyJywgJ2ZpbGUnLCAnZmlsZS10ZXh0JyxcclxuXHRcdCdpbWFnZScsICd2aWRlbycsICdtdXNpYycsICdjYWxlbmRhcicsICdjbG9jaycsICdlZGl0JywgJ3BlbmNpbCcsICd0cmFzaCcsXHJcblx0XHQnY29weScsICdjdXQnLCAncGFzdGUnLCAnZG93bmxvYWQnLCAndXBsb2FkJywgJ3NhdmUnLCAnc2hhcmUnLCAnbGluaycsXHJcblx0XHQnZXh0ZXJuYWwtbGluaycsICdsb2NrJywgJ3VubG9jaycsICdleWUnLCAnZXllLW9mZicsICdrZXknLCAnc2hpZWxkJyxcclxuXHRcdCdjaGVjaycsICd4JywgJ3BsdXMnLCAnbWludXMnLCAnYXJyb3ctbGVmdCcsICdhcnJvdy1yaWdodCcsICdhcnJvdy11cCcsXHJcblx0XHQnYXJyb3ctZG93bicsICdjaGV2cm9uLWxlZnQnLCAnY2hldnJvbi1yaWdodCcsICdjaGV2cm9uLXVwJywgJ2NoZXZyb24tZG93bicsXHJcblx0XHQnbWVudScsICdtb3JlLWhvcml6b250YWwnLCAnbW9yZS12ZXJ0aWNhbCcsICdncmlkJywgJ2xpc3QnLCAnbGF5b3V0JyxcclxuXHRcdCdjb2x1bW5zJywgJ3Jvd3MnLCAnbWF4aW1pemUnLCAnbWluaW1pemUnLCAnem9vbS1pbicsICd6b29tLW91dCcsXHJcblx0XHQncmVmcmVzaC1jdycsICdwbGF5JywgJ3BhdXNlJywgJ3N0b3AnLCAnc3VuJywgJ21vb24nLCAnY2xvdWQnLCAnemFwJyxcclxuXHRcdCd3YW5kLTInLCAnd2FuZCcsICd3YW5kLXNwYXJrbGVzJywgJ3BhbGV0dGUnLCAnYnJ1c2gnLCAnc2xpZGVycycsXHJcblx0XHQncG93ZXInLCAnd2lmaScsICdibHVldG9vdGgnLCAnbW9uaXRvcicsICdsYXB0b3AnLCAnc21hcnRwaG9uZScsXHJcblx0XHQnY2FtZXJhJywgJ21pYycsICdoZWFkcGhvbmVzJywgJ2NvZGUnLCAndGVybWluYWwnLCAndGVybWluYWwtc3F1YXJlJyxcclxuXHRcdCdnaXRodWInLCAnZ2l0bGFiJywgJ2dpdC1icmFuY2gnLCAnZ2l0LWNvbW1pdCcsICdkYXRhYmFzZScsICdzZXJ2ZXInLFxyXG5cdFx0J2Nsb3VkLWRvd25sb2FkJywgJ2Nsb3VkLXVwbG9hZCcsICd0YWcnLCAndGFncycsICdmbGFnJywgJ3BpbicsXHJcblx0XHQnbWFwLXBpbicsICdjb21wYXNzJywgJ2dsb2JlJywgJ3JvY2tldCcsICdjYXInLCAnYmlrZScsICdyb2JvdCcsXHJcblx0XHQnYXBwbGUnLCAnd2luZG93cycsICdsaW51eCcsICdjaHJvbWUnLCAnZmlyZWZveCcsICdzYWZhcmknLFxyXG5cdFx0J2NyZWRpdC1jYXJkJywgJ3dhbGxldCcsICdjb2lucycsICdib29rJywgJ2Jvb2stb3BlbicsICdhd2FyZCcsXHJcblx0XHQndHJvcGh5JywgJ2JhZGdlJywgJ3dyZW5jaCcsICd0b29sJywgJ3BhY2thZ2UnLCAnYm94JywgJ2FyY2hpdmUnLFxyXG5cdFx0J3NlbmQnLCAncmVwbHknLCAnZm9yd2FyZCcsICdtYWlsLW9wZW4nLCAndGFnLXBsdXMnLCAndGFnLW1pbnVzJyxcclxuXHRcdCdmbGFnLW9mZicsICdwaW4tb2ZmJywgJ21hcC1waW4tb2ZmJywgJ25hdmlnYXRpb24nLCAnbWFwJywgJ2VhcnRoJyxcclxuXHRcdCdwbGFuZScsICdzaGlwJywgJ2FuY2hvcicsICdoZWxpY29wdGVyJywgJ2Ryb25lJywgJ2FuZHJvaWQnLFxyXG5cdFx0J2tleWhvbGUnLCAna2V5cycsICdmaW5nZXJwcmludCcsICdzY2FuJywgJ3FyLWNvZGUnLCAnYmFyY29kZScsXHJcblx0XHQncmVjZWlwdCcsICdwaWdneS1iYW5rJywgJ2Jhbmtub3RlJywgJ3BlbmNpbC1saW5lJywgJ2VkaXQtMicsICdlZGl0LTMnXHJcblx0XTtcclxufTtcclxuXHJcbi8vIENvbnZlcnQgaWNvbiBJRHMgdG8gSWNvbk9wdGlvbiBmb3JtYXRcclxuY29uc3QgTFVDSURFX0lDT05TOiBJY29uT3B0aW9uW10gPSBnZXRJY29uTGlzdCgpLm1hcChpZCA9PiAoe1xyXG5cdGlkOiBpZCxcclxuXHRuYW1lOiBpZFxyXG5cdFx0LnJlcGxhY2UoL15sdWNpZGUtLywgJycpIC8vIFJlbW92ZSBsdWNpZGUtIHByZWZpeCBmb3IgZGlzcGxheVxyXG5cdFx0LnJlcGxhY2UoLy0vZywgJyAnKVxyXG5cdFx0LnJlcGxhY2UoLyheXFx3ezF9KXwoXFxzK1xcd3sxfSkvZywgKGxldHRlcikgPT4gbGV0dGVyLnRvVXBwZXJDYXNlKCkpXHJcbn0pKS5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBJY29uUGlja2VyTW9kYWwgZXh0ZW5kcyBGdXp6eVN1Z2dlc3RNb2RhbDxJY29uT3B0aW9uPiB7XHJcblx0cHJpdmF0ZSBvblNlbGVjdDogKGljb25JZDogc3RyaW5nKSA9PiB2b2lkO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgb25TZWxlY3Q6IChpY29uSWQ6IHN0cmluZykgPT4gdm9pZCkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMub25TZWxlY3QgPSBvblNlbGVjdDtcclxuXHR9XHJcblxyXG5cdGdldEl0ZW1zKCk6IEljb25PcHRpb25bXSB7XHJcblx0XHRyZXR1cm4gTFVDSURFX0lDT05TO1xyXG5cdH1cclxuXHJcblx0Z2V0SXRlbVRleHQoaXRlbTogSWNvbk9wdGlvbik6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gaXRlbS5uYW1lO1xyXG5cdH1cclxuXHJcblx0b25DaG9vc2VJdGVtKGl0ZW06IEljb25PcHRpb24sIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMub25TZWxlY3QoaXRlbS5pZCk7XHJcblx0fVxyXG5cclxuXHQvLyBPdmVycmlkZSB0byBzaG93IGljb24gcHJldmlld1xyXG5cdHJlbmRlclN1Z2dlc3Rpb24obWF0Y2g6IHsgaXRlbTogSWNvbk9wdGlvbiB9LCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGl0ZW0gPSBtYXRjaC5pdGVtO1xyXG5cdFx0ZWwuYWRkQ2xhc3MoJ21vZC1jb21wbGV4Jyk7XHJcblx0XHRjb25zdCBjb250ZW50ID0gZWwuY3JlYXRlRGl2KHsgY2xzOiAnc3VnZ2VzdGlvbi1jb250ZW50JyB9KTtcclxuXHRcdGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnc3VnZ2VzdGlvbi10aXRsZScsIHRleHQ6IGl0ZW0ubmFtZSB9KTtcclxuXHRcdFxyXG5cdFx0Ly8gQ3JlYXRlIGljb24gcHJldmlldyB1c2luZyBPYnNpZGlhbidzIHNldEljb25cclxuXHRcdGNvbnN0IGF1eCA9IGVsLmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24tYXV4JyB9KTtcclxuXHRcdHNldEljb24oYXV4LmNyZWF0ZVNwYW4oeyBjbHM6ICdzdWdnZXN0aW9uLWZsYWlyJyB9KSwgaXRlbS5pZCk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuIiwgIi8qKlxyXG4gKiBDb21wYXRpYmlsaXR5IHV0aWxpdGllcyBmb3Igc2V0dGluZ3NcclxuICogUHJvdmlkZXMgYmFja3dhcmQgY29tcGF0aWJpbGl0eSBmb3IgU2V0dGluZ0dyb3VwIChyZXF1aXJlcyBBUEkgMS4xMS4wKylcclxuICovXHJcbmltcG9ydCB7IFNldHRpbmcsIHJlcXVpcmVBcGlWZXJzaW9uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuLy8gVHlwZSBkZWZpbml0aW9uIGZvciBTZXR0aW5nR3JvdXAgKG1heSBub3QgYmUgaW4gdHlwZSBkZWZpbml0aW9ucyBmb3Igb2xkZXIgdmVyc2lvbnMpXHJcbnR5cGUgU2V0dGluZ0dyb3VwQ29uc3RydWN0b3IgPSBuZXcgKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkgPT4ge1xyXG5cdHNldEhlYWRpbmcoaGVhZGluZzogc3RyaW5nKToge1xyXG5cdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xyXG5cdH07XHJcbn07XHJcblxyXG4vKipcclxuICogSW50ZXJmYWNlIHRoYXQgd29ya3Mgd2l0aCBib3RoIFNldHRpbmdHcm91cCBhbmQgZmFsbGJhY2sgY29udGFpbmVyXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFNldHRpbmdzQ29udGFpbmVyIHtcclxuXHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgc2V0dGluZ3MgY29udGFpbmVyIHRoYXQgdXNlcyBTZXR0aW5nR3JvdXAgaWYgYXZhaWxhYmxlIChBUEkgMS4xMS4wKyksXHJcbiAqIG90aGVyd2lzZSBmYWxscyBiYWNrIHRvIGNyZWF0aW5nIGEgaGVhZGluZyBhbmQgdXNpbmcgdGhlIGNvbnRhaW5lciBkaXJlY3RseS5cclxuICogXHJcbiAqIFVzZXMgcmVxdWlyZUFwaVZlcnNpb24oJzEuMTEuMCcpIHRvIGNoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUuXHJcbiAqIFRoaXMgaXMgdGhlIG9mZmljaWFsIE9ic2lkaWFuIEFQSSBtZXRob2QgZm9yIHZlcnNpb24gY2hlY2tpbmcuXHJcbiAqIFxyXG4gKiBAcGFyYW0gY29udGFpbmVyRWwgLSBUaGUgY29udGFpbmVyIGVsZW1lbnQgZm9yIHNldHRpbmdzXHJcbiAqIEBwYXJhbSBoZWFkaW5nIC0gVGhlIGhlYWRpbmcgdGV4dCBmb3IgdGhlIHNldHRpbmdzIGdyb3VwXHJcbiAqIEBwYXJhbSBtYW5pZmVzdElkIC0gVGhlIHBsdWdpbidzIG1hbmlmZXN0IElEIGZvciBDU1Mgc2NvcGluZyAocmVxdWlyZWQgZm9yIGZhbGxiYWNrIG1vZGUpXHJcbiAqIEByZXR1cm5zIEEgY29udGFpbmVyIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIHNldHRpbmdzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2V0dGluZ3NHcm91cChcclxuXHRjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXHJcblx0aGVhZGluZzogc3RyaW5nLFxyXG5cdG1hbmlmZXN0SWQ/OiBzdHJpbmdcclxuKTogU2V0dGluZ3NDb250YWluZXIge1xyXG5cdC8vIENoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUgKEFQSSAxLjExLjArKVxyXG5cdC8vIHJlcXVpcmVBcGlWZXJzaW9uIGlzIHRoZSBvZmZpY2lhbCBPYnNpZGlhbiBBUEkgbWV0aG9kIGZvciB2ZXJzaW9uIGNoZWNraW5nXHJcblx0aWYgKHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjAnKSkge1xyXG5cdFx0Ly8gVXNlIFNldHRpbmdHcm91cCAtIGl0J3MgZ3VhcmFudGVlZCB0byBleGlzdCBpZiByZXF1aXJlQXBpVmVyc2lvbiByZXR1cm5zIHRydWVcclxuXHRcdC8vIEFjY2VzcyBTZXR0aW5nR3JvdXAgZnJvbSB0aGUgb2JzaWRpYW4gbW9kdWxlIGR5bmFtaWNhbGx5IHRvIGF2b2lkIHR5cGUgZXJyb3JzXHJcblx0XHQvLyBXZSBuZWVkIHRvIHVzZSByZXF1aXJlIGhlcmUgYmVjYXVzZSBTZXR0aW5nR3JvdXAgbWF5IG5vdCBiZSBpbiB0eXBlIGRlZmluaXRpb25zIGZvciBvbGRlciB2ZXJzaW9uc1xyXG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1yZXF1aXJlLWltcG9ydHMsIG5vLXVuZGVmXHJcblx0XHRjb25zdCBvYnNpZGlhbk1vZHVsZSA9IHJlcXVpcmUoJ29ic2lkaWFuJykgYXMgeyBTZXR0aW5nR3JvdXA/OiBTZXR0aW5nR3JvdXBDb25zdHJ1Y3RvciB9O1xyXG5cdFx0Y29uc3QgU2V0dGluZ0dyb3VwID0gb2JzaWRpYW5Nb2R1bGUuU2V0dGluZ0dyb3VwO1xyXG5cdFx0aWYgKFNldHRpbmdHcm91cCkge1xyXG5cdFx0XHRjb25zdCBncm91cCA9IG5ldyBTZXR0aW5nR3JvdXAoY29udGFpbmVyRWwpLnNldEhlYWRpbmcoaGVhZGluZyk7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpIHtcclxuXHRcdFx0XHRcdGdyb3VwLmFkZFNldHRpbmcoY2IpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHRcdC8vIEZhbGxiYWNrIGlmIFNldHRpbmdHcm91cCBpcyBub3QgZm91bmQgKHNob3VsZG4ndCBoYXBwZW4gaWYgcmVxdWlyZUFwaVZlcnNpb24gaXMgY29ycmVjdClcclxuXHR9XHJcblx0XHJcblx0Ly8gRmFsbGJhY2sgcGF0aCAoZWl0aGVyIEFQSSA8IDEuMTEuMCBvciBTZXR0aW5nR3JvdXAgbm90IGZvdW5kKVxyXG5cdC8vIEFkZCBzY29waW5nIGNsYXNzIHRvIGNvbnRhaW5lckVsIHRvIHNjb3BlIENTUyB0byBvbmx5IHRoaXMgcGx1Z2luJ3Mgc2V0dGluZ3NcclxuXHRpZiAobWFuaWZlc3RJZCkge1xyXG5cdFx0Y29udGFpbmVyRWwuYWRkQ2xhc3MoYCR7bWFuaWZlc3RJZH0tc2V0dGluZ3MtY29tcGF0YCk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIEZhbGxiYWNrOiBDcmVhdGUgYSBoZWFkaW5nIG1hbnVhbGx5IGFuZCB1c2UgY29udGFpbmVyIGRpcmVjdGx5XHJcblx0Y29uc3QgaGVhZGluZ0VsID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCdzZXR0aW5nLWdyb3VwLWhlYWRpbmcnKTtcclxuXHRoZWFkaW5nRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiBoZWFkaW5nIH0pO1xyXG5cdFxyXG5cdHJldHVybiB7XHJcblx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xyXG5cdFx0XHRjb25zdCBzZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpO1xyXG5cdFx0XHRjYihzZXR0aW5nKTtcclxuXHRcdH1cclxuXHR9O1xyXG59XHJcbiIsICIvKipcbiAqIFR5cGVTY3JpcHQgdHlwZXMgZm9yIEJhc2VzIENNUyBwbHVnaW5cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VzQ01TU2V0dGluZ3Mge1xuXHQvLyBCdWxrIG9wZXJhdGlvbiBzZXR0aW5nc1xuXHRjb25maXJtQnVsa09wZXJhdGlvbnM6IGJvb2xlYW47XG5cdFxuXHQvLyBEZWxldGlvbiBzZXR0aW5nc1xuXHRkZWxldGVQYXJlbnRGb2xkZXI6IGJvb2xlYW47XG5cdGRlbGV0ZVBhcmVudEZvbGRlckZpbGVuYW1lOiBzdHJpbmc7XG5cdGRlbGV0ZVVuaXF1ZUF0dGFjaG1lbnRzOiBib29sZWFuO1xuXHRcblx0Ly8gQ29uZmlybWF0aW9uIGRpYWxvZyBzZXR0aW5nc1xuXHRjb25maXJtRGVsZXRpb25zOiBib29sZWFuO1xuXHRcblx0Ly8gSWNvbiBzZXR0aW5nc1xuXHR1c2VIb21lSWNvbjogYm9vbGVhbjtcblx0XG5cdC8vIFF1aWNrIGVkaXQgc2V0dGluZ3Ncblx0ZW5hYmxlUXVpY2tFZGl0OiBib29sZWFuO1xuXHRxdWlja0VkaXRDb21tYW5kOiBzdHJpbmc7XG5cdHF1aWNrRWRpdENvbW1hbmROYW1lOiBzdHJpbmc7IC8vIFN0b3JlIGNvbW1hbmQgbmFtZSBmb3IgZGlzcGxheVxuXHRxdWlja0VkaXRJY29uOiBzdHJpbmc7IC8vIEljb24gSUQgZm9yIHRoZSBxdWljayBlZGl0IGljb25cblx0cXVpY2tFZGl0T3BlbkZpbGU6IGJvb2xlYW47IC8vIEF0dGVtcHQgdG8gb3BlbiBmaWxlIGFuZCBleGVjdXRlIGNvbW1hbmQgZm9yIHVuc3VwcG9ydGVkIGNvbW1hbmRzXG5cdFxuXHQvLyBUb29sYmFyIGJ1dHRvbiB2aXNpYmlsaXR5IHNldHRpbmdzXG5cdHNob3dUb29sYmFyU2VsZWN0QWxsOiBib29sZWFuO1xuXHRzaG93VG9vbGJhckNsZWFyOiBib29sZWFuO1xuXHRzaG93VG9vbGJhckRyYWZ0OiBib29sZWFuO1xuXHRzaG93VG9vbGJhclB1Ymxpc2g6IGJvb2xlYW47XG5cdHNob3dUb29sYmFyVGFnczogYm9vbGVhbjtcblx0c2hvd1Rvb2xiYXJTZXQ6IGJvb2xlYW47XG5cdHNob3dUb29sYmFyUmVtb3ZlOiBib29sZWFuO1xuXHRzaG93VG9vbGJhckRlbGV0ZTogYm9vbGVhbjtcblx0XG5cdC8vIEFwcGVhcmFuY2Ugc2V0dGluZ3Ncblx0Zm9yY2VTdGF0aWNHaWZJbWFnZXM6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBCYXNlc0NNU1NldHRpbmdzID0ge1xuXHRjb25maXJtQnVsa09wZXJhdGlvbnM6IHRydWUsXG5cdGRlbGV0ZVBhcmVudEZvbGRlcjogZmFsc2UsXG5cdGRlbGV0ZVBhcmVudEZvbGRlckZpbGVuYW1lOiAnaW5kZXgnLFxuXHRkZWxldGVVbmlxdWVBdHRhY2htZW50czogZmFsc2UsXG5cdGNvbmZpcm1EZWxldGlvbnM6IHRydWUsXG5cdHVzZUhvbWVJY29uOiBmYWxzZSxcblx0ZW5hYmxlUXVpY2tFZGl0OiBmYWxzZSxcblx0cXVpY2tFZGl0Q29tbWFuZDogJycsXG5cdHF1aWNrRWRpdENvbW1hbmROYW1lOiAnJyxcblx0cXVpY2tFZGl0SWNvbjogJ3BlbmNpbC1saW5lJyxcblx0cXVpY2tFZGl0T3BlbkZpbGU6IGZhbHNlLFxuXHRzaG93VG9vbGJhclNlbGVjdEFsbDogdHJ1ZSxcblx0c2hvd1Rvb2xiYXJDbGVhcjogdHJ1ZSxcblx0c2hvd1Rvb2xiYXJEcmFmdDogdHJ1ZSxcblx0c2hvd1Rvb2xiYXJQdWJsaXNoOiB0cnVlLFxuXHRzaG93VG9vbGJhclRhZ3M6IHRydWUsXG5cdHNob3dUb29sYmFyU2V0OiB0cnVlLFxuXHRzaG93VG9vbGJhclJlbW92ZTogdHJ1ZSxcblx0c2hvd1Rvb2xiYXJEZWxldGU6IHRydWUsXG5cdGZvcmNlU3RhdGljR2lmSW1hZ2VzOiBmYWxzZSxcbn07XG5cbi8qKlxuICogQ2FyZCBkYXRhIHN0cnVjdHVyZSBmb3IgcmVuZGVyaW5nXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZERhdGEge1xuXHRwYXRoOiBzdHJpbmc7XG5cdG5hbWU6IHN0cmluZztcblx0dGl0bGU6IHN0cmluZztcblx0dGFnczogc3RyaW5nW107XG5cdHlhbWxUYWdzOiBzdHJpbmdbXTtcblx0Y3RpbWU6IG51bWJlcjtcblx0bXRpbWU6IG51bWJlcjtcblx0Zm9sZGVyUGF0aDogc3RyaW5nO1xuXHRzbmlwcGV0Pzogc3RyaW5nO1xuXHRpbWFnZVVybD86IHN0cmluZyB8IHN0cmluZ1tdO1xuXHRoYXNJbWFnZUF2YWlsYWJsZTogYm9vbGVhbjtcblx0cHJvcGVydGllczogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG59XG5cbi8qKlxuICogQnVsayBvcGVyYXRpb24gdHlwZXNcbiAqL1xuZXhwb3J0IHR5cGUgQnVsa09wZXJhdGlvbiA9IFxuXHR8ICdzZXQtZHJhZnQnXG5cdHwgJ3B1Ymxpc2gnXG5cdHwgJ21hbmFnZS10YWdzJ1xuXHR8ICdzZXQtcHJvcGVydHknXG5cdHwgJ3JlbW92ZS1wcm9wZXJ0eSdcblx0fCAnZGVsZXRlJztcbiIsICIvKipcbiAqIEJhc2VzIENNUyBWaWV3XG4gKi9cblxuaW1wb3J0IHsgQmFzZXNWaWV3LCBCYXNlc0VudHJ5LCBRdWVyeUNvbnRyb2xsZXIsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgc2V0Q3NzUHJvcHMgfSBmcm9tICcuLi91dGlscy9jc3MtcHJvcHMnO1xuaW1wb3J0IHR5cGUgQmFzZXNDTVNQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyB0cmFuc2Zvcm1CYXNlc0VudHJpZXMsIHR5cGUgQ2FyZERhdGEsIHR5cGUgQ01TU2V0dGluZ3MgfSBmcm9tICcuLi9zaGFyZWQvZGF0YS10cmFuc2Zvcm0nO1xuaW1wb3J0IHsgcmVhZENNU1NldHRpbmdzIH0gZnJvbSAnLi4vc2hhcmVkL3NldHRpbmdzLXNjaGVtYSc7XG5pbXBvcnQgeyBnZXRGaXJzdEJhc2VzUHJvcGVydHlWYWx1ZSwgZ2V0QWxsQmFzZXNJbWFnZVByb3BlcnR5VmFsdWVzIH0gZnJvbSAnLi4vdXRpbHMvcHJvcGVydHknO1xuaW1wb3J0IHsgbG9hZFNuaXBwZXRzRm9yRW50cmllcywgbG9hZEltYWdlc0ZvckVudHJpZXMgfSBmcm9tICcuLi9zaGFyZWQvY29udGVudC1sb2FkZXInO1xuaW1wb3J0IHsgU2hhcmVkQ2FyZFJlbmRlcmVyIH0gZnJvbSAnLi9zaGFyZWQtcmVuZGVyZXInO1xuaW1wb3J0IHsgQnVsa1Rvb2xiYXIgfSBmcm9tICcuLi9jb21wb25lbnRzL2J1bGstdG9vbGJhcic7XG5pbXBvcnQgeyBzZXR1cE5ld05vdGVJbnRlcmNlcHRvciB9IGZyb20gJy4uL3V0aWxzL25ldy1ub3RlLWludGVyY2VwdG9yJztcbmltcG9ydCB7IFByb3BlcnR5VG9nZ2xlSGFuZGxlciB9IGZyb20gJy4uL3V0aWxzL3Byb3BlcnR5LXRvZ2dsZS1oYW5kbGVyJztcbmltcG9ydCB7IFNjcm9sbExheW91dE1hbmFnZXIgfSBmcm9tICcuLi91dGlscy9zY3JvbGwtbGF5b3V0LW1hbmFnZXInO1xuaW1wb3J0IHsgVmlld1N3aXRjaExpc3RlbmVyIH0gZnJvbSAnLi4vdXRpbHMvdmlldy1zd2l0Y2gtbGlzdGVuZXInO1xuaW1wb3J0IHsgY29udmVydEdpZlRvU3RhdGljIH0gZnJvbSAnLi4vdXRpbHMvaW1hZ2UnO1xuaW1wb3J0IHsgZ2V0RmlsZUZyb250bWF0dGVyIH0gZnJvbSAnLi4vdXRpbHMvZnJvbnRtYXR0ZXItaGVscGVyJztcbmltcG9ydCB7IGlzRW1iZWRkZWRWaWV3IH0gZnJvbSAnLi4vdXRpbHMvZW1iZWRkZWQtdmlldy1kZXRlY3Rvcic7XG5cbmV4cG9ydCBjb25zdCBDTVNfVklFV19UWVBFID0gJ2Jhc2VzLWNtcyc7XG5cbmV4cG9ydCBjbGFzcyBCYXNlc0NNU1ZpZXcgZXh0ZW5kcyBCYXNlc1ZpZXcge1xuXHRyZWFkb25seSB0eXBlID0gQ01TX1ZJRVdfVFlQRTtcblx0cHJpdmF0ZSBjb250YWluZXJFbDogSFRNTEVsZW1lbnQ7XG5cdHByaXZhdGUgcGx1Z2luOiBCYXNlc0NNU1BsdWdpbjtcblx0cHJpdmF0ZSBzZWxlY3RlZEZpbGVzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcblx0cHJpdmF0ZSBzbmlwcGV0czogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuXHRwcml2YXRlIGltYWdlczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgc3RyaW5nW10+ID0ge307XG5cdHByaXZhdGUgaGFzSW1hZ2VBdmFpbGFibGU6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+ID0ge307XG5cdHByaXZhdGUgbWR4RnJvbnRtYXR0ZXJDYWNoZTogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsPiA9IHt9O1xuXHRwcml2YXRlIHVwZGF0ZUxheW91dFJlZjogeyBjdXJyZW50OiAoKCkgPT4gdm9pZCkgfCBudWxsIH0gPSB7IGN1cnJlbnQ6IG51bGwgfTtcblx0cHJpdmF0ZSBwcm9wZXJ0eU9ic2VydmVyczogUmVzaXplT2JzZXJ2ZXJbXSA9IFtdO1xuXHRwcml2YXRlIGNhcmRSZW5kZXJlcjogU2hhcmVkQ2FyZFJlbmRlcmVyO1xuXHRwcml2YXRlIGJ1bGtUb29sYmFyOiBCdWxrVG9vbGJhciB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIGlzUmVmcmVzaGluZ1dpdGhTZWxlY3Rpb246IGJvb2xlYW4gPSBmYWxzZTtcblx0cHJpdmF0ZSBwcm9wZXJ0eVRvZ2dsZUhhbmRsZXI6IFByb3BlcnR5VG9nZ2xlSGFuZGxlciB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIHNjcm9sbExheW91dE1hbmFnZXI6IFNjcm9sbExheW91dE1hbmFnZXI7XG5cdHByaXZhdGUgdmlld1N3aXRjaExpc3RlbmVyOiBWaWV3U3dpdGNoTGlzdGVuZXIgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBzZXR0aW5nc1BvbGxJbnRlcnZhbDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgbGFzdFNldHRpbmdzOiBQYXJ0aWFsPENNU1NldHRpbmdzPiB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIGxhc3RVcGRhdGVJZDogbnVtYmVyID0gMDtcblx0cHJpdmF0ZSBsYXN0QmFzZUlkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBoYXNBdXRvU3dpdGNoZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblx0cHJpdmF0ZSBiYXNlc0NvbnRyb2xsZXI6IFF1ZXJ5Q29udHJvbGxlcjtcblx0cHVibGljIHJlYWRvbmx5IGlzRW1iZWRkZWQ6IGJvb2xlYW47XG5cblx0Y29uc3RydWN0b3IoY29udHJvbGxlcjogUXVlcnlDb250cm9sbGVyLCBjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHBsdWdpbjogQmFzZXNDTVNQbHVnaW4pIHtcblx0XHRzdXBlcihjb250cm9sbGVyKTtcblx0XHR0aGlzLmJhc2VzQ29udHJvbGxlciA9IGNvbnRyb2xsZXI7XG5cdFx0dGhpcy5jb250YWluZXJFbCA9IGNvbnRhaW5lckVsO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHRcdFxuXHRcdC8vIERldGVjdCBpZiB0aGlzIHZpZXcgaXMgZW1iZWRkZWQgaW4gYSBtYXJrZG93biBub3RlXG5cdFx0dGhpcy5pc0VtYmVkZGVkID0gaXNFbWJlZGRlZFZpZXcoY29udGFpbmVyRWwpO1xuXHRcdFxuXHRcdC8vIEluaXRpYWxpemUgc2hhcmVkIGNhcmQgcmVuZGVyZXIgKGNvbmZpZyB3aWxsIGJlIHNldCBsYXRlciBpbiBvbkRhdGFVcGRhdGVkKVxuXHRcdHRoaXMuY2FyZFJlbmRlcmVyID0gbmV3IFNoYXJlZENhcmRSZW5kZXJlcihcblx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0dGhpcy5wbHVnaW4sXG5cdFx0XHR0aGlzLnByb3BlcnR5T2JzZXJ2ZXJzLFxuXHRcdFx0dGhpcy51cGRhdGVMYXlvdXRSZWYsXG5cdFx0XHR1bmRlZmluZWQsIC8vIENvbmZpZyBub3QgYXZhaWxhYmxlIGluIGNvbnN0cnVjdG9yXG5cdFx0XHRjb250cm9sbGVyXG5cdFx0KTtcblx0XHRcblx0XHQvLyBBZGQgQ01TIGNvbnRhaW5lciBjbGFzc2VzXG5cdFx0dGhpcy5jb250YWluZXJFbC5hZGRDbGFzcygnYmFzZXMtY21zJyk7XG5cdFx0dGhpcy5jb250YWluZXJFbC5hZGRDbGFzcygnYmFzZXMtY21zLWNvbnRhaW5lcicpO1xuXHRcdFxuXHRcdC8vIEluaXRpYWxpemUgbWFuYWdlcnMgd2l0aCBlcnJvciBoYW5kbGluZ1xuXHRcdHRyeSB7XG5cdFx0dGhpcy5wcm9wZXJ0eVRvZ2dsZUhhbmRsZXIgPSBuZXcgUHJvcGVydHlUb2dnbGVIYW5kbGVyKFxuXHRcdFx0dGhpcy5hcHAsXG5cdFx0XHR0aGlzLmNvbmZpZyBhcyB7IGdldDogKGtleTogc3RyaW5nKSA9PiB1bmtub3duIH0sXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncyxcblx0XHRcdCgpID0+IHRoaXMub25EYXRhVXBkYXRlZCgpXG5cdFx0KTtcblx0XHR9IGNhdGNoIHtcblx0XHRcdHRoaXMucHJvcGVydHlUb2dnbGVIYW5kbGVyID0gbnVsbDtcblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0Ly8gQ2hlY2sgaWYgY29uZmlnIGlzIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHVzZSBhIHNhZmUgZmFsbGJhY2tcblx0XHRcdGNvbnN0IGNvbmZpZ1RvVXNlID0gKHRoaXMuY29uZmlnICYmIHR5cGVvZiAodGhpcy5jb25maWcgYXMgeyBnZXQ/OiAoa2V5OiBzdHJpbmcpID0+IHVua25vd24gfSkuZ2V0ID09PSAnZnVuY3Rpb24nKVxuXHRcdFx0XHQ/ICh0aGlzLmNvbmZpZyBhcyB7IGdldDogKGtleTogc3RyaW5nKSA9PiB1bmtub3duIH0pXG5cdFx0XHRcdDogeyBnZXQ6ICgpID0+IHVuZGVmaW5lZCB9O1xuXHRcdFx0XG5cdFx0XHR0aGlzLnNjcm9sbExheW91dE1hbmFnZXIgPSBuZXcgU2Nyb2xsTGF5b3V0TWFuYWdlcihcblx0XHRcdFx0dGhpcy5jb250YWluZXJFbCxcblx0XHRcdFx0dGhpcy5hcHAsXG5cdFx0XHRcdGNvbmZpZ1RvVXNlLFxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncyxcblx0XHRcdFx0KCkgPT4gdGhpcy5vbkRhdGFVcGRhdGVkKCksXG5cdFx0XHRcdChjbGVhbnVwKSA9PiB0aGlzLnJlZ2lzdGVyKGNsZWFudXApXG5cdFx0XHQpO1xuXHRcdH0gY2F0Y2gge1xuXHRcdFx0Ly8gQ3JlYXRlIGEgbWluaW1hbCBmYWxsYmFjayB3aXRoIGEgZHVtbXkgY29uZmlnXG5cdFx0XHRjb25zdCBkdW1teUNvbmZpZyA9IHsgZ2V0OiAoKSA9PiB1bmRlZmluZWQgfTtcblx0XHRcdHRoaXMuc2Nyb2xsTGF5b3V0TWFuYWdlciA9IG5ldyBTY3JvbGxMYXlvdXRNYW5hZ2VyKFxuXHRcdFx0XHR0aGlzLmNvbnRhaW5lckVsLFxuXHRcdFx0XHR0aGlzLmFwcCxcblx0XHRcdFx0ZHVtbXlDb25maWcsXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLFxuXHRcdFx0XHQoKSA9PiB0aGlzLm9uRGF0YVVwZGF0ZWQoKSxcblx0XHRcdFx0KGNsZWFudXApID0+IHRoaXMucmVnaXN0ZXIoY2xlYW51cClcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHR0aGlzLnZpZXdTd2l0Y2hMaXN0ZW5lciA9IG5ldyBWaWV3U3dpdGNoTGlzdGVuZXIoXG5cdFx0XHR0aGlzLmNvbnRhaW5lckVsLFxuXHRcdFx0dGhpcy5wbHVnaW4sXG5cdFx0XHR0aGlzLmNvbmZpZyBhcyB7IGdldE5hbWU/OiAoKSA9PiBzdHJpbmc7IG5hbWU/OiBzdHJpbmcgfSxcblx0XHRcdCh0aGlzIGFzIHVua25vd24gYXMgeyBjb250cm9sbGVyPzogeyBnZXRCYXNlTmFtZT86ICgpID0+IHN0cmluZzsgYmFzZU5hbWU/OiBzdHJpbmcgfSB9KS5jb250cm9sbGVyLFxuXHRcdFx0dGhpcy5kYXRhIGFzIHsgYmFzZU5hbWU/OiBzdHJpbmcgfSB8IHVuZGVmaW5lZCxcblx0XHRcdHRoaXMuc2VsZWN0ZWRGaWxlcyxcblx0XHRcdCgpID0+IHRoaXMudXBkYXRlU2VsZWN0aW9uVUkoKSxcblx0XHRcdChjbGVhbnVwKSA9PiB0aGlzLnJlZ2lzdGVyKGNsZWFudXApXG5cdFx0KTtcblx0XHR9IGNhdGNoIHtcblx0XHRcdHRoaXMudmlld1N3aXRjaExpc3RlbmVyID0gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBTZXR1cCB2aWV3IHN3aXRjaCBsaXN0ZW5lciAtIHdyYXBzIGhhbmRsZVNlbGVjdGlvbkNoYW5nZVxuXHRcdGlmICh0aGlzLnZpZXdTd2l0Y2hMaXN0ZW5lcikge1xuXHRcdGNvbnN0IG9yaWdpbmFsSGFuZGxlU2VsZWN0aW9uQ2hhbmdlID0gdGhpcy5oYW5kbGVTZWxlY3Rpb25DaGFuZ2UuYmluZCh0aGlzKTtcblx0XHR0aGlzLmhhbmRsZVNlbGVjdGlvbkNoYW5nZSA9IHRoaXMudmlld1N3aXRjaExpc3RlbmVyLnNldHVwKG9yaWdpbmFsSGFuZGxlU2VsZWN0aW9uQ2hhbmdlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogU29ydCBlbnRyaWVzIGJ5IHByb3BlcnR5IHVzaW5nIGNvbnNpc3RlbnQgbG9naWMgZm9yIGJvdGggTUQgYW5kIE1EWCBmaWxlc1xuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBzb3J0RW50cmllc0J5UHJvcGVydHkoZW50cmllczogQmFzZXNFbnRyeVtdLCBwcm9wZXJ0eU5hbWU6IHN0cmluZywgZGlyZWN0aW9uOiAnYXNjJyB8ICdkZXNjJyk6IFByb21pc2U8QmFzZXNFbnRyeVtdPiB7XG5cdFx0aWYgKCFwcm9wZXJ0eU5hbWUgfHwgcHJvcGVydHlOYW1lID09PSAnJykge1xuXHRcdFx0cmV0dXJuIGVudHJpZXM7XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIHNwZWNpYWwgZmlsZSBwcm9wZXJ0aWVzXG5cdFx0aWYgKHByb3BlcnR5TmFtZSA9PT0gJ2ZpbGUuY3RpbWUnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ2ZpbGUubXRpbWUnKSB7XG5cdFx0XHRjb25zdCBpc0N0aW1lID0gcHJvcGVydHlOYW1lID09PSAnZmlsZS5jdGltZSc7XG5cdFx0XHRyZXR1cm4gWy4uLmVudHJpZXNdLnNvcnQoKGEsIGIpID0+IHtcblx0XHRcdFx0Y29uc3QgYVRpbWUgPSBpc0N0aW1lID8gYS5maWxlLnN0YXQuY3RpbWUgOiBhLmZpbGUuc3RhdC5tdGltZTtcblx0XHRcdFx0Y29uc3QgYlRpbWUgPSBpc0N0aW1lID8gYi5maWxlLnN0YXQuY3RpbWUgOiBiLmZpbGUuc3RhdC5tdGltZTtcblx0XHRcdFx0Y29uc3QgY29tcGFyaXNvbiA9IGFUaW1lIC0gYlRpbWU7XG5cdFx0XHRcdHJldHVybiBkaXJlY3Rpb24gPT09ICdkZXNjJyA/IC1jb21wYXJpc29uIDogY29tcGFyaXNvbjtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8vIEZvciBvdGhlciBwcm9wZXJ0aWVzLCB1c2UgYXN5bmMgcHJvcGVydHkgcmVzb2x1dGlvblxuXHRcdGNvbnN0IGVudHJpZXNXaXRoVmFsdWVzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG5cdFx0XHRlbnRyaWVzLm1hcChhc3luYyAoZW50cnkpID0+IHtcblx0XHRcdFx0Y29uc3QgdmFsdWUgPSBhd2FpdCBnZXRGaXJzdEJhc2VzUHJvcGVydHlWYWx1ZShlbnRyeSwgcHJvcGVydHlOYW1lLCB0aGlzLmFwcCk7XG5cdFx0XHRcdHJldHVybiB7IGVudHJ5LCB2YWx1ZSB9O1xuXHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0cmV0dXJuIGVudHJpZXNXaXRoVmFsdWVzXG5cdFx0XHQuc29ydCgoYSwgYikgPT4ge1xuXHRcdFx0XHRjb25zdCBhVmFsID0gYS52YWx1ZTtcblx0XHRcdFx0Y29uc3QgYlZhbCA9IGIudmFsdWU7XG5cblx0XHRcdFx0Ly8gSGFuZGxlIG51bGwvdW5kZWZpbmVkIHZhbHVlcyAoc29ydCB0byBlbmQpXG5cdFx0XHRcdGlmIChhVmFsID09IG51bGwgJiYgYlZhbCA9PSBudWxsKSByZXR1cm4gMDtcblx0XHRcdFx0aWYgKGFWYWwgPT0gbnVsbCkgcmV0dXJuIDE7IC8vIG51bGwgc29ydHMgYWZ0ZXJcblx0XHRcdFx0aWYgKGJWYWwgPT0gbnVsbCkgcmV0dXJuIC0xOyAvLyBudWxsIHNvcnRzIGFmdGVyXG5cblx0XHRcdFx0Ly8gUGFyc2UgZGF0ZXMgZm9yIGJvdGggZW50cmllcyB1c2luZyB0aGUgc2FtZSBsb2dpYyBhcyB0aGUgcmVuZGVyZXJcblx0XHRcdFx0Y29uc3QgYURhdGUgPSB0aGlzLnBhcnNlRGF0ZVZhbHVlKGFWYWwpO1xuXHRcdFx0XHRjb25zdCBiRGF0ZSA9IHRoaXMucGFyc2VEYXRlVmFsdWUoYlZhbCk7XG5cblx0XHRcdFx0Ly8gSWYgYm90aCBhcmUgdmFsaWQgZGF0ZXMsIGNvbXBhcmUgdGhlbVxuXHRcdFx0XHRpZiAoYURhdGUgJiYgYkRhdGUpIHtcblx0XHRcdFx0XHRjb25zdCBjb21wYXJpc29uID0gYURhdGUuZ2V0VGltZSgpIC0gYkRhdGUuZ2V0VGltZSgpO1xuXHRcdFx0XHRcdHJldHVybiBkaXJlY3Rpb24gPT09ICdkZXNjJyA/IC1jb21wYXJpc29uIDogY29tcGFyaXNvbjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIElmIG9ubHkgb25lIGlzIGEgZGF0ZSwgZGF0ZXMgc29ydCBmaXJzdFxuXHRcdFx0XHRpZiAoYURhdGUgJiYgIWJEYXRlKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRpcmVjdGlvbiA9PT0gJ2Rlc2MnID8gLTEgOiAxOyAvLyBkYXRlcyBzb3J0IGJlZm9yZSBub24tZGF0ZXNcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIWFEYXRlICYmIGJEYXRlKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRpcmVjdGlvbiA9PT0gJ2Rlc2MnID8gMSA6IC0xOyAvLyBkYXRlcyBzb3J0IGJlZm9yZSBub24tZGF0ZXNcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIE5laXRoZXIgaXMgYSBkYXRlLCBmYWxsIGJhY2sgdG8gc3RyaW5nIGNvbXBhcmlzb25cblx0XHRcdFx0Y29uc3QgYVN0ciA9IHRoaXMudmFsdWVUb1N0cmluZyhhVmFsKTtcblx0XHRcdFx0Y29uc3QgYlN0ciA9IHRoaXMudmFsdWVUb1N0cmluZyhiVmFsKTtcblx0XHRcdFx0Y29uc3QgY29tcGFyaXNvbiA9IGFTdHIubG9jYWxlQ29tcGFyZShiU3RyKTtcblx0XHRcdFx0cmV0dXJuIGRpcmVjdGlvbiA9PT0gJ2Rlc2MnID8gLWNvbXBhcmlzb24gOiBjb21wYXJpc29uO1xuXHRcdFx0fSlcblx0XHRcdC5tYXAoaXRlbSA9PiBpdGVtLmVudHJ5KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBQYXJzZSBhIGRhdGUgdmFsdWUgdXNpbmcgdGhlIHNhbWUgbG9naWMgYXMgdGhlIHNoYXJlZCByZW5kZXJlclxuXHQgKi9cblx0cHJpdmF0ZSBwYXJzZURhdGVWYWx1ZSh2YWx1ZTogdW5rbm93bik6IERhdGUgfCBudWxsIHtcblx0XHRpZiAoIXZhbHVlKSByZXR1cm4gbnVsbDtcblxuXHRcdC8vIEhhbmRsZSBCYXNlcyBBUEkgZGF0ZSBvYmplY3RzXG5cdFx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgJ2RhdGUnIGluIHZhbHVlICYmIHZhbHVlLmRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7XG5cdFx0XHRyZXR1cm4gdmFsdWUuZGF0ZTtcblx0XHR9XG5cblx0XHQvLyBFeHRyYWN0IGRhdGEgZnJvbSBCYXNlcyBBUEkgZm9ybWF0XG5cdFx0bGV0IGRhdGE6IHVua25vd24gPSB2YWx1ZTtcblx0XHRpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiAnZGF0YScgaW4gdmFsdWUpIHtcblx0XHRcdGRhdGEgPSAodmFsdWUgYXMgeyBkYXRhOiB1bmtub3duIH0pLmRhdGE7XG5cdFx0fVxuXG5cdFx0aWYgKCFkYXRhKSByZXR1cm4gbnVsbDtcblxuXHRcdC8vIEhhbmRsZSBEYXRlIG9iamVjdHMgKGluY2x1ZGluZyB0aG9zZSBmcm9tIFlBTUwgcGFyc2luZylcblx0XHRpZiAoZGF0YSBpbnN0YW5jZW9mIERhdGUpIHtcblx0XHRcdHJldHVybiBkYXRhO1xuXHRcdH1cblxuXHRcdC8vIEhhbmRsZSBkYXRlLWxpa2Ugb2JqZWN0cyAoWUFNTCBwYXJzZXJzIHNvbWV0aW1lcyByZXR1cm4gY3VzdG9tIERhdGUgb2JqZWN0cylcblx0XHRpZiAoZGF0YSAmJiB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgJ2dldFRpbWUnIGluIGRhdGEpIHtcblx0XHRcdGNvbnN0IGRhdGVMaWtlID0gZGF0YSBhcyB7IGdldFRpbWU6ICgpID0+IG51bWJlciB9O1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgdGltZXN0YW1wID0gZGF0ZUxpa2UuZ2V0VGltZSgpO1xuXHRcdFx0XHRpZiAodHlwZW9mIHRpbWVzdGFtcCA9PT0gJ251bWJlcicgJiYgIWlzTmFOKHRpbWVzdGFtcCkpIHtcblx0XHRcdFx0XHRyZXR1cm4gbmV3IERhdGUodGltZXN0YW1wKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdC8vIEZhbGwgdGhyb3VnaCB0byBzdHJpbmcvbnVtYmVyIGhhbmRsaW5nXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIHN0cmluZ3MgLSBlc3BlY2lhbGx5IElTTyBkYXRlIHN0cmluZ3MgbGlrZSBcIjIwMjUtMTItMjlcIlxuXHRcdGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdGNvbnN0IGRhdGVTdHIgPSBkYXRhLnRyaW0oKTtcblx0XHRcdC8vIFRyeSBwYXJzaW5nIGFzIElTTyBkYXRlIChZWVlZLU1NLUREKSAtIHRoaXMgaXMgd2hhdCBPYnNpZGlhbiB1c2VzXG5cdFx0XHQvLyBBZGQgdGltZSBjb21wb25lbnQgdG8gYXZvaWQgdGltZXpvbmUgaXNzdWVzOiBcIjIwMjUtMTItMjlcIiAtPiBcIjIwMjUtMTItMjlUMDA6MDA6MDBcIlxuXHRcdFx0Y29uc3QgaXNvRGF0ZVN0ciA9IGRhdGVTdHIuaW5jbHVkZXMoJ1QnKSA/IGRhdGVTdHIgOiBgJHtkYXRlU3RyfVQwMDowMDowMGA7XG5cdFx0XHRjb25zdCBwYXJzZWREYXRlID0gbmV3IERhdGUoaXNvRGF0ZVN0cik7XG5cdFx0XHRpZiAoIWlzTmFOKHBhcnNlZERhdGUuZ2V0VGltZSgpKSkge1xuXHRcdFx0XHRyZXR1cm4gcGFyc2VkRGF0ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEZhbGxiYWNrIHRvIGRpcmVjdCBEYXRlIGNvbnN0cnVjdG9yIGZvciBvdGhlciBmb3JtYXRzIGxpa2UgXCI5LzYvMjAyNVwiXG5cdFx0XHRcdGNvbnN0IGZhbGxiYWNrRGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHIpO1xuXHRcdFx0XHRpZiAoIWlzTmFOKGZhbGxiYWNrRGF0ZS5nZXRUaW1lKCkpKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbGxiYWNrRGF0ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEhhbmRsZSBudW1iZXJzICh0aW1lc3RhbXBzKVxuXHRcdGlmICh0eXBlb2YgZGF0YSA9PT0gJ251bWJlcicpIHtcblx0XHRcdGNvbnN0IHBhcnNlZERhdGUgPSBuZXcgRGF0ZShkYXRhKTtcblx0XHRcdGlmICghaXNOYU4ocGFyc2VkRGF0ZS5nZXRUaW1lKCkpKSB7XG5cdFx0XHRcdHJldHVybiBwYXJzZWREYXRlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnQgYSB2YWx1ZSB0byBzdHJpbmcgZm9yIGNvbXBhcmlzb25cblx0ICovXG5cdHByaXZhdGUgdmFsdWVUb1N0cmluZyh2YWx1ZTogdW5rbm93bik6IHN0cmluZyB7XG5cdFx0aWYgKCF2YWx1ZSkgcmV0dXJuICcnO1xuXG5cdFx0Ly8gRXh0cmFjdCBkYXRhIGZyb20gQmFzZXMgQVBJIGZvcm1hdFxuXHRcdGxldCBkYXRhOiB1bmtub3duID0gdmFsdWU7XG5cdFx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgJ2RhdGEnIGluIHZhbHVlKSB7XG5cdFx0XHRkYXRhID0gKHZhbHVlIGFzIHsgZGF0YTogdW5rbm93biB9KS5kYXRhO1xuXHRcdH1cblxuXHRcdGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdHJldHVybiBkYXRhO1xuXHRcdH0gZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09ICdudW1iZXInIHx8IHR5cGVvZiBkYXRhID09PSAnYm9vbGVhbicpIHtcblx0XHRcdHJldHVybiBTdHJpbmcoZGF0YSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiAnJztcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQ29udGludWUgcHJvY2Vzc2luZyBkYXRhIGFmdGVyIHNvcnRpbmcgaXMgY29tcGxldGVcblx0ICovXG5cdHByaXZhdGUgYXN5bmMgY29udGludWVEYXRhUHJvY2Vzc2luZyhcblx0XHRwcm9jZXNzZWRHcm91cHM6IEFycmF5PHsgZ3JvdXA6IHsgaGFzS2V5OiAoKSA9PiBib29sZWFuOyBrZXk/OiB1bmtub3duOyBlbnRyaWVzOiBCYXNlc0VudHJ5W10gfTsgZW50cmllczogQmFzZXNFbnRyeVtdIH0+LFxuXHRcdHNldHRpbmdzOiBDTVNTZXR0aW5ncyxcblx0XHR0b3RhbEVudHJpZXNDb3VudDogbnVtYmVyLFxuXHRcdHNhdmVkU2Nyb2xsVG9wOiBudW1iZXIsXG5cdFx0dXBkYXRlSWQ6IG51bWJlclxuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBpc1N0aWxsVmFsaWQgPSAoKSA9PiB1cGRhdGVJZCA9PT0gdGhpcy5sYXN0VXBkYXRlSWQ7XG5cblx0XHQvLyBDb2xsZWN0IHZpc2libGUgZW50cmllcyBhY3Jvc3MgYWxsIGdyb3VwcyAodXAgdG8gZGlzcGxheWVkQ291bnQpXG5cdFx0Y29uc3QgdmlzaWJsZUVudHJpZXM6IEJhc2VzRW50cnlbXSA9IFtdO1xuXHRcdGxldCByZW1haW5pbmdDb3VudCA9IHRoaXMuc2Nyb2xsTGF5b3V0TWFuYWdlci5nZXREaXNwbGF5ZWRDb3VudCgpO1xuXG5cdFx0Zm9yIChjb25zdCBwcm9jZXNzZWRHcm91cCBvZiBwcm9jZXNzZWRHcm91cHMpIHtcblx0XHRcdGlmIChyZW1haW5pbmdDb3VudCA8PSAwKSBicmVhaztcblx0XHRcdGNvbnN0IGVudHJpZXNUb1Rha2UgPSBNYXRoLm1pbihwcm9jZXNzZWRHcm91cC5lbnRyaWVzLmxlbmd0aCwgcmVtYWluaW5nQ291bnQpO1xuXHRcdFx0dmlzaWJsZUVudHJpZXMucHVzaCguLi5wcm9jZXNzZWRHcm91cC5lbnRyaWVzLnNsaWNlKDAsIGVudHJpZXNUb1Rha2UpKTtcblx0XHRcdHJlbWFpbmluZ0NvdW50IC09IGVudHJpZXNUb1Rha2U7XG5cdFx0fVxuXG5cdFx0Ly8gTG9hZCBzbmlwcGV0cyBhbmQgaW1hZ2VzIE9OTFkgZm9yIGRpc3BsYXllZCBlbnRyaWVzXG5cdFx0YXdhaXQgdGhpcy5sb2FkQ29udGVudEZvckVudHJpZXModmlzaWJsZUVudHJpZXMsIHNldHRpbmdzKTtcblxuXHRcdGlmICghaXNTdGlsbFZhbGlkKCkpIHJldHVybjtcblxuXHRcdC8vIFNldCB1cCBpbnRlcmNlcHRvciBvbmNlIGNvbmZpZyBpcyBhdmFpbGFibGUgKG9ubHkgb24gZmlyc3QgY2FsbClcblx0XHRpZiAodGhpcy5jb25maWcgJiYgISh0aGlzLmNvbnRhaW5lckVsIGFzIHVua25vd24gYXMgeyBfX2Ntc0ludGVyY2VwdG9yU2V0dXA/OiBib29sZWFuIH0pLl9fY21zSW50ZXJjZXB0b3JTZXR1cCkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0KHRoaXMuY29udGFpbmVyRWwgYXMgdW5rbm93biBhcyB7IF9fY21zSW50ZXJjZXB0b3JTZXR1cD86IGJvb2xlYW4gfSkuX19jbXNJbnRlcmNlcHRvclNldHVwID0gdHJ1ZTtcblx0XHRcdFx0Y29uc3QgY29udGFpbmVyV2l0aENvbmZpZyA9IHRoaXMuY29udGFpbmVyRWwgYXMgdW5rbm93biBhcyB7XG5cdFx0XHRcdFx0X19jbXNDb25maWc/OiB7IGdldDogKGtleTogc3RyaW5nKSA9PiB1bmtub3duIH07XG5cdFx0XHRcdFx0X19jbXNWaWV3PzogQmFzZXNDTVNWaWV3O1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRjb250YWluZXJXaXRoQ29uZmlnLl9fY21zQ29uZmlnID0gdGhpcy5jb25maWc7XG5cdFx0XHRcdGNvbnRhaW5lcldpdGhDb25maWcuX19jbXNWaWV3ID0gdGhpcztcblx0XHRcdFx0c2V0dXBOZXdOb3RlSW50ZXJjZXB0b3IoXG5cdFx0XHRcdFx0XHR0aGlzLmFwcCxcblx0XHRcdFx0XHR0aGlzLmNvbnRhaW5lckVsLFxuXHRcdFx0XHRcdHRoaXMuY29uZmlnLFxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLFxuXHRcdFx0XHRcdChjbGVhbnVwKSA9PiB0aGlzLnJlZ2lzdGVyKGNsZWFudXApXG5cdFx0XHRcdCk7XG5cdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0Ly8gRmFpbGVkIHRvIHNldHVwIGludGVyY2VwdG9yIC0gY29udGludWUgYW55d2F5XG5cdFx0XHRcdCh0aGlzLmNvbnRhaW5lckVsIGFzIHVua25vd24gYXMgeyBfX2Ntc0ludGVyY2VwdG9yU2V0dXA/OiBib29sZWFuIH0pLl9fY21zSW50ZXJjZXB0b3JTZXR1cCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCFpc1N0aWxsVmFsaWQoKSkgcmV0dXJuO1xuXG5cdFx0Ly8gVXBkYXRlIGNhcmQgcmVuZGVyZXIgd2l0aCBjb25maWcgKG5vdyBhdmFpbGFibGUpXG5cdFx0KHRoaXMuY2FyZFJlbmRlcmVyIGFzIHVua25vd24gYXMgeyBiYXNlc0NvbmZpZz86IHsgZ2V0PzogKGtleTogc3RyaW5nKSA9PiB1bmtub3duIH0gfSkuYmFzZXNDb25maWcgPSB0aGlzLmNvbmZpZztcblxuXHRcdC8vIFVwZGF0ZSBjYXJkIHJlbmRlcmVyIHdpdGggTURYIGZyb250bWF0dGVyIGNhY2hlIGZvciBzeW5jaHJvbm91cyByZW5kZXJpbmdcblx0XHRpZiAodGhpcy5jYXJkUmVuZGVyZXIgJiYgdHlwZW9mICh0aGlzLmNhcmRSZW5kZXJlciBhcyB7IHNldE1keEZyb250bWF0dGVyQ2FjaGU/OiAoY2FjaGU6IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbD4pID0+IHZvaWQgfSkuc2V0TWR4RnJvbnRtYXR0ZXJDYWNoZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0KHRoaXMuY2FyZFJlbmRlcmVyIGFzIHsgc2V0TWR4RnJvbnRtYXR0ZXJDYWNoZTogKGNhY2hlOiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGw+KSA9PiB2b2lkIH0pLnNldE1keEZyb250bWF0dGVyQ2FjaGUodGhpcy5tZHhGcm9udG1hdHRlckNhY2hlKTtcblx0XHR9XG5cblx0XHQvLyBDbGVhciBhbmQgcmUtcmVuZGVyIGFmdGVyIGNvbnRlbnQgaXMgbG9hZGVkXG5cdFx0dGhpcy5jb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0Ly8gQ2xlYXIgTURYIGZyb250bWF0dGVyIGNhY2hlIHdoZW4gcmUtcmVuZGVyaW5nXG5cdFx0dGhpcy5tZHhGcm9udG1hdHRlckNhY2hlID0ge307XG5cblx0XHQvLyBEaXNjb25uZWN0IG9sZCBwcm9wZXJ0eSBvYnNlcnZlcnMgYmVmb3JlIHJlLXJlbmRlcmluZ1xuXHRcdHRoaXMucHJvcGVydHlPYnNlcnZlcnMuZm9yRWFjaChvYnMgPT4gb2JzLmRpc2Nvbm5lY3QoKSk7XG5cdFx0dGhpcy5wcm9wZXJ0eU9ic2VydmVycyA9IFtdO1xuXG5cdFx0Ly8gQ3JlYXRlIGNhcmRzIGZlZWQgY29udGFpbmVyXG5cdFx0Y29uc3QgZmVlZEVsID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoJ2Jhc2VzLWNtcy1ncmlkJyk7XG5cblx0XHQvLyBSZW5kZXIgZ3JvdXBzIHdpdGggaGVhZGVyc1xuXHRcdGxldCBkaXNwbGF5ZWRTb0ZhciA9IDA7XG5cblx0XHRsZXQgdG90YWxDYXJkc1JlbmRlcmVkID0gMDtcblxuXHRcdGZvciAoY29uc3QgcHJvY2Vzc2VkR3JvdXAgb2YgcHJvY2Vzc2VkR3JvdXBzKSB7XG5cdFx0XHRpZiAoZGlzcGxheWVkU29GYXIgPj0gdGhpcy5zY3JvbGxMYXlvdXRNYW5hZ2VyLmdldERpc3BsYXllZENvdW50KCkpIGJyZWFrO1xuXG5cdFx0XHRjb25zdCBlbnRyaWVzVG9EaXNwbGF5ID0gTWF0aC5taW4ocHJvY2Vzc2VkR3JvdXAuZW50cmllcy5sZW5ndGgsIHRoaXMuc2Nyb2xsTGF5b3V0TWFuYWdlci5nZXREaXNwbGF5ZWRDb3VudCgpIC0gZGlzcGxheWVkU29GYXIpO1xuXHRcdFx0aWYgKGVudHJpZXNUb0Rpc3BsYXkgPT09IDApIGNvbnRpbnVlO1xuXG5cdFx0XHRjb25zdCBncm91cEVudHJpZXMgPSBwcm9jZXNzZWRHcm91cC5lbnRyaWVzLnNsaWNlKDAsIGVudHJpZXNUb0Rpc3BsYXkpO1xuXG5cdFx0XHQvLyBDcmVhdGUgZ3JvdXAgY29udGFpbmVyXG5cdFx0XHRjb25zdCBncm91cEVsID0gZmVlZEVsLmNyZWF0ZURpdignYmFzZXMtY21zLWdyb3VwJyk7XG5cblx0XHRcdC8vIFJlbmRlciBncm91cCBoZWFkZXIgaWYga2V5IGV4aXN0c1xuXHRcdFx0aWYgKHByb2Nlc3NlZEdyb3VwLmdyb3VwLmhhc0tleSgpKSB7XG5cdFx0XHRcdGNvbnN0IGhlYWRlckVsID0gZ3JvdXBFbC5jcmVhdGVEaXYoJ2Jhc2VzLWNtcy1ncm91cC1oZWFkaW5nJyk7XG5cdFx0XHRcdGNvbnN0IHZhbHVlRWwgPSBoZWFkZXJFbC5jcmVhdGVEaXYoJ2Jhc2VzLWNtcy1ncm91cC12YWx1ZScpO1xuXHRcdFx0XHRjb25zdCBrZXlWYWx1ZSA9IHByb2Nlc3NlZEdyb3VwLmdyb3VwLmtleT8udG9TdHJpbmcoKSB8fCAnJztcblx0XHRcdFx0dmFsdWVFbC5zZXRUZXh0KGtleVZhbHVlKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUmVuZGVyIGNhcmRzIGluIHRoaXMgZ3JvdXBcblx0XHRcdGNvbnN0IGNhcmRzID0gYXdhaXQgdHJhbnNmb3JtQmFzZXNFbnRyaWVzKFxuXHRcdFx0XHRncm91cEVudHJpZXMsXG5cdFx0XHRcdHNldHRpbmdzLFxuXHRcdFx0XHQnJywgLy8gc29ydE1ldGhvZCBub3QgdXNlZCBpbiB0cmFuc2Zvcm1CYXNlc0VudHJpZXNcblx0XHRcdFx0ZmFsc2UsXG5cdFx0XHRcdHRoaXMuc25pcHBldHMsXG5cdFx0XHRcdHRoaXMuaW1hZ2VzLFxuXHRcdFx0XHR0aGlzLmhhc0ltYWdlQXZhaWxhYmxlLFxuXHRcdFx0XHR0aGlzLmFwcCxcblx0XHRcdFx0dGhpcy5tZHhGcm9udG1hdHRlckNhY2hlXG5cdFx0XHQpO1xuXG5cdFx0XHRpZiAoIWlzU3RpbGxWYWxpZCgpKSByZXR1cm47XG5cblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgY2FyZHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0Y29uc3QgY2FyZCA9IGNhcmRzW2ldO1xuXHRcdFx0XHRjb25zdCBlbnRyeSA9IGdyb3VwRW50cmllc1tpXTtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHR0aGlzLnJlbmRlckNhcmQoZ3JvdXBFbCwgY2FyZCwgZW50cnksIGRpc3BsYXllZFNvRmFyICsgaSwgc2V0dGluZ3MpO1xuXHRcdFx0XHRcdHRvdGFsQ2FyZHNSZW5kZXJlZCsrO1xuXHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHQvLyBDb250aW51ZSByZW5kZXJpbmcgb3RoZXIgY2FyZHMgZXZlbiBpZiBvbmUgZmFpbHNcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRkaXNwbGF5ZWRTb0ZhciArPSBlbnRyaWVzVG9EaXNwbGF5O1xuXHRcdH1cblxuXHRcdGlmICghaXNTdGlsbFZhbGlkKCkpIHJldHVybjtcblxuXHRcdC8vIENSSVRJQ0FMOiBJZiBubyBjYXJkcyB3ZXJlIHJlbmRlcmVkLCBzaG93IGVycm9yIGluc3RlYWQgb2YgYmxhbmsgc2NyZWVuXG5cdFx0aWYgKHRvdGFsQ2FyZHNSZW5kZXJlZCA9PT0gMCAmJiB0b3RhbEVudHJpZXNDb3VudCA+IDApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignTm8gY2FyZHMgd2VyZSByZW5kZXJlZCBkZXNwaXRlIGhhdmluZyBlbnRyaWVzLiBDaGVjayBjYXJkIHJlbmRlcmluZyBsb2dpYy4nKTtcblx0XHR9XG5cblx0XHQvLyBJbWFnZXMgYXJlIG5vdyBzZXQgdmlhIGJhY2tncm91bmQtaW1hZ2UgaW4gcmVuZGVyQ2FyZCwgc28gbm8gYmF0Y2ggbG9hZGluZyBuZWVkZWRcblx0XHQvLyBJbWFnZXMgd2lsbCBiZSB1cGRhdGVkIGJ5IHVwZGF0ZUNhcmRJbWFnZSB3aGVuIHRoZXkgbG9hZFxuXG5cdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyaW5nXG5cdFx0aWYgKHNhdmVkU2Nyb2xsVG9wID4gMCkge1xuXHRcdFx0dGhpcy5jb250YWluZXJFbC5zY3JvbGxUb3AgPSBzYXZlZFNjcm9sbFRvcDtcblx0XHR9XG5cblx0XHQvLyBTZXR1cCBpbmZpbml0ZSBzY3JvbGwgYW5kIHJlc2l6ZSBvYnNlcnZlclxuXHRcdHRoaXMuc2Nyb2xsTGF5b3V0TWFuYWdlci5zZXR1cEluZmluaXRlU2Nyb2xsKHRvdGFsRW50cmllc0NvdW50KTtcblx0XHR0aGlzLnNjcm9sbExheW91dE1hbmFnZXIuc2V0dXBSZXNpemVPYnNlcnZlcigpO1xuXG5cdFx0Ly8gU2V0dXAgc2V0dGluZ3MgcG9sbGluZyB0byBkZXRlY3QgY2hhbmdlcyBhbmQgcmVmcmVzaCB2aWV3XG5cdFx0dGhpcy5zZXR1cFNldHRpbmdzUG9sbGluZyhzZXR0aW5ncyk7XG5cblx0XHQvLyBVcGRhdGUgc2VsZWN0aW9uIFVJXG5cdFx0dGhpcy51cGRhdGVTZWxlY3Rpb25VSSgpO1xuXG5cdFx0Ly8gQ2xlYXIgbG9hZGluZyBmbGFnIGFmdGVyIGFzeW5jIHdvcmsgY29tcGxldGVzXG5cdFx0dGhpcy5zY3JvbGxMYXlvdXRNYW5hZ2VyLnNldElzTG9hZGluZyhmYWxzZSk7XG5cdH1cblxuXHRvbkRhdGFVcGRhdGVkKCk6IHZvaWQge1xuXHRcdGNvbnN0IHVwZGF0ZUlkID0gKyt0aGlzLmxhc3RVcGRhdGVJZDtcblxuXHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdC8vIEd1YXJkOiBjaGVjayBpZiB0aGlzIHVwZGF0ZSBpcyBzdGlsbCB2YWxpZFxuXHRcdFx0XHRjb25zdCBpc1N0aWxsVmFsaWQgPSAoKSA9PiB1cGRhdGVJZCA9PT0gdGhpcy5sYXN0VXBkYXRlSWQ7XG5cblx0XHRcdFx0Ly8gR3VhcmQ6IHdhaXQgZm9yIGRhdGEgdG8gYmUgcmVhZHkgLSBORVZFUiByZXR1cm4gZWFybHkgYW5kIGxlYXZlIGJsYW5rIHNjcmVlblxuXHRcdFx0XHRpZiAoIXRoaXMuZGF0YSkge1xuXHRcdFx0XHRcdC8vIFNob3cgbG9hZGluZyBzdGF0ZSBpbnN0ZWFkIG9mIGJsYW5rIHNjcmVlblxuXHRcdFx0XHRcdGlmICh0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdFx0Y29uc3QgbG9hZGluZ0VsID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoJ2Jhc2VzLWNtcy1sb2FkaW5nJyk7XG5cdFx0XHRcdFx0XHRsb2FkaW5nRWwuc2V0VGV4dCgnTG9hZGluZy4uLicpO1xuXHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMobG9hZGluZ0VsLCB7XG5cdFx0XHRcdFx0XHRcdHBhZGRpbmc6ICcyMHB4Jyxcblx0XHRcdFx0XHRcdFx0dGV4dEFsaWduOiAnY2VudGVyJ1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIFJldHJ5IGFmdGVyIGEgc2hvcnQgZGVsYXlcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdGlmIChpc1N0aWxsVmFsaWQoKSAmJiB0aGlzLmRhdGEpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5vbkRhdGFVcGRhdGVkKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgMTAwKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBTeW5jIHdpdGggZGVmYXVsdCB2aWV3IGlmIGRlZmluZWQgYW5kIG5vdCBhbHJlYWR5IGFjdGl2ZVxuXHRcdFx0XHRjb25zdCBkYXRhID0gdGhpcy5kYXRhIGFzIHVua25vd24gYXMgeyBkZWZhdWx0Vmlldz86IHN0cmluZyB9O1xuXHRcdFx0XHRjb25zdCB0b3BMZXZlbERlZmF1bHRWaWV3ID0gZGF0YT8uZGVmYXVsdFZpZXc7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zdCBjb25maWcgPSB0aGlzLmNvbmZpZyBhcyB1bmtub3duIGFzIHsgZ2V0TmFtZT86ICgpID0+IHN0cmluZzsgbmFtZT86IHN0cmluZyB9O1xuXHRcdFx0XHRjb25zdCBjdXJyZW50Vmlld05hbWUgPSB0eXBlb2YgY29uZmlnLmdldE5hbWUgPT09ICdmdW5jdGlvbicgXG5cdFx0XHRcdFx0PyBjb25maWcuZ2V0TmFtZSgpIFxuXHRcdFx0XHRcdDogY29uZmlnLm5hbWU7XG5cblx0XHRcdFx0aWYgKHRvcExldmVsRGVmYXVsdFZpZXcgJiYgY3VycmVudFZpZXdOYW1lICE9PSB0b3BMZXZlbERlZmF1bHRWaWV3KSB7XG5cdFx0XHRcdFx0Ly8gT25seSBkbyB0aGlzIG9uY2Ugb24gaW5pdGlhbCBsb2FkIHRvIGF2b2lkIGxvb3Bcblx0XHRcdFx0XHRpZiAoIXRoaXMuaGFzQXV0b1N3aXRjaGVkKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmhhc0F1dG9Td2l0Y2hlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vIExvZ2ljIHRvIHRyaWdnZXIgYSB2aWV3IHN3aXRjaCB2aWEgdGhlIGNvcmUgQmFzZXMgcGx1Z2luIGNvbnRyb2xsZXJcblx0XHRcdFx0XHRcdGNvbnN0IGNvbnRyb2xsZXIgPSB0aGlzLmJhc2VzQ29udHJvbGxlciBhcyB1bmtub3duIGFzIHsgXG5cdFx0XHRcdFx0XHRcdHNlbGVjdFZpZXc/OiAodmlldzogc3RyaW5nKSA9PiB2b2lkO1xuXHRcdFx0XHRcdFx0XHRzZXRWaWV3PzogKHZpZXc6IHN0cmluZykgPT4gdm9pZDtcblx0XHRcdFx0XHRcdFx0c3dpdGNoVmlldz86ICh2aWV3OiBzdHJpbmcpID0+IHZvaWQ7XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvLyBEaWFnbm9zdGljIGxvZyB0byBoZWxwIHRyb3VibGVzaG9vdCBpZiBpdCBzdGlsbCBkb2Vzbid0IHdvcmtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZGVidWcoJ0Jhc2VzIENNUzogRGVmYXVsdCB2aWV3IHN5bmMgdHJpZ2dlcmVkJywge1xuXHRcdFx0XHRcdFx0XHR0YXJnZXQ6IHRvcExldmVsRGVmYXVsdFZpZXcsXG5cdFx0XHRcdFx0XHRcdGN1cnJlbnQ6IGN1cnJlbnRWaWV3TmFtZVxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgY29udHJvbGxlci5zZWxlY3RWaWV3ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuc2VsZWN0Vmlldyh0b3BMZXZlbERlZmF1bHRWaWV3KTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuOyAvLyBFeGl0IGVhcmx5IGFzIHRoZSB2aWV3IHdpbGwgYmUgcmVwbGFjZWRcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIGNvbnRyb2xsZXIuc2V0VmlldyA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnNldFZpZXcodG9wTGV2ZWxEZWZhdWx0Vmlldyk7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIGNvbnRyb2xsZXIuc3dpdGNoVmlldyA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnN3aXRjaFZpZXcodG9wTGV2ZWxEZWZhdWx0Vmlldyk7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBDaGVjayBpZiB0aGUgYmFzZSBjb25maWd1cmF0aW9uIGhhcyBjaGFuZ2VkXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRCYXNlSWQgPSB0aGlzLmdldEJhc2VJZGVudGlmaWVyKCk7XG5cdFx0XHRcdGlmICh0aGlzLmxhc3RCYXNlSWQgIT09IGN1cnJlbnRCYXNlSWQpIHtcblx0XHRcdFx0XHR0aGlzLmxhc3RCYXNlSWQgPSBjdXJyZW50QmFzZUlkO1xuXHRcdFx0XHRcdC8vIFJlc2V0IHNjcm9sbCBhbmQgZGlzcGxheWVkIGNvdW50IHdoZW4gc3dpdGNoaW5nIGJhc2VzXG5cdFx0XHRcdFx0dGhpcy5zY3JvbGxMYXlvdXRNYW5hZ2VyLnJlc2V0U2Nyb2xsKCk7XG5cdFx0XHRcdFx0Ly8gQ2xlYXIgY2FjaGVzIHRoYXQgYXJlIHNwZWNpZmljIHRvIGEgYmFzZVxuXHRcdFx0XHRcdHRoaXMuc25pcHBldHMgPSB7fTtcblx0XHRcdFx0XHR0aGlzLmltYWdlcyA9IHt9O1xuXHRcdFx0XHRcdHRoaXMuaGFzSW1hZ2VBdmFpbGFibGUgPSB7fTtcblx0XHRcdFx0XHR0aGlzLm1keEZyb250bWF0dGVyQ2FjaGUgPSB7fTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEVuc3VyZSB3ZSBoYXZlIHZhbGlkIGRhdGEgc3RydWN0dXJlc1xuXHRcdFx0XHRpZiAoIXRoaXMuZGF0YS5ncm91cGVkRGF0YSB8fCAhdGhpcy5kYXRhLmRhdGEpIHtcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdGlmIChpc1N0aWxsVmFsaWQoKSAmJiB0aGlzLmRhdGEgJiYgdGhpcy5kYXRhLmdyb3VwZWREYXRhICYmIHRoaXMuZGF0YS5kYXRhKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMub25EYXRhVXBkYXRlZCgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIDEwMCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCFpc1N0aWxsVmFsaWQoKSkgcmV0dXJuO1xuXG5cdFx0XHRjb25zdCBncm91cGVkRGF0YSA9IHRoaXMuZGF0YS5ncm91cGVkRGF0YTtcblx0XHRcdGNvbnN0IGFsbEVudHJpZXMgPSB0aGlzLmRhdGEuZGF0YTtcblxuXHRcdFx0Ly8gUmVhZCBzZXR0aW5ncyBmcm9tIEJhc2VzIGNvbmZpZ1xuXHRcdFx0Y29uc3Qgc2V0dGluZ3MgPSByZWFkQ01TU2V0dGluZ3MoXG5cdFx0XHRcdHRoaXMuY29uZmlnLFxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5nc1xuXHRcdFx0KTtcblxuXHRcdFx0aWYgKCFpc1N0aWxsVmFsaWQoKSkgcmV0dXJuO1xuXG5cdFx0XHQvLyBVcGRhdGUgY29uZmlnIHJlZmVyZW5jZSBpbiBzY3JvbGwgbGF5b3V0IG1hbmFnZXIgaWYgaXQncyBub3cgYXZhaWxhYmxlXG5cdFx0XHRpZiAodGhpcy5jb25maWcgJiYgdHlwZW9mICh0aGlzLmNvbmZpZyBhcyB7IGdldD86IChrZXk6IHN0cmluZykgPT4gdW5rbm93biB9KS5nZXQgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHR0aGlzLnNjcm9sbExheW91dE1hbmFnZXIudXBkYXRlQ29uZmlnKHRoaXMuY29uZmlnIGFzIHsgZ2V0OiAoa2V5OiBzdHJpbmcpID0+IHVua25vd24gfSk7XG5cdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdC8vIElnbm9yZSAtIGNvbmZpZyB1cGRhdGUgaXMgb3B0aW9uYWxcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBVcGRhdGUgZ3JpZCBsYXlvdXQgdXNpbmcgc2Nyb2xsIGxheW91dCBtYW5hZ2VyXG5cdFx0XHR0aGlzLnNjcm9sbExheW91dE1hbmFnZXIudXBkYXRlR3JpZExheW91dChzZXR0aW5ncyk7XG5cblx0XHRcdC8vIFNhdmUgc2Nyb2xsIHBvc2l0aW9uIGJlZm9yZSByZS1yZW5kZXJpbmdcblx0XHRcdGNvbnN0IHNhdmVkU2Nyb2xsVG9wID0gdGhpcy5jb250YWluZXJFbC5zY3JvbGxUb3A7XG5cblx0XHRcdC8vIEdldCBzb3J0IGNvbmZpZ3MgKHVzZWQgZm9yIGN1c3RvbSBzb3J0aW5nKVxuXHRcdFx0Y29uc3Qgc29ydENvbmZpZ3MgPSB0aGlzLmNvbmZpZy5nZXRTb3J0KCk7XG5cblx0XHRcdC8vIFByb2Nlc3MgZ3JvdXBzIGFuZCBhcHBseSBjdXN0b20gc29ydGluZyBmb3IgcHJvcGVydGllc1xuXHRcdFx0bGV0IHByb2Nlc3NlZEdyb3VwczogQXJyYXk8eyBncm91cDogeyBoYXNLZXk6ICgpID0+IGJvb2xlYW47IGtleT86IHVua25vd247IGVudHJpZXM6IEJhc2VzRW50cnlbXSB9OyBlbnRyaWVzOiBCYXNlc0VudHJ5W10gfT4gPSBncm91cGVkRGF0YS5tYXAoZ3JvdXAgPT4gKHtcblx0XHRcdFx0Z3JvdXA6IGdyb3VwIGFzIHsgaGFzS2V5OiAoKSA9PiBib29sZWFuOyBrZXk/OiB1bmtub3duOyBlbnRyaWVzOiBCYXNlc0VudHJ5W10gfSxcblx0XHRcdFx0ZW50cmllczogWy4uLmdyb3VwLmVudHJpZXNdXG5cdFx0XHR9KSk7XG5cblx0XHRcdC8vIEFwcGx5IGN1c3RvbSBzb3J0aW5nIGlmIHNvcnRpbmcgYnkgYSBwcm9wZXJ0eSAobm90IGp1c3QgZmlsZSB0aW1lKVxuXHRcdFx0aWYgKHNvcnRDb25maWdzICYmIHNvcnRDb25maWdzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0Y29uc3QgZmlyc3RTb3J0ID0gc29ydENvbmZpZ3NbMF07XG5cdFx0XHRcdGNvbnN0IHByb3BlcnR5ID0gZmlyc3RTb3J0LnByb3BlcnR5O1xuXHRcdFx0XHRjb25zdCBkaXJlY3Rpb24gPSBmaXJzdFNvcnQuZGlyZWN0aW9uLnRvTG93ZXJDYXNlKCkgYXMgJ2FzYycgfCAnZGVzYyc7XG5cblx0XHRcdFx0Ly8gT25seSBhcHBseSBjdXN0b20gc29ydGluZyBmb3IgcHJvcGVydGllcyAobm90IGZpbGUuY3RpbWUvZmlsZS5tdGltZSB3aGljaCBhcmUgaGFuZGxlZCBieSBCYXNlcylcblx0XHRcdFx0aWYgKHByb3BlcnR5ICYmICFwcm9wZXJ0eS5pbmNsdWRlcygnY3RpbWUnKSAmJiAhcHJvcGVydHkuaW5jbHVkZXMoJ210aW1lJykpIHtcblx0XHRcdFx0XHQvLyBVc2UgSUlGRSB0byBoYW5kbGUgYXN5bmMgc29ydGluZ1xuXHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdC8vIEZsYXR0ZW4gYWxsIGVudHJpZXMgZnJvbSBhbGwgZ3JvdXBzXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGFsbEVudHJpZXM6IEJhc2VzRW50cnlbXSA9IFtdO1xuXHRcdFx0XHRcdFx0XHRmb3IgKGNvbnN0IHByb2Nlc3NlZEdyb3VwIG9mIHByb2Nlc3NlZEdyb3Vwcykge1xuXHRcdFx0XHRcdFx0XHRcdGFsbEVudHJpZXMucHVzaCguLi5wcm9jZXNzZWRHcm91cC5lbnRyaWVzKTtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdC8vIFNvcnQgYWxsIGVudHJpZXMgYnkgdGhlIHByb3BlcnR5XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNvcnRlZEVudHJpZXMgPSBhd2FpdCB0aGlzLnNvcnRFbnRyaWVzQnlQcm9wZXJ0eShhbGxFbnRyaWVzLCBwcm9wZXJ0eSwgZGlyZWN0aW9uKTtcblxuXHRcdFx0XHRcdFx0XHQvLyBSZS1ncm91cCBlbnRyaWVzIChwdXQgYWxsIGluIGEgc2luZ2xlIGdyb3VwIHNpbmNlIHdlJ3JlIG92ZXJyaWRpbmcgQmFzZXMnIGdyb3VwaW5nKVxuXHRcdFx0XHRcdFx0XHRjb25zdCBzb3J0ZWRQcm9jZXNzZWRHcm91cHM6IEFycmF5PHsgZ3JvdXA6IHsgaGFzS2V5OiAoKSA9PiBib29sZWFuOyBrZXk/OiB1bmtub3duOyBlbnRyaWVzOiBCYXNlc0VudHJ5W10gfTsgZW50cmllczogQmFzZXNFbnRyeVtdIH0+ID0gW3tcblx0XHRcdFx0XHRcdFx0XHRncm91cDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0aGFzS2V5OiAoKSA9PiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0XHRcdGtleTogbnVsbCxcblx0XHRcdFx0XHRcdFx0XHRcdGVudHJpZXM6IHNvcnRlZEVudHJpZXNcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdGVudHJpZXM6IHNvcnRlZEVudHJpZXNcblx0XHRcdFx0XHRcdFx0fV07XG5cblx0XHRcdFx0XHRcdFx0Ly8gQ29udGludWUgcHJvY2Vzc2luZyB3aXRoIHNvcnRlZCBncm91cHNcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5jb250aW51ZURhdGFQcm9jZXNzaW5nKHNvcnRlZFByb2Nlc3NlZEdyb3Vwcywgc2V0dGluZ3MsIGFsbEVudHJpZXMubGVuZ3RoLCBzYXZlZFNjcm9sbFRvcCwgdXBkYXRlSWQpO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcignQmFzZXMgQ01TOiBFcnJvciBkdXJpbmcgY3VzdG9tIHNvcnRpbmc6JywgZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHQvLyBGYWxsIGJhY2sgdG8gb3JpZ2luYWwgcHJvY2Vzc2luZ1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmNvbnRpbnVlRGF0YVByb2Nlc3NpbmcocHJvY2Vzc2VkR3JvdXBzLCBzZXR0aW5ncywgYWxsRW50cmllcy5sZW5ndGgsIHNhdmVkU2Nyb2xsVG9wLCB1cGRhdGVJZCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0XHRyZXR1cm47IC8vIEV4aXQgZWFybHksIHByb2Nlc3Npbmcgd2lsbCBjb250aW51ZSBpbiB0aGUgYXN5bmMgY2FsbGJhY2tcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb250aW51ZSB3aXRoIHRoZSByZXN0IG9mIHByb2Nlc3Npbmdcblx0XHRcdHRoaXMuY29udGludWVEYXRhUHJvY2Vzc2luZyhwcm9jZXNzZWRHcm91cHMsIHNldHRpbmdzLCBhbGxFbnRyaWVzLmxlbmd0aCwgc2F2ZWRTY3JvbGxUb3AsIHVwZGF0ZUlkKTtcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdC8vIEVuc3VyZSBsb2FkaW5nIGZsYWcgaXMgY2xlYXJlZCBldmVuIG9uIGVycm9yXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0dGhpcy5zY3JvbGxMYXlvdXRNYW5hZ2VyLnNldElzTG9hZGluZyhmYWxzZSk7XG5cdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdC8vIElnbm9yZSBjbGVhbnVwIGVycm9yc1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBJZiBjb250YWluZXIgaXMgZW1wdHkgZHVlIHRvIGVycm9yLCBzaG93IGVycm9yIG1lc3NhZ2Vcblx0XHRcdFx0aWYgKHRoaXMuY29udGFpbmVyRWwgJiYgdGhpcy5jb250YWluZXJFbC5pc0Nvbm5lY3RlZCkge1xuXHRcdFx0XHRcdHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTtcblx0XHRcdFx0XHRjb25zdCBlcnJvckVsID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoJ2Jhc2VzLWNtcy1lcnJvcicpO1xuXHRcdFx0XHRcdGVycm9yRWwuc2V0VGV4dCgnRXJyb3IgbG9hZGluZyB2aWV3LiBDaGVjayBjb25zb2xlIGZvciBkZXRhaWxzLicpO1xuXHRcdFx0XHRcdHNldENzc1Byb3BzKGVycm9yRWwsIHtcblx0XHRcdFx0XHRcdHBhZGRpbmc6ICcyMHB4Jyxcblx0XHRcdFx0XHRcdHRleHRBbGlnbjogJ2NlbnRlcicsXG5cdFx0XHRcdFx0XHRjb2xvcjogJ3ZhcigtLXRleHQtZXJyb3IpJyxcblx0XHRcdFx0XHRcdG1hcmdpbjogJzIwcHgnXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc29sZS5lcnJvcignQmFzZXMgQ01TOiBFcnJvciBpbiBvbkRhdGFVcGRhdGVkOicsIGVycm9yKTtcblx0XHRcdH1cblx0XHR9KSgpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldCBhIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY3VycmVudCBiYXNlIGNvbmZpZ3VyYXRpb25cblx0ICovXG5cdHByaXZhdGUgZ2V0QmFzZUlkZW50aWZpZXIoKTogc3RyaW5nIHwgbnVsbCB7XG5cdFx0dHJ5IHtcblx0XHRcdGlmICh0aGlzLmNvbmZpZyAmJiB0eXBlb2YgKHRoaXMuY29uZmlnIGFzIHVua25vd24gYXMgeyBnZXROYW1lPzogKCkgPT4gc3RyaW5nIH0pLmdldE5hbWUgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0cmV0dXJuICh0aGlzLmNvbmZpZyBhcyB1bmtub3duIGFzIHsgZ2V0TmFtZTogKCkgPT4gc3RyaW5nIH0pLmdldE5hbWUoKTtcblx0XHRcdH1cblx0XHRcdGlmICh0aGlzLmNvbmZpZyAmJiAodGhpcy5jb25maWcgYXMgdW5rbm93biBhcyB7IG5hbWU/OiBzdHJpbmcgfSkubmFtZSkge1xuXHRcdFx0XHRyZXR1cm4gU3RyaW5nKCh0aGlzLmNvbmZpZyBhcyB1bmtub3duIGFzIHsgbmFtZTogc3RyaW5nIH0pLm5hbWUpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRoaXMuZGF0YSAmJiAodGhpcy5kYXRhIGFzIHVua25vd24gYXMgeyBiYXNlTmFtZT86IHN0cmluZyB9KS5iYXNlTmFtZSkge1xuXHRcdFx0XHRyZXR1cm4gU3RyaW5nKCh0aGlzLmRhdGEgYXMgdW5rbm93biBhcyB7IGJhc2VOYW1lOiBzdHJpbmcgfSkuYmFzZU5hbWUpO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2gge1xuXHRcdFx0Ly8gSWdub3JlIGVycm9yc1xuXHRcdH1cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8qKlxuXHQgKiBTZXR1cCBwb2xsaW5nIHRvIGRldGVjdCBzZXR0aW5ncyBjaGFuZ2VzIGFuZCByZWZyZXNoIHZpZXdcblx0ICovXG5cdHByaXZhdGUgc2V0dXBTZXR0aW5nc1BvbGxpbmcoaW5pdGlhbFNldHRpbmdzOiBDTVNTZXR0aW5ncyk6IHZvaWQge1xuXHRcdC8vIE9ubHkgc2V0IHVwIG9uY2Vcblx0XHRpZiAodGhpcy5zZXR0aW5nc1BvbGxJbnRlcnZhbCAhPT0gbnVsbCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFN0b3JlIGluaXRpYWwgc2V0dGluZ3MgZm9yIGNvbXBhcmlzb25cblx0XHR0aGlzLmxhc3RTZXR0aW5ncyA9IHtcblx0XHRcdGRlc2NyaXB0aW9uUHJvcGVydHk6IGluaXRpYWxTZXR0aW5ncy5kZXNjcmlwdGlvblByb3BlcnR5LFxuXHRcdFx0c2hvd1RleHRQcmV2aWV3OiBpbml0aWFsU2V0dGluZ3Muc2hvd1RleHRQcmV2aWV3LFxuXHRcdFx0ZmFsbGJhY2tUb0NvbnRlbnQ6IGluaXRpYWxTZXR0aW5ncy5mYWxsYmFja1RvQ29udGVudCxcblx0XHRcdHRydW5jYXRlUHJldmlld1Byb3BlcnR5OiBpbml0aWFsU2V0dGluZ3MudHJ1bmNhdGVQcmV2aWV3UHJvcGVydHksXG5cdFx0XHRpbWFnZVByb3BlcnR5OiBpbml0aWFsU2V0dGluZ3MuaW1hZ2VQcm9wZXJ0eSxcblx0XHRcdGltYWdlRm9ybWF0OiBpbml0aWFsU2V0dGluZ3MuaW1hZ2VGb3JtYXQsXG5cdFx0XHRmYWxsYmFja1RvRW1iZWRzOiBpbml0aWFsU2V0dGluZ3MuZmFsbGJhY2tUb0VtYmVkcyxcblx0XHRcdHByb3BlcnR5RGlzcGxheTE6IGluaXRpYWxTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxLFxuXHRcdFx0cHJvcGVydHlEaXNwbGF5MjogaW5pdGlhbFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTIsXG5cdFx0XHRwcm9wZXJ0eURpc3BsYXkzOiBpbml0aWFsU2V0dGluZ3MucHJvcGVydHlEaXNwbGF5Myxcblx0XHRcdHByb3BlcnR5RGlzcGxheTQ6IGluaXRpYWxTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk0LFxuXHRcdFx0cHJvcGVydHlEaXNwbGF5NTogaW5pdGlhbFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTUsXG5cdFx0XHRwcm9wZXJ0eURpc3BsYXk2OiBpbml0aWFsU2V0dGluZ3MucHJvcGVydHlEaXNwbGF5Nixcblx0XHRcdHByb3BlcnR5RGlzcGxheTc6IGluaXRpYWxTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk3LFxuXHRcdFx0cHJvcGVydHlEaXNwbGF5ODogaW5pdGlhbFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTgsXG5cdFx0XHRwcm9wZXJ0eURpc3BsYXk5OiBpbml0aWFsU2V0dGluZ3MucHJvcGVydHlEaXNwbGF5OSxcblx0XHRcdHByb3BlcnR5RGlzcGxheTEwOiBpbml0aWFsU2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTAsXG5cdFx0XHRwcm9wZXJ0eURpc3BsYXkxMTogaW5pdGlhbFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTExLFxuXHRcdFx0cHJvcGVydHlEaXNwbGF5MTI6IGluaXRpYWxTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMixcblx0XHRcdHByb3BlcnR5RGlzcGxheTEzOiBpbml0aWFsU2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTMsXG5cdFx0XHRwcm9wZXJ0eURpc3BsYXkxNDogaW5pdGlhbFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTE0LFxuXHRcdH07XG5cblx0XHQvLyBQb2xsIGV2ZXJ5IDEwMG1zIHRvIGNoZWNrIGZvciBzZXR0aW5ncyBjaGFuZ2VzXG5cdFx0dGhpcy5zZXR0aW5nc1BvbGxJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG5cdFx0XHRpZiAoIXRoaXMuY29uZmlnIHx8IHR5cGVvZiB0aGlzLmNvbmZpZy5nZXQgIT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0cmV0dXJuOyAvLyBDb25maWcgbm90IHJlYWR5IHlldFxuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBjdXJyZW50U2V0dGluZ3MgPSByZWFkQ01TU2V0dGluZ3MoXG5cdFx0XHRcdHRoaXMuY29uZmlnLFxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5nc1xuXHRcdFx0KTtcblxuXHRcdFx0Ly8gU2tpcCBpZiBsYXN0U2V0dGluZ3MgaXMgbm90IGluaXRpYWxpemVkIHlldFxuXHRcdFx0aWYgKCF0aGlzLmxhc3RTZXR0aW5ncykge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIENoZWNrIGlmIGFueSByZWxldmFudCBzZXR0aW5ncyBoYXZlIGNoYW5nZWRcblx0XHRcdGNvbnN0IHNldHRpbmdzQ2hhbmdlZCA9IFxuXHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5kZXNjcmlwdGlvblByb3BlcnR5ICE9PSBjdXJyZW50U2V0dGluZ3MuZGVzY3JpcHRpb25Qcm9wZXJ0eSB8fFxuXHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5zaG93VGV4dFByZXZpZXcgIT09IGN1cnJlbnRTZXR0aW5ncy5zaG93VGV4dFByZXZpZXcgfHxcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MuZmFsbGJhY2tUb0NvbnRlbnQgIT09IGN1cnJlbnRTZXR0aW5ncy5mYWxsYmFja1RvQ29udGVudCB8fFxuXHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy50cnVuY2F0ZVByZXZpZXdQcm9wZXJ0eSAhPT0gY3VycmVudFNldHRpbmdzLnRydW5jYXRlUHJldmlld1Byb3BlcnR5IHx8XG5cdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLmltYWdlUHJvcGVydHkgIT09IGN1cnJlbnRTZXR0aW5ncy5pbWFnZVByb3BlcnR5IHx8XG5cdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLmltYWdlRm9ybWF0ICE9PSBjdXJyZW50U2V0dGluZ3MuaW1hZ2VGb3JtYXQgfHxcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MuZmFsbGJhY2tUb0VtYmVkcyAhPT0gY3VycmVudFNldHRpbmdzLmZhbGxiYWNrVG9FbWJlZHMgfHxcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MSAhPT0gY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEgfHxcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MiAhPT0gY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTIgfHxcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MyAhPT0gY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTMgfHxcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NCAhPT0gY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTQgfHxcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NSAhPT0gY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTUgfHxcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NiAhPT0gY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTYgfHxcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NyAhPT0gY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTcgfHxcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5OCAhPT0gY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTggfHxcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5OSAhPT0gY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTkgfHxcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTAgIT09IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMCB8fFxuXHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMSAhPT0gY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTExIHx8XG5cdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEyICE9PSBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTIgfHxcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTMgIT09IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMyB8fFxuXHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxNCAhPT0gY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTE0O1xuXG5cdFx0XHRpZiAoc2V0dGluZ3NDaGFuZ2VkKSB7XG5cdFx0XHRcdC8vIENsZWFyIGNhY2hlcyB3aGVuIHJlbGV2YW50IHNldHRpbmdzIGNoYW5nZVxuXHRcdFx0XHRpZiAodGhpcy5sYXN0U2V0dGluZ3MuZGVzY3JpcHRpb25Qcm9wZXJ0eSAhPT0gY3VycmVudFNldHRpbmdzLmRlc2NyaXB0aW9uUHJvcGVydHkgfHxcblx0XHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5zaG93VGV4dFByZXZpZXcgIT09IGN1cnJlbnRTZXR0aW5ncy5zaG93VGV4dFByZXZpZXcgfHxcblx0XHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5mYWxsYmFja1RvQ29udGVudCAhPT0gY3VycmVudFNldHRpbmdzLmZhbGxiYWNrVG9Db250ZW50IHx8XG5cdFx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MudHJ1bmNhdGVQcmV2aWV3UHJvcGVydHkgIT09IGN1cnJlbnRTZXR0aW5ncy50cnVuY2F0ZVByZXZpZXdQcm9wZXJ0eSkge1xuXHRcdFx0XHRcdC8vIENsZWFyIHNuaXBwZXQgY2FjaGUgd2hlbiB0ZXh0IHByZXZpZXcgc2V0dGluZ3MgY2hhbmdlXG5cdFx0XHRcdFx0dGhpcy5zbmlwcGV0cyA9IHt9O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHRoaXMubGFzdFNldHRpbmdzLmltYWdlUHJvcGVydHkgIT09IGN1cnJlbnRTZXR0aW5ncy5pbWFnZVByb3BlcnR5IHx8XG5cdFx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MuaW1hZ2VGb3JtYXQgIT09IGN1cnJlbnRTZXR0aW5ncy5pbWFnZUZvcm1hdCB8fFxuXHRcdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLmZhbGxiYWNrVG9FbWJlZHMgIT09IGN1cnJlbnRTZXR0aW5ncy5mYWxsYmFja1RvRW1iZWRzKSB7XG5cdFx0XHRcdFx0Ly8gQ2xlYXIgaW1hZ2UgY2FjaGUgd2hlbiBpbWFnZSBzZXR0aW5ncyBjaGFuZ2Vcblx0XHRcdFx0XHR0aGlzLmltYWdlcyA9IHt9O1xuXHRcdFx0XHRcdHRoaXMuaGFzSW1hZ2VBdmFpbGFibGUgPSB7fTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFVwZGF0ZSBsYXN0IHNldHRpbmdzXG5cdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzID0ge1xuXHRcdFx0XHRcdGRlc2NyaXB0aW9uUHJvcGVydHk6IGN1cnJlbnRTZXR0aW5ncy5kZXNjcmlwdGlvblByb3BlcnR5LFxuXHRcdFx0XHRcdHNob3dUZXh0UHJldmlldzogY3VycmVudFNldHRpbmdzLnNob3dUZXh0UHJldmlldyxcblx0XHRcdFx0XHRmYWxsYmFja1RvQ29udGVudDogY3VycmVudFNldHRpbmdzLmZhbGxiYWNrVG9Db250ZW50LFxuXHRcdFx0XHRcdHRydW5jYXRlUHJldmlld1Byb3BlcnR5OiBjdXJyZW50U2V0dGluZ3MudHJ1bmNhdGVQcmV2aWV3UHJvcGVydHksXG5cdFx0XHRcdFx0aW1hZ2VQcm9wZXJ0eTogY3VycmVudFNldHRpbmdzLmltYWdlUHJvcGVydHksXG5cdFx0XHRcdFx0aW1hZ2VGb3JtYXQ6IGN1cnJlbnRTZXR0aW5ncy5pbWFnZUZvcm1hdCxcblx0XHRcdFx0XHRmYWxsYmFja1RvRW1iZWRzOiBjdXJyZW50U2V0dGluZ3MuZmFsbGJhY2tUb0VtYmVkcyxcblx0XHRcdFx0XHRwcm9wZXJ0eURpc3BsYXkxOiBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MSxcblx0XHRcdFx0XHRwcm9wZXJ0eURpc3BsYXkyOiBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5Mixcblx0XHRcdFx0XHRwcm9wZXJ0eURpc3BsYXkzOiBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5Myxcblx0XHRcdFx0XHRwcm9wZXJ0eURpc3BsYXk0OiBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NCxcblx0XHRcdFx0XHRwcm9wZXJ0eURpc3BsYXk1OiBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NSxcblx0XHRcdFx0XHRwcm9wZXJ0eURpc3BsYXk2OiBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5Nixcblx0XHRcdFx0XHRwcm9wZXJ0eURpc3BsYXk3OiBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5Nyxcblx0XHRcdFx0XHRwcm9wZXJ0eURpc3BsYXk4OiBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5OCxcblx0XHRcdFx0XHRwcm9wZXJ0eURpc3BsYXk5OiBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5OSxcblx0XHRcdFx0XHRwcm9wZXJ0eURpc3BsYXkxMDogY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEwLFxuXHRcdFx0XHRcdHByb3BlcnR5RGlzcGxheTExOiBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTEsXG5cdFx0XHRcdFx0cHJvcGVydHlEaXNwbGF5MTI6IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMixcblx0XHRcdFx0XHRwcm9wZXJ0eURpc3BsYXkxMzogY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEzLFxuXHRcdFx0XHRcdHByb3BlcnR5RGlzcGxheTE0OiBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTQsXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Ly8gVHJpZ2dlciB2aWV3IHJlZnJlc2hcblx0XHRcdFx0dGhpcy5vbkRhdGFVcGRhdGVkKCk7XG5cdFx0XHR9XG5cdFx0fSwgMTAwKTtcblxuXHRcdC8vIFJlZ2lzdGVyIGNsZWFudXBcblx0XHR0aGlzLnJlZ2lzdGVyKCgpID0+IHtcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzUG9sbEludGVydmFsICE9PSBudWxsKSB7XG5cdFx0XHRcdHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuc2V0dGluZ3NQb2xsSW50ZXJ2YWwpO1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzUG9sbEludGVydmFsID0gbnVsbDtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBQcmVsb2FkIE1EWCBmcm9udG1hdHRlciBmb3IgYWxsIHZpc2libGUgZW50cmllcyB0byBwcmV2ZW50IGZsYXNoaW5nXG5cdCAqIFRoaXMgZW5zdXJlcyBhbGwgTURYIGRhdGEgaXMgYXZhaWxhYmxlIHN5bmNocm9ub3VzbHkgZHVyaW5nIGNhcmQgdHJhbnNmb3JtYXRpb25cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgcHJlbG9hZE1keEZyb250bWF0dGVyKGVudHJpZXM6IEJhc2VzRW50cnlbXSk6IFByb21pc2U8dm9pZD4ge1xuXHRcdC8vIEZpbHRlciB0byBvbmx5IE1EWCBmaWxlcyB0aGF0IGFyZW4ndCBhbHJlYWR5IGNhY2hlZFxuXHRcdGNvbnN0IG1keEVudHJpZXMgPSBlbnRyaWVzLmZpbHRlcihlbnRyeSA9PiB7XG5cdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGVudHJ5LmZpbGUucGF0aCk7XG5cdFx0XHRyZXR1cm4gZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbWR4JyAmJiAhKGVudHJ5LmZpbGUucGF0aCBpbiB0aGlzLm1keEZyb250bWF0dGVyQ2FjaGUpO1xuXHRcdH0pO1xuXG5cdFx0aWYgKG1keEVudHJpZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gTG9hZCBhbGwgTURYIGZyb250bWF0dGVyIGluIHBhcmFsbGVsXG5cdFx0YXdhaXQgUHJvbWlzZS5hbGwoXG5cdFx0XHRtZHhFbnRyaWVzLm1hcChhc3luYyAoZW50cnkpID0+IHtcblx0XHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChlbnRyeS5maWxlLnBhdGgpO1xuXHRcdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGNvbnN0IGZyb250bWF0dGVyID0gYXdhaXQgZ2V0RmlsZUZyb250bWF0dGVyKHRoaXMuYXBwLCBmaWxlKTtcblx0XHRcdFx0XHRcdHRoaXMubWR4RnJvbnRtYXR0ZXJDYWNoZVtlbnRyeS5maWxlLnBhdGhdID0gZnJvbnRtYXR0ZXI7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoYEJhc2VzIENNUzogRXJyb3IgcHJlbG9hZGluZyBwcm9wZXJ0aWVzIGZvciAke2VudHJ5LmZpbGUucGF0aH06YCwgZXJyb3IpO1xuXHRcdFx0XHRcdFx0dGhpcy5tZHhGcm9udG1hdHRlckNhY2hlW2VudHJ5LmZpbGUucGF0aF0gPSBudWxsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHQpO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBsb2FkQ29udGVudEZvckVudHJpZXMoXG5cdFx0ZW50cmllczogQmFzZXNFbnRyeVtdLFxuXHRcdHNldHRpbmdzOiBDTVNTZXR0aW5nc1xuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHQvLyBMb2FkIHNuaXBwZXRzIGZvciB0ZXh0IHByZXZpZXdcblx0XHRpZiAoc2V0dGluZ3Muc2hvd1RleHRQcmV2aWV3KSB7XG5cdFx0XHRjb25zdCBzbmlwcGV0RW50cmllc1Byb21pc2VzID0gZW50cmllc1xuXHRcdFx0XHQuZmlsdGVyKGVudHJ5ID0+ICEoZW50cnkuZmlsZS5wYXRoIGluIHRoaXMuc25pcHBldHMpKVxuXHRcdFx0XHQubWFwKGFzeW5jIGVudHJ5ID0+IHtcblx0XHRcdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGVudHJ5LmZpbGUucGF0aCk7XG5cdFx0XHRcdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgcmV0dXJuIG51bGw7XG5cdFx0XHRcdFx0Y29uc3QgZGVzY1ZhbHVlID0gYXdhaXQgZ2V0Rmlyc3RCYXNlc1Byb3BlcnR5VmFsdWUoZW50cnksIHNldHRpbmdzLmRlc2NyaXB0aW9uUHJvcGVydHksIHRoaXMuYXBwKSBhcyB7IGRhdGE/OiB1bmtub3duIH0gfCBudWxsO1xuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRwYXRoOiBlbnRyeS5maWxlLnBhdGgsXG5cdFx0XHRcdFx0XHRmaWxlLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb25EYXRhOiBkZXNjVmFsdWU/LmRhdGFcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9KTtcblx0XHRcdGNvbnN0IHNuaXBwZXRFbnRyaWVzID0gKGF3YWl0IFByb21pc2UuYWxsKHNuaXBwZXRFbnRyaWVzUHJvbWlzZXMpKVxuXHRcdFx0XHQuZmlsdGVyKChlKTogZSBpcyB7IHBhdGg6IHN0cmluZzsgZmlsZTogVEZpbGU7IGRlc2NyaXB0aW9uRGF0YTogdW5rbm93biB9ID0+IGUgIT09IG51bGwpO1xuXG5cdFx0XHRpZiAoc25pcHBldEVudHJpZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRhd2FpdCBsb2FkU25pcHBldHNGb3JFbnRyaWVzKFxuXHRcdFx0XHRcdHNuaXBwZXRFbnRyaWVzLFxuXHRcdFx0XHRcdHNldHRpbmdzLmZhbGxiYWNrVG9Db250ZW50LFxuXHRcdFx0XHRcdGZhbHNlLFxuXHRcdFx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0XHRcdHRoaXMuc25pcHBldHMsXG5cdFx0XHRcdFx0c2V0dGluZ3MudHJ1bmNhdGVQcmV2aWV3UHJvcGVydHlcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBMb2FkIGltYWdlcyBmb3IgdGh1bWJuYWlsc1xuXHRcdGlmIChzZXR0aW5ncy5pbWFnZUZvcm1hdCAhPT0gJ25vbmUnKSB7XG5cdFx0XHRjb25zdCBpbWFnZUVudHJpZXNQcm9taXNlcyA9IGVudHJpZXNcblx0XHRcdFx0LmZpbHRlcihlbnRyeSA9PiAhKGVudHJ5LmZpbGUucGF0aCBpbiB0aGlzLmltYWdlcykpXG5cdFx0XHRcdC5tYXAoYXN5bmMgZW50cnkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZW50cnkuZmlsZS5wYXRoKTtcblx0XHRcdFx0XHRpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0XHRjb25zdCBpbWFnZVByb3BlcnR5VmFsdWVzID0gYXdhaXQgZ2V0QWxsQmFzZXNJbWFnZVByb3BlcnR5VmFsdWVzKGVudHJ5LCBzZXR0aW5ncy5pbWFnZVByb3BlcnR5LCB0aGlzLmFwcCk7XG5cdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdHBhdGg6IGVudHJ5LmZpbGUucGF0aCxcblx0XHRcdFx0XHRcdGZpbGUsXG5cdFx0XHRcdFx0XHRpbWFnZVByb3BlcnR5VmFsdWVzOiBpbWFnZVByb3BlcnR5VmFsdWVzIGFzIHVua25vd25bXVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0pO1xuXHRcdFx0Y29uc3QgaW1hZ2VFbnRyaWVzID0gKGF3YWl0IFByb21pc2UuYWxsKGltYWdlRW50cmllc1Byb21pc2VzKSlcblx0XHRcdFx0LmZpbHRlcigoZSk6IGUgaXMgTm9uTnVsbGFibGU8dHlwZW9mIGU+ID0+IGUgIT09IG51bGwpO1xuXG5cdFx0XHRpZiAoaW1hZ2VFbnRyaWVzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0YXdhaXQgbG9hZEltYWdlc0ZvckVudHJpZXMoXG5cdFx0XHRcdFx0aW1hZ2VFbnRyaWVzLFxuXHRcdFx0XHRcdHNldHRpbmdzLmZhbGxiYWNrVG9FbWJlZHMsXG5cdFx0XHRcdFx0dGhpcy5hcHAsXG5cdFx0XHRcdFx0dGhpcy5pbWFnZXMsXG5cdFx0XHRcdFx0dGhpcy5oYXNJbWFnZUF2YWlsYWJsZVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBEaXJlY3QgZGVsZXRlIGhhbmRsZXIgZm9yIGNvbnRleHQgbWVudSAtIGRlbGV0ZXMgYSBzaW5nbGUgZmlsZSB3aXRob3V0IHNlbGVjdGlvblxuXHQgKi9cblx0cHJpdmF0ZSBnZXREaXJlY3REZWxldGVIYW5kbGVyKGZpbGVQYXRoOiBzdHJpbmcpOiAoKSA9PiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gYXN5bmMgKCkgPT4ge1xuXHRcdFx0Y29uc3QgeyBwcmVwYXJlRGVsZXRpb25QcmV2aWV3LCBleGVjdXRlU21hcnREZWxldGlvbiB9ID0gYXdhaXQgaW1wb3J0KCcuLi91dGlscy9zbWFydC1kZWxldGlvbicpO1xuXHRcdFx0Y29uc3QgeyBEZWxldGlvblByZXZpZXdNb2RhbCB9ID0gYXdhaXQgaW1wb3J0KCcuLi9jb21wb25lbnRzL2RlbGV0aW9uLXByZXZpZXcnKTtcblx0XHRcdFxuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1EZWxldGlvbnMpIHtcblx0XHRcdFx0Y29uc3QgcHJldmlldyA9IGF3YWl0IHByZXBhcmVEZWxldGlvblByZXZpZXcoXG5cdFx0XHRcdFx0dGhpcy5hcHAsXG5cdFx0XHRcdFx0W2ZpbGVQYXRoXSxcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5nc1xuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IERlbGV0aW9uUHJldmlld01vZGFsKFxuXHRcdFx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0XHRcdHByZXZpZXcsXG5cdFx0XHRcdFx0KCkgPT4ge1xuXHRcdFx0XHRcdFx0Ly8gUmVmcmVzaCB2aWV3IGFmdGVyIGRlbGV0aW9uXG5cdFx0XHRcdFx0XHR0aGlzLm9uRGF0YVVwZGF0ZWQoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdCk7XG5cdFx0XHRcdG1vZGFsLm9wZW4oKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIERpcmVjdCBkZWxldGlvbiB3aXRob3V0IGNvbmZpcm1hdGlvblxuXHRcdFx0XHRjb25zdCBwcmV2aWV3ID0gYXdhaXQgcHJlcGFyZURlbGV0aW9uUHJldmlldyhcblx0XHRcdFx0XHR0aGlzLmFwcCxcblx0XHRcdFx0XHRbZmlsZVBhdGhdLFxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGF3YWl0IGV4ZWN1dGVTbWFydERlbGV0aW9uKHRoaXMuYXBwLCBwcmV2aWV3KTtcblx0XHRcdFx0Ly8gUmVmcmVzaCB2aWV3IGFmdGVyIGRlbGV0aW9uXG5cdFx0XHRcdHRoaXMub25EYXRhVXBkYXRlZCgpO1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckNhcmQoXG5cdFx0Y29udGFpbmVyOiBIVE1MRWxlbWVudCxcblx0XHRjYXJkOiBDYXJkRGF0YSxcblx0XHRlbnRyeTogQmFzZXNFbnRyeSxcblx0XHRpbmRleDogbnVtYmVyLFxuXHRcdHNldHRpbmdzOiBDTVNTZXR0aW5nc1xuXHQpOiB2b2lkIHtcblx0XHRjb25zdCBpc1NlbGVjdGVkID0gdGhpcy5zZWxlY3RlZEZpbGVzLmhhcyhjYXJkLnBhdGgpO1xuXHRcdHJldHVybiB0aGlzLmNhcmRSZW5kZXJlci5yZW5kZXJDYXJkKFxuXHRcdFx0Y29udGFpbmVyLFxuXHRcdFx0Y2FyZCxcblx0XHRcdGVudHJ5LFxuXHRcdFx0c2V0dGluZ3MsXG5cdFx0XHR0aGlzLFxuXHRcdFx0aXNTZWxlY3RlZCxcblx0XHRcdChwYXRoOiBzdHJpbmcsIHNlbGVjdGVkOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdHRoaXMuaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHBhdGgsIHNlbGVjdGVkKTtcblx0XHRcdH0sXG5cdFx0XHQocGF0aDogc3RyaW5nLCBwcm9wZXJ0eTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bikgPT4ge1xuXHRcdFx0XHR2b2lkIHRoaXMuaGFuZGxlUHJvcGVydHlUb2dnbGUocGF0aCwgcHJvcGVydHksIHZhbHVlKTtcblx0XHRcdH0sXG5cdFx0XHR7IGhhbmRsZURlbGV0ZTogdGhpcy5nZXREaXJlY3REZWxldGVIYW5kbGVyKGNhcmQucGF0aCkgfVxuXHRcdCk7XG5cdH1cblxuXHQvKipcblx0ICogVXBkYXRlIGNhcmQgaW1hZ2Ugd2hlbiBpdCBiZWNvbWVzIGF2YWlsYWJsZVxuXHQgKiBDYWxsZWQgYXN5bmNocm9ub3VzbHkgYWZ0ZXIgaW1hZ2VzIGxvYWRcblx0ICovXG5cdHByaXZhdGUgdXBkYXRlQ2FyZEltYWdlKHBhdGg6IHN0cmluZywgaW1hZ2VVcmw6IHN0cmluZyB8IHN0cmluZ1tdKTogdm9pZCB7XG5cdFx0Y29uc3QgY2FyZEVsID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKGAuY2FyZFtkYXRhLXBhdGg9XCIke3BhdGh9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0aWYgKCFjYXJkRWwpIHJldHVybjtcblxuXHRcdGNvbnN0IHVybCA9IEFycmF5LmlzQXJyYXkoaW1hZ2VVcmwpID8gaW1hZ2VVcmxbMF0gOiBpbWFnZVVybDtcblx0XHRpZiAoIXVybCkgcmV0dXJuO1xuXG5cdFx0Ly8gQ2hlY2sgaWYgaW1hZ2UtZW1iZWQgY29udGFpbmVyIGV4aXN0c1xuXHRcdGxldCBpbWFnZUVtYmVkQ29udGFpbmVyID0gY2FyZEVsLnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZS1lbWJlZCcpIGFzIEhUTUxFbGVtZW50O1xuXHRcdGlmICghaW1hZ2VFbWJlZENvbnRhaW5lcikge1xuXHRcdFx0Ly8gTm8gaW1hZ2UgY29udGFpbmVyIC0gbmVlZCB0byBjcmVhdGUgaXRcblx0XHRcdGNvbnN0IHBsYWNlaG9sZGVyID0gY2FyZEVsLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvdmVyLXBsYWNlaG9sZGVyLCAuY2FyZC10aHVtYm5haWwtcGxhY2Vob2xkZXInKTtcblx0XHRcdGNvbnN0IGlzVGh1bWJuYWlsID0gY2FyZEVsLmNsYXNzTGlzdC5jb250YWlucygnaW1hZ2UtZm9ybWF0LXRodW1ibmFpbCcpO1xuXHRcdFx0Y29uc3QgaXNDb3ZlciA9IGNhcmRFbC5jbGFzc0xpc3QuY29udGFpbnMoJ2ltYWdlLWZvcm1hdC1jb3ZlcicpO1xuXHRcdFx0XG5cdFx0XHRpZiAocGxhY2Vob2xkZXIpIHtcblx0XHRcdFx0Ly8gUmVwbGFjZSBwbGFjZWhvbGRlclxuXHRcdFx0XHRjb25zdCBleGlzdGluZ0JhZGdlID0gcGxhY2Vob2xkZXIucXVlcnlTZWxlY3RvcignLmNhcmQtc3RhdHVzLWJhZGdlJyk7XG5cdFx0XHRcdGNvbnN0IGltYWdlQ2xhc3NOYW1lID0gcGxhY2Vob2xkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYXJkLWNvdmVyLXBsYWNlaG9sZGVyJykgPyAnY2FyZC1jb3ZlcicgOiAnY2FyZC10aHVtYm5haWwnO1xuXHRcdFx0XHRjb25zdCBpbWFnZUVsID0gcGxhY2Vob2xkZXIucGFyZW50RWxlbWVudD8uY3JlYXRlRGl2KGltYWdlQ2xhc3NOYW1lKTtcblx0XHRcdFx0aWYgKGltYWdlRWwpIHtcblx0XHRcdFx0XHRpbWFnZUVtYmVkQ29udGFpbmVyID0gaW1hZ2VFbC5jcmVhdGVEaXYoJ2ltYWdlLWVtYmVkJyk7XG5cdFx0XHRcdFx0aWYgKGV4aXN0aW5nQmFkZ2UpIHtcblx0XHRcdFx0XHRcdGltYWdlRWwuYXBwZW5kQ2hpbGQoZXhpc3RpbmdCYWRnZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyLnJlbW92ZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKGlzVGh1bWJuYWlsKSB7XG5cdFx0XHRcdC8vIEZvciB0aHVtYm5haWxzLCBjcmVhdGUgZWxlbWVudCBkaXJlY3RseSBpbiBjb250ZW50Q29udGFpbmVyIChubyBwbGFjZWhvbGRlcnMpXG5cdFx0XHRcdGNvbnN0IGNvbnRlbnRDb250YWluZXIgPSBjYXJkRWwucXVlcnlTZWxlY3RvcignLmNhcmQtY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0XHRpZiAoY29udGVudENvbnRhaW5lcikge1xuXHRcdFx0XHRcdC8vIEluc2VydCB0aHVtYm5haWwgQkVGT1JFIHRleHQtd3JhcHBlciBmb3IgcHJvcGVyIHBvc2l0aW9uaW5nXG5cdFx0XHRcdFx0Y29uc3QgdGV4dFdyYXBwZXIgPSBjb250ZW50Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLXRleHQtd3JhcHBlcicpO1xuXHRcdFx0XHRcdGNvbnN0IGltYWdlRWwgPSB0ZXh0V3JhcHBlclxuXHRcdFx0XHRcdFx0PyBjb250ZW50Q29udGFpbmVyLmluc2VydEJlZm9yZShjb250ZW50Q29udGFpbmVyLmNyZWF0ZURpdignY2FyZC10aHVtYm5haWwnKSwgdGV4dFdyYXBwZXIpXG5cdFx0XHRcdFx0XHQ6IGNvbnRlbnRDb250YWluZXIuY3JlYXRlRGl2KCdjYXJkLXRodW1ibmFpbCcpO1xuXHRcdFx0XHRcdGltYWdlRW1iZWRDb250YWluZXIgPSBpbWFnZUVsLmNyZWF0ZURpdignaW1hZ2UtZW1iZWQnKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChpc0NvdmVyKSB7XG5cdFx0XHRcdC8vIEZvciBjb3ZlciwgY3JlYXRlIGluIGNvbnRlbnRDb250YWluZXJcblx0XHRcdFx0Y29uc3QgY29udGVudENvbnRhaW5lciA9IGNhcmRFbC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1jb250ZW50JykgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdGlmIChjb250ZW50Q29udGFpbmVyKSB7XG5cdFx0XHRcdFx0Y29uc3QgaW1hZ2VFbCA9IGNvbnRlbnRDb250YWluZXIuY3JlYXRlRGl2KCdjYXJkLWNvdmVyJyk7XG5cdFx0XHRcdFx0aW1hZ2VFbWJlZENvbnRhaW5lciA9IGltYWdlRWwuY3JlYXRlRGl2KCdpbWFnZS1lbWJlZCcpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdC8vIFVwZGF0ZSBiYWNrZ3JvdW5kLWltYWdlIG9uIHRoZSBjb250YWluZXJcblx0XHRpZiAoaW1hZ2VFbWJlZENvbnRhaW5lcikge1xuXHRcdFx0Ly8gQ29udmVydCBHSUYgdG8gc3RhdGljIGlmIHNldHRpbmcgaXMgZW5hYmxlZFxuXHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBmaW5hbFVybCA9IGF3YWl0IGNvbnZlcnRHaWZUb1N0YXRpYyh1cmwsIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvcmNlU3RhdGljR2lmSW1hZ2VzKTtcblx0XHRcdFx0aW1hZ2VFbWJlZENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKFwiJHtmaW5hbFVybH1cIilgO1xuXHRcdFx0fSkoKTtcblx0XHRcdFxuXHRcdFx0Ly8gU2V0IGluaXRpYWwgYmFja2dyb3VuZCBpbWFnZSAod2lsbCBiZSB1cGRhdGVkIGlmIEdJRiBjb252ZXJzaW9uIGlzIG5lZWRlZClcblx0XHRpbWFnZUVtYmVkQ29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoXCIke3VybH1cIilgO1xuXHRcdHNldENzc1Byb3BzKGltYWdlRW1iZWRDb250YWluZXIsIHtcblx0XHRcdFx0YmFja2dyb3VuZFNpemU6ICdjb3ZlcicsXG5cdFx0XHRcdGJhY2tncm91bmRQb3NpdGlvbjogJ2NlbnRlciBjZW50ZXInLFxuXHRcdFx0XHRiYWNrZ3JvdW5kUmVwZWF0OiAnbm8tcmVwZWF0J1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBnZXRTb3J0TWV0aG9kKCk6IHN0cmluZyB7XG5cdFx0Y29uc3Qgc29ydENvbmZpZ3MgPSB0aGlzLmNvbmZpZy5nZXRTb3J0KCk7XG5cdFx0aWYgKHNvcnRDb25maWdzICYmIHNvcnRDb25maWdzLmxlbmd0aCA+IDApIHtcblx0XHRcdGNvbnN0IGZpcnN0U29ydCA9IHNvcnRDb25maWdzWzBdO1xuXHRcdFx0Y29uc3QgcHJvcGVydHkgPSBmaXJzdFNvcnQucHJvcGVydHk7XG5cdFx0XHRjb25zdCBkaXJlY3Rpb24gPSBmaXJzdFNvcnQuZGlyZWN0aW9uLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRpZiAocHJvcGVydHkuaW5jbHVkZXMoJ2N0aW1lJykpIHtcblx0XHRcdFx0cmV0dXJuIGBjdGltZS0ke2RpcmVjdGlvbn1gO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHByb3BlcnR5LmluY2x1ZGVzKCdtdGltZScpKSB7XG5cdFx0XHRcdHJldHVybiBgbXRpbWUtJHtkaXJlY3Rpb259YDtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuICdtdGltZS1kZXNjJztcblx0fVxuXG5cblxuXHRwcml2YXRlIGhhbmRsZVNlbGVjdGlvbkNoYW5nZShwYXRoOiBzdHJpbmcsIHNlbGVjdGVkOiBib29sZWFuKTogdm9pZCB7XG5cdFx0aWYgKHNlbGVjdGVkKSB7XG5cdFx0XHR0aGlzLnNlbGVjdGVkRmlsZXMuYWRkKHBhdGgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnNlbGVjdGVkRmlsZXMuZGVsZXRlKHBhdGgpO1xuXHRcdH1cblx0XHRcblx0XHQvLyBBbHdheXMgdXBkYXRlIFVJIHdoZW4gc2VsZWN0aW9uIGNoYW5nZXMgLSB0aGlzIHdpbGwgaGlkZSB0b29sYmFyIGlmIHNlbGVjdGlvbiBpcyBlbXB0eVxuXHRcdHRoaXMudXBkYXRlU2VsZWN0aW9uVUkoKTtcblx0XHRcblx0XHQvLyBGb3JjZSBoaWRlIHRvb2xiYXIgaW1tZWRpYXRlbHkgaWYgc2VsZWN0aW9uIGlzIGVtcHR5XG5cdFx0Ly8gRG8gdGhpcyBhZnRlciB1cGRhdGVTZWxlY3Rpb25VSSB0byBlbnN1cmUgaXQgdGFrZXMgcHJlY2VkZW5jZVxuXHRcdGlmICh0aGlzLnNlbGVjdGVkRmlsZXMuc2l6ZSA9PT0gMCkge1xuXHRcdFx0aWYgKHRoaXMuYnVsa1Rvb2xiYXIpIHtcblx0XHRcdFx0Ly8gRm9yY2UgaW1tZWRpYXRlIGhpZGUgd2l0aG91dCB3YWl0aW5nIGZvciB0cmFuc2l0aW9uc1xuXHRcdFx0XHR0aGlzLmJ1bGtUb29sYmFyLmhpZGUoKTtcblx0XHRcdFx0Ly8gQWxzbyBkaXJlY3RseSBoaWRlIHRoZSBlbGVtZW50IGFzIGEgYmFja3VwXG5cdFx0XHRcdGNvbnN0IHRvb2xiYXJFbCA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLmJhc2VzLWNtcy1idWxrLXRvb2xiYXInKTtcblx0XHRcdFx0aWYgKHRvb2xiYXJFbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG5cdFx0XHRcdFx0dG9vbGJhckVsLnJlbW92ZUNsYXNzKCdiYXNlcy1jbXMtYnVsay10b29sYmFyLXZpc2libGUnKTtcblx0XHRcdFx0XHR0b29sYmFyRWwuYWRkQ2xhc3MoJ2Jhc2VzLWNtcy1idWxrLXRvb2xiYXItaGlkZGVuJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGhhbmRsZVByb3BlcnR5VG9nZ2xlKHBhdGg6IHN0cmluZywgcHJvcGVydHk6IHN0cmluZywgdmFsdWU6IHVua25vd24pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRpZiAodGhpcy5wcm9wZXJ0eVRvZ2dsZUhhbmRsZXIpIHtcblx0XHRhd2FpdCB0aGlzLnByb3BlcnR5VG9nZ2xlSGFuZGxlci5oYW5kbGVQcm9wZXJ0eVRvZ2dsZShwYXRoLCBwcm9wZXJ0eSwgdmFsdWUpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgc2VsZWN0QWxsKCk6IHZvaWQge1xuXHRcdGNvbnN0IGNhcmRzID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcuYmFzZXMtY21zLWNhcmQnKTtcblx0XHRjYXJkcy5mb3JFYWNoKChjYXJkRWwpID0+IHtcblx0XHRcdGNvbnN0IHBhdGggPSBjYXJkRWwuZ2V0QXR0cmlidXRlKCdkYXRhLXBhdGgnKTtcblx0XHRcdGlmIChwYXRoKSB7XG5cdFx0XHRcdHRoaXMuc2VsZWN0ZWRGaWxlcy5hZGQocGF0aCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0dGhpcy51cGRhdGVTZWxlY3Rpb25VSSgpO1xuXHR9XG5cblx0cHJpdmF0ZSBkZXNlbGVjdEFsbCgpOiB2b2lkIHtcblx0XHR0aGlzLnNlbGVjdGVkRmlsZXMuY2xlYXIoKTtcblx0XHR0aGlzLnVwZGF0ZVNlbGVjdGlvblVJKCk7XG5cdH1cblxuXHQvKipcblx0ICogUmVmcmVzaCB0aGUgdG9vbGJhciB3aGVuIHNldHRpbmdzIGNoYW5nZVxuXHQgKiBDYWxsZWQgZnJvbSBzZXR0aW5ncyB0YWIgd2hlbiB0b29sYmFyIGJ1dHRvbiB2aXNpYmlsaXR5IHNldHRpbmdzIGFyZSB1cGRhdGVkXG5cdCAqL1xuXHRyZWZyZXNoVG9vbGJhcigpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5idWxrVG9vbGJhcikge1xuXHRcdFx0Y29uc3QgY3VycmVudENvdW50ID0gdGhpcy5zZWxlY3RlZEZpbGVzLnNpemU7XG5cdFx0XHR0aGlzLmJ1bGtUb29sYmFyLnJlY3JlYXRlKCk7XG5cdFx0XHQvLyBVcGRhdGUgY291bnQgYWZ0ZXIgcmVjcmVhdGlvblxuXHRcdFx0aWYgKGN1cnJlbnRDb3VudCA+IDApIHtcblx0XHRcdFx0dGhpcy5idWxrVG9vbGJhci51cGRhdGVDb3VudChjdXJyZW50Q291bnQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgdXBkYXRlU2VsZWN0aW9uVUkoKTogdm9pZCB7XG5cdFx0Ly8gVXBkYXRlIGNhcmQgdmlzdWFsIHN0YXRlc1xuXHRcdGNvbnN0IGNhcmRzID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FyZCcpO1xuXHRcdGNhcmRzLmZvckVhY2goKGNhcmRFbCkgPT4ge1xuXHRcdFx0Y29uc3QgcGF0aCA9IGNhcmRFbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGF0aCcpO1xuXHRcdFx0Y29uc3QgY2hlY2tib3ggPSBjYXJkRWwucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdLnNlbGVjdGlvbi1jaGVja2JveCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cdFx0XHRpZiAocGF0aCkge1xuXHRcdFx0XHRjb25zdCBpc1NlbGVjdGVkID0gdGhpcy5zZWxlY3RlZEZpbGVzLmhhcyhwYXRoKTtcblx0XHRcdFx0aWYgKGlzU2VsZWN0ZWQpIHtcblx0XHRcdFx0XHRjYXJkRWwuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y2FyZEVsLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChjaGVja2JveCkge1xuXHRcdFx0XHRcdGNoZWNrYm94LmNoZWNrZWQgPSBpc1NlbGVjdGVkO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBTaG93L2hpZGUgYnVsayB0b29sYmFyIC0gaGlkZSB3aGVuIHNlbGVjdGlvbiBpcyBlbXB0eVxuXHRcdC8vIERvbid0IGhpZGUgaWYgd2UncmUgaW4gdGhlIG1pZGRsZSBvZiBhIHJlZnJlc2ggdGhhdCB3aWxsIHJlc3RvcmUgc2VsZWN0aW9uXG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWRGaWxlcy5zaXplID4gMCkge1xuXHRcdFx0Ly8gQ2hlY2sgaWYgdG9vbGJhciBlbGVtZW50IGFscmVhZHkgZXhpc3RzIGluIERPTSAoZnJvbSBwcmV2aW91cyB2aWV3IHN3aXRjaClcblx0XHRcdC8vIFJlbW92ZSBhbnkgb3JwaGFuZWQgdG9vbGJhciBlbGVtZW50cyB0aGF0IG1pZ2h0IGJlIGxlZnQgb3ZlclxuXHRcdFx0Y29uc3Qgb3JwaGFuZWRUb29sYmFycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYXNlcy1jbXMtYnVsay10b29sYmFyJyk7XG5cdFx0XHRvcnBoYW5lZFRvb2xiYXJzLmZvckVhY2godG9vbGJhciA9PiB7XG5cdFx0XHRcdC8vIE9ubHkgcmVtb3ZlIGlmIGl0J3Mgbm90IG91ciBjdXJyZW50IHRvb2xiYXJcblx0XHRcdFx0Y29uc3QgdG9vbGJhckluc3RhbmNlID0gKHRvb2xiYXIgYXMgdW5rbm93biBhcyB7IF9fYnVsa1Rvb2xiYXJJbnN0YW5jZT86IEJ1bGtUb29sYmFyIH0pLl9fYnVsa1Rvb2xiYXJJbnN0YW5jZTtcblx0XHRcdFx0aWYgKCF0b29sYmFySW5zdGFuY2UgfHwgdG9vbGJhckluc3RhbmNlICE9PSB0aGlzLmJ1bGtUb29sYmFyKSB7XG5cdFx0XHRcdFx0dG9vbGJhci5yZW1vdmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdC8vIElmIHRvb2xiYXIgZG9lc24ndCBleGlzdCwgY3JlYXRlIGl0XG5cdFx0XHRpZiAoIXRoaXMuYnVsa1Rvb2xiYXIpIHtcblx0XHRcdFx0Y29uc3Qgc2V0dGluZ3MgPSByZWFkQ01TU2V0dGluZ3MoXG5cdFx0XHRcdFx0dGhpcy5jb25maWcsXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Ncblx0XHRcdFx0KTtcblx0XHRcdFx0dGhpcy5idWxrVG9vbGJhciA9IG5ldyBCdWxrVG9vbGJhcihcblx0XHRcdFx0XHR0aGlzLmFwcCxcblx0XHRcdFx0XHR0aGlzLnBsdWdpbixcblx0XHRcdFx0XHR0aGlzLmNvbnRhaW5lckVsLFxuXHRcdFx0XHRcdCgpID0+IEFycmF5LmZyb20odGhpcy5zZWxlY3RlZEZpbGVzKSxcblx0XHRcdFx0XHQoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkRmlsZXMuY2xlYXIoKTtcblx0XHRcdFx0XHRcdHRoaXMudXBkYXRlU2VsZWN0aW9uVUkoKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCgpID0+IHtcblx0XHRcdFx0XHRcdC8vIFJlZnJlc2ggdmlldyBidXQgcHJlc2VydmUgc2VsZWN0aW9uXG5cdFx0XHRcdFx0XHRjb25zdCBzZWxlY3RlZFBhdGhzID0gQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkRmlsZXMpO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvLyBTZXQgZmxhZyB0byBwcmV2ZW50IHRvb2xiYXIgZnJvbSBiZWluZyBoaWRkZW4gZHVyaW5nIHJlZnJlc2hcblx0XHRcdFx0XHRcdHRoaXMuaXNSZWZyZXNoaW5nV2l0aFNlbGVjdGlvbiA9IHRydWU7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vIEtlZXAgdG9vbGJhciB2aXNpYmxlIGR1cmluZyByZWZyZXNoIC0gY3JpdGljYWwgdG8gcHJldmVudCBpdCBmcm9tIGRpc2FwcGVhcmluZ1xuXHRcdFx0XHRcdFx0aWYgKHRoaXMuYnVsa1Rvb2xiYXIgJiYgc2VsZWN0ZWRQYXRocy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuYnVsa1Rvb2xiYXIuc2hvdygpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvLyBSZWZyZXNoIHRoZSB2aWV3XG5cdFx0XHRcdFx0XHR0aGlzLm9uRGF0YVVwZGF0ZWQoKTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzZWxlY3Rpb24gYWZ0ZXIgcmVmcmVzaCBjb21wbGV0ZXNcblx0XHRcdFx0XHRcdC8vIFVzZSBtdWx0aXBsZSB0aW1lb3V0cyB0byBlbnN1cmUgaXQgd29ya3MgZXZlbiBpZiB0aGUgZmlyc3Qgb25lIGlzIHRvbyBlYXJseVxuXHRcdFx0XHRcdFx0d2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNlbGVjdGlvblxuXHRcdFx0XHRcdFx0XHRzZWxlY3RlZFBhdGhzLmZvckVhY2gocGF0aCA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5zZWxlY3RlZEZpbGVzLmFkZChwYXRoKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gQ2xlYXIgdGhlIGZsYWcgYW5kIHVwZGF0ZSBVSVxuXHRcdFx0XHRcdFx0XHR0aGlzLmlzUmVmcmVzaGluZ1dpdGhTZWxlY3Rpb24gPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0dGhpcy51cGRhdGVTZWxlY3Rpb25VSSgpO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gRW5zdXJlIHRvb2xiYXIgaXMgdmlzaWJsZSBhbmQgdXBkYXRlZFxuXHRcdFx0XHRcdFx0XHRpZiAodGhpcy5zZWxlY3RlZEZpbGVzLnNpemUgPiAwICYmIHRoaXMuYnVsa1Rvb2xiYXIpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmJ1bGtUb29sYmFyLnNob3coKTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmJ1bGtUb29sYmFyLnVwZGF0ZUNvdW50KHRoaXMuc2VsZWN0ZWRGaWxlcy5zaXplKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gRG91YmxlLWNoZWNrIGFmdGVyIGEgYml0IG1vcmUgdGltZVxuXHRcdFx0XHRcdFx0XHR3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuc2VsZWN0ZWRGaWxlcy5zaXplID4gMCAmJiB0aGlzLmJ1bGtUb29sYmFyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmJ1bGtUb29sYmFyLnNob3coKTtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuYnVsa1Rvb2xiYXIudXBkYXRlQ291bnQodGhpcy5zZWxlY3RlZEZpbGVzLnNpemUpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSwgMTAwKTtcblx0XHRcdFx0XHRcdH0sIDI1MCk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQoKSA9PiB7XG5cdFx0XHRcdFx0XHQvLyBTZWxlY3QgYWxsIGNhbGxiYWNrXG5cdFx0XHRcdFx0XHR0aGlzLnNlbGVjdEFsbCgpO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0c2V0dGluZ3Ncblx0XHRcdFx0KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIFVwZGF0ZSBzZXR0aW5ncyBpZiB0b29sYmFyIGFscmVhZHkgZXhpc3RzXG5cdFx0XHRcdGNvbnN0IHNldHRpbmdzID0gcmVhZENNU1NldHRpbmdzKFxuXHRcdFx0XHRcdHRoaXMuY29uZmlnLFxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzXG5cdFx0XHRcdCk7XG5cdFx0XHRcdHRoaXMuYnVsa1Rvb2xiYXIudXBkYXRlU2V0dGluZ3Moc2V0dGluZ3MpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5idWxrVG9vbGJhci51cGRhdGVDb3VudCh0aGlzLnNlbGVjdGVkRmlsZXMuc2l6ZSk7XG5cdFx0XHR0aGlzLmJ1bGtUb29sYmFyLnNob3coKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gU2VsZWN0aW9uIGlzIGVtcHR5IC0gZm9yY2UgaGlkZSB0b29sYmFyIGltbWVkaWF0ZWx5XG5cdFx0XHRpZiAodGhpcy5idWxrVG9vbGJhciAmJiAhdGhpcy5pc1JlZnJlc2hpbmdXaXRoU2VsZWN0aW9uKSB7XG5cdFx0XHRcdHRoaXMuYnVsa1Rvb2xiYXIuaGlkZSgpO1xuXHRcdFx0XHQvLyBGb3JjZSBpbW1lZGlhdGUgaGlkZSBhcyBiYWNrdXBcblx0XHRcdFx0Y29uc3QgdG9vbGJhckVsID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcuYmFzZXMtY21zLWJ1bGstdG9vbGJhcicpO1xuXHRcdFx0XHRpZiAodG9vbGJhckVsIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcblx0XHRcdFx0XHR0b29sYmFyRWwucmVtb3ZlQ2xhc3MoJ2Jhc2VzLWNtcy1idWxrLXRvb2xiYXItdmlzaWJsZScpO1xuXHRcdFx0XHRcdHRvb2xiYXJFbC5hZGRDbGFzcygnYmFzZXMtY21zLWJ1bGstdG9vbGJhci1oaWRkZW4nKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdG9uQ2xvc2UoKTogdm9pZCB7XG5cdFx0dGhpcy5zY3JvbGxMYXlvdXRNYW5hZ2VyLmNsZWFudXAoKTtcblx0XHRpZiAodGhpcy52aWV3U3dpdGNoTGlzdGVuZXIpIHtcblx0XHR0aGlzLnZpZXdTd2l0Y2hMaXN0ZW5lci5jbGVhbnVwKCk7XG5cdFx0fVxuXHRcdGlmICh0aGlzLnNldHRpbmdzUG9sbEludGVydmFsICE9PSBudWxsKSB7XG5cdFx0XHR3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnNldHRpbmdzUG9sbEludGVydmFsKTtcblx0XHRcdHRoaXMuc2V0dGluZ3NQb2xsSW50ZXJ2YWwgPSBudWxsO1xuXHRcdH1cblx0XHR0aGlzLnByb3BlcnR5T2JzZXJ2ZXJzLmZvckVhY2gob2JzID0+IG9icy5kaXNjb25uZWN0KCkpO1xuXHRcdHRoaXMucHJvcGVydHlPYnNlcnZlcnMgPSBbXTtcblx0XHRpZiAodGhpcy5idWxrVG9vbGJhcikge1xuXHRcdFx0dGhpcy5idWxrVG9vbGJhci5kZXN0cm95KCk7XG5cdFx0fVxuXHRcdC8vIENsZWFuIHVwIHNlbGVjdGlvbiBhbmQgdG9vbGJhciB3aGVuIHZpZXcgY2xvc2VzXG5cdFx0dGhpcy5zZWxlY3RlZEZpbGVzLmNsZWFyKCk7XG5cdFx0Y29uc3Qgb3JwaGFuZWRUb29sYmFycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYXNlcy1jbXMtYnVsay10b29sYmFyJyk7XG5cdFx0b3JwaGFuZWRUb29sYmFycy5mb3JFYWNoKHRvb2xiYXIgPT4gdG9vbGJhci5yZW1vdmUoKSk7XG5cdFx0XG5cdFx0Ly8gUmVtb3ZlIGZyb20gcGx1Z2luIHRyYWNraW5nXG5cdFx0Y29uc3QgcGx1Z2luV2l0aE1ldGhvZCA9IHRoaXMucGx1Z2luIGFzIHsgcmVtb3ZlVmlldz86ICh2aWV3OiBCYXNlc0NNU1ZpZXcpID0+IHZvaWQgfTtcblx0XHRpZiAocGx1Z2luV2l0aE1ldGhvZCAmJiB0eXBlb2YgcGx1Z2luV2l0aE1ldGhvZC5yZW1vdmVWaWV3ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRwbHVnaW5XaXRoTWV0aG9kLnJlbW92ZVZpZXcodGhpcyk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIE92ZXJyaWRlIG5ldyBub3RlIGNyZWF0aW9uIHRvIHVzZSBjdXN0b20gbG9jYXRpb24gaWYgY29uZmlndXJlZFxuXHQgKi9cblx0YXN5bmMgb25OZXcoKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSByZWFkQ01TU2V0dGluZ3MoXG5cdFx0XHR0aGlzLmNvbmZpZyxcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzXG5cdFx0KTtcblxuXHRcdGlmIChzZXR0aW5ncy5jdXN0b21pemVOZXdCdXR0b24pIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IGxvY2F0aW9uSW5wdXQgPSBzZXR0aW5ncy5uZXdOb3RlTG9jYXRpb24/LnRyaW0oKSB8fCAnJztcblx0XHRcdFx0XG5cdFx0XHRcdC8vIElmIGxvY2F0aW9uIGlzIGVtcHR5LCB1c2UgT2JzaWRpYW4ncyBkZWZhdWx0IG5ldyBub3RlIGxvY2F0aW9uXG5cdFx0XHRcdGlmIChsb2NhdGlvbklucHV0ID09PSAnJykge1xuXHRcdFx0XHRcdC8vIFVzZSBPYnNpZGlhbidzIGRlZmF1bHQgbmV3IG5vdGUgY3JlYXRpb24gYmVoYXZpb3Jcblx0XHRcdFx0XHRjb25zdCB2YXVsdENvbmZpZyA9ICh0aGlzLmFwcC52YXVsdCBhcyB7IGNvbmZpZz86IHsgbmV3RmlsZUxvY2F0aW9uPzogc3RyaW5nOyBuZXdGaWxlRm9sZGVyUGF0aD86IHN0cmluZyB9IH0pLmNvbmZpZztcblx0XHRcdFx0XHRjb25zdCBuZXdGaWxlTG9jYXRpb24gPSB2YXVsdENvbmZpZz8ubmV3RmlsZUxvY2F0aW9uIHx8ICdmb2xkZXInO1xuXHRcdFx0XHRcdGNvbnN0IG5ld0ZpbGVGb2xkZXJQYXRoID0gdmF1bHRDb25maWc/Lm5ld0ZpbGVGb2xkZXJQYXRoIHx8ICcnO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGxldCBmaWxlUGF0aCA9ICdVbnRpdGxlZC5tZCc7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gSGFuZGxlIE9ic2lkaWFuJ3MgbmV3IGZpbGUgbG9jYXRpb24gc2V0dGluZ3Ncblx0XHRcdFx0XHRpZiAobmV3RmlsZUxvY2F0aW9uID09PSAnZm9sZGVyJyAmJiBuZXdGaWxlRm9sZGVyUGF0aCkge1xuXHRcdFx0XHRcdFx0ZmlsZVBhdGggPSBgJHtuZXdGaWxlRm9sZGVyUGF0aH0vVW50aXRsZWQubWRgO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAobmV3RmlsZUxvY2F0aW9uID09PSAnY3VycmVudCcpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdFx0XHRcdFx0aWYgKGFjdGl2ZUZpbGUgJiYgYWN0aXZlRmlsZS5wYXJlbnQpIHtcblx0XHRcdFx0XHRcdFx0ZmlsZVBhdGggPSBgJHthY3RpdmVGaWxlLnBhcmVudC5wYXRofS9VbnRpdGxlZC5tZGA7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChuZXdGaWxlTG9jYXRpb24gPT09ICdyb290Jykge1xuXHRcdFx0XHRcdFx0ZmlsZVBhdGggPSAnVW50aXRsZWQubWQnO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjb25zdCBmaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCAnJyk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChmaWxlLnBhdGgsICcnLCBmYWxzZSk7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdC8vIElmIGxvY2F0aW9uIGlzIFwiL1wiIG9yIGp1c3Qgc2xhc2hlcywgdXNlIHZhdWx0IHJvb3Rcblx0XHRcdFx0aWYgKGxvY2F0aW9uSW5wdXQgPT09ICcvJyB8fCBsb2NhdGlvbklucHV0LnJlcGxhY2UoL1xcLy9nLCAnJykgPT09ICcnKSB7XG5cdFx0XHRcdFx0Y29uc3QgbmV3RmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZSgnVW50aXRsZWQubWQnLCAnJyk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChuZXdGaWxlLnBhdGgsICcnLCBmYWxzZSk7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdC8vIE90aGVyd2lzZSwgdXNlIHRoZSBzcGVjaWZpZWQgZm9sZGVyXG5cdFx0XHRcdGNvbnN0IGZvbGRlclBhdGggPSBsb2NhdGlvbklucHV0LnJlcGxhY2UoL15cXC8rfFxcLyskL2csICcnKTtcblx0XHRcdFx0XG5cdFx0XHRcdGxldCBmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAoIWZvbGRlciB8fCAhKCdjaGlsZHJlbicgaW4gZm9sZGVyKSkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXJQYXRoKTtcblx0XHRcdFx0XHRmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdGlmIChmb2xkZXIgJiYgJ2NoaWxkcmVuJyBpbiBmb2xkZXIpIHtcblx0XHRcdFx0XHRjb25zdCBuZXdGaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGAke2ZvbGRlclBhdGh9L1VudGl0bGVkLm1kYCwgJycpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQobmV3RmlsZS5wYXRoLCAnJywgZmFsc2UpO1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0Ly8gRXJyb3IgY3JlYXRpbmcgbmV3IG5vdGUgLSBzaWxlbnRseSBmYWlsXG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdC8vIERlZmF1bHQgYmVoYXZpb3IgLSBsZXQgQmFzZXMgaGFuZGxlIGl0XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59XG4iLCAiLyoqXHJcbiAqIFV0aWxpdHkgZnVuY3Rpb24gdG8gc2V0IENTUyBwcm9wZXJ0aWVzIG9uIGFuIGVsZW1lbnRcclxuICogUmVwbGFjZXMgdGhlIG5vbi1leGlzdGVudCBzZXRDc3NQcm9wcyBmcm9tIG9ic2lkaWFuXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFNldHMgQ1NTIHByb3BlcnRpZXMgb24gYW4gZWxlbWVudCBmcm9tIGFuIG9iamVjdFxyXG4gKiBAcGFyYW0gZWxlbWVudCAtIFRoZSBlbGVtZW50IHRvIGFwcGx5IHN0eWxlcyB0byAoSFRNTEVsZW1lbnQgb3IgU1ZHRWxlbWVudClcclxuICogQHBhcmFtIHByb3BzIC0gT2JqZWN0IHdpdGggQ1NTIHByb3BlcnRpZXMgaW4gY2FtZWxDYXNlIG9yIGtlYmFiLWNhc2VcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRDc3NQcm9wcyhlbGVtZW50OiBIVE1MRWxlbWVudCB8IFNWR0VsZW1lbnQsIHByb3BzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXI+KTogdm9pZCB7XHJcblx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocHJvcHMpKSB7XHJcblx0XHQvLyBDU1MgY3VzdG9tIHByb3BlcnRpZXMgKHZhcmlhYmxlcykgc3RhcnQgd2l0aCAtLVxyXG5cdFx0aWYgKGtleS5zdGFydHNXaXRoKCctLScpKSB7XHJcblx0XHRcdGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoa2V5LCBTdHJpbmcodmFsdWUpKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIENvbnZlcnQgY2FtZWxDYXNlIHRvIGtlYmFiLWNhc2UgZm9yIENTUyBwcm9wZXJ0aWVzXHJcblx0XHRcdGNvbnN0IGNzc0tleSA9IGtleS5yZXBsYWNlKC8oW0EtWl0pL2csICctJDEnKS50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0XHRlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KGNzc0tleSwgU3RyaW5nKHZhbHVlKSk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsICIvKipcclxuICogRGF0YSB0cmFuc2Zvcm1hdGlvbiB1dGlsaXRpZXNcclxuICogQ29udmVydHMgQmFzZXMgZW50cmllcyBpbnRvIG5vcm1hbGl6ZWQgQ2FyZERhdGEgZm9ybWF0XHJcbiAqIFVwZGF0ZWQgdG8gc3VwcG9ydCBNRFggZmlsZXMgdmlhIG1hbnVhbCBmcm9udG1hdHRlciBwYXJzaW5nXHJcbiAqL1xyXG5cclxuaW1wb3J0IHR5cGUgeyBBcHAsIEJhc2VzRW50cnkgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBnZXRGaXJzdEJhc2VzUHJvcGVydHlWYWx1ZSB9IGZyb20gJy4uL3V0aWxzL3Byb3BlcnR5JztcclxuaW1wb3J0IHsgZ2V0TGlzdFNlcGFyYXRvciB9IGZyb20gJy4uL3V0aWxzL3N0eWxlLXNldHRpbmdzJztcclxuaW1wb3J0IHsgZ2V0RmlsZUZyb250bWF0dGVyIH0gZnJvbSAnLi4vdXRpbHMvZnJvbnRtYXR0ZXItaGVscGVyJztcclxuXHJcbi8qKlxyXG4gKiBSZW1vdmUgZHVwbGljYXRpb24gZnJvbSBhIHN0cmluZyAoZS5nLiwgXCJ2YWx1ZXZhbHVlXCIgLT4gXCJ2YWx1ZVwiKVxyXG4gKiBIYW5kbGVzIG11bHRpcGxlIHJlcGV0aXRpb25zIC0gZmluZHMgdGhlIHNob3J0ZXN0IHJlcGVhdGluZyBwYXR0ZXJuXHJcbiAqL1xyXG5mdW5jdGlvbiByZW1vdmVEdXBsaWNhdGlvbihzdHI6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0aWYgKHN0ci5sZW5ndGggPT09IDApIHJldHVybiBzdHI7XHJcblx0XHJcblx0Ly8gRmluZCB0aGUgc2hvcnRlc3QgcmVwZWF0aW5nIHBhdHRlcm4gYnkgY2hlY2tpbmcgYWxsIHBvc3NpYmxlIHByZWZpeCBsZW5ndGhzXHJcblx0Ly8gU3RhcnQgZnJvbSAxIGFuZCBnbyB1cCB0byBoYWxmIHRoZSBzdHJpbmcgbGVuZ3RoXHJcblx0Zm9yIChsZXQgbGVuID0gMTsgbGVuIDw9IE1hdGguZmxvb3Ioc3RyLmxlbmd0aCAvIDIpOyBsZW4rKykge1xyXG5cdFx0Y29uc3QgcHJlZml4ID0gc3RyLnN1YnN0cmluZygwLCBsZW4pO1xyXG5cdFx0XHJcblx0XHQvLyBDaGVjayBpZiBzdHJpbmcgaXMgZXhhY3RseSBtYWRlIG9mIHJlcGV0aXRpb25zIG9mIHRoaXMgcHJlZml4XHJcblx0XHRjb25zdCByZXBlYXRDb3VudCA9IE1hdGguZmxvb3Ioc3RyLmxlbmd0aCAvIGxlbik7XHJcblx0XHRpZiAocmVwZWF0Q291bnQgPCAyKSBjb250aW51ZTsgLy8gTmVlZCBhdCBsZWFzdCAyIHJlcGV0aXRpb25zXHJcblx0XHRcclxuXHRcdGxldCBpc0NvbXBsZXRlRHVwbGljYXRpb24gPSB0cnVlO1xyXG5cdFx0XHJcblx0XHQvLyBWZXJpZnkgYWxsIGZ1bGwgc2VnbWVudHMgbWF0Y2ggdGhlIHByZWZpeFxyXG5cdFx0Zm9yIChsZXQgaSA9IDE7IGkgPCByZXBlYXRDb3VudDsgaSsrKSB7XHJcblx0XHRcdGNvbnN0IHNlZ21lbnQgPSBzdHIuc3Vic3RyaW5nKGkgKiBsZW4sIChpICsgMSkgKiBsZW4pO1xyXG5cdFx0XHRpZiAoc2VnbWVudCAhPT0gcHJlZml4KSB7XHJcblx0XHRcdFx0aXNDb21wbGV0ZUR1cGxpY2F0aW9uID0gZmFsc2U7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gSWYgdGhlcmUncyBhIHJlbWFpbmRlciwgY2hlY2sgaWYgaXQgbWF0Y2hlcyB0aGUgc3RhcnQgb2YgdGhlIHByZWZpeFxyXG5cdFx0Y29uc3QgcmVtYWluZGVyID0gc3RyLmxlbmd0aCAlIGxlbjtcclxuXHRcdGlmIChyZW1haW5kZXIgPiAwKSB7XHJcblx0XHRcdGNvbnN0IGxhc3RTZWdtZW50ID0gc3RyLnN1YnN0cmluZyhyZXBlYXRDb3VudCAqIGxlbik7XHJcblx0XHRcdGlmIChsYXN0U2VnbWVudCAhPT0gcHJlZml4LnN1YnN0cmluZygwLCByZW1haW5kZXIpKSB7XHJcblx0XHRcdFx0aXNDb21wbGV0ZUR1cGxpY2F0aW9uID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKGlzQ29tcGxldGVEdXBsaWNhdGlvbikge1xyXG5cdFx0XHRcdHJldHVybiBwcmVmaXg7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiBzdHI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZERhdGEge1xyXG5cdHBhdGg6IHN0cmluZztcclxuXHRuYW1lOiBzdHJpbmc7XHJcblx0dGl0bGU6IHN0cmluZztcclxuXHR0YWdzOiBzdHJpbmdbXTtcclxuXHR5YW1sVGFnczogc3RyaW5nW107XHJcblx0Y3RpbWU6IG51bWJlcjtcclxuXHRtdGltZTogbnVtYmVyO1xyXG5cdGZvbGRlclBhdGg6IHN0cmluZztcclxuXHRzbmlwcGV0Pzogc3RyaW5nO1xyXG5cdGltYWdlVXJsPzogc3RyaW5nIHwgc3RyaW5nW107XHJcblx0aGFzSW1hZ2VBdmFpbGFibGU/OiBib29sZWFuO1xyXG5cdGRpc3BsYXlUYWdzPzogc3RyaW5nW107XHJcblx0cHJvcGVydHlOYW1lMT86IHN0cmluZztcclxuXHRwcm9wZXJ0eU5hbWUyPzogc3RyaW5nO1xyXG5cdHByb3BlcnR5TmFtZTM/OiBzdHJpbmc7XHJcblx0cHJvcGVydHlOYW1lND86IHN0cmluZztcclxuXHRwcm9wZXJ0eU5hbWU1Pzogc3RyaW5nO1xyXG5cdHByb3BlcnR5TmFtZTY/OiBzdHJpbmc7XHJcblx0cHJvcGVydHlOYW1lNz86IHN0cmluZztcclxuXHRwcm9wZXJ0eU5hbWU4Pzogc3RyaW5nO1xyXG5cdHByb3BlcnR5TmFtZTk/OiBzdHJpbmc7XHJcblx0cHJvcGVydHlOYW1lMTA/OiBzdHJpbmc7XHJcblx0cHJvcGVydHlOYW1lMTE/OiBzdHJpbmc7XHJcblx0cHJvcGVydHlOYW1lMTI/OiBzdHJpbmc7XHJcblx0cHJvcGVydHlOYW1lMTM/OiBzdHJpbmc7XHJcblx0cHJvcGVydHlOYW1lMTQ/OiBzdHJpbmc7XHJcblx0cHJvcGVydHkxPzogc3RyaW5nIHwgbnVsbDtcclxuXHRwcm9wZXJ0eTI/OiBzdHJpbmcgfCBudWxsO1xyXG5cdHByb3BlcnR5Mz86IHN0cmluZyB8IG51bGw7XHJcblx0cHJvcGVydHk0Pzogc3RyaW5nIHwgbnVsbDtcclxuXHRwcm9wZXJ0eTU/OiBzdHJpbmcgfCBudWxsO1xyXG5cdHByb3BlcnR5Nj86IHN0cmluZyB8IG51bGw7XHJcblx0cHJvcGVydHk3Pzogc3RyaW5nIHwgbnVsbDtcclxuXHRwcm9wZXJ0eTg/OiBzdHJpbmcgfCBudWxsO1xyXG5cdHByb3BlcnR5OT86IHN0cmluZyB8IG51bGw7XHJcblx0cHJvcGVydHkxMD86IHN0cmluZyB8IG51bGw7XHJcblx0cHJvcGVydHkxMT86IHN0cmluZyB8IG51bGw7XHJcblx0cHJvcGVydHkxMj86IHN0cmluZyB8IG51bGw7XHJcblx0cHJvcGVydHkxMz86IHN0cmluZyB8IG51bGw7XHJcblx0cHJvcGVydHkxND86IHN0cmluZyB8IG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ01TU2V0dGluZ3Mge1xyXG5cdHRpdGxlUHJvcGVydHk6IHN0cmluZztcclxuXHRkZXNjcmlwdGlvblByb3BlcnR5OiBzdHJpbmc7XHJcblx0aW1hZ2VQcm9wZXJ0eTogc3RyaW5nO1xyXG5cdHNob3dUaXRsZTogYm9vbGVhbjtcclxuXHRzaG93RGF0ZTogYm9vbGVhbjtcclxuXHRkYXRlUHJvcGVydHk6IHN0cmluZztcclxuXHRkYXRlSW5jbHVkZVRpbWU6IGJvb2xlYW47XHJcblx0c2hvd1RleHRQcmV2aWV3OiBib29sZWFuO1xyXG5cdGZhbGxiYWNrVG9Db250ZW50OiBib29sZWFuO1xyXG5cdHRydW5jYXRlUHJldmlld1Byb3BlcnR5OiBib29sZWFuO1xyXG5cdGZhbGxiYWNrVG9FbWJlZHM6IGJvb2xlYW4gfCAnYWx3YXlzJyB8ICdpZi1lbXB0eScgfCAnbmV2ZXInO1xyXG5cdHByb3BlcnR5RGlzcGxheTE6IHN0cmluZztcclxuXHRwcm9wZXJ0eURpc3BsYXkyOiBzdHJpbmc7XHJcblx0cHJvcGVydHlEaXNwbGF5Mzogc3RyaW5nO1xyXG5cdHByb3BlcnR5RGlzcGxheTQ6IHN0cmluZztcclxuXHRwcm9wZXJ0eURpc3BsYXk1OiBzdHJpbmc7XHJcblx0cHJvcGVydHlEaXNwbGF5Njogc3RyaW5nO1xyXG5cdHByb3BlcnR5RGlzcGxheTc6IHN0cmluZztcclxuXHRwcm9wZXJ0eURpc3BsYXk4OiBzdHJpbmc7XHJcblx0cHJvcGVydHlEaXNwbGF5OTogc3RyaW5nO1xyXG5cdHByb3BlcnR5RGlzcGxheTEwOiBzdHJpbmc7XHJcblx0cHJvcGVydHlEaXNwbGF5MTE6IHN0cmluZztcclxuXHRwcm9wZXJ0eURpc3BsYXkxMjogc3RyaW5nO1xyXG5cdHByb3BlcnR5RGlzcGxheTEzOiBzdHJpbmc7XHJcblx0cHJvcGVydHlEaXNwbGF5MTQ6IHN0cmluZztcclxuXHRwcm9wZXJ0eUxheW91dDEyU2lkZUJ5U2lkZTogYm9vbGVhbjtcclxuXHRwcm9wZXJ0eUxheW91dDM0U2lkZUJ5U2lkZTogYm9vbGVhbjtcclxuXHRwcm9wZXJ0eUxheW91dDU2U2lkZUJ5U2lkZTogYm9vbGVhbjtcclxuXHRwcm9wZXJ0eUxheW91dDc4U2lkZUJ5U2lkZTogYm9vbGVhbjtcclxuXHRwcm9wZXJ0eUxheW91dDkxMFNpZGVCeVNpZGU6IGJvb2xlYW47XHJcblx0cHJvcGVydHlMYXlvdXQxMTEyU2lkZUJ5U2lkZTogYm9vbGVhbjtcclxuXHRwcm9wZXJ0eUxheW91dDEzMTRTaWRlQnlTaWRlOiBib29sZWFuO1xyXG5cdHByb3BlcnR5R3JvdXAxUG9zaXRpb246ICd0b3AnIHwgJ2JvdHRvbSc7XHJcblx0cHJvcGVydHlHcm91cDJQb3NpdGlvbjogJ3RvcCcgfCAnYm90dG9tJztcclxuXHRwcm9wZXJ0eUdyb3VwM1Bvc2l0aW9uOiAndG9wJyB8ICdib3R0b20nO1xyXG5cdHByb3BlcnR5R3JvdXA0UG9zaXRpb246ICd0b3AnIHwgJ2JvdHRvbSc7XHJcblx0cHJvcGVydHlHcm91cDVQb3NpdGlvbjogJ3RvcCcgfCAnYm90dG9tJztcclxuXHRwcm9wZXJ0eUdyb3VwNlBvc2l0aW9uOiAndG9wJyB8ICdib3R0b20nO1xyXG5cdHByb3BlcnR5R3JvdXA3UG9zaXRpb246ICd0b3AnIHwgJ2JvdHRvbSc7XHJcblx0aW1hZ2VGb3JtYXQ6ICdub25lJyB8ICd0aHVtYm5haWwnIHwgJ2NvdmVyJztcclxuXHRpbWFnZVBvc2l0aW9uOiAnbGVmdCcgfCAncmlnaHQnIHwgJ3RvcCcgfCAnYm90dG9tJztcclxuXHRwcm9wZXJ0eUxhYmVsczogJ2hpZGUnIHwgJ2lubGluZScgfCAnYWJvdmUnO1xyXG5cdHNob3dEcmFmdFN0YXR1czogYm9vbGVhbjtcclxuXHRkcmFmdFN0YXR1c1Byb3BlcnR5OiBzdHJpbmc7XHJcblx0ZHJhZnRTdGF0dXNSZXZlcnNlOiBib29sZWFuO1xyXG5cdGRyYWZ0U3RhdHVzVXNlRmlsZW5hbWVQcmVmaXg6IGJvb2xlYW47XHJcblx0c2hvd1RhZ3M6IGJvb2xlYW47XHJcblx0dGFnc1Byb3BlcnR5OiBzdHJpbmc7XHJcblx0bWF4VGFnc1RvU2hvdzogbnVtYmVyO1xyXG5cdGN1c3RvbWl6ZU5ld0J1dHRvbjogYm9vbGVhbjtcclxuXHRuZXdOb3RlTG9jYXRpb246IHN0cmluZztcclxuXHRoaWRlUXVpY2tFZGl0SWNvbjogYm9vbGVhbjtcclxuXHRjYXJkU2l6ZTogbnVtYmVyO1xyXG5cdGltYWdlQXNwZWN0UmF0aW86IG51bWJlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRyYW5zZm9ybSBCYXNlcyBlbnRyeSBpbnRvIENhcmREYXRhXHJcbiAqIFN1cHBvcnRzIE1EWCBmaWxlcyB2aWEgbWFudWFsIGZyb250bWF0dGVyIHBhcnNpbmdcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBiYXNlc0VudHJ5VG9DYXJkRGF0YShcclxuXHRlbnRyeTogQmFzZXNFbnRyeSxcclxuXHRzZXR0aW5nczogQ01TU2V0dGluZ3MsXHJcblx0c29ydE1ldGhvZDogc3RyaW5nLFxyXG5cdGlzU2h1ZmZsZWQ6IGJvb2xlYW4sXHJcblx0c25pcHBldD86IHN0cmluZyxcclxuXHRpbWFnZVVybD86IHN0cmluZyB8IHN0cmluZ1tdLFxyXG5cdGhhc0ltYWdlQXZhaWxhYmxlPzogYm9vbGVhbixcclxuXHRhcHA/OiBBcHAsXHJcblx0bWR4RnJvbnRtYXR0ZXJDYWNoZT86IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbD5cclxuKTogUHJvbWlzZTxDYXJkRGF0YT4ge1xyXG5cdGNvbnN0IGZpbGVOYW1lID0gZW50cnkuZmlsZS5iYXNlbmFtZSB8fCBlbnRyeS5maWxlLm5hbWU7XHJcblxyXG5cdC8vIEdldCB0aXRsZSBmcm9tIHByb3BlcnR5IG9yIGZhbGxiYWNrIHRvIGZpbGVuYW1lXHJcblx0Ly8gRm9yIE1EWCBmaWxlcywgY2hlY2sgY2FjaGUgZmlyc3QgdG8gYXZvaWQgYXN5bmMgbG9hZGluZ1xyXG5cdGxldCB0aXRsZVZhbHVlOiB7IGRhdGE/OiB1bmtub3duIH0gfCBudWxsID0gbnVsbDtcclxuXHRpZiAoYXBwKSB7XHJcblx0XHRjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChlbnRyeS5maWxlLnBhdGgpO1xyXG5cdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21keCcgJiYgbWR4RnJvbnRtYXR0ZXJDYWNoZSkge1xyXG5cdFx0XHRjb25zdCBmcm9udG1hdHRlciA9IG1keEZyb250bWF0dGVyQ2FjaGVbZW50cnkuZmlsZS5wYXRoXTtcclxuXHRcdFx0aWYgKGZyb250bWF0dGVyKSB7XHJcblx0XHRcdFx0Ly8gU3RyaXAgXCJub3RlLlwiIHByZWZpeCBpZiBwcmVzZW50XHJcblx0XHRcdFx0Y29uc3QgY2xlYW5Qcm9wID0gc2V0dGluZ3MudGl0bGVQcm9wZXJ0eS5zdGFydHNXaXRoKCdub3RlLicpID8gc2V0dGluZ3MudGl0bGVQcm9wZXJ0eS5zdWJzdHJpbmcoNSkgOiBzZXR0aW5ncy50aXRsZVByb3BlcnR5O1xyXG5cdFx0XHRcdGNvbnN0IGZyb250bWF0dGVyVmFsdWUgPSBmcm9udG1hdHRlcltjbGVhblByb3BdO1xyXG5cdFx0XHRcdGlmIChmcm9udG1hdHRlclZhbHVlICE9IG51bGwpIHtcclxuXHRcdFx0XHRcdHRpdGxlVmFsdWUgPSB7IGRhdGE6IGZyb250bWF0dGVyVmFsdWUgfTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Ly8gSWYgY2FjaGUgZGlkbid0IGhhdmUgaXQsIHVzZSB0aGUgYXN5bmMgbWV0aG9kXHJcblx0aWYgKCF0aXRsZVZhbHVlKSB7XHJcblx0XHR0aXRsZVZhbHVlID0gYXdhaXQgZ2V0Rmlyc3RCYXNlc1Byb3BlcnR5VmFsdWUoZW50cnksIHNldHRpbmdzLnRpdGxlUHJvcGVydHksIGFwcCkgYXMgeyBkYXRhPzogdW5rbm93biB9IHwgbnVsbDtcclxuXHR9XHJcblx0Y29uc3QgdGl0bGVEYXRhID0gdGl0bGVWYWx1ZT8uZGF0YTtcclxuXHRcclxuXHQvLyBIYW5kbGUgYXJyYXlzIChlLmcuLCBhbGlhc2VzKSBieSBqb2luaW5nIHRoZW1cclxuXHRsZXQgdGl0bGU6IHN0cmluZztcclxuXHRpZiAodGl0bGVEYXRhICE9IG51bGwgJiYgdGl0bGVEYXRhICE9PSAnJykge1xyXG5cdFx0aWYgKEFycmF5LmlzQXJyYXkodGl0bGVEYXRhKSkge1xyXG5cdFx0XHQvLyBKb2luIGFycmF5IGl0ZW1zIGludG8gYSBzdHJpbmdcclxuXHRcdFx0Y29uc3QgaXRlbXMgPSB0aXRsZURhdGEubWFwKChpdGVtOiB1bmtub3duKSA9PiB7XHJcblx0XHRcdFx0aWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmICdkYXRhJyBpbiBpdGVtKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gU3RyaW5nKChpdGVtIGFzIHsgZGF0YTogdW5rbm93biB9KS5kYXRhKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIFN0cmluZyhpdGVtKTtcclxuXHRcdFx0fSkuZmlsdGVyKChzOiBzdHJpbmcpID0+IHMudHJpbSgpLmxlbmd0aCA+IDApO1xyXG5cdFx0XHR0aXRsZSA9IGl0ZW1zLmxlbmd0aCA+IDAgPyBpdGVtcy5qb2luKCcsICcpIDogZmlsZU5hbWU7XHJcblx0XHR9IGVsc2UgaWYgKHR5cGVvZiB0aXRsZURhdGEgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB0aXRsZURhdGEgPT09ICdudW1iZXInKSB7XHJcblx0XHRcdHRpdGxlID0gU3RyaW5nKHRpdGxlRGF0YSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aXRsZSA9IGZpbGVOYW1lO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSB7XHJcblx0XHR0aXRsZSA9IGZpbGVOYW1lO1xyXG5cdH1cclxuXHJcblx0Ly8gR2V0IGZvbGRlciBwYXRoXHJcblx0Y29uc3QgcGF0aCA9IGVudHJ5LmZpbGUucGF0aDtcclxuXHRjb25zdCBmb2xkZXJQYXRoID0gcGF0aC5zcGxpdCgnLycpLnNsaWNlKDAsIC0xKS5qb2luKCcvJyk7XHJcblxyXG5cdC8vIEdldCBZQU1MIHRhZ3Mgb25seVxyXG5cdGxldCB5YW1sVGFnc1ZhbHVlID0gZW50cnkuZ2V0VmFsdWUoJ25vdGUudGFncycpIGFzIHsgZGF0YT86IHVua25vd24gfSB8IG51bGw7XHJcblx0bGV0IHlhbWxUYWdzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuXHQvLyBGb3IgTURYIGZpbGVzLCBmYWxsYmFjayB0byBtYW51YWwgZnJvbnRtYXR0ZXIgcGFyc2luZyBpZiBCYXNlcyBBUEkgcmV0dXJucyBudWxsXHJcblx0aWYgKCF5YW1sVGFnc1ZhbHVlICYmIGFwcCkge1xyXG5cdFx0Y29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZW50cnkuZmlsZS5wYXRoKTtcclxuXHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZHgnKSB7XHJcblx0XHRcdC8vIENoZWNrIGNhY2hlIGZpcnN0LCB0aGVuIGZhbGxiYWNrIHRvIGFzeW5jIGxvYWRpbmdcclxuXHRcdFx0bGV0IGZyb250bWF0dGVyID0gbWR4RnJvbnRtYXR0ZXJDYWNoZT8uW2VudHJ5LmZpbGUucGF0aF0gPz8gbnVsbDtcclxuXHRcdFx0aWYgKGZyb250bWF0dGVyID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRmcm9udG1hdHRlciA9IGF3YWl0IGdldEZpbGVGcm9udG1hdHRlcihhcHAsIGZpbGUpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChmcm9udG1hdHRlcj8udGFncykge1xyXG5cdFx0XHRcdGNvbnN0IHRhZ0RhdGEgPSBmcm9udG1hdHRlci50YWdzO1xyXG5cdFx0XHRcdGNvbnN0IHJhd1RhZ3MgPSBBcnJheS5pc0FycmF5KHRhZ0RhdGEpXHJcblx0XHRcdFx0XHQ/IHRhZ0RhdGEubWFwKCh0OiB1bmtub3duKSA9PiB7XHJcblx0XHRcdFx0XHRcdGlmICh0ICYmIHR5cGVvZiB0ID09PSAnb2JqZWN0JyAmJiB0ICE9PSBudWxsKSB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgdCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHQgPT09ICdudW1iZXInKSB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIFN0cmluZyh0KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRyZXR1cm4gdCA/IEpTT04uc3RyaW5naWZ5KHQpIDogJyc7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0OiAoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRpZiAodGFnRGF0YSAmJiB0eXBlb2YgdGFnRGF0YSA9PT0gJ29iamVjdCcgJiYgdGFnRGF0YSAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBbSlNPTi5zdHJpbmdpZnkodGFnRGF0YSldO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgdGFnRGF0YSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHRhZ0RhdGEgPT09ICdudW1iZXInKSB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIFtTdHJpbmcodGFnRGF0YSldO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHJldHVybiB0YWdEYXRhID8gW0pTT04uc3RyaW5naWZ5KHRhZ0RhdGEpXSA6IFsnJ107XHJcblx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdHlhbWxUYWdzID0gcmF3VGFncy5tYXAodGFnID0+IHRhZy5yZXBsYWNlKC9eIy8sICcnKSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGlmICh5YW1sVGFnc1ZhbHVlICYmIHlhbWxUYWdzVmFsdWUuZGF0YSAhPSBudWxsKSB7XHJcblx0XHRjb25zdCB0YWdEYXRhID0geWFtbFRhZ3NWYWx1ZS5kYXRhO1xyXG5cdFx0Y29uc3QgcmF3VGFncyA9IEFycmF5LmlzQXJyYXkodGFnRGF0YSlcclxuXHRcdFx0PyB0YWdEYXRhLm1hcCgodDogdW5rbm93bikgPT4ge1xyXG5cdFx0XHRcdGlmICh0ICYmIHR5cGVvZiB0ID09PSAnb2JqZWN0JyAmJiAnZGF0YScgaW4gdCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIFN0cmluZygodCBhcyB7IGRhdGE6IHVua25vd24gfSkuZGF0YSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiAodHlwZW9mIHQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB0ID09PSAnbnVtYmVyJykgPyBTdHJpbmcodCkgOiAnJztcclxuXHRcdFx0fSkuZmlsdGVyKHQgPT4gdClcclxuXHRcdFx0OiAodHlwZW9mIHRhZ0RhdGEgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB0YWdEYXRhID09PSAnbnVtYmVyJykgPyBbU3RyaW5nKHRhZ0RhdGEpXSA6IFtdO1xyXG5cdFx0eWFtbFRhZ3MgPSByYXdUYWdzLm1hcCh0YWcgPT4gdGFnLnJlcGxhY2UoL14jLywgJycpKTtcclxuXHR9XHJcblxyXG5cdC8vIEdldCB0YWdzIGluIFlBTUwgKyBub3RlIGJvZHlcclxuXHRsZXQgYWxsVGFnc1ZhbHVlID0gZW50cnkuZ2V0VmFsdWUoJ2ZpbGUudGFncycpIGFzIHsgZGF0YT86IHVua25vd24gfSB8IG51bGw7XHJcblx0bGV0IHRhZ3M6IHN0cmluZ1tdID0gW107XHJcblxyXG5cdFx0aWYgKGFsbFRhZ3NWYWx1ZSAmJiBhbGxUYWdzVmFsdWUuZGF0YSAhPSBudWxsKSB7XHJcblx0XHRcdGNvbnN0IHRhZ0RhdGEgPSBhbGxUYWdzVmFsdWUuZGF0YTtcclxuXHRcdFx0Y29uc3QgcmF3VGFncyA9IEFycmF5LmlzQXJyYXkodGFnRGF0YSlcclxuXHRcdFx0XHQ/IHRhZ0RhdGEubWFwKCh0OiB1bmtub3duKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAodCAmJiB0eXBlb2YgdCA9PT0gJ29iamVjdCcgJiYgdCAhPT0gbnVsbCAmJiAnZGF0YScgaW4gdCkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBpdGVtRGF0YSA9ICh0IGFzIHsgZGF0YTogdW5rbm93biB9KS5kYXRhO1xyXG5cdFx0XHRcdFx0XHRpZiAoaXRlbURhdGEgJiYgdHlwZW9mIGl0ZW1EYXRhID09PSAnb2JqZWN0JyAmJiBpdGVtRGF0YSAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBKU09OLnN0cmluZ2lmeShpdGVtRGF0YSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0cmV0dXJuIFN0cmluZyhpdGVtRGF0YSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAodCAmJiB0eXBlb2YgdCA9PT0gJ29iamVjdCcgJiYgdCAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkodCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZXR1cm4gKHR5cGVvZiB0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdCA9PT0gJ251bWJlcicpID8gU3RyaW5nKHQpIDogJyc7XHJcblx0XHRcdFx0fSkuZmlsdGVyKCh0KTogdCBpcyBzdHJpbmcgPT4gdHlwZW9mIHQgPT09ICdzdHJpbmcnICYmIHQubGVuZ3RoID4gMClcclxuXHRcdFx0XHQ6ICgoKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAodGFnRGF0YSAmJiB0eXBlb2YgdGFnRGF0YSA9PT0gJ29iamVjdCcgJiYgdGFnRGF0YSAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gW0pTT04uc3RyaW5naWZ5KHRhZ0RhdGEpXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybiAodHlwZW9mIHRhZ0RhdGEgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB0YWdEYXRhID09PSAnbnVtYmVyJykgPyBbU3RyaW5nKHRhZ0RhdGEpXSA6IFtdO1xyXG5cdFx0XHRcdH0pKCk7XHJcblx0XHRcdHRhZ3MgPSByYXdUYWdzLm1hcCh0YWcgPT4gdGFnLnJlcGxhY2UoL14jLywgJycpKTtcclxuXHRcdH0gZWxzZSBpZiAoIWFsbFRhZ3NWYWx1ZSAmJiBhcHApIHtcclxuXHRcdFx0Ly8gRm9yIE1EWCBmaWxlcywgdXNlIFlBTUwgdGFncyAobm8gYm9keSB0YWdzIHNpbmNlIG1ldGFkYXRhIGNhY2hlIGRvZXNuJ3Qgd29yaylcclxuXHRcdFx0Y29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZW50cnkuZmlsZS5wYXRoKTtcclxuXHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21keCcpIHtcclxuXHRcdFx0XHQvLyBGb3IgTURYLCBmaWxlLnRhZ3MgaXMgc2FtZSBhcyBub3RlLnRhZ3MgKG5vIGJvZHkgcGFyc2luZylcclxuXHRcdFx0XHQvLyBGcm9udG1hdHRlciBhbHJlYWR5IGxvYWRlZCBhYm92ZSBpZiBuZWVkZWRcclxuXHRcdFx0XHR0YWdzID0gWy4uLnlhbWxUYWdzXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHQvLyBHZXQgdGltZXN0YW1wc1xyXG5cdGNvbnN0IGN0aW1lID0gZW50cnkuZmlsZS5zdGF0LmN0aW1lO1xyXG5cdGNvbnN0IG10aW1lID0gZW50cnkuZmlsZS5zdGF0Lm10aW1lO1xyXG5cclxuXHQvLyBHZXQgdGFncyBmcm9tIHNwZWNpZmllZCBwcm9wZXJ0eSBpZiBlbmFibGVkXHJcblx0bGV0IGRpc3BsYXlUYWdzOiBzdHJpbmdbXSA9IFtdO1xyXG5cdGlmIChzZXR0aW5ncy5zaG93VGFncyAmJiBzZXR0aW5ncy50YWdzUHJvcGVydHkpIHtcclxuXHRcdGNvbnN0IHRhZ3NWYWx1ZSA9IGF3YWl0IGdldEZpcnN0QmFzZXNQcm9wZXJ0eVZhbHVlKGVudHJ5LCBzZXR0aW5ncy50YWdzUHJvcGVydHksIGFwcCkgYXMgeyBkYXRhPzogdW5rbm93biB9IHwgbnVsbDtcclxuXHRcdGlmICh0YWdzVmFsdWUgJiYgdGFnc1ZhbHVlLmRhdGEgIT0gbnVsbCkge1xyXG5cdFx0XHRjb25zdCB0YWdEYXRhID0gdGFnc1ZhbHVlLmRhdGE7XHJcblx0XHRcdGlmIChBcnJheS5pc0FycmF5KHRhZ0RhdGEpKSB7XHJcblx0XHRcdFx0ZGlzcGxheVRhZ3MgPSB0YWdEYXRhLm1hcCgodDogdW5rbm93bikgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHQgJiYgdHlwZW9mIHQgPT09ICdvYmplY3QnICYmICdkYXRhJyBpbiB0KSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBTdHJpbmcoKHQgYXMgeyBkYXRhOiB1bmtub3duIH0pLmRhdGEpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmV0dXJuICh0eXBlb2YgdCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHQgPT09ICdudW1iZXInKSA/IFN0cmluZyh0KSA6ICcnO1xyXG5cdFx0XHRcdH0pLmZpbHRlcigodCk6IHQgaXMgc3RyaW5nID0+IHR5cGVvZiB0ID09PSAnc3RyaW5nJyAmJiB0Lmxlbmd0aCA+IDApO1xyXG5cdFx0XHR9IGVsc2UgaWYgKHR5cGVvZiB0YWdEYXRhID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdGFnRGF0YSA9PT0gJ251bWJlcicpIHtcclxuXHRcdFx0XHRkaXNwbGF5VGFncyA9IFtTdHJpbmcodGFnRGF0YSldO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBDcmVhdGUgYmFzZSBjYXJkIGRhdGFcclxuXHRjb25zdCBjYXJkRGF0YTogQ2FyZERhdGEgPSB7XHJcblx0XHRwYXRoLFxyXG5cdFx0bmFtZTogZmlsZU5hbWUsXHJcblx0XHR0aXRsZSxcclxuXHRcdHRhZ3MsXHJcblx0XHR5YW1sVGFncyxcclxuXHRcdGN0aW1lLFxyXG5cdFx0bXRpbWUsXHJcblx0XHRmb2xkZXJQYXRoLFxyXG5cdFx0c25pcHBldCxcclxuXHRcdGltYWdlVXJsLFxyXG5cdFx0aGFzSW1hZ2VBdmFpbGFibGU6IGhhc0ltYWdlQXZhaWxhYmxlIHx8IGZhbHNlLFxyXG5cdFx0ZGlzcGxheVRhZ3M6IGRpc3BsYXlUYWdzLmxlbmd0aCA+IDAgPyBkaXNwbGF5VGFncyA6IHVuZGVmaW5lZFxyXG5cdH07XHJcblxyXG5cdC8vIFJlc29sdmUgcHJvcGVydGllc1xyXG5cdGNvbnN0IHByb3BzID0gW1xyXG5cdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MSxcclxuXHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTIsXHJcblx0XHRzZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkzLFxyXG5cdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NCxcclxuXHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTUsXHJcblx0XHRzZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk2LFxyXG5cdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NyxcclxuXHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTgsXHJcblx0XHRzZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk5LFxyXG5cdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTAsXHJcblx0XHRzZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMSxcclxuXHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEyLFxyXG5cdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTMsXHJcblx0XHRzZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxNFxyXG5cdF07XHJcblxyXG5cdC8vIERldGVjdCBkdXBsaWNhdGVzXHJcblx0Y29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG5cdGNvbnN0IGVmZmVjdGl2ZVByb3BzID0gcHJvcHMubWFwKHByb3AgPT4ge1xyXG5cdFx0aWYgKCFwcm9wIHx8IHByb3AgPT09ICcnKSByZXR1cm4gJyc7XHJcblx0XHRpZiAoc2Vlbi5oYXMocHJvcCkpIHJldHVybiAnJztcclxuXHRcdHNlZW4uYWRkKHByb3ApO1xyXG5cdFx0cmV0dXJuIHByb3A7XHJcblx0fSk7XHJcblxyXG5cdC8vIFN0b3JlIHByb3BlcnR5IG5hbWVzXHJcblx0Y2FyZERhdGEucHJvcGVydHlOYW1lMSA9IGVmZmVjdGl2ZVByb3BzWzBdIHx8IHVuZGVmaW5lZDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eU5hbWUyID0gZWZmZWN0aXZlUHJvcHNbMV0gfHwgdW5kZWZpbmVkO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5TmFtZTMgPSBlZmZlY3RpdmVQcm9wc1syXSB8fCB1bmRlZmluZWQ7XHJcblx0Y2FyZERhdGEucHJvcGVydHlOYW1lNCA9IGVmZmVjdGl2ZVByb3BzWzNdIHx8IHVuZGVmaW5lZDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eU5hbWU1ID0gZWZmZWN0aXZlUHJvcHNbNF0gfHwgdW5kZWZpbmVkO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5TmFtZTYgPSBlZmZlY3RpdmVQcm9wc1s1XSB8fCB1bmRlZmluZWQ7XHJcblx0Y2FyZERhdGEucHJvcGVydHlOYW1lNyA9IGVmZmVjdGl2ZVByb3BzWzZdIHx8IHVuZGVmaW5lZDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eU5hbWU4ID0gZWZmZWN0aXZlUHJvcHNbN10gfHwgdW5kZWZpbmVkO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5TmFtZTkgPSBlZmZlY3RpdmVQcm9wc1s4XSB8fCB1bmRlZmluZWQ7XHJcblx0Y2FyZERhdGEucHJvcGVydHlOYW1lMTAgPSBlZmZlY3RpdmVQcm9wc1s5XSB8fCB1bmRlZmluZWQ7XHJcblx0Y2FyZERhdGEucHJvcGVydHlOYW1lMTEgPSBlZmZlY3RpdmVQcm9wc1sxMF0gfHwgdW5kZWZpbmVkO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5TmFtZTEyID0gZWZmZWN0aXZlUHJvcHNbMTFdIHx8IHVuZGVmaW5lZDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eU5hbWUxMyA9IGVmZmVjdGl2ZVByb3BzWzEyXSB8fCB1bmRlZmluZWQ7XHJcblx0Y2FyZERhdGEucHJvcGVydHlOYW1lMTQgPSBlZmZlY3RpdmVQcm9wc1sxM10gfHwgdW5kZWZpbmVkO1xyXG5cclxuXHQvLyBSZXNvbHZlIHByb3BlcnR5IHZhbHVlc1xyXG5cdC8vIFJlc29sdmUgcHJvcGVydHkgdmFsdWVzIChhc3luYyBmb3IgTURYIHN1cHBvcnQsIGJ1dCB1c2VzIGNhY2hlIHdoZW4gYXZhaWxhYmxlKVxyXG5cdGNhcmREYXRhLnByb3BlcnR5MSA9IGVmZmVjdGl2ZVByb3BzWzBdID8gYXdhaXQgcmVzb2x2ZUJhc2VzUHJvcGVydHlBc3luYyhlZmZlY3RpdmVQcm9wc1swXSwgZW50cnksIGNhcmREYXRhLCBzZXR0aW5ncywgYXBwLCBtZHhGcm9udG1hdHRlckNhY2hlKSA6IG51bGw7XHJcblx0Y2FyZERhdGEucHJvcGVydHkyID0gZWZmZWN0aXZlUHJvcHNbMV0gPyBhd2FpdCByZXNvbHZlQmFzZXNQcm9wZXJ0eUFzeW5jKGVmZmVjdGl2ZVByb3BzWzFdLCBlbnRyeSwgY2FyZERhdGEsIHNldHRpbmdzLCBhcHAsIG1keEZyb250bWF0dGVyQ2FjaGUpIDogbnVsbDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eTMgPSBlZmZlY3RpdmVQcm9wc1syXSA/IGF3YWl0IHJlc29sdmVCYXNlc1Byb3BlcnR5QXN5bmMoZWZmZWN0aXZlUHJvcHNbMl0sIGVudHJ5LCBjYXJkRGF0YSwgc2V0dGluZ3MsIGFwcCwgbWR4RnJvbnRtYXR0ZXJDYWNoZSkgOiBudWxsO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5NCA9IGVmZmVjdGl2ZVByb3BzWzNdID8gYXdhaXQgcmVzb2x2ZUJhc2VzUHJvcGVydHlBc3luYyhlZmZlY3RpdmVQcm9wc1szXSwgZW50cnksIGNhcmREYXRhLCBzZXR0aW5ncywgYXBwLCBtZHhGcm9udG1hdHRlckNhY2hlKSA6IG51bGw7XHJcblx0Y2FyZERhdGEucHJvcGVydHk1ID0gZWZmZWN0aXZlUHJvcHNbNF0gPyBhd2FpdCByZXNvbHZlQmFzZXNQcm9wZXJ0eUFzeW5jKGVmZmVjdGl2ZVByb3BzWzRdLCBlbnRyeSwgY2FyZERhdGEsIHNldHRpbmdzLCBhcHAsIG1keEZyb250bWF0dGVyQ2FjaGUpIDogbnVsbDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eTYgPSBlZmZlY3RpdmVQcm9wc1s1XSA/IGF3YWl0IHJlc29sdmVCYXNlc1Byb3BlcnR5QXN5bmMoZWZmZWN0aXZlUHJvcHNbNV0sIGVudHJ5LCBjYXJkRGF0YSwgc2V0dGluZ3MsIGFwcCwgbWR4RnJvbnRtYXR0ZXJDYWNoZSkgOiBudWxsO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5NyA9IGVmZmVjdGl2ZVByb3BzWzZdID8gYXdhaXQgcmVzb2x2ZUJhc2VzUHJvcGVydHlBc3luYyhlZmZlY3RpdmVQcm9wc1s2XSwgZW50cnksIGNhcmREYXRhLCBzZXR0aW5ncywgYXBwLCBtZHhGcm9udG1hdHRlckNhY2hlKSA6IG51bGw7XHJcblx0Y2FyZERhdGEucHJvcGVydHk4ID0gZWZmZWN0aXZlUHJvcHNbN10gPyBhd2FpdCByZXNvbHZlQmFzZXNQcm9wZXJ0eUFzeW5jKGVmZmVjdGl2ZVByb3BzWzddLCBlbnRyeSwgY2FyZERhdGEsIHNldHRpbmdzLCBhcHAsIG1keEZyb250bWF0dGVyQ2FjaGUpIDogbnVsbDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eTkgPSBlZmZlY3RpdmVQcm9wc1s4XSA/IGF3YWl0IHJlc29sdmVCYXNlc1Byb3BlcnR5QXN5bmMoZWZmZWN0aXZlUHJvcHNbOF0sIGVudHJ5LCBjYXJkRGF0YSwgc2V0dGluZ3MsIGFwcCwgbWR4RnJvbnRtYXR0ZXJDYWNoZSkgOiBudWxsO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5MTAgPSBlZmZlY3RpdmVQcm9wc1s5XSA/IGF3YWl0IHJlc29sdmVCYXNlc1Byb3BlcnR5QXN5bmMoZWZmZWN0aXZlUHJvcHNbOV0sIGVudHJ5LCBjYXJkRGF0YSwgc2V0dGluZ3MsIGFwcCwgbWR4RnJvbnRtYXR0ZXJDYWNoZSkgOiBudWxsO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5MTEgPSBlZmZlY3RpdmVQcm9wc1sxMF0gPyBhd2FpdCByZXNvbHZlQmFzZXNQcm9wZXJ0eUFzeW5jKGVmZmVjdGl2ZVByb3BzWzEwXSwgZW50cnksIGNhcmREYXRhLCBzZXR0aW5ncywgYXBwLCBtZHhGcm9udG1hdHRlckNhY2hlKSA6IG51bGw7XHJcblx0Y2FyZERhdGEucHJvcGVydHkxMiA9IGVmZmVjdGl2ZVByb3BzWzExXSA/IGF3YWl0IHJlc29sdmVCYXNlc1Byb3BlcnR5QXN5bmMoZWZmZWN0aXZlUHJvcHNbMTFdLCBlbnRyeSwgY2FyZERhdGEsIHNldHRpbmdzLCBhcHAsIG1keEZyb250bWF0dGVyQ2FjaGUpIDogbnVsbDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eTEzID0gZWZmZWN0aXZlUHJvcHNbMTJdID8gYXdhaXQgcmVzb2x2ZUJhc2VzUHJvcGVydHlBc3luYyhlZmZlY3RpdmVQcm9wc1sxMl0sIGVudHJ5LCBjYXJkRGF0YSwgc2V0dGluZ3MsIGFwcCwgbWR4RnJvbnRtYXR0ZXJDYWNoZSkgOiBudWxsO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5MTQgPSBlZmZlY3RpdmVQcm9wc1sxM10gPyBhd2FpdCByZXNvbHZlQmFzZXNQcm9wZXJ0eUFzeW5jKGVmZmVjdGl2ZVByb3BzWzEzXSwgZW50cnksIGNhcmREYXRhLCBzZXR0aW5ncywgYXBwLCBtZHhGcm9udG1hdHRlckNhY2hlKSA6IG51bGw7XHJcblxyXG5cdHJldHVybiBjYXJkRGF0YTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEJhdGNoIHRyYW5zZm9ybSBCYXNlcyBlbnRyaWVzIHRvIENhcmREYXRhIGFycmF5XHJcbiAqIFN1cHBvcnRzIE1EWCBmaWxlcyB2aWEgbWFudWFsIGZyb250bWF0dGVyIHBhcnNpbmdcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0cmFuc2Zvcm1CYXNlc0VudHJpZXMoXHJcblx0ZW50cmllczogQmFzZXNFbnRyeVtdLFxyXG5cdHNldHRpbmdzOiBDTVNTZXR0aW5ncyxcclxuXHRzb3J0TWV0aG9kOiBzdHJpbmcsXHJcblx0aXNTaHVmZmxlZDogYm9vbGVhbixcclxuXHRzbmlwcGV0czogUmVjb3JkPHN0cmluZywgc3RyaW5nPixcclxuXHRpbWFnZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHN0cmluZ1tdPixcclxuXHRoYXNJbWFnZUF2YWlsYWJsZTogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4sXHJcblx0YXBwPzogQXBwLFxyXG5cdG1keEZyb250bWF0dGVyQ2FjaGU/OiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGw+XHJcbik6IFByb21pc2U8Q2FyZERhdGFbXT4ge1xyXG5cdHJldHVybiBQcm9taXNlLmFsbChlbnRyaWVzLm1hcChlbnRyeSA9PiBiYXNlc0VudHJ5VG9DYXJkRGF0YShcclxuXHRcdGVudHJ5LFxyXG5cdFx0c2V0dGluZ3MsXHJcblx0XHRzb3J0TWV0aG9kLFxyXG5cdFx0aXNTaHVmZmxlZCxcclxuXHRcdHNuaXBwZXRzW2VudHJ5LmZpbGUucGF0aF0sXHJcblx0XHRpbWFnZXNbZW50cnkuZmlsZS5wYXRoXSxcclxuXHRcdGhhc0ltYWdlQXZhaWxhYmxlW2VudHJ5LmZpbGUucGF0aF0sXHJcblx0XHRhcHAsXHJcblx0XHRtZHhGcm9udG1hdHRlckNhY2hlXHJcblx0KSkpO1xyXG59XHJcblxyXG4vKipcclxuICogUmVzb2x2ZSBwcm9wZXJ0eSB2YWx1ZSBmb3IgQmFzZXMgZW50cnkgKGFzeW5jIHZlcnNpb24gd2l0aCBNRFggc3VwcG9ydClcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXNvbHZlQmFzZXNQcm9wZXJ0eUFzeW5jKFxyXG5cdHByb3BlcnR5TmFtZTogc3RyaW5nLFxyXG5cdGVudHJ5OiBCYXNlc0VudHJ5LFxyXG5cdGNhcmREYXRhOiBDYXJkRGF0YSxcclxuXHRzZXR0aW5nczogQ01TU2V0dGluZ3MsXHJcblx0YXBwPzogQXBwLFxyXG5cdG1keEZyb250bWF0dGVyQ2FjaGU/OiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGw+XHJcbik6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xyXG5cdGlmICghcHJvcGVydHlOYW1lIHx8IHByb3BlcnR5TmFtZSA9PT0gJycpIHtcclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxuXHJcblx0Ly8gSGFuZGxlIHNwZWNpYWwgcHJvcGVydGllc1xyXG5cdGlmIChwcm9wZXJ0eU5hbWUgPT09ICdmaWxlLnBhdGgnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ2ZpbGUgcGF0aCcpIHtcclxuXHRcdHJldHVybiBjYXJkRGF0YS5mb2xkZXJQYXRoIHx8IG51bGw7XHJcblx0fVxyXG5cclxuXHRpZiAocHJvcGVydHlOYW1lID09PSAndGFncycgfHwgcHJvcGVydHlOYW1lID09PSAnbm90ZS50YWdzJykge1xyXG5cdFx0cmV0dXJuIGNhcmREYXRhLnlhbWxUYWdzLmxlbmd0aCA+IDAgPyAndGFncycgOiBudWxsO1xyXG5cdH1cclxuXHJcblx0aWYgKHByb3BlcnR5TmFtZSA9PT0gJ2ZpbGUudGFncycgfHwgcHJvcGVydHlOYW1lID09PSAnZmlsZSB0YWdzJykge1xyXG5cdFx0cmV0dXJuIGNhcmREYXRhLnRhZ3MubGVuZ3RoID4gMCA/ICd0YWdzJyA6IG51bGw7XHJcblx0fVxyXG5cclxuXHRpZiAocHJvcGVydHlOYW1lID09PSAnZmlsZS5jdGltZScgfHwgcHJvcGVydHlOYW1lID09PSAnY3JlYXRlZCB0aW1lJykge1xyXG5cdFx0cmV0dXJuIG5ldyBEYXRlKGNhcmREYXRhLmN0aW1lKS50b0xvY2FsZURhdGVTdHJpbmcoKTtcclxuXHR9XHJcblxyXG5cdGlmIChwcm9wZXJ0eU5hbWUgPT09ICdmaWxlLm10aW1lJyB8fCBwcm9wZXJ0eU5hbWUgPT09ICdtb2RpZmllZCB0aW1lJykge1xyXG5cdFx0cmV0dXJuIG5ldyBEYXRlKGNhcmREYXRhLm10aW1lKS50b0xvY2FsZURhdGVTdHJpbmcoKTtcclxuXHR9XHJcblxyXG5cdC8vIEdlbmVyaWMgcHJvcGVydHk6IHJlYWQgZnJvbSBmcm9udG1hdHRlclxyXG5cdC8vIEZvciBNRFggZmlsZXMsIGNoZWNrIGNhY2hlIGZpcnN0IHRvIGF2b2lkIGFzeW5jIGxvYWRpbmdcclxuXHRsZXQgdmFsdWU6IHVua25vd24gPSBudWxsO1xyXG5cdGlmIChhcHApIHtcclxuXHRcdGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGVudHJ5LmZpbGUucGF0aCk7XHJcblx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbWR4JyAmJiBtZHhGcm9udG1hdHRlckNhY2hlKSB7XHJcblx0XHRcdGNvbnN0IGZyb250bWF0dGVyID0gbWR4RnJvbnRtYXR0ZXJDYWNoZVtlbnRyeS5maWxlLnBhdGhdO1xyXG5cdFx0XHRpZiAoZnJvbnRtYXR0ZXIpIHtcclxuXHRcdFx0XHQvLyBTdHJpcCBcIm5vdGUuXCIgcHJlZml4IGlmIHByZXNlbnRcclxuXHRcdFx0XHRjb25zdCBjbGVhblByb3AgPSBwcm9wZXJ0eU5hbWUuc3RhcnRzV2l0aCgnbm90ZS4nKSA/IHByb3BlcnR5TmFtZS5zdWJzdHJpbmcoNSkgOiBwcm9wZXJ0eU5hbWU7XHJcblx0XHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXJWYWx1ZSA9IGZyb250bWF0dGVyW2NsZWFuUHJvcF07XHJcblx0XHRcdFx0aWYgKGZyb250bWF0dGVyVmFsdWUgIT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0Ly8gUmV0dXJuIGluIEJhc2VzIEFQSSBmb3JtYXQ6IHsgZGF0YTogdmFsdWUgfVxyXG5cdFx0XHRcdFx0dmFsdWUgPSB7IGRhdGE6IGZyb250bWF0dGVyVmFsdWUgfTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Ly8gSWYgY2FjaGUgZGlkbid0IGhhdmUgaXQsIHVzZSB0aGUgYXN5bmMgbWV0aG9kXHJcblx0aWYgKCF2YWx1ZSkge1xyXG5cdFx0dmFsdWUgPSBhd2FpdCBnZXRGaXJzdEJhc2VzUHJvcGVydHlWYWx1ZShlbnRyeSwgcHJvcGVydHlOYW1lLCBhcHApO1xyXG5cdH1cclxuXHRpZiAoIXZhbHVlKSByZXR1cm4gbnVsbDtcclxuXHJcblx0Ly8gVHlwZSBndWFyZCBmb3IgdmFsdWVcclxuXHRjb25zdCB2YWx1ZU9iaiA9IHZhbHVlIGFzIHsgZGF0ZT86IERhdGU7IGRhdGE/OiB1bmtub3duIH0gfCBudWxsO1xyXG5cdGlmICghdmFsdWVPYmopIHJldHVybiBudWxsO1xyXG5cclxuXHQvLyBDaGVjayBpZiBpdCdzIGEgZGF0ZS9kYXRldGltZSB2YWx1ZVxyXG5cdGlmICgnZGF0ZScgaW4gdmFsdWVPYmogJiYgdmFsdWVPYmouZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuXHRcdHJldHVybiB2YWx1ZU9iai5kYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG5cdH1cclxuXHJcblx0Ly8gRm9yIG5vbi1kYXRlIHByb3BlcnRpZXMsIGV4dHJhY3QgLmRhdGFcclxuXHRjb25zdCBkYXRhID0gdmFsdWVPYmouZGF0YTtcclxuXHRcclxuXHQvLyBJTVBPUlRBTlQ6IFJldHVybiBcIlwiIGZvciBlbXB0eSAocHJvcGVydHkgZXhpc3RzIGJ1dCBpcyBlbXB0eSksIG51bGwgZm9yIG1pc3NpbmcgKHByb3BlcnR5IGRvZXNuJ3QgZXhpc3QpXHJcblx0Ly8gVGhpcyBtYXRjaGVzIER5bmFtaWMgVmlld3MgYmVoYXZpb3IgZm9yIGhpZGUgbWlzc2luZy9lbXB0eSBwcm9wZXJ0aWVzXHJcblx0aWYgKGRhdGEgPT0gbnVsbCkge1xyXG5cdFx0cmV0dXJuIG51bGw7IC8vIFByb3BlcnR5IGRvZXNuJ3QgZXhpc3RcclxuXHR9XHJcblx0XHJcblx0aWYgKGRhdGEgPT09ICcnKSB7XHJcblx0XHRyZXR1cm4gXCJcIjsgLy8gUHJvcGVydHkgZXhpc3RzIGJ1dCBpcyBlbXB0eVxyXG5cdH1cclxuXHJcblx0Ly8gSGFuZGxlIGFycmF5cyAoZS5nLiwgYWxpYXNlcywgbGlzdHMpXHJcblx0Ly8gQ2hlY2sgaWYgZGF0YSBpcyBhbHJlYWR5IGEgc3RyaW5nIHRoYXQgbWlnaHQgYmUgZHVwbGljYXRlZFxyXG5cdGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcclxuXHRcdGNvbnN0IHRyaW1tZWQgPSBkYXRhLnRyaW0oKTtcclxuXHRcdGlmICh0cmltbWVkLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRyZXR1cm4gXCJcIjsgLy8gRW1wdHkgc3RyaW5nXHJcblx0XHR9XHJcblx0XHQvLyBSZW1vdmUgZHVwbGljYXRpb24gaWYgcHJlc2VudCAoaGFuZGxlcyBjYXNlcyB3aGVyZSBCYXNlcyByZXR1cm5zIGR1cGxpY2F0ZWQgc3RyaW5ncylcclxuXHRcdHJldHVybiByZW1vdmVEdXBsaWNhdGlvbih0cmltbWVkKTtcclxuXHR9XHJcblx0XHJcblx0aWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcclxuXHRcdGlmIChkYXRhLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRyZXR1cm4gXCJcIjsgLy8gRW1wdHkgYXJyYXlcclxuXHRcdH1cclxuXHRcdC8vIENvbnZlcnQgYXJyYXkgaXRlbXMgdG8gc3RyaW5ncyBhbmQgam9pbiwgcmVtb3ZpbmcgZHVwbGljYXRlc1xyXG5cdFx0Y29uc3QgdW5pcXVlSXRlbXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuXHRcdGNvbnN0IHJlc3VsdDogc3RyaW5nW10gPSBbXTtcclxuXHRcdFxyXG5cdFx0Zm9yIChjb25zdCBpdGVtIG9mIGRhdGEpIHtcclxuXHRcdFx0bGV0IHN0cjogc3RyaW5nO1xyXG5cdFx0XHRpZiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcgJiYgJ2RhdGEnIGluIGl0ZW0pIHtcclxuXHRcdFx0XHRjb25zdCBpdGVtRGF0YSA9IChpdGVtIGFzIHsgZGF0YTogdW5rbm93biB9KS5kYXRhO1xyXG5cdFx0XHRcdC8vIEhhbmRsZSBuZXN0ZWQgZGF0YSBzdHJ1Y3R1cmVzIC0gaWYgZGF0YSBpdHNlbGYgaXMgYW4gb2JqZWN0IHdpdGggZGF0YSwgZXh0cmFjdCByZWN1cnNpdmVseVxyXG5cdFx0XHRcdGlmIChpdGVtRGF0YSAmJiB0eXBlb2YgaXRlbURhdGEgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KGl0ZW1EYXRhKSAmJiAnZGF0YScgaW4gaXRlbURhdGEpIHtcclxuXHRcdFx0XHRcdHN0ciA9IFN0cmluZygoaXRlbURhdGEgYXMgeyBkYXRhOiB1bmtub3duIH0pLmRhdGEpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRzdHIgPSBTdHJpbmcoaXRlbURhdGEpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0JyAmJiBpdGVtICE9PSBudWxsKSB7XHJcblx0XHRcdFx0Ly8gSWYgaXRlbSBpcyBhbiBvYmplY3QgYnV0IGRvZXNuJ3QgaGF2ZSAnZGF0YScsIHRyeSB0byBleHRyYWN0IHZhbHVlIGRpcmVjdGx5XHJcblx0XHRcdFx0Ly8gVGhpcyBoYW5kbGVzIGNhc2VzIHdoZXJlIEJhc2VzIG1pZ2h0IHJldHVybiB7dmFsdWU6IFwiLi4uXCJ9IG9yIHNpbWlsYXJcclxuXHRcdFx0XHRzdHIgPSBTdHJpbmcoaXRlbSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0c3RyID0gU3RyaW5nKGl0ZW0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBSZW1vdmUgZHVwbGljYXRpb24gQkVGT1JFIGNoZWNraW5nIHVuaXF1ZW5lc3MgKGhhbmRsZXMgY2FzZXMgd2hlcmUgQmFzZXMgcmV0dXJucyBkdXBsaWNhdGVkIHN0cmluZ3MpXHJcblx0XHRcdGNvbnN0IHRyaW1tZWQgPSBzdHIudHJpbSgpO1xyXG5cdFx0XHRpZiAodHJpbW1lZCAmJiB0cmltbWVkICE9PSAnJykge1xyXG5cdFx0XHRcdGNvbnN0IGRlZHVwbGljYXRlZCA9IHJlbW92ZUR1cGxpY2F0aW9uKHRyaW1tZWQpO1xyXG5cdFx0XHRcdGlmIChkZWR1cGxpY2F0ZWQgJiYgZGVkdXBsaWNhdGVkICE9PSAnJyAmJiAhdW5pcXVlSXRlbXMuaGFzKGRlZHVwbGljYXRlZCkpIHtcclxuXHRcdFx0XHRcdHVuaXF1ZUl0ZW1zLmFkZChkZWR1cGxpY2F0ZWQpO1xyXG5cdFx0XHRcdFx0cmVzdWx0LnB1c2goZGVkdXBsaWNhdGVkKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XHJcblx0XHRcdHJldHVybiByZXN1bHQuam9pbihnZXRMaXN0U2VwYXJhdG9yKCkpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG5cclxuXHQvLyBDb252ZXJ0IHRvIHN0cmluZ1xyXG5cdGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcclxuXHRcdGxldCBzdHIgPSBkYXRhLnRyaW0oKTtcclxuXHRcdGlmIChzdHIubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBSZW1vdmUgYW55IGR1cGxpY2F0aW9uXHJcblx0XHRyZXR1cm4gcmVtb3ZlRHVwbGljYXRpb24oc3RyKTtcclxuXHR9XHJcblx0XHJcblx0aWYgKHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgZGF0YSA9PT0gJ2Jvb2xlYW4nKSB7XHJcblx0XHRyZXR1cm4gU3RyaW5nKGRhdGEpO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbiIsICIvKipcbiAqIFByb3BlcnR5IHV0aWxpdHkgZnVuY3Rpb25zXG4gKiBQb3J0ZWQgZnJvbSBEeW5hbWljIFZpZXdzXG4gKiBVcGRhdGVkIHRvIHN1cHBvcnQgTURYIGZpbGVzIHZpYSBtYW51YWwgZnJvbnRtYXR0ZXIgcGFyc2luZ1xuICovXG5cbmltcG9ydCB0eXBlIHsgQXBwLCBCYXNlc0VudHJ5IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBnZXRGaWxlRnJvbnRtYXR0ZXIgfSBmcm9tICcuL2Zyb250bWF0dGVyLWhlbHBlcic7XG5cbi8qKlxuICogR2V0IGZpcnN0IG5vbi1lbXB0eSBwcm9wZXJ0eSB2YWx1ZSBmcm9tIGNvbW1hLXNlcGFyYXRlZCBsaXN0IChCYXNlcylcbiAqIFN1cHBvcnRzIE1EWCBmaWxlcyB2aWEgbWFudWFsIGZyb250bWF0dGVyIHBhcnNpbmcgd2hlbiBCYXNlcyBBUEkgZmFpbHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEZpcnN0QmFzZXNQcm9wZXJ0eVZhbHVlKFxuXHRlbnRyeTogQmFzZXNFbnRyeSwgXG5cdHByb3BlcnR5U3RyaW5nOiBzdHJpbmcsXG5cdGFwcD86IEFwcFxuKTogUHJvbWlzZTx1bmtub3duPiB7XG5cdGlmICghcHJvcGVydHlTdHJpbmcgfHwgIXByb3BlcnR5U3RyaW5nLnRyaW0oKSkgcmV0dXJuIG51bGw7XG5cblx0Y29uc3QgcHJvcGVydGllcyA9IHByb3BlcnR5U3RyaW5nLnNwbGl0KCcsJykubWFwKHAgPT4gcC50cmltKCkpLmZpbHRlcihwID0+IHApO1xuXG5cdGZvciAoY29uc3QgcHJvcCBvZiBwcm9wZXJ0aWVzKSB7XG5cdFx0Y29uc3QgdmFsdWUgPSBlbnRyeS5nZXRWYWx1ZShwcm9wIGFzIGBub3RlLiR7c3RyaW5nfWAgfCBgZm9ybXVsYS4ke3N0cmluZ31gIHwgYGZpbGUuJHtzdHJpbmd9YCk7XG5cblx0XHQvLyBDaGVjayBpZiBwcm9wZXJ0eSBleGlzdHMgYW5kIGhhcyBhIHZhbHVlXG5cdFx0Y29uc3QgdmFsdWVPYmogPSB2YWx1ZSBhcyB7IGRhdGU/OiBEYXRlOyBkYXRhPzogdW5rbm93biB9IHwgbnVsbDtcblx0XHRjb25zdCBwcm9wZXJ0eUV4aXN0cyA9IHZhbHVlT2JqICYmIChcblx0XHRcdCgnZGF0ZScgaW4gdmFsdWVPYmogJiYgdmFsdWVPYmouZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHx8XG5cdFx0XHQoJ2RhdGEnIGluIHZhbHVlT2JqICYmIHZhbHVlT2JqLmRhdGEgIT0gbnVsbClcblx0XHQpO1xuXG5cdFx0aWYgKHByb3BlcnR5RXhpc3RzKSB7XG5cdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0fVxuXG5cdFx0Ly8gRm9yIE1EWCBmaWxlcywgZmFsbGJhY2sgdG8gbWFudWFsIGZyb250bWF0dGVyIHBhcnNpbmcgaWYgQmFzZXMgQVBJIHJldHVybmVkIG51bGxcblx0XHRpZiAoIXByb3BlcnR5RXhpc3RzICYmIGFwcCkge1xuXHRcdFx0Y29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZW50cnkuZmlsZS5wYXRoKTtcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZHgnKSB7XG5cdFx0XHRcdGNvbnN0IGZyb250bWF0dGVyID0gYXdhaXQgZ2V0RmlsZUZyb250bWF0dGVyKGFwcCwgZmlsZSk7XG5cdFx0XHRcdGlmIChmcm9udG1hdHRlcikge1xuXHRcdFx0XHRcdC8vIFN0cmlwIFwibm90ZS5cIiBwcmVmaXggaWYgcHJlc2VudFxuXHRcdFx0XHRcdGNvbnN0IGNsZWFuUHJvcCA9IHByb3Auc3RhcnRzV2l0aCgnbm90ZS4nKSA/IHByb3Auc3Vic3RyaW5nKDUpIDogcHJvcDtcblx0XHRcdFx0XHRjb25zdCBmcm9udG1hdHRlclZhbHVlID0gZnJvbnRtYXR0ZXJbY2xlYW5Qcm9wXTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAoZnJvbnRtYXR0ZXJWYWx1ZSAhPSBudWxsKSB7XG5cdFx0XHRcdFx0XHQvLyBSZXR1cm4gaW4gQmFzZXMgQVBJIGZvcm1hdDogeyBkYXRhOiB2YWx1ZSB9XG5cdFx0XHRcdFx0XHRyZXR1cm4geyBkYXRhOiBmcm9udG1hdHRlclZhbHVlIH07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogR2V0IGZpcnN0IGltYWdlIHZhbHVlIGZyb20gcHJvcGVydHkgKEJhc2VzKVxuICogT25seSBhY2NlcHRzIHRleHQgYW5kIGxpc3QgcHJvcGVydHkgdHlwZXMgY29udGFpbmluZyBpbWFnZSBwYXRocy9VUkxzXG4gKiBSZXR1cm5zIGZpcnN0IGltYWdlIHBhdGgvVVJMIGZvdW5kLCBvciBlbXB0eSBhcnJheSBpZiBub25lXG4gKiBTdXBwb3J0cyBNRFggZmlsZXMgdmlhIG1hbnVhbCBmcm9udG1hdHRlciBwYXJzaW5nIHdoZW4gQmFzZXMgQVBJIGZhaWxzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxCYXNlc0ltYWdlUHJvcGVydHlWYWx1ZXMoXG5cdGVudHJ5OiBCYXNlc0VudHJ5LCBcblx0cHJvcGVydHlTdHJpbmc6IHN0cmluZyxcblx0YXBwPzogQXBwXG4pOiBQcm9taXNlPHN0cmluZ1tdPiB7XG5cdGlmICghcHJvcGVydHlTdHJpbmcgfHwgIXByb3BlcnR5U3RyaW5nLnRyaW0oKSkgcmV0dXJuIFtdO1xuXG5cdC8vIFVzZSBmaXJzdCBwcm9wZXJ0eSBvbmx5IChub3QgY29tbWEtc2VwYXJhdGVkKVxuXHRjb25zdCBwcm9wID0gcHJvcGVydHlTdHJpbmcuc3BsaXQoJywnKVswXS50cmltKCk7XG5cdGlmICghcHJvcCkgcmV0dXJuIFtdO1xuXG5cdGNvbnN0IHZhbHVlID0gZW50cnkuZ2V0VmFsdWUocHJvcCBhcyBgbm90ZS4ke3N0cmluZ31gIHwgYGZvcm11bGEuJHtzdHJpbmd9YCB8IGBmaWxlLiR7c3RyaW5nfWApIGFzIHsgZGF0YT86IHVua25vd247IGRhdGU/OiBEYXRlIH0gfCBudWxsO1xuXG5cdGxldCBkYXRhOiB1bmtub3duID0gbnVsbDtcblxuXHQvLyBJZiBCYXNlcyBBUEkgcmV0dXJuZWQgYSB2YWx1ZSwgdXNlIGl0XG5cdGlmICh2YWx1ZSAmJiAnZGF0YScgaW4gdmFsdWUpIHtcblx0XHRkYXRhID0gdmFsdWUuZGF0YTtcblx0fSBlbHNlIGlmIChhcHApIHtcblx0XHQvLyBGb3IgTURYIGZpbGVzLCBmYWxsYmFjayB0byBtYW51YWwgZnJvbnRtYXR0ZXIgcGFyc2luZ1xuXHRcdGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGVudHJ5LmZpbGUucGF0aCk7XG5cdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21keCcpIHtcblx0XHRcdGNvbnN0IGZyb250bWF0dGVyID0gYXdhaXQgZ2V0RmlsZUZyb250bWF0dGVyKGFwcCwgZmlsZSk7XG5cdFx0XHRpZiAoZnJvbnRtYXR0ZXIpIHtcblx0XHRcdFx0Ly8gU3RyaXAgXCJub3RlLlwiIHByZWZpeCBpZiBwcmVzZW50XG5cdFx0XHRcdGNvbnN0IGNsZWFuUHJvcCA9IHByb3Auc3RhcnRzV2l0aCgnbm90ZS4nKSA/IHByb3Auc3Vic3RyaW5nKDUpIDogcHJvcDtcblx0XHRcdFx0ZGF0YSA9IGZyb250bWF0dGVyW2NsZWFuUHJvcF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gU2tpcCBpZiBwcm9wZXJ0eSBkb2Vzbid0IGV4aXN0XG5cdGlmIChkYXRhID09IG51bGwpIHJldHVybiBbXTtcblxuXHRjb25zdCBpbWFnZXM6IHN0cmluZ1tdID0gW107XG5cblx0aWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcblx0XHQvLyBMaXN0IHByb3BlcnR5IC0gZ2V0IGFsbCB2YWx1ZXNcblx0XHRmb3IgKGNvbnN0IGl0ZW0gb2YgZGF0YSkge1xuXHRcdFx0aWYgKHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgaXRlbSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0Y29uc3Qgc3RyID0gU3RyaW5nKGl0ZW0pO1xuXHRcdFx0XHRpZiAoc3RyICYmIHN0ci50cmltKCkpIHtcblx0XHRcdFx0XHRpbWFnZXMucHVzaChzdHIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2UgaWYgKGRhdGEgIT09ICcnKSB7XG5cdFx0Ly8gVGV4dCBwcm9wZXJ0eSAtIHNpbmdsZSB2YWx1ZVxuXHRcdGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGRhdGEgPT09ICdudW1iZXInKSB7XG5cdFx0XHRjb25zdCBzdHIgPSBTdHJpbmcoZGF0YSk7XG5cdFx0XHRpZiAoc3RyLnRyaW0oKSkge1xuXHRcdFx0XHRpbWFnZXMucHVzaChzdHIpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBpbWFnZXM7XG59XG5cbi8qKlxuICogUmVzb2x2ZSBhIEJhc2VzIHByb3BlcnR5IHZhbHVlIHRvIGEgc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlQmFzZXNQcm9wZXJ0eShcblx0cHJvcGVydHlOYW1lOiBzdHJpbmcsXG5cdGVudHJ5OiBCYXNlc0VudHJ5LFxuXHRjYXJkOiB7IHBhdGg6IHN0cmluZzsgcHJvcGVydGllczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfVxuKTogc3RyaW5nIHwgbnVsbCB7XG5cdGlmICghcHJvcGVydHlOYW1lIHx8IHByb3BlcnR5TmFtZSA9PT0gJycpIHJldHVybiBudWxsO1xuXG5cdC8vIEhhbmRsZSBzcGVjaWFsIHByb3BlcnRpZXNcblx0aWYgKHByb3BlcnR5TmFtZSA9PT0gJ2ZpbGUucGF0aCcgfHwgcHJvcGVydHlOYW1lID09PSAncGF0aCcgfHwgcHJvcGVydHlOYW1lID09PSAnZmlsZSBwYXRoJykge1xuXHRcdHJldHVybiBjYXJkLnBhdGg7XG5cdH1cblxuXHRpZiAocHJvcGVydHlOYW1lID09PSAnZmlsZS50YWdzJyB8fCBwcm9wZXJ0eU5hbWUgPT09ICdmaWxlIHRhZ3MnKSB7XG5cdFx0Ly8gUmV0dXJuIHRhZ3MgYXMgY29tbWEtc2VwYXJhdGVkIHN0cmluZ1xuXHRcdGNvbnN0IHRhZ3MgPSBjYXJkLnByb3BlcnRpZXMudGFncztcblx0XHRpZiAoQXJyYXkuaXNBcnJheSh0YWdzKSkge1xuXHRcdFx0cmV0dXJuIHRhZ3Muam9pbignLCAnKTtcblx0XHR9XG5cdFx0aWYgKHRhZ3MgJiYgdHlwZW9mIHRhZ3MgPT09ICdvYmplY3QnICYmIHRhZ3MgIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkodGFncykpIHtcblx0XHRcdHJldHVybiBKU09OLnN0cmluZ2lmeSh0YWdzKTtcblx0XHR9XG5cdFx0aWYgKHRhZ3MgIT09IG51bGwgJiYgdGFncyAhPT0gdW5kZWZpbmVkICYmICh0eXBlb2YgdGFncyA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHRhZ3MgPT09ICdudW1iZXInIHx8IHR5cGVvZiB0YWdzID09PSAnYm9vbGVhbicpKSB7XG5cdFx0XHRyZXR1cm4gU3RyaW5nKHRhZ3MpO1xuXHRcdH1cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdGlmIChwcm9wZXJ0eU5hbWUgPT09ICd0YWdzJyB8fCBwcm9wZXJ0eU5hbWUgPT09ICdub3RlLnRhZ3MnKSB7XG5cdFx0Y29uc3QgdGFncyA9IGNhcmQucHJvcGVydGllcy50YWdzO1xuXHRcdGlmIChBcnJheS5pc0FycmF5KHRhZ3MpKSB7XG5cdFx0XHRyZXR1cm4gdGFncy5qb2luKCcsICcpO1xuXHRcdH1cblx0XHRpZiAodGFncyAmJiB0eXBlb2YgdGFncyA9PT0gJ29iamVjdCcgJiYgdGFncyAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheSh0YWdzKSkge1xuXHRcdFx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KHRhZ3MpO1xuXHRcdH1cblx0XHRpZiAodGFncyAhPT0gbnVsbCAmJiB0YWdzICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiB0YWdzID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdGFncyA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHRhZ3MgPT09ICdib29sZWFuJykpIHtcblx0XHRcdHJldHVybiBTdHJpbmcodGFncyk7XG5cdFx0fVxuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0Ly8gR2V0IHZhbHVlIGZyb20gQmFzZXNFbnRyeVxuXHR0cnkge1xuXHRcdGNvbnN0IHZhbHVlID0gZW50cnkuZ2V0VmFsdWUocHJvcGVydHlOYW1lIGFzIGBub3RlLiR7c3RyaW5nfWAgfCBgZm9ybXVsYS4ke3N0cmluZ31gIHwgYGZpbGUuJHtzdHJpbmd9YCkgYXMgeyBkYXRhPzogdW5rbm93bjsgZGF0ZT86IERhdGUgfSB8IG51bGw7XG5cdFx0XG5cdFx0aWYgKCF2YWx1ZSkgcmV0dXJuIG51bGw7XG5cblx0XHQvLyBIYW5kbGUgZGF0ZSB2YWx1ZXNcblx0XHRpZiAoJ2RhdGUnIGluIHZhbHVlICYmIHZhbHVlLmRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7XG5cdFx0XHRyZXR1cm4gdmFsdWUuZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKTtcblx0XHR9XG5cblx0XHQvLyBIYW5kbGUgZGF0YSB2YWx1ZXNcblx0XHRpZiAoJ2RhdGEnIGluIHZhbHVlKSB7XG5cdFx0XHRjb25zdCBkYXRhID0gdmFsdWUuZGF0YTtcblx0XHRcdGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG5cdFx0XHRcdHJldHVybiBkYXRhLm1hcChTdHJpbmcpLmpvaW4oJywgJyk7XG5cdFx0XHR9XG5cdFx0aWYgKGRhdGEgIT0gbnVsbCAmJiBkYXRhICE9PSAnJykge1xuXHRcdFx0aWYgKHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiBkYXRhICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KGRhdGEpKSB7XG5cdFx0XHRcdHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcblx0XHRcdH1cblx0XHRcdGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGRhdGEgPT09ICdudW1iZXInIHx8IHR5cGVvZiBkYXRhID09PSAnYm9vbGVhbicpIHtcblx0XHRcdFx0cmV0dXJuIFN0cmluZyhkYXRhKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcblx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG51bGw7XG5cdH0gY2F0Y2gge1xuXHRcdC8vIEZhbGxiYWNrIHRvIGNhcmQgcHJvcGVydGllc1xuXHRcdGNvbnN0IHByb3BWYWx1ZSA9IGNhcmQucHJvcGVydGllc1twcm9wZXJ0eU5hbWVdO1xuXHRcdGlmIChwcm9wVmFsdWUgIT09IHVuZGVmaW5lZCAmJiBwcm9wVmFsdWUgIT09IG51bGwpIHtcblx0XHRcdGlmIChBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkpIHtcblx0XHRcdFx0cmV0dXJuIHByb3BWYWx1ZS5tYXAoU3RyaW5nKS5qb2luKCcsICcpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHR5cGVvZiBwcm9wVmFsdWUgPT09ICdib29sZWFuJykge1xuXHRcdFx0XHRyZXR1cm4gcHJvcFZhbHVlID8gJ1llcycgOiAnTm8nO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHR5cGVvZiBwcm9wVmFsdWUgPT09ICdvYmplY3QnICYmIHByb3BWYWx1ZSAhPT0gbnVsbCkge1xuXHRcdFx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkocHJvcFZhbHVlKTtcblx0XHRcdH1cblx0XHRcdGlmICh0eXBlb2YgcHJvcFZhbHVlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgcHJvcFZhbHVlID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgcHJvcFZhbHVlID09PSAnYm9vbGVhbicpIHtcblx0XHRcdFx0cmV0dXJuIFN0cmluZyhwcm9wVmFsdWUpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KHByb3BWYWx1ZSk7XG5cdFx0fVxuXHRcdHJldHVybiBudWxsO1xuXHR9XG59XG5cbi8qKlxuICogQ29udmVydCBwcm9wZXJ0eSBuYW1lIHRvIHJlYWRhYmxlIGxhYmVsXG4gKiBVc2VzIEJhc2VzIGNvbmZpZy5nZXREaXNwbGF5TmFtZSgpIG1ldGhvZCAoc2FtZSBhcyBEeW5hbWljIFZpZXdzKVxuICogXG4gKiBAcGFyYW0gcHJvcGVydHlOYW1lIC0gVGhlIHByb3BlcnR5IG5hbWUgKGUuZy4sIFwiZm9ybXVsYS5TbHVnXCIpXG4gKiBAcGFyYW0gYXBwIC0gT2JzaWRpYW4gYXBwIGluc3RhbmNlICh1bnVzZWQsIGtlcHQgZm9yIGNvbXBhdGliaWxpdHkpXG4gKiBAcGFyYW0gYmFzZXNDb25maWcgLSBCYXNlcyBjb25maWcgb2JqZWN0IHRoYXQgaGFzIGdldERpc3BsYXlOYW1lIG1ldGhvZFxuICogQHBhcmFtIGJhc2VzQ29udHJvbGxlciAtIE9wdGlvbmFsIEJhc2VzIGNvbnRyb2xsZXIgKHVudXNlZCwga2VwdCBmb3IgY29tcGF0aWJpbGl0eSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFByb3BlcnR5TGFiZWwoXG5cdHByb3BlcnR5TmFtZTogc3RyaW5nLCBcblx0YXBwPzogQXBwLCBcblx0YmFzZXNDb25maWc/OiB7IGdldD86IChrZXk6IHN0cmluZykgPT4gdW5rbm93biB9LFxuXHRiYXNlc0NvbnRyb2xsZXI/OiB7IGdldFByb3BlcnR5RGlzcGxheU5hbWU/OiAobmFtZTogc3RyaW5nKSA9PiBzdHJpbmcgfVxuKTogc3RyaW5nIHtcblx0aWYgKCFwcm9wZXJ0eU5hbWUgfHwgcHJvcGVydHlOYW1lID09PSAnJykgcmV0dXJuICcnO1xuXG5cdC8vIFVzZSBCYXNlcyBjb25maWcuZ2V0RGlzcGxheU5hbWUoKSBtZXRob2QgKHNhbWUgYXMgRHluYW1pYyBWaWV3cylcblx0aWYgKGJhc2VzQ29uZmlnKSB7XG5cdFx0Y29uc3QgY29uZmlnV2l0aERpc3BsYXlOYW1lID0gYmFzZXNDb25maWcgYXMgeyBnZXREaXNwbGF5TmFtZT86IChuYW1lOiBzdHJpbmcpID0+IHN0cmluZyB9O1xuXHRcdGlmICh0eXBlb2YgY29uZmlnV2l0aERpc3BsYXlOYW1lLmdldERpc3BsYXlOYW1lID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCBkaXNwbGF5TmFtZSA9IGNvbmZpZ1dpdGhEaXNwbGF5TmFtZS5nZXREaXNwbGF5TmFtZShwcm9wZXJ0eU5hbWUpO1xuXHRcdFx0XHRpZiAoZGlzcGxheU5hbWUgJiYgdHlwZW9mIGRpc3BsYXlOYW1lID09PSAnc3RyaW5nJyAmJiBkaXNwbGF5TmFtZS50cmltKCkgIT09ICcnKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRpc3BsYXlOYW1lO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0Ly8gRmFsbCB0aHJvdWdoIHRvIHJldHVybiBwcm9wZXJ0eSBuYW1lXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gRmFsbGJhY2s6IHJldHVybiBwcm9wZXJ0eSBuYW1lIGFzLWlzIChzYW1lIGFzIER5bmFtaWMgVmlld3MpXG5cdHJldHVybiBwcm9wZXJ0eU5hbWU7XG59XG5cblxuIiwgIi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbnMgdG8gcmVhZCBTdHlsZSBTZXR0aW5ncyB2YWx1ZXMgZnJvbSBDU1MgdmFyaWFibGVzIGFuZCBib2R5IGNsYXNzZXNcbiAqIEJhc2VkIG9uIER5bmFtaWMgVmlld3Mgc3R5bGUtc2V0dGluZ3MudHNcbiAqL1xuXG4vKipcbiAqIFJlYWQgYSBDU1MgdmFyaWFibGUgdmFsdWUgZnJvbSB0aGUgZG9jdW1lbnQgYm9keVxuICovXG5mdW5jdGlvbiBnZXRDU1NWYXJpYWJsZShuYW1lOiBzdHJpbmcsIGRlZmF1bHRWYWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcblx0Y29uc3QgdmFsdWUgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUobmFtZSkudHJpbSgpO1xuXHRyZXR1cm4gdmFsdWUgfHwgZGVmYXVsdFZhbHVlO1xufVxuXG4vKipcbiAqIFBhcnNlIGEgQ1NTIHZhcmlhYmxlIGFzIGEgbnVtYmVyIChyZW1vdmluZyB1bml0cyBsaWtlICdweCcpXG4gKi9cbmZ1bmN0aW9uIGdldENTU1ZhcmlhYmxlQXNOdW1iZXIobmFtZTogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IG51bWJlcik6IG51bWJlciB7XG5cdGNvbnN0IHZhbHVlID0gZ2V0Q1NTVmFyaWFibGUobmFtZSwgXCJcIik7XG5cdGlmICghdmFsdWUpIHJldHVybiBkZWZhdWx0VmFsdWU7XG5cdGNvbnN0IHBhcnNlZCA9IHBhcnNlRmxvYXQodmFsdWUpO1xuXHRyZXR1cm4gaXNOYU4ocGFyc2VkKSA/IGRlZmF1bHRWYWx1ZSA6IHBhcnNlZDtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBib2R5IGhhcyBhIHNwZWNpZmljIGNsYXNzXG4gKi9cbmZ1bmN0aW9uIGhhc0JvZHlDbGFzcyhjbGFzc05hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtcbn1cblxuLyoqXG4gKiBHZXQgbWluaW11bSBncmlkIGNvbHVtbnMgZnJvbSBDU1MgdmFyaWFibGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1pbkdyaWRDb2x1bW5zKCk6IG51bWJlciB7XG5cdHJldHVybiBnZXRDU1NWYXJpYWJsZUFzTnVtYmVyKFwiLS1iYXNlcy1jbXMtbWluLWdyaWQtY29sdW1uc1wiLCAxKTtcbn1cblxuLyoqXG4gKiBHZXQgY2FyZCBzcGFjaW5nIGZyb20gQ1NTIHZhcmlhYmxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDYXJkU3BhY2luZygpOiBudW1iZXIge1xuXHRyZXR1cm4gZ2V0Q1NTVmFyaWFibGVBc051bWJlcihcIi0tYmFzZXMtY21zLWNhcmQtc3BhY2luZ1wiLCA4KTtcbn1cblxuLyoqXG4gKiBHZXQgY2FyZCBwYWRkaW5nIGNvbnRhaW5lciBmcm9tIENTUyB2YXJpYWJsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FyZFBhZGRpbmdDb250YWluZXIoKTogbnVtYmVyIHtcblx0cmV0dXJuIGdldENTU1ZhcmlhYmxlQXNOdW1iZXIoXCItLWJhc2VzLWNtcy1jYXJkLXBhZGRpbmctY29udGFpbmVyXCIsIDEyKTtcbn1cblxuLyoqXG4gKiBHZXQgY2FyZCBlbGVtZW50IHNwYWNpbmcgZnJvbSBDU1MgdmFyaWFibGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRTcGFjaW5nKCk6IG51bWJlciB7XG5cdHJldHVybiBnZXRDU1NWYXJpYWJsZUFzTnVtYmVyKFwiLS1iYXNlcy1jbXMtZWxlbWVudC1zcGFjaW5nXCIsIDgpO1xufVxuXG4vKipcbiAqIEdldCBjYXJkIHBhZGRpbmcgZnJvbSBDU1MgdmFyaWFibGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENhcmRQYWRkaW5nKCk6IG51bWJlciB7XG5cdHJldHVybiBnZXRDU1NWYXJpYWJsZUFzTnVtYmVyKFwiLS1iYXNlcy1jbXMtY2FyZC1wYWRkaW5nXCIsIDEyKTtcbn1cblxuLyoqXG4gKiBHZXQgY2FyZCBib3JkZXIgcmFkaXVzIGZyb20gQ1NTIHZhcmlhYmxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDYXJkQm9yZGVyUmFkaXVzKCk6IG51bWJlciB7XG5cdHJldHVybiBnZXRDU1NWYXJpYWJsZUFzTnVtYmVyKFwiLS1iYXNlcy1jbXMtY2FyZC1ib3JkZXItcmFkaXVzXCIsIDgpO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGNhcmQgYmFja2dyb3VuZCBpcyBlbmFibGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNDYXJkQmFja2dyb3VuZCgpOiBib29sZWFuIHtcblx0cmV0dXJuIGhhc0JvZHlDbGFzcyhcImJhc2VzLWNtcy1jYXJkLWJhY2tncm91bmRcIik7XG59XG5cblxuLyoqXG4gKiBHZXQgbGlzdCBzZXBhcmF0b3IgZnJvbSBDU1MgdmFyaWFibGVcbiAqIFJldHVybnMgdGhlIHNlcGFyYXRvciBmb3IgbGlzdC10eXBlIHByb3BlcnRpZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExpc3RTZXBhcmF0b3IoKTogc3RyaW5nIHtcblx0Ly8gUmVhZCB3aXRob3V0IHRyaW0gdG8gcHJlc2VydmUgd2hpdGVzcGFjZVxuXHRsZXQgdmFsdWUgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoXG5cdFx0XCItLWJhc2VzLWNtcy1saXN0LXNlcGFyYXRvclwiLFxuXHQpO1xuXG5cdC8vIFN0cmlwIHN1cnJvdW5kaW5nIHF1b3RlcyBpZiBwcmVzZW50IChTdHlsZSBTZXR0aW5ncyBvciBDU1MgZGVmYXVsdCBhZGRzIHRoZW0pXG5cdGlmIChcblx0XHQodmFsdWUuc3RhcnRzV2l0aCgnXCInKSAmJiB2YWx1ZS5lbmRzV2l0aCgnXCInKSkgfHxcblx0XHQodmFsdWUuc3RhcnRzV2l0aChcIidcIikgJiYgdmFsdWUuZW5kc1dpdGgoXCInXCIpKVxuXHQpIHtcblx0XHR2YWx1ZSA9IHZhbHVlLnNsaWNlKDEsIC0xKTtcblx0fVxuXG5cdC8vIEZhbGxiYWNrIHRvIGRlZmF1bHQgaWYgZW1wdHkgKFN0eWxlIFNldHRpbmdzIHNob3dzIHBsYWNlaG9sZGVyIGJ1dCBkb2Vzbid0IHNldCB2YXJpYWJsZSlcblx0cmV0dXJuIHZhbHVlIHx8IFwiLCBcIjtcbn1cblxuLyoqXG4gKiBHZXQgZW1wdHkgdmFsdWUgbWFya2VyIGZyb20gQ1NTIHZhcmlhYmxlXG4gKiBSZXR1cm5zIHRoZSBzeW1ib2wgZm9yIGVtcHR5IHByb3BlcnR5IHZhbHVlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW1wdHlWYWx1ZU1hcmtlcigpOiBzdHJpbmcge1xuXHQvLyBSZWFkIHdpdGhvdXQgdHJpbSB0byBwcmVzZXJ2ZSB3aGl0ZXNwYWNlXG5cdGxldCB2YWx1ZSA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShcblx0XHRcIi0tYmFzZXMtY21zLWVtcHR5LXZhbHVlLW1hcmtlclwiLFxuXHQpO1xuXG5cdC8vIFN0cmlwIHN1cnJvdW5kaW5nIHF1b3RlcyBpZiBwcmVzZW50IChTdHlsZSBTZXR0aW5ncyBvciBDU1MgZGVmYXVsdCBhZGRzIHRoZW0pXG5cdGlmIChcblx0XHQodmFsdWUuc3RhcnRzV2l0aCgnXCInKSAmJiB2YWx1ZS5lbmRzV2l0aCgnXCInKSkgfHxcblx0XHQodmFsdWUuc3RhcnRzV2l0aChcIidcIikgJiYgdmFsdWUuZW5kc1dpdGgoXCInXCIpKVxuXHQpIHtcblx0XHR2YWx1ZSA9IHZhbHVlLnNsaWNlKDEsIC0xKTtcblx0fVxuXG5cdC8vIEZhbGxiYWNrIHRvIGRlZmF1bHQgaWYgZW1wdHkgKFN0eWxlIFNldHRpbmdzIHNob3dzIHBsYWNlaG9sZGVyIGJ1dCBkb2Vzbid0IHNldCB2YXJpYWJsZSlcblx0cmV0dXJuIHZhbHVlIHx8IFwiXHUyMDE0XCI7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgbWlzc2luZyBwcm9wZXJ0aWVzIHNob3VsZCBiZSBoaWRkZW5cbiAqIFJldHVybnMgdHJ1ZSBpZiBwcm9wZXJ0aWVzIHRoYXQgZG9uJ3QgZXhpc3Qgb24gYSBmaWxlIHNob3VsZCBub3QgYmUgZGlzcGxheWVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRIaWRlTWlzc2luZ1Byb3BlcnRpZXMoKTogYm9vbGVhbiB7XG5cdHJldHVybiBoYXNCb2R5Q2xhc3MoXCJiYXNlcy1jbXMtaGlkZS1taXNzaW5nLXByb3BlcnRpZXNcIik7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgZW1wdHkgcHJvcGVydGllcyBzaG91bGQgYmUgaGlkZGVuXG4gKiBSZXR1cm5zIHRydWUgaWYgcHJvcGVydGllcyB3aXRoIGVtcHR5IHZhbHVlcyBzaG91bGQgbm90IGJlIGRpc3BsYXllZFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkSGlkZUVtcHR5UHJvcGVydGllcygpOiBib29sZWFuIHtcblx0Ly8gQ2hlY2sgYm90aCB0aGUgYm9keSBjbGFzcyBhbmQgYWxzbyBjaGVjayBpZiB0aGUgQ1NTIHZhcmlhYmxlIGlzIHNldCAoYXMgYSBmYWxsYmFjaylcblx0Y29uc3QgaGFzQ2xhc3MgPSBoYXNCb2R5Q2xhc3MoXCJiYXNlcy1jbXMtaGlkZS1lbXB0eS1wcm9wZXJ0aWVzXCIpO1xuXHRpZiAoaGFzQ2xhc3MpIHJldHVybiB0cnVlO1xuXHRcblx0Ly8gRmFsbGJhY2s6IGNoZWNrIGlmIHRoZSBzZXR0aW5nIGlzIGVuYWJsZWQgdmlhIENTUyB2YXJpYWJsZSBvciBvdGhlciBtZWFuc1xuXHQvLyBUaGlzIGVuc3VyZXMgd2UgY2F0Y2ggdGhlIHNldHRpbmcgZXZlbiBpZiB0aGUgY2xhc3MgaXNuJ3QgYXBwbGllZCB5ZXRcblx0cmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEdldCB0YWcgc3R5bGUgZnJvbSBib2R5IGNsYXNzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUYWdTdHlsZSgpOiBcInBsYWluXCIgfCBcInRoZW1lXCIgfCBcIm1pbmltYWxcIiB7XG5cdGlmIChoYXNCb2R5Q2xhc3MoXCJiYXNlcy1jbXMtdGFnLXN0eWxlLW1pbmltYWxcIikpIHJldHVybiBcIm1pbmltYWxcIjtcblx0aWYgKGhhc0JvZHlDbGFzcyhcImJhc2VzLWNtcy10YWctc3R5bGUtdGhlbWVcIikpIHJldHVybiBcInRoZW1lXCI7XG5cdHJldHVybiBcInBsYWluXCI7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGFnIGhhc2ggKCMpIHByZWZpeCBzaG91bGQgYmUgc2hvd25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3dUYWdIYXNoUHJlZml4KCk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gaGFzQm9keUNsYXNzKFwiYmFzZXMtY21zLXNob3ctdGFnLWhhc2hcIik7XG59XG5cbi8qKlxuICogVHlwZSBmb3IgU3R5bGUgU2V0dGluZ3MgY29sb3IgY2FjaGVcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdHlsZVNldHRpbmdzQ29sb3JDYWNoZSB7XG5cdHRpdGxlQ29sb3I/OiB7IGxpZ2h0Pzogc3RyaW5nOyBkYXJrPzogc3RyaW5nIH07XG5cdHNuaXBwZXRDb2xvcj86IHsgbGlnaHQ/OiBzdHJpbmc7IGRhcms/OiBzdHJpbmcgfTtcblx0dGFnc0NvbG9yPzogeyBsaWdodD86IHN0cmluZzsgZGFyaz86IHN0cmluZyB9O1xuXHR0aW1lc3RhbXBDb2xvcj86IHsgbGlnaHQ/OiBzdHJpbmc7IGRhcms/OiBzdHJpbmcgfTtcblx0bWV0YWRhdGFDb2xvcj86IHsgbGlnaHQ/OiBzdHJpbmc7IGRhcms/OiBzdHJpbmcgfTtcbn1cblxuLyoqXG4gKiBBcHBseSBjdXN0b20gY29sb3JzIGZyb20gU3R5bGUgU2V0dGluZ3MgdG8gYSBjYXJkIGVsZW1lbnRcbiAqIFVzZWQgZm9yIGFtYmllbnQgY2FyZCBiYWNrZ3JvdW5kcyB0byBhcHBseSB0aGVtZWQgdGV4dCBjb2xvcnNcbiAqIEBwYXJhbSBjYXJkRWwgLSBDYXJkIGVsZW1lbnQgdG8gYXBwbHkgY29sb3JzIHRvXG4gKiBAcGFyYW0gdGhlbWUgLSAnbGlnaHQnIG9yICdkYXJrJyB0aGVtZSBiYXNlZCBvbiBhbWJpZW50IGNvbG9yXG4gKiBAcGFyYW0gY2FjaGUgLSBTdHlsZSBTZXR0aW5ncyBjb2xvciBjYWNoZSB3aXRoIGN1c3RvbSBjb2xvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5Q3VzdG9tQ29sb3JzKFxuXHRjYXJkRWw6IEhUTUxFbGVtZW50LFxuXHR0aGVtZTogXCJsaWdodFwiIHwgXCJkYXJrXCIsXG5cdGNhY2hlOiBTdHlsZVNldHRpbmdzQ29sb3JDYWNoZSxcbik6IHZvaWQge1xuXHRpZiAoY2FjaGUudGl0bGVDb2xvcj8uW3RoZW1lXSkge1xuXHRcdGNhcmRFbC5zdHlsZS5zZXRQcm9wZXJ0eShcblx0XHRcdFwiLS1iYXNlcy1jbXMtdGl0bGUtY29sb3JcIixcblx0XHRcdGNhY2hlLnRpdGxlQ29sb3JbdGhlbWVdIHx8IG51bGwsXG5cdFx0KTtcblx0fVxuXHRpZiAoY2FjaGUuc25pcHBldENvbG9yPy5bdGhlbWVdKSB7XG5cdFx0Y2FyZEVsLnN0eWxlLnNldFByb3BlcnR5KFxuXHRcdFx0XCItLWJhc2VzLWNtcy1zbmlwcGV0LWNvbG9yXCIsXG5cdFx0XHRjYWNoZS5zbmlwcGV0Q29sb3JbdGhlbWVdIHx8IG51bGwsXG5cdFx0KTtcblx0fVxuXHRpZiAoY2FjaGUudGFnc0NvbG9yPy5bdGhlbWVdKSB7XG5cdFx0Y2FyZEVsLnN0eWxlLnNldFByb3BlcnR5KFxuXHRcdFx0XCItLWJhc2VzLWNtcy10YWdzLWNvbG9yXCIsXG5cdFx0XHRjYWNoZS50YWdzQ29sb3JbdGhlbWVdIHx8IG51bGwsXG5cdFx0KTtcblx0fVxuXHRpZiAoY2FjaGUudGltZXN0YW1wQ29sb3I/Llt0aGVtZV0pIHtcblx0XHRjYXJkRWwuc3R5bGUuc2V0UHJvcGVydHkoXG5cdFx0XHRcIi0tYmFzZXMtY21zLXRpbWVzdGFtcC1jb2xvclwiLFxuXHRcdFx0Y2FjaGUudGltZXN0YW1wQ29sb3JbdGhlbWVdIHx8IG51bGwsXG5cdFx0KTtcblx0fVxuXHRpZiAoY2FjaGUubWV0YWRhdGFDb2xvcj8uW3RoZW1lXSkge1xuXHRcdGNhcmRFbC5zdHlsZS5zZXRQcm9wZXJ0eShcblx0XHRcdFwiLS1iYXNlcy1jbXMtbWV0YWRhdGEtY29sb3JcIixcblx0XHRcdGNhY2hlLm1ldGFkYXRhQ29sb3JbdGhlbWVdIHx8IG51bGwsXG5cdFx0KTtcblx0fVxufVxuXG4iLCAiaW1wb3J0IHsgQXBwLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuLyoqXG4gKiBDaGVjayBpZiBhIFVSTCBpcyBhbiBleHRlcm5hbCBIVFRQL0hUVFBTIFVSTFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFeHRlcm5hbFVybCh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gL15odHRwcz86XFwvXFwvL2kudGVzdCh1cmwpO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgcGF0aCBoYXMgYSB2YWxpZCBpbWFnZSBmaWxlIGV4dGVuc2lvblxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzVmFsaWRJbWFnZUV4dGVuc2lvbihwYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcblx0cmV0dXJuIC9cXC4oYXZpZnxibXB8Z2lmfGpwZT9nfHBuZ3xzdmd8d2VicCkkL2kudGVzdChwYXRoKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBpZiBhIFVSTCBwb2ludHMgdG8gYSB2YWxpZCwgbG9hZGFibGUgaW1hZ2VcbiAqIE5PVEU6IFRoaXMgaXMgc2xvdyBhbmQgc2hvdWxkIGJlIGF2b2lkZWQgZm9yIHBlcmZvcm1hbmNlLiBPbmx5IHVzZSB3aGVuIGFic29sdXRlbHkgbmVjZXNzYXJ5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVJbWFnZVVybCh1cmw6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcblx0XHRpbWcub25sb2FkID0gKCkgPT4gcmVzb2x2ZSh0cnVlKTtcblx0XHRpbWcub25lcnJvciA9ICgpID0+IHJlc29sdmUoZmFsc2UpO1xuXHRcdHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZShmYWxzZSksIDUwMDApO1xuXHRcdGltZy5zcmMgPSB1cmw7XG5cdH0pO1xufVxuXG4vKipcbiAqIFN0cmlwIHdpa2lsaW5rIHN5bnRheCBmcm9tIGltYWdlIHBhdGhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmlwV2lraWxpbmtTeW50YXgocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcblx0Y29uc3Qgd2lraWxpbmtNYXRjaCA9IHBhdGgubWF0Y2goL14hP1xcW1xcWyhbXlxcXXxdKykoPzpcXHxbXlxcXV0qKT9cXF1cXF0kLyk7XG5cdHJldHVybiB3aWtpbGlua01hdGNoID8gd2lraWxpbmtNYXRjaFsxXS50cmltKCkgOiBwYXRoO1xufVxuXG4vKipcbiAqIFByb2Nlc3MgYW5kIHZhbGlkYXRlIGltYWdlIHBhdGhzIGZyb20gcHJvcGVydHkgdmFsdWVzXG4gKiBIYW5kbGVzIHdpa2lsaW5rIHN0cmlwcGluZywgVVJMIHZhbGlkYXRpb24sIGFuZCBwYXRoIHNlcGFyYXRpb25cbiAqIEJhc2VkIG9uIER5bmFtaWMgVmlld3MnIGFwcHJvYWNoIHdpdGggcGFyYWxsZWwgdmFsaWRhdGlvbiBmb3IgcGVyZm9ybWFuY2VcbiAqIFxuICogQHBhcmFtIGltYWdlUGF0aHMgLSBSYXcgaW1hZ2UgcGF0aHMgZnJvbSBwcm9wZXJ0aWVzIChtYXkgY29udGFpbiB3aWtpbGlua3MpXG4gKiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmluZyB0byBvYmplY3Qgd2l0aCB2YWxpZGF0ZWQgaW50ZXJuYWwgcGF0aHMgYW5kIGV4dGVybmFsIFVSTHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NJbWFnZVBhdGhzKFxuXHRpbWFnZVBhdGhzOiBzdHJpbmdbXVxuKTogUHJvbWlzZTx7IGludGVybmFsUGF0aHM6IHN0cmluZ1tdOyBleHRlcm5hbFVybHM6IHN0cmluZ1tdIH0+IHtcblx0Y29uc3QgaW50ZXJuYWxQYXRoczogc3RyaW5nW10gPSBbXTtcblx0Y29uc3QgZXh0ZXJuYWxVcmxDYW5kaWRhdGVzOiBzdHJpbmdbXSA9IFtdO1xuXG5cdC8vIEZpcnN0IHBhc3M6IHNlcGFyYXRlIGludGVybmFsIHBhdGhzIGFuZCBleHRlcm5hbCBVUkwgY2FuZGlkYXRlc1xuXHRmb3IgKGNvbnN0IGltZ1BhdGggb2YgaW1hZ2VQYXRocykge1xuXHRcdC8vIFN0cmlwIHdpa2lsaW5rIHN5bnRheFxuXHRcdGNvbnN0IGNsZWFuUGF0aCA9IHN0cmlwV2lraWxpbmtTeW50YXgoaW1nUGF0aCk7XG5cblx0XHRpZiAoY2xlYW5QYXRoLmxlbmd0aCA9PT0gMCkgY29udGludWU7XG5cblx0XHRpZiAoaXNFeHRlcm5hbFVybChjbGVhblBhdGgpKSB7XG5cdFx0XHQvLyBFeHRlcm5hbCBVUkwgLSBhY2NlcHQgYWxsIGV4dGVybmFsIFVSTHMgYW5kIHZhbGlkYXRlIGJ5IGFjdHVhbGx5IGxvYWRpbmcgdGhlbVxuXHRcdFx0Ly8gVGhpcyBoYW5kbGVzIE9wZW4gR3JhcGggVVJMcyBhbmQgb3RoZXIgaW1hZ2UgVVJMcyB0aGF0IGRvbid0IGhhdmUgZmlsZSBleHRlbnNpb25zXG5cdFx0XHRleHRlcm5hbFVybENhbmRpZGF0ZXMucHVzaChjbGVhblBhdGgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBJbnRlcm5hbCBwYXRoIC0gdmFsaWRhdGUgZXh0ZW5zaW9uXG5cdFx0XHRpZiAoaGFzVmFsaWRJbWFnZUV4dGVuc2lvbihjbGVhblBhdGgpKSB7XG5cdFx0XHRcdGludGVybmFsUGF0aHMucHVzaChjbGVhblBhdGgpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFNlY29uZCBwYXNzOiB2YWxpZGF0ZSBleHRlcm5hbCBVUkxzIGluIHBhcmFsbGVsIChtdWNoIGZhc3Rlcilcblx0Y29uc3QgdmFsaWRhdGlvblByb21pc2VzID0gZXh0ZXJuYWxVcmxDYW5kaWRhdGVzLm1hcCh1cmwgPT4gXG5cdFx0dmFsaWRhdGVJbWFnZVVybCh1cmwpLnRoZW4oaXNWYWxpZCA9PiBpc1ZhbGlkID8gdXJsIDogbnVsbClcblx0KTtcblx0Y29uc3QgdmFsaWRhdGVkVXJscyA9IGF3YWl0IFByb21pc2UuYWxsKHZhbGlkYXRpb25Qcm9taXNlcyk7XG5cdGNvbnN0IGV4dGVybmFsVXJscyA9IHZhbGlkYXRlZFVybHMuZmlsdGVyKCh1cmwpOiB1cmwgaXMgc3RyaW5nID0+IHVybCAhPT0gbnVsbCk7XG5cblx0cmV0dXJuIHsgaW50ZXJuYWxQYXRocywgZXh0ZXJuYWxVcmxzIH07XG59XG5cbi8qKlxuICogQ29udmVydCBpbnRlcm5hbCBpbWFnZSBwYXRocyB0byByZXNvdXJjZSBVUkxzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlSW50ZXJuYWxJbWFnZVBhdGhzKFxuXHRpbnRlcm5hbFBhdGhzOiBzdHJpbmdbXSxcblx0c291cmNlUGF0aDogc3RyaW5nLFxuXHRhcHA6IEFwcFxuKTogc3RyaW5nW10ge1xuXHRjb25zdCB2YWxpZEltYWdlRXh0ZW5zaW9ucyA9IFsnYXZpZicsICdibXAnLCAnZ2lmJywgJ2pwZWcnLCAnanBnJywgJ3BuZycsICdzdmcnLCAnd2VicCddO1xuXHRjb25zdCByZXNvdXJjZVBhdGhzOiBzdHJpbmdbXSA9IFtdO1xuXG5cdGZvciAoY29uc3QgcHJvcFBhdGggb2YgaW50ZXJuYWxQYXRocykge1xuXHRcdC8vIFRyeSByZXNvbHZpbmcgd2l0aCBtZXRhZGF0YSBjYWNoZSBmaXJzdCAoaGFuZGxlcyByZWxhdGl2ZSBwYXRocywgd2lraWxpbmtzLCBldGMuKVxuXHRcdGxldCBpbWFnZUZpbGU6IFRGaWxlIHwgbnVsbCA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHByb3BQYXRoLCBzb3VyY2VQYXRoKTtcblx0XHRcblx0XHQvLyBJZiBub3QgZm91bmQgYW5kIHBhdGggc3RhcnRzIHdpdGggLi8sIHRyeSByZXNvbHZpbmcgcmVsYXRpdmUgdG8gc291cmNlIGZpbGUncyBkaXJlY3Rvcnlcblx0XHRpZiAoIWltYWdlRmlsZSAmJiBwcm9wUGF0aC5zdGFydHNXaXRoKCcuLycpKSB7XG5cdFx0XHRjb25zdCBzb3VyY2VGaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChzb3VyY2VQYXRoKTtcblx0XHRcdGlmIChzb3VyY2VGaWxlICYmIHNvdXJjZUZpbGUucGFyZW50KSB7XG5cdFx0XHRcdC8vIFJlbW92ZSAuLyBwcmVmaXggYW5kIHJlc29sdmUgcmVsYXRpdmUgdG8gcGFyZW50IGRpcmVjdG9yeVxuXHRcdFx0XHRjb25zdCByZWxhdGl2ZVBhdGggPSBwcm9wUGF0aC5zdWJzdHJpbmcoMik7IC8vIFJlbW92ZSAuL1xuXHRcdFx0XHRjb25zdCBmdWxsUGF0aCA9IHNvdXJjZUZpbGUucGFyZW50LnBhdGggPyBgJHtzb3VyY2VGaWxlLnBhcmVudC5wYXRofS8ke3JlbGF0aXZlUGF0aH1gIDogcmVsYXRpdmVQYXRoO1xuXHRcdFx0XHRjb25zdCByZXNvbHZlZEZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZ1bGxQYXRoKTtcblx0XHRcdFx0aWYgKHJlc29sdmVkRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRcdFx0aW1hZ2VGaWxlID0gcmVzb2x2ZWRGaWxlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdC8vIElmIHN0aWxsIG5vdCBmb3VuZCwgdHJ5IGFzIGFic29sdXRlIHBhdGhcblx0XHRpZiAoIWltYWdlRmlsZSkge1xuXHRcdFx0Y29uc3QgYWJzb2x1dGVGaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwcm9wUGF0aCk7XG5cdFx0XHRpZiAoYWJzb2x1dGVGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdFx0aW1hZ2VGaWxlID0gYWJzb2x1dGVGaWxlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHRpZiAoaW1hZ2VGaWxlICYmIHZhbGlkSW1hZ2VFeHRlbnNpb25zLmluY2x1ZGVzKGltYWdlRmlsZS5leHRlbnNpb24pKSB7XG5cdFx0XHRjb25zdCByZXNvdXJjZVBhdGggPSBhcHAudmF1bHQuZ2V0UmVzb3VyY2VQYXRoKGltYWdlRmlsZSk7XG5cdFx0XHRyZXNvdXJjZVBhdGhzLnB1c2gocmVzb3VyY2VQYXRoKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gcmVzb3VyY2VQYXRocztcbn1cblxuLyoqXG4gKiBFeHRyYWN0IGltYWdlIFVSTHMgZnJvbSBmaWxlIGVtYmVkc1xuICogVmFsaWRhdGVzIGV4dGVybmFsIFVSTHMgaW4gcGFyYWxsZWwgZm9yIGJldHRlciBwZXJmb3JtYW5jZVxuICogQWxzbyBwYXJzZXMgZmlsZSBjb250ZW50IGZvciBleHRlcm5hbCBpbWFnZXMgaW4gbWFya2Rvd24gYW5kIEhUTUxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4dHJhY3RFbWJlZEltYWdlcyhcblx0ZmlsZTogVEZpbGUsXG5cdGFwcDogQXBwXG4pOiBQcm9taXNlPHN0cmluZ1tdPiB7XG5cdGNvbnN0IHZhbGlkSW1hZ2VFeHRlbnNpb25zID0gWydhdmlmJywgJ2JtcCcsICdnaWYnLCAnanBlZycsICdqcGcnLCAncG5nJywgJ3N2ZycsICd3ZWJwJ107XG5cdGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuXG5cdGNvbnN0IGJvZHlSZXNvdXJjZVBhdGhzOiBzdHJpbmdbXSA9IFtdO1xuXHRjb25zdCBib2R5RXh0ZXJuYWxVcmxDYW5kaWRhdGVzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcblxuXHQvLyBGaXJzdCBwYXNzOiBjaGVjayBtZXRhZGF0YSBlbWJlZHMgKGZhc3QsIGZyb20gY2FjaGUpXG5cdGlmIChtZXRhZGF0YT8uZW1iZWRzKSB7XG5cdFx0Zm9yIChjb25zdCBlbWJlZCBvZiBtZXRhZGF0YS5lbWJlZHMpIHtcblx0XHRcdGNvbnN0IGVtYmVkTGluayA9IGVtYmVkLmxpbms7XG5cdFx0XHRpZiAoaXNFeHRlcm5hbFVybChlbWJlZExpbmspKSB7XG5cdFx0XHRcdGlmIChoYXNWYWxpZEltYWdlRXh0ZW5zaW9uKGVtYmVkTGluaykgfHwgIWVtYmVkTGluay5pbmNsdWRlcygnLicpKSB7XG5cdFx0XHRcdFx0Ym9keUV4dGVybmFsVXJsQ2FuZGlkYXRlcy5hZGQoZW1iZWRMaW5rKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc3QgdGFyZ2V0RmlsZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGVtYmVkTGluaywgZmlsZS5wYXRoKTtcblx0XHRcdFx0aWYgKHRhcmdldEZpbGUgJiYgdmFsaWRJbWFnZUV4dGVuc2lvbnMuaW5jbHVkZXModGFyZ2V0RmlsZS5leHRlbnNpb24pKSB7XG5cdFx0XHRcdFx0Y29uc3QgcmVzb3VyY2VQYXRoID0gYXBwLnZhdWx0LmdldFJlc291cmNlUGF0aCh0YXJnZXRGaWxlKTtcblx0XHRcdFx0XHRib2R5UmVzb3VyY2VQYXRocy5wdXNoKHJlc291cmNlUGF0aCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBTZWNvbmQgcGFzczogcGFyc2UgZmlsZSBjb250ZW50IGZvciBleHRlcm5hbCBpbWFnZXMgKG1hcmtkb3duIGFuZCBIVE1MKVxuXHQvLyBUaGlzIGNhdGNoZXMgZXh0ZXJuYWwgaW1hZ2VzIHRoYXQgbWlnaHQgbm90IGJlIGluIG1ldGFkYXRhLmVtYmVkc1xuXHQvLyBOb3RlOiBGb3IgTURYIGZpbGVzLCBtZXRhZGF0YSBjYWNoZSB3b24ndCB3b3JrLCBzbyB3ZSBza2lwIGVtYmVkIGV4dHJhY3Rpb25cblx0aWYgKGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnIHx8IGZpbGUuZXh0ZW5zaW9uID09PSAnbWR4Jykge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgYXBwLnZhdWx0LmNhY2hlZFJlYWQoZmlsZSk7XG5cdFx0XHRcblx0XHRcdC8vIEV4dHJhY3QgbWFya2Rvd24gaW1hZ2Ugc3ludGF4OiAhW2FsdF0odXJsKSBvciAhW2FsdF0odXJsIFwidGl0bGVcIilcblx0XHRcdGNvbnN0IG1hcmtkb3duSW1hZ2VSZWdleCA9IC8hXFxbKFteXFxdXSopXFxdXFwoKGh0dHBzPzpcXC9cXC9bXlxccyldKykvZ2k7XG5cdFx0XHRsZXQgbWF0Y2g7XG5cdFx0XHR3aGlsZSAoKG1hdGNoID0gbWFya2Rvd25JbWFnZVJlZ2V4LmV4ZWMoY29udGVudCkpICE9PSBudWxsKSB7XG5cdFx0XHRcdGNvbnN0IHVybCA9IG1hdGNoWzJdLnRyaW0oKTtcblx0XHRcdFx0Ly8gUmVtb3ZlIHRyYWlsaW5nIHF1b3RlcywgcGFyZW50aGVzZXMsIG9yIHdoaXRlc3BhY2UgdGhhdCBtaWdodCBiZSBwYXJ0IG9mIHRpdGxlXG5cdFx0XHRcdGNvbnN0IGNsZWFuVXJsID0gdXJsLnJlcGxhY2UoL1tcIicpXFxzXSskLywgJycpO1xuXHRcdFx0XHRpZiAoaXNFeHRlcm5hbFVybChjbGVhblVybCkgJiYgKGhhc1ZhbGlkSW1hZ2VFeHRlbnNpb24oY2xlYW5VcmwpIHx8ICFjbGVhblVybC5pbmNsdWRlcygnLicpKSkge1xuXHRcdFx0XHRcdGJvZHlFeHRlcm5hbFVybENhbmRpZGF0ZXMuYWRkKGNsZWFuVXJsKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBFeHRyYWN0IEhUTUwgaW1nIHRhZ3M6IDxpbWcgc3JjPVwidXJsXCI+IG9yIDxpbWcgc3JjPSd1cmwnPiBvciA8aW1nIHNyYz11cmw+XG5cdFx0XHRjb25zdCBodG1sSW1nUmVnZXggPSAvPGltZ1tePl0rc3JjXFxzKj1cXHMqW1wiJ10/KGh0dHBzPzpcXC9cXC9bXlxcc1wiJzw+XSspL2dpO1xuXHRcdFx0d2hpbGUgKChtYXRjaCA9IGh0bWxJbWdSZWdleC5leGVjKGNvbnRlbnQpKSAhPT0gbnVsbCkge1xuXHRcdFx0XHRjb25zdCB1cmwgPSBtYXRjaFsxXS50cmltKCk7XG5cdFx0XHRcdC8vIFJlbW92ZSB0cmFpbGluZyBxdW90ZXMgb3Igd2hpdGVzcGFjZVxuXHRcdFx0XHRjb25zdCBjbGVhblVybCA9IHVybC5yZXBsYWNlKC9bXCInXFxzPl0rJC8sICcnKTtcblx0XHRcdFx0aWYgKGlzRXh0ZXJuYWxVcmwoY2xlYW5VcmwpICYmIChoYXNWYWxpZEltYWdlRXh0ZW5zaW9uKGNsZWFuVXJsKSB8fCAhY2xlYW5VcmwuaW5jbHVkZXMoJy4nKSkpIHtcblx0XHRcdFx0XHRib2R5RXh0ZXJuYWxVcmxDYW5kaWRhdGVzLmFkZChjbGVhblVybCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Ly8gSWYgZmlsZSByZWFkIGZhaWxzLCBqdXN0IGNvbnRpbnVlIHdpdGggd2hhdCB3ZSBmb3VuZCBpbiBtZXRhZGF0YVxuXHRcdFx0Y29uc29sZS53YXJuKGBGYWlsZWQgdG8gcmVhZCBmaWxlIGNvbnRlbnQgZm9yIGltYWdlIGV4dHJhY3Rpb246ICR7ZmlsZS5wYXRofWAsIGVycm9yKTtcblx0XHR9XG5cdH1cblxuXHQvLyBUaGlyZCBwYXNzOiB2YWxpZGF0ZSBleHRlcm5hbCBVUkxzIGluIHBhcmFsbGVsIChtdWNoIGZhc3Rlcilcblx0Y29uc3QgZXh0ZXJuYWxVcmxBcnJheSA9IEFycmF5LmZyb20oYm9keUV4dGVybmFsVXJsQ2FuZGlkYXRlcyk7XG5cdGNvbnN0IHZhbGlkYXRpb25Qcm9taXNlcyA9IGV4dGVybmFsVXJsQXJyYXkubWFwKHVybCA9PiBcblx0XHR2YWxpZGF0ZUltYWdlVXJsKHVybCkudGhlbihpc1ZhbGlkID0+IGlzVmFsaWQgPyB1cmwgOiBudWxsKVxuXHQpO1xuXHRjb25zdCB2YWxpZGF0ZWRVcmxzID0gYXdhaXQgUHJvbWlzZS5hbGwodmFsaWRhdGlvblByb21pc2VzKTtcblx0Y29uc3QgYm9keUV4dGVybmFsVXJscyA9IHZhbGlkYXRlZFVybHMuZmlsdGVyKCh1cmwpOiB1cmwgaXMgc3RyaW5nID0+IHVybCAhPT0gbnVsbCk7XG5cblx0cmV0dXJuIFsuLi5ib2R5UmVzb3VyY2VQYXRocywgLi4uYm9keUV4dGVybmFsVXJsc107XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBVUkwgcG9pbnRzIHRvIGEgR0lGIGltYWdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0dpZlVybCh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHQvLyBDaGVjayBmb3IgLmdpZiBleHRlbnNpb24gKGNhc2UtaW5zZW5zaXRpdmUpXG5cdC8vIE1hdGNoIC5naWYgYXQgdGhlIGVuZCBvZiB0aGUgcGF0aCwgb3B0aW9uYWxseSBmb2xsb3dlZCBieSBxdWVyeSBzdHJpbmcgb3IgZnJhZ21lbnRcblx0cmV0dXJuIC9cXC5naWYoXFw/fCN8JCkvaS50ZXN0KHVybCkgfHwgL1xcLmdpZiQvaS50ZXN0KHVybCk7XG59XG5cbi8qKlxuICogQ29udmVydCBhbiBhbmltYXRlZCBHSUYgdG8gYSBzdGF0aWMgaW1hZ2UgKGZpcnN0IGZyYW1lKVxuICogUmV0dXJucyBhIGRhdGEgVVJMIG9mIHRoZSBmaXJzdCBmcmFtZSwgb3IgdGhlIG9yaWdpbmFsIFVSTCBpZiBjb252ZXJzaW9uIGZhaWxzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb252ZXJ0R2lmVG9TdGF0aWMoXG5cdHVybDogc3RyaW5nLFxuXHRmb3JjZVN0YXRpYzogYm9vbGVhblxuKTogUHJvbWlzZTxzdHJpbmc+IHtcblx0Ly8gSWYgbm90IGZvcmNpbmcgc3RhdGljIG9yIG5vdCBhIEdJRiwgcmV0dXJuIG9yaWdpbmFsIFVSTFxuXHRpZiAoIWZvcmNlU3RhdGljIHx8ICFpc0dpZlVybCh1cmwpKSB7XG5cdFx0cmV0dXJuIHVybDtcblx0fVxuXG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuXHRcdGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xuXHRcdGltZy5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnOyAvLyBIYW5kbGUgQ09SUyBpZiBuZWVkZWRcblx0XHRcblx0XHRpbWcub25sb2FkID0gKCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Ly8gQ3JlYXRlIGNhbnZhcyBhbmQgZHJhdyBmaXJzdCBmcmFtZVxuXHRcdFx0XHRjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcblx0XHRcdFx0Y2FudmFzLndpZHRoID0gaW1nLndpZHRoO1xuXHRcdFx0XHRjYW52YXMuaGVpZ2h0ID0gaW1nLmhlaWdodDtcblx0XHRcdFx0Y29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAoY3R4KSB7XG5cdFx0XHRcdFx0Y3R4LmRyYXdJbWFnZShpbWcsIDAsIDApO1xuXHRcdFx0XHRcdC8vIENvbnZlcnQgdG8gUE5HIGRhdGEgVVJMXG5cdFx0XHRcdFx0Y29uc3QgZGF0YVVybCA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpO1xuXHRcdFx0XHRcdHJlc29sdmUoZGF0YVVybCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gQ2FudmFzIGNvbnRleHQgbm90IGF2YWlsYWJsZSwgcmV0dXJuIG9yaWdpbmFsXG5cdFx0XHRcdFx0cmVzb2x2ZSh1cmwpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBjb252ZXJ0IEdJRiB0byBzdGF0aWMgaW1hZ2U6JywgZXJyb3IpO1xuXHRcdFx0XHQvLyBPbiBlcnJvciwgcmV0dXJuIG9yaWdpbmFsIFVSTFxuXHRcdFx0XHRyZXNvbHZlKHVybCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRcblx0XHRpbWcub25lcnJvciA9ICgpID0+IHtcblx0XHRcdC8vIElmIGltYWdlIGZhaWxzIHRvIGxvYWQsIHJldHVybiBvcmlnaW5hbCBVUkxcblx0XHRcdHJlc29sdmUodXJsKTtcblx0XHR9O1xuXHRcdFxuXHRcdC8vIFNldCB0aW1lb3V0IHRvIHByZXZlbnQgaGFuZ2luZ1xuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0cmVzb2x2ZSh1cmwpO1xuXHRcdH0sIDUwMDApO1xuXHRcdFxuXHRcdGltZy5zcmMgPSB1cmw7XG5cdH0pO1xufVxuXG4iLCAiLyoqXHJcbiAqIFByZXZpZXcgYW5kIHNuaXBwZXQgdXRpbGl0aWVzXHJcbiAqIEV4dHJhY3RzIGFuZCBzYW5pdGl6ZXMgY29udGVudCBmb3IgY2FyZCBwcmV2aWV3c1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5jb25zdCBtYXJrZG93blBhdHRlcm5zID0gW1xyXG5cdC9gKFteYF0rKWAvZyxcclxuXHQvXFwqXFwqXFwqKCg/Oig/IVxcKlxcKlxcKikuKSspXFwqXFwqXFwqL2csXHJcblx0L19fXygoPzooPyFfX18pLikrKV9fXy9nLFxyXG5cdC9cXCpcXCooKD86KD8hXFwqXFwqKS4pKylcXCpcXCovZyxcclxuXHQvX18oKD86KD8hX18pLikrKV9fL2csXHJcblx0L1xcKigoPzooPyFcXCopLikrKVxcKi9nLFxyXG5cdC9fKCg/Oig/IV8pLikrKV8vZyxcclxuXHQvfn4oKD86KD8hfn4pLikrKX5+L2csXHJcblx0Lz09KCg/Oig/IT09KS4pKyk9PS9nLFxyXG5cdC9cXFsoW15cXF1dKylcXF1cXChbXildK1xcKS9nLFxyXG5cdC8hXFxbXFxbW15cXF1dK1xcXVxcXS9nLFxyXG5cdC9cXFtcXFtbXlxcXXxdK1xcfFteXFxdXStcXF1cXF0vZyxcclxuXHQvXFxbXFxbW15cXF1dK1xcXVxcXS9nLFxyXG5cdC8jW2EtekEtWjAtOV9cXC0vXSsvZyxcclxuXHQvXlstKitdXFxzKlxcW1sgeFhdXFxdXFxzKy9nbSxcclxuXHQvXihcXGQrXFwuXFxzKilcXFtbIHhYXVxcXVxccysvZ20sXHJcblx0L14oXFxkK1xcKVxccyopXFxbWyB4WF1cXF1cXHMrL2dtLFxyXG5cdC9eWy0qK11cXHMrL2dtLFxyXG5cdC9eI3sxLDZ9XFxzKy4rJC9nbSxcclxuXHQvXlxccyooPzpbLV8qXSlcXHMqKD86Wy1fKl0pXFxzKig/OlstXypdKVtcXHNcXC1fKl0qJC9nbSxcclxuXHQvXlxccypcXHwuKlxcfC4qJC9nbSxcclxuXHQvXFxeXFxbW15cXF1dKj9dL2csXHJcblx0L1xcW1xcXlteXFxdXStdL2csXHJcblx0L15cXHMqXFxbXFxeW15cXF1dK106LiokL2dtLFxyXG5cdC88KFthLXpdW2EtejAtOV0qKVxcYltePl0qPiguKj8pPFxcL1xcMT4vZ2ksXHJcblx0LzxbXj5dKz4vZ1xyXG5dO1xyXG5cclxuZnVuY3Rpb24gcHJvdGVjdEVzY2FwZWRDaGFycyh0ZXh0OiBzdHJpbmcpOiB7IHRleHQ6IHN0cmluZzsgbWFwOiBNYXA8c3RyaW5nLCBzdHJpbmc+IH0ge1xyXG5cdGNvbnN0IG1hcCA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCk7XHJcblx0bGV0IGNvdW50ZXIgPSAwO1xyXG5cdGNvbnN0IHJlc3VsdCA9IHRleHQucmVwbGFjZSgvXFxcXCguKS9nLCAobWF0Y2g6IHN0cmluZywgY2hhcjogc3RyaW5nKSA9PiB7XHJcblx0XHRjb25zdCBwbGFjZWhvbGRlciA9IGBcdTAwQTdcdTAwQTdFU0NBUEVEJHtjb3VudGVyfVx1MDBBN1x1MDBBN2A7XHJcblx0XHRtYXAuc2V0KHBsYWNlaG9sZGVyLCBjaGFyKTtcclxuXHRcdGNvdW50ZXIrKztcclxuXHRcdHJldHVybiBwbGFjZWhvbGRlcjtcclxuXHR9KTtcclxuXHRyZXR1cm4geyB0ZXh0OiByZXN1bHQsIG1hcCB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXN0b3JlRXNjYXBlZENoYXJzKHRleHQ6IHN0cmluZywgbWFwOiBNYXA8c3RyaW5nLCBzdHJpbmc+KTogc3RyaW5nIHtcclxuXHRsZXQgcmVzdWx0ID0gdGV4dDtcclxuXHRtYXAuZm9yRWFjaCgoY2hhciwgcGxhY2Vob2xkZXIpID0+IHtcclxuXHRcdHJlc3VsdCA9IHJlc3VsdC5zcGxpdChwbGFjZWhvbGRlcikuam9pbihjaGFyKTtcclxuXHR9KTtcclxuXHRyZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVDb2RlQmxvY2tzKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0bGV0IHJlc3VsdCA9IHRleHQ7XHJcblx0bGV0IGNoYW5nZWQgPSB0cnVlO1xyXG5cdHdoaWxlIChjaGFuZ2VkKSB7XHJcblx0XHRjaGFuZ2VkID0gZmFsc2U7XHJcblx0XHRjb25zdCBvcGVuTWF0Y2ggPSByZXN1bHQubWF0Y2goL14oW2B+XXszLH0pL20pO1xyXG5cdFx0aWYgKCFvcGVuTWF0Y2gpIGJyZWFrO1xyXG5cdFx0Y29uc3QgZmVuY2VDaGFyID0gb3Blbk1hdGNoWzFdWzBdO1xyXG5cdFx0Y29uc3QgZmVuY2VMZW5ndGggPSBvcGVuTWF0Y2hbMV0ubGVuZ3RoO1xyXG5cdFx0Y29uc3Qgb3BlbkluZGV4ID0gb3Blbk1hdGNoLmluZGV4ITtcclxuXHRcdGNvbnN0IGVzY2FwZWRDaGFyID0gZmVuY2VDaGFyLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCAnXFxcXCQmJyk7XHJcblx0XHRjb25zdCBjbG9zZVBhdHRlcm4gPSBuZXcgUmVnRXhwKGBeJHtlc2NhcGVkQ2hhcn17JHtmZW5jZUxlbmd0aH19XFxcXHMqJGAsICdtJyk7XHJcblx0XHRjb25zdCBhZnRlck9wZW4gPSByZXN1bHQuc3Vic3RyaW5nKG9wZW5JbmRleCArIG9wZW5NYXRjaFsxXS5sZW5ndGgpO1xyXG5cdFx0Y29uc3QgY2xvc2VNYXRjaCA9IGFmdGVyT3Blbi5tYXRjaChjbG9zZVBhdHRlcm4pO1xyXG5cdFx0aWYgKGNsb3NlTWF0Y2gpIHtcclxuXHRcdFx0Y29uc3QgY2xvc2VJbmRleCA9IG9wZW5JbmRleCArIG9wZW5NYXRjaFsxXS5sZW5ndGggKyBjbG9zZU1hdGNoLmluZGV4ITtcclxuXHRcdFx0Y29uc3QgYmxvY2tFbmQgPSBjbG9zZUluZGV4ICsgY2xvc2VNYXRjaFswXS5sZW5ndGg7XHJcblx0XHRcdHJlc3VsdCA9IHJlc3VsdC5zdWJzdHJpbmcoMCwgb3BlbkluZGV4KSArIHJlc3VsdC5zdWJzdHJpbmcoYmxvY2tFbmQpO1xyXG5cdFx0XHRjaGFuZ2VkID0gdHJ1ZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNvbnN0IGxpbmVFbmQgPSByZXN1bHQuaW5kZXhPZignXFxuJywgb3BlbkluZGV4KTtcclxuXHRcdFx0aWYgKGxpbmVFbmQgPT09IC0xKSB7XHJcblx0XHRcdFx0cmVzdWx0ID0gcmVzdWx0LnN1YnN0cmluZygwLCBvcGVuSW5kZXgpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJlc3VsdCA9IHJlc3VsdC5zdWJzdHJpbmcoMCwgb3BlbkluZGV4KSArIHJlc3VsdC5zdWJzdHJpbmcobGluZUVuZCArIDEpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNoYW5nZWQgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdHJpcE1hcmtkb3duU3ludGF4KHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0aWYgKCF0ZXh0IHx8IHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkgcmV0dXJuICcnO1xyXG5cdHRleHQgPSB0ZXh0LnJlcGxhY2UoL14+XFxzKlxcWyFbXFx3LV0rXFxdWystXT8uKiQvZ20sICcnKTtcclxuXHR0ZXh0ID0gdGV4dC5yZXBsYWNlKC9ePlxccz8vZ20sICcnKTtcclxuXHRjb25zdCB7IHRleHQ6IHByb3RlY3RlZFRleHQsIG1hcDogZXNjYXBlZENoYXJzTWFwIH0gPSBwcm90ZWN0RXNjYXBlZENoYXJzKHRleHQpO1xyXG5cdGxldCByZXN1bHQgPSByZW1vdmVDb2RlQmxvY2tzKHByb3RlY3RlZFRleHQpO1xyXG5cdG1hcmtkb3duUGF0dGVybnMuZm9yRWFjaCgocGF0dGVybikgPT4ge1xyXG5cdFx0cmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UocGF0dGVybiwgKG1hdGNoOiBzdHJpbmcsIC4uLmdyb3Vwczogc3RyaW5nW10pID0+IHtcclxuXHRcdFx0aWYgKG1hdGNoLm1hdGNoKC88W2Etel1bYS16MC05XSpcXGJbXj5dKj4uKj88XFwvL2kpKSB7XHJcblx0XHRcdFx0cmV0dXJuIGdyb3Vwc1sxXSB8fCAnJztcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoZ3JvdXBzLmxlbmd0aCA+IDAgJiYgZ3JvdXBzWzBdICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGdyb3Vwcy5sZW5ndGggLSAyOyBpKyspIHtcclxuXHRcdFx0XHRcdGlmICh0eXBlb2YgZ3JvdXBzW2ldID09PSAnc3RyaW5nJykge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZ3JvdXBzW2ldO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gJyc7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHRyZXN1bHQgPSByZXN0b3JlRXNjYXBlZENoYXJzKHJlc3VsdCwgZXNjYXBlZENoYXJzTWFwKTtcclxuXHRyZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVGb3JQcmV2aWV3KFxyXG5cdGNvbnRlbnQ6IHN0cmluZyxcclxuXHRvbWl0Rmlyc3RMaW5lOiBib29sZWFuID0gZmFsc2UsXHJcblx0ZmlsZW5hbWU/OiBzdHJpbmcsXHJcblx0dGl0bGVWYWx1ZT86IHN0cmluZ1xyXG4pOiBzdHJpbmcge1xyXG5cdGNvbnN0IGNsZWFuZWQgPSBjb250ZW50LnJlcGxhY2UoL14tLS1bXFxzXFxTXSo/LS0tLywgXCJcIikudHJpbSgpO1xyXG5cdGxldCBzdHJpcHBlZCA9IHN0cmlwTWFya2Rvd25TeW50YXgoY2xlYW5lZCk7XHJcblx0Y29uc3QgZmlyc3RMaW5lRW5kID0gc3RyaXBwZWQuaW5kZXhPZignXFxuJyk7XHJcblx0Y29uc3QgZmlyc3RMaW5lID0gKGZpcnN0TGluZUVuZCAhPT0gLTEgPyBzdHJpcHBlZC5zdWJzdHJpbmcoMCwgZmlyc3RMaW5lRW5kKSA6IHN0cmlwcGVkKS50cmltKCk7XHJcblx0aWYgKG9taXRGaXJzdExpbmUgfHxcclxuXHRcdChmaWxlbmFtZSAmJiBmaXJzdExpbmUgPT09IGZpbGVuYW1lKSB8fFxyXG5cdFx0KHRpdGxlVmFsdWUgJiYgZmlyc3RMaW5lID09PSB0aXRsZVZhbHVlKSkge1xyXG5cdFx0c3RyaXBwZWQgPSBmaXJzdExpbmVFbmQgIT09IC0xID8gc3RyaXBwZWQuc3Vic3RyaW5nKGZpcnN0TGluZUVuZCArIDEpLnRyaW0oKSA6ICcnO1xyXG5cdH1cclxuXHRjb25zdCBub3JtYWxpemVkID0gc3RyaXBwZWRcclxuXHRcdC5yZXBsYWNlKC9cXF5bYS16QS1aMC05LV0rL2csICcnKVxyXG5cdFx0LnNwbGl0KC9cXHMrLylcclxuXHRcdC5maWx0ZXIod29yZCA9PiB3b3JkKVxyXG5cdFx0LmpvaW4oJyAnKVxyXG5cdFx0LnRyaW0oKVxyXG5cdFx0LnJlcGxhY2UoL1xcLnsyLH0vZywgbWF0Y2ggPT4gbWF0Y2gucmVwbGFjZSgvXFwuL2csICdcXHUyMDI0JykpO1xyXG5cdGNvbnN0IHdhc1RydW5jYXRlZCA9IG5vcm1hbGl6ZWQubGVuZ3RoID4gNTAwO1xyXG5cdGxldCBwcmV2aWV3ID0gbm9ybWFsaXplZC5zdWJzdHJpbmcoMCwgNTAwKTtcclxuXHRpZiAod2FzVHJ1bmNhdGVkKSB7XHJcblx0XHRwcmV2aWV3ICs9ICdcdTIwMjYnO1xyXG5cdH1cclxuXHRyZXR1cm4gcHJldmlldztcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRGaWxlUHJldmlldyhcclxuXHRmaWxlOiBURmlsZSxcclxuXHRhcHA6IEFwcCxcclxuXHRwcm9wZXJ0eVZhbHVlOiB1bmtub3duLFxyXG5cdHNldHRpbmdzOiB7XHJcblx0XHRmYWxsYmFja1RvQ29udGVudDogYm9vbGVhbjtcclxuXHRcdG9taXRGaXJzdExpbmU6IGJvb2xlYW47XHJcblx0XHR0cnVuY2F0ZVByZXZpZXdQcm9wZXJ0eT86IGJvb2xlYW47XHJcblx0fSxcclxuXHRmaWxlTmFtZT86IHN0cmluZyxcclxuXHR0aXRsZVZhbHVlPzogc3RyaW5nXHJcbik6IFByb21pc2U8c3RyaW5nPiB7XHJcblx0Ly8gSGFuZGxlIGFycmF5cyAoZS5nLiwgYWxpYXNlcywgdGFncykgYnkgam9pbmluZyB0aGVtXHJcblx0bGV0IHJlc3VsdDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcblx0XHJcblx0aWYgKHByb3BlcnR5VmFsdWUgIT0gbnVsbCkge1xyXG5cdFx0aWYgKEFycmF5LmlzQXJyYXkocHJvcGVydHlWYWx1ZSkpIHtcclxuXHRcdFx0Ly8gSm9pbiBhcnJheSBpdGVtcyBpbnRvIGEgc3RyaW5nXHJcblx0XHRcdGNvbnN0IGl0ZW1zID0gcHJvcGVydHlWYWx1ZS5tYXAoKGl0ZW06IHVua25vd24pID0+IHtcclxuXHRcdFx0XHRpZiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcgJiYgJ2RhdGEnIGluIGl0ZW0pIHtcclxuXHRcdFx0XHRcdHJldHVybiBTdHJpbmcoKGl0ZW0gYXMgeyBkYXRhOiB1bmtub3duIH0pLmRhdGEpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gU3RyaW5nKGl0ZW0pO1xyXG5cdFx0XHR9KS5maWx0ZXIoKHM6IHN0cmluZykgPT4gcy50cmltKCkubGVuZ3RoID4gMCk7XHJcblx0XHRcdHJlc3VsdCA9IGl0ZW1zLmxlbmd0aCA+IDAgPyBpdGVtcy5qb2luKCcsICcpIDogbnVsbDtcclxuXHRcdH0gZWxzZSBpZiAodHlwZW9mIHByb3BlcnR5VmFsdWUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBwcm9wZXJ0eVZhbHVlID09PSAnbnVtYmVyJykge1xyXG5cdFx0XHRjb25zdCBzdHIgPSBTdHJpbmcocHJvcGVydHlWYWx1ZSkudHJpbSgpO1xyXG5cdFx0XHRyZXN1bHQgPSBzdHIubGVuZ3RoID4gMCA/IHN0ciA6IG51bGw7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRpZiAocmVzdWx0KSB7XHJcblx0XHQvLyBUcnVuY2F0ZSBpZiBzZXR0aW5nIGlzIGVuYWJsZWRcclxuXHRcdGlmIChzZXR0aW5ncy50cnVuY2F0ZVByZXZpZXdQcm9wZXJ0eSkge1xyXG5cdFx0XHRjb25zdCB3YXNUcnVuY2F0ZWQgPSByZXN1bHQubGVuZ3RoID4gNTAwO1xyXG5cdFx0XHRyZXN1bHQgPSByZXN1bHQuc3Vic3RyaW5nKDAsIDUwMCk7XHJcblx0XHRcdGlmICh3YXNUcnVuY2F0ZWQpIHtcclxuXHRcdFx0XHRyZXN1bHQgKz0gJ1x1MjAyNic7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiByZXN1bHQ7XHJcblx0fVxyXG5cclxuXHRpZiAoc2V0dGluZ3MuZmFsbGJhY2tUb0NvbnRlbnQpIHtcclxuXHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlKTtcclxuXHRcdHJldHVybiBzYW5pdGl6ZUZvclByZXZpZXcoXHJcblx0XHRcdGNvbnRlbnQsXHJcblx0XHRcdHNldHRpbmdzLm9taXRGaXJzdExpbmUsXHJcblx0XHRcdGZpbGVOYW1lLFxyXG5cdFx0XHR0aXRsZVZhbHVlXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuICcnO1xyXG59XHJcblxyXG4iLCAiLyoqXG4gKiBDb250ZW50IGxvYWRpbmcgdXRpbGl0aWVzXG4gKiBIYW5kbGVzIGxvYWRpbmcgaW1hZ2VzIGFuZCBzbmlwcGV0cyBmb3IgZW50cmllc1xuICogT3B0aW1pemVkIGZvciBwZXJmb3JtYW5jZSB3aXRoIHBhcmFsbGVsIGxvYWRpbmcgYW5kIGNhY2hpbmdcbiAqL1xuXG5pbXBvcnQgdHlwZSB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBwcm9jZXNzSW1hZ2VQYXRocywgcmVzb2x2ZUludGVybmFsSW1hZ2VQYXRocywgZXh0cmFjdEVtYmVkSW1hZ2VzIH0gZnJvbSAnLi4vdXRpbHMvaW1hZ2UnO1xuaW1wb3J0IHsgbG9hZEZpbGVQcmV2aWV3IH0gZnJvbSAnLi4vdXRpbHMvcHJldmlldyc7XG5cbi8qKlxuICogTG9hZHMgaW1hZ2VzIGZvciBhbiBlbnRyeVxuICogSGFuZGxlcyBwcm9wZXJ0eSBpbWFnZXMsIGZhbGxiYWNrIHRvIGVtYmVkcywgYW5kIGNhY2hpbmdcbiAqIEJhc2VkIG9uIER5bmFtaWMgVmlld3MnIGZhc3QgcGFyYWxsZWwgbG9hZGluZyBhcHByb2FjaFxuICpcbiAqIEBwYXJhbSBwYXRoIC0gRmlsZSBwYXRoIGZvciB0aGUgZW50cnlcbiAqIEBwYXJhbSBmaWxlIC0gVEZpbGUgb2JqZWN0XG4gKiBAcGFyYW0gYXBwIC0gT2JzaWRpYW4gYXBwIGluc3RhbmNlXG4gKiBAcGFyYW0gaW1hZ2VQcm9wZXJ0eVZhbHVlcyAtIEFycmF5IG9mIGltYWdlIHByb3BlcnR5IHZhbHVlc1xuICogQHBhcmFtIGZhbGxiYWNrVG9FbWJlZHMgLSBXaGV0aGVyIHRvIGV4dHJhY3QgZW1iZWRkZWQgaW1hZ2VzIGlmIG5vIHByb3BlcnR5IGltYWdlcyAoJ2Fsd2F5cycgfCAnaWYtZW1wdHknIHwgJ25ldmVyJyB8IGJvb2xlYW4gZm9yIGxlZ2FjeSlcbiAqIEBwYXJhbSBpbWFnZUNhY2hlIC0gQ2FjaGUgb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBpbWFnZXNcbiAqIEBwYXJhbSBoYXNJbWFnZUNhY2hlIC0gQ2FjaGUgb2JqZWN0IHRvIHRyYWNrIGltYWdlIGF2YWlsYWJpbGl0eVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZEltYWdlRm9yRW50cnkoXG5cdHBhdGg6IHN0cmluZyxcblx0ZmlsZTogVEZpbGUsXG5cdGFwcDogQXBwLFxuXHRpbWFnZVByb3BlcnR5VmFsdWVzOiB1bmtub3duW10sXG5cdGZhbGxiYWNrVG9FbWJlZHM6IGJvb2xlYW4gfCAnYWx3YXlzJyB8ICdpZi1lbXB0eScgfCAnbmV2ZXInLFxuXHRpbWFnZUNhY2hlOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBzdHJpbmdbXT4sXG5cdGhhc0ltYWdlQ2FjaGU6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+XG4pOiBQcm9taXNlPHZvaWQ+IHtcblx0Ly8gQ2hlY2sgaWYgaW1hZ2UgcHJvcGVydHkgaGFzIGFueSB2YWx1ZXMgYXQgYWxsIChldmVuIGlmIHRoZXkgZmFpbCB0byByZXNvbHZlKVxuXHRjb25zdCBoYXNQcm9wZXJ0eVZhbHVlcyA9IGltYWdlUHJvcGVydHlWYWx1ZXMgJiYgQXJyYXkuaXNBcnJheShpbWFnZVByb3BlcnR5VmFsdWVzKSAmJiBpbWFnZVByb3BlcnR5VmFsdWVzLmxlbmd0aCA+IDA7XG5cdFxuXHQvLyBDb252ZXJ0IGZhbGxiYWNrVG9FbWJlZHMgdG8gYm9vbGVhbiBmb3IgbG9naWNcblx0Y29uc3Qgc2hvdWxkRmFsbGJhY2sgPSBmYWxsYmFja1RvRW1iZWRzID09PSB0cnVlIHx8IGZhbGxiYWNrVG9FbWJlZHMgPT09ICdhbHdheXMnIHx8IFxuXHRcdChmYWxsYmFja1RvRW1iZWRzID09PSAnaWYtZW1wdHknICYmICFoYXNQcm9wZXJ0eVZhbHVlcyk7XG5cdFxuXHQvLyBJZiBmYWxsYmFjayBpcyBkaXNhYmxlZCBhbmQgd2UgaGF2ZSBjYWNoZWQgaW1hZ2VzLCBjbGVhciB0aGVtIHRvIGZvcmNlIHJlLWV2YWx1YXRpb25cblx0Ly8gVGhpcyBlbnN1cmVzIGNhY2hlZCBlbWJlZCBpbWFnZXMgYXJlIHJlbW92ZWQgd2hlbiBzZXR0aW5nIGlzIHR1cm5lZCBvZmZcblx0aWYgKCFzaG91bGRGYWxsYmFjayAmJiBwYXRoIGluIGltYWdlQ2FjaGUpIHtcblx0XHRkZWxldGUgaW1hZ2VDYWNoZVtwYXRoXTtcblx0XHRkZWxldGUgaGFzSW1hZ2VDYWNoZVtwYXRoXTtcblx0fVxuXHRcblx0Ly8gSWYgYWxyZWFkeSBpbiBjYWNoZSBhbmQgbm8gcHJvcGVydHkgdmFsdWVzLCBza2lwIChvbmx5IGlmIGZhbGxiYWNrIGlzIGVuYWJsZWQpXG5cdGlmIChwYXRoIGluIGltYWdlQ2FjaGUgJiYgIWhhc1Byb3BlcnR5VmFsdWVzICYmIHNob3VsZEZhbGxiYWNrKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0dHJ5IHtcblx0XHQvLyBQcm9jZXNzIGFuZCB2YWxpZGF0ZSBpbWFnZSBwYXRocyB1c2luZyBzaGFyZWQgdXRpbGl0eVxuXHRcdGNvbnN0IHsgaW50ZXJuYWxQYXRocywgZXh0ZXJuYWxVcmxzIH0gPSBhd2FpdCBwcm9jZXNzSW1hZ2VQYXRocyhpbWFnZVByb3BlcnR5VmFsdWVzIGFzIHN0cmluZ1tdKTtcblxuXHRcdC8vIENvbnZlcnQgaW50ZXJuYWwgcGF0aHMgdG8gcmVzb3VyY2UgVVJMcyB1c2luZyBzaGFyZWQgdXRpbGl0eVxuXHRcdGxldCB2YWxpZEltYWdlczogc3RyaW5nW10gPSBbXG5cdFx0XHQuLi5yZXNvbHZlSW50ZXJuYWxJbWFnZVBhdGhzKGludGVybmFsUGF0aHMsIHBhdGgsIGFwcCksXG5cdFx0XHQuLi5leHRlcm5hbFVybHMgIC8vIEV4dGVybmFsIFVSTHMgYWxyZWFkeSB2YWxpZGF0ZWQgYnkgcHJvY2Vzc0ltYWdlUGF0aHNcblx0XHRdO1xuXG5cdFx0Ly8gT25seSBmYWxsIGJhY2sgdG8gZW1iZWQgaW1hZ2VzIGlmOlxuXHRcdC8vIDEuIE5vIHByb3BlcnR5IHZhbHVlcyB3ZXJlIHNldCBhdCBhbGwgKG5vdCB3aGVuIHRoZXkgZXhpc3QgYnV0IGZhaWwgdG8gcmVzb2x2ZSlcblx0XHQvLyAyLiBObyB2YWxpZCBpbWFnZXMgd2VyZSBmb3VuZCBmcm9tIHByb3BlcnR5XG5cdFx0Ly8gMy4gRmFsbGJhY2sgaXMgZW5hYmxlZFxuXHRcdGlmICh2YWxpZEltYWdlcy5sZW5ndGggPT09IDAgJiYgIWhhc1Byb3BlcnR5VmFsdWVzICYmIHNob3VsZEZhbGxiYWNrKSB7XG5cdFx0XHR2YWxpZEltYWdlcyA9IGF3YWl0IGV4dHJhY3RFbWJlZEltYWdlcyhmaWxlLCBhcHApO1xuXHRcdH1cblxuXHRcdGlmICh2YWxpZEltYWdlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHQvLyBTdG9yZSBhcyBhcnJheSBpZiBtdWx0aXBsZSwgc3RyaW5nIGlmIHNpbmdsZVxuXHRcdFx0Ly8gVGhpcyB3aWxsIG92ZXJ3cml0ZSBhbnkgY2FjaGVkIGVtYmVkIGltYWdlcyBpZiBwcm9wZXJ0eSBpbWFnZXMgYXJlIGZvdW5kXG5cdFx0XHRpbWFnZUNhY2hlW3BhdGhdID0gdmFsaWRJbWFnZXMubGVuZ3RoID4gMSA/IHZhbGlkSW1hZ2VzIDogdmFsaWRJbWFnZXNbMF07XG5cdFx0XHRoYXNJbWFnZUNhY2hlW3BhdGhdID0gdHJ1ZTtcblx0XHR9IGVsc2UgaWYgKGhhc1Byb3BlcnR5VmFsdWVzKSB7XG5cdFx0XHQvLyBJZiBwcm9wZXJ0eSB2YWx1ZXMgZXhpc3QgYnV0IGZhaWxlZCB0byByZXNvbHZlLCBtYXJrIGFzIGF0dGVtcHRlZFxuXHRcdFx0Ly8gVGhpcyBwcmV2ZW50cyBlbWJlZCBpbWFnZXMgZnJvbSBiZWluZyBsb2FkZWQgbGF0ZXJcblx0XHRcdC8vIEFsc28gY2xlYXIgYW55IGNhY2hlZCBlbWJlZCBpbWFnZXNcblx0XHRcdGRlbGV0ZSBpbWFnZUNhY2hlW3BhdGhdO1xuXHRcdFx0aGFzSW1hZ2VDYWNoZVtwYXRoXSA9IHRydWU7XG5cdFx0fSBlbHNlIGlmICghc2hvdWxkRmFsbGJhY2spIHtcblx0XHRcdC8vIElmIGZhbGxiYWNrIGlzIGRpc2FibGVkIGFuZCBubyBwcm9wZXJ0eSBpbWFnZXMsIGNsZWFyIGNhY2hlXG5cdFx0XHRkZWxldGUgaW1hZ2VDYWNoZVtwYXRoXTtcblx0XHRcdGRlbGV0ZSBoYXNJbWFnZUNhY2hlW3BhdGhdO1xuXHRcdH1cblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBpbWFnZSBmb3IgJHtwYXRofTpgLCBlcnJvcik7XG5cdH1cbn1cblxuLyoqXG4gKiBMb2FkcyBpbWFnZXMgZm9yIG11bHRpcGxlIGVudHJpZXMgaW4gcGFyYWxsZWwgYmF0Y2hlc1xuICogVXNlcyBiYXRjaGluZyB0byBhdm9pZCBvdmVyd2hlbG1pbmcgdGhlIGJyb3dzZXIgd2l0aCB0b28gbWFueSBjb25jdXJyZW50IHJlcXVlc3RzXG4gKiBCYXNlZCBvbiBEeW5hbWljIFZpZXdzJyBhcHByb2FjaCBidXQgd2l0aCBiYXRjaGluZyBmb3IgbGFyZ2UgZGF0YXNldHNcbiAqXG4gKiBAcGFyYW0gZW50cmllcyAtIEFycmF5IG9mIGVudHJpZXMgd2l0aCBwYXRoLCBmaWxlLCBhbmQgaW1hZ2VQcm9wZXJ0eVZhbHVlc1xuICogQHBhcmFtIGZhbGxiYWNrVG9FbWJlZHMgLSBXaGV0aGVyIHRvIGV4dHJhY3QgZW1iZWRkZWQgaW1hZ2VzIGlmIG5vIHByb3BlcnR5IGltYWdlc1xuICogQHBhcmFtIGFwcCAtIE9ic2lkaWFuIGFwcCBpbnN0YW5jZVxuICogQHBhcmFtIGltYWdlQ2FjaGUgLSBDYWNoZSBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGltYWdlc1xuICogQHBhcmFtIGhhc0ltYWdlQ2FjaGUgLSBDYWNoZSBvYmplY3QgdG8gdHJhY2sgaW1hZ2UgYXZhaWxhYmlsaXR5XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkSW1hZ2VzRm9yRW50cmllcyhcblx0ZW50cmllczogQXJyYXk8e1xuXHRcdHBhdGg6IHN0cmluZztcblx0XHRmaWxlOiBURmlsZTtcblx0XHRpbWFnZVByb3BlcnR5VmFsdWVzOiB1bmtub3duW107XG5cdH0+LFxuXHRmYWxsYmFja1RvRW1iZWRzOiBib29sZWFuIHwgJ2Fsd2F5cycgfCAnaWYtZW1wdHknIHwgJ25ldmVyJyxcblx0YXBwOiBBcHAsXG5cdGltYWdlQ2FjaGU6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHN0cmluZ1tdPixcblx0aGFzSW1hZ2VDYWNoZTogUmVjb3JkPHN0cmluZywgYm9vbGVhbj5cbik6IFByb21pc2U8dm9pZD4ge1xuXHQvLyBGaWx0ZXIgZW50cmllczogb25seSBza2lwIGlmIGNhY2hlZCBBTkQgbm8gcHJvcGVydHkgdmFsdWVzIGV4aXN0XG5cdC8vIElmIHByb3BlcnR5IHZhbHVlcyBleGlzdCwgd2UgTVVTVCByZS1ldmFsdWF0ZSB0byBlbnN1cmUgcHJvcGVydHkgaW1hZ2VzIHRha2UgcHJpb3JpdHlcblx0Y29uc3QgZW50cmllc1RvUHJvY2VzcyA9IGVudHJpZXMuZmlsdGVyKGVudHJ5ID0+IHtcblx0XHRjb25zdCBoYXNQcm9wZXJ0eVZhbHVlcyA9IGVudHJ5LmltYWdlUHJvcGVydHlWYWx1ZXMgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pbWFnZVByb3BlcnR5VmFsdWVzKSAmJiBlbnRyeS5pbWFnZVByb3BlcnR5VmFsdWVzLmxlbmd0aCA+IDA7XG5cdFx0Ly8gUHJvY2VzcyBpZjogbm90IGNhY2hlZCwgT1IgaGFzIHByb3BlcnR5IHZhbHVlcyAodG8gZW5zdXJlIHByb3BlcnR5IGltYWdlcyBvdmVycmlkZSBjYWNoZWQgZW1iZWRzKVxuXHRcdHJldHVybiAhKGVudHJ5LnBhdGggaW4gaW1hZ2VDYWNoZSkgfHwgaGFzUHJvcGVydHlWYWx1ZXM7XG5cdH0pO1xuXHRcblx0Ly8gQmF0Y2ggc2l6ZTogcHJvY2VzcyA1MCBpbWFnZXMgYXQgYSB0aW1lIHRvIGF2b2lkIG92ZXJ3aGVsbWluZyB0aGUgYnJvd3NlclxuXHQvLyBUaGlzIGJhbGFuY2VzIHBlcmZvcm1hbmNlIChwYXJhbGxlbCBsb2FkaW5nKSB3aXRoIGJyb3dzZXIgbGltaXRzXG5cdGNvbnN0IEJBVENIX1NJWkUgPSA1MDtcblx0XG5cdC8vIFByb2Nlc3MgaW4gYmF0Y2hlc1xuXHRmb3IgKGxldCBpID0gMDsgaSA8IGVudHJpZXNUb1Byb2Nlc3MubGVuZ3RoOyBpICs9IEJBVENIX1NJWkUpIHtcblx0XHRjb25zdCBiYXRjaCA9IGVudHJpZXNUb1Byb2Nlc3Muc2xpY2UoaSwgaSArIEJBVENIX1NJWkUpO1xuXHRcdFxuXHRcdC8vIExvYWQgYmF0Y2ggaW4gcGFyYWxsZWxcblx0XHRhd2FpdCBQcm9taXNlLmFsbChcblx0XHRcdGJhdGNoLm1hcChhc3luYyAoZW50cnkpID0+IHtcblx0XHRcdFx0YXdhaXQgbG9hZEltYWdlRm9yRW50cnkoXG5cdFx0XHRcdFx0ZW50cnkucGF0aCxcblx0XHRcdFx0XHRlbnRyeS5maWxlLFxuXHRcdFx0XHRcdGFwcCxcblx0XHRcdFx0XHRlbnRyeS5pbWFnZVByb3BlcnR5VmFsdWVzLFxuXHRcdFx0XHRcdGZhbGxiYWNrVG9FbWJlZHMsXG5cdFx0XHRcdFx0aW1hZ2VDYWNoZSxcblx0XHRcdFx0XHRoYXNJbWFnZUNhY2hlXG5cdFx0XHRcdCk7XG5cdFx0XHR9KVxuXHRcdCk7XG5cdH1cbn1cblxuLyoqXG4gKiBMb2FkcyBpbWFnZXMgZm9yIG11bHRpcGxlIGVudHJpZXMgc3luY2hyb25vdXNseSAoZmFzdCBwYXRoKVxuICogUmVzb2x2ZXMgaW1hZ2UgZmlsZSByZWZlcmVuY2VzIGltbWVkaWF0ZWx5IGZvciBpbnN0YW50IHJlbmRlcmluZ1xuICogVXNlcyBwYXJhbGxlbCBsb2FkaW5nIGxpa2UgRHluYW1pYyBWaWV3cyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG4gKiBcbiAqIEBkZXByZWNhdGVkIFVzZSBsb2FkSW1hZ2VzRm9yRW50cmllcyBpbnN0ZWFkIC0gaXQncyBmYXN0ZXIgd2l0aCBwYXJhbGxlbCBsb2FkaW5nXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkSW1hZ2VzRm9yRW50cmllc1N5bmMoXG5cdGVudHJpZXM6IEFycmF5PHtcblx0XHRwYXRoOiBzdHJpbmc7XG5cdFx0ZmlsZTogVEZpbGU7XG5cdFx0aW1hZ2VQcm9wZXJ0eVZhbHVlczogdW5rbm93bltdO1xuXHR9Pixcblx0ZmFsbGJhY2tUb0VtYmVkczogYm9vbGVhbiB8ICdhbHdheXMnIHwgJ2lmLWVtcHR5JyB8ICduZXZlcicsXG5cdGFwcDogQXBwLFxuXHRpbWFnZUNhY2hlOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBzdHJpbmdbXT4sXG5cdGhhc0ltYWdlQ2FjaGU6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+XG4pOiBQcm9taXNlPHZvaWQ+IHtcblx0Ly8gVXNlIHRoZSBwYXJhbGxlbCBsb2FkaW5nIGFwcHJvYWNoIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2Vcblx0YXdhaXQgbG9hZEltYWdlc0ZvckVudHJpZXMoZW50cmllcywgZmFsbGJhY2tUb0VtYmVkcywgYXBwLCBpbWFnZUNhY2hlLCBoYXNJbWFnZUNhY2hlKTtcbn1cblxuLyoqXG4gKiBMb2FkcyBlbWJlZCBpbWFnZXMgYXN5bmNocm9ub3VzbHkgKGZhbGxiYWNrIG9ubHkpXG4gKiBDYWxsZWQgaW4gYmFja2dyb3VuZCBhZnRlciBpbml0aWFsIHJlbmRlciBmb3IgZW50cmllcyB3aXRob3V0IHByb3BlcnR5IGltYWdlc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZEVtYmVkSW1hZ2VzRm9yRW50cmllcyhcblx0ZW50cmllczogQXJyYXk8e1xuXHRcdHBhdGg6IHN0cmluZztcblx0XHRmaWxlOiBURmlsZTtcblx0fT4sXG5cdGFwcDogQXBwLFxuXHRpbWFnZUNhY2hlOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBzdHJpbmdbXT4sXG5cdGhhc0ltYWdlQ2FjaGU6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+XG4pOiBQcm9taXNlPHZvaWQ+IHtcblx0YXdhaXQgUHJvbWlzZS5hbGwoXG5cdFx0ZW50cmllcy5tYXAoYXN5bmMgKGVudHJ5KSA9PiB7XG5cdFx0XHQvLyBPbmx5IHByb2Nlc3MgZW50cmllcyB0aGF0IGRvbid0IGhhdmUgaW1hZ2VzIHlldFxuXHRcdFx0aWYgKGVudHJ5LnBhdGggaW4gaW1hZ2VDYWNoZSB8fCBoYXNJbWFnZUNhY2hlW2VudHJ5LnBhdGhdKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgdmFsaWRJbWFnZXMgPSBhd2FpdCBleHRyYWN0RW1iZWRJbWFnZXMoZW50cnkuZmlsZSwgYXBwKTtcblx0XHRcdFx0aWYgKHZhbGlkSW1hZ2VzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRpbWFnZUNhY2hlW2VudHJ5LnBhdGhdID0gdmFsaWRJbWFnZXMubGVuZ3RoID4gMSA/IHZhbGlkSW1hZ2VzIDogdmFsaWRJbWFnZXNbMF07XG5cdFx0XHRcdFx0aGFzSW1hZ2VDYWNoZVtlbnRyeS5wYXRoXSA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBsb2FkIGVtYmVkIGltYWdlcyBmb3IgJHtlbnRyeS5wYXRofTpgLCBlcnJvcik7XG5cdFx0XHR9XG5cdFx0fSlcblx0KTtcbn1cblxuLyoqXG4gKiBMb2FkcyBzbmlwcGV0cyBmb3IgbXVsdGlwbGUgZW50cmllcyBpbiBwYXJhbGxlbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZFNuaXBwZXRzRm9yRW50cmllcyhcblx0ZW50cmllczogQXJyYXk8e1xuXHRcdHBhdGg6IHN0cmluZztcblx0XHRmaWxlOiBURmlsZTtcblx0XHRkZXNjcmlwdGlvbkRhdGE6IHVua25vd247XG5cdFx0ZmlsZU5hbWU/OiBzdHJpbmc7XG5cdFx0dGl0bGVTdHJpbmc/OiBzdHJpbmc7XG5cdH0+LFxuXHRmYWxsYmFja1RvQ29udGVudDogYm9vbGVhbixcblx0b21pdEZpcnN0TGluZTogYm9vbGVhbixcblx0YXBwOiBBcHAsXG5cdHNuaXBwZXRDYWNoZTogUmVjb3JkPHN0cmluZywgc3RyaW5nPixcblx0dHJ1bmNhdGVQcmV2aWV3UHJvcGVydHk/OiBib29sZWFuXG4pOiBQcm9taXNlPHZvaWQ+IHtcblx0YXdhaXQgUHJvbWlzZS5hbGwoXG5cdFx0ZW50cmllcy5tYXAoYXN5bmMgKGVudHJ5KSA9PiB7XG5cdFx0XHQvLyBTa2lwIGlmIGFscmVhZHkgaW4gY2FjaGVcblx0XHRcdGlmIChlbnRyeS5wYXRoIGluIHNuaXBwZXRDYWNoZSkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGlmIChlbnRyeS5maWxlLmV4dGVuc2lvbiA9PT0gJ21kJyB8fCBlbnRyeS5maWxlLmV4dGVuc2lvbiA9PT0gJ21keCcpIHtcblx0XHRcdFx0XHRzbmlwcGV0Q2FjaGVbZW50cnkucGF0aF0gPSBhd2FpdCBsb2FkRmlsZVByZXZpZXcoXG5cdFx0XHRcdFx0XHRlbnRyeS5maWxlLFxuXHRcdFx0XHRcdFx0YXBwLFxuXHRcdFx0XHRcdFx0ZW50cnkuZGVzY3JpcHRpb25EYXRhLFxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRmYWxsYmFja1RvQ29udGVudCxcblx0XHRcdFx0XHRcdFx0b21pdEZpcnN0TGluZSxcblx0XHRcdFx0XHRcdFx0dHJ1bmNhdGVQcmV2aWV3UHJvcGVydHlcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRlbnRyeS5maWxlTmFtZSxcblx0XHRcdFx0XHRcdGVudHJ5LnRpdGxlU3RyaW5nXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzbmlwcGV0Q2FjaGVbZW50cnkucGF0aF0gPSAnJztcblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGxvYWQgc25pcHBldCBmb3IgJHtlbnRyeS5wYXRofTpgLCBlcnJvcik7XG5cdFx0XHRcdHNuaXBwZXRDYWNoZVtlbnRyeS5wYXRoXSA9ICcnO1xuXHRcdFx0fVxuXHRcdH0pXG5cdCk7XG59XG5cbiIsICIvKipcclxuICogU2hhcmVkIENhcmQgUmVuZGVyZXIgZm9yIENNUyBWaWV3c1xyXG4gKiBCYXNlZCBvbiBEeW5hbWljIFZpZXdzIGJ1dCB3aXRoIENNUy1zcGVjaWZpYyBmZWF0dXJlc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgQmFzZXNFbnRyeSwgVEZpbGUsIE1lbnUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IHNldENzc1Byb3BzIH0gZnJvbSAnLi4vdXRpbHMvY3NzLXByb3BzJztcclxuaW1wb3J0IHR5cGUgQmFzZXNDTVNQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB0eXBlIHsgQ2FyZERhdGEgfSBmcm9tICcuLi9zaGFyZWQvZGF0YS10cmFuc2Zvcm0nO1xyXG5pbXBvcnQgdHlwZSB7IENNU1NldHRpbmdzIH0gZnJvbSAnLi4vc2hhcmVkL2RhdGEtdHJhbnNmb3JtJztcclxuaW1wb3J0IHsgcmVuZGVyRHJhZnRTdGF0dXNCYWRnZSB9IGZyb20gJy4uL3V0aWxzL2RyYWZ0LXN0YXR1cy1iYWRnZSc7XHJcbmltcG9ydCB7IHNldHVwUXVpY2tFZGl0SWNvbiB9IGZyb20gJy4uL3V0aWxzL3F1aWNrLWVkaXQtaWNvbic7XHJcbmltcG9ydCB7IFByb3BlcnR5UmVuZGVyZXIgfSBmcm9tICcuLi91dGlscy9wcm9wZXJ0eS1yZW5kZXJlcic7XHJcbmltcG9ydCB7IGNvbnZlcnRHaWZUb1N0YXRpYyB9IGZyb20gJy4uL3V0aWxzL2ltYWdlJztcclxuaW1wb3J0IHsgZ2V0VGFnU3R5bGUsIHNob3dUYWdIYXNoUHJlZml4IH0gZnJvbSAnLi4vdXRpbHMvc3R5bGUtc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBnZXRGaWxlRnJvbnRtYXR0ZXIgfSBmcm9tICcuLi91dGlscy9mcm9udG1hdHRlci1oZWxwZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNoYXJlZENhcmRSZW5kZXJlciB7XHJcblx0cHJvdGVjdGVkIGJhc2VzQ29uZmlnPzogeyBnZXQ/OiAoa2V5OiBzdHJpbmcpID0+IHVua25vd24gfTtcclxuXHRwcm90ZWN0ZWQgYmFzZXNDb250cm9sbGVyPzogeyBnZXRQcm9wZXJ0eURpc3BsYXlOYW1lPzogKG5hbWU6IHN0cmluZykgPT4gc3RyaW5nIH07XHJcblx0cHJpdmF0ZSBwcm9wZXJ0eVJlbmRlcmVyOiBQcm9wZXJ0eVJlbmRlcmVyO1xyXG5cdHByb3RlY3RlZCBtZHhGcm9udG1hdHRlckNhY2hlPzogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsPjtcclxuXHRcclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdHByb3RlY3RlZCBhcHA6IEFwcCxcclxuXHRcdHByb3RlY3RlZCBwbHVnaW46IEJhc2VzQ01TUGx1Z2luLFxyXG5cdFx0cHJvdGVjdGVkIHByb3BlcnR5T2JzZXJ2ZXJzOiBSZXNpemVPYnNlcnZlcltdLFxyXG5cdFx0cHJvdGVjdGVkIHVwZGF0ZUxheW91dFJlZjogeyBjdXJyZW50OiAoKCkgPT4gdm9pZCkgfCBudWxsIH0sXHJcblx0XHRiYXNlc0NvbmZpZz86IHsgZ2V0PzogKGtleTogc3RyaW5nKSA9PiB1bmtub3duIH0sXHJcblx0XHRiYXNlc0NvbnRyb2xsZXI/OiB1bmtub3duXHJcblx0KSB7XHJcblx0XHR0aGlzLmJhc2VzQ29uZmlnID0gYmFzZXNDb25maWc7XHJcblx0XHR0aGlzLmJhc2VzQ29udHJvbGxlciA9IGJhc2VzQ29udHJvbGxlciBhcyB7IGdldFByb3BlcnR5RGlzcGxheU5hbWU/OiAobmFtZTogc3RyaW5nKSA9PiBzdHJpbmcgfTtcclxuXHRcdHRoaXMucHJvcGVydHlSZW5kZXJlciA9IG5ldyBQcm9wZXJ0eVJlbmRlcmVyKFxyXG5cdFx0XHR0aGlzLmFwcCxcclxuXHRcdFx0KCkgPT4gdGhpcy5iYXNlc0NvbmZpZywgLy8gUGFzcyBhIGdldHRlciBmdW5jdGlvbiBzbyBpdCBhbHdheXMgZ2V0cyB0aGUgbGF0ZXN0IGNvbmZpZ1xyXG5cdFx0XHQoKSA9PiB0aGlzLmJhc2VzQ29udHJvbGxlciAvLyBQYXNzIGEgZ2V0dGVyIGZ1bmN0aW9uIHNvIGl0IGFsd2F5cyBnZXRzIHRoZSBsYXRlc3QgY29udHJvbGxlclxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldCBNRFggZnJvbnRtYXR0ZXIgY2FjaGUgZm9yIHN5bmNocm9ub3VzIGFjY2VzcyBkdXJpbmcgcmVuZGVyaW5nXHJcblx0ICovXHJcblx0c2V0TWR4RnJvbnRtYXR0ZXJDYWNoZShjYWNoZTogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsPik6IHZvaWQge1xyXG5cdFx0dGhpcy5tZHhGcm9udG1hdHRlckNhY2hlID0gY2FjaGU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZW5kZXJzIGEgY29tcGxldGUgY2FyZCB3aXRoIENNUyBmZWF0dXJlc1xyXG5cdCAqL1xyXG5cdHJlbmRlckNhcmQoXHJcblx0XHRjb250YWluZXI6IEhUTUxFbGVtZW50LFxyXG5cdFx0Y2FyZDogQ2FyZERhdGEsXHJcblx0XHRlbnRyeTogQmFzZXNFbnRyeSxcclxuXHRcdHNldHRpbmdzOiBDTVNTZXR0aW5ncyxcclxuXHRcdGhvdmVyUGFyZW50OiB1bmtub3duLFxyXG5cdFx0aXNTZWxlY3RlZDogYm9vbGVhbixcclxuXHRcdG9uU2VsZWN0OiAocGF0aDogc3RyaW5nLCBzZWxlY3RlZDogYm9vbGVhbikgPT4gdm9pZCxcclxuXHRcdG9uUHJvcGVydHlUb2dnbGU/OiAocGF0aDogc3RyaW5nLCBwcm9wZXJ0eTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bikgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4sXHJcblx0XHR0b29sYmFyQWN0aW9ucz86IHsgaGFuZGxlRGVsZXRlOiAoKSA9PiBQcm9taXNlPHZvaWQ+IH1cclxuXHQpOiB2b2lkIHtcclxuXHRcdC8vIENyZWF0ZSBjYXJkIGVsZW1lbnRcclxuXHRcdGNvbnN0IGNhcmRFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2NhcmQgYmFzZXMtY21zLWNhcmQnKTtcclxuXHRcdFxyXG5cdFx0Ly8gQ1JJVElDQUw6IEZvcmNlIGltbWVkaWF0ZSBsYXlvdXQgcmVmbG93IHRvIHByZXZlbnQgRm9sZGVyIE5vdGVzIHBsdWdpbiBpbnRlcmZlcmVuY2VcclxuXHRcdC8vIElubGluZSBzdHlsZXMgdHJpZ2dlciBsYXlvdXQgY2FsY3VsYXRpb24gYmVmb3JlIEZvbGRlciBOb3RlcycgTXV0YXRpb25PYnNlcnZlciBwcm9jZXNzZXMgdGhlIGVsZW1lbnRcclxuXHRcdHNldENzc1Byb3BzKGNhcmRFbCwge1xyXG5cdFx0XHRkaXNwbGF5OiAnYmxvY2snLFxyXG5cdFx0XHRwb3NpdGlvbjogJ3JlbGF0aXZlJ1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdGlmIChzZXR0aW5ncy5pbWFnZUZvcm1hdCA9PT0gJ2NvdmVyJykge1xyXG5cdFx0XHRjYXJkRWwuY2xhc3NMaXN0LmFkZCgnaW1hZ2UtZm9ybWF0LWNvdmVyJyk7XHJcblx0XHR9IGVsc2UgaWYgKHNldHRpbmdzLmltYWdlRm9ybWF0ID09PSAndGh1bWJuYWlsJykge1xyXG5cdFx0XHRjYXJkRWwuY2xhc3NMaXN0LmFkZCgnaW1hZ2UtZm9ybWF0LXRodW1ibmFpbCcpO1xyXG5cdFx0XHQvLyBBZGQgcG9zaXRpb24gY2xhc3MgZm9yIHRodW1ibmFpbFxyXG5cdFx0XHRjYXJkRWwuY2xhc3NMaXN0LmFkZChgdGh1bWJuYWlsLSR7c2V0dGluZ3MuaW1hZ2VQb3NpdGlvbn1gKTtcclxuXHRcdH1cclxuXHRcdGNhcmRFbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGF0aCcsIGNhcmQucGF0aCk7XHJcblx0XHRjYXJkRWwuc2V0QXR0cmlidXRlKCdkYXRhLWhyZWYnLCBjYXJkLnBhdGgpO1xyXG5cdFx0Y2FyZEVsLmFkZENsYXNzKCdiYXNlcy1jbXMtY3Vyc29yLXBvaW50ZXInKTtcclxuXHJcblx0XHQvLyBTZWxlY3Rpb24gY2hlY2tib3hcclxuXHRcdGNvbnN0IGNoZWNrYm94RWwgPSBjYXJkRWwuY3JlYXRlRGl2KCdiYXNlcy1jbXMtc2VsZWN0LWNoZWNrYm94Jyk7XHJcblx0XHRjb25zdCBjaGVja2JveCA9IGNoZWNrYm94RWwuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnLCBjbHM6ICdzZWxlY3Rpb24tY2hlY2tib3gnIH0pO1xyXG5cdFx0Y2hlY2tib3guY2hlY2tlZCA9IGlzU2VsZWN0ZWQ7XHJcblx0XHRjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xyXG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRvblNlbGVjdChjYXJkLnBhdGgsIGNoZWNrYm94LmNoZWNrZWQpO1xyXG5cdFx0fSk7XHJcblx0XHQvLyBBbHNvIGhhbmRsZSBjbGljayBvbiBjaGVja2JveCB0byBlbnN1cmUgaXQgd29ya3NcclxuXHRcdGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIERyYWZ0IHN0YXR1cyBiYWRnZSBmb3Igbm9uLWNvdmVyIGZvcm1hdHMgKHBvc2l0aW9uZWQgYWJzb2x1dGVseSwgYWxpZ25lZCB3aXRoIGNoZWNrYm94KVxyXG5cdFx0aWYgKHNldHRpbmdzLnNob3dEcmFmdFN0YXR1cyAmJiBzZXR0aW5ncy5pbWFnZUZvcm1hdCAhPT0gJ2NvdmVyJykge1xyXG5cdFx0XHRyZW5kZXJEcmFmdFN0YXR1c0JhZGdlKGNhcmRFbCwgZW50cnksIGNhcmQucGF0aCwgc2V0dGluZ3MsIG9uUHJvcGVydHlUb2dnbGUsIHRoaXMuYXBwLCB0aGlzLm1keEZyb250bWF0dGVyQ2FjaGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEhhbmRsZSBjYXJkIGNsaWNrIHRvIG9wZW4gZmlsZSAoYnV0IG5vdCB3aGVuIGNsaWNraW5nIGNoZWNrYm94IG9yIHByb3BlcnR5IGNoZWNrYm94ZXMpXHJcblx0XHRjYXJkRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0Ly8gQ2hlY2sgaWYgY2xpY2sgaXMgb24gcXVpY2sgZWRpdCBpY29uIG9yIGFueSBvZiBpdHMgY2hpbGRyZW4gKGxpa2UgU1ZHKVxyXG5cdFx0XHRjb25zdCBxdWlja0VkaXRJY29uID0gdGFyZ2V0LmNsb3Nlc3QoJy5iYXNlcy1jbXMtcXVpY2stZWRpdC1pY29uJyk7XHJcblx0XHRcdGlmIChxdWlja0VkaXRJY29uKSB7XHJcblx0XHRcdFx0Ly8gRXhwbGljaXRseSBwcmV2ZW50IGNhcmQgY2xpY2sgd2hlbiBpY29uIGlzIGNsaWNrZWRcclxuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoXHJcblx0XHRcdFx0Y2hlY2tib3hFbC5jb250YWlucyh0YXJnZXQpIHx8XHJcblx0XHRcdFx0dGFyZ2V0LnRhZ05hbWUgPT09ICdJTlBVVCcgfHxcclxuXHRcdFx0XHR0YXJnZXQuY2xvc2VzdCgnaW5wdXQnKSB8fFxyXG5cdFx0XHRcdHRhcmdldC5jbG9zZXN0KCcuYmFzZXMtY21zLXByb3BlcnR5JykgfHxcclxuXHRcdFx0XHR0YXJnZXQuY2xvc2VzdCgnLmNhcmQtc3RhdHVzLWJhZGdlJylcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnN0IG5ld0xlYWYgPSBlLm1ldGFLZXkgfHwgZS5jdHJsS2V5O1xyXG5cdFx0XHR2b2lkIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQoY2FyZC5wYXRoLCAnJywgbmV3TGVhZik7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBIYW5kbGUgcmlnaHQtY2xpY2sgdG8gc2hvdyBjb250ZXh0IG1lbnVcclxuXHRcdC8vIFVzZSBPYnNpZGlhbidzIHN0YW5kYXJkIGZpbGUtbWVudSBldmVudCBzdWJzY3JpcHRpb24gcGF0dGVyblxyXG5cdFx0Y2FyZEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgKGUpID0+IHtcclxuXHRcdFx0Y29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdC8vIERvbid0IHNob3cgY29udGV4dCBtZW51IGZvciBjaGVja2JveGVzLCBwcm9wZXJ0eSBjaGVja2JveGVzLCBzdGF0dXMgYmFkZ2VzLCBvciBxdWljayBlZGl0IGljb25cclxuXHRcdFx0aWYgKFxyXG5cdFx0XHRcdGNoZWNrYm94RWwuY29udGFpbnModGFyZ2V0KSB8fFxyXG5cdFx0XHRcdHRhcmdldC50YWdOYW1lID09PSAnSU5QVVQnIHx8XHJcblx0XHRcdFx0dGFyZ2V0LmNsb3Nlc3QoJ2lucHV0JykgfHxcclxuXHRcdFx0XHR0YXJnZXQuY2xvc2VzdCgnLmJhc2VzLWNtcy1wcm9wZXJ0eScpIHx8XHJcblx0XHRcdFx0dGFyZ2V0LmNsb3Nlc3QoJy5jYXJkLXN0YXR1cy1iYWRnZScpIHx8XHJcblx0XHRcdFx0dGFyZ2V0LmNsb3Nlc3QoJy5iYXNlcy1jbXMtcXVpY2stZWRpdC1pY29uJylcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBHZXQgdGhlIGZpbGVcclxuXHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChjYXJkLnBhdGgpO1xyXG5cdFx0XHRpZiAoZmlsZSAmJiBmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHQvLyBQcmV2ZW50IHRoZSBjYXJkIGNsaWNrIGhhbmRsZXIgZnJvbSBmaXJpbmdcclxuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdC8vIERvbid0IHByZXZlbnQgZGVmYXVsdCAtIE9ic2lkaWFuJ3MgbWVudSBzeXN0ZW0gbmVlZHMgZGVmYXVsdCBiZWhhdmlvclxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIENoZWNrIGN1cnJlbnQgc2VsZWN0aW9uIHN0YXRlIGR5bmFtaWNhbGx5IGJ5IGNoZWNraW5nIHRoZSBjaGVja2JveFxyXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRseVNlbGVjdGVkID0gY2hlY2tib3guY2hlY2tlZDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBBZGQgU2VsZWN0L1Vuc2VsZWN0IGl0ZW1cclxuXHRcdFx0XHRpZiAoY3VycmVudGx5U2VsZWN0ZWQpIHtcclxuXHRcdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRpdGVtLnNldFRpdGxlKCdVbnNlbGVjdCcpO1xyXG5cdFx0XHRcdFx0XHRpdGVtLnNldEljb24oJ3NxdWFyZScpO1xyXG5cdFx0XHRcdFx0XHRpdGVtLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdG9uU2VsZWN0KGNhcmQucGF0aCwgZmFsc2UpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdFx0aXRlbS5zZXRUaXRsZSgnU2VsZWN0Jyk7XHJcblx0XHRcdFx0XHRcdGl0ZW0uc2V0SWNvbignY29weS1jaGVjaycpO1xyXG5cdFx0XHRcdFx0XHRpdGVtLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdG9uU2VsZWN0KGNhcmQucGF0aCwgdHJ1ZSk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdG1lbnUuYWRkU2VwYXJhdG9yKCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gVHJpZ2dlciBmaWxlLW1lbnUgZXZlbnQgLSB0aGlzIGFsbG93cyBvdGhlciBwbHVnaW5zIHRvIGFkZCB0aGVpciBpdGVtc1xyXG5cdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdmaWxlLW1lbnUnLCBtZW51LCBmaWxlLCAnYmFzZXMnKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBBZGQgRGVsZXRlIGF0IHRoZSBib3R0b20gKGFmdGVyIGFsbCBmaWxlLW1lbnUgc3Vic2NyaXB0aW9ucyBoYXZlIHJ1bilcclxuXHRcdFx0XHQvLyBBbHdheXMgc2hvdyBEZWxldGUgb3B0aW9uIC0gdG9vbGJhckFjdGlvbnMgc2hvdWxkIGFsd2F5cyBiZSBwcm92aWRlZFxyXG5cdFx0XHRcdG1lbnUuYWRkU2VwYXJhdG9yKCk7XHJcblx0XHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XHJcblx0XHRcdFx0XHRpdGVtLnNldFRpdGxlKCdEZWxldGUnKTtcclxuXHRcdFx0XHRcdGl0ZW0uc2V0SWNvbigndHJhc2gtMicpO1xyXG5cdFx0XHRcdFx0aXRlbS5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0Ly8gRGVsZXRlIGRpcmVjdGx5IHdpdGhvdXQgc2VsZWN0aW5nXHJcblx0XHRcdFx0XHRcdGlmICh0b29sYmFyQWN0aW9ucykge1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRvb2xiYXJBY3Rpb25zLmhhbmRsZURlbGV0ZSgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRtZW51LnNob3dBdE1vdXNlRXZlbnQoZSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gU3R5bGUgRGVsZXRlIG1lbnUgaXRlbSBhcyBkZXN0cnVjdGl2ZSAocmVkL3dhcm5pbmcgY29sb3IpXHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBtZW51RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudScpO1xyXG5cdFx0XHRcdFx0aWYgKCFtZW51RWwpIHJldHVybjtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Y29uc3QgbWVudUl0ZW1zID0gQXJyYXkuZnJvbShtZW51RWwucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtaXRlbScpKTtcclxuXHRcdFx0XHRcdGNvbnN0IGRlbGV0ZUl0ZW0gPSBtZW51SXRlbXMuZmluZChpdGVtID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgdGl0bGUgPSBpdGVtLnRleHRDb250ZW50Py50cmltKCk7XHJcblx0XHRcdFx0XHRcdHJldHVybiB0aXRsZSA9PT0gJ0RlbGV0ZSc7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKGRlbGV0ZUl0ZW0pIHtcclxuXHRcdFx0XHRcdFx0ZGVsZXRlSXRlbS5hZGRDbGFzcygnaXMtZGFuZ2VyJyk7XHJcblx0XHRcdFx0XHRcdC8vIFN0eWxlIHRoZSBpY29uIGFuZCB0ZXh0IHdpdGggZXJyb3IgY29sb3JcclxuXHRcdFx0XHRcdFx0Y29uc3QgaWNvbiA9IGRlbGV0ZUl0ZW0ucXVlcnlTZWxlY3Rvcignc3ZnJyk7XHJcblx0XHRcdFx0XHRcdGlmIChpY29uKSB7XHJcblx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbiwge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29sb3I6ICd2YXIoLS10ZXh0LWVycm9yKScsXHJcblx0XHRcdFx0XHRcdFx0XHRzdHJva2U6ICd2YXIoLS10ZXh0LWVycm9yKSdcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRjb25zdCB0aXRsZSA9IGRlbGV0ZUl0ZW0ucXVlcnlTZWxlY3RvcignLm1lbnUtaXRlbS10aXRsZScpO1xyXG5cdFx0XHRcdFx0aWYgKHRpdGxlKSB7XHJcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKHRpdGxlIGFzIEhUTUxFbGVtZW50LCB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb2xvcjogJ3ZhcigtLXRleHQtZXJyb3IpJ1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFRpdGxlIC0gYWx3YXlzIHJlbmRlciAoZGVmYXVsdHMgdG8gZmlsZSBuYW1lIGlmIG5vIHRpdGxlIHByb3BlcnR5IGlzIHNldClcclxuXHRcdGNvbnN0IHRpdGxlRWwgPSBjYXJkRWwuY3JlYXRlRGl2KCdjYXJkLXRpdGxlJyk7XHJcblx0XHR0aXRsZUVsLmFwcGVuZFRleHQoY2FyZC50aXRsZSk7XHJcblx0XHRcdFxyXG5cdFx0Ly8gUXVpY2sgZWRpdCBpY29uIC0gYXR0YWNoIHRvIHRpdGxlRWxcclxuXHRcdHNldHVwUXVpY2tFZGl0SWNvbih0aGlzLmFwcCwgdGhpcy5wbHVnaW4sIHRpdGxlRWwsIGNhcmRFbCwgY2FyZC5wYXRoLCBzZXR0aW5ncyk7XHJcblxyXG5cdFx0Ly8gRGF0ZSAoYmVsb3cgdGl0bGUpXHJcblx0XHRpZiAoc2V0dGluZ3Muc2hvd0RhdGUgJiYgc2V0dGluZ3MuZGF0ZVByb3BlcnR5KSB7XHJcblx0XHRcdC8vIFRyeSBzeW5jaHJvbm91cyBCYXNlcyBBUEkgZmlyc3QgKHdvcmtzIGZvciAubWQgZmlsZXMpXHJcblx0XHRcdGxldCBkYXRlVmFsdWUgPSBlbnRyeS5nZXRWYWx1ZShzZXR0aW5ncy5kYXRlUHJvcGVydHkgYXMgYG5vdGUuJHtzdHJpbmd9YCB8IGBmb3JtdWxhLiR7c3RyaW5nfWAgfCBgZmlsZS4ke3N0cmluZ31gKSBhcyB7IGRhdGU/OiBEYXRlOyBkYXRhPzogdW5rbm93bjsgaWNvbj86IHN0cmluZyB9IHwgbnVsbDtcclxuXHRcdFx0XHJcblx0XHRcdC8vIENoZWNrIGlmIHdlIGFjdHVhbGx5IGhhdmUgYSB2YWxpZCBkYXRlIHZhbHVlXHJcblx0XHRcdC8vIEZvciBNRFggZmlsZXMsIEJhc2VzIEFQSSBtaWdodCByZXR1cm4ge2ljb246ICdsdWNpZGUtZmlsZS1xdWVzdGlvbid9IHdoaWNoIGlzIHRydXRoeSBidXQgaGFzIG5vIGRhdGVcclxuXHRcdFx0Y29uc3QgaGFzVmFsaWREYXRlID0gZGF0ZVZhbHVlICYmIChcclxuXHRcdFx0XHQoJ2RhdGUnIGluIGRhdGVWYWx1ZSAmJiBkYXRlVmFsdWUuZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHx8XHJcblx0XHRcdFx0KCdkYXRhJyBpbiBkYXRlVmFsdWUgJiYgZGF0ZVZhbHVlLmRhdGEgIT0gbnVsbClcclxuXHRcdFx0KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIEZvciBNRFggZmlsZXMsIGZhbGxiYWNrIHRvIG1hbnVhbCBmcm9udG1hdHRlciBwYXJzaW5nIGlmIG5vIHZhbGlkIGRhdGVcclxuXHRcdFx0aWYgKCFoYXNWYWxpZERhdGUpIHtcclxuXHRcdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGVudHJ5LmZpbGUucGF0aCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21keCcpIHtcclxuXHRcdFx0XHRcdC8vIExvYWQgZGF0ZSBhc3luY2hyb25vdXNseSBmb3IgTURYIGZpbGVzXHJcblx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGZyb250bWF0dGVyID0gYXdhaXQgZ2V0RmlsZUZyb250bWF0dGVyKHRoaXMuYXBwLCBmaWxlKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlmIChmcm9udG1hdHRlcikge1xyXG5cdFx0XHRcdFx0XHRcdC8vIFN0cmlwIFwibm90ZS5cIiBwcmVmaXggaWYgcHJlc2VudFxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNsZWFuUHJvcCA9IHNldHRpbmdzLmRhdGVQcm9wZXJ0eS5zdGFydHNXaXRoKCdub3RlLicpIFxyXG5cdFx0XHRcdFx0XHRcdFx0PyBzZXR0aW5ncy5kYXRlUHJvcGVydHkuc3Vic3RyaW5nKDUpIFxyXG5cdFx0XHRcdFx0XHRcdFx0OiBzZXR0aW5ncy5kYXRlUHJvcGVydHk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXJWYWx1ZSA9IGZyb250bWF0dGVyW2NsZWFuUHJvcF07XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0aWYgKGZyb250bWF0dGVyVmFsdWUgIT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUGFyc2UgZGF0ZSBmcm9tIGZyb250bWF0dGVyIHZhbHVlXHJcblx0XHRcdFx0XHRcdFx0XHRsZXQgZGF0ZTogRGF0ZSB8IG51bGwgPSBudWxsO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBIYW5kbGUgRGF0ZSBvYmplY3RzIChpbmNsdWRpbmcgdGhvc2UgZnJvbSBZQU1MIHBhcnNpbmcpXHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoZnJvbnRtYXR0ZXJWYWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZGF0ZSA9IGZyb250bWF0dGVyVmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHR9IFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGRhdGUtbGlrZSBvYmplY3RzIChZQU1MIHBhcnNlcnMgc29tZXRpbWVzIHJldHVybiBjdXN0b20gRGF0ZSBvYmplY3RzKVxyXG5cdFx0XHRcdFx0XHRcdFx0ZWxzZSBpZiAoZnJvbnRtYXR0ZXJWYWx1ZSAmJiB0eXBlb2YgZnJvbnRtYXR0ZXJWYWx1ZSA9PT0gJ29iamVjdCcgJiYgJ2dldFRpbWUnIGluIGZyb250bWF0dGVyVmFsdWUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgZGF0ZUxpa2UgPSBmcm9udG1hdHRlclZhbHVlIGFzIHsgZ2V0VGltZTogKCkgPT4gbnVtYmVyIH07XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgdGltZXN0YW1wID0gZGF0ZUxpa2UuZ2V0VGltZSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh0eXBlb2YgdGltZXN0YW1wID09PSAnbnVtYmVyJyAmJiAhaXNOYU4odGltZXN0YW1wKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBGYWxsIHRocm91Z2ggdG8gc3RyaW5nL251bWJlciBoYW5kbGluZ1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBIYW5kbGUgc3RyaW5ncyAtIGVzcGVjaWFsbHkgSVNPIGRhdGUgc3RyaW5ncyBsaWtlIFwiMjAyNS0xMi0yOVwiXHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoIWRhdGUgJiYgdHlwZW9mIGZyb250bWF0dGVyVmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGRhdGVTdHIgPSBmcm9udG1hdHRlclZhbHVlLnRyaW0oKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gVHJ5IHBhcnNpbmcgYXMgSVNPIGRhdGUgKFlZWVktTU0tREQpIC0gdGhpcyBpcyB3aGF0IE9ic2lkaWFuIHVzZXNcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWRkIHRpbWUgY29tcG9uZW50IHRvIGF2b2lkIHRpbWV6b25lIGlzc3VlczogXCIyMDI1LTEyLTI5XCIgLT4gXCIyMDI1LTEyLTI5VDAwOjAwOjAwXCJcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgaXNvRGF0ZVN0ciA9IGRhdGVTdHIuaW5jbHVkZXMoJ1QnKSA/IGRhdGVTdHIgOiBgJHtkYXRlU3RyfVQwMDowMDowMGA7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHBhcnNlZERhdGUgPSBuZXcgRGF0ZShpc29EYXRlU3RyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFpc05hTihwYXJzZWREYXRlLmdldFRpbWUoKSkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRlID0gcGFyc2VkRGF0ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBGYWxsYmFjayB0byBkaXJlY3QgRGF0ZSBjb25zdHJ1Y3RvclxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGZhbGxiYWNrRGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICghaXNOYU4oZmFsbGJhY2tEYXRlLmdldFRpbWUoKSkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGUgPSBmYWxsYmFja0RhdGU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBIYW5kbGUgbnVtYmVycyAodGltZXN0YW1wcylcclxuXHRcdFx0XHRcdFx0XHRcdGlmICghZGF0ZSAmJiB0eXBlb2YgZnJvbnRtYXR0ZXJWYWx1ZSA9PT0gJ251bWJlcicpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGZyb250bWF0dGVyVmFsdWUpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIWlzTmFOKHBhcnNlZERhdGUuZ2V0VGltZSgpKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGUgPSBwYXJzZWREYXRlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIEFsd2F5cyB0cnkgdG8gcmVuZGVyIHRoZSBkYXRlLCBldmVuIGlmIGNhcmRFbCBtaWdodCBub3QgYmUgY29ubmVjdGVkIHlldFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gVGhlIGRhdGUgZWxlbWVudCB3aWxsIGJlIGNyZWF0ZWQvdXBkYXRlZCB3aGVuIHRoZSBjYXJkIGlzIHJlbmRlcmVkXHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoZGF0ZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBVc2UgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHRvIGVuc3VyZSBET00gaXMgcmVhZHlcclxuXHRcdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoY2FyZEVsLmlzQ29ubmVjdGVkKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBGb3JtYXQgZGF0ZSBiYXNlZCBvbiBzZXR0aW5nc1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bGV0IGRhdGVTdHJpbmc6IHN0cmluZztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZXR0aW5ncy5kYXRlSW5jbHVkZVRpbWUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRm9ybWF0IGRhdGUgYW5kIHRpbWUgc2VwYXJhdGVseSwgdGhlbiBjb21iaW5lIChyZXNwZWN0cyB1c2VyJ3Mgc3lzdGVtIGxvY2FsZSlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVXNlIG9wdGlvbnMgdG8gZXhjbHVkZSBzZWNvbmRzIGFuZCBtYXRjaCB1c2VyJ3MgZXhwZWN0ZWQgZm9ybWF0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGRhdGVQYXJ0ID0gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgdGltZVBhcnQgPSBkYXRlLnRvTG9jYWxlVGltZVN0cmluZyh1bmRlZmluZWQsIHsgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aG91cjogJ251bWVyaWMnLCBcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtaW51dGU6ICcyLWRpZ2l0JywgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aG91cjEyOiB0cnVlIFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0ZVN0cmluZyA9IGAke2RhdGVQYXJ0fSwgJHt0aW1lUGFydH1gO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gV2hlbiB0aW1lIGlzIG5vdCBpbmNsdWRlZCwgdXNlIGRhdGUtb25seSBmb3JtYXQgKHJlc3BlY3RzIHVzZXIncyBzeXN0ZW0gbG9jYWxlKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRlU3RyaW5nID0gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRmluZCBvciBjcmVhdGUgZGF0ZSBlbGVtZW50XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRsZXQgZGF0ZUVsID0gY2FyZEVsLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWRhdGUnKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICghZGF0ZUVsKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEZpbmQgdGhlIHRpdGxlIGVsZW1lbnQgdG8gaW5zZXJ0IGRhdGUgYWZ0ZXIgaXRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgdGl0bGVFbCA9IGNhcmRFbC5xdWVyeVNlbGVjdG9yKCcuY2FyZC10aXRsZScpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodGl0bGVFbCAmJiB0aXRsZUVsLnBhcmVudEVsZW1lbnQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRlRWwgPSB0aXRsZUVsLnBhcmVudEVsZW1lbnQuY3JlYXRlRGl2KCdjYXJkLWRhdGUnKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBJbnNlcnQgYWZ0ZXIgdGl0bGVcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aXRsZUVsLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGRhdGVFbCwgdGl0bGVFbC5uZXh0U2libGluZyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0ZUVsID0gY2FyZEVsLmNyZWF0ZURpdignY2FyZC1kYXRlJyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGVFbC5zZXRUZXh0KGRhdGVTdHJpbmcpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGhhc1ZhbGlkRGF0ZSAmJiBkYXRlVmFsdWUpIHtcclxuXHRcdFx0XHRjb25zdCBkYXRlT2JqID0gZGF0ZVZhbHVlIGFzIHsgZGF0ZT86IERhdGU7IGRhdGE/OiB1bmtub3duIH0gfCBudWxsO1xyXG5cdFx0XHRcdGxldCBkYXRlOiBEYXRlIHwgbnVsbCA9IG51bGw7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKGRhdGVPYmogJiYgJ2RhdGUnIGluIGRhdGVPYmogJiYgZGF0ZU9iai5kYXRlIGluc3RhbmNlb2YgRGF0ZSkge1xyXG5cdFx0XHRcdFx0ZGF0ZSA9IGRhdGVPYmouZGF0ZTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKGRhdGVPYmogJiYgJ2RhdGEnIGluIGRhdGVPYmogJiYgZGF0ZU9iai5kYXRhKSB7XHJcblx0XHRcdFx0XHRjb25zdCBkYXRhID0gZGF0ZU9iai5kYXRhO1xyXG5cdFx0XHRcdFx0aWYgKGRhdGEgaW5zdGFuY2VvZiBEYXRlKSB7XHJcblx0XHRcdFx0XHRcdGRhdGUgPSBkYXRhO1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGRhdGEgPT09ICdudW1iZXInKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHBhcnNlZERhdGUgPSBuZXcgRGF0ZShkYXRhKTtcclxuXHRcdFx0XHRcdFx0aWYgKCFpc05hTihwYXJzZWREYXRlLmdldFRpbWUoKSkpIHtcclxuXHRcdFx0XHRcdFx0XHRkYXRlID0gcGFyc2VkRGF0ZTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoZGF0ZSkge1xyXG5cdFx0XHRcdFx0Ly8gRm9ybWF0IGRhdGUgYmFzZWQgb24gc2V0dGluZ3NcclxuXHRcdFx0XHRcdGxldCBkYXRlU3RyaW5nOiBzdHJpbmc7XHJcblx0XHRcdFx0XHRpZiAoc2V0dGluZ3MuZGF0ZUluY2x1ZGVUaW1lKSB7XHJcblx0XHRcdFx0XHRcdC8vIEZvcm1hdCBkYXRlIGFuZCB0aW1lIHNlcGFyYXRlbHksIHRoZW4gY29tYmluZSAocmVzcGVjdHMgdXNlcidzIHN5c3RlbSBsb2NhbGUpXHJcblx0XHRcdFx0XHRcdC8vIFVzZSBvcHRpb25zIHRvIGV4Y2x1ZGUgc2Vjb25kcyBhbmQgbWF0Y2ggdXNlcidzIGV4cGVjdGVkIGZvcm1hdFxyXG5cdFx0XHRcdFx0XHRjb25zdCBkYXRlUGFydCA9IGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHRpbWVQYXJ0ID0gZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcodW5kZWZpbmVkLCB7IFxyXG5cdFx0XHRcdFx0XHRcdGhvdXI6ICdudW1lcmljJywgXHJcblx0XHRcdFx0XHRcdFx0bWludXRlOiAnMi1kaWdpdCcsIFxyXG5cdFx0XHRcdFx0XHRcdGhvdXIxMjogdHJ1ZSBcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdGRhdGVTdHJpbmcgPSBgJHtkYXRlUGFydH0sICR7dGltZVBhcnR9YDtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdC8vIFdoZW4gdGltZSBpcyBub3QgaW5jbHVkZWQsIHVzZSBkYXRlLW9ubHkgZm9ybWF0IChyZXNwZWN0cyB1c2VyJ3Mgc3lzdGVtIGxvY2FsZSlcclxuXHRcdFx0XHRcdFx0ZGF0ZVN0cmluZyA9IGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGNvbnN0IGRhdGVFbCA9IGNhcmRFbC5jcmVhdGVEaXYoJ2NhcmQtZGF0ZScpO1xyXG5cdFx0XHRcdFx0ZGF0ZUVsLmFwcGVuZFRleHQoZGF0ZVN0cmluZyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gVG9wIHByb3BlcnR5IGdyb3VwcyAocmVuZGVyZWQgYmVmb3JlIGNvbnRlbnQpXHJcblx0XHR0aGlzLnByb3BlcnR5UmVuZGVyZXIucmVuZGVyUHJvcGVydGllcyhjYXJkRWwsIGNhcmQsIGVudHJ5LCBzZXR0aW5ncywgb25Qcm9wZXJ0eVRvZ2dsZSwgJ3RvcCcpO1xyXG5cclxuXHRcdC8vIENvbnRlbnQgY29udGFpbmVyIC0gYWx3YXlzIGNyZWF0ZSBpZiBzaG93VGV4dFByZXZpZXcgaXMgZW5hYmxlZCwgb3IgaWYgdGhlcmUgYXJlIG90aGVyIGNvbnRlbnQgZWxlbWVudHNcclxuXHRcdC8vIEZvciB0aHVtYm5haWwgYW5kIGNvdmVyIGZvcm1hdHMsIGFsd2F5cyBjcmVhdGUgY29udGFpbmVyXHJcblx0XHRpZiAoc2V0dGluZ3Muc2hvd1RleHRQcmV2aWV3IHx8XHJcblx0XHRcdChzZXR0aW5ncy5zaG93VGFncyAmJiBjYXJkLmRpc3BsYXlUYWdzICYmIGNhcmQuZGlzcGxheVRhZ3MubGVuZ3RoID4gMCkgfHxcclxuXHRcdFx0KHNldHRpbmdzLmltYWdlRm9ybWF0ID09PSAndGh1bWJuYWlsJykgfHxcclxuXHRcdFx0KHNldHRpbmdzLmltYWdlRm9ybWF0ID09PSAnY292ZXInKSB8fFxyXG5cdFx0XHQoc2V0dGluZ3MuaW1hZ2VGb3JtYXQgIT09ICdub25lJyAmJiAoY2FyZC5pbWFnZVVybCB8fCBjYXJkLmhhc0ltYWdlQXZhaWxhYmxlKSkpIHtcclxuXHRcdFx0Y29uc3QgY29udGVudENvbnRhaW5lciA9IGNhcmRFbC5jcmVhdGVEaXYoJ2NhcmQtY29udGVudCcpO1xyXG5cclxuXHRcdFx0Ly8gRm9yIHRodW1ibmFpbCBmb3JtYXQsIGNyZWF0ZSB0aHVtYm5haWwgRklSU1QgKGJlZm9yZSB0ZXh0LXdyYXBwZXIpIGZvciBwcm9wZXIgcG9zaXRpb25pbmdcclxuXHRcdFx0aWYgKHNldHRpbmdzLmltYWdlRm9ybWF0ID09PSAndGh1bWJuYWlsJyAmJiBjYXJkLmltYWdlVXJsKSB7XHJcblx0XHRcdFx0Y29uc3QgcmF3VXJscyA9IEFycmF5LmlzQXJyYXkoY2FyZC5pbWFnZVVybCkgPyBjYXJkLmltYWdlVXJsIDogW2NhcmQuaW1hZ2VVcmxdO1xyXG5cdFx0XHRcdGNvbnN0IGltYWdlVXJscyA9IHJhd1VybHMuZmlsdGVyKHVybCA9PiB1cmwgJiYgdHlwZW9mIHVybCA9PT0gJ3N0cmluZycgJiYgdXJsLnRyaW0oKS5sZW5ndGggPiAwKTtcclxuXHJcblx0XHRcdFx0aWYgKGltYWdlVXJscy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHRjb25zdCBpbWFnZUVsID0gY29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoJ2NhcmQtdGh1bWJuYWlsJyk7XHJcblx0XHRcdFx0XHRjb25zdCBpbWFnZUVtYmVkQ29udGFpbmVyID0gaW1hZ2VFbC5jcmVhdGVEaXYoJ2ltYWdlLWVtYmVkJyk7XHJcblx0XHRcdFx0XHRjb25zdCBvcmlnaW5hbFVybCA9IGltYWdlVXJsc1swXTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gQ29udmVydCBHSUYgdG8gc3RhdGljIGlmIHNldHRpbmcgaXMgZW5hYmxlZFxyXG5cdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBmaW5hbFVybCA9IGF3YWl0IGNvbnZlcnRHaWZUb1N0YXRpYyhvcmlnaW5hbFVybCwgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9yY2VTdGF0aWNHaWZJbWFnZXMpO1xyXG5cdFx0XHRcdFx0XHRpbWFnZUVtYmVkQ29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoXCIke2ZpbmFsVXJsfVwiKWA7XHJcblx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gU2V0IGluaXRpYWwgYmFja2dyb3VuZCBpbWFnZSAod2lsbCBiZSB1cGRhdGVkIGlmIEdJRiBjb252ZXJzaW9uIGlzIG5lZWRlZClcclxuXHRcdFx0XHRpbWFnZUVtYmVkQ29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoXCIke29yaWdpbmFsVXJsfVwiKWA7XHJcblx0XHRcdFx0c2V0Q3NzUHJvcHMoaW1hZ2VFbWJlZENvbnRhaW5lciwge1xyXG5cdFx0XHRcdFx0YmFja2dyb3VuZFNpemU6ICdjb3ZlcicsXHJcblx0XHRcdFx0XHRiYWNrZ3JvdW5kUG9zaXRpb246ICdjZW50ZXIgY2VudGVyJyxcclxuXHRcdFx0XHRcdGJhY2tncm91bmRSZXBlYXQ6ICduby1yZXBlYXQnXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBGb3IgdGh1bWJuYWlsIGZvcm1hdCwgaGFuZGxlIHBvc2l0aW9uaW5nXHJcblx0XHRcdGlmIChzZXR0aW5ncy5pbWFnZUZvcm1hdCA9PT0gJ3RodW1ibmFpbCcpIHtcclxuXHRcdFx0XHQvLyBDcmVhdGUgdGV4dCB3cmFwcGVyXHJcblx0XHRcdFx0Y29uc3QgdGV4dFdyYXBwZXIgPSBjb250ZW50Q29udGFpbmVyLmNyZWF0ZURpdignY2FyZC10ZXh0LXdyYXBwZXInKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBUZXh0IHByZXZpZXcgLSBhbHdheXMgY3JlYXRlIGlmIHNob3dUZXh0UHJldmlldyBpcyBlbmFibGVkLCBldmVuIGlmIHNuaXBwZXQgaXNuJ3QgbG9hZGVkIHlldFxyXG5cdFx0XHRcdGlmIChzZXR0aW5ncy5zaG93VGV4dFByZXZpZXcpIHtcclxuXHRcdFx0XHRcdGNvbnN0IHRleHRQcmV2aWV3RWwgPSB0ZXh0V3JhcHBlci5jcmVhdGVEaXYoJ2NhcmQtdGV4dC1wcmV2aWV3Jyk7XHJcblx0XHRcdFx0XHRpZiAoY2FyZC5zbmlwcGV0KSB7XHJcblx0XHRcdFx0XHRcdHRleHRQcmV2aWV3RWwuc2V0VGV4dChjYXJkLnNuaXBwZXQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gU3RvcmUgcmVmZXJlbmNlIHRvIHVwZGF0ZSBsYXRlciB3aGVuIHNuaXBwZXQgbG9hZHNcclxuXHRcdFx0XHRcdChjYXJkRWwgYXMgeyBfX3RleHRQcmV2aWV3RWw/OiBIVE1MRWxlbWVudDsgX19jYXJkUGF0aD86IHN0cmluZyB9KS5fX3RleHRQcmV2aWV3RWwgPSB0ZXh0UHJldmlld0VsO1xyXG5cdFx0XHRcdFx0KGNhcmRFbCBhcyB7IF9fdGV4dFByZXZpZXdFbD86IEhUTUxFbGVtZW50OyBfX2NhcmRQYXRoPzogc3RyaW5nIH0pLl9fY2FyZFBhdGggPSBjYXJkLnBhdGg7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBUYWdzIGFzIHBpbGxzICh1bmRlciB0ZXh0IHByZXZpZXcpXHJcblx0XHRcdFx0aWYgKHNldHRpbmdzLnNob3dUYWdzICYmIGNhcmQuZGlzcGxheVRhZ3MgJiYgY2FyZC5kaXNwbGF5VGFncy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHRjb25zdCB0YWdzQ29udGFpbmVyID0gdGV4dFdyYXBwZXIuY3JlYXRlRGl2KCdjYXJkLXRhZ3MnKTtcclxuXHRcdFx0XHRcdGNvbnN0IHRhZ1N0eWxlID0gZ2V0VGFnU3R5bGUoKTtcclxuXHRcdFx0XHRcdGlmICh0YWdTdHlsZSAhPT0gJ3BsYWluJykge1xyXG5cdFx0XHRcdFx0XHR0YWdzQ29udGFpbmVyLmFkZENsYXNzKGB0YWctc3R5bGUtJHt0YWdTdHlsZX1gKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Y29uc3QgbWF4VGFncyA9IHNldHRpbmdzLm1heFRhZ3NUb1Nob3c7XHJcblx0XHRcdFx0XHRjb25zdCB0YWdzVG9TaG93ID0gY2FyZC5kaXNwbGF5VGFncy5zbGljZSgwLCBtYXhUYWdzKTtcclxuXHRcdFx0XHRcdGNvbnN0IHJlbWFpbmluZ0NvdW50ID0gY2FyZC5kaXNwbGF5VGFncy5sZW5ndGggLSBtYXhUYWdzO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR0YWdzVG9TaG93LmZvckVhY2godGFnID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgdGFnRWwgPSB0YWdzQ29udGFpbmVyLmNyZWF0ZVNwYW4oJ2NhcmQtdGFnJyk7XHJcblx0XHRcdFx0XHRcdHRhZ0VsLmFwcGVuZFRleHQoc2hvd1RhZ0hhc2hQcmVmaXgoKSA/IGAjJHt0YWd9YCA6IHRhZyk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKHJlbWFpbmluZ0NvdW50ID4gMCkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBtb3JlRWwgPSB0YWdzQ29udGFpbmVyLmNyZWF0ZVNwYW4oJ2NhcmQtdGFnLW1vcmUnKTtcclxuXHRcdFx0XHRcdFx0bW9yZUVsLmFwcGVuZFRleHQoYCske3JlbWFpbmluZ0NvdW50fSBtb3JlYCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIEZvciBjb3Zlci9uby1pbWFnZSBmb3JtYXQsIHN0YWNrIHZlcnRpY2FsbHlcclxuXHRcdFx0XHQvLyBUZXh0IHByZXZpZXcgLSBhbHdheXMgY3JlYXRlIGlmIHNob3dUZXh0UHJldmlldyBpcyBlbmFibGVkLCBldmVuIGlmIHNuaXBwZXQgaXNuJ3QgbG9hZGVkIHlldFxyXG5cdFx0XHRcdGlmIChzZXR0aW5ncy5zaG93VGV4dFByZXZpZXcpIHtcclxuXHRcdFx0XHRcdGNvbnN0IHRleHRQcmV2aWV3RWwgPSBjb250ZW50Q29udGFpbmVyLmNyZWF0ZURpdignY2FyZC10ZXh0LXByZXZpZXcnKTtcclxuXHRcdFx0XHRcdGlmIChjYXJkLnNuaXBwZXQpIHtcclxuXHRcdFx0XHRcdFx0dGV4dFByZXZpZXdFbC5zZXRUZXh0KGNhcmQuc25pcHBldCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvLyBTdG9yZSByZWZlcmVuY2UgdG8gdXBkYXRlIGxhdGVyIHdoZW4gc25pcHBldCBsb2Fkc1xyXG5cdFx0XHRcdFx0KGNhcmRFbCBhcyB7IF9fdGV4dFByZXZpZXdFbD86IEhUTUxFbGVtZW50OyBfX2NhcmRQYXRoPzogc3RyaW5nIH0pLl9fdGV4dFByZXZpZXdFbCA9IHRleHRQcmV2aWV3RWw7XHJcblx0XHRcdFx0XHQoY2FyZEVsIGFzIHsgX190ZXh0UHJldmlld0VsPzogSFRNTEVsZW1lbnQ7IF9fY2FyZFBhdGg/OiBzdHJpbmcgfSkuX19jYXJkUGF0aCA9IGNhcmQucGF0aDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFRhZ3MgYXMgcGlsbHMgKHVuZGVyIHRleHQgcHJldmlldylcclxuXHRcdFx0XHRpZiAoc2V0dGluZ3Muc2hvd1RhZ3MgJiYgY2FyZC5kaXNwbGF5VGFncyAmJiBjYXJkLmRpc3BsYXlUYWdzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRcdGNvbnN0IHRhZ3NDb250YWluZXIgPSBjb250ZW50Q29udGFpbmVyLmNyZWF0ZURpdignY2FyZC10YWdzJyk7XHJcblx0XHRcdFx0XHRjb25zdCB0YWdTdHlsZSA9IGdldFRhZ1N0eWxlKCk7XHJcblx0XHRcdFx0XHRpZiAodGFnU3R5bGUgIT09ICdwbGFpbicpIHtcclxuXHRcdFx0XHRcdFx0dGFnc0NvbnRhaW5lci5hZGRDbGFzcyhgdGFnLXN0eWxlLSR7dGFnU3R5bGV9YCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGNvbnN0IG1heFRhZ3MgPSBzZXR0aW5ncy5tYXhUYWdzVG9TaG93O1xyXG5cdFx0XHRcdFx0Y29uc3QgdGFnc1RvU2hvdyA9IGNhcmQuZGlzcGxheVRhZ3Muc2xpY2UoMCwgbWF4VGFncyk7XHJcblx0XHRcdFx0XHRjb25zdCByZW1haW5pbmdDb3VudCA9IGNhcmQuZGlzcGxheVRhZ3MubGVuZ3RoIC0gbWF4VGFncztcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0dGFnc1RvU2hvdy5mb3JFYWNoKHRhZyA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHRhZ0VsID0gdGFnc0NvbnRhaW5lci5jcmVhdGVTcGFuKCdjYXJkLXRhZycpO1xyXG5cdFx0XHRcdFx0XHR0YWdFbC5hcHBlbmRUZXh0KHNob3dUYWdIYXNoUHJlZml4KCkgPyBgIyR7dGFnfWAgOiB0YWcpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmIChyZW1haW5pbmdDb3VudCA+IDApIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbW9yZUVsID0gdGFnc0NvbnRhaW5lci5jcmVhdGVTcGFuKCdjYXJkLXRhZy1tb3JlJyk7XHJcblx0XHRcdFx0XHRcdG1vcmVFbC5hcHBlbmRUZXh0KGArJHtyZW1haW5pbmdDb3VudH0gbW9yZWApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQ292ZXIgaW1hZ2VcclxuXHRcdFx0aWYgKHNldHRpbmdzLmltYWdlRm9ybWF0ID09PSAnY292ZXInKSB7XHJcblx0XHRcdFx0aWYgKGNhcmQuaW1hZ2VVcmwpIHtcclxuXHRcdFx0XHRjb25zdCByYXdVcmxzID0gQXJyYXkuaXNBcnJheShjYXJkLmltYWdlVXJsKSA/IGNhcmQuaW1hZ2VVcmwgOiBbY2FyZC5pbWFnZVVybF07XHJcblx0XHRcdFx0Y29uc3QgaW1hZ2VVcmxzID0gcmF3VXJscy5maWx0ZXIodXJsID0+IHVybCAmJiB0eXBlb2YgdXJsID09PSAnc3RyaW5nJyAmJiB1cmwudHJpbSgpLmxlbmd0aCA+IDApO1xyXG5cclxuXHRcdFx0XHRpZiAoaW1hZ2VVcmxzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgaW1hZ2VFbCA9IGNvbnRlbnRDb250YWluZXIuY3JlYXRlRGl2KCdjYXJkLWNvdmVyJyk7XHJcblx0XHRcdFx0XHRjb25zdCBpbWFnZUVtYmVkQ29udGFpbmVyID0gaW1hZ2VFbC5jcmVhdGVEaXYoJ2ltYWdlLWVtYmVkJyk7XHJcblx0XHRcdFx0XHRjb25zdCBvcmlnaW5hbFVybCA9IGltYWdlVXJsc1swXTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gQ29udmVydCBHSUYgdG8gc3RhdGljIGlmIHNldHRpbmcgaXMgZW5hYmxlZFxyXG5cdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBmaW5hbFVybCA9IGF3YWl0IGNvbnZlcnRHaWZUb1N0YXRpYyhvcmlnaW5hbFVybCwgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9yY2VTdGF0aWNHaWZJbWFnZXMpO1xyXG5cdFx0XHRcdFx0XHRpbWFnZUVtYmVkQ29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoXCIke2ZpbmFsVXJsfVwiKWA7XHJcblx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBTZXQgaW5pdGlhbCBiYWNrZ3JvdW5kIGltYWdlICh3aWxsIGJlIHVwZGF0ZWQgaWYgR0lGIGNvbnZlcnNpb24gaXMgbmVlZGVkKVxyXG5cdFx0XHRcdGltYWdlRW1iZWRDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybChcIiR7b3JpZ2luYWxVcmx9XCIpYDtcclxuXHRcdFx0XHRzZXRDc3NQcm9wcyhpbWFnZUVtYmVkQ29udGFpbmVyLCB7XHJcblx0XHRcdFx0XHRiYWNrZ3JvdW5kU2l6ZTogJ2NvdmVyJyxcclxuXHRcdFx0XHRcdGJhY2tncm91bmRQb3NpdGlvbjogJ2NlbnRlciBjZW50ZXInLFxyXG5cdFx0XHRcdFx0YmFja2dyb3VuZFJlcGVhdDogJ25vLXJlcGVhdCdcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBEcmFmdCBzdGF0dXMgYmFkZ2UgKHRvcC1sZWZ0LCBjbGlja2FibGUgdG8gdG9nZ2xlKVxyXG5cdFx0XHRcdFx0XHRpZiAoc2V0dGluZ3Muc2hvd0RyYWZ0U3RhdHVzKSB7XHJcblx0XHRcdFx0XHRcdHJlbmRlckRyYWZ0U3RhdHVzQmFkZ2UoaW1hZ2VFbCwgZW50cnksIGNhcmQucGF0aCwgc2V0dGluZ3MsIG9uUHJvcGVydHlUb2dnbGUsIHRoaXMuYXBwLCB0aGlzLm1keEZyb250bWF0dGVyQ2FjaGUpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBCb3R0b20gcHJvcGVydGllcyAtIE1VU1QgYmUgY2FsbGVkIGJlZm9yZSByZXR1cm5pbmcgKGZvciBpbWFnZXMpXHJcblx0XHRcdFx0XHR0aGlzLnByb3BlcnR5UmVuZGVyZXIucmVuZGVyUHJvcGVydGllcyhjYXJkRWwsIGNhcmQsIGVudHJ5LCBzZXR0aW5ncywgb25Qcm9wZXJ0eVRvZ2dsZSwgJ2JvdHRvbScpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBJbWFnZXMgYXJlIHNldCB2aWEgYmFja2dyb3VuZC1pbWFnZSwgbm8gcmV0dXJuIHZhbHVlIG5lZWRlZFxyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gRm9yIGNvdmVyIGZvcm1hdCwgcmVuZGVyIHBsYWNlaG9sZGVyIGlmIGltYWdlIGlzIGV4cGVjdGVkIGJ1dCBub3QgbG9hZGVkIHlldCwgb3IgYWx3YXlzXHJcblx0XHRcdFx0aWYgKGNhcmQuaGFzSW1hZ2VBdmFpbGFibGUgJiYgIWNhcmQuaW1hZ2VVcmwpIHtcclxuXHRcdFx0XHRcdGNvbnN0IHBsYWNlaG9sZGVyRWwgPSBjb250ZW50Q29udGFpbmVyLmNyZWF0ZURpdignY2FyZC1jb3Zlci1wbGFjZWhvbGRlcicpO1xyXG5cdFx0XHRcdC8vIERyYWZ0IHN0YXR1cyBiYWRnZSBvbiBwbGFjZWhvbGRlciAodG9wLWxlZnQsIGNsaWNrYWJsZSB0byB0b2dnbGUpXHJcblx0XHRcdFx0cmVuZGVyRHJhZnRTdGF0dXNCYWRnZShwbGFjZWhvbGRlckVsLCBlbnRyeSwgY2FyZC5wYXRoLCBzZXR0aW5ncywgb25Qcm9wZXJ0eVRvZ2dsZSwgdGhpcy5hcHAsIHRoaXMubWR4RnJvbnRtYXR0ZXJDYWNoZSk7XHJcblx0XHRcdFx0fSBlbHNlIGlmICghY2FyZC5pbWFnZVVybCkge1xyXG5cdFx0XHRcdFx0Ly8gTm8gaW1hZ2UgYW5kIG5vdCBleHBlY3RlZCAtIGNyZWF0ZSBwbGFjZWhvbGRlciBhbnl3YXkgZm9yIGNvdmVyIGZvcm1hdFxyXG5cdFx0XHRcdFx0Y29uc3QgcGxhY2Vob2xkZXJFbCA9IGNvbnRlbnRDb250YWluZXIuY3JlYXRlRGl2KCdjYXJkLWNvdmVyLXBsYWNlaG9sZGVyJyk7XHJcblx0XHRcdFx0XHRyZW5kZXJEcmFmdFN0YXR1c0JhZGdlKHBsYWNlaG9sZGVyRWwsIGVudHJ5LCBjYXJkLnBhdGgsIHNldHRpbmdzLCBvblByb3BlcnR5VG9nZ2xlLCB0aGlzLmFwcCwgdGhpcy5tZHhGcm9udG1hdHRlckNhY2hlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblxyXG5cdFx0Ly8gQm90dG9tIHByb3BlcnRpZXMgKGZvciBjYXJkcyB3aXRob3V0IGltYWdlcylcclxuXHRcdHRoaXMucHJvcGVydHlSZW5kZXJlci5yZW5kZXJQcm9wZXJ0aWVzKGNhcmRFbCwgY2FyZCwgZW50cnksIHNldHRpbmdzLCBvblByb3BlcnR5VG9nZ2xlLCAnYm90dG9tJyk7XHJcblx0XHRcclxuXHRcdHJldHVybjsgLy8gTm8gaW1hZ2UgZm9yIHRoaXMgY2FyZFxyXG5cdH1cclxufVxyXG5cclxuIiwgImltcG9ydCB7IEFwcCwgQmFzZXNFbnRyeSwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB0eXBlIHsgQ01TU2V0dGluZ3MgfSBmcm9tICcuLi9zaGFyZWQvZGF0YS10cmFuc2Zvcm0nO1xyXG5pbXBvcnQgeyBnZXRGaWxlRnJvbnRtYXR0ZXIgfSBmcm9tICcuL2Zyb250bWF0dGVyLWhlbHBlcic7XHJcblxyXG4vKipcclxuICogQ2FsY3VsYXRlIGRyYWZ0IHN0YXR1cyBmcm9tIGVudHJ5IGFuZCBzZXR0aW5nc1xyXG4gKiBTdXBwb3J0cyBib3RoIC5tZCBmaWxlcyAodmlhIEJhc2VzIEFQSSkgYW5kIC5tZHggZmlsZXMgKHZpYSBtYW51YWwgZnJvbnRtYXR0ZXIgcGFyc2luZylcclxuICogVXNlcyBjYWNoZWQgZnJvbnRtYXR0ZXIgd2hlbiBhdmFpbGFibGUgdG8gYXZvaWQgYXN5bmMgbG9hZGluZ1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhbGN1bGF0ZURyYWZ0U3RhdHVzQXN5bmMoXHJcblx0ZW50cnk6IEJhc2VzRW50cnksXHJcblx0c2V0dGluZ3M6IENNU1NldHRpbmdzLFxyXG5cdGFwcDogQXBwLFxyXG5cdG1keEZyb250bWF0dGVyQ2FjaGU/OiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGw+XHJcbik6IFByb21pc2U8eyBib29sZWFuVmFsdWU6IGJvb2xlYW4gfCBudWxsOyBpc0RyYWZ0OiBib29sZWFuIH0+IHtcclxuXHRsZXQgYm9vbGVhblZhbHVlOiBib29sZWFuIHwgbnVsbCA9IG51bGw7XHJcblx0bGV0IGlzRHJhZnQgPSBmYWxzZTtcclxuXHRcclxuXHQvLyBDaGVjayBpZiB1c2luZyBmaWxlbmFtZSBwcmVmaXggbW9kZSAtIHRoaXMgYWx3YXlzIHByb3ZpZGVzIGEgdmFsdWVcclxuXHRpZiAoc2V0dGluZ3MuZHJhZnRTdGF0dXNVc2VGaWxlbmFtZVByZWZpeCAmJiBlbnRyeS5maWxlICYmIGVudHJ5LmZpbGUubmFtZSkge1xyXG5cdFx0Y29uc3QgZmlsZU5hbWUgPSBlbnRyeS5maWxlLm5hbWU7XHJcblx0XHRjb25zdCBzdGFydHNXaXRoVW5kZXJzY29yZSA9IGZpbGVOYW1lLnN0YXJ0c1dpdGgoJ18nKTtcclxuXHRcdGJvb2xlYW5WYWx1ZSA9IHN0YXJ0c1dpdGhVbmRlcnNjb3JlO1xyXG5cdFx0aXNEcmFmdCA9IHNldHRpbmdzLmRyYWZ0U3RhdHVzUmV2ZXJzZSA/ICFib29sZWFuVmFsdWUgOiBib29sZWFuVmFsdWU7XHJcblx0fSBlbHNlIGlmIChzZXR0aW5ncy5kcmFmdFN0YXR1c1Byb3BlcnR5KSB7XHJcblx0XHQvLyBUcnkgc3luY2hyb25vdXMgQmFzZXMgQVBJIGZpcnN0ICh3b3JrcyBmb3IgLm1kIGZpbGVzKVxyXG5cdFx0Y29uc3QgZHJhZnRWYWx1ZSA9IGVudHJ5LmdldFZhbHVlKHNldHRpbmdzLmRyYWZ0U3RhdHVzUHJvcGVydHkgYXMgYG5vdGUuJHtzdHJpbmd9YCB8IGBmb3JtdWxhLiR7c3RyaW5nfWAgfCBgZmlsZS4ke3N0cmluZ31gKSBhcyB7IGRhdGE/OiB1bmtub3duIH0gfCBudWxsO1xyXG5cdFx0aWYgKGRyYWZ0VmFsdWUgJiYgJ2RhdGEnIGluIGRyYWZ0VmFsdWUgJiYgdHlwZW9mIGRyYWZ0VmFsdWUuZGF0YSA9PT0gJ2Jvb2xlYW4nKSB7XHJcblx0XHRcdGJvb2xlYW5WYWx1ZSA9IGRyYWZ0VmFsdWUuZGF0YTtcclxuXHRcdFx0aXNEcmFmdCA9IHNldHRpbmdzLmRyYWZ0U3RhdHVzUmV2ZXJzZSA/ICFib29sZWFuVmFsdWUgOiBib29sZWFuVmFsdWU7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBGb3IgTURYIGZpbGVzLCB1c2UgY2FjaGVkIGZyb250bWF0dGVyIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGZhbGxiYWNrIHRvIGFzeW5jIGxvYWRpbmdcclxuXHRcdFx0Y29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZW50cnkuZmlsZS5wYXRoKTtcclxuXHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21keCcpIHtcclxuXHRcdFx0XHQvLyBDaGVjayBjYWNoZSBmaXJzdFxyXG5cdFx0XHRcdGxldCBmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsID0gbnVsbDtcclxuXHRcdFx0XHRpZiAobWR4RnJvbnRtYXR0ZXJDYWNoZSkge1xyXG5cdFx0XHRcdFx0ZnJvbnRtYXR0ZXIgPSBtZHhGcm9udG1hdHRlckNhY2hlW2VudHJ5LmZpbGUucGF0aF0gPz8gbnVsbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gSWYgbm90IGluIGNhY2hlLCBsb2FkIGFzeW5jaHJvbm91c2x5XHJcblx0XHRcdFx0aWYgKGZyb250bWF0dGVyID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRcdGZyb250bWF0dGVyID0gYXdhaXQgZ2V0RmlsZUZyb250bWF0dGVyKGFwcCwgZmlsZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChmcm9udG1hdHRlcikge1xyXG5cdFx0XHRcdFx0Ly8gU3RyaXAgXCJub3RlLlwiIHByZWZpeCBpZiBwcmVzZW50XHJcblx0XHRcdFx0XHRjb25zdCBjbGVhblByb3AgPSBzZXR0aW5ncy5kcmFmdFN0YXR1c1Byb3BlcnR5LnN0YXJ0c1dpdGgoJ25vdGUuJykgXHJcblx0XHRcdFx0XHRcdD8gc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eS5zdWJzdHJpbmcoNSkgXHJcblx0XHRcdFx0XHRcdDogc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eTtcclxuXHRcdFx0XHRcdGNvbnN0IGZyb250bWF0dGVyVmFsdWUgPSBmcm9udG1hdHRlcltjbGVhblByb3BdO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBIYW5kbGUgYm9vbGVhbiB2YWx1ZXMgKFlBTUwgcGFyc2VyIHJldHVybnMgYm9vbGVhbnMgZGlyZWN0bHkpXHJcblx0XHRcdFx0XHRpZiAodHlwZW9mIGZyb250bWF0dGVyVmFsdWUgPT09ICdib29sZWFuJykge1xyXG5cdFx0XHRcdFx0XHRib29sZWFuVmFsdWUgPSBmcm9udG1hdHRlclZhbHVlO1xyXG5cdFx0XHRcdFx0XHRpc0RyYWZ0ID0gc2V0dGluZ3MuZHJhZnRTdGF0dXNSZXZlcnNlID8gIWJvb2xlYW5WYWx1ZSA6IGJvb2xlYW5WYWx1ZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0cmV0dXJuIHsgYm9vbGVhblZhbHVlLCBpc0RyYWZ0IH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgZHJhZnQgc3RhdHVzIGZyb20gZW50cnkgYW5kIHNldHRpbmdzIChzeW5jaHJvbm91cyB2ZXJzaW9uIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSlcclxuICogTm90ZTogVGhpcyBvbmx5IHdvcmtzIGZvciAubWQgZmlsZXMuIEZvciBNRFggZmlsZXMsIHVzZSBjYWxjdWxhdGVEcmFmdFN0YXR1c0FzeW5jIGluc3RlYWQuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlRHJhZnRTdGF0dXMoXHJcblx0ZW50cnk6IEJhc2VzRW50cnksXHJcblx0c2V0dGluZ3M6IENNU1NldHRpbmdzXHJcbik6IHsgYm9vbGVhblZhbHVlOiBib29sZWFuIHwgbnVsbDsgaXNEcmFmdDogYm9vbGVhbiB9IHtcclxuXHRsZXQgYm9vbGVhblZhbHVlOiBib29sZWFuIHwgbnVsbCA9IG51bGw7XHJcblx0bGV0IGlzRHJhZnQgPSBmYWxzZTtcclxuXHRcclxuXHQvLyBDaGVjayBpZiB1c2luZyBmaWxlbmFtZSBwcmVmaXggbW9kZSAtIHRoaXMgYWx3YXlzIHByb3ZpZGVzIGEgdmFsdWVcclxuXHRpZiAoc2V0dGluZ3MuZHJhZnRTdGF0dXNVc2VGaWxlbmFtZVByZWZpeCAmJiBlbnRyeS5maWxlICYmIGVudHJ5LmZpbGUubmFtZSkge1xyXG5cdFx0Y29uc3QgZmlsZU5hbWUgPSBlbnRyeS5maWxlLm5hbWU7XHJcblx0XHRjb25zdCBzdGFydHNXaXRoVW5kZXJzY29yZSA9IGZpbGVOYW1lLnN0YXJ0c1dpdGgoJ18nKTtcclxuXHRcdGJvb2xlYW5WYWx1ZSA9IHN0YXJ0c1dpdGhVbmRlcnNjb3JlO1xyXG5cdFx0aXNEcmFmdCA9IHNldHRpbmdzLmRyYWZ0U3RhdHVzUmV2ZXJzZSA/ICFib29sZWFuVmFsdWUgOiBib29sZWFuVmFsdWU7XHJcblx0fSBlbHNlIGlmIChzZXR0aW5ncy5kcmFmdFN0YXR1c1Byb3BlcnR5KSB7XHJcblx0XHQvLyBVc2UgcHJvcGVydHktYmFzZWQgZGV0ZWN0aW9uIChzeW5jaHJvbm91cyBCYXNlcyBBUEkgLSB3b3JrcyBmb3IgLm1kIGZpbGVzIG9ubHkpXHJcblx0XHRjb25zdCBkcmFmdFZhbHVlID0gZW50cnkuZ2V0VmFsdWUoc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eSBhcyBgbm90ZS4ke3N0cmluZ31gIHwgYGZvcm11bGEuJHtzdHJpbmd9YCB8IGBmaWxlLiR7c3RyaW5nfWApIGFzIHsgZGF0YT86IHVua25vd24gfSB8IG51bGw7XHJcblx0XHRpZiAoZHJhZnRWYWx1ZSAmJiAnZGF0YScgaW4gZHJhZnRWYWx1ZSAmJiB0eXBlb2YgZHJhZnRWYWx1ZS5kYXRhID09PSAnYm9vbGVhbicpIHtcclxuXHRcdFx0Ym9vbGVhblZhbHVlID0gZHJhZnRWYWx1ZS5kYXRhO1xyXG5cdFx0XHRpc0RyYWZ0ID0gc2V0dGluZ3MuZHJhZnRTdGF0dXNSZXZlcnNlID8gIWJvb2xlYW5WYWx1ZSA6IGJvb2xlYW5WYWx1ZTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0cmV0dXJuIHsgYm9vbGVhblZhbHVlLCBpc0RyYWZ0IH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZW5kZXIgZHJhZnQgc3RhdHVzIGJhZGdlIG9uIGEgY29udGFpbmVyIGVsZW1lbnRcclxuICogU3VwcG9ydHMgYm90aCAubWQgZmlsZXMgKHN5bmNocm9ub3VzKSBhbmQgLm1keCBmaWxlcyAodXNlcyBjYWNoZSB3aGVuIGF2YWlsYWJsZSlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJEcmFmdFN0YXR1c0JhZGdlKFxyXG5cdGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXHJcblx0ZW50cnk6IEJhc2VzRW50cnksXHJcblx0Y2FyZFBhdGg6IHN0cmluZyxcclxuXHRzZXR0aW5nczogQ01TU2V0dGluZ3MsXHJcblx0b25Qcm9wZXJ0eVRvZ2dsZT86IChwYXRoOiBzdHJpbmcsIHByb3BlcnR5OiBzdHJpbmcsIHZhbHVlOiB1bmtub3duKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPixcclxuXHRhcHA/OiBBcHAsXHJcblx0bWR4RnJvbnRtYXR0ZXJDYWNoZT86IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbD5cclxuKTogdm9pZCB7XHJcblx0aWYgKCFzZXR0aW5ncy5zaG93RHJhZnRTdGF0dXMpIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblx0XHJcblx0Ly8gVHJ5IHN5bmNocm9ub3VzIGZpcnN0ICh3b3JrcyBmb3IgLm1kIGZpbGVzKVxyXG5cdGNvbnN0IHsgYm9vbGVhblZhbHVlOiBzeW5jVmFsdWUsIGlzRHJhZnQ6IHN5bmNJc0RyYWZ0IH0gPSBjYWxjdWxhdGVEcmFmdFN0YXR1cyhlbnRyeSwgc2V0dGluZ3MpO1xyXG5cdFxyXG5cdGlmIChzeW5jVmFsdWUgIT09IG51bGwpIHtcclxuXHRcdC8vIFN5bmNocm9ub3VzIHJlc3VsdCBhdmFpbGFibGUgKGZyb20gQmFzZXMgQVBJIG9yIGZpbGVuYW1lIHByZWZpeClcclxuXHRcdHJlbmRlckJhZGdlKGNvbnRhaW5lciwgc3luY1ZhbHVlLCBzeW5jSXNEcmFmdCwgb25Qcm9wZXJ0eVRvZ2dsZSwgY2FyZFBhdGgpO1xyXG5cdH0gZWxzZSBpZiAoYXBwKSB7XHJcblx0XHQvLyBGb3IgTURYIGZpbGVzLCBjaGVjayBjYWNoZSBmaXJzdCB0byByZW5kZXIgc3luY2hyb25vdXNseVxyXG5cdFx0Y29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZW50cnkuZmlsZS5wYXRoKTtcclxuXHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZHgnICYmIG1keEZyb250bWF0dGVyQ2FjaGUpIHtcclxuXHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBtZHhGcm9udG1hdHRlckNhY2hlW2VudHJ5LmZpbGUucGF0aF07XHJcblx0XHRcdGlmIChmcm9udG1hdHRlciAmJiBzZXR0aW5ncy5kcmFmdFN0YXR1c1Byb3BlcnR5KSB7XHJcblx0XHRcdFx0Ly8gU3RyaXAgXCJub3RlLlwiIHByZWZpeCBpZiBwcmVzZW50XHJcblx0XHRcdFx0Y29uc3QgY2xlYW5Qcm9wID0gc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eS5zdGFydHNXaXRoKCdub3RlLicpIFxyXG5cdFx0XHRcdFx0PyBzZXR0aW5ncy5kcmFmdFN0YXR1c1Byb3BlcnR5LnN1YnN0cmluZyg1KSBcclxuXHRcdFx0XHRcdDogc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eTtcclxuXHRcdFx0XHRjb25zdCBmcm9udG1hdHRlclZhbHVlID0gZnJvbnRtYXR0ZXJbY2xlYW5Qcm9wXTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBIYW5kbGUgYm9vbGVhbiB2YWx1ZXMgc3luY2hyb25vdXNseVxyXG5cdFx0XHRcdGlmICh0eXBlb2YgZnJvbnRtYXR0ZXJWYWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XHJcblx0XHRcdFx0XHRjb25zdCBib29sZWFuVmFsdWUgPSBmcm9udG1hdHRlclZhbHVlO1xyXG5cdFx0XHRcdFx0Y29uc3QgaXNEcmFmdCA9IHNldHRpbmdzLmRyYWZ0U3RhdHVzUmV2ZXJzZSA/ICFib29sZWFuVmFsdWUgOiBib29sZWFuVmFsdWU7XHJcblx0XHRcdFx0XHRyZW5kZXJCYWRnZShjb250YWluZXIsIGJvb2xlYW5WYWx1ZSwgaXNEcmFmdCwgb25Qcm9wZXJ0eVRvZ2dsZSwgY2FyZFBhdGgpO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBObyBzeW5jaHJvbm91cyByZXN1bHQgLSB0cnkgYXN5bmMgZm9yIE1EWCBmaWxlcyAoZmFsbGJhY2sgaWYgY2FjaGUgbWlzcylcclxuXHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0Y29uc3QgeyBib29sZWFuVmFsdWUsIGlzRHJhZnQgfSA9IGF3YWl0IGNhbGN1bGF0ZURyYWZ0U3RhdHVzQXN5bmMoZW50cnksIHNldHRpbmdzLCBhcHAsIG1keEZyb250bWF0dGVyQ2FjaGUpO1xyXG5cdFx0XHRpZiAoYm9vbGVhblZhbHVlICE9PSBudWxsICYmIGNvbnRhaW5lci5pc0Nvbm5lY3RlZCkge1xyXG5cdFx0XHRcdHJlbmRlckJhZGdlKGNvbnRhaW5lciwgYm9vbGVhblZhbHVlLCBpc0RyYWZ0LCBvblByb3BlcnR5VG9nZ2xlLCBjYXJkUGF0aCk7XHJcblx0XHRcdH1cclxuXHRcdH0pKCk7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogSGVscGVyIGZ1bmN0aW9uIHRvIHJlbmRlciB0aGUgYmFkZ2UgZWxlbWVudFxyXG4gKi9cclxuZnVuY3Rpb24gcmVuZGVyQmFkZ2UoXHJcblx0Y29udGFpbmVyOiBIVE1MRWxlbWVudCxcclxuXHRib29sZWFuVmFsdWU6IGJvb2xlYW4sXHJcblx0aXNEcmFmdDogYm9vbGVhbixcclxuXHRvblByb3BlcnR5VG9nZ2xlOiAoKHBhdGg6IHN0cmluZywgcHJvcGVydHk6IHN0cmluZywgdmFsdWU6IHVua25vd24pID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+KSB8IHVuZGVmaW5lZCxcclxuXHRjYXJkUGF0aDogc3RyaW5nXHJcbik6IHZvaWQge1xyXG5cdC8vIENoZWNrIGlmIGJhZGdlIGFscmVhZHkgZXhpc3RzIHRvIGF2b2lkIGR1cGxpY2F0ZXNcclxuXHRpZiAoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLXN0YXR1cy1iYWRnZScpKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdFxyXG5cdGNvbnN0IHN0YXR1c0JhZGdlID0gY29udGFpbmVyLmNyZWF0ZURpdignY2FyZC1zdGF0dXMtYmFkZ2UnKTtcclxuXHRpZiAoaXNEcmFmdCkge1xyXG5cdFx0c3RhdHVzQmFkZ2UuYWRkQ2xhc3MoJ3N0YXR1cy1kcmFmdCcpO1xyXG5cdFx0c3RhdHVzQmFkZ2UuYXBwZW5kVGV4dCgnRHJhZnQnKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0c3RhdHVzQmFkZ2UuYWRkQ2xhc3MoJ3N0YXR1cy1wdWJsaXNoZWQnKTtcclxuXHRcdHN0YXR1c0JhZGdlLmFwcGVuZFRleHQoJ1B1Ymxpc2hlZCcpO1xyXG5cdH1cclxuXHRcclxuXHRpZiAob25Qcm9wZXJ0eVRvZ2dsZSkge1xyXG5cdFx0c3RhdHVzQmFkZ2UuYWRkQ2xhc3MoJ2Jhc2VzLWNtcy1jdXJzb3ItcG9pbnRlcicpO1xyXG5cdFx0c3RhdHVzQmFkZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRjb25zdCBuZXdWYWx1ZSA9ICFib29sZWFuVmFsdWU7XHJcblx0XHRcdHZvaWQgb25Qcm9wZXJ0eVRvZ2dsZShjYXJkUGF0aCwgJ2RyYWZ0JywgbmV3VmFsdWUpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuIiwgImltcG9ydCB7IEFwcCwgVEZpbGUsIHNldEljb24sIE1vZGFsLCBUZXh0Q29tcG9uZW50LCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBzZXRDc3NQcm9wcyB9IGZyb20gJy4vY3NzLXByb3BzJztcbmltcG9ydCB0eXBlIEJhc2VzQ01TUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHR5cGUgeyBDTVNTZXR0aW5ncyB9IGZyb20gJy4uL3NoYXJlZC9kYXRhLXRyYW5zZm9ybSc7XG5cbi8qKlxuICogU2hvdyByZW5hbWUgZGlhbG9nIGZvciBhIGZpbGUgd2l0aG91dCBvcGVuaW5nIGl0XG4gKiBTaW1pbGFyIHRvIGhvdyBBc3RybyBDb21wb3NlcidzIHJlbmFtZUNvbnRlbnRCeVBhdGggd29ya3NcbiAqL1xuZnVuY3Rpb24gc2hvd1JlbmFtZURpYWxvZyhhcHA6IEFwcCwgZmlsZTogVEZpbGUpOiB2b2lkIHtcblx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwoYXBwKTtcblx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KCdSZW5hbWUgZmlsZScpO1xuXHRcblx0Y29uc3QgaW5wdXRDb250YWluZXIgPSBtb2RhbC5jb250ZW50RWwuY3JlYXRlRGl2KCk7XG5cdC8vIE1ha2UgaW5wdXQgY29udGFpbmVyIGZ1bGwgd2lkdGhcblx0c2V0Q3NzUHJvcHMoaW5wdXRDb250YWluZXIsIHtcblx0XHR3aWR0aDogJzEwMCUnXG5cdH0pO1xuXHRjb25zdCBpbnB1dCA9IG5ldyBUZXh0Q29tcG9uZW50KGlucHV0Q29udGFpbmVyKTtcblx0aW5wdXQuc2V0VmFsdWUoZmlsZS5iYXNlbmFtZSk7XG5cdC8vIE1ha2UgaW5wdXQgZmllbGQgZnVsbCB3aWR0aCB0byBtYXRjaCBPYnNpZGlhbidzIG5hdGl2ZSBkaWFsb2dcblx0c2V0Q3NzUHJvcHMoaW5wdXQuaW5wdXRFbCwge1xuXHRcdHdpZHRoOiAnMTAwJScsXG5cdFx0Ym94U2l6aW5nOiAnYm9yZGVyLWJveCdcblx0fSk7XG5cdGlucHV0LmlucHV0RWwuZm9jdXMoKTtcblx0aW5wdXQuaW5wdXRFbC5zZWxlY3QoKTtcblx0XG5cdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IG1vZGFsLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdtb2RhbC1idXR0b24tY29udGFpbmVyJyB9KTtcblx0Y29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuXHRjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBtb2RhbC5jbG9zZSgpKTtcblx0XG5cdGNvbnN0IHJlbmFtZUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcblx0XHR0ZXh0OiAnUmVuYW1lJyxcblx0XHRjbHM6ICdtb2QtY3RhJ1xuXHR9KTtcblx0XG5cdGNvbnN0IGhhbmRsZVJlbmFtZSA9IGFzeW5jICgpID0+IHtcblx0XHRjb25zdCBuZXdOYW1lID0gaW5wdXQuZ2V0VmFsdWUoKS50cmltKCk7XG5cdFx0aWYgKCFuZXdOYW1lIHx8IG5ld05hbWUgPT09IGZpbGUuYmFzZW5hbWUpIHtcblx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdFxuXHRcdC8vIENvbnN0cnVjdCBuZXcgcGF0aCB3aXRoIGV4dGVuc2lvblxuXHRcdGNvbnN0IHBhdGhQYXJ0cyA9IGZpbGUucGF0aC5zcGxpdCgnLycpO1xuXHRcdHBhdGhQYXJ0c1twYXRoUGFydHMubGVuZ3RoIC0gMV0gPSBuZXdOYW1lICsgKGZpbGUuZXh0ZW5zaW9uID8gYC4ke2ZpbGUuZXh0ZW5zaW9ufWAgOiAnJyk7XG5cdFx0Y29uc3QgbmV3UGF0aCA9IHBhdGhQYXJ0cy5qb2luKCcvJyk7XG5cdFx0XG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IGFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGZpbGUsIG5ld1BhdGgpO1xuXHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Ly8gRXJyb3IgaGFuZGxpbmcgLSB0aGUgcmVuYW1lIG1pZ2h0IGZhaWwgaWYgZmlsZSBhbHJlYWR5IGV4aXN0cywgZXRjLlxuXHRcdFx0Y29uc29sZS5lcnJvcignW0Jhc2VzIENNU10gRXJyb3IgcmVuYW1pbmcgZmlsZTonLCBlcnJvcik7XG5cdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdH1cblx0fTtcblx0XG5cdHJlbmFtZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHR2b2lkIGhhbmRsZVJlbmFtZSgpO1xuXHR9KTtcblx0XG5cdGlucHV0LmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG5cdFx0aWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR2b2lkIGhhbmRsZVJlbmFtZSgpO1xuXHRcdH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdH1cblx0fSk7XG5cdFxuXHRtb2RhbC5vcGVuKCk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBjb21tYW5kIGlzIE9ic2lkaWFuJ3MgZGVmYXVsdCBcIlJlbmFtZSBmaWxlXCIgY29tbWFuZFxuICovXG5mdW5jdGlvbiBpc09ic2lkaWFuUmVuYW1lQ29tbWFuZChjb21tYW5kSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHQvLyBPYnNpZGlhbidzIHJlbmFtZSBmaWxlIGNvbW1hbmQgSURzIChtYXkgdmFyeSBieSB2ZXJzaW9uKVxuXHRjb25zdCBsb3dlcklkID0gY29tbWFuZElkLnRvTG93ZXJDYXNlKCk7XG5cdHJldHVybiBjb21tYW5kSWQgPT09ICdmaWxlLWV4cGxvcmVyOnJlbmFtZS1maWxlJyB8fCBcblx0XHQgICBjb21tYW5kSWQgPT09ICdyZW5hbWUtZmlsZScgfHxcblx0XHQgICBjb21tYW5kSWQgPT09ICdmaWxlOnJlbmFtZS1maWxlJyB8fFxuXHRcdCAgIChsb3dlcklkLmluY2x1ZGVzKCdyZW5hbWUnKSAmJiBsb3dlcklkLmluY2x1ZGVzKCdmaWxlJykgJiYgIWxvd2VySWQuaW5jbHVkZXMoJzonKSk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBjb21tYW5kIGlzIGtub3duIHRvIG5vdCB3b3JrIHdlbGwgd2l0aG91dCB0aGUgZmlsZSBiZWluZyBwcm9wZXJseSBvcGVuZWRcbiAqIFRoZXNlIGNvbW1hbmRzIHR5cGljYWxseSBuZWVkIGVkaXRvciBjb250ZXh0IG9yIHNwZWNpZmljIFVJIHN0YXRlIHRoYXQgY2FuJ3QgYmUgZmFrZWRcbiAqL1xuZnVuY3Rpb24gaXNQcm9ibGVtYXRpY0NvbW1hbmQoY29tbWFuZElkOiBzdHJpbmcsIGNvbW1hbmROYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcblx0Y29uc3QgbG93ZXJJZCA9IGNvbW1hbmRJZC50b0xvd2VyQ2FzZSgpO1xuXHRjb25zdCBsb3dlck5hbWUgPSBjb21tYW5kTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcblx0Ly8gQ29tbWFuZHMgdGhhdCBuZWVkIGVkaXRvciBjb250ZXh0IGFuZCB0eXBpY2FsbHkgZG9uJ3Qgd29yayB3ZWxsIHByb2dyYW1tYXRpY2FsbHlcblx0Y29uc3QgcHJvYmxlbWF0aWNQYXR0ZXJucyA9IFtcblx0XHQnYWRkIHRhZycsXG5cdFx0J2FkZC10YWcnLFxuXHRcdCdpbnNlcnQtdGVtcGxhdGUnLFxuXHRcdCdpbnNlcnQtdGVtcGxhdGUnLFxuXHRcdCdlZGl0b3I6Jyxcblx0XHQnbWFya2Rvd246Jyxcblx0XTtcblx0XG5cdHJldHVybiBwcm9ibGVtYXRpY1BhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBcblx0XHRsb3dlcklkLmluY2x1ZGVzKHBhdHRlcm4pIHx8IGxvd2VyTmFtZS5pbmNsdWRlcyhwYXR0ZXJuKVxuXHQpO1xufVxuXG4vKipcbiAqIFNldHVwIHF1aWNrIGVkaXQgaWNvbiBvbiB0aXRsZSBlbGVtZW50IChvciBjYXJkIGlmIHRpdGxlIGlzIGhpZGRlbilcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldHVwUXVpY2tFZGl0SWNvbihcblx0YXBwOiBBcHAsXG5cdHBsdWdpbjogQmFzZXNDTVNQbHVnaW4sXG5cdHRpdGxlRWw6IEhUTUxFbGVtZW50LFxuXHRjYXJkRWw6IEhUTUxFbGVtZW50LFxuXHRjYXJkUGF0aDogc3RyaW5nLFxuXHRzZXR0aW5nczogQ01TU2V0dGluZ3Ncbik6IHZvaWQge1xuXHQvLyBRdWljayBlZGl0IGljb24gKG9ubHkgaWYgZW5hYmxlZCwgY29tbWFuZCBpcyBzZXQsIGFuZCBub3QgaGlkZGVuIGluIHRoaXMgdmlldylcblx0aWYgKCFwbHVnaW4uc2V0dGluZ3MuZW5hYmxlUXVpY2tFZGl0IHx8IFxuXHRcdCFwbHVnaW4uc2V0dGluZ3MucXVpY2tFZGl0Q29tbWFuZCB8fCBcblx0XHRwbHVnaW4uc2V0dGluZ3MucXVpY2tFZGl0Q29tbWFuZCA9PT0gJycgfHxcblx0XHRzZXR0aW5ncy5oaWRlUXVpY2tFZGl0SWNvbikge1xuXHRcdHJldHVybjtcblx0fVxuXHRcblx0Ly8gQXR0YWNoIHRvIHRpdGxlRWwgKHRpdGxlIGlzIGFsd2F5cyBzaG93biBub3cpXG5cdGNvbnN0IHF1aWNrRWRpdEljb24gPSB0aXRsZUVsLmNyZWF0ZVNwYW4oJ2Jhc2VzLWNtcy1xdWljay1lZGl0LWljb24nKTtcblx0cXVpY2tFZGl0SWNvbi5hZGRDbGFzcygnYmFzZXMtY21zLWN1cnNvci1kZWZhdWx0Jyk7XG5cdHNldEljb24ocXVpY2tFZGl0SWNvbiwgcGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdEljb24gfHwgJ3BlbmNpbC1saW5lJyk7XG5cdFxuXHQvLyBQcmV2ZW50IHRpdGxlIGZyb20gYmVpbmcgY2xpY2thYmxlIHdoZW4gY2xpY2tpbmcgaWNvblxuXHR0aXRsZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRpZiAocXVpY2tFZGl0SWNvbi5jb250YWlucyhlLnRhcmdldCBhcyBOb2RlKSkge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXHR9LCB0cnVlKTtcblx0XG5cdC8vIEV4ZWN1dGUgY29tbWFuZCB3aGVuIGljb24gaXMgY2xpY2tlZFxuXHQvLyBSZWdpc3RlciB3aXRoIGNhcHR1cmUgcGhhc2UgQkVGT1JFIGNhcmQgY2xpY2sgaGFuZGxlciBjYW4gc2VlIGl0XG5cdGNhcmRFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0Y29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRpZiAoIXF1aWNrRWRpdEljb24uY29udGFpbnModGFyZ2V0KSAmJiAhdGFyZ2V0LmNsb3Nlc3QoJy5iYXNlcy1jbXMtcXVpY2stZWRpdC1pY29uJykpIHtcblx0XHRcdFx0cmV0dXJuOyAvLyBOb3QgY2xpY2tpbmcgb24gaWNvblxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFxuXHRcdFx0Ly8gVHJ5IHRvIGV4ZWN1dGUgY29tbWFuZCB3aXRob3V0IG9wZW5pbmcgZmlsZSBmaXJzdFxuXHRcdFx0Ly8gRm9yIGNvbW1hbmRzIHRoYXQgbmVlZCBmaWxlIGNvbnRleHQsIHRyeSB0byBjYWxsIGhlbHBlciBmdW5jdGlvbnMgZGlyZWN0bHkgaWYgYXZhaWxhYmxlXG5cdFx0XHRjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChjYXJkUGF0aCk7XG5cdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRcdGNvbnN0IGNvbW1hbmRJZCA9IHBsdWdpbi5zZXR0aW5ncy5xdWlja0VkaXRDb21tYW5kO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gRklSU1Q6IENoZWNrIGlmIHRoaXMgaXMgT2JzaWRpYW4ncyBcIlJlbmFtZSBmaWxlXCIgY29tbWFuZFxuXHRcdFx0XHQvLyBTaG93IHJlbmFtZSBkaWFsb2cgd2l0aG91dCBvcGVuaW5nIHRoZSBmaWxlLCBzaW1pbGFyIHRvIEFzdHJvIENvbXBvc2VyXG5cdFx0XHRcdGNvbnN0IGNvbW1hbmRSZWdpc3RyeSA9IChhcHAgYXMgeyBjb21tYW5kcz86IHsgY29tbWFuZHM/OiBSZWNvcmQ8c3RyaW5nLCB7IG5hbWU/OiBzdHJpbmcgfT4gfSB9KS5jb21tYW5kcztcblx0XHRcdFx0Y29uc3QgY29tbWFuZCA9IGNvbW1hbmRSZWdpc3RyeT8uY29tbWFuZHM/Lltjb21tYW5kSWRdO1xuXHRcdFx0XHRjb25zdCBjb21tYW5kTmFtZSA9IGNvbW1hbmQ/Lm5hbWUgfHwgJyc7XG5cdFx0XHRcdGNvbnN0IGxvd2VyQ29tbWFuZE5hbWUgPSBjb21tYW5kTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBpcyBhIHJlbmFtZSBmaWxlIGNvbW1hbmQgYnkgSUQgb3IgbmFtZVxuXHRcdFx0XHRpZiAoaXNPYnNpZGlhblJlbmFtZUNvbW1hbmQoY29tbWFuZElkKSB8fCBcblx0XHRcdFx0XHQobG93ZXJDb21tYW5kTmFtZS5pbmNsdWRlcygncmVuYW1lJykgJiYgbG93ZXJDb21tYW5kTmFtZS5pbmNsdWRlcygnZmlsZScpKSkge1xuXHRcdFx0XHRcdHNob3dSZW5hbWVEaWFsb2coYXBwLCBmaWxlKTtcblx0XHRcdFx0XHRyZXR1cm47IC8vIFN1Y2Nlc3MsIGV4aXQgZWFybHkgLSBkbyBOT1Qgb3BlbiB0aGUgZmlsZVxuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBDaGVjayBpZiB0aGlzIGlzIGEga25vd24gcHJvYmxlbWF0aWMgY29tbWFuZCB0aGF0IHdvbid0IHdvcmsgd2VsbFxuXHRcdFx0XHRpZiAoaXNQcm9ibGVtYXRpY0NvbW1hbmQoY29tbWFuZElkLCBjb21tYW5kTmFtZSkpIHtcblx0XHRcdFx0XHRpZiAocGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdE9wZW5GaWxlKSB7XG5cdFx0XHRcdFx0XHQvLyBVc2VyIGhhcyBlbmFibGVkIHRoZSBzZXR0aW5nLCBzbyB0cnkgdG8gb3BlbiBhbmQgZXhlY3V0ZSBhbnl3YXlcblx0XHRcdFx0XHRcdC8vIEZhbGwgdGhyb3VnaCB0byB0aGUgZmlsZSBvcGVuaW5nIGxvZ2ljIGJlbG93XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYFRoZSBcIiR7Y29tbWFuZE5hbWV9XCIgY29tbWFuZCByZXF1aXJlcyB0aGUgZmlsZSB0byBiZSBvcGVuIGluIGFuIGVkaXRvci4gRW5hYmxlIFwiQXR0ZW1wdCB0byBvcGVuIGZpbGUgYW5kIGV4ZWN1dGUgcXVpY2sgZWRpdCBjb21tYW5kXCIgaW4gc2V0dGluZ3MgdG8gdHJ5IGFueXdheS5gLCA1MDAwKTtcblx0XHRcdFx0XHRcdHJldHVybjsgLy8gRG9uJ3QgdHJ5IHRvIGV4ZWN1dGUgLSBpdCB3b24ndCB3b3JrIHByb3Blcmx5XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBUcnkgdG8gZmluZCBhbmQgY2FsbCBhIGhlbHBlciBmdW5jdGlvbiBmcm9tIHRoZSBwbHVnaW4gdGhhdCByZWdpc3RlcmVkIHRoaXMgY29tbWFuZFxuXHRcdFx0XHQvLyBQYXR0ZXJuOiBMb29rIGZvciBbY29tbWFuZElkXUJ5UGF0aCBtZXRob2Qgb24gdGhlIHNvdXJjZSBwbHVnaW5cblx0XHRcdFx0bGV0IGhlbHBlckNhbGxlZCA9IGZhbHNlO1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdC8vIEV4dHJhY3QgcGx1Z2luIElEIGZyb20gY29tbWFuZCBJRCBpZiBpdCBoYXMgdGhlIGZvcm1hdCBcInBsdWdpbi1pZDpjb21tYW5kLWlkXCJcblx0XHRcdFx0XHQvLyBPdGhlcndpc2UsIHRyeSB0byBnZXQgaXQgZnJvbSB0aGUgY29tbWFuZCByZWdpc3RyeVxuXHRcdFx0XHRcdGxldCBwbHVnaW5JZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cdFx0XHRcdFx0bGV0IGJhc2VDb21tYW5kSWQgPSBjb21tYW5kSWQ7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKGNvbW1hbmRJZC5pbmNsdWRlcygnOicpKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBwYXJ0cyA9IGNvbW1hbmRJZC5zcGxpdCgnOicpO1xuXHRcdFx0XHRcdFx0cGx1Z2luSWQgPSBwYXJ0c1swXTtcblx0XHRcdFx0XHRcdGJhc2VDb21tYW5kSWQgPSBwYXJ0cy5zbGljZSgxKS5qb2luKCc6Jyk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIFRyeSB0byBnZXQgcGx1Z2luIGZyb20gY29tbWFuZCByZWdpc3RyeVxuXHRcdFx0XHRcdFx0Y29uc3QgYXBwV2l0aENvbW1hbmRzID0gYXBwIGFzIHsgY29tbWFuZHM/OiB7IGNvbW1hbmRzPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfSB9O1xuXHRcdFx0XHRcdFx0Y29uc3QgY29tbWFuZFJlZ2lzdHJ5ID0gYXBwV2l0aENvbW1hbmRzLmNvbW1hbmRzO1xuXHRcdFx0XHRcdFx0Y29uc3QgY29tbWFuZCA9IGNvbW1hbmRSZWdpc3RyeT8uY29tbWFuZHM/Lltjb21tYW5kSWRdIGFzIHsgcGx1Z2luPzogeyBtYW5pZmVzdD86IHsgaWQ/OiBzdHJpbmcgfTsgcGx1Z2luSWQ/OiBzdHJpbmcgfTsgc291cmNlUGx1Z2luPzogeyBtYW5pZmVzdD86IHsgaWQ/OiBzdHJpbmcgfTsgcGx1Z2luSWQ/OiBzdHJpbmcgfSB9IHwgdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0aWYgKGNvbW1hbmQpIHtcblx0XHRcdFx0XHRcdFx0Ly8gVHJ5IG11bHRpcGxlIHdheXMgdG8gZ2V0IHRoZSBwbHVnaW5cblx0XHRcdFx0XHRcdFx0Y29uc3Qgc291cmNlUGx1Z2luID0gY29tbWFuZC5wbHVnaW4gfHwgY29tbWFuZC5zb3VyY2VQbHVnaW47XG5cdFx0XHRcdFx0XHRcdGlmIChzb3VyY2VQbHVnaW4pIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBUcnkgdG8gZ2V0IHBsdWdpbiBJRCBmcm9tIHBsdWdpbiBpbnN0YW5jZVxuXHRcdFx0XHRcdFx0XHRcdHBsdWdpbklkID0gc291cmNlUGx1Z2luLm1hbmlmZXN0Py5pZCB8fCBzb3VyY2VQbHVnaW4ucGx1Z2luSWQgfHwgbnVsbDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGEgcGx1Z2luIElELCB0cnkgdG8gZ2V0IHRoZSBwbHVnaW4gaW5zdGFuY2Vcblx0XHRcdFx0XHRpZiAocGx1Z2luSWQpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHBsdWdpbnMgPSAoYXBwIGFzIHsgcGx1Z2lucz86IHsgcGx1Z2lucz86IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIHVua25vd24+PiB9IH0pLnBsdWdpbnM7XG5cdFx0XHRcdFx0XHRjb25zdCBzb3VyY2VQbHVnaW4gPSBwbHVnaW5zPy5wbHVnaW5zPy5bcGx1Z2luSWRdO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRpZiAoc291cmNlUGx1Z2luKSB7XG5cdFx0XHRcdFx0XHRcdC8vIENvbnZlcnQgY29tbWFuZCBJRCB0byBjYW1lbENhc2UgbWV0aG9kIG5hbWVcblx0XHRcdFx0XHRcdFx0Ly8gZS5nLiwgXCJyZW5hbWUtY29udGVudFwiIC0+IFwicmVuYW1lQ29udGVudEJ5UGF0aFwiXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1ldGhvZE5hbWUgPSBiYXNlQ29tbWFuZElkXG5cdFx0XHRcdFx0XHRcdFx0LnNwbGl0KCctJylcblx0XHRcdFx0XHRcdFx0XHQubWFwKChwYXJ0LCBpbmRleCkgPT4gXG5cdFx0XHRcdFx0XHRcdFx0XHRpbmRleCA9PT0gMCA/IHBhcnQgOiBwYXJ0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcGFydC5zbGljZSgxKVxuXHRcdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdFx0XHQuam9pbignJykgKyAnQnlQYXRoJztcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIHRoZSBwbHVnaW4gZXhwb3NlcyB0aGlzIGhlbHBlciBmdW5jdGlvblxuXHRcdFx0XHRcdFx0XHRpZiAoc291cmNlUGx1Z2luICYmIHR5cGVvZiBzb3VyY2VQbHVnaW5bbWV0aG9kTmFtZV0gPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBDYWxsIHRoZSBoZWxwZXIgZnVuY3Rpb24gZGlyZWN0bHkgLSBubyBuZWVkIHRvIG9wZW4gZmlsZSFcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCAoc291cmNlUGx1Z2luW21ldGhvZE5hbWVdIGFzIChwYXRoOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4pKGNhcmRQYXRoKTtcblx0XHRcdFx0XHRcdFx0XHRoZWxwZXJDYWxsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybjsgLy8gU3VjY2VzcywgZXhpdCBlYXJseVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHQvLyBGYWxsIHRocm91Z2ggdG8gdHJ5IHJlZ3VsYXIgY29tbWFuZCBleGVjdXRpb25cblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0Ly8gRm9yIG90aGVyIGNvbW1hbmRzIG9yIGlmIGhlbHBlciBub3QgYXZhaWxhYmxlLCBjaGVjayBpZiB1c2VyIHdhbnRzIHRvIHRyeSBvcGVuaW5nIHRoZSBmaWxlXG5cdFx0XHRcdGlmICghaGVscGVyQ2FsbGVkKSB7XG5cdFx0XHRcdFx0Ly8gT25seSBhdHRlbXB0IHRvIG9wZW4gZmlsZSBhbmQgZXhlY3V0ZSBpZiB0aGUgc2V0dGluZyBpcyBlbmFibGVkXG5cdFx0XHRcdFx0aWYgKCFwbHVnaW4uc2V0dGluZ3MucXVpY2tFZGl0T3BlbkZpbGUpIHtcblx0XHRcdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBBbHJlYWR5IGluIHNlbnRlbmNlIGNhc2U7IHF1b3RlZCB0ZXh0IGlzIGEgc2V0dGluZyBuYW1lIHJlZmVyZW5jZVxuXHRcdFx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgVGhpcyBjb21tYW5kIGRvZXNuJ3QgaGF2ZSBzcGVjaWFsIGhhbmRsaW5nLiBFbmFibGUgXCJBdHRlbXB0IHRvIG9wZW4gZmlsZSBhbmQgZXhlY3V0ZSBxdWljayBlZGl0IGNvbW1hbmRcIiBpbiBzZXR0aW5ncyB0byB0cnkgZXhlY3V0aW5nIGl0LmAsIDUwMDApO1xuXHRcdFx0XHRcdFx0cmV0dXJuOyAvLyBEb24ndCB0cnkgdG8gZXhlY3V0ZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBVc2VyIGhhcyBlbmFibGVkIHRoZSBzZXR0aW5nLCBzbyB0cnkgdG8gb3BlbiB0aGUgZmlsZSBmaXJzdFxuXHRcdFx0XHRcdC8vIGFuZCBtYWtlIGl0IGFjdGl2ZSBzbyBjb21tYW5kcyBsaWtlIFwiUmVuYW1lIGZpbGVcIiB0YXJnZXQgdGhlIGNvcnJlY3QgZmlsZVxuXHRcdFx0XHRcdC8vIEFsd2F5cyBvcGVuIHRoZSBmaWxlIGZpcnN0IGFuZCBtYWtlIGl0IGFjdGl2ZSBiZWZvcmUgZXhlY3V0aW5nIHRoZSBjb21tYW5kXG5cdFx0XHRcdFx0Ly8gVGhpcyBlbnN1cmVzIGNvbW1hbmRzIHRoYXQgdXNlIGdldEFjdGl2ZUZpbGUoKSB0YXJnZXQgdGhlIGNvcnJlY3QgZmlsZVxuXHRcdFx0XHRcdGNvbnN0IGxlYWYgPSBhcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpO1xuXHRcdFx0XHRcdGF3YWl0IGxlYWYub3BlbkZpbGUoZmlsZSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gQ1JJVElDQUw6IFNldCB0aGlzIGxlYWYgYXMgYWN0aXZlIHNvIGNvbW1hbmRzIHRhcmdldCB0aGUgY29ycmVjdCBmaWxlXG5cdFx0XHRcdFx0Ly8gQ29tbWFuZHMgbGlrZSBcIlJlbmFtZSBmaWxlXCIgdXNlIGdldEFjdGl2ZUZpbGUoKSB0byBkZXRlcm1pbmUgd2hpY2ggZmlsZSB0byBvcGVyYXRlIG9uXG5cdFx0XHRcdFx0YXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGxlYWYsIHsgZm9jdXM6IHRydWUgfSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gV2FpdCBmb3IgdGhlIGVkaXRvciB0byBiZSByZWFkeSBhbmQgdGhlIGZpbGUgdG8gYmUgYWN0aXZlXG5cdFx0XHRcdFx0Ly8gVXNlIG11bHRpcGxlIGNoZWNrcyB0byBlbnN1cmUgdGhlIHdvcmtzcGFjZSBzdGF0ZSBoYXMgZnVsbHkgdXBkYXRlZFxuXHRcdFx0XHRcdGxldCBhdHRlbXB0cyA9IDA7XG5cdFx0XHRcdFx0Y29uc3QgbWF4QXR0ZW1wdHMgPSAzMDsgLy8gTWF4aW11bSAxLjUgc2Vjb25kcyBvZiB3YWl0aW5nICgzMCAqIDUwbXMpXG5cdFx0XHRcdFx0Y29uc3QgZXhlY3V0ZUNvbW1hbmQgPSAoKSA9PiB7XG5cdFx0XHRcdFx0XHQvLyBGaW5hbCBjaGVjayByaWdodCBiZWZvcmUgZXhlY3V0aW5nXG5cdFx0XHRcdFx0XHRjb25zdCBmaW5hbEFjdGl2ZUZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRcdFx0XHRcdGlmIChmaW5hbEFjdGl2ZUZpbGUgPT09IGZpbGUpIHtcblx0XHRcdFx0XHRcdFx0Ly8gRmlsZSBpcyBjb25maXJtZWQgYWN0aXZlLCBleGVjdXRlIHRoZSBjb21tYW5kXG5cdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgKGFwcCBhcyB7IGNvbW1hbmRzPzogeyBleGVjdXRlQ29tbWFuZEJ5SWQ/OiAoaWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPiB9IH0pLmNvbW1hbmRzPy5leGVjdXRlQ29tbWFuZEJ5SWQ/LihwbHVnaW4uc2V0dGluZ3MucXVpY2tFZGl0Q29tbWFuZCk7XG5cdFx0XHRcdFx0XHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBDb21tYW5kIGV4ZWN1dGlvbiBmYWlsZWRcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjb25zdCBjaGVja0VkaXRvclJlYWR5ID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgdmlldyA9IGxlYWYudmlldztcblx0XHRcdFx0XHRcdGNvbnN0IHZpZXdXaXRoRWRpdG9yID0gdmlldyBhcyB7IGVkaXRvcj86IHVua25vd24gfTtcblx0XHRcdFx0XHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgdGhhdCBib3RoIHRoZSBlZGl0b3IgaXMgcmVhZHkgQU5EIHRoZSBmaWxlIGlzIGFjdGl2ZVxuXHRcdFx0XHRcdFx0aWYgKHZpZXcgJiYgJ2VkaXRvcicgaW4gdmlldyAmJiB2aWV3V2l0aEVkaXRvci5lZGl0b3IgJiYgYWN0aXZlRmlsZSA9PT0gZmlsZSkge1xuXHRcdFx0XHRcdFx0XHQvLyBFZGl0b3IgaXMgcmVhZHkgYW5kIGZpbGUgaXMgYWN0aXZlXG5cdFx0XHRcdFx0XHRcdC8vIFdhaXQgYSBiaXQgbW9yZSB0byBlbnN1cmUgd29ya3NwYWNlIHN0YXRlIGlzIGZ1bGx5IHByb3BhZ2F0ZWRcblx0XHRcdFx0XHRcdFx0Ly8gVXNlIG11bHRpcGxlIGFuaW1hdGlvbiBmcmFtZXMgYW5kIHRpbWVvdXRzIHRvIGVuc3VyZSBldmVyeXRoaW5nIGlzIHNldHRsZWRcblx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGV4ZWN1dGVDb21tYW5kKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9LCAyMDApO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoYXR0ZW1wdHMgPCBtYXhBdHRlbXB0cykge1xuXHRcdFx0XHRcdFx0XHQvLyBFZGl0b3Igbm90IHJlYWR5IHlldCBvciBmaWxlIG5vdCBhY3RpdmUsIGNoZWNrIGFnYWluXG5cdFx0XHRcdFx0XHRcdGF0dGVtcHRzKys7XG5cdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoY2hlY2tFZGl0b3JSZWFkeSwgNTApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gU3RhcnQgY2hlY2tpbmcgZm9yIGVkaXRvciByZWFkaW5lc3Ncblx0XHRcdFx0XHRjaGVja0VkaXRvclJlYWR5KCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KSgpO1xuXHR9LCB0cnVlKTsgLy8gQ2FwdHVyZSBwaGFzZSAtIHJ1bnMgQkVGT1JFIHRoZSByZWd1bGFyIGNhcmQgY2xpY2sgaGFuZGxlclxuXHRcblx0Ly8gQWxzbyBhZGQgYSBtb3VzZWRvd24gaGFuZGxlciB0byBjYXRjaCBpdCBldmVuIGVhcmxpZXJcblx0cXVpY2tFZGl0SWNvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSkgPT4ge1xuXHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdH0sIHRydWUpO1xufVxuXG4iLCAiLyoqXHJcbiAqIFByb3BlcnR5IFJlbmRlcmVyXHJcbiAqIEhhbmRsZXMgcmVuZGVyaW5nIHByb3BlcnR5IGZpZWxkcyBhbmQgY29udGVudCBmb3IgY2FyZHNcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIEJhc2VzRW50cnksIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgdHlwZSB7IENhcmREYXRhLCBDTVNTZXR0aW5ncyB9IGZyb20gJy4uL3NoYXJlZC9kYXRhLXRyYW5zZm9ybSc7XHJcbmltcG9ydCB7IGdldFByb3BlcnR5TGFiZWwgfSBmcm9tICcuL3Byb3BlcnR5JztcclxuaW1wb3J0IHsgXHJcblx0c2hvdWxkSGlkZU1pc3NpbmdQcm9wZXJ0aWVzLCBcclxuXHRzaG91bGRIaWRlRW1wdHlQcm9wZXJ0aWVzLFxyXG5cdGdldEVtcHR5VmFsdWVNYXJrZXIsXHJcblx0Z2V0VGFnU3R5bGUsXHJcblx0c2hvd1RhZ0hhc2hQcmVmaXhcclxufSBmcm9tICcuL3N0eWxlLXNldHRpbmdzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9wZXJ0eVJlbmRlcmVyIHtcclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdHByaXZhdGUgYXBwOiBBcHAsXHJcblx0XHRwcml2YXRlIGdldEJhc2VzQ29uZmlnPzogKCkgPT4geyBnZXQ/OiAoa2V5OiBzdHJpbmcpID0+IHVua25vd24gfSB8IHVuZGVmaW5lZCxcclxuXHRcdHByaXZhdGUgZ2V0QmFzZXNDb250cm9sbGVyPzogKCkgPT4geyBnZXRQcm9wZXJ0eURpc3BsYXlOYW1lPzogKG5hbWU6IHN0cmluZykgPT4gc3RyaW5nIH0gfCB1bmRlZmluZWRcclxuXHQpIHt9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbmRlcnMgcHJvcGVydHkgZmllbGRzIGZvciBhIGNhcmRcclxuXHQgKiBAcGFyYW0gcG9zaXRpb24gLSAndG9wJyB0byByZW5kZXIgb25seSB0b3AtcG9zaXRpb25lZCBncm91cHMsICdib3R0b20nIHRvIHJlbmRlciBvbmx5IGJvdHRvbS1wb3NpdGlvbmVkIGdyb3VwcywgdW5kZWZpbmVkIHRvIHJlbmRlciBhbGxcclxuXHQgKi9cclxuXHRyZW5kZXJQcm9wZXJ0aWVzKFxyXG5cdFx0Y2FyZEVsOiBIVE1MRWxlbWVudCxcclxuXHRcdGNhcmQ6IENhcmREYXRhLFxyXG5cdFx0ZW50cnk6IEJhc2VzRW50cnksXHJcblx0XHRzZXR0aW5nczogQ01TU2V0dGluZ3MsXHJcblx0XHRvblByb3BlcnR5VG9nZ2xlPzogKHBhdGg6IHN0cmluZywgcHJvcGVydHk6IHN0cmluZywgdmFsdWU6IHVua25vd24pID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+LFxyXG5cdFx0cG9zaXRpb24/OiAndG9wJyB8ICdib3R0b20nXHJcblx0KTogdm9pZCB7XHJcblx0XHRjb25zdCBwcm9wcyA9IFtcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MSxcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MixcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MyxcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NCxcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NSxcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NixcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NyxcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5OCxcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5OSxcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTAsXHJcblx0XHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTExLFxyXG5cdFx0XHRzZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMixcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTMsXHJcblx0XHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTE0XHJcblx0XHRdO1xyXG5cclxuXHRcdC8vIERldGVjdCBkdXBsaWNhdGVzXHJcblx0XHRjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcblx0XHRjb25zdCBlZmZlY3RpdmVQcm9wcyA9IHByb3BzLm1hcChwcm9wID0+IHtcclxuXHRcdFx0aWYgKCFwcm9wIHx8IHByb3AgPT09ICcnKSByZXR1cm4gJyc7XHJcblx0XHRcdGlmIChzZWVuLmhhcyhwcm9wKSkgcmV0dXJuICcnO1xyXG5cdFx0XHRzZWVuLmFkZChwcm9wKTtcclxuXHRcdFx0cmV0dXJuIHByb3A7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBSZXNvbHZlIHByb3BlcnR5IHZhbHVlc1xyXG5cdFx0Ly8gVXNlIGNhcmREYXRhIHByb3BlcnRpZXMgdGhhdCB3ZXJlIGFscmVhZHkgcmVzb2x2ZWQgZHVyaW5nIHRyYW5zZm9ybWF0aW9uXHJcblx0XHQvLyBGb3IgTURYIGZpbGVzLCBwcm9wZXJ0aWVzIGFyZSByZXNvbHZlZCBhc3luYyBkdXJpbmcgdHJhbnNmb3JtQmFzZXNFbnRyaWVzXHJcblx0XHRjb25zdCB2YWx1ZXMgPSBlZmZlY3RpdmVQcm9wcy5tYXAoKHByb3AsIGluZGV4KSA9PiB7XHJcblx0XHRcdGlmICghcHJvcCkgcmV0dXJuIG51bGw7XHJcblx0XHRcdC8vIFVzZSBwcmUtcmVzb2x2ZWQgcHJvcGVydGllcyBmcm9tIGNhcmREYXRhIChwcm9wZXJ0eTEsIHByb3BlcnR5MiwgZXRjLilcclxuXHRcdFx0Y29uc3QgY2FyZFByb3BlcnR5ID0gYHByb3BlcnR5JHtpbmRleCArIDF9YCBhcyBrZXlvZiBDYXJkRGF0YTtcclxuXHRcdFx0Y29uc3QgY2FyZFZhbHVlID0gY2FyZFtjYXJkUHJvcGVydHldO1xyXG5cdFx0XHRpZiAoY2FyZFZhbHVlICE9PSB1bmRlZmluZWQgJiYgY2FyZFZhbHVlICE9PSBudWxsKSB7XHJcblx0XHRcdFx0cmV0dXJuIGNhcmRWYWx1ZSBhcyBzdHJpbmcgfCBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIEZhbGxiYWNrOiBGb3IgLm1kIGZpbGVzLCB0cnkgc3luY2hyb25vdXMgcmVzb2x1dGlvbiB2aWEgQmFzZXMgQVBJXHJcblx0XHRcdC8vIEZvciBNRFggZmlsZXMsIHByb3BlcnRpZXMgc2hvdWxkIGFscmVhZHkgYmUgaW4gY2FyZERhdGEgZnJvbSBhc3luYyB0cmFuc2Zvcm1hdGlvblxyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGNvbnN0IHZhbHVlID0gZW50cnkuZ2V0VmFsdWUocHJvcCBhcyBgbm90ZS4ke3N0cmluZ31gIHwgYGZvcm11bGEuJHtzdHJpbmd9YCB8IGBmaWxlLiR7c3RyaW5nfWApIGFzIHsgZGF0YT86IHVua25vd247IGRhdGU/OiBEYXRlIH0gfCBudWxsO1xyXG5cdFx0XHRcdGlmICghdmFsdWUpIHJldHVybiBudWxsO1xyXG5cdFx0XHRcdGlmICgnZGF0ZScgaW4gdmFsdWUgJiYgdmFsdWUuZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuXHRcdFx0XHRcdHJldHVybiB2YWx1ZS5kYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoJ2RhdGEnIGluIHZhbHVlICYmIHZhbHVlLmRhdGEgIT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0Y29uc3QgZGF0YSA9IHZhbHVlLmRhdGE7XHJcblx0XHRcdFx0XHRpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZGF0YS5tYXAoaXRlbSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmIGl0ZW0gIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkoaXRlbSkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBKU09OLnN0cmluZ2lmeShpdGVtKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIFN0cmluZyhpdGVtKTtcclxuXHRcdFx0XHRcdFx0fSkuam9pbignLCAnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmIChkYXRhICYmIHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiBkYXRhICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KGRhdGEpKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGRhdGEgPT09ICdudW1iZXInIHx8IHR5cGVvZiBkYXRhID09PSAnYm9vbGVhbicpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIFN0cmluZyhkYXRhKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIEZhbGxiYWNrIGZvciBvdGhlciB0eXBlc1xyXG5cdFx0XHRcdFx0cmV0dXJuIGRhdGEgPyBKU09OLnN0cmluZ2lmeShkYXRhKSA6ICcnO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0Ly8gSWdub3JlIGVycm9ycyAtIHByb3BlcnR5IGRvZXNuJ3QgZXhpc3Qgb3IgY2FuJ3QgYmUgcmVzb2x2ZWRcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIERlZmluZSBwcm9wZXJ0eSBncm91cHNcclxuXHRcdGNvbnN0IHByb3BlcnR5R3JvdXBzID0gW1xyXG5cdFx0XHR7XHJcblx0XHRcdFx0cHJvcHM6IFtlZmZlY3RpdmVQcm9wc1swXSwgZWZmZWN0aXZlUHJvcHNbMV1dLFxyXG5cdFx0XHRcdHZhbHVlczogW3ZhbHVlc1swXSwgdmFsdWVzWzFdXSxcclxuXHRcdFx0XHRzaWRlQnlTaWRlOiBzZXR0aW5ncy5wcm9wZXJ0eUxheW91dDEyU2lkZUJ5U2lkZSxcclxuXHRcdFx0XHRwb3NpdGlvbjogc2V0dGluZ3MucHJvcGVydHlHcm91cDFQb3NpdGlvblxyXG5cdFx0XHR9LFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cHJvcHM6IFtlZmZlY3RpdmVQcm9wc1syXSwgZWZmZWN0aXZlUHJvcHNbM11dLFxyXG5cdFx0XHRcdHZhbHVlczogW3ZhbHVlc1syXSwgdmFsdWVzWzNdXSxcclxuXHRcdFx0XHRzaWRlQnlTaWRlOiBzZXR0aW5ncy5wcm9wZXJ0eUxheW91dDM0U2lkZUJ5U2lkZSxcclxuXHRcdFx0XHRwb3NpdGlvbjogc2V0dGluZ3MucHJvcGVydHlHcm91cDJQb3NpdGlvblxyXG5cdFx0XHR9LFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cHJvcHM6IFtlZmZlY3RpdmVQcm9wc1s0XSwgZWZmZWN0aXZlUHJvcHNbNV1dLFxyXG5cdFx0XHRcdHZhbHVlczogW3ZhbHVlc1s0XSwgdmFsdWVzWzVdXSxcclxuXHRcdFx0XHRzaWRlQnlTaWRlOiBzZXR0aW5ncy5wcm9wZXJ0eUxheW91dDU2U2lkZUJ5U2lkZSxcclxuXHRcdFx0XHRwb3NpdGlvbjogc2V0dGluZ3MucHJvcGVydHlHcm91cDNQb3NpdGlvblxyXG5cdFx0XHR9LFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cHJvcHM6IFtlZmZlY3RpdmVQcm9wc1s2XSwgZWZmZWN0aXZlUHJvcHNbN11dLFxyXG5cdFx0XHRcdHZhbHVlczogW3ZhbHVlc1s2XSwgdmFsdWVzWzddXSxcclxuXHRcdFx0XHRzaWRlQnlTaWRlOiBzZXR0aW5ncy5wcm9wZXJ0eUxheW91dDc4U2lkZUJ5U2lkZSxcclxuXHRcdFx0XHRwb3NpdGlvbjogc2V0dGluZ3MucHJvcGVydHlHcm91cDRQb3NpdGlvblxyXG5cdFx0XHR9LFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cHJvcHM6IFtlZmZlY3RpdmVQcm9wc1s4XSwgZWZmZWN0aXZlUHJvcHNbOV1dLFxyXG5cdFx0XHRcdHZhbHVlczogW3ZhbHVlc1s4XSwgdmFsdWVzWzldXSxcclxuXHRcdFx0XHRzaWRlQnlTaWRlOiBzZXR0aW5ncy5wcm9wZXJ0eUxheW91dDkxMFNpZGVCeVNpZGUsXHJcblx0XHRcdFx0cG9zaXRpb246IHNldHRpbmdzLnByb3BlcnR5R3JvdXA1UG9zaXRpb25cclxuXHRcdFx0fSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHByb3BzOiBbZWZmZWN0aXZlUHJvcHNbMTBdLCBlZmZlY3RpdmVQcm9wc1sxMV1dLFxyXG5cdFx0XHRcdHZhbHVlczogW3ZhbHVlc1sxMF0sIHZhbHVlc1sxMV1dLFxyXG5cdFx0XHRcdHNpZGVCeVNpZGU6IHNldHRpbmdzLnByb3BlcnR5TGF5b3V0MTExMlNpZGVCeVNpZGUsXHJcblx0XHRcdFx0cG9zaXRpb246IHNldHRpbmdzLnByb3BlcnR5R3JvdXA2UG9zaXRpb25cclxuXHRcdFx0fSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHByb3BzOiBbZWZmZWN0aXZlUHJvcHNbMTJdLCBlZmZlY3RpdmVQcm9wc1sxM11dLFxyXG5cdFx0XHRcdHZhbHVlczogW3ZhbHVlc1sxMl0sIHZhbHVlc1sxM11dLFxyXG5cdFx0XHRcdHNpZGVCeVNpZGU6IHNldHRpbmdzLnByb3BlcnR5TGF5b3V0MTMxNFNpZGVCeVNpZGUsXHJcblx0XHRcdFx0cG9zaXRpb246IHNldHRpbmdzLnByb3BlcnR5R3JvdXA3UG9zaXRpb25cclxuXHRcdFx0fVxyXG5cdFx0XTtcclxuXHJcblx0XHQvLyBTZXBhcmF0ZSBncm91cHMgYnkgcG9zaXRpb25cclxuXHRcdGNvbnN0IHRvcEdyb3VwczogdHlwZW9mIHByb3BlcnR5R3JvdXBzID0gW107XHJcblx0XHRjb25zdCBib3R0b21Hcm91cHM6IHR5cGVvZiBwcm9wZXJ0eUdyb3VwcyA9IFtdO1xyXG5cclxuXHRcdHByb3BlcnR5R3JvdXBzLmZvckVhY2goKGdyb3VwLCBpbmRleCkgPT4ge1xyXG5cdFx0XHRjb25zdCBoYXNDb250ZW50ID0gZ3JvdXAucHJvcHNbMF0gIT09ICcnIHx8IGdyb3VwLnByb3BzWzFdICE9PSAnJztcclxuXHRcdFx0aWYgKGhhc0NvbnRlbnQpIHtcclxuXHRcdFx0XHRpZiAoZ3JvdXAucG9zaXRpb24gPT09ICd0b3AnKSB7XHJcblx0XHRcdFx0XHR0b3BHcm91cHMucHVzaChncm91cCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGJvdHRvbUdyb3Vwcy5wdXNoKGdyb3VwKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEhlbHBlciBmdW5jdGlvbiB0byBjaGVjayBpZiBwcm9wZXJ0eSBzaG91bGQgYmUgaGlkZGVuXHJcblx0XHRjb25zdCBzaG91bGRIaWRlUHJvcGVydHkgPSAocHJvcE5hbWU6IHN0cmluZywgcHJvcFZhbHVlOiBzdHJpbmcgfCBudWxsKTogYm9vbGVhbiA9PiB7XHJcblx0XHRcdGlmICghcHJvcE5hbWUgfHwgcHJvcE5hbWUgPT09ICcnKSByZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IGlzRW1wdHlWYWx1ZSA9IHByb3BWYWx1ZSA9PT0gbnVsbCB8fCBcclxuXHRcdFx0XHRwcm9wVmFsdWUgPT09ICcnIHx8IFxyXG5cdFx0XHRcdCh0eXBlb2YgcHJvcFZhbHVlID09PSAnc3RyaW5nJyAmJiBwcm9wVmFsdWUudHJpbSgpID09PSAnJyk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDaGVjayBpZiBwcm9wZXJ0eSBleGlzdHMgaW4gZnJvbnRtYXR0ZXJcclxuXHRcdFx0bGV0IHByb3BlcnR5RXhpc3RzID0gZmFsc2U7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0Ly8gR2V0IGZpbGUgZnJvbSB2YXVsdCB0byBlbnN1cmUgaXQncyBhIHByb3BlciBURmlsZSAobGlrZSBvdGhlciBwYXJ0cyBvZiB0aGUgY29kZWJhc2UpXHJcblx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBlbnRyeT8uZmlsZT8ucGF0aDtcclxuXHRcdFx0XHRpZiAoZmlsZVBhdGggJiYgdGhpcy5hcHA/LnZhdWx0ICYmIHRoaXMuYXBwPy5tZXRhZGF0YUNhY2hlKSB7XHJcblx0XHRcdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcclxuXHRcdFx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHRcdFx0Ly8gRm9yIE1EWCBmaWxlcywgbWV0YWRhdGEgY2FjaGUgd29uJ3Qgd29yaywgc28gc2tpcCB0aGlzIGNoZWNrXHJcblx0XHRcdFx0XHRcdC8vIFRoZSBCYXNlcyBBUEkgc2hvdWxkIGhhbmRsZSBwcm9wZXJ0eSBleGlzdGVuY2UgZm9yIE1EWCBmaWxlc1xyXG5cdFx0XHRcdFx0XHRpZiAoZmlsZS5leHRlbnNpb24gPT09ICdtZHgnKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gRm9yIE1EWCwgYXNzdW1lIHByb3BlcnR5IGV4aXN0cyBpZiBCYXNlcyBBUEkgcmV0dXJuZWQgYSB2YWx1ZVxyXG5cdFx0XHRcdFx0XHRcdHByb3BlcnR5RXhpc3RzID0gIWlzRW1wdHlWYWx1ZTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBtZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChtZXRhZGF0YSAmJiBtZXRhZGF0YS5mcm9udG1hdHRlcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgcHJvcGVydHlOYW1lcyA9IHByb3BOYW1lLnNwbGl0KCcsJykubWFwKHAgPT4gcC50cmltKCkpLmZpbHRlcihwID0+IHApO1xyXG5cdFx0XHRcdFx0XHRcdFx0Zm9yIChjb25zdCBwcm9wIG9mIHByb3BlcnR5TmFtZXMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgcHJvcEtleSA9IHByb3AucmVwbGFjZSgvXihub3RlfGZvcm11bGF8ZmlsZSlcXC4vLCAnJyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChwcm9wS2V5IGluIG1ldGFkYXRhLmZyb250bWF0dGVyKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0cHJvcGVydHlFeGlzdHMgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHQvLyBTaWxlbnRseSBpZ25vcmUgZXJyb3JzIHdoZW4gY2hlY2tpbmcgcHJvcGVydHkgZXhpc3RlbmNlXHJcblx0XHRcdFx0Ly8gVGhpcyBjYW4gaGFwcGVuIGlmIG1ldGFkYXRhQ2FjaGUgaXNuJ3QgcmVhZHkgeWV0XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIEhpZGUgbWlzc2luZyBwcm9wZXJ0aWVzXHJcblx0XHRcdGlmIChzaG91bGRIaWRlTWlzc2luZ1Byb3BlcnRpZXMoKSAmJiAhcHJvcGVydHlFeGlzdHMpIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gSGlkZSBlbXB0eSBwcm9wZXJ0aWVzXHJcblx0XHRcdGlmIChzaG91bGRIaWRlRW1wdHlQcm9wZXJ0aWVzKCkgJiYgcHJvcGVydHlFeGlzdHMgJiYgaXNFbXB0eVZhbHVlKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIEFsc28gaGlkZSBpZiBlbXB0eSBhbmQgaGlkZSBlbXB0eSBpcyBlbmFibGVkIChmYWxsYmFjayBmb3IgZm9ybXVsYSBwcm9wZXJ0aWVzKVxyXG5cdFx0XHRpZiAoc2hvdWxkSGlkZUVtcHR5UHJvcGVydGllcygpICYmIGlzRW1wdHlWYWx1ZSkge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIFJlbmRlciB0b3AgZ3JvdXBzIChvbmx5IGlmIHBvc2l0aW9uIGlzICd0b3AnIG9yIHVuZGVmaW5lZClcclxuXHRcdGlmICgocG9zaXRpb24gPT09ICd0b3AnIHx8IHBvc2l0aW9uID09PSB1bmRlZmluZWQpICYmIHRvcEdyb3Vwcy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdGNvbnN0IHRvcE1ldGFFbCA9IGNhcmRFbC5jcmVhdGVEaXYoJ2NhcmQtcHJvcGVydGllcyBwcm9wZXJ0aWVzLXRvcCcpO1xyXG5cdFx0XHR0b3BHcm91cHMuZm9yRWFjaCgoZ3JvdXAsIGdyb3VwSW5kZXgpID0+IHtcclxuXHRcdFx0XHQvLyBDaGVjayBpZiBlaXRoZXIgcHJvcGVydHkgc2hvdWxkIGJlIHJlbmRlcmVkXHJcblx0XHRcdFx0Y29uc3QgcHJvcDFTaG91bGRSZW5kZXIgPSBncm91cC5wcm9wc1swXSAmJiAhc2hvdWxkSGlkZVByb3BlcnR5KGdyb3VwLnByb3BzWzBdLCBncm91cC52YWx1ZXNbMF0pO1xyXG5cdFx0XHRcdGNvbnN0IHByb3AyU2hvdWxkUmVuZGVyID0gZ3JvdXAucHJvcHNbMV0gJiYgIXNob3VsZEhpZGVQcm9wZXJ0eShncm91cC5wcm9wc1sxXSwgZ3JvdXAudmFsdWVzWzFdKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoIXByb3AxU2hvdWxkUmVuZGVyICYmICFwcm9wMlNob3VsZFJlbmRlcikge1xyXG5cdFx0XHRcdFx0cmV0dXJuOyAvLyBTa2lwIHRoaXMgZ3JvdXAgZW50aXJlbHkgaWYgYm90aCBwcm9wZXJ0aWVzIGFyZSBoaWRkZW5cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc3Qgcm93RWwgPSB0b3BNZXRhRWwuY3JlYXRlRGl2KGBwcm9wZXJ0eS1yb3cgcHJvcGVydHktcm93LWdyb3VwLSR7Z3JvdXBJbmRleCArIDF9YCk7XHJcblx0XHRcdFx0aWYgKGdyb3VwLnNpZGVCeVNpZGUpIHtcclxuXHRcdFx0XHRcdHJvd0VsLmFkZENsYXNzKCdwcm9wZXJ0eS1yb3ctc2lkZS1ieS1zaWRlJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNvbnN0IGZpZWxkMUVsID0gcm93RWwuY3JlYXRlRGl2KCdwcm9wZXJ0eS1maWVsZCBwcm9wZXJ0eS1maWVsZC0xJyk7XHJcblx0XHRcdFx0aWYgKHByb3AxU2hvdWxkUmVuZGVyKSB7XHJcblx0XHRcdFx0XHR0aGlzLnJlbmRlclByb3BlcnR5Q29udGVudChmaWVsZDFFbCwgZ3JvdXAucHJvcHNbMF0sIGdyb3VwLnZhbHVlc1swXSwgY2FyZCwgZW50cnksIHNldHRpbmdzLCBvblByb3BlcnR5VG9nZ2xlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y29uc3QgZmllbGQyRWwgPSByb3dFbC5jcmVhdGVEaXYoJ3Byb3BlcnR5LWZpZWxkIHByb3BlcnR5LWZpZWxkLTInKTtcclxuXHRcdFx0XHRpZiAocHJvcDJTaG91bGRSZW5kZXIpIHtcclxuXHRcdFx0XHRcdHRoaXMucmVuZGVyUHJvcGVydHlDb250ZW50KGZpZWxkMkVsLCBncm91cC5wcm9wc1sxXSwgZ3JvdXAudmFsdWVzWzFdLCBjYXJkLCBlbnRyeSwgc2V0dGluZ3MsIG9uUHJvcGVydHlUb2dnbGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmVuZGVyIGJvdHRvbSBncm91cHMgKG9ubHkgaWYgcG9zaXRpb24gaXMgJ2JvdHRvbScgb3IgdW5kZWZpbmVkKVxyXG5cdFx0aWYgKChwb3NpdGlvbiA9PT0gJ2JvdHRvbScgfHwgcG9zaXRpb24gPT09IHVuZGVmaW5lZCkgJiYgYm90dG9tR3JvdXBzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0Y29uc3QgYm90dG9tTWV0YUVsID0gY2FyZEVsLmNyZWF0ZURpdignY2FyZC1wcm9wZXJ0aWVzIHByb3BlcnRpZXMtYm90dG9tJyk7XHJcblx0XHRcdGJvdHRvbUdyb3Vwcy5mb3JFYWNoKChncm91cCwgZ3JvdXBJbmRleCkgPT4ge1xyXG5cdFx0XHRcdC8vIENoZWNrIGlmIGVpdGhlciBwcm9wZXJ0eSBzaG91bGQgYmUgcmVuZGVyZWRcclxuXHRcdFx0XHRjb25zdCBwcm9wMVNob3VsZFJlbmRlciA9IGdyb3VwLnByb3BzWzBdICYmICFzaG91bGRIaWRlUHJvcGVydHkoZ3JvdXAucHJvcHNbMF0sIGdyb3VwLnZhbHVlc1swXSk7XHJcblx0XHRcdFx0Y29uc3QgcHJvcDJTaG91bGRSZW5kZXIgPSBncm91cC5wcm9wc1sxXSAmJiAhc2hvdWxkSGlkZVByb3BlcnR5KGdyb3VwLnByb3BzWzFdLCBncm91cC52YWx1ZXNbMV0pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmICghcHJvcDFTaG91bGRSZW5kZXIgJiYgIXByb3AyU2hvdWxkUmVuZGVyKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47IC8vIFNraXAgdGhpcyBncm91cCBlbnRpcmVseSBpZiBib3RoIHByb3BlcnRpZXMgYXJlIGhpZGRlblxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zdCByb3dFbCA9IGJvdHRvbU1ldGFFbC5jcmVhdGVEaXYoYHByb3BlcnR5LXJvdyBwcm9wZXJ0eS1yb3ctZ3JvdXAtJHtncm91cEluZGV4ICsgMX1gKTtcclxuXHRcdFx0XHRpZiAoZ3JvdXAuc2lkZUJ5U2lkZSkge1xyXG5cdFx0XHRcdFx0cm93RWwuYWRkQ2xhc3MoJ3Byb3BlcnR5LXJvdy1zaWRlLWJ5LXNpZGUnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y29uc3QgZmllbGQxRWwgPSByb3dFbC5jcmVhdGVEaXYoJ3Byb3BlcnR5LWZpZWxkIHByb3BlcnR5LWZpZWxkLTEnKTtcclxuXHRcdFx0XHRpZiAocHJvcDFTaG91bGRSZW5kZXIpIHtcclxuXHRcdFx0XHRcdHRoaXMucmVuZGVyUHJvcGVydHlDb250ZW50KGZpZWxkMUVsLCBncm91cC5wcm9wc1swXSwgZ3JvdXAudmFsdWVzWzBdLCBjYXJkLCBlbnRyeSwgc2V0dGluZ3MsIG9uUHJvcGVydHlUb2dnbGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjb25zdCBmaWVsZDJFbCA9IHJvd0VsLmNyZWF0ZURpdigncHJvcGVydHktZmllbGQgcHJvcGVydHktZmllbGQtMicpO1xyXG5cdFx0XHRcdGlmIChwcm9wMlNob3VsZFJlbmRlcikge1xyXG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJQcm9wZXJ0eUNvbnRlbnQoZmllbGQyRWwsIGdyb3VwLnByb3BzWzFdLCBncm91cC52YWx1ZXNbMV0sIGNhcmQsIGVudHJ5LCBzZXR0aW5ncywgb25Qcm9wZXJ0eVRvZ2dsZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbmRlcnMgaW5kaXZpZHVhbCBwcm9wZXJ0eSBjb250ZW50XHJcblx0ICovXHJcblx0cHJpdmF0ZSByZW5kZXJQcm9wZXJ0eUNvbnRlbnQoXHJcblx0XHRjb250YWluZXI6IEhUTUxFbGVtZW50LFxyXG5cdFx0cHJvcGVydHlOYW1lOiBzdHJpbmcsXHJcblx0XHRyZXNvbHZlZFZhbHVlOiBzdHJpbmcgfCBudWxsLFxyXG5cdFx0Y2FyZDogQ2FyZERhdGEsXHJcblx0XHRlbnRyeTogQmFzZXNFbnRyeSxcclxuXHRcdHNldHRpbmdzOiBDTVNTZXR0aW5ncyxcclxuXHRcdG9uUHJvcGVydHlUb2dnbGU/OiAocGF0aDogc3RyaW5nLCBwcm9wZXJ0eTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bikgPT4gdm9pZCB8IFByb21pc2U8dm9pZD5cclxuXHQpOiB2b2lkIHtcclxuXHRcdGlmIChwcm9wZXJ0eU5hbWUgPT09ICcnKSByZXR1cm47XHJcblxyXG5cdFx0Ly8gTWF0Y2ggRHluYW1pYyBWaWV3cyBiZWhhdmlvcjpcclxuXHRcdC8vIC0gcmVzb2x2ZWRWYWx1ZSA9PT0gbnVsbCBtZWFucyBwcm9wZXJ0eSBkb2Vzbid0IGV4aXN0IChtaXNzaW5nKVxyXG5cdFx0Ly8gLSByZXNvbHZlZFZhbHVlID09PSBcIlwiIG1lYW5zIHByb3BlcnR5IGV4aXN0cyBidXQgaXMgZW1wdHlcclxuXHRcdC8vIFRoaXMgbWF0Y2hlcyBob3cgcmVzb2x2ZUJhc2VzUHJvcGVydHkgd29ya3NcclxuXHRcdFxyXG5cdFx0Ly8gSGlkZSBtaXNzaW5nIHByb3BlcnRpZXMgaWYgdG9nZ2xlIGVuYWJsZWQgKHJlc29sdmVkVmFsdWUgaXMgbnVsbCBmb3IgbWlzc2luZyBwcm9wZXJ0aWVzKVxyXG5cdFx0aWYgKHJlc29sdmVkVmFsdWUgPT09IG51bGwgJiYgc2hvdWxkSGlkZU1pc3NpbmdQcm9wZXJ0aWVzKCkpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBIaWRlIGVtcHR5IHByb3BlcnRpZXMgaWYgdG9nZ2xlIGVuYWJsZWQgKHJlc29sdmVkVmFsdWUgaXMgJycgZm9yIGVtcHR5IHByb3BlcnRpZXMpXHJcblx0XHRpZiAocmVzb2x2ZWRWYWx1ZSA9PT0gXCJcIiAmJiBzaG91bGRIaWRlRW1wdHlQcm9wZXJ0aWVzKCkpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIElmIG5vIHZhbHVlIGFuZCBsYWJlbHMgYXJlIGhpZGRlbiwgcmVuZGVyIG5vdGhpbmdcclxuXHRcdGlmICghcmVzb2x2ZWRWYWx1ZSAmJiBzZXR0aW5ncy5wcm9wZXJ0eUxhYmVscyA9PT0gJ2hpZGUnKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBFYXJseSByZXR1cm4gZm9yIGVtcHR5IHNwZWNpYWwgcHJvcGVydGllcyB3aGVuIGxhYmVscyBhcmUgaGlkZGVuXHJcblx0XHRpZiAoc2V0dGluZ3MucHJvcGVydHlMYWJlbHMgPT09ICdoaWRlJykge1xyXG5cdFx0XHRpZiAoKHByb3BlcnR5TmFtZSA9PT0gJ3RhZ3MnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ25vdGUudGFncycpICYmIGNhcmQueWFtbFRhZ3MubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICgocHJvcGVydHlOYW1lID09PSAnZmlsZS50YWdzJyB8fCBwcm9wZXJ0eU5hbWUgPT09ICdmaWxlIHRhZ3MnKSAmJiBjYXJkLnRhZ3MubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gR2V0IHByb3BlcnR5IGxhYmVsIGZyb20gQmFzZXMgaWYgYXZhaWxhYmxlXHJcblx0XHRjb25zdCBiYXNlc0NvbmZpZyA9IHRoaXMuZ2V0QmFzZXNDb25maWcgPyB0aGlzLmdldEJhc2VzQ29uZmlnKCkgOiB1bmRlZmluZWQ7XHJcblx0XHRjb25zdCBiYXNlc0NvbnRyb2xsZXIgPSB0aGlzLmdldEJhc2VzQ29udHJvbGxlciA/IHRoaXMuZ2V0QmFzZXNDb250cm9sbGVyKCkgOiB1bmRlZmluZWQ7XHJcblx0XHRjb25zdCBwcm9wZXJ0eUxhYmVsID0gZ2V0UHJvcGVydHlMYWJlbChwcm9wZXJ0eU5hbWUsIHRoaXMuYXBwLCBiYXNlc0NvbmZpZywgYmFzZXNDb250cm9sbGVyKTtcclxuXHRcdC8vIENoZWNrIGlmIHdlIGdvdCBhIGN1c3RvbSBkaXNwbGF5IG5hbWUgKGRpZmZlcmVudCBmcm9tIHByb3BlcnR5IG5hbWUpXHJcblx0XHRjb25zdCBpc0N1c3RvbUxhYmVsID0gcHJvcGVydHlMYWJlbC50b0xvd2VyQ2FzZSgpICE9PSBwcm9wZXJ0eU5hbWUudG9Mb3dlckNhc2UoKTtcclxuXHJcblx0XHQvLyBSZW5kZXIgbGFiZWwgaWYgcHJvcGVydHkgbGFiZWxzIGFyZSBlbmFibGVkXHJcblx0XHRpZiAoc2V0dGluZ3MucHJvcGVydHlMYWJlbHMgPT09ICdhYm92ZScpIHtcclxuXHRcdFx0Y29uc3QgbGFiZWxFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ3Byb3BlcnR5LWxhYmVsJyk7XHJcblx0XHRcdGlmIChpc0N1c3RvbUxhYmVsKSB7XHJcblx0XHRcdFx0bGFiZWxFbC5hZGRDbGFzcygncHJvcGVydHktbGFiZWwtY3VzdG9tJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0bGFiZWxFbC50ZXh0Q29udGVudCA9IHByb3BlcnR5TGFiZWw7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gVW5pdmVyc2FsIHdyYXBwZXIgZm9yIGFsbCBjb250ZW50IHR5cGVzXHJcblx0XHRjb25zdCBtZXRhQ29udGVudCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ3Byb3BlcnR5LWNvbnRlbnQnKTtcclxuXHRcdFxyXG5cdFx0Ly8gQWRkIGNsYXNzIGZvciBpbmxpbmUgbGFiZWxzIHRvIGVuYWJsZSBwcm9wZXIgQ1NTIHN0eWxpbmdcclxuXHRcdGlmIChzZXR0aW5ncy5wcm9wZXJ0eUxhYmVscyA9PT0gJ2lubGluZScpIHtcclxuXHRcdFx0bWV0YUNvbnRlbnQuYWRkQ2xhc3MoJ3Byb3BlcnR5LWNvbnRlbnQtaW5saW5lJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQWRkIGlubGluZSBsYWJlbCBpZiBlbmFibGVkIChpbnNpZGUgbWV0YUNvbnRlbnQpXHJcblx0XHRpZiAoc2V0dGluZ3MucHJvcGVydHlMYWJlbHMgPT09ICdpbmxpbmUnKSB7XHJcblx0XHRcdGNvbnN0IGxhYmVsU3BhbiA9IG1ldGFDb250ZW50LmNyZWF0ZVNwYW4oJ3Byb3BlcnR5LWxhYmVsLWlubGluZScpO1xyXG5cdFx0XHRsYWJlbFNwYW4udGV4dENvbnRlbnQgPSBwcm9wZXJ0eUxhYmVsICsgJzogJztcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJZiBubyB2YWx1ZSBidXQgbGFiZWxzIGFyZSBlbmFibGVkLCBzaG93IHBsYWNlaG9sZGVyXHJcblx0XHRpZiAoIXJlc29sdmVkVmFsdWUpIHtcclxuXHRcdFx0Y29uc3QgZW1wdHlNYXJrZXIgPSBtZXRhQ29udGVudC5jcmVhdGVTcGFuKCdwcm9wZXJ0eS1lbXB0eS1tYXJrZXInKTtcclxuXHRcdFx0ZW1wdHlNYXJrZXIudGV4dENvbnRlbnQgPSBnZXRFbXB0eVZhbHVlTWFya2VyKCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBIYW5kbGUgdGltZXN0YW1wIHByb3BlcnRpZXMgLSByZW5kZXIgYXMtaXMgd2l0aG91dCBTdHlsZSBTZXR0aW5ncyBsb2dpY1xyXG5cdFx0Y29uc3QgaXNLbm93blRpbWVzdGFtcFByb3BlcnR5ID0gcHJvcGVydHlOYW1lID09PSAnZmlsZS5tdGltZScgfHwgcHJvcGVydHlOYW1lID09PSAnZmlsZS5jdGltZScgfHxcclxuXHRcdFx0cHJvcGVydHlOYW1lID09PSAnbW9kaWZpZWQgdGltZScgfHwgcHJvcGVydHlOYW1lID09PSAnY3JlYXRlZCB0aW1lJztcclxuXHJcblx0XHRpZiAoaXNLbm93blRpbWVzdGFtcFByb3BlcnR5KSB7XHJcblx0XHRcdGNvbnN0IHRpbWVzdGFtcFdyYXBwZXIgPSBtZXRhQ29udGVudC5jcmVhdGVTcGFuKCk7XHJcblx0XHRcdHRpbWVzdGFtcFdyYXBwZXIuYXBwZW5kVGV4dChyZXNvbHZlZFZhbHVlKTtcclxuXHRcdH0gZWxzZSBpZiAoKHByb3BlcnR5TmFtZSA9PT0gJ3RhZ3MnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ25vdGUudGFncycpICYmIGNhcmQueWFtbFRhZ3MubGVuZ3RoID4gMCkge1xyXG5cdFx0XHQvLyBZQU1MIHRhZ3Mgb25seVxyXG5cdFx0XHRjb25zdCB0YWdzV3JhcHBlciA9IG1ldGFDb250ZW50LmNyZWF0ZURpdigndGFncy13cmFwcGVyJyk7XHJcblx0XHRcdGNvbnN0IHRhZ1N0eWxlID0gZ2V0VGFnU3R5bGUoKTtcclxuXHRcdFx0aWYgKHRhZ1N0eWxlICE9PSAncGxhaW4nKSB7XHJcblx0XHRcdFx0dGFnc1dyYXBwZXIuYWRkQ2xhc3MoYHRhZy1zdHlsZS0ke3RhZ1N0eWxlfWApO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRjYXJkLnlhbWxUYWdzLmZvckVhY2godGFnID0+IHtcclxuXHRcdFx0XHRjb25zdCB0YWdFbCA9IHRhZ3NXcmFwcGVyLmNyZWF0ZUVsKCdhJywge1xyXG5cdFx0XHRcdFx0Y2xzOiAndGFnJyxcclxuXHRcdFx0XHRcdHRleHQ6IHNob3dUYWdIYXNoUHJlZml4KCkgPyBgIyR7dGFnfWAgOiB0YWcsXHJcblx0XHRcdFx0XHRocmVmOiAnIydcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHR0YWdFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRjb25zdCBzZWFyY2hQbHVnaW4gPSAodGhpcy5hcHAgYXMgeyBpbnRlcm5hbFBsdWdpbnM/OiB7IHBsdWdpbnM/OiBSZWNvcmQ8c3RyaW5nLCB7IGluc3RhbmNlPzogeyBvcGVuR2xvYmFsU2VhcmNoPzogKHF1ZXJ5OiBzdHJpbmcpID0+IHZvaWQgfSB9PiB9IH0pLmludGVybmFsUGx1Z2lucz8ucGx1Z2lucz8uW1wiZ2xvYmFsLXNlYXJjaFwiXTtcclxuXHRcdFx0XHRcdGlmIChzZWFyY2hQbHVnaW4/Lmluc3RhbmNlPy5vcGVuR2xvYmFsU2VhcmNoKSB7XHJcblx0XHRcdFx0XHRcdHNlYXJjaFBsdWdpbi5pbnN0YW5jZS5vcGVuR2xvYmFsU2VhcmNoKFwidGFnOlwiICsgdGFnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2UgaWYgKChwcm9wZXJ0eU5hbWUgPT09ICdmaWxlLnRhZ3MnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ2ZpbGUgdGFncycpICYmIGNhcmQudGFncy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdC8vIHRhZ3MgaW4gWUFNTCArIG5vdGUgYm9keVxyXG5cdFx0XHRjb25zdCB0YWdzV3JhcHBlciA9IG1ldGFDb250ZW50LmNyZWF0ZURpdigndGFncy13cmFwcGVyJyk7XHJcblx0XHRcdGNvbnN0IHRhZ1N0eWxlID0gZ2V0VGFnU3R5bGUoKTtcclxuXHRcdFx0aWYgKHRhZ1N0eWxlICE9PSAncGxhaW4nKSB7XHJcblx0XHRcdFx0dGFnc1dyYXBwZXIuYWRkQ2xhc3MoYHRhZy1zdHlsZS0ke3RhZ1N0eWxlfWApO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRjYXJkLnRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHRhZ0VsID0gdGFnc1dyYXBwZXIuY3JlYXRlRWwoJ2EnLCB7XHJcblx0XHRcdFx0XHRjbHM6ICd0YWcnLFxyXG5cdFx0XHRcdFx0dGV4dDogc2hvd1RhZ0hhc2hQcmVmaXgoKSA/IGAjJHt0YWd9YCA6IHRhZyxcclxuXHRcdFx0XHRcdGhyZWY6ICcjJ1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdHRhZ0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdGNvbnN0IHNlYXJjaFBsdWdpbiA9ICh0aGlzLmFwcCBhcyB7IGludGVybmFsUGx1Z2lucz86IHsgcGx1Z2lucz86IFJlY29yZDxzdHJpbmcsIHsgaW5zdGFuY2U/OiB7IG9wZW5HbG9iYWxTZWFyY2g/OiAocXVlcnk6IHN0cmluZykgPT4gdm9pZCB9IH0+IH0gfSkuaW50ZXJuYWxQbHVnaW5zPy5wbHVnaW5zPy5bXCJnbG9iYWwtc2VhcmNoXCJdO1xyXG5cdFx0XHRcdFx0aWYgKHNlYXJjaFBsdWdpbj8uaW5zdGFuY2U/Lm9wZW5HbG9iYWxTZWFyY2gpIHtcclxuXHRcdFx0XHRcdFx0c2VhcmNoUGx1Z2luLmluc3RhbmNlLm9wZW5HbG9iYWxTZWFyY2goXCJ0YWc6XCIgKyB0YWcpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgYSBjaGVja2JveCBwcm9wZXJ0eVxyXG5cdFx0XHQvLyBHdWFyZDogZW5zdXJlIGFwcCBhbmQgbWV0YWRhdGFDYWNoZSBleGlzdFxyXG5cdFx0XHRpZiAoIXRoaXMuYXBwIHx8ICF0aGlzLmFwcC5tZXRhZGF0YUNhY2hlKSB7XHJcblx0XHRcdFx0Ly8gRmFsbGJhY2sgdG8gcmVndWxhciBwcm9wZXJ0eSByZW5kZXJpbmdcclxuXHRcdFx0XHRjb25zdCB0ZXh0V3JhcHBlciA9IG1ldGFDb250ZW50LmNyZWF0ZURpdigndGV4dC13cmFwcGVyJyk7XHJcblx0XHRcdFx0dGhpcy5yZW5kZXJQcm9wZXJ0eVZhbHVlV2l0aExpbmtzKHRleHRXcmFwcGVyLCByZXNvbHZlZFZhbHVlLCBjYXJkLnBhdGgsIHByb3BlcnR5TmFtZSk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBUcnkgdG8gZ2V0IHByb3BlcnR5IGluZm8gLSB3cmFwIGluIHRyeS1jYXRjaCBhcyBnZXRBbGxQcm9wZXJ0eUluZm9zIG1pZ2h0IGZhaWxcclxuXHRcdFx0Ly8gVGhpcyBpcyBvcHRpb25hbCAtIHdlIGNhbiBkZXRlY3QgY2hlY2tib3hlcyBmcm9tIGVudHJ5IHZhbHVlIGFsb25lXHJcblx0XHRcdGxldCBwcm9wSW5mbzogeyB3aWRnZXQ/OiBzdHJpbmcgfSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRjb25zdCBtZXRhZGF0YUNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZSBhcyB1bmtub3duIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xyXG5cdFx0XHRcdGNvbnN0IGdldEFsbFByb3BlcnR5SW5mb3MgPSBtZXRhZGF0YUNhY2hlLmdldEFsbFByb3BlcnR5SW5mb3MgYXMgKCgpID0+IFJlY29yZDxzdHJpbmcsIHsgd2lkZ2V0Pzogc3RyaW5nIH0+KSB8IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRpZiAodHlwZW9mIGdldEFsbFByb3BlcnR5SW5mb3MgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRcdGNvbnN0IHByb3BlcnR5SW5mb3MgPSBnZXRBbGxQcm9wZXJ0eUluZm9zKCkgYXMgUmVjb3JkPHN0cmluZywgeyB3aWRnZXQ/OiBzdHJpbmcgfT47XHJcblx0XHRcdFx0XHRwcm9wSW5mbyA9IHByb3BlcnR5SW5mb3NbcHJvcGVydHlOYW1lLnRvTG93ZXJDYXNlKCldO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0Ly8gU2lsZW50bHkgZmFpbCAtIGdldEFsbFByb3BlcnR5SW5mb3MgbWF5IG5vdCBiZSBhdmFpbGFibGUgb3IgbWF5IGZhaWxcclxuXHRcdFx0XHQvLyBXZSBjYW4gc3RpbGwgZGV0ZWN0IGNoZWNrYm94ZXMgZnJvbSBlbnRyeSB2YWx1ZVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBUcnkgdG8gZ2V0IHZhbHVlIGZyb20gZW50cnkgdG8gY2hlY2sgaWYgaXQncyBib29sZWFuXHJcblx0XHRcdC8vIEd1YXJkOiBlbnN1cmUgZW50cnkgZXhpc3RzIGFuZCBoYXMgZ2V0VmFsdWUgbWV0aG9kXHJcblx0XHRcdGxldCBlbnRyeVZhbHVlOiB7IGRhdGE/OiB1bmtub3duIH0gfCBudWxsID0gbnVsbDtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRpZiAoZW50cnkgJiYgdHlwZW9mIGVudHJ5LmdldFZhbHVlID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0XHRlbnRyeVZhbHVlID0gZW50cnkuZ2V0VmFsdWUocHJvcGVydHlOYW1lIGFzIGBub3RlLiR7c3RyaW5nfWAgfCBgZm9ybXVsYS4ke3N0cmluZ31gIHwgYGZpbGUuJHtzdHJpbmd9YCkgYXMgeyBkYXRhPzogdW5rbm93biB9IHwgbnVsbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdC8vIFNpbGVudGx5IGZhaWwgLSBlbnRyeSBtaWdodCBub3QgaGF2ZSB0aGlzIHByb3BlcnR5XHJcblx0XHRcdH1cclxuXHRcdFx0Y29uc3QgaXNDaGVja2JveCA9IHByb3BJbmZvPy53aWRnZXQgPT09ICdjaGVja2JveCcgfHwgXHJcblx0XHRcdFx0KGVudHJ5VmFsdWUgJiYgJ2RhdGEnIGluIGVudHJ5VmFsdWUgJiYgdHlwZW9mIGVudHJ5VmFsdWUuZGF0YSA9PT0gJ2Jvb2xlYW4nKTtcclxuXHJcblx0XHRcdGlmIChpc0NoZWNrYm94ICYmIG9uUHJvcGVydHlUb2dnbGUpIHtcclxuXHRcdFx0XHQvLyBSZW5kZXIgYXMgbmF0aXZlIE9ic2lkaWFuIGNoZWNrYm94IC0gc2ltcGxlIGlucHV0IGNoZWNrYm94XHJcblx0XHRcdFx0Y29uc3QgY2hlY2tib3ggPSBtZXRhQ29udGVudC5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XHJcblx0XHRcdFx0Y2hlY2tib3guY2hlY2tlZCA9IGVudHJ5VmFsdWUgJiYgJ2RhdGEnIGluIGVudHJ5VmFsdWUgPyBCb29sZWFuKGVudHJ5VmFsdWUuZGF0YSkgOiBmYWxzZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBVc2UgdGhlIHByb3BlcnR5IGxhYmVsICh3aGljaCB1c2VzIGdldERpc3BsYXlOYW1lKSBpbnN0ZWFkIG9mIHJhdyBwcm9wZXJ0eSBuYW1lXHJcblx0XHRcdFx0bWV0YUNvbnRlbnQuY3JlYXRlU3Bhbih7IHRleHQ6IHByb3BlcnR5TGFiZWwgfSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcclxuXHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRjb25zdCBjaGVja2VkID0gY2hlY2tib3guY2hlY2tlZDtcclxuXHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0XHQvLyBTdHJpcCBcIm5vdGUuXCIgcHJlZml4IGJlZm9yZSB0b2dnbGluZ1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNsZWFuUHJvcGVydHkgPSBwcm9wZXJ0eU5hbWUuc3RhcnRzV2l0aCgnbm90ZS4nKSA/IHByb3BlcnR5TmFtZS5zdWJzdHJpbmcoNSkgOiBwcm9wZXJ0eU5hbWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgb25Qcm9wZXJ0eVRvZ2dsZShjYXJkLnBhdGgsIGNsZWFuUHJvcGVydHksIGNoZWNrZWQpO1xyXG5cdFx0XHRcdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBSZXZlcnQgY2hlY2tib3ggb24gZXJyb3JcclxuXHRcdFx0XHRcdFx0XHRjaGVja2JveC5jaGVja2VkID0gIWNoZWNrZWQ7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0Y2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBHZW5lcmljIHByb3BlcnR5IC0gcGFyc2UgYW5kIHJlbmRlciBsaW5rc1xyXG5cdFx0XHRcdGNvbnN0IHRleHRXcmFwcGVyID0gbWV0YUNvbnRlbnQuY3JlYXRlRGl2KCd0ZXh0LXdyYXBwZXInKTtcclxuXHRcdFx0XHR0aGlzLnJlbmRlclByb3BlcnR5VmFsdWVXaXRoTGlua3ModGV4dFdyYXBwZXIsIHJlc29sdmVkVmFsdWUsIGNhcmQucGF0aCwgcHJvcGVydHlOYW1lKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFJlbW92ZSBtZXRhQ29udGVudCB3cmFwcGVyIGlmIGl0IGVuZGVkIHVwIGVtcHR5XHJcblx0XHRpZiAoIW1ldGFDb250ZW50LnRleHRDb250ZW50IHx8IG1ldGFDb250ZW50LnRleHRDb250ZW50LnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0bWV0YUNvbnRlbnQucmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZW5kZXJzIHByb3BlcnR5IHZhbHVlIHdpdGggY2xpY2thYmxlIGxpbmtzXHJcblx0ICogRGV0ZWN0cyB3aWtpbGlua3MgW1suLi5dXSwgbWFya2Rvd24gbGlua3MgWy4uLl0oLi4uKSwgYW5kIFVSTHNcclxuXHQgKiBGb3IgaW1hZ2UgcHJvcGVydGllcywgYWxzbyBtYWtlcyBmaWxlIHBhdGhzIGNsaWNrYWJsZSAobGlrZSBPYnNpZGlhbiBkb2VzKVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgcmVuZGVyUHJvcGVydHlWYWx1ZVdpdGhMaW5rcyhjb250YWluZXI6IEhUTUxFbGVtZW50LCB2YWx1ZTogc3RyaW5nIHwgbnVsbCwgc291cmNlUGF0aDogc3RyaW5nLCBwcm9wZXJ0eU5hbWU/OiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdGlmICghdmFsdWUpIHtcclxuXHRcdFx0Y29udGFpbmVyLmFwcGVuZFRleHQoZ2V0RW1wdHlWYWx1ZU1hcmtlcigpKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHRyaW1tZWRWYWx1ZSA9IHZhbHVlLnRyaW0oKTtcclxuXHRcdFxyXG5cdFx0Ly8gQ2hlY2sgaWYgZW50aXJlIHZhbHVlIGlzIGEgVVJMIChodHRwL2h0dHBzKSAtIG1ha2UgaXQgY2xpY2thYmxlXHJcblx0XHRpZiAoKHRyaW1tZWRWYWx1ZS5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgdHJpbW1lZFZhbHVlLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykpICYmICF0cmltbWVkVmFsdWUuaW5jbHVkZXMoJyAnKSkge1xyXG5cdFx0XHRjb25zdCBsaW5rRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2EnLCB7XHJcblx0XHRcdFx0Y2xzOiAnZXh0ZXJuYWwtbGluaycsXHJcblx0XHRcdFx0aHJlZjogdHJpbW1lZFZhbHVlXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRsaW5rRWwudGV4dENvbnRlbnQgPSB0cmltbWVkVmFsdWU7XHJcblx0XHRcdGxpbmtFbC5zZXRBdHRyKCd0YXJnZXQnLCAnX2JsYW5rJyk7XHJcblx0XHRcdGxpbmtFbC5zZXRBdHRyKCdyZWwnLCAnbm9vcGVuZXInKTtcclxuXHRcdFx0bGlua0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBGb3IgaW1hZ2UgcHJvcGVydGllcywgbWFrZSBmaWxlIHBhdGhzIGNsaWNrYWJsZSAobGlrZSBPYnNpZGlhbiBkb2VzIGluIHByb3BlcnR5IGVkaXRvcilcclxuXHRcdGNvbnN0IGlzSW1hZ2VQcm9wZXJ0eSA9IHByb3BlcnR5TmFtZSAmJiAoXHJcblx0XHRcdHByb3BlcnR5TmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdpbWFnZScpIHx8IFxyXG5cdFx0XHRwcm9wZXJ0eU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2NvdmVyJyB8fFxyXG5cdFx0XHRwcm9wZXJ0eU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RodW1ibmFpbCdcclxuXHRcdCk7XHJcblx0XHRcclxuXHRcdGlmIChpc0ltYWdlUHJvcGVydHkgJiYgIXRyaW1tZWRWYWx1ZS5pbmNsdWRlcygnICcpICYmIFxyXG5cdFx0XHQhdHJpbW1lZFZhbHVlLnN0YXJ0c1dpdGgoJ2h0dHA6Ly8nKSAmJiBcclxuXHRcdFx0IXRyaW1tZWRWYWx1ZS5zdGFydHNXaXRoKCdodHRwczovLycpICYmXHJcblx0XHRcdCh0cmltbWVkVmFsdWUuaW5jbHVkZXMoJy8nKSB8fCB0cmltbWVkVmFsdWUuaW5jbHVkZXMoJ1xcXFwnKSB8fCBcclxuXHRcdFx0IHRyaW1tZWRWYWx1ZS5tYXRjaCgvXFwuKHBuZ3xqcGd8anBlZ3xnaWZ8c3ZnfHdlYnB8bXA0fG1vdnxhdmkpJC9pKSkpIHtcclxuXHRcdFx0Ly8gTWFrZSBpdCBjbGlja2FibGUgYXMgYW4gaW50ZXJuYWwgbGluayAobGlrZSBPYnNpZGlhbiBkb2VzIGZvciBpbWFnZSBwcm9wZXJ0aWVzKVxyXG5cdFx0XHRjb25zdCBsaW5rRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2EnLCB7XHJcblx0XHRcdFx0Y2xzOiAnaW50ZXJuYWwtbGluaycsXHJcblx0XHRcdFx0aHJlZjogdHJpbW1lZFZhbHVlXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRsaW5rRWwudGV4dENvbnRlbnQgPSB0cmltbWVkVmFsdWU7XHJcblx0XHRcdGxpbmtFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0Y29uc3QgbmV3TGVhZiA9IGUubWV0YUtleSB8fCBlLmN0cmxLZXk7XHJcblx0XHRcdFx0dm9pZCB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KHRyaW1tZWRWYWx1ZSwgc291cmNlUGF0aCwgbmV3TGVhZik7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIFBhcnNlIGZvciB3aWtpbGlua3MgW1suLi5dXSBhbmQgbWFya2Rvd24gbGlua3MgWy4uLl0oLi4uKVxyXG5cdFx0Y29uc3Qgd2lraWxpbmtSZWdleCA9IC9cXFtcXFsoW15cXF1dKylcXF1cXF0vZztcclxuXHRcdGNvbnN0IG1hcmtkb3duTGlua1JlZ2V4ID0gL1xcWyhbXlxcXV0rKVxcXVxcKChbXildKylcXCkvZztcclxuXHRcdFxyXG5cdFx0Y29uc3QgbWF0Y2hlczogQXJyYXk8eyBpbmRleDogbnVtYmVyOyB0eXBlOiAnd2lraWxpbmsnIHwgJ21hcmtkb3duJzsgbWF0Y2g6IFJlZ0V4cE1hdGNoQXJyYXkgfT4gPSBbXTtcclxuXHRcdFxyXG5cdFx0Ly8gRmluZCB3aWtpbGlua3NcclxuXHRcdGZvciAoY29uc3QgbSBvZiB2YWx1ZS5tYXRjaEFsbCh3aWtpbGlua1JlZ2V4KSkge1xyXG5cdFx0XHRpZiAobS5pbmRleCAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0bWF0Y2hlcy5wdXNoKHsgaW5kZXg6IG0uaW5kZXgsIHR5cGU6ICd3aWtpbGluaycsIG1hdGNoOiBtIH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIEZpbmQgbWFya2Rvd24gbGlua3NcclxuXHRcdGZvciAoY29uc3QgbSBvZiB2YWx1ZS5tYXRjaEFsbChtYXJrZG93bkxpbmtSZWdleCkpIHtcclxuXHRcdFx0aWYgKG0uaW5kZXggIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdG1hdGNoZXMucHVzaCh7IGluZGV4OiBtLmluZGV4LCB0eXBlOiAnbWFya2Rvd24nLCBtYXRjaDogbSB9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBTb3J0IGJ5IGluZGV4XHJcblx0XHRtYXRjaGVzLnNvcnQoKGEsIGIpID0+IGEuaW5kZXggLSBiLmluZGV4KTtcclxuXHRcdFxyXG5cdFx0bGV0IGxhc3RJbmRleCA9IDA7XHJcblx0XHRcclxuXHRcdC8vIFJlbmRlciB0ZXh0IGFuZCBsaW5rc1xyXG5cdFx0Zm9yIChjb25zdCB7IGluZGV4LCB0eXBlLCBtYXRjaCB9IG9mIG1hdGNoZXMpIHtcclxuXHRcdFx0Ly8gQWRkIHRleHQgYmVmb3JlIHRoZSBsaW5rXHJcblx0XHRcdGlmIChpbmRleCA+IGxhc3RJbmRleCkge1xyXG5cdFx0XHRcdGNvbnRhaW5lci5hcHBlbmRUZXh0KHZhbHVlLnN1YnN0cmluZyhsYXN0SW5kZXgsIGluZGV4KSk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGlmICh0eXBlID09PSAnd2lraWxpbmsnKSB7XHJcblx0XHRcdFx0Y29uc3QgbGlua0NvbnRlbnQgPSBtYXRjaFsxXTtcclxuXHRcdFx0XHRjb25zdCBwYXJ0cyA9IGxpbmtDb250ZW50LnNwbGl0KCd8Jyk7XHJcblx0XHRcdFx0Y29uc3QgbGlua1BhdGggPSBwYXJ0c1swXS50cmltKCk7XHJcblx0XHRcdFx0Y29uc3QgZGlzcGxheVRleHQgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHNbMV0udHJpbSgpIDogbGlua1BhdGg7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc3QgbGlua0VsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdhJywge1xyXG5cdFx0XHRcdFx0Y2xzOiAnaW50ZXJuYWwtbGluaycsXHJcblx0XHRcdFx0XHRocmVmOiBsaW5rUGF0aFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGxpbmtFbC50ZXh0Q29udGVudCA9IGRpc3BsYXlUZXh0O1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGxpbmtFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0Y29uc3QgbmV3TGVhZiA9IGUubWV0YUtleSB8fCBlLmN0cmxLZXk7XHJcblx0XHRcdFx0XHR2b2lkIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQobGlua1BhdGgsIHNvdXJjZVBhdGgsIG5ld0xlYWYpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9IGVsc2UgaWYgKHR5cGUgPT09ICdtYXJrZG93bicpIHtcclxuXHRcdFx0XHRjb25zdCBsaW5rVGV4dCA9IG1hdGNoWzFdO1xyXG5cdFx0XHRcdGNvbnN0IGxpbmtVcmwgPSBtYXRjaFsyXTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAobGlua1VybC5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgbGlua1VybC5zdGFydHNXaXRoKCdodHRwczovLycpKSB7XHJcblx0XHRcdFx0XHQvLyBFeHRlcm5hbCBsaW5rXHJcblx0XHRcdFx0XHRjb25zdCBsaW5rRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2EnLCB7XHJcblx0XHRcdFx0XHRcdGNsczogJ2V4dGVybmFsLWxpbmsnLFxyXG5cdFx0XHRcdFx0XHRocmVmOiBsaW5rVXJsXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdGxpbmtFbC50ZXh0Q29udGVudCA9IGxpbmtUZXh0O1xyXG5cdFx0XHRcdFx0bGlua0VsLnNldEF0dHIoJ3RhcmdldCcsICdfYmxhbmsnKTtcclxuXHRcdFx0XHRcdGxpbmtFbC5zZXRBdHRyKCdyZWwnLCAnbm9vcGVuZXInKTtcclxuXHRcdFx0XHRcdGxpbmtFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gSW50ZXJuYWwgbGluayAoZmlsZSBwYXRoIG9yIHdpa2lsaW5rIGluIG1hcmtkb3duIGZvcm1hdClcclxuXHRcdFx0XHRcdGNvbnN0IGxpbmtFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnYScsIHtcclxuXHRcdFx0XHRcdFx0Y2xzOiAnaW50ZXJuYWwtbGluaycsXHJcblx0XHRcdFx0XHRcdGhyZWY6IGxpbmtVcmxcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0bGlua0VsLnRleHRDb250ZW50ID0gbGlua1RleHQ7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGxpbmtFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbmV3TGVhZiA9IGUubWV0YUtleSB8fCBlLmN0cmxLZXk7XHJcblx0XHRcdFx0XHRcdHZvaWQgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChsaW5rVXJsLCBzb3VyY2VQYXRoLCBuZXdMZWFmKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0bGFzdEluZGV4ID0gaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIEFkZCByZW1haW5pbmcgdGV4dFxyXG5cdFx0aWYgKGxhc3RJbmRleCA8IHZhbHVlLmxlbmd0aCkge1xyXG5cdFx0XHRjb250YWluZXIuYXBwZW5kVGV4dCh2YWx1ZS5zdWJzdHJpbmcobGFzdEluZGV4KSk7XHJcblx0XHR9IGVsc2UgaWYgKG1hdGNoZXMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdC8vIE5vIGxpbmtzIGZvdW5kLCBqdXN0IGFkZCB0aGUgdGV4dCBhcyBwbGFpbiB0ZXh0XHJcblx0XHRcdGNvbnRhaW5lci5hcHBlbmRUZXh0KHZhbHVlKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcblxyXG4iLCAiLyoqXG4gKiBCdWxrIE9wZXJhdGlvbnMgVG9vbGJhclxuICogVG9vbGJhciB0aGF0IGFwcGVhcnMgd2hlbiBpdGVtcyBhcmUgc2VsZWN0ZWRcbiAqL1xuXG5pbXBvcnQgeyBBcHAsIHNldEljb24gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBCYXNlc0NNU1BsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB0eXBlIHsgQ01TU2V0dGluZ3MgfSBmcm9tICcuLi9zaGFyZWQvZGF0YS10cmFuc2Zvcm0nO1xuaW1wb3J0IHsgVG9vbGJhckFjdGlvbnMgfSBmcm9tICcuLi91dGlscy90b29sYmFyLWFjdGlvbnMnO1xuXG5leHBvcnQgY2xhc3MgQnVsa1Rvb2xiYXIge1xuXHRwcml2YXRlIHRvb2xiYXJFbDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBjb3VudEVsOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIHNlbGVjdEFsbENhbGxiYWNrPzogKCkgPT4gdm9pZDtcblx0cHJpdmF0ZSByZXNpemVPYnNlcnZlcjogUmVzaXplT2JzZXJ2ZXIgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBzZXR0aW5ncz86IENNU1NldHRpbmdzO1xuXHRwcml2YXRlIGFjdGlvbnM6IFRvb2xiYXJBY3Rpb25zO1xuXHRwcml2YXRlIHRpbWVvdXRJZHM6IG51bWJlcltdID0gW107XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cHJpdmF0ZSBhcHA6IEFwcCxcblx0XHRwcml2YXRlIHBsdWdpbjogQmFzZXNDTVNQbHVnaW4sXG5cdFx0cHJpdmF0ZSBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuXHRcdHByaXZhdGUgZ2V0U2VsZWN0ZWRGaWxlczogKCkgPT4gc3RyaW5nW10sXG5cdFx0cHJpdmF0ZSBjbGVhclNlbGVjdGlvbjogKCkgPT4gdm9pZCxcblx0XHRwcml2YXRlIHJlZnJlc2hWaWV3OiAoKSA9PiB2b2lkLFxuXHRcdHNlbGVjdEFsbENhbGxiYWNrPzogKCkgPT4gdm9pZCxcblx0XHRzZXR0aW5ncz86IENNU1NldHRpbmdzXG5cdCkge1xuXHRcdHRoaXMuc2VsZWN0QWxsQ2FsbGJhY2sgPSBzZWxlY3RBbGxDYWxsYmFjaztcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG5cdFx0dGhpcy5hY3Rpb25zID0gbmV3IFRvb2xiYXJBY3Rpb25zKFxuXHRcdFx0dGhpcy5hcHAsXG5cdFx0XHR0aGlzLnBsdWdpbixcblx0XHRcdHRoaXMuZ2V0U2VsZWN0ZWRGaWxlcyxcblx0XHRcdHRoaXMuY2xlYXJTZWxlY3Rpb24sXG5cdFx0XHR0aGlzLnJlZnJlc2hWaWV3LFxuXHRcdFx0KCkgPT4gdGhpcy5zaG93KClcblx0XHQpO1xuXHRcdHRoaXMuY3JlYXRlVG9vbGJhcigpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSBzZXR0aW5ncyAoY2FsbGVkIHdoZW4gdmlldyBzZXR0aW5ncyBjaGFuZ2UpXG5cdCAqL1xuXHR1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogQ01TU2V0dGluZ3MpOiB2b2lkIHtcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG5cdH1cblxuXHQvKipcblx0ICogR2V0IHRvb2xiYXIgYWN0aW9ucyAoZm9yIHVzZSBpbiBjb250ZXh0IG1lbnVzKVxuXHQgKi9cblx0Z2V0QWN0aW9ucygpOiBUb29sYmFyQWN0aW9ucyB7XG5cdFx0cmV0dXJuIHRoaXMuYWN0aW9ucztcblx0fVxuXG5cdHByaXZhdGUgY3JlYXRlVG9vbGJhcigpOiB2b2lkIHtcblx0XHQvLyBDcmVhdGUgdG9vbGJhciBlbGVtZW50IG1hdGNoaW5nIEJhc2VzIHN0cnVjdHVyZVxuXHRcdHRoaXMudG9vbGJhckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0dGhpcy50b29sYmFyRWwuY2xhc3NOYW1lID0gJ2Jhc2VzLXRvb2xiYXIgYmFzZXMtY21zLWJ1bGstdG9vbGJhciBiYXNlcy1jbXMtYnVsay10b29sYmFyLWhpZGRlbic7XG5cdFx0Ly8gU3RvcmUgcmVmZXJlbmNlIHRvIHRoaXMgaW5zdGFuY2Ugb24gdGhlIGVsZW1lbnQgZm9yIGNsZWFudXAgY2hlY2tzXG5cdFx0KHRoaXMudG9vbGJhckVsIGFzIHVua25vd24gYXMgeyBfX2J1bGtUb29sYmFySW5zdGFuY2U/OiBCdWxrVG9vbGJhciB9KS5fX2J1bGtUb29sYmFySW5zdGFuY2UgPSB0aGlzO1xuXG5cdFx0Ly8gQ3JlYXRlIHRoZSB0b29sYmFyIGNvbnRlbnRcblx0XHR0aGlzLmNyZWF0ZVRvb2xiYXJDb250ZW50KCk7XG5cblx0XHQvLyBUcnkgdG8gZmluZCBhbmQgcG9zaXRpb24gdGhlIHRvb2xiYXIgLSB1c2UgYSBzbWFsbCBkZWxheSB0byBlbnN1cmUgRE9NIGlzIHJlYWR5XG5cdFx0dGhpcy5wb3NpdGlvblRvb2xiYXIoKTtcblx0XHRcblx0XHQvLyBBbHNvIHRyeSBwb3NpdGlvbmluZyBhZnRlciBhIHNob3J0IGRlbGF5IGluIGNhc2UgRE9NIGlzbid0IHJlYWR5IHlldFxuXHRcdGNvbnN0IHRpbWVvdXRJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHRoaXMucG9zaXRpb25Ub29sYmFyKCksIDEwMCk7XG5cdFx0dGhpcy50aW1lb3V0SWRzLnB1c2godGltZW91dElkKTtcblx0fVxuXG5cdHByaXZhdGUgcG9zaXRpb25Ub29sYmFyKCk6IHZvaWQge1xuXHRcdGlmICghdGhpcy50b29sYmFyRWwpIHJldHVybjtcblxuXHRcdC8vIEZpbmQgdGhlIGJhc2VzLWhlYWRlciAtIGl0IHNob3VsZCBiZSBhIHNpYmxpbmcgb2Ygb3VyIGNvbnRhaW5lclxuXHRcdC8vIFRoZSBzdHJ1Y3R1cmUgc2hvdWxkIGJlOiBiYXNlcy1oZWFkZXIsIHRoZW4gYnVsayB0b29sYmFyLCB0aGVuIGJhc2VzLXZpZXcgYmFzZXMtY21zIGJhc2VzLWNtcy1jb250YWluZXJcblx0XHRsZXQgYmFzZXNIZWFkZXIgPSB0aGlzLmNvbnRhaW5lci5jbG9zZXN0KCcuYmFzZXMtaGVhZGVyJyk7XG5cdFx0aWYgKCFiYXNlc0hlYWRlcikge1xuXHRcdFx0Ly8gVHJ5IGZpbmRpbmcgaXQgaW4gdGhlIHBhcmVudCBoaWVyYXJjaHlcblx0XHRcdGxldCBwYXJlbnQgPSB0aGlzLmNvbnRhaW5lci5wYXJlbnRFbGVtZW50O1xuXHRcdFx0d2hpbGUgKHBhcmVudCAmJiAhYmFzZXNIZWFkZXIpIHtcblx0XHRcdFx0aWYgKHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2Jhc2VzLWhlYWRlcicpKSB7XG5cdFx0XHRcdFx0YmFzZXNIZWFkZXIgPSBwYXJlbnQ7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdFx0cGFyZW50ID0gcGFyZW50LnBhcmVudEVsZW1lbnQ7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmICghYmFzZXNIZWFkZXIpIHtcblx0XHRcdC8vIFRyeSBxdWVyeWluZyBmcm9tIGRvY3VtZW50IC0gbG9vayBmb3Igb25lIHRoYXQgY29udGFpbnMgb3VyIGNvbnRhaW5lclxuXHRcdFx0Y29uc3QgYWxsSGVhZGVycyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJhc2VzLWhlYWRlcicpKTtcblx0XHRcdGZvciAoY29uc3QgaGVhZGVyIG9mIGFsbEhlYWRlcnMpIHtcblx0XHRcdFx0aWYgKGhlYWRlci5jb250YWlucyh0aGlzLmNvbnRhaW5lcikpIHtcblx0XHRcdFx0XHRiYXNlc0hlYWRlciA9IGhlYWRlcjtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHQvLyBGaW5kIHRoZSB2aWV3LWNvbnRlbnQgY29udGFpbmVyIHRoYXQgc2hvdWxkIGNvbnRhaW4gYm90aCBiYXNlcy1oZWFkZXIgYW5kIG91ciBjb250YWluZXJcblx0XHQvLyBUaGUgc3RydWN0dXJlIHNob3VsZCBiZTogdmlldy1jb250ZW50ID4gYmFzZXMtaGVhZGVyID4gYmFzZXMtdG9vbGJhciwgdGhlbiBvdXIgYnVsayB0b29sYmFyLCB0aGVuIGJhc2VzLXZpZXdcblx0XHRjb25zdCB2aWV3Q29udGVudCA9IHRoaXMuY29udGFpbmVyLmNsb3Nlc3QoJy52aWV3LWNvbnRlbnQnKTtcblx0XHRcblx0XHRpZiAodmlld0NvbnRlbnQpIHtcblx0XHRcdC8vIFBvc2l0aW9uIHRvb2xiYXIgYXMgYSBzaWJsaW5nIG9mIGJhc2VzLWhlYWRlciwgcmlnaHQgYWZ0ZXIgaXQsIGJlZm9yZSBiYXNlcy12aWV3IGNvbnRhaW5lclxuXHRcdFx0Ly8gRmluZCB3aGVyZSB0byBpbnNlcnQgLSBzaG91bGQgYmUgYWZ0ZXIgYmFzZXMtaGVhZGVyLCBiZWZvcmUgb3VyIGNvbnRhaW5lclxuXHRcdFx0aWYgKHRoaXMudG9vbGJhckVsLnBhcmVudEVsZW1lbnQgIT09IHZpZXdDb250ZW50KSB7XG5cdFx0XHRcdGlmICh0aGlzLnRvb2xiYXJFbC5wYXJlbnRFbGVtZW50KSB7XG5cdFx0XHRcdFx0dGhpcy50b29sYmFyRWwucmVtb3ZlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gSW5zZXJ0IGFmdGVyIGJhc2VzLWhlYWRlciwgYmVmb3JlIHRoZSBiYXNlcy12aWV3IGNvbnRhaW5lclxuXHRcdFx0XHR2aWV3Q29udGVudC5pbnNlcnRCZWZvcmUodGhpcy50b29sYmFyRWwsIHRoaXMuY29udGFpbmVyKTtcblx0XHRcdH0gZWxzZSBpZiAodGhpcy50b29sYmFyRWwubmV4dFNpYmxpbmcgIT09IHRoaXMuY29udGFpbmVyKSB7XG5cdFx0XHRcdC8vIFJlcG9zaXRpb24gaWYgaXQncyBub3QgcmlnaHQgYmVmb3JlIHRoZSBjb250YWluZXJcblx0XHRcdFx0aWYgKHRoaXMudG9vbGJhckVsLnBhcmVudEVsZW1lbnQpIHtcblx0XHRcdFx0XHR0aGlzLnRvb2xiYXJFbC5yZW1vdmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR2aWV3Q29udGVudC5pbnNlcnRCZWZvcmUodGhpcy50b29sYmFyRWwsIHRoaXMuY29udGFpbmVyKTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGJhc2VzSGVhZGVyICYmIGJhc2VzSGVhZGVyLnBhcmVudEVsZW1lbnQpIHtcblx0XHRcdC8vIEZhbGxiYWNrOiBpbnNlcnQgYWZ0ZXIgYmFzZXMtaGVhZGVyIGluIGl0cyBwYXJlbnRcblx0XHRcdGlmICh0aGlzLnRvb2xiYXJFbC5wYXJlbnRFbGVtZW50ICE9PSBiYXNlc0hlYWRlci5wYXJlbnRFbGVtZW50KSB7XG5cdFx0XHRcdGlmICh0aGlzLnRvb2xiYXJFbC5wYXJlbnRFbGVtZW50KSB7XG5cdFx0XHRcdFx0dGhpcy50b29sYmFyRWwucmVtb3ZlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0YmFzZXNIZWFkZXIucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy50b29sYmFyRWwsIGJhc2VzSGVhZGVyLm5leHRTaWJsaW5nKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gTGFzdCByZXNvcnQ6IGluc2VydCBiZWZvcmUgY29udGFpbmVyXG5cdFx0XHRjb25zdCBwYXJlbnQgPSB0aGlzLmNvbnRhaW5lci5wYXJlbnRFbGVtZW50O1xuXHRcdFx0aWYgKHBhcmVudCkge1xuXHRcdFx0XHRpZiAodGhpcy50b29sYmFyRWwucGFyZW50RWxlbWVudCAhPT0gcGFyZW50IHx8IHRoaXMudG9vbGJhckVsLm5leHRTaWJsaW5nICE9PSB0aGlzLmNvbnRhaW5lcikge1xuXHRcdFx0XHRcdGlmICh0aGlzLnRvb2xiYXJFbC5wYXJlbnRFbGVtZW50KSB7XG5cdFx0XHRcdFx0XHR0aGlzLnRvb2xiYXJFbC5yZW1vdmUoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cGFyZW50Lmluc2VydEJlZm9yZSh0aGlzLnRvb2xiYXJFbCwgdGhpcy5jb250YWluZXIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBjcmVhdGVUb29sYmFyQ29udGVudCgpOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMudG9vbGJhckVsKSByZXR1cm47XG5cdFx0XG5cdFx0Ly8gTGVmdCBzaWRlIGNvbnRhaW5lciAoU2VsZWN0IGFsbCwgQ2xlYXIgc2VsZWN0aW9uLCBDb3VudClcblx0XHRjb25zdCBsZWZ0Q29udGFpbmVyID0gdGhpcy50b29sYmFyRWwuY3JlYXRlRGl2KCdiYXNlcy1jbXMtYnVsay10b29sYmFyLWxlZnQnKTtcblx0XHRcblx0XHQvLyBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIEJhc2VzLXN0eWxlIGljb24rdGV4dCBidXR0b25cblx0XHRjb25zdCBjcmVhdGVCYXNlc0J1dHRvbiA9IChpY29uTmFtZTogc3RyaW5nLCB0ZXh0OiBzdHJpbmcsIG9uQ2xpY2s6ICgpID0+IHZvaWQsIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGlzRGVzdHJ1Y3RpdmUgPSBmYWxzZSk6IEhUTUxFbGVtZW50ID0+IHtcblx0XHRcdGNvbnN0IHRvb2xiYXJJdGVtID0gY29udGFpbmVyLmNyZWF0ZURpdignYmFzZXMtdG9vbGJhci1pdGVtJyk7XG5cdFx0XHRjb25zdCBidXR0b24gPSB0b29sYmFySXRlbS5jcmVhdGVEaXYoJ3RleHQtaWNvbi1idXR0b24nKTtcblx0XHRcdGlmIChpc0Rlc3RydWN0aXZlKSB7XG5cdFx0XHRcdGJ1dHRvbi5hZGRDbGFzcygnZGVzdHJ1Y3RpdmUnKTtcblx0XHRcdH1cblx0XHRcdGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcblx0XHRcdFxuXHRcdFx0Y29uc3QgaWNvbkVsID0gYnV0dG9uLmNyZWF0ZVNwYW4oJ3RleHQtYnV0dG9uLWljb24nKTtcblx0XHRcdHNldEljb24oaWNvbkVsLCBpY29uTmFtZSk7XG5cdFx0XHRcblx0XHRcdGNvbnN0IHRleHRFbCA9IGJ1dHRvbi5jcmVhdGVTcGFuKCd0ZXh0LWJ1dHRvbi1sYWJlbCcpO1xuXHRcdFx0dGV4dEVsLnNldFRleHQodGV4dCk7XG5cdFx0XHRcblx0XHRcdGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2spO1xuXHRcdFx0cmV0dXJuIGJ1dHRvbjtcblx0XHR9O1xuXG5cdFx0Ly8gTGVmdCBzaWRlOiBTZWxlY3QgYWxsXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyU2VsZWN0QWxsKSB7XG5cdFx0XHRjcmVhdGVCYXNlc0J1dHRvbignY29weS1jaGVjaycsICdTZWxlY3QgYWxsJywgKCkgPT4gdGhpcy5oYW5kbGVTZWxlY3RBbGwoKSwgbGVmdENvbnRhaW5lcik7XG5cdFx0fVxuXG5cdFx0Ly8gTGVmdCBzaWRlOiBDbGVhclxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhckNsZWFyKSB7XG5cdFx0XHRjcmVhdGVCYXNlc0J1dHRvbignc3F1YXJlLXgnLCAnQ2xlYXInLCAoKSA9PiB0aGlzLmNsZWFyU2VsZWN0aW9uKCksIGxlZnRDb250YWluZXIpO1xuXHRcdH1cblxuXHRcdC8vIExlZnQgc2lkZTogU2VsZWN0ZWQgY291bnQgKG5vdCBhIGJ1dHRvbiwganVzdCB0ZXh0KVxuXHRcdGNvbnN0IGNvdW50SXRlbSA9IGxlZnRDb250YWluZXIuY3JlYXRlRGl2KCdiYXNlcy10b29sYmFyLWl0ZW0gYmFzZXMtY21zLXNlbGVjdGVkLWNvdW50Jyk7XG5cdFx0dGhpcy5jb3VudEVsID0gY291bnRJdGVtLmNyZWF0ZVNwYW4oJ3RleHQtYnV0dG9uLWxhYmVsJyk7XG5cdFx0dGhpcy5jb3VudEVsLnNldFRleHQoJzAgc2VsZWN0ZWQnKTtcblxuXHRcdC8vIFJpZ2h0IHNpZGUgY29udGFpbmVyIChhbGwgYWN0aW9uIGJ1dHRvbnMpXG5cdFx0Y29uc3QgcmlnaHRDb250YWluZXIgPSB0aGlzLnRvb2xiYXJFbC5jcmVhdGVEaXYoJ2Jhc2VzLWNtcy1idWxrLXRvb2xiYXItcmlnaHQnKTtcblxuXHRcdC8vIFJpZ2h0IHNpZGU6IFB1Ymxpc2hcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJQdWJsaXNoKSB7XG5cdFx0XHRjcmVhdGVCYXNlc0J1dHRvbignYm9vay1jaGVjaycsICdQdWJsaXNoJywgKCkgPT4ge1xuXHRcdFx0XHR2b2lkIHRoaXMuYWN0aW9ucy5oYW5kbGVQdWJsaXNoKHRoaXMuc2V0dGluZ3MpO1xuXHRcdFx0fSwgcmlnaHRDb250YWluZXIpO1xuXHRcdH1cblxuXHRcdC8vIFJpZ2h0IHNpZGU6IERyYWZ0XG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyRHJhZnQpIHtcblx0XHRcdGNyZWF0ZUJhc2VzQnV0dG9uKCdib29rLWRhc2hlZCcsICdEcmFmdCcsICgpID0+IHtcblx0XHRcdFx0dm9pZCB0aGlzLmFjdGlvbnMuaGFuZGxlU2V0RHJhZnQodGhpcy5zZXR0aW5ncyk7XG5cdFx0XHR9LCByaWdodENvbnRhaW5lcik7XG5cdFx0fVxuXG5cdFx0Ly8gUmlnaHQgc2lkZTogVGFnc1xuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhclRhZ3MpIHtcblx0XHRcdGNyZWF0ZUJhc2VzQnV0dG9uKCd0YWdzJywgJ1RhZ3MnLCAoKSA9PiB0aGlzLmFjdGlvbnMuaGFuZGxlTWFuYWdlVGFncygpLCByaWdodENvbnRhaW5lcik7XG5cdFx0fVxuXG5cdFx0Ly8gUmlnaHQgc2lkZTogU2V0XG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyU2V0KSB7XG5cdFx0XHRjcmVhdGVCYXNlc0J1dHRvbignbGlzdC1jaGVjaycsICdTZXQnLCAoKSA9PiB0aGlzLmFjdGlvbnMuaGFuZGxlU2V0UHJvcGVydHkoKSwgcmlnaHRDb250YWluZXIpO1xuXHRcdH1cblxuXHRcdC8vIFJpZ2h0IHNpZGU6IFJlbW92ZVxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhclJlbW92ZSkge1xuXHRcdFx0Y3JlYXRlQmFzZXNCdXR0b24oJ2xpc3QteCcsICdSZW1vdmUnLCAoKSA9PiB0aGlzLmFjdGlvbnMuaGFuZGxlUmVtb3ZlUHJvcGVydHkoKSwgcmlnaHRDb250YWluZXIpO1xuXHRcdH1cblxuXHRcdC8vIFJpZ2h0IHNpZGU6IERlbGV0ZVxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhckRlbGV0ZSkge1xuXHRcdFx0Y3JlYXRlQmFzZXNCdXR0b24oJ3RyYXNoLTInLCAnRGVsZXRlJywgKCkgPT4ge1xuXHRcdFx0XHR2b2lkIHRoaXMuYWN0aW9ucy5oYW5kbGVEZWxldGUoKTtcblx0XHRcdH0sIHJpZ2h0Q29udGFpbmVyLCB0cnVlKTtcblx0XHR9XG5cblx0XHQvLyBTZXQgdXAgcmVzcG9uc2l2ZSBiZWhhdmlvciAtIGRldGVjdCBjb2xsYXBzZWQgc3RhdGVcblx0XHR0aGlzLnNldHVwUmVzcG9uc2l2ZUJlaGF2aW9yKCk7XG5cdH1cblxuXHRwcml2YXRlIHNldHVwUmVzcG9uc2l2ZUJlaGF2aW9yKCk6IHZvaWQge1xuXHRcdGlmICghdGhpcy50b29sYmFyRWwpIHJldHVybjtcblxuXHRcdC8vIENoZWNrIGluaXRpYWwgc3RhdGUgYWZ0ZXIgYSBzaG9ydCBkZWxheSB0byBlbnN1cmUgdG9vbGJhciBpcyByZW5kZXJlZFxuXHRcdGNvbnN0IHRpbWVvdXRJZDEgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHR0aGlzLnVwZGF0ZUNvbGxhcHNlZFN0YXRlKCk7XG5cdFx0fSwgMTAwKTtcblx0XHR0aGlzLnRpbWVvdXRJZHMucHVzaCh0aW1lb3V0SWQxKTtcblxuXHRcdC8vIE9ic2VydmUgdG9vbGJhciB3aWR0aCBjaGFuZ2VzIChtb3JlIGFjY3VyYXRlIHRoYW4gY29udGFpbmVyKVxuXHRcdGlmICh0aGlzLnRvb2xiYXJFbCkge1xuXHRcdFx0dGhpcy5yZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoKSA9PiB7XG5cdFx0XHRcdHRoaXMudXBkYXRlQ29sbGFwc2VkU3RhdGUoKTtcblx0XHRcdH0pO1xuXHRcdFx0dGhpcy5yZXNpemVPYnNlcnZlci5vYnNlcnZlKHRoaXMudG9vbGJhckVsKTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gQWxzbyBvYnNlcnZlIGNvbnRhaW5lciBhcyBmYWxsYmFja1xuXHRcdGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyO1xuXHRcdGlmIChjb250YWluZXIpIHtcblx0XHRcdC8vIFVzZSBhIHNlcGFyYXRlIG9ic2VydmVyIGZvciBjb250YWluZXIgdG8gY2F0Y2ggd2luZG93IHJlc2l6ZVxuXHRcdFx0Y29uc3QgY29udGFpbmVyT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKCkgPT4ge1xuXHRcdFx0XHQvLyBTbWFsbCBkZWxheSB0byBsZXQgdG9vbGJhciByZXNpemUgZmlyc3Rcblx0XHRcdFx0Y29uc3QgdGltZW91dElkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMudXBkYXRlQ29sbGFwc2VkU3RhdGUoKTtcblx0XHRcdFx0fSwgMTApO1xuXHRcdFx0XHR0aGlzLnRpbWVvdXRJZHMucHVzaCh0aW1lb3V0SWQpO1xuXHRcdFx0fSk7XG5cdFx0XHRjb250YWluZXJPYnNlcnZlci5vYnNlcnZlKGNvbnRhaW5lcik7XG5cdFx0XHRcblx0XHRcdC8vIFN0b3JlIGZvciBjbGVhbnVwXG5cdFx0XHQodGhpcyBhcyB1bmtub3duIGFzIHsgY29udGFpbmVyT2JzZXJ2ZXI/OiBSZXNpemVPYnNlcnZlciB9KS5jb250YWluZXJPYnNlcnZlciA9IGNvbnRhaW5lck9ic2VydmVyO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgdXBkYXRlQ29sbGFwc2VkU3RhdGUoKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLnRvb2xiYXJFbCkgcmV0dXJuO1xuXG5cdFx0Ly8gQ2hlY2sgaWYgdG9vbGJhciBpdHNlbGYgaXMgbmFycm93IChjb2xsYXBzZWQpXG5cdFx0Ly8gVXNlIHRoZSB0b29sYmFyJ3MgYWN0dWFsIHdpZHRoLCBub3QgdGhlIGNvbnRhaW5lclxuXHRcdGNvbnN0IHRvb2xiYXJXaWR0aCA9IHRoaXMudG9vbGJhckVsLm9mZnNldFdpZHRoO1xuXHRcdGNvbnN0IGlzQ29sbGFwc2VkID0gdG9vbGJhcldpZHRoIDwgNjgwOyAvLyBUaHJlc2hvbGQgZm9yIGNvbGxhcHNpbmdcblxuXHRcdGlmIChpc0NvbGxhcHNlZCkge1xuXHRcdFx0dGhpcy50b29sYmFyRWwuYWRkQ2xhc3MoJ2NvbGxhcHNlZCcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnRvb2xiYXJFbC5yZW1vdmVDbGFzcygnY29sbGFwc2VkJyk7XG5cdFx0fVxuXHR9XG5cblx0dXBkYXRlQ291bnQoY291bnQ6IG51bWJlcik6IHZvaWQge1xuXHRcdGlmICh0aGlzLmNvdW50RWwpIHtcblx0XHRcdHRoaXMuY291bnRFbC5zZXRUZXh0KGAke2NvdW50fSBzZWxlY3RlZGApO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgaGFuZGxlU2VsZWN0QWxsKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLnNlbGVjdEFsbENhbGxiYWNrKSB7XG5cdFx0XHR0aGlzLnNlbGVjdEFsbENhbGxiYWNrKCk7XG5cdFx0fVxuXHR9XG5cblx0c2hvdygpOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMudG9vbGJhckVsKSB7XG5cdFx0XHRjb25zb2xlLndhcm4oJ1tCYXNlcyBDTVNdIFRvb2xiYXIgZWxlbWVudCBub3QgZm91bmQsIHJlY3JlYXRpbmcuLi4nKTtcblx0XHRcdHRoaXMuY3JlYXRlVG9vbGJhcigpO1xuXHRcdH1cblx0XHRcblx0XHRpZiAodGhpcy50b29sYmFyRWwpIHtcblx0XHRcdC8vIE1ha2Ugc3VyZSBpdCdzIHBvc2l0aW9uZWQgY29ycmVjdGx5IGZpcnN0XG5cdFx0XHR0aGlzLnBvc2l0aW9uVG9vbGJhcigpO1xuXHRcdFx0XG5cdFx0XHQvLyBFbnN1cmUgaXQncyBpbiB0aGUgRE9NXG5cdFx0XHRpZiAoIXRoaXMudG9vbGJhckVsLnBhcmVudEVsZW1lbnQpIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKCdbQmFzZXMgQ01TXSBUb29sYmFyIG5vdCBpbiBET00sIHJlcG9zaXRpb25pbmcuLi4nKTtcblx0XHRcdFx0dGhpcy5wb3NpdGlvblRvb2xiYXIoKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gU2hvdyBpdCB3aXRoIGZsZXggZGlzcGxheVxuXHRcdFx0dGhpcy50b29sYmFyRWwucmVtb3ZlQ2xhc3MoJ2Jhc2VzLWNtcy1idWxrLXRvb2xiYXItaGlkZGVuJyk7XG5cdFx0XHR0aGlzLnRvb2xiYXJFbC5hZGRDbGFzcygnYmFzZXMtY21zLWJ1bGstdG9vbGJhci12aXNpYmxlJyk7XG5cdFx0XHRcblx0XHRcdC8vIEZvcmNlIHJlZmxvdyB0byBlbnN1cmUgdHJhbnNpdGlvbiB3b3Jrc1xuXHRcdFx0dm9pZCB0aGlzLnRvb2xiYXJFbC5vZmZzZXRIZWlnaHQ7XG5cdFx0XHRcblx0XHRcdC8vIEFuaW1hdGUgaW4gLSB1c2Ugc2V0VGltZW91dCBpbnN0ZWFkIG9mIHJlcXVlc3RBbmltYXRpb25GcmFtZSBmb3IgbW9yZSByZWxpYWJpbGl0eVxuXHRcdFx0Y29uc3QgdGltZW91dElkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRpZiAodGhpcy50b29sYmFyRWwpIHtcblx0XHRcdFx0XHR0aGlzLnRvb2xiYXJFbC5yZW1vdmVDbGFzcygnYmFzZXMtY21zLWJ1bGstdG9vbGJhci1hbmltYXRpbmctb3V0Jyk7XG5cdFx0XHRcdFx0dGhpcy50b29sYmFyRWwuYWRkQ2xhc3MoJ2Jhc2VzLWNtcy1idWxrLXRvb2xiYXItYW5pbWF0aW5nLWluJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIDEwKTtcblx0XHRcdHRoaXMudGltZW91dElkcy5wdXNoKHRpbWVvdXRJZCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ1tCYXNlcyBDTVNdIEZhaWxlZCB0byBzaG93IHRvb2xiYXIgLSBlbGVtZW50IGlzIG51bGwnKTtcblx0XHR9XG5cdH1cblxuXHRoaWRlKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLnRvb2xiYXJFbCkge1xuXHRcdFx0Ly8gQW5pbWF0ZSBvdXRcblx0XHRcdHRoaXMudG9vbGJhckVsLnJlbW92ZUNsYXNzKCdiYXNlcy1jbXMtYnVsay10b29sYmFyLWFuaW1hdGluZy1pbicpO1xuXHRcdFx0dGhpcy50b29sYmFyRWwuYWRkQ2xhc3MoJ2Jhc2VzLWNtcy1idWxrLXRvb2xiYXItYW5pbWF0aW5nLW91dCcpO1xuXHRcdFx0Ly8gV2FpdCBmb3IgdHJhbnNpdGlvbiB0byBjb21wbGV0ZSBiZWZvcmUgaGlkaW5nXG5cdFx0XHRjb25zdCB0aW1lb3V0SWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdGlmICh0aGlzLnRvb2xiYXJFbCkge1xuXHRcdFx0XHRcdHRoaXMudG9vbGJhckVsLnJlbW92ZUNsYXNzKCdiYXNlcy1jbXMtYnVsay10b29sYmFyLXZpc2libGUnKTtcblx0XHRcdFx0XHR0aGlzLnRvb2xiYXJFbC5hZGRDbGFzcygnYmFzZXMtY21zLWJ1bGstdG9vbGJhci1oaWRkZW4nKTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgMjAwKTtcblx0XHRcdHRoaXMudGltZW91dElkcy5wdXNoKHRpbWVvdXRJZCk7XG5cdFx0fVxuXHR9XG5cblxuXHQvKipcblx0ICogUmVjcmVhdGUgdGhlIHRvb2xiYXIgd2l0aCB1cGRhdGVkIHNldHRpbmdzXG5cdCAqIFByZXNlcnZlcyB2aXNpYmlsaXR5IHN0YXRlIGFuZCBjb3VudFxuXHQgKi9cblx0cmVjcmVhdGUoKTogdm9pZCB7XG5cdFx0Y29uc3Qgd2FzVmlzaWJsZSA9IHRoaXMudG9vbGJhckVsICYmICF0aGlzLnRvb2xiYXJFbC5oYXNDbGFzcygnYmFzZXMtY21zLWJ1bGstdG9vbGJhci1oaWRkZW4nKTtcblx0XHRsZXQgY3VycmVudENvdW50ID0gMDtcblx0XHRcblx0XHQvLyBHZXQgY3VycmVudCBjb3VudCBiZWZvcmUgZGVzdHJveWluZ1xuXHRcdGlmICh0aGlzLmNvdW50RWwgJiYgdGhpcy5jb3VudEVsLnRleHRDb250ZW50KSB7XG5cdFx0XHRjb25zdCBtYXRjaCA9IHRoaXMuY291bnRFbC50ZXh0Q29udGVudC5tYXRjaCgvXFxkKy8pO1xuXHRcdFx0aWYgKG1hdGNoKSB7XG5cdFx0XHRcdGN1cnJlbnRDb3VudCA9IHBhcnNlSW50KG1hdGNoWzBdLCAxMCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdC8vIERlc3Ryb3kgZXhpc3RpbmcgdG9vbGJhclxuXHRcdHRoaXMuZGVzdHJveSgpO1xuXHRcdFxuXHRcdC8vIFJlY3JlYXRlIHRvb2xiYXJcblx0XHR0aGlzLmNyZWF0ZVRvb2xiYXIoKTtcblx0XHRcblx0XHQvLyBSZXN0b3JlIHZpc2liaWxpdHkgYW5kIGNvdW50IGlmIGl0IHdhcyB2aXNpYmxlXG5cdFx0aWYgKHdhc1Zpc2libGUgJiYgdGhpcy50b29sYmFyRWwgJiYgY3VycmVudENvdW50ID4gMCkge1xuXHRcdFx0dGhpcy51cGRhdGVDb3VudChjdXJyZW50Q291bnQpO1xuXHRcdFx0dGhpcy5zaG93KCk7XG5cdFx0fVxuXHR9XG5cblx0ZGVzdHJveSgpOiB2b2lkIHtcblx0XHQvLyBDbGVhciBhbGwgdGltZW91dHNcblx0XHR0aGlzLnRpbWVvdXRJZHMuZm9yRWFjaChpZCA9PiB3aW5kb3cuY2xlYXJUaW1lb3V0KGlkKSk7XG5cdFx0dGhpcy50aW1lb3V0SWRzID0gW107XG5cdFx0XG5cdFx0aWYgKHRoaXMucmVzaXplT2JzZXJ2ZXIpIHtcblx0XHRcdHRoaXMucmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuXHRcdFx0dGhpcy5yZXNpemVPYnNlcnZlciA9IG51bGw7XG5cdFx0fVxuXHRcdC8vIENsZWFuIHVwIGNvbnRhaW5lciBvYnNlcnZlciBpZiBpdCBleGlzdHNcblx0XHRjb25zdCBjb250YWluZXJPYnNlcnZlciA9ICh0aGlzIGFzIHVua25vd24gYXMgeyBjb250YWluZXJPYnNlcnZlcj86IFJlc2l6ZU9ic2VydmVyIH0pLmNvbnRhaW5lck9ic2VydmVyO1xuXHRcdGlmIChjb250YWluZXJPYnNlcnZlcikge1xuXHRcdFx0Y29udGFpbmVyT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuXHRcdFx0KHRoaXMgYXMgdW5rbm93biBhcyB7IGNvbnRhaW5lck9ic2VydmVyPzogUmVzaXplT2JzZXJ2ZXIgfSkuY29udGFpbmVyT2JzZXJ2ZXIgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGlmICh0aGlzLnRvb2xiYXJFbCkge1xuXHRcdFx0dGhpcy50b29sYmFyRWwucmVtb3ZlKCk7XG5cdFx0XHR0aGlzLnRvb2xiYXJFbCA9IG51bGw7XG5cdFx0fVxuXHR9XG59XG5cbiIsICIvKipcclxuICogQnVsayBvcGVyYXRpb24gaGFuZGxlcnNcclxuICogVXBkYXRlZCB0byBzdXBwb3J0IE1EWCBmaWxlcyB2aWEgdW5pZmllZCBmcm9udG1hdHRlciBoZWxwZXJcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IGFkZFByb3BlcnRpZXMsIHJlbW92ZVByb3BlcnRpZXMgfSBmcm9tICcuL2Zyb250bWF0dGVyJztcclxuaW1wb3J0IHsgTmV3UHJvcERhdGEgfSBmcm9tICcuL2Zyb250bWF0dGVyJztcclxuaW1wb3J0IHR5cGUgeyBDTVNTZXR0aW5ncyB9IGZyb20gJy4uL3NoYXJlZC9kYXRhLXRyYW5zZm9ybSc7XHJcbmltcG9ydCB7IGdldEZpbGVGcm9udG1hdHRlciwgcHJvY2Vzc0ZpbGVGcm9udE1hdHRlciB9IGZyb20gJy4vZnJvbnRtYXR0ZXItaGVscGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBCdWxrT3BlcmF0aW9ucyB7XHJcblx0Y29uc3RydWN0b3IocHJpdmF0ZSBhcHA6IEFwcCkge31cclxuXHJcblx0LyoqXHJcblx0ICogU2V0IGRyYWZ0IHN0YXR1cyBmb3IgbXVsdGlwbGUgZmlsZXNcclxuXHQgKiBSZXNwZWN0cyBmaWxlbmFtZSBwcmVmaXggbW9kZSBhbmQgcmV2ZXJzZSBsb2dpYyBzZXR0aW5nc1xyXG5cdCAqL1xyXG5cdGFzeW5jIHNldERyYWZ0KGZpbGVzOiBzdHJpbmdbXSwgZHJhZnQ6IGJvb2xlYW4sIHNldHRpbmdzPzogQ01TU2V0dGluZ3MpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGF3YWl0IHRoaXMuYmF0Y2hQcm9jZXNzRmlsZXMoZmlsZXMsIGFzeW5jIChmaWxlKSA9PiB7XHJcblx0XHRcdC8vIElmIHNldHRpbmdzIHByb3ZpZGVkLCB1c2UgdGhlIHNhbWUgbG9naWMgYXMgaGFuZGxlUHJvcGVydHlUb2dnbGVcclxuXHRcdFx0aWYgKHNldHRpbmdzKSB7XHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdXNpbmcgZmlsZW5hbWUgcHJlZml4IG1vZGVcclxuXHRcdFx0XHRpZiAoc2V0dGluZ3MuZHJhZnRTdGF0dXNVc2VGaWxlbmFtZVByZWZpeCkge1xyXG5cdFx0XHRcdFx0Ly8gQWx3YXlzIHVzZSBmaWxlbmFtZS1iYXNlZCBkZXRlY3Rpb24gd2hlbiB0aGlzIHNldHRpbmcgaXMgZW5hYmxlZFxyXG5cdFx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSBmaWxlLmJhc2VuYW1lOyAvLyBiYXNlbmFtZSBleGNsdWRlcyBleHRlbnNpb25cclxuXHRcdFx0XHRcdGNvbnN0IHN0YXJ0c1dpdGhVbmRlcnNjb3JlID0gZmlsZU5hbWUuc3RhcnRzV2l0aCgnXycpO1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFBhdGggPSBmaWxlLnBhdGg7XHJcblx0XHRcdFx0XHRjb25zdCBwYXRoUGFydHMgPSBjdXJyZW50UGF0aC5zcGxpdCgnLycpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBBcHBseSByZXZlcnNlIGxvZ2ljIGlmIGVuYWJsZWRcclxuXHRcdFx0XHRcdGxldCB0YXJnZXRWYWx1ZSA9IGRyYWZ0O1xyXG5cdFx0XHRcdFx0aWYgKHNldHRpbmdzLmRyYWZ0U3RhdHVzUmV2ZXJzZSkge1xyXG5cdFx0XHRcdFx0XHR0YXJnZXRWYWx1ZSA9ICFkcmFmdDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gVG9nZ2xlIGJhc2VkIG9uIGRlc2lyZWQgc3RhdGU6IGlmIHRhcmdldFZhbHVlIGlzIHRydWUgKGRyYWZ0KSwgZW5zdXJlIHVuZGVyc2NvcmU7IGlmIGZhbHNlIChwdWJsaXNoZWQpLCByZW1vdmUgaXRcclxuXHRcdFx0XHRcdGlmICh0YXJnZXRWYWx1ZSA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRcdFx0XHQvLyBTZXR0aW5nIHRvIGRyYWZ0IC0gYWRkIHVuZGVyc2NvcmUgaWYgbm90IHByZXNlbnRcclxuXHRcdFx0XHRcdFx0aWYgKCFzdGFydHNXaXRoVW5kZXJzY29yZSkge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG5ld05hbWUgPSBgXyR7ZmlsZU5hbWV9JHtmaWxlLmV4dGVuc2lvbiA/IGAuJHtmaWxlLmV4dGVuc2lvbn1gIDogJyd9YDtcclxuXHRcdFx0XHRcdFx0XHRwYXRoUGFydHNbcGF0aFBhcnRzLmxlbmd0aCAtIDFdID0gbmV3TmFtZTtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBuZXdQYXRoID0gcGF0aFBhcnRzLmpvaW4oJy8nKTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGZpbGUsIG5ld1BhdGgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHQvLyBTZXR0aW5nIHRvIHB1Ymxpc2hlZCAtIHJlbW92ZSB1bmRlcnNjb3JlIGlmIHByZXNlbnRcclxuXHRcdFx0XHRcdFx0aWYgKHN0YXJ0c1dpdGhVbmRlcnNjb3JlKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbmV3TmFtZSA9IGZpbGVOYW1lLnN1YnN0cmluZygxKSArIChmaWxlLmV4dGVuc2lvbiA/IGAuJHtmaWxlLmV4dGVuc2lvbn1gIDogJycpO1xyXG5cdFx0XHRcdFx0XHRcdHBhdGhQYXJ0c1twYXRoUGFydHMubGVuZ3RoIC0gMV0gPSBuZXdOYW1lO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG5ld1BhdGggPSBwYXRoUGFydHMuam9pbignLycpO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoZmlsZSwgbmV3UGF0aCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gVXNlIHByb3BlcnR5LWJhc2VkIGRldGVjdGlvbiAoZnJvbnRtYXR0ZXIpXHJcblx0XHRcdFx0XHRjb25zdCBjbGVhbkNvbmZpZ1Byb3BlcnR5ID0gc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eSAmJiBzZXR0aW5ncy5kcmFmdFN0YXR1c1Byb3BlcnR5LnRyaW0oKVxyXG5cdFx0XHRcdFx0XHQ/IChzZXR0aW5ncy5kcmFmdFN0YXR1c1Byb3BlcnR5LnN0YXJ0c1dpdGgoJ25vdGUuJykgXHJcblx0XHRcdFx0XHRcdFx0PyBzZXR0aW5ncy5kcmFmdFN0YXR1c1Byb3BlcnR5LnN1YnN0cmluZyg1KSBcclxuXHRcdFx0XHRcdFx0XHQ6IHNldHRpbmdzLmRyYWZ0U3RhdHVzUHJvcGVydHkpXHJcblx0XHRcdFx0XHRcdDogJ2RyYWZ0JztcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gQXBwbHkgcmV2ZXJzZSBsb2dpYyBpZiBlbmFibGVkXHJcblx0XHRcdFx0XHRsZXQgdGFyZ2V0VmFsdWUgPSBkcmFmdDtcclxuXHRcdFx0XHRcdGlmIChzZXR0aW5ncy5kcmFmdFN0YXR1c1JldmVyc2UpIHtcclxuXHRcdFx0XHRcdFx0dGFyZ2V0VmFsdWUgPSAhZHJhZnQ7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGF3YWl0IHByb2Nlc3NGaWxlRnJvbnRNYXR0ZXIodGhpcy5hcHAsIGZpbGUsIChmcm9udG1hdHRlcikgPT4ge1xyXG5cdFx0XHRcdFx0XHRmcm9udG1hdHRlcltjbGVhbkNvbmZpZ1Byb3BlcnR5XSA9IHRhcmdldFZhbHVlO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIEZhbGxiYWNrOiB1c2UgZGVmYXVsdCBiZWhhdmlvciAoc2V0IGRyYWZ0IHByb3BlcnR5KVxyXG5cdFx0XHRcdGF3YWl0IHByb2Nlc3NGaWxlRnJvbnRNYXR0ZXIodGhpcy5hcHAsIGZpbGUsIChmcm9udG1hdHRlcikgPT4ge1xyXG5cdFx0XHRcdFx0ZnJvbnRtYXR0ZXIuZHJhZnQgPSBkcmFmdDtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IE5vdGljZShgU2V0ICR7ZmlsZXMubGVuZ3RofSBmaWxlJHtmaWxlcy5sZW5ndGggIT09IDEgPyAncycgOiAnJ30gdG8gJHtkcmFmdCA/ICdkcmFmdCcgOiAncHVibGlzaGVkJ31gKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEFkZCB0YWdzIHRvIG11bHRpcGxlIGZpbGVzXHJcblx0ICovXHJcblx0YXN5bmMgYWRkVGFncyhmaWxlczogc3RyaW5nW10sIHRhZ3M6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRjb25zdCBwcm9wcyA9IG5ldyBNYXA8c3RyaW5nLCBOZXdQcm9wRGF0YT4oKTtcclxuXHRcdHByb3BzLnNldCgndGFncycsIHtcclxuXHRcdFx0dHlwZTogJ3RhZ3MnLFxyXG5cdFx0XHRkYXRhOiB0YWdzLFxyXG5cdFx0XHRvdmVyd3JpdGU6IGZhbHNlLFxyXG5cdFx0XHRkZWxpbWl0ZXI6ICcsJyxcclxuXHRcdH0pO1xyXG5cclxuXHRcdGF3YWl0IHRoaXMuYmF0Y2hQcm9jZXNzRmlsZXMoZmlsZXMsIGFzeW5jIChmaWxlKSA9PiB7XHJcblx0XHRcdGF3YWl0IGFkZFByb3BlcnRpZXModGhpcy5hcHAsIGZpbGUsIHByb3BzLCBmYWxzZSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgTm90aWNlKGBBZGRlZCB0YWdzIHRvICR7ZmlsZXMubGVuZ3RofSBmaWxlJHtmaWxlcy5sZW5ndGggIT09IDEgPyAncycgOiAnJ31gKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbW92ZSB0YWdzIGZyb20gbXVsdGlwbGUgZmlsZXNcclxuXHQgKi9cclxuXHRhc3luYyByZW1vdmVUYWdzKGZpbGVzOiBzdHJpbmdbXSwgdGFnc1RvUmVtb3ZlOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0YXdhaXQgdGhpcy5iYXRjaFByb2Nlc3NGaWxlcyhmaWxlcywgYXN5bmMgKGZpbGUpID0+IHtcclxuXHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBhd2FpdCBnZXRGaWxlRnJvbnRtYXR0ZXIodGhpcy5hcHAsIGZpbGUpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGZyb250bWF0dGVyPy50YWdzKSB7XHJcblx0XHRcdFx0Y29uc3QgZm1UYWdzID0gZnJvbnRtYXR0ZXIudGFncyBhcyBzdHJpbmcgfCBzdHJpbmdbXTtcclxuXHRcdFx0XHRjb25zdCBjdXJyZW50VGFncyA9IEFycmF5LmlzQXJyYXkoZm1UYWdzKSBcclxuXHRcdFx0XHRcdD8gZm1UYWdzIFxyXG5cdFx0XHRcdFx0OiBbZm1UYWdzXTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zdCB1cGRhdGVkVGFncyA9IGN1cnJlbnRUYWdzLmZpbHRlcigodGFnOiBzdHJpbmcpID0+IFxyXG5cdFx0XHRcdFx0IXRhZ3NUb1JlbW92ZS5pbmNsdWRlcyh0YWcpXHJcblx0XHRcdFx0KTtcclxuXHJcblx0XHRcdFx0YXdhaXQgcHJvY2Vzc0ZpbGVGcm9udE1hdHRlcih0aGlzLmFwcCwgZmlsZSwgKGZtKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAodXBkYXRlZFRhZ3MubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0XHRmbS50YWdzID0gdXBkYXRlZFRhZ3M7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRmbS50YWdzID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgTm90aWNlKGBSZW1vdmVkIHRhZ3MgZnJvbSAke2ZpbGVzLmxlbmd0aH0gZmlsZSR7ZmlsZXMubGVuZ3RoICE9PSAxID8gJ3MnIDogJyd9YCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXQgYSBwcm9wZXJ0eSB2YWx1ZSBmb3IgbXVsdGlwbGUgZmlsZXNcclxuXHQgKi9cclxuXHRhc3luYyBzZXRQcm9wZXJ0eShmaWxlczogc3RyaW5nW10sIHByb3BlcnR5OiBzdHJpbmcsIHZhbHVlOiB1bmtub3duLCBwcm9wZXJ0eVR5cGU6IHN0cmluZyA9ICd0ZXh0Jyk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Ly8gU3RyaXAgXCJub3RlLlwiIHByZWZpeCBpZiBwcmVzZW50IChCYXNlcyB1c2VzIFwibm90ZS5wcm9wZXJ0eVwiIGJ1dCBmcm9udG1hdHRlciB1c2VzIGp1c3QgXCJwcm9wZXJ0eVwiKVxyXG5cdFx0Y29uc3QgY2xlYW5Qcm9wZXJ0eSA9IHByb3BlcnR5LnN0YXJ0c1dpdGgoJ25vdGUuJykgPyBwcm9wZXJ0eS5zdWJzdHJpbmcoNSkgOiBwcm9wZXJ0eTtcclxuXHRcdFxyXG5cdFx0Y29uc3QgcHJvcHMgPSBuZXcgTWFwPHN0cmluZywgTmV3UHJvcERhdGE+KCk7XHJcblx0XHRwcm9wcy5zZXQoY2xlYW5Qcm9wZXJ0eSwge1xyXG5cdFx0XHR0eXBlOiBwcm9wZXJ0eVR5cGUsXHJcblx0XHRcdGRhdGE6IHZhbHVlIGFzIHN0cmluZyB8IHN0cmluZ1tdIHwgbnVsbCxcclxuXHRcdFx0b3ZlcndyaXRlOiB0cnVlLFxyXG5cdFx0XHRkZWxpbWl0ZXI6ICcsJyxcclxuXHRcdH0pO1xyXG5cclxuXHRcdGF3YWl0IHRoaXMuYmF0Y2hQcm9jZXNzRmlsZXMoZmlsZXMsIGFzeW5jIChmaWxlKSA9PiB7XHJcblx0XHRcdGF3YWl0IGFkZFByb3BlcnRpZXModGhpcy5hcHAsIGZpbGUsIHByb3BzLCB0cnVlKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdG5ldyBOb3RpY2UoYFNldCAke2NsZWFuUHJvcGVydHl9IG9uICR7ZmlsZXMubGVuZ3RofSBmaWxlJHtmaWxlcy5sZW5ndGggIT09IDEgPyAncycgOiAnJ31gKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbW92ZSBhIHByb3BlcnR5IGZyb20gbXVsdGlwbGUgZmlsZXNcclxuXHQgKi9cclxuXHRhc3luYyByZW1vdmVQcm9wZXJ0eShmaWxlczogc3RyaW5nW10sIHByb3BlcnR5OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdC8vIFN0cmlwIFwibm90ZS5cIiBwcmVmaXggaWYgcHJlc2VudFxyXG5cdFx0Y29uc3QgY2xlYW5Qcm9wZXJ0eSA9IHByb3BlcnR5LnN0YXJ0c1dpdGgoJ25vdGUuJykgPyBwcm9wZXJ0eS5zdWJzdHJpbmcoNSkgOiBwcm9wZXJ0eTtcclxuXHRcdFxyXG5cdFx0YXdhaXQgdGhpcy5iYXRjaFByb2Nlc3NGaWxlcyhmaWxlcywgYXN5bmMgKGZpbGUpID0+IHtcclxuXHRcdFx0YXdhaXQgcmVtb3ZlUHJvcGVydGllcyh0aGlzLmFwcCwgZmlsZSwgW2NsZWFuUHJvcGVydHldKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdG5ldyBOb3RpY2UoYFJlbW92ZWQgJHtjbGVhblByb3BlcnR5fSBmcm9tICR7ZmlsZXMubGVuZ3RofSBmaWxlJHtmaWxlcy5sZW5ndGggIT09IDEgPyAncycgOiAnJ31gKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEJhdGNoIHByb2Nlc3MgZmlsZXMgd2l0aCBwcm9ncmVzcyBpbmRpY2F0aW9uXHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyBiYXRjaFByb2Nlc3NGaWxlcyhcclxuXHRcdGZpbGVzOiBzdHJpbmdbXSxcclxuXHRcdHByb2Nlc3NvcjogKGZpbGU6IFRGaWxlKSA9PiBQcm9taXNlPHZvaWQ+XHJcblx0KTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRsZXQgcHJvY2Vzc2VkID0gMDtcclxuXHRcdGNvbnN0IHRvdGFsID0gZmlsZXMubGVuZ3RoO1xyXG5cclxuXHRcdGZvciAoY29uc3QgZmlsZVBhdGggb2YgZmlsZXMpIHtcclxuXHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XHJcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0YXdhaXQgcHJvY2Vzc29yKGZpbGUpO1xyXG5cdFx0XHRcdFx0cHJvY2Vzc2VkKys7XHJcblx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoYEVycm9yIHByb2Nlc3NpbmcgJHtmaWxlUGF0aH06YCwgZXJyb3IpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChwcm9jZXNzZWQgPCB0b3RhbCkge1xyXG5cdFx0XHRuZXcgTm90aWNlKGBQcm9jZXNzZWQgJHtwcm9jZXNzZWR9IG9mICR7dG90YWx9IGZpbGVzYCk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5cclxuIiwgIi8qKlxyXG4gKiBGcm9udG1hdHRlciBtYW5pcHVsYXRpb24gdXRpbGl0aWVzXHJcbiAqIFBvcnRlZCBmcm9tIE11bHRpLVByb3BlcnRpZXMgcGx1Z2luXHJcbiAqIFVwZGF0ZWQgdG8gc3VwcG9ydCBNRFggZmlsZXMgdmlhIHVuaWZpZWQgZnJvbnRtYXR0ZXIgaGVscGVyXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgcHJvY2Vzc0ZpbGVGcm9udE1hdHRlciB9IGZyb20gJy4vZnJvbnRtYXR0ZXItaGVscGVyJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTmV3UHJvcERhdGEge1xyXG5cdHR5cGU6IHN0cmluZztcclxuXHRkYXRhOiBzdHJpbmcgfCBzdHJpbmdbXSB8IG51bGw7XHJcblx0b3ZlcndyaXRlOiBib29sZWFuO1xyXG5cdGRlbGltaXRlcjogc3RyaW5nO1xyXG59XHJcblxyXG4vKipcclxuICogQWRkIHByb3BlcnRpZXMgZnJvbSBhIE1hcCB0byBhIG5vdGUuXHJcbiAqIFdvcmtzIGZvciBib3RoIC5tZCBhbmQgLm1keCBmaWxlcy5cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRQcm9wZXJ0aWVzKFxyXG5cdGFwcDogQXBwLFxyXG5cdGZpbGU6IFRGaWxlLFxyXG5cdHByb3BzOiBNYXA8c3RyaW5nLCBOZXdQcm9wRGF0YT4sXHJcblx0b3ZlcndyaXRlOiBib29sZWFuXHJcbik6IFByb21pc2U8dm9pZD4ge1xyXG5cdGF3YWl0IHByb2Nlc3NGaWxlRnJvbnRNYXR0ZXIoYXBwLCBmaWxlLCAoZnJvbnRtYXR0ZXIpID0+IHtcclxuXHRcdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIHByb3BzKSB7XHJcblx0XHRcdC8vIFRhZ3Mgc2hvdWxkIGFsd2F5cyBiZSBhIExpc3QsIGV2ZW4gaWYgdGhlcmUgaXMganVzdCBvbmUgdGFnLlxyXG5cdFx0XHRpZiAoXHJcblx0XHRcdFx0a2V5ID09PSAndGFncycgJiZcclxuXHRcdFx0XHQhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGZyb250bWF0dGVyLCAndGFncycpICYmXHJcblx0XHRcdFx0IUFycmF5LmlzQXJyYXkodmFsdWUuZGF0YSlcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0ZnJvbnRtYXR0ZXJba2V5XSA9IFt2YWx1ZS5kYXRhXTtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCFmcm9udG1hdHRlcltrZXldIHx8IG92ZXJ3cml0ZSkge1xyXG5cdFx0XHRcdGZyb250bWF0dGVyW2tleV0gPSB2YWx1ZS5kYXRhO1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDb21wYXJlIHR5cGVzIHRvIHNlZSBpZiB0aGV5IGNhbiBiZSBhcHBlbmRlZC5cclxuXHRcdFx0Y29uc3QgdHlwZTEgPSB2YWx1ZS50eXBlO1xyXG5cdFx0XHRjb25zdCBleGlzdGluZ1ZhbHVlID0gZnJvbnRtYXR0ZXJba2V5XTtcclxuXHRcdFx0Y29uc3QgdHlwZTIgPSBBcnJheS5pc0FycmF5KGV4aXN0aW5nVmFsdWUpID8gJ2xpc3QnIDogdHlwZW9mIGV4aXN0aW5nVmFsdWUgPT09ICdudW1iZXInID8gJ251bWJlcicgOiB0eXBlb2YgZXhpc3RpbmdWYWx1ZSA9PT0gJ2Jvb2xlYW4nID8gJ2NoZWNrYm94JyA6ICd0ZXh0JztcclxuXHJcblx0XHRcdGlmIChjYW5CZUFwcGVuZGVkKHR5cGUxLCB0eXBlMikpIHtcclxuXHRcdFx0XHRpZiAoZnJvbnRtYXR0ZXJba2V5XSA9PT0gdmFsdWUuZGF0YSkgY29udGludWU7IC8vIExlYXZlIGlkZW50aWNhbCB2YWx1ZXMgYWxvbmUuXHJcblx0XHRcdFx0aWYgKCF2YWx1ZS5kYXRhKSBjb250aW51ZTsgLy8gRG8gbm90IG1lcmdlIGVtcHR5IHZhbHVlcy5cclxuXHJcblx0XHRcdFx0Y29uc3QgYXJyID0gbWVyZ2VJbnRvQXJyYXlzKGZyb250bWF0dGVyW2tleV0gYXMgc3RyaW5nIHwgc3RyaW5nW10sIHZhbHVlLmRhdGEpO1xyXG5cdFx0XHRcdGZyb250bWF0dGVyW2tleV0gPSBhcnI7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZnJvbnRtYXR0ZXJba2V5XSA9IHZhbHVlLmRhdGE7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbW92ZSBwcm9wZXJ0aWVzIGZyb20gYSBub3RlLlxyXG4gKiBXb3JrcyBmb3IgYm90aCAubWQgYW5kIC5tZHggZmlsZXMuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVtb3ZlUHJvcGVydGllcyhhcHA6IEFwcCwgZmlsZTogVEZpbGUsIHByb3BzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG5cdGF3YWl0IHByb2Nlc3NGaWxlRnJvbnRNYXR0ZXIoYXBwLCBmaWxlLCAoZnJvbnRtYXR0ZXIpID0+IHtcclxuXHRcdGZvciAoY29uc3QgcHJvcCBvZiBwcm9wcykge1xyXG5cdFx0XHRmcm9udG1hdHRlcltwcm9wXSA9IHVuZGVmaW5lZDsgLy8gXCJIYWNreVwiIHdvcmthcm91bmQsIGNvbW1lbnRlZCBjb2RlIHdpbGwgd29yayBpbiBsYXRlciB2ZXJzaW9uLlwiXHJcblx0XHR9XHJcblx0fSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiB0d28gdHlwZXMgY2FuIGJlIGFwcGVuZGVkIHRvIGVhY2ggb3RoZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBjYW5CZUFwcGVuZGVkKHN0cjE6IHN0cmluZywgc3RyMjogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0Y29uc3QgYXJyID0gWydudW1iZXInLCAnZGF0ZScsICdkYXRldGltZScsICdjaGVja2JveCddOyAvLyBUaGVzZSB2YWx1ZXMgc2hvdWxkIG5vdCBiZSBhcHBlbmRlZC5cclxuXHRpZiAoYXJyLmluY2x1ZGVzKHN0cjEpIHx8IGFyci5pbmNsdWRlcyhzdHIyKSkgcmV0dXJuIGZhbHNlO1xyXG5cdHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vKipcclxuICogQ29udmVydCBzdHJpbmdzIGFuZCBhcnJheXMgaW50byBzaW5nbGUgYXJyYXkuXHJcbiAqL1xyXG5mdW5jdGlvbiBtZXJnZUludG9BcnJheXMoLi4uYXJnczogKHN0cmluZyB8IHN0cmluZ1tdKVtdKTogc3RyaW5nW10ge1xyXG5cdGNvbnN0IGFycmF5cyA9IGFyZ3MubWFwKChhcmcpID0+IChBcnJheS5pc0FycmF5KGFyZykgPyBhcmcgOiBbYXJnXSkpO1xyXG5cclxuXHQvLyBGbGF0dGVuIHRoZSBhcnJheVxyXG5cdGNvbnN0IGZsYXR0ZW5lZCA9IGFycmF5cy5mbGF0KCk7XHJcblxyXG5cdC8vIFJlbW92ZSBkdXBsaWNhdGVzIHVzaW5nIFNldCBhbmQgc3ByZWFkIGl0IGludG8gYW4gYXJyYXlcclxuXHRjb25zdCB1bmlxdWUgPSBbLi4ubmV3IFNldChmbGF0dGVuZWQpXTtcclxuXHJcblx0cmV0dXJuIHVuaXF1ZTtcclxufVxyXG5cclxuXHJcbiIsICIvKipcclxuICogTWFuYWdlIFRhZ3MgTW9kYWxcclxuICogTW9kYWwgZm9yIGFkZGluZy9yZW1vdmluZyB0YWdzIGZyb20gc2VsZWN0ZWQgZmlsZXNcclxuICovXHJcblxyXG5pbXBvcnQgeyBNb2RhbCwgQXBwLCBTZXR0aW5nLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgQnVsa09wZXJhdGlvbnMgfSBmcm9tICcuLi91dGlscy9idWxrLW9wZXJhdGlvbnMnO1xyXG5pbXBvcnQgeyBnZXRGaWxlRnJvbnRtYXR0ZXIgfSBmcm9tICcuLi91dGlscy9mcm9udG1hdHRlci1oZWxwZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1hbmFnZVRhZ3NNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHRwcml2YXRlIGZpbGVzOiBzdHJpbmdbXTtcclxuXHRwcml2YXRlIHRhZ3NUb0FkZDogc3RyaW5nID0gJyc7XHJcblx0cHJpdmF0ZSB0YWdzVG9SZW1vdmU6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xyXG5cdHByaXZhdGUgYnVsa09wczogQnVsa09wZXJhdGlvbnM7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBmaWxlczogc3RyaW5nW10pIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLmZpbGVzID0gZmlsZXM7XHJcblx0XHR0aGlzLmJ1bGtPcHMgPSBuZXcgQnVsa09wZXJhdGlvbnMoYXBwKTtcclxuXHR9XHJcblxyXG5cdG9uT3BlbigpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKS5zZXROYW1lKCdNYW5hZ2UgdGFncycpLnNldEhlYWRpbmcoKTtcclxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYE1hbmFnaW5nIHRhZ3MgZm9yICR7dGhpcy5maWxlcy5sZW5ndGh9IGZpbGUke3RoaXMuZmlsZXMubGVuZ3RoICE9PSAxID8gJ3MnIDogJyd9YCB9KTtcclxuXHJcblx0XHQvLyBBZGQgdGFncyBpbnB1dFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnQWRkIHRhZ3MnKVxyXG5cdFx0XHQuc2V0RGVzYygnRW50ZXIgdGFncyB0byBhZGQgKGNvbW1hLXNlcGFyYXRlZCkuJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB7XHJcblx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFBsYWNlaG9sZGVyIHRleHQgd2l0aCBjb2RlIGV4YW1wbGVzLCBub3QgVUkgdGV4dFxyXG5cdFx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCd0YWcxLCB0YWcyLCB0YWczJylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSh2YWx1ZSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMudGFnc1RvQWRkID0gdmFsdWU7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0Ly8gUmVtb3ZlIHRhZ3Mgc2VjdGlvblxyXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1JlbW92ZSB0YWdzJyB9KTsgLy8gS2VlcCBoMyBmb3Igc2VjdGlvbiBoZWFkaW5nXHJcblx0XHRjb25zdCByZW1vdmVDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XHJcblxyXG5cdFx0Ly8gR2V0IGFsbCB1bmlxdWUgdGFncyBmcm9tIHNlbGVjdGVkIGZpbGVzXHJcblx0XHRjb25zdCBhbGxUYWdzID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcblx0XHRmb3IgKGNvbnN0IGZpbGVQYXRoIG9mIHRoaXMuZmlsZXMpIHtcclxuXHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XHJcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHQvLyBGb3IgTURYIGZpbGVzLCB3ZSdsbCBsb2FkIHRhZ3MgYXN5bmNocm9ub3VzbHlcclxuXHRcdFx0XHRpZiAoZmlsZS5leHRlbnNpb24gPT09ICdtZHgnKSB7XHJcblx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGZyb250bWF0dGVyID0gYXdhaXQgZ2V0RmlsZUZyb250bWF0dGVyKHRoaXMuYXBwLCBmaWxlKTtcclxuXHRcdFx0XHRcdFx0aWYgKGZyb250bWF0dGVyPy50YWdzKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgdGFncyA9IEFycmF5LmlzQXJyYXkoZnJvbnRtYXR0ZXIudGFncykgXHJcblx0XHRcdFx0XHRcdFx0XHQ/IChmcm9udG1hdHRlci50YWdzIGFzIHN0cmluZ1tdKVxyXG5cdFx0XHRcdFx0XHRcdFx0OiBbZnJvbnRtYXR0ZXIudGFncyBhcyBzdHJpbmddO1xyXG5cdFx0XHRcdFx0XHRcdHRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFhbGxUYWdzLmhhcyh0YWcpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGFsbFRhZ3MuYWRkKHRhZyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFkZCBjaGVja2JveCBmb3IgdGhpcyB0YWcgaWYgbW9kYWwgaXMgc3RpbGwgb3BlblxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5jb250ZW50RWwgJiYgdGhpcy5jb250ZW50RWwuaXNDb25uZWN0ZWQgJiYgcmVtb3ZlQ29udGFpbmVyLmlzQ29ubmVjdGVkKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5hZGRUYWdDaGVja2JveChyZW1vdmVDb250YWluZXIsIHRhZyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gRm9yIC5tZCBmaWxlcywgdXNlIG1ldGFkYXRhIGNhY2hlIChzeW5jaHJvbm91cylcclxuXHRcdFx0XHRcdGNvbnN0IG1ldGFkYXRhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XHJcblx0XHRcdFx0XHRjb25zdCBmcm9udG1hdHRlciA9IG1ldGFkYXRhPy5mcm9udG1hdHRlcjtcclxuXHRcdFx0XHRcdGlmIChmcm9udG1hdHRlcj8udGFncykge1xyXG5cdFx0XHRcdFx0XHRjb25zdCB0YWdzID0gQXJyYXkuaXNBcnJheShmcm9udG1hdHRlci50YWdzKSBcclxuXHRcdFx0XHRcdFx0XHQ/IChmcm9udG1hdHRlci50YWdzIGFzIHN0cmluZ1tdKVxyXG5cdFx0XHRcdFx0XHRcdDogW2Zyb250bWF0dGVyLnRhZ3MgYXMgc3RyaW5nXTtcclxuXHRcdFx0XHRcdFx0dGFncy5mb3JFYWNoKHRhZyA9PiBhbGxUYWdzLmFkZCh0YWcpKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBDcmVhdGUgY2hlY2tib3hlcyBmb3IgZWFjaCB0YWdcclxuXHRcdGZvciAoY29uc3QgdGFnIG9mIEFycmF5LmZyb20oYWxsVGFncykuc29ydCgpKSB7XHJcblx0XHRcdG5ldyBTZXR0aW5nKHJlbW92ZUNvbnRhaW5lcilcclxuXHRcdFx0XHQuc2V0TmFtZSh0YWcpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnRhZ3NUb1JlbW92ZS5oYXModGFnKSlcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcclxuXHRcdFx0XHRcdFx0XHRpZiAodmFsdWUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMudGFnc1RvUmVtb3ZlLmFkZCh0YWcpO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnRhZ3NUb1JlbW92ZS5kZWxldGUodGFnKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEJ1dHRvbnNcclxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcclxuXHRcdGJ1dHRvbkNvbnRhaW5lci5hZGRDbGFzcygnYmFzZXMtY21zLW1vZGFsLWJ1dHRvbi1jb250YWluZXInKTtcclxuXHJcblx0XHRjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicpO1xyXG5cdFx0Y2FuY2VsQnRuLnNldFRleHQoJ0NhbmNlbCcpO1xyXG5cdFx0Y2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuXHJcblx0XHRjb25zdCBhcHBseUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcblx0XHRhcHBseUJ0bi5zZXRUZXh0KCdBcHBseScpO1xyXG5cdFx0YXBwbHlCdG4uYWRkQ2xhc3MoJ21vZC1jdGEnKTtcclxuXHRcdGFwcGx5QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5hcHBseUNoYW5nZXMoKTtcclxuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdH0pKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYWRkVGFnQ2hlY2tib3goY29udGFpbmVyOiBIVE1MRWxlbWVudCwgdGFnOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcclxuXHRcdFx0LnNldE5hbWUodGFnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy50YWdzVG9SZW1vdmUuaGFzKHRhZykpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UodmFsdWUgPT4ge1xyXG5cdFx0XHRcdFx0XHRpZiAodmFsdWUpIHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnRhZ3NUb1JlbW92ZS5hZGQodGFnKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnRhZ3NUb1JlbW92ZS5kZWxldGUodGFnKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhc3luYyBhcHBseUNoYW5nZXMoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHQvLyBBZGQgdGFnc1xyXG5cdFx0aWYgKHRoaXMudGFnc1RvQWRkLnRyaW0oKSkge1xyXG5cdFx0XHRjb25zdCB0YWdzVG9BZGQgPSB0aGlzLnRhZ3NUb0FkZFxyXG5cdFx0XHRcdC5zcGxpdCgnLCcpXHJcblx0XHRcdFx0Lm1hcCh0ID0+IHQudHJpbSgpKVxyXG5cdFx0XHRcdC5maWx0ZXIodCA9PiB0Lmxlbmd0aCA+IDApO1xyXG5cdFx0XHRpZiAodGFnc1RvQWRkLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLmJ1bGtPcHMuYWRkVGFncyh0aGlzLmZpbGVzLCB0YWdzVG9BZGQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmVtb3ZlIHRhZ3NcclxuXHRcdGlmICh0aGlzLnRhZ3NUb1JlbW92ZS5zaXplID4gMCkge1xyXG5cdFx0XHRhd2FpdCB0aGlzLmJ1bGtPcHMucmVtb3ZlVGFncyh0aGlzLmZpbGVzLCBBcnJheS5mcm9tKHRoaXMudGFnc1RvUmVtb3ZlKSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRvbkNsb3NlKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHR9XHJcbn1cclxuXHJcblxyXG4iLCAiLyoqXHJcbiAqIFNldCBQcm9wZXJ0eSBNb2RhbFxyXG4gKiBNb2RhbCBmb3Igc2V0dGluZyBhIHByb3BlcnR5IHZhbHVlIG9uIHNlbGVjdGVkIGZpbGVzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTW9kYWwsIEFwcCwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgQnVsa09wZXJhdGlvbnMgfSBmcm9tICcuLi91dGlscy9idWxrLW9wZXJhdGlvbnMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNldFByb3BlcnR5TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcblx0cHJpdmF0ZSBmaWxlczogc3RyaW5nW107XHJcblx0cHJpdmF0ZSBwcm9wZXJ0eU5hbWU6IHN0cmluZyA9ICcnO1xyXG5cdHByaXZhdGUgcHJvcGVydHlWYWx1ZTogc3RyaW5nID0gJyc7XHJcblx0cHJpdmF0ZSBwcm9wZXJ0eVR5cGU6IHN0cmluZyA9ICd0ZXh0JztcclxuXHRwcml2YXRlIGJ1bGtPcHM6IEJ1bGtPcGVyYXRpb25zO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZmlsZXM6IHN0cmluZ1tdKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5maWxlcyA9IGZpbGVzO1xyXG5cdFx0dGhpcy5idWxrT3BzID0gbmV3IEJ1bGtPcGVyYXRpb25zKGFwcCk7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbCkuc2V0TmFtZSgnU2V0IHByb3BlcnR5Jykuc2V0SGVhZGluZygpO1xyXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgU2V0dGluZyBwcm9wZXJ0eSBvbiAke3RoaXMuZmlsZXMubGVuZ3RofSBmaWxlJHt0aGlzLmZpbGVzLmxlbmd0aCAhPT0gMSA/ICdzJyA6ICcnfWAgfSk7XHJcblxyXG5cdFx0Ly8gUHJvcGVydHkgbmFtZVxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnUHJvcGVydHkgbmFtZScpXHJcblx0XHRcdC5zZXREZXNjKCdFbnRlciB0aGUgcHJvcGVydHkgbmFtZSB0byBzZXQuJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB7XHJcblx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdFbnRlciBuYW1lJylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSh2YWx1ZSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucHJvcGVydHlOYW1lID0gdmFsdWU7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0Ly8gUHJvcGVydHkgdHlwZVxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnUHJvcGVydHkgdHlwZScpXHJcblx0XHRcdC5zZXREZXNjKCdTZWxlY3QgdGhlIHByb3BlcnR5IHR5cGUuJylcclxuXHRcdFx0LmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuXHRcdFx0XHRkcm9wZG93blxyXG5cdFx0XHRcdFx0LmFkZE9wdGlvbigndGV4dCcsICdUZXh0JylcclxuXHRcdFx0XHRcdC5hZGRPcHRpb24oJ251bWJlcicsICdOdW1iZXInKVxyXG5cdFx0XHRcdFx0LmFkZE9wdGlvbignY2hlY2tib3gnLCAnQ2hlY2tib3gnKVxyXG5cdFx0XHRcdFx0LmFkZE9wdGlvbignZGF0ZScsICdEYXRlJylcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnByb3BlcnR5VHlwZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSh2YWx1ZSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucHJvcGVydHlUeXBlID0gdmFsdWU7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0Ly8gUHJvcGVydHkgdmFsdWVcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuXHRcdFx0LnNldE5hbWUoJ1Byb3BlcnR5IHZhbHVlJylcclxuXHRcdFx0LnNldERlc2MoJ0VudGVyIHRoZSBwcm9wZXJ0eSB2YWx1ZS4nKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHtcclxuXHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHZhbHVlJylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSh2YWx1ZSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucHJvcGVydHlWYWx1ZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdC8vIEJ1dHRvbnNcclxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcclxuXHRcdGJ1dHRvbkNvbnRhaW5lci5hZGRDbGFzcygnYmFzZXMtY21zLW1vZGFsLWJ1dHRvbi1jb250YWluZXInKTtcclxuXHJcblx0XHRjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicpO1xyXG5cdFx0Y2FuY2VsQnRuLnNldFRleHQoJ0NhbmNlbCcpO1xyXG5cdFx0Y2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuXHJcblx0XHRjb25zdCBhcHBseUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcblx0XHRhcHBseUJ0bi5zZXRUZXh0KCdBcHBseScpO1xyXG5cdFx0YXBwbHlCdG4uYWRkQ2xhc3MoJ21vZC1jdGEnKTtcclxuXHRcdGFwcGx5QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0aWYgKHRoaXMucHJvcGVydHlOYW1lICYmIHRoaXMucHJvcGVydHlWYWx1ZSkge1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHBseUNoYW5nZXMoKTtcclxuXHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYXN5bmMgYXBwbHlDaGFuZ2VzKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0bGV0IHZhbHVlOiB1bmtub3duID0gdGhpcy5wcm9wZXJ0eVZhbHVlO1xyXG5cclxuXHRcdC8vIENvbnZlcnQgdmFsdWUgYmFzZWQgb24gdHlwZVxyXG5cdFx0aWYgKHRoaXMucHJvcGVydHlUeXBlID09PSAnbnVtYmVyJykge1xyXG5cdFx0XHR2YWx1ZSA9IE51bWJlcih0aGlzLnByb3BlcnR5VmFsdWUpO1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLnByb3BlcnR5VHlwZSA9PT0gJ2NoZWNrYm94Jykge1xyXG5cdFx0XHR2YWx1ZSA9IHRoaXMucHJvcGVydHlWYWx1ZS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScgfHwgdGhpcy5wcm9wZXJ0eVZhbHVlID09PSAnMSc7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMucHJvcGVydHlUeXBlID09PSAnZGF0ZScpIHtcclxuXHRcdFx0dmFsdWUgPSB0aGlzLnByb3BlcnR5VmFsdWU7IC8vIEtlZXAgYXMgc3RyaW5nIGZvciBkYXRlXHJcblx0XHR9XHJcblxyXG5cdFx0YXdhaXQgdGhpcy5idWxrT3BzLnNldFByb3BlcnR5KHRoaXMuZmlsZXMsIHRoaXMucHJvcGVydHlOYW1lLCB2YWx1ZSwgdGhpcy5wcm9wZXJ0eVR5cGUpO1xyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuIiwgIi8qKlxyXG4gKiBSZW1vdmUgUHJvcGVydHkgTW9kYWxcclxuICogTW9kYWwgZm9yIHJlbW92aW5nIHByb3BlcnRpZXMgZnJvbSBzZWxlY3RlZCBmaWxlc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IE1vZGFsLCBBcHAsIFNldHRpbmcsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBCdWxrT3BlcmF0aW9ucyB9IGZyb20gJy4uL3V0aWxzL2J1bGstb3BlcmF0aW9ucyc7XHJcbmltcG9ydCB7IGdldEZpbGVGcm9udG1hdHRlciB9IGZyb20gJy4uL3V0aWxzL2Zyb250bWF0dGVyLWhlbHBlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgUmVtb3ZlUHJvcGVydHlNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHRwcml2YXRlIGZpbGVzOiBzdHJpbmdbXTtcclxuXHRwcml2YXRlIHByb3BlcnRpZXNUb1JlbW92ZTogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XHJcblx0cHJpdmF0ZSBidWxrT3BzOiBCdWxrT3BlcmF0aW9ucztcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGZpbGVzOiBzdHJpbmdbXSkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMuZmlsZXMgPSBmaWxlcztcclxuXHRcdHRoaXMuYnVsa09wcyA9IG5ldyBCdWxrT3BlcmF0aW9ucyhhcHApO1xyXG5cdH1cclxuXHJcblx0b25PcGVuKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpLnNldE5hbWUoJ1JlbW92ZSBwcm9wZXJ0eScpLnNldEhlYWRpbmcoKTtcclxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYFJlbW92aW5nIHByb3BlcnRpZXMgZnJvbSAke3RoaXMuZmlsZXMubGVuZ3RofSBmaWxlJHt0aGlzLmZpbGVzLmxlbmd0aCAhPT0gMSA/ICdzJyA6ICcnfWAgfSk7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGNoZWNrYm94ZXMgY29udGFpbmVyIGZpcnN0XHJcblx0XHRjb25zdCBwcm9wZXJ0aWVzQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xyXG5cdFx0XHJcblx0XHQvLyBHZXQgYWxsIHVuaXF1ZSBwcm9wZXJ0aWVzIGZyb20gc2VsZWN0ZWQgZmlsZXNcclxuXHRcdGNvbnN0IGFsbFByb3BlcnRpZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuXHRcdFxyXG5cdFx0Ly8gTG9hZCBwcm9wZXJ0aWVzIHN5bmNocm9ub3VzbHkgZm9yIC5tZCBmaWxlcyBmaXJzdFxyXG5cdFx0Zm9yIChjb25zdCBmaWxlUGF0aCBvZiB0aGlzLmZpbGVzKSB7XHJcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xyXG5cdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uICE9PSAnbWR4Jykge1xyXG5cdFx0XHRcdGNvbnN0IG1ldGFkYXRhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XHJcblx0XHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI7XHJcblx0XHRcdFx0aWYgKGZyb250bWF0dGVyKSB7XHJcblx0XHRcdFx0XHRmb3IgKGNvbnN0IGtleSBpbiBmcm9udG1hdHRlcikge1xyXG5cdFx0XHRcdFx0XHRpZiAoa2V5ICE9PSAndGFncycgJiYga2V5ICE9PSAndGl0bGUnKSB7XHJcblx0XHRcdFx0XHRcdFx0YWxsUHJvcGVydGllcy5hZGQoa2V5KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBSZW5kZXIgY2hlY2tib3hlcyBmb3IgLm1kIGZpbGUgcHJvcGVydGllc1xyXG5cdFx0Zm9yIChjb25zdCBwcm9wIG9mIEFycmF5LmZyb20oYWxsUHJvcGVydGllcykuc29ydCgpKSB7XHJcblx0XHRcdHRoaXMuYWRkUHJvcGVydHlDaGVja2JveChwcm9wZXJ0aWVzQ29udGFpbmVyLCBwcm9wKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gTG9hZCBNRFggZmlsZSBwcm9wZXJ0aWVzIGFzeW5jaHJvbm91c2x5XHJcblx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdGZvciAoY29uc3QgZmlsZVBhdGggb2YgdGhpcy5maWxlcykge1xyXG5cdFx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xyXG5cdFx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZHgnKSB7XHJcblx0XHRcdFx0XHRjb25zdCBmcm9udG1hdHRlciA9IGF3YWl0IGdldEZpbGVGcm9udG1hdHRlcih0aGlzLmFwcCwgZmlsZSk7XHJcblx0XHRcdFx0XHRpZiAoZnJvbnRtYXR0ZXIpIHtcclxuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBrZXkgaW4gZnJvbnRtYXR0ZXIpIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoa2V5ICE9PSAndGFncycgJiYga2V5ICE9PSAndGl0bGUnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoIWFsbFByb3BlcnRpZXMuaGFzKGtleSkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YWxsUHJvcGVydGllcy5hZGQoa2V5KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWRkIGNoZWNrYm94IGZvciB0aGlzIHByb3BlcnR5IGR5bmFtaWNhbGx5XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmICh0aGlzLmNvbnRlbnRFbCAmJiB0aGlzLmNvbnRlbnRFbC5pc0Nvbm5lY3RlZCAmJiBwcm9wZXJ0aWVzQ29udGFpbmVyLmlzQ29ubmVjdGVkKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5hZGRQcm9wZXJ0eUNoZWNrYm94KHByb3BlcnRpZXNDb250YWluZXIsIGtleSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pKCk7XHJcblxyXG5cdFx0aWYgKGFsbFByb3BlcnRpZXMuc2l6ZSA9PT0gMCkge1xyXG5cdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdObyBwcm9wZXJ0aWVzIGZvdW5kIGluIHNlbGVjdGVkIGZpbGVzLicgfSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQnV0dG9uc1xyXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xyXG5cdFx0YnV0dG9uQ29udGFpbmVyLmFkZENsYXNzKCdiYXNlcy1jbXMtbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicpO1xyXG5cclxuXHRcdGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcblx0XHRjYW5jZWxCdG4uc2V0VGV4dCgnQ2FuY2VsJyk7XHJcblx0XHRjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG5cclxuXHRcdGNvbnN0IGFwcGx5QnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nKTtcclxuXHRcdGFwcGx5QnRuLnNldFRleHQoJ0FwcGx5Jyk7XHJcblx0XHRhcHBseUJ0bi5hZGRDbGFzcygnbW9kLWN0YScpO1xyXG5cdFx0YXBwbHlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRpZiAodGhpcy5wcm9wZXJ0aWVzVG9SZW1vdmUuc2l6ZSA+IDApIHtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwbHlDaGFuZ2VzKCk7XHJcblx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KSgpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFkZFByb3BlcnR5Q2hlY2tib3goY29udGFpbmVyOiBIVE1MRWxlbWVudCwgcHJvcDogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXIpXHJcblx0XHRcdC5zZXROYW1lKHByb3ApXHJcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcclxuXHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnByb3BlcnRpZXNUb1JlbW92ZS5oYXMocHJvcCkpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UodmFsdWUgPT4ge1xyXG5cdFx0XHRcdFx0XHRpZiAodmFsdWUpIHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnByb3BlcnRpZXNUb1JlbW92ZS5hZGQocHJvcCk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wcm9wZXJ0aWVzVG9SZW1vdmUuZGVsZXRlKHByb3ApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIGFwcGx5Q2hhbmdlcygpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGZvciAoY29uc3QgcHJvcCBvZiB0aGlzLnByb3BlcnRpZXNUb1JlbW92ZSkge1xyXG5cdFx0XHRhd2FpdCB0aGlzLmJ1bGtPcHMucmVtb3ZlUHJvcGVydHkodGhpcy5maWxlcywgcHJvcCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRvbkNsb3NlKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHR9XHJcbn1cclxuXHJcblxyXG4iLCAiLyoqXG4gKiBUb29sYmFyIEFjdGlvbnNcbiAqIEhhbmRsZXMgYWxsIGJ1bGsgb3BlcmF0aW9uIGFjdGlvbnMgZnJvbSB0aGUgdG9vbGJhclxuICovXG5cbmltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIEJhc2VzQ01TUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgQnVsa09wZXJhdGlvbnMgfSBmcm9tICcuL2J1bGstb3BlcmF0aW9ucyc7XG5pbXBvcnQgeyBNYW5hZ2VUYWdzTW9kYWwgfSBmcm9tICcuLi9jb21wb25lbnRzL21hbmFnZS10YWdzLW1vZGFsJztcbmltcG9ydCB7IFNldFByb3BlcnR5TW9kYWwgfSBmcm9tICcuLi9jb21wb25lbnRzL3NldC1wcm9wZXJ0eS1tb2RhbCc7XG5pbXBvcnQgeyBSZW1vdmVQcm9wZXJ0eU1vZGFsIH0gZnJvbSAnLi4vY29tcG9uZW50cy9yZW1vdmUtcHJvcGVydHktbW9kYWwnO1xuaW1wb3J0IHsgRGVsZXRpb25QcmV2aWV3TW9kYWwgfSBmcm9tICcuLi9jb21wb25lbnRzL2RlbGV0aW9uLXByZXZpZXcnO1xuaW1wb3J0IHsgQnVsa09wZXJhdGlvbkNvbmZpcm1Nb2RhbCB9IGZyb20gJy4uL2NvbXBvbmVudHMvYnVsay1vcGVyYXRpb24tY29uZmlybSc7XG5pbXBvcnQgeyBwcmVwYXJlRGVsZXRpb25QcmV2aWV3LCBleGVjdXRlU21hcnREZWxldGlvbiB9IGZyb20gJy4vc21hcnQtZGVsZXRpb24nO1xuaW1wb3J0IHR5cGUgeyBDTVNTZXR0aW5ncyB9IGZyb20gJy4uL3NoYXJlZC9kYXRhLXRyYW5zZm9ybSc7XG5cbmV4cG9ydCBjbGFzcyBUb29sYmFyQWN0aW9ucyB7XG5cdHByaXZhdGUgYnVsa09wczogQnVsa09wZXJhdGlvbnM7XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cHJpdmF0ZSBhcHA6IEFwcCxcblx0XHRwcml2YXRlIHBsdWdpbjogQmFzZXNDTVNQbHVnaW4sXG5cdFx0cHJpdmF0ZSBnZXRTZWxlY3RlZEZpbGVzOiAoKSA9PiBzdHJpbmdbXSxcblx0XHRwcml2YXRlIGNsZWFyU2VsZWN0aW9uOiAoKSA9PiB2b2lkLFxuXHRcdHByaXZhdGUgcmVmcmVzaFZpZXc6ICgpID0+IHZvaWQsXG5cdFx0cHJpdmF0ZSBzaG93VG9vbGJhcjogKCkgPT4gdm9pZFxuXHQpIHtcblx0XHR0aGlzLmJ1bGtPcHMgPSBuZXcgQnVsa09wZXJhdGlvbnMoYXBwKTtcblx0fVxuXG5cdGFzeW5jIGhhbmRsZVNldERyYWZ0KHNldHRpbmdzPzogQ01TU2V0dGluZ3MpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBmaWxlcyA9IHRoaXMuZ2V0U2VsZWN0ZWRGaWxlcygpO1xuXHRcdGlmIChmaWxlcy5sZW5ndGggPT09IDApIHJldHVybjtcblxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25maXJtQnVsa09wZXJhdGlvbnMpIHtcblx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEJ1bGtPcGVyYXRpb25Db25maXJtTW9kYWwoXG5cdFx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0XHRmaWxlcyxcblx0XHRcdFx0J2RyYWZ0Jyxcblx0XHRcdFx0KCkgPT4ge1xuXHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYnVsa09wcy5zZXREcmFmdChmaWxlcywgdHJ1ZSwgc2V0dGluZ3MpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZWZyZXNoVmlldygpO1xuXHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGF3YWl0IHRoaXMuYnVsa09wcy5zZXREcmFmdChmaWxlcywgdHJ1ZSwgc2V0dGluZ3MpO1xuXHRcdFx0dGhpcy5yZWZyZXNoVmlldygpO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGhhbmRsZVB1Ymxpc2goc2V0dGluZ3M/OiBDTVNTZXR0aW5ncyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IGZpbGVzID0gdGhpcy5nZXRTZWxlY3RlZEZpbGVzKCk7XG5cdFx0aWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1CdWxrT3BlcmF0aW9ucykge1xuXHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgQnVsa09wZXJhdGlvbkNvbmZpcm1Nb2RhbChcblx0XHRcdFx0dGhpcy5hcHAsXG5cdFx0XHRcdGZpbGVzLFxuXHRcdFx0XHQncHVibGlzaCcsXG5cdFx0XHRcdCgpID0+IHtcblx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmJ1bGtPcHMuc2V0RHJhZnQoZmlsZXMsIGZhbHNlLCBzZXR0aW5ncyk7XG5cdFx0XHRcdFx0XHR0aGlzLnJlZnJlc2hWaWV3KCk7XG5cdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0fVxuXHRcdFx0KTtcblx0XHRcdG1vZGFsLm9wZW4oKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YXdhaXQgdGhpcy5idWxrT3BzLnNldERyYWZ0KGZpbGVzLCBmYWxzZSwgc2V0dGluZ3MpO1xuXHRcdFx0dGhpcy5yZWZyZXNoVmlldygpO1xuXHRcdH1cblx0fVxuXG5cdGhhbmRsZU1hbmFnZVRhZ3MoKTogdm9pZCB7XG5cdFx0Y29uc3QgZmlsZXMgPSB0aGlzLmdldFNlbGVjdGVkRmlsZXMoKTtcblx0XHRpZiAoZmlsZXMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNYW5hZ2VUYWdzTW9kYWwodGhpcy5hcHAsIGZpbGVzKTtcblx0XHRtb2RhbC5vbkNsb3NlID0gKCkgPT4ge1xuXHRcdFx0Ly8gS2VlcCB0b29sYmFyIHZpc2libGUgLSBkb24ndCBsZXQgaXQgY2xvc2Vcblx0XHRcdHRoaXMuc2hvd1Rvb2xiYXIoKTtcblx0XHRcdC8vIFJlZnJlc2ggdmlldyAtIHRoZSByZWZyZXNoVmlldyBjYWxsYmFjayB3aWxsIHByZXNlcnZlIHNlbGVjdGlvblxuXHRcdFx0dGhpcy5yZWZyZXNoVmlldygpO1xuXHRcdH07XG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0aGFuZGxlU2V0UHJvcGVydHkoKTogdm9pZCB7XG5cdFx0Y29uc3QgZmlsZXMgPSB0aGlzLmdldFNlbGVjdGVkRmlsZXMoKTtcblx0XHRpZiAoZmlsZXMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cblx0XHRjb25zdCBtb2RhbCA9IG5ldyBTZXRQcm9wZXJ0eU1vZGFsKHRoaXMuYXBwLCBmaWxlcyk7XG5cdFx0bW9kYWwub25DbG9zZSA9ICgpID0+IHtcblx0XHRcdC8vIEtlZXAgdG9vbGJhciB2aXNpYmxlIC0gZG9uJ3QgbGV0IGl0IGNsb3NlXG5cdFx0XHR0aGlzLnNob3dUb29sYmFyKCk7XG5cdFx0XHQvLyBSZWZyZXNoIHZpZXcgLSB0aGUgcmVmcmVzaFZpZXcgY2FsbGJhY2sgd2lsbCBwcmVzZXJ2ZSBzZWxlY3Rpb25cblx0XHRcdHRoaXMucmVmcmVzaFZpZXcoKTtcblx0XHR9O1xuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdGhhbmRsZVJlbW92ZVByb3BlcnR5KCk6IHZvaWQge1xuXHRcdGNvbnN0IGZpbGVzID0gdGhpcy5nZXRTZWxlY3RlZEZpbGVzKCk7XG5cdFx0aWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgUmVtb3ZlUHJvcGVydHlNb2RhbCh0aGlzLmFwcCwgZmlsZXMpO1xuXHRcdG1vZGFsLm9uQ2xvc2UgPSAoKSA9PiB7XG5cdFx0XHQvLyBLZWVwIHRvb2xiYXIgdmlzaWJsZSAtIGRvbid0IGxldCBpdCBjbG9zZVxuXHRcdFx0dGhpcy5zaG93VG9vbGJhcigpO1xuXHRcdFx0Ly8gUmVmcmVzaCB2aWV3IC0gdGhlIHJlZnJlc2hWaWV3IGNhbGxiYWNrIHdpbGwgcHJlc2VydmUgc2VsZWN0aW9uXG5cdFx0XHR0aGlzLnJlZnJlc2hWaWV3KCk7XG5cdFx0fTtcblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRhc3luYyBoYW5kbGVEZWxldGUoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgZmlsZXMgPSB0aGlzLmdldFNlbGVjdGVkRmlsZXMoKTtcblx0XHRpZiAoZmlsZXMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlybURlbGV0aW9ucykge1xuXHRcdFx0Y29uc3QgcHJldmlldyA9IGF3YWl0IHByZXBhcmVEZWxldGlvblByZXZpZXcoXG5cdFx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0XHRmaWxlcyxcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Ncblx0XHRcdCk7XG5cblx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IERlbGV0aW9uUHJldmlld01vZGFsKFxuXHRcdFx0XHR0aGlzLmFwcCxcblx0XHRcdFx0cHJldmlldyxcblx0XHRcdFx0KCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcblx0XHRcdFx0XHR0aGlzLnJlZnJlc2hWaWV3KCk7XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIERpcmVjdCBkZWxldGlvbiB3aXRob3V0IGNvbmZpcm1hdGlvblxuXHRcdFx0Y29uc3QgcHJldmlldyA9IGF3YWl0IHByZXBhcmVEZWxldGlvblByZXZpZXcoXG5cdFx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0XHRmaWxlcyxcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Ncblx0XHRcdCk7XG5cdFx0XHRhd2FpdCBleGVjdXRlU21hcnREZWxldGlvbih0aGlzLmFwcCwgcHJldmlldyk7XG5cdFx0XHR0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG5cdFx0XHR0aGlzLnJlZnJlc2hWaWV3KCk7XG5cdFx0fVxuXHR9XG59XG5cbiIsICIvKipcclxuICogQnVsayBPcGVyYXRpb24gQ29uZmlybWF0aW9uIE1vZGFsXHJcbiAqIFNob3dzIGNvbmZpcm1hdGlvbiBkaWFsb2cgYmVmb3JlIHBlcmZvcm1pbmcgYnVsayBvcGVyYXRpb25zXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTW9kYWwsIEFwcCwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmV4cG9ydCBjbGFzcyBCdWxrT3BlcmF0aW9uQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdHByaXZhdGUgZmlsZXM6IHN0cmluZ1tdO1xyXG5cdHByaXZhdGUgb3BlcmF0aW9uOiAnZHJhZnQnIHwgJ3B1Ymxpc2gnO1xyXG5cdHByaXZhdGUgb25Db25maXJtOiAoKSA9PiB2b2lkO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdGFwcDogQXBwLFxyXG5cdFx0ZmlsZXM6IHN0cmluZ1tdLFxyXG5cdFx0b3BlcmF0aW9uOiAnZHJhZnQnIHwgJ3B1Ymxpc2gnLFxyXG5cdFx0b25Db25maXJtOiAoKSA9PiB2b2lkXHJcblx0KSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5maWxlcyA9IGZpbGVzO1xyXG5cdFx0dGhpcy5vcGVyYXRpb24gPSBvcGVyYXRpb247XHJcblx0XHR0aGlzLm9uQ29uZmlybSA9IG9uQ29uZmlybTtcclxuXHR9XHJcblxyXG5cdG9uT3BlbigpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cclxuXHRcdGNvbnN0IG9wZXJhdGlvbk5hbWUgPSB0aGlzLm9wZXJhdGlvbiA9PT0gJ2RyYWZ0JyA/ICdtYXJrIGFzIGRyYWZ0JyA6ICdtYXJrIGFzIHB1Ymxpc2hlZCc7XHJcblx0XHRjb25zdCBoZWFkaW5nVGV4dCA9IG9wZXJhdGlvbk5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBvcGVyYXRpb25OYW1lLnNsaWNlKDEpO1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKS5zZXROYW1lKGBDb25maXJtICR7aGVhZGluZ1RleHR9YCkuc2V0SGVhZGluZygpO1xyXG5cclxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHtcclxuXHRcdFx0dGV4dDogYEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byAke29wZXJhdGlvbk5hbWV9ICR7dGhpcy5maWxlcy5sZW5ndGh9IGZpbGUke3RoaXMuZmlsZXMubGVuZ3RoICE9PSAxID8gJ3MnIDogJyd9P2BcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFNob3cgZmlsZSBsaXN0IChsaW1pdGVkIHRvIDIwKVxyXG5cdFx0aWYgKHRoaXMuZmlsZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRjb25zdCBmaWxlc0xpc3QgPSBjb250ZW50RWwuY3JlYXRlRWwoJ3VsJywgeyBjbHM6ICdiYXNlcy1jbXMtZGVsZXRpb24tbGlzdCcgfSk7XHJcblx0XHRcdGZvciAoY29uc3QgZmlsZVBhdGggb2YgdGhpcy5maWxlcy5zbGljZSgwLCAyMCkpIHtcclxuXHRcdFx0XHRjb25zdCBsaSA9IGZpbGVzTGlzdC5jcmVhdGVFbCgnbGknKTtcclxuXHRcdFx0XHRsaS5zZXRUZXh0KGZpbGVQYXRoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAodGhpcy5maWxlcy5sZW5ndGggPiAyMCkge1xyXG5cdFx0XHRcdGZpbGVzTGlzdC5jcmVhdGVFbCgnbGknLCB7XHJcblx0XHRcdFx0XHR0ZXh0OiBgLi4uIGFuZCAke3RoaXMuZmlsZXMubGVuZ3RoIC0gMjB9IG1vcmUgZmlsZSR7dGhpcy5maWxlcy5sZW5ndGggLSAyMCAhPT0gMSA/ICdzJyA6ICcnfWBcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEJ1dHRvbnNcclxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcclxuXHRcdGJ1dHRvbkNvbnRhaW5lci5hZGRDbGFzcygnYmFzZXMtY21zLW1vZGFsLWJ1dHRvbi1jb250YWluZXInKTtcclxuXHJcblx0XHRjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicpO1xyXG5cdFx0Y2FuY2VsQnRuLnNldFRleHQoJ0NhbmNlbCcpO1xyXG5cdFx0Y2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuXHJcblx0XHRjb25zdCBjb25maXJtQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nKTtcclxuXHRcdGNvbmZpcm1CdG4uc2V0VGV4dCgnQ29uZmlybScpO1xyXG5cdFx0Y29uZmlybUJ0bi5hZGRDbGFzcygnbW9kLWN0YScpO1xyXG5cdFx0Y29uZmlybUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0dGhpcy5vbkNvbmZpcm0oKTtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRvbkNsb3NlKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHR9XHJcbn1cclxuXHJcblxyXG4iLCAiaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyByZWFkQ01TU2V0dGluZ3MgfSBmcm9tICcuLi9zaGFyZWQvc2V0dGluZ3Mtc2NoZW1hJztcclxuaW1wb3J0IHR5cGUgeyBCYXNlc0NNU1NldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5cclxuLy8gQmFzZXMgY29uZmlnIG9iamVjdCBpbnRlcmZhY2VcclxuaW50ZXJmYWNlIEJhc2VzQ29uZmlnIHtcclxuXHRnZXQoa2V5OiBzdHJpbmcpOiB1bmtub3duO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0dXAgaW50ZXJjZXB0b3IgZm9yIG5ldyBub3RlIGJ1dHRvbiBjbGlja3NcclxuICogSGFuZGxlcyBjdXN0b20gbmV3IG5vdGUgbG9jYXRpb24gc2V0dGluZ3NcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXR1cE5ld05vdGVJbnRlcmNlcHRvcihcclxuXHRhcHA6IEFwcCxcclxuXHRjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXHJcblx0Y29uZmlnOiBCYXNlc0NvbmZpZyxcclxuXHRwbHVnaW5TZXR0aW5nczogQmFzZXNDTVNTZXR0aW5ncyxcclxuXHRyZWdpc3RlckNsZWFudXA6IChjbGVhbnVwOiAoKSA9PiB2b2lkKSA9PiB2b2lkXHJcbik6IHZvaWQge1xyXG5cdC8vIEludGVyY2VwdCBjbGlja3Mgb24gdGhlIG5ldyBidXR0b24gLSB1c2UgY2FwdHVyZSBwaGFzZSB0byBjYXRjaCBiZWZvcmUgQmFzZXNcclxuXHRjb25zdCBpbnRlcmNlcHROZXdCdXR0b24gPSAoZTogTW91c2VFdmVudCkgPT4ge1xyXG5cdFx0Y29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcclxuXHRcdC8vIFRyeSBtdWx0aXBsZSBzZWxlY3RvcnMgZm9yIHRoZSBuZXcgYnV0dG9uIC0gQmFzZXMgbWlnaHQgdXNlIGRpZmZlcmVudCBzdHJ1Y3R1cmVzXHJcblx0XHRjb25zdCBidXR0b25FbCA9IHRhcmdldC5jbG9zZXN0KCcuYmFzZXMtdG9vbGJhci1uZXctaXRlbS1tZW51LCAuYmFzZXMtdG9vbGJhci1uZXctaXRlbS1tZW51IC50ZXh0LWljb24tYnV0dG9uLCBbZGF0YS1hY3Rpb249XCJuZXctaXRlbVwiXSwgYnV0dG9uW2FyaWEtbGFiZWwqPVwibmV3XCJdLCBidXR0b25bYXJpYS1sYWJlbCo9XCJOZXdcIl0sIC5iYXNlcy10b29sYmFyIGJ1dHRvbicpO1xyXG5cdFx0XHJcblx0XHRpZiAoIWJ1dHRvbkVsKSB7XHJcblx0XHRcdHJldHVybjsgLy8gTm90IHRoZSBuZXcgYnV0dG9uXHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIERvbid0IGludGVyZmVyZSB3aXRoIGNsaWNrcyBpbnNpZGUgdGhlIGJ1bGsgdG9vbGJhciBvciBvdGhlciBDTVMgZWxlbWVudHNcclxuXHRcdGlmICh0YXJnZXQuY2xvc2VzdCgnLmJhc2VzLWNtcy1idWxrLXRvb2xiYXIsIC5iYXNlcy1jbXMtY29udGFpbmVyIC5jYXJkJykpIHtcclxuXHRcdFx0cmV0dXJuOyAvLyBMZXQgdGhlc2UgY2xpY2tzIHdvcmsgbm9ybWFsbHlcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gQ2hlY2sgaWYgdGhpcyBjbGljayBpcyBmb3IgT1VSIHNwZWNpZmljIHZpZXcgaW5zdGFuY2VcclxuXHRcdC8vIEdldCB0aGUgYWN0aXZlIHZpZXcgdG8gc2VlIHdoaWNoIG9uZSBpcyBhY3R1YWxseSBhY3RpdmVcclxuXHRcdGNvbnN0IGFjdGl2ZUxlYWYgPSAoYXBwLndvcmtzcGFjZSBhcyB1bmtub3duIGFzIHsgYWN0aXZlTGVhZj86IHsgdmlldz86IHsgY29udGFpbmVyRWw/OiBIVE1MRWxlbWVudDsgcmVhZG9ubHkgdHlwZT86IHN0cmluZyB9IH0gfSkuYWN0aXZlTGVhZjtcclxuXHRcdGNvbnN0IGFjdGl2ZVZpZXcgPSBhY3RpdmVMZWFmPy52aWV3O1xyXG5cdFx0Y29uc3QgYWN0aXZlVmlld0NvbnRhaW5lciA9IGFjdGl2ZVZpZXc/LmNvbnRhaW5lckVsO1xyXG5cdFx0XHJcblx0XHQvLyBGSVJTVDogT25seSBpbnRlcmNlcHQgaWYgdGhlIGFjdGl2ZSB2aWV3IGlzIGEgQ01TIHZpZXcgKHR5cGUgPT09ICdiYXNlcy1jbXMnKVxyXG5cdFx0Ly8gVGhpcyBwcmV2ZW50cyBpbnRlcmNlcHRpbmcgd2hlbiB1c2VyIHN3aXRjaGVzIHRvIHRhYmxlL2NhcmRzIHZpZXdcclxuXHRcdC8vIENoZWNrIHRoZSBjb250YWluZXIgZm9yIHRoZSBDTVMgY2xhc3MgYXMgYSBmYWxsYmFjayBpZiB0eXBlIGlzbid0IGF2YWlsYWJsZVxyXG5cdFx0Y29uc3QgaXNDTVNWaWV3ID0gYWN0aXZlVmlldz8udHlwZSA9PT0gJ2Jhc2VzLWNtcycgfHwgXHJcblx0XHRcdChhY3RpdmVWaWV3Q29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKCcuYmFzZXMtY21zLWNvbnRhaW5lcicpICE9PSBudWxsKTtcclxuXHRcdFxyXG5cdFx0aWYgKCFpc0NNU1ZpZXcpIHtcclxuXHRcdFx0cmV0dXJuOyAvLyBOb3QgYSBDTVMgdmlldywgbGV0IEJhc2VzIGhhbmRsZSBpdCBub3JtYWxseSAoZG9uJ3QgcHJldmVudCBkZWZhdWx0KVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBTRUNPTkQ6IENoZWNrIGlmIG91ciBjb250YWluZXIgaXMgd2l0aGluIHRoZSBhY3RpdmUgdmlldydzIGNvbnRhaW5lciwgb3IgaWYgdGhleSdyZSB0aGUgc2FtZVxyXG5cdFx0Ly8gVGhlIGFjdGl2ZSB2aWV3J3MgY29udGFpbmVyRWwgaXMgdXN1YWxseSB3b3Jrc3BhY2UtbGVhZi1jb250ZW50LCBhbmQgb3VyIGNvbnRhaW5lciBpcyBpbnNpZGUgaXRcclxuXHRcdGNvbnN0IGlzT3VyVmlldyA9IGFjdGl2ZVZpZXdDb250YWluZXIgJiYgKFxyXG5cdFx0XHRhY3RpdmVWaWV3Q29udGFpbmVyID09PSBjb250YWluZXJFbCB8fCBcclxuXHRcdFx0YWN0aXZlVmlld0NvbnRhaW5lci5jb250YWlucyhjb250YWluZXJFbCkgfHxcclxuXHRcdFx0Y29udGFpbmVyRWwuY29udGFpbnMoYWN0aXZlVmlld0NvbnRhaW5lcilcclxuXHRcdCk7XHJcblx0XHRcclxuXHRcdGlmICghaXNPdXJWaWV3KSB7XHJcblx0XHRcdHJldHVybjsgLy8gTm90IG91ciB2aWV3XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIEdldCB0aGUgY29uZmlnIGZyb20gdGhlIHZpZXcgaW5zdGFuY2Ugc3RvcmVkIG9uIHRoZSBjb250YWluZXIgLSB0aGlzIGVuc3VyZXMgd2UgZ2V0IHRoZSBjdXJyZW50IGNvbmZpZ1xyXG5cdFx0Y29uc3QgY29udGFpbmVyV2l0aFZpZXcgPSBjb250YWluZXJFbCBhcyB1bmtub3duIGFzIHsgXHJcblx0XHRcdF9fY21zQ29uZmlnPzogQmFzZXNDb25maWc7XHJcblx0XHRcdF9fY21zVmlldz86IHsgY29uZmlnPzogQmFzZXNDb25maWcgfTtcclxuXHRcdH07XHJcblx0XHRcclxuXHRcdC8vIFRyeSB0byBnZXQgY29uZmlnIGZyb20gdGhlIHZpZXcgaW5zdGFuY2UgZmlyc3QgKG1vc3QgcmVsaWFibGUpXHJcblx0XHRjb25zdCB2aWV3SW5zdGFuY2UgPSBjb250YWluZXJXaXRoVmlldy5fX2Ntc1ZpZXc7XHJcblx0XHRjb25zdCB2aWV3Q29uZmlnID0gdmlld0luc3RhbmNlPy5jb25maWcgfHwgY29udGFpbmVyV2l0aFZpZXcuX19jbXNDb25maWcgfHwgY29uZmlnO1xyXG5cdFx0XHJcblx0XHRjb25zdCBzZXR0aW5ncyA9IHJlYWRDTVNTZXR0aW5ncyh2aWV3Q29uZmlnLCBwbHVnaW5TZXR0aW5ncyk7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgd2UgbmVlZCB0byBpbnRlcmNlcHQ6IGVpdGhlciBcIk9wZW4gbmV3IG5vdGVzIGRpcmVjdGx5XCIgaXMgZW5hYmxlZCwgb3IgYSBsb2NhdGlvbiBpcyBzcGVjaWZpZWRcclxuXHRcdGNvbnN0IGhhc0N1c3RvbUxvY2F0aW9uID0gc2V0dGluZ3MubmV3Tm90ZUxvY2F0aW9uICYmIHNldHRpbmdzLm5ld05vdGVMb2NhdGlvbi50cmltKCkgIT09ICcnO1xyXG5cdFx0XHJcblx0XHRpZiAoc2V0dGluZ3MuY3VzdG9taXplTmV3QnV0dG9uIHx8IGhhc0N1c3RvbUxvY2F0aW9uKSB7XHJcblx0XHRcdC8vIFByZXZlbnQgZGVmYXVsdCB0byBoYW5kbGUgbm90ZSBjcmVhdGlvbiBvdXJzZWx2ZXNcclxuXHRcdFx0Ly8gKFdlIG11c3QgaW50ZXJjZXB0IGlmIGxvY2F0aW9uIGlzIHNldCwgZXZlbiBpZiBcIk9wZW4gbmV3IG5vdGVzIGRpcmVjdGx5XCIgaXMgb2ZmLFxyXG5cdFx0XHQvLyBiZWNhdXNlIEJhc2VzIG1vZGFsIGRvZXNuJ3Qgc3VwcG9ydCBjdXN0b20gbG9jYXRpb25zKVxyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBIYW5kbGUgdGhlIG5vdGUgY3JlYXRpb24gYXN5bmNocm9ub3VzbHlcclxuXHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGxvY2F0aW9uSW5wdXQgPSBzZXR0aW5ncy5uZXdOb3RlTG9jYXRpb24/LnRyaW0oKSB8fCAnJztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBJZiBsb2NhdGlvbiBpcyBlbXB0eSBhbmQgXCJPcGVuIG5ldyBub3RlcyBkaXJlY3RseVwiIGlzIG9mZiwgdXNlIE9ic2lkaWFuJ3MgZGVmYXVsdFxyXG5cdFx0XHRcdC8vIChUaGlzIGNhc2Ugc2hvdWxkIGJlIHJhcmUgc2luY2Ugd2Ugb25seSBpbnRlcmNlcHQgaWYgbG9jYXRpb24gaXMgc2V0IG9yIG9wdGlvbiBpcyBvbilcclxuXHRcdFx0XHRpZiAobG9jYXRpb25JbnB1dCA9PT0gJycgJiYgIXNldHRpbmdzLmN1c3RvbWl6ZU5ld0J1dHRvbikge1xyXG5cdFx0XHRcdFx0Ly8gVXNlIE9ic2lkaWFuJ3MgZGVmYXVsdCBuZXcgbm90ZSBsb2NhdGlvblxyXG5cdFx0XHRcdFx0Y29uc3QgdmF1bHRDb25maWcgPSAoYXBwLnZhdWx0IGFzIHsgY29uZmlnPzogeyBuZXdGaWxlTG9jYXRpb24/OiBzdHJpbmc7IG5ld0ZpbGVGb2xkZXJQYXRoPzogc3RyaW5nIH0gfSkuY29uZmlnO1xyXG5cdFx0XHRcdFx0Y29uc3QgbmV3RmlsZUxvY2F0aW9uID0gdmF1bHRDb25maWc/Lm5ld0ZpbGVMb2NhdGlvbiB8fCAnZm9sZGVyJztcclxuXHRcdFx0XHRcdGNvbnN0IG5ld0ZpbGVGb2xkZXJQYXRoID0gdmF1bHRDb25maWc/Lm5ld0ZpbGVGb2xkZXJQYXRoIHx8ICcnO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRsZXQgZmlsZVBhdGggPSAnVW50aXRsZWQubWQnO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAobmV3RmlsZUxvY2F0aW9uID09PSAnZm9sZGVyJyAmJiBuZXdGaWxlRm9sZGVyUGF0aCkge1xyXG5cdFx0XHRcdFx0XHRmaWxlUGF0aCA9IGAke25ld0ZpbGVGb2xkZXJQYXRofS9VbnRpdGxlZC5tZGA7XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKG5ld0ZpbGVMb2NhdGlvbiA9PT0gJ2N1cnJlbnQnKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuXHRcdFx0XHRcdFx0aWYgKGFjdGl2ZUZpbGUgJiYgYWN0aXZlRmlsZS5wYXJlbnQpIHtcclxuXHRcdFx0XHRcdFx0XHRmaWxlUGF0aCA9IGAke2FjdGl2ZUZpbGUucGFyZW50LnBhdGh9L1VudGl0bGVkLm1kYDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSBlbHNlIGlmIChuZXdGaWxlTG9jYXRpb24gPT09ICdyb290Jykge1xyXG5cdFx0XHRcdFx0XHRmaWxlUGF0aCA9ICdVbnRpdGxlZC5tZCc7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGNvbnN0IGZpbGUgPSBhd2FpdCBhcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCAnJyk7XHJcblx0XHRcdFx0XHQvLyBPbmx5IG9wZW4gZGlyZWN0bHkgaWYgXCJPcGVuIG5ldyBub3RlcyBkaXJlY3RseVwiIGlzIGVuYWJsZWRcclxuXHRcdFx0XHRcdGlmIChzZXR0aW5ncy5jdXN0b21pemVOZXdCdXR0b24pIHtcclxuXHRcdFx0XHRcdFx0YXdhaXQgYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQoZmlsZS5wYXRoLCAnJywgZmFsc2UpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBJZiBsb2NhdGlvbiBpcyBcIi9cIiBvciBqdXN0IHNsYXNoZXMsIHVzZSB2YXVsdCByb290XHJcblx0XHRcdFx0aWYgKGxvY2F0aW9uSW5wdXQgPT09ICcvJyB8fCBsb2NhdGlvbklucHV0LnJlcGxhY2UoL1xcLy9nLCAnJykgPT09ICcnKSB7XHJcblx0XHRcdFx0XHRjb25zdCBuZXdGaWxlID0gYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZSgnVW50aXRsZWQubWQnLCAnJyk7XHJcblx0XHRcdFx0XHQvLyBPbmx5IG9wZW4gZGlyZWN0bHkgaWYgXCJPcGVuIG5ldyBub3RlcyBkaXJlY3RseVwiIGlzIGVuYWJsZWRcclxuXHRcdFx0XHRcdGlmIChzZXR0aW5ncy5jdXN0b21pemVOZXdCdXR0b24pIHtcclxuXHRcdFx0XHRcdFx0YXdhaXQgYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQobmV3RmlsZS5wYXRoLCAnJywgZmFsc2UpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBPdGhlcndpc2UsIHVzZSB0aGUgc3BlY2lmaWVkIGZvbGRlclxyXG5cdFx0XHRcdGNvbnN0IGZvbGRlclBhdGggPSBsb2NhdGlvbklucHV0LnJlcGxhY2UoL15cXC8rfFxcLyskL2csICcnKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRsZXQgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoIWZvbGRlciB8fCAhKCdjaGlsZHJlbicgaW4gZm9sZGVyKSkge1xyXG5cdFx0XHRcdFx0YXdhaXQgYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXJQYXRoKTtcclxuXHRcdFx0XHRcdGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChmb2xkZXIgJiYgJ2NoaWxkcmVuJyBpbiBmb2xkZXIpIHtcclxuXHRcdFx0XHRcdGNvbnN0IG5ld0ZpbGUgPSBhd2FpdCBhcHAudmF1bHQuY3JlYXRlKGAke2ZvbGRlclBhdGh9L1VudGl0bGVkLm1kYCwgJycpO1xyXG5cdFx0XHRcdFx0Ly8gT25seSBvcGVuIGRpcmVjdGx5IGlmIFwiT3BlbiBuZXcgbm90ZXMgZGlyZWN0bHlcIiBpcyBlbmFibGVkXHJcblx0XHRcdFx0XHRpZiAoc2V0dGluZ3MuY3VzdG9taXplTmV3QnV0dG9uKSB7XHJcblx0XHRcdFx0XHRcdGF3YWl0IGFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KG5ld0ZpbGUucGF0aCwgJycsIGZhbHNlKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pKCkuY2F0Y2goKGVycm9yKSA9PiB7XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcignW0NNU10gRXJyb3IgY3JlYXRpbmcgbmV3IG5vdGU6JywgZXJyb3IpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBBZGQgZXZlbnQgbGlzdGVuZXIgdG8gZG9jdW1lbnQgd2l0aCBjYXB0dXJlIHBoYXNlIHRvIGludGVyY2VwdCBiZWZvcmUgQmFzZXNcclxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGludGVyY2VwdE5ld0J1dHRvbiBhcyBFdmVudExpc3RlbmVyLCB0cnVlKTtcclxuXHRcclxuXHQvLyBBbHNvIHRyeSB0byBpbnRlcmNlcHQgb24gdGhlIGJ1dHRvbiBkaXJlY3RseSB3aGVuIGl0IGFwcGVhcnNcclxuXHRjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcclxuXHRcdGNvbnN0IGJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYmFzZXMtdG9vbGJhci1uZXctaXRlbS1tZW51LCAuYmFzZXMtdG9vbGJhci1uZXctaXRlbS1tZW51IC50ZXh0LWljb24tYnV0dG9uLCBbZGF0YS1hY3Rpb249XCJuZXctaXRlbVwiXScpO1xyXG5cdFx0YnV0dG9ucy5mb3JFYWNoKChidXR0b25FbCkgPT4ge1xyXG5cdFx0XHRjb25zdCBidXR0b25XaXRoRmxhZyA9IGJ1dHRvbkVsIGFzIHVua25vd24gYXMgeyBfX2Ntc0ludGVyY2VwdGVkPzogYm9vbGVhbiB9O1xyXG5cdFx0XHRpZiAoIWJ1dHRvbldpdGhGbGFnLl9fY21zSW50ZXJjZXB0ZWQpIHtcclxuXHRcdFx0XHRidXR0b25XaXRoRmxhZy5fX2Ntc0ludGVyY2VwdGVkID0gdHJ1ZTtcclxuXHRcdFx0XHRidXR0b25FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGludGVyY2VwdE5ld0J1dHRvbiBhcyBFdmVudExpc3RlbmVyLCB0cnVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSk7XHJcblxyXG5cdG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwgeyBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUgfSk7XHJcblx0XHJcblx0Ly8gQ2hlY2sgaW1tZWRpYXRlbHlcclxuXHRjb25zdCBidXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJhc2VzLXRvb2xiYXItbmV3LWl0ZW0tbWVudSwgLmJhc2VzLXRvb2xiYXItbmV3LWl0ZW0tbWVudSAudGV4dC1pY29uLWJ1dHRvbiwgW2RhdGEtYWN0aW9uPVwibmV3LWl0ZW1cIl0nKTtcclxuXHRidXR0b25zLmZvckVhY2goKGJ1dHRvbkVsKSA9PiB7XHJcblx0XHRjb25zdCBidXR0b25XaXRoRmxhZyA9IGJ1dHRvbkVsIGFzIHVua25vd24gYXMgeyBfX2Ntc0ludGVyY2VwdGVkPzogYm9vbGVhbiB9O1xyXG5cdFx0aWYgKCFidXR0b25XaXRoRmxhZy5fX2Ntc0ludGVyY2VwdGVkKSB7XHJcblx0XHRcdGJ1dHRvbldpdGhGbGFnLl9fY21zSW50ZXJjZXB0ZWQgPSB0cnVlO1xyXG5cdFx0XHRidXR0b25FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGludGVyY2VwdE5ld0J1dHRvbiBhcyBFdmVudExpc3RlbmVyLCB0cnVlKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHRcclxuXHQvLyBSZWdpc3RlciBjbGVhbnVwXHJcblx0cmVnaXN0ZXJDbGVhbnVwKCgpID0+IHtcclxuXHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaW50ZXJjZXB0TmV3QnV0dG9uIGFzIEV2ZW50TGlzdGVuZXIsIHRydWUpO1xyXG5cdFx0b2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG5cdH0pO1xyXG59XHJcblxyXG5cclxuIiwgIi8qKlxyXG4gKiBQcm9wZXJ0eSBUb2dnbGUgSGFuZGxlclxyXG4gKiBIYW5kbGVzIHRvZ2dsaW5nIHByb3BlcnRpZXMgb24gZmlsZXMgKGluY2x1ZGluZyBkcmFmdCBzdGF0dXMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgcmVhZENNU1NldHRpbmdzIH0gZnJvbSAnLi4vc2hhcmVkL3NldHRpbmdzLXNjaGVtYSc7XHJcbmltcG9ydCB0eXBlIHsgQmFzZXNDTVNTZXR0aW5ncyB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgcHJvY2Vzc0ZpbGVGcm9udE1hdHRlciB9IGZyb20gJy4vZnJvbnRtYXR0ZXItaGVscGVyJztcclxuXHJcbmludGVyZmFjZSBCYXNlc0NvbmZpZyB7XHJcblx0Z2V0KGtleTogc3RyaW5nKTogdW5rbm93bjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFByb3BlcnR5VG9nZ2xlSGFuZGxlciB7XHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRwcml2YXRlIGFwcDogQXBwLFxyXG5cdFx0cHJpdmF0ZSBjb25maWc6IEJhc2VzQ29uZmlnLFxyXG5cdFx0cHJpdmF0ZSBwbHVnaW5TZXR0aW5nczogQmFzZXNDTVNTZXR0aW5ncyxcclxuXHRcdHByaXZhdGUgb25SZWZyZXNoOiAoKSA9PiB2b2lkXHJcblx0KSB7fVxyXG5cclxuXHRhc3luYyBoYW5kbGVQcm9wZXJ0eVRvZ2dsZShwYXRoOiBzdHJpbmcsIHByb3BlcnR5OiBzdHJpbmcsIHZhbHVlOiB1bmtub3duKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xyXG5cdFx0XHRpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSByZXR1cm47XHJcblxyXG5cdFx0XHQvLyBTdHJpcCBcIm5vdGUuXCIgcHJlZml4IGlmIHByZXNlbnQgKEJhc2VzIHVzZXMgXCJub3RlLnByb3BlcnR5XCIgYnV0IGZyb250bWF0dGVyIHVzZXMganVzdCBcInByb3BlcnR5XCIpXHJcblx0XHRcdGNvbnN0IGNsZWFuUHJvcGVydHkgPSBwcm9wZXJ0eS5zdGFydHNXaXRoKCdub3RlLicpID8gcHJvcGVydHkuc3Vic3RyaW5nKDUpIDogcHJvcGVydHk7XHJcblxyXG5cdFx0XHQvLyBSZWFkIHNldHRpbmdzIHRvIGNoZWNrIGlmIHRoaXMgaXMgdGhlIGRyYWZ0IHByb3BlcnR5XHJcblx0XHRcdGNvbnN0IHNldHRpbmdzID0gcmVhZENNU1NldHRpbmdzKFxyXG5cdFx0XHRcdHRoaXMuY29uZmlnLFxyXG5cdFx0XHRcdHRoaXMucGx1Z2luU2V0dGluZ3NcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgdGhlIGRyYWZ0IHN0YXR1cyBwcm9wZXJ0eVxyXG5cdFx0XHRjb25zdCBpc0RyYWZ0UHJvcGVydHkgPSBzZXR0aW5ncy5zaG93RHJhZnRTdGF0dXMgJiYgY2xlYW5Qcm9wZXJ0eSA9PT0gJ2RyYWZ0JztcclxuXHRcdFx0bGV0IHNob3VsZFJlZnJlc2ggPSBmYWxzZTtcclxuXHJcblx0XHRcdGlmIChpc0RyYWZ0UHJvcGVydHkpIHtcclxuXHRcdFx0XHQvLyBDaGVjayBpZiB1c2luZyBmaWxlbmFtZSBwcmVmaXggbW9kZVxyXG5cdFx0XHRcdGlmIChzZXR0aW5ncy5kcmFmdFN0YXR1c1VzZUZpbGVuYW1lUHJlZml4KSB7XHJcblx0XHRcdFx0XHQvLyBBbHdheXMgdXNlIGZpbGVuYW1lLWJhc2VkIGRldGVjdGlvbiB3aGVuIHRoaXMgc2V0dGluZyBpcyBlbmFibGVkXHJcblx0XHRcdFx0XHRjb25zdCBmaWxlTmFtZSA9IGZpbGUuYmFzZW5hbWU7IC8vIGJhc2VuYW1lIGV4Y2x1ZGVzIGV4dGVuc2lvblxyXG5cdFx0XHRcdFx0Y29uc3Qgc3RhcnRzV2l0aFVuZGVyc2NvcmUgPSBmaWxlTmFtZS5zdGFydHNXaXRoKCdfJyk7XHJcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50UGF0aCA9IGZpbGUucGF0aDtcclxuXHRcdFx0XHRcdGNvbnN0IHBhdGhQYXJ0cyA9IGN1cnJlbnRQYXRoLnNwbGl0KCcvJyk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFRvZ2dsZSBiYXNlZCBvbiBkZXNpcmVkIHN0YXRlOiBpZiB2YWx1ZSBpcyB0cnVlIChkcmFmdCksIGVuc3VyZSB1bmRlcnNjb3JlOyBpZiBmYWxzZSAocHVibGlzaGVkKSwgcmVtb3ZlIGl0XHJcblx0XHRcdFx0XHRpZiAodmFsdWUgPT09IHRydWUpIHtcclxuXHRcdFx0XHRcdFx0Ly8gVG9nZ2xpbmcgdG8gZHJhZnQgLSBhZGQgdW5kZXJzY29yZSBpZiBub3QgcHJlc2VudFxyXG5cdFx0XHRcdFx0XHRpZiAoIXN0YXJ0c1dpdGhVbmRlcnNjb3JlKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbmV3TmFtZSA9IGBfJHtmaWxlTmFtZX0ke2ZpbGUuZXh0ZW5zaW9uID8gYC4ke2ZpbGUuZXh0ZW5zaW9ufWAgOiAnJ31gO1xyXG5cdFx0XHRcdFx0XHRcdHBhdGhQYXJ0c1twYXRoUGFydHMubGVuZ3RoIC0gMV0gPSBuZXdOYW1lO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG5ld1BhdGggPSBwYXRoUGFydHMuam9pbignLycpO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoZmlsZSwgbmV3UGF0aCk7XHJcblx0XHRcdFx0XHRcdFx0c2hvdWxkUmVmcmVzaCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdC8vIFRvZ2dsaW5nIHRvIHB1Ymxpc2hlZCAtIHJlbW92ZSB1bmRlcnNjb3JlIGlmIHByZXNlbnRcclxuXHRcdFx0XHRcdFx0aWYgKHN0YXJ0c1dpdGhVbmRlcnNjb3JlKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbmV3TmFtZSA9IGZpbGVOYW1lLnN1YnN0cmluZygxKSArIChmaWxlLmV4dGVuc2lvbiA/IGAuJHtmaWxlLmV4dGVuc2lvbn1gIDogJycpO1xyXG5cdFx0XHRcdFx0XHRcdHBhdGhQYXJ0c1twYXRoUGFydHMubGVuZ3RoIC0gMV0gPSBuZXdOYW1lO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG5ld1BhdGggPSBwYXRoUGFydHMuam9pbignLycpO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoZmlsZSwgbmV3UGF0aCk7XHJcblx0XHRcdFx0XHRcdFx0c2hvdWxkUmVmcmVzaCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gVXNlIHByb3BlcnR5LWJhc2VkIGRldGVjdGlvbiAoZnJvbnRtYXR0ZXIpXHJcblx0XHRcdFx0XHRjb25zdCBjbGVhbkNvbmZpZ1Byb3BlcnR5ID0gc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eSAmJiBzZXR0aW5ncy5kcmFmdFN0YXR1c1Byb3BlcnR5LnRyaW0oKVxyXG5cdFx0XHRcdFx0XHQ/IChzZXR0aW5ncy5kcmFmdFN0YXR1c1Byb3BlcnR5LnN0YXJ0c1dpdGgoJ25vdGUuJykgXHJcblx0XHRcdFx0XHRcdFx0PyBzZXR0aW5ncy5kcmFmdFN0YXR1c1Byb3BlcnR5LnN1YnN0cmluZyg1KSBcclxuXHRcdFx0XHRcdFx0XHQ6IHNldHRpbmdzLmRyYWZ0U3RhdHVzUHJvcGVydHkpXHJcblx0XHRcdFx0XHRcdDogJ2RyYWZ0JztcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0YXdhaXQgcHJvY2Vzc0ZpbGVGcm9udE1hdHRlcih0aGlzLmFwcCwgZmlsZSwgKGZyb250bWF0dGVyKSA9PiB7XHJcblx0XHRcdFx0XHRcdGZyb250bWF0dGVyW2NsZWFuQ29uZmlnUHJvcGVydHldID0gdmFsdWU7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdHNob3VsZFJlZnJlc2ggPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBOb3JtYWwgcHJvcGVydHkgdG9nZ2xlIC0gdXBkYXRlIGZyb250bWF0dGVyXHJcblx0XHRcdFx0YXdhaXQgcHJvY2Vzc0ZpbGVGcm9udE1hdHRlcih0aGlzLmFwcCwgZmlsZSwgKGZyb250bWF0dGVyKSA9PiB7XHJcblx0XHRcdFx0XHRmcm9udG1hdHRlcltjbGVhblByb3BlcnR5XSA9IHZhbHVlO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdHNob3VsZFJlZnJlc2ggPSB0cnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBPbmx5IHJlZnJlc2ggaWYgd2UgYWN0dWFsbHkgbWFkZSBhIGNoYW5nZVxyXG5cdFx0XHRpZiAoc2hvdWxkUmVmcmVzaCkge1xyXG5cdFx0XHRcdC8vIFdhaXQgZm9yIG1ldGFkYXRhIGNhY2hlIHRvIHVwZGF0ZSwgdGhlbiByZWZyZXNoIHZpZXdcclxuXHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG5cdFx0XHRcdFx0d2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMub25SZWZyZXNoKCk7XHJcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3IgcmVmcmVzaGluZyB2aWV3IGFmdGVyIHByb3BlcnR5IHRvZ2dsZTonLCBlcnJvcik7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0sIDEwMCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHRvZ2dsaW5nIHByb3BlcnR5OicsIGVycm9yKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcblxyXG4iLCAiLyoqXHJcbiAqIFNjcm9sbCBhbmQgTGF5b3V0IE1hbmFnZXJcclxuICogSGFuZGxlcyBpbmZpbml0ZSBzY3JvbGwgYW5kIHJlc3BvbnNpdmUgZ3JpZCBsYXlvdXRcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB0eXBlIHsgQ01TU2V0dGluZ3MgfSBmcm9tICcuLi9zaGFyZWQvZGF0YS10cmFuc2Zvcm0nO1xyXG5pbXBvcnQgeyByZWFkQ01TU2V0dGluZ3MgfSBmcm9tICcuLi9zaGFyZWQvc2V0dGluZ3Mtc2NoZW1hJztcclxuaW1wb3J0IHR5cGUgeyBCYXNlc0NNU1NldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5cclxuaW50ZXJmYWNlIEJhc2VzQ29uZmlnIHtcclxuXHRnZXQoa2V5OiBzdHJpbmcpOiB1bmtub3duO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2Nyb2xsTGF5b3V0TWFuYWdlciB7XHJcblx0cHJpdmF0ZSBzY3JvbGxMaXN0ZW5lcjogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XHJcblx0cHJpdmF0ZSBzY3JvbGxUaHJvdHRsZVRpbWVvdXQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgcmVzaXplT2JzZXJ2ZXI6IFJlc2l6ZU9ic2VydmVyIHwgbnVsbCA9IG51bGw7XHJcblx0cHJpdmF0ZSB3aW5kb3dSZXNpemVIYW5kbGVyOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIGlzTG9hZGluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdHByaXZhdGUgZGlzcGxheWVkQ291bnQ6IG51bWJlciA9IDUwO1xyXG5cdHByaXZhdGUgdG90YWxFbnRyaWVzOiBudW1iZXIgPSAwO1xyXG5cdHByaXZhdGUgY29uZmlnOiBCYXNlc0NvbmZpZztcclxuXHRwcml2YXRlIGNvbmZpZ1BvbGxJbnRlcnZhbDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XHJcblx0cHJpdmF0ZSBsYXN0Q2FyZFNpemU6IG51bWJlciB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgbGFzdEltYWdlQXNwZWN0UmF0aW86IG51bWJlciB8IG51bGwgPSBudWxsO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdHByaXZhdGUgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LFxyXG5cdFx0cHJpdmF0ZSBhcHA6IEFwcCxcclxuXHRcdGNvbmZpZzogQmFzZXNDb25maWcsXHJcblx0XHRwcml2YXRlIHBsdWdpblNldHRpbmdzOiBCYXNlc0NNU1NldHRpbmdzLFxyXG5cdFx0cHJpdmF0ZSBvbkxvYWRNb3JlOiAoKSA9PiB2b2lkLFxyXG5cdFx0cHJpdmF0ZSByZWdpc3RlckNsZWFudXA6IChjbGVhbnVwOiAoKSA9PiB2b2lkKSA9PiB2b2lkXHJcblx0KSB7XHJcblx0XHR0aGlzLmNvbmZpZyA9IGNvbmZpZztcclxuXHRcdGNvbnN0IGlzTW9iaWxlID0gKHRoaXMuYXBwIGFzIHsgaXNNb2JpbGU/OiBib29sZWFuIH0pLmlzTW9iaWxlID8/IGZhbHNlO1xyXG5cdFx0dGhpcy5kaXNwbGF5ZWRDb3VudCA9IGlzTW9iaWxlID8gMjUgOiA1MDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSB0aGUgY29uZmlnIHJlZmVyZW5jZSAodXNlZnVsIHdoZW4gY29uZmlnIGJlY29tZXMgYXZhaWxhYmxlIGFmdGVyIGNvbnN0cnVjdGlvbilcclxuXHQgKi9cclxuXHR1cGRhdGVDb25maWcoY29uZmlnOiBCYXNlc0NvbmZpZyk6IHZvaWQge1xyXG5cdFx0dGhpcy5jb25maWcgPSBjb25maWc7XHJcblx0fVxyXG5cclxuXHRzZXREaXNwbGF5ZWRDb3VudChjb3VudDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHR0aGlzLmRpc3BsYXllZENvdW50ID0gY291bnQ7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZXNldCBkaXNwbGF5ZWQgY291bnQgYW5kIHNjcm9sbCBwb3NpdGlvblxyXG5cdCAqL1xyXG5cdHJlc2V0U2Nyb2xsKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgaXNNb2JpbGUgPSAodGhpcy5hcHAgYXMgeyBpc01vYmlsZT86IGJvb2xlYW4gfSkuaXNNb2JpbGUgPz8gZmFsc2U7XHJcblx0XHR0aGlzLmRpc3BsYXllZENvdW50ID0gaXNNb2JpbGUgPyAyNSA6IDUwO1xyXG5cdFx0dGhpcy5jb250YWluZXJFbC5zY3JvbGxUb3AgPSAwO1xyXG5cdH1cclxuXHJcblx0Z2V0RGlzcGxheWVkQ291bnQoKTogbnVtYmVyIHtcclxuXHRcdHJldHVybiB0aGlzLmRpc3BsYXllZENvdW50O1xyXG5cdH1cclxuXHJcblx0c2V0SXNMb2FkaW5nKGxvYWRpbmc6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdHRoaXMuaXNMb2FkaW5nID0gbG9hZGluZztcclxuXHR9XHJcblxyXG5cdHNldHVwSW5maW5pdGVTY3JvbGwodG90YWxFbnRyaWVzOiBudW1iZXIpOiB2b2lkIHtcclxuXHRcdHRoaXMudG90YWxFbnRyaWVzID0gdG90YWxFbnRyaWVzO1xyXG5cdFx0XHJcblx0XHQvLyBDbGVhbiB1cCBleGlzdGluZyBsaXN0ZW5lclxyXG5cdFx0aWYgKHRoaXMuc2Nyb2xsTGlzdGVuZXIpIHtcclxuXHRcdFx0dGhpcy5jb250YWluZXJFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLnNjcm9sbExpc3RlbmVyKTtcclxuXHRcdFx0dGhpcy5zY3JvbGxMaXN0ZW5lciA9IG51bGw7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU2tpcCBpZiBhbGwgaXRlbXMgYWxyZWFkeSBkaXNwbGF5ZWRcclxuXHRcdGlmICh0aGlzLmRpc3BsYXllZENvdW50ID49IHRvdGFsRW50cmllcykge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIHNjcm9sbCBoYW5kbGVyIHdpdGggdGhyb3R0bGluZ1xyXG5cdFx0dGhpcy5zY3JvbGxMaXN0ZW5lciA9ICgpID0+IHtcclxuXHRcdFx0Ly8gVGhyb3R0bGU6IHNraXAgaWYgY29vbGRvd24gYWN0aXZlXHJcblx0XHRcdGlmICh0aGlzLnNjcm9sbFRocm90dGxlVGltZW91dCAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gU2tpcCBpZiBhbHJlYWR5IGxvYWRpbmdcclxuXHRcdFx0aWYgKHRoaXMuaXNMb2FkaW5nKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDYWxjdWxhdGUgZGlzdGFuY2UgZnJvbSBib3R0b21cclxuXHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gdGhpcy5jb250YWluZXJFbC5zY3JvbGxUb3A7XHJcblx0XHRcdGNvbnN0IHNjcm9sbEhlaWdodCA9IHRoaXMuY29udGFpbmVyRWwuc2Nyb2xsSGVpZ2h0O1xyXG5cdFx0XHRjb25zdCBjbGllbnRIZWlnaHQgPSB0aGlzLmNvbnRhaW5lckVsLmNsaWVudEhlaWdodDtcclxuXHRcdFx0Y29uc3QgZGlzdGFuY2VGcm9tQm90dG9tID0gc2Nyb2xsSGVpZ2h0IC0gKHNjcm9sbFRvcCArIGNsaWVudEhlaWdodCk7XHJcblxyXG5cdFx0XHQvLyBEeW5hbWljIHRocmVzaG9sZCBiYXNlZCBvbiB2aWV3cG9ydCBhbmQgZGV2aWNlXHJcblx0XHRcdGNvbnN0IGlzTW9iaWxlID0gKHRoaXMuYXBwIGFzIHsgaXNNb2JpbGU/OiBib29sZWFuIH0pLmlzTW9iaWxlID8/IGZhbHNlO1xyXG5cdFx0XHRjb25zdCB2aWV3cG9ydE11bHRpcGxpZXIgPSBpc01vYmlsZSA/IDEgOiAyO1xyXG5cdFx0XHRjb25zdCB0aHJlc2hvbGQgPSBjbGllbnRIZWlnaHQgKiB2aWV3cG9ydE11bHRpcGxpZXI7XHJcblxyXG5cdFx0XHQvLyBDaGVjayBpZiBzaG91bGQgbG9hZCBtb3JlXHJcblx0XHRcdGlmIChkaXN0YW5jZUZyb21Cb3R0b20gPCB0aHJlc2hvbGQgJiYgdGhpcy5kaXNwbGF5ZWRDb3VudCA8IHRvdGFsRW50cmllcykge1xyXG5cdFx0XHRcdHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcclxuXHRcdFx0XHRjb25zdCBiYXRjaFNpemUgPSA1MDtcclxuXHRcdFx0XHR0aGlzLmRpc3BsYXllZENvdW50ID0gTWF0aC5taW4odGhpcy5kaXNwbGF5ZWRDb3VudCArIGJhdGNoU2l6ZSwgdG90YWxFbnRyaWVzKTtcclxuXHRcdFx0XHQvLyBDYWxsIG9uTG9hZE1vcmUgd2hpY2ggd2lsbCB0cmlnZ2VyIG9uRGF0YVVwZGF0ZWRcclxuXHRcdFx0XHQvLyBvbkRhdGFVcGRhdGVkIHdpbGwgdGhlbiBjYWxsIHNldHVwSW5maW5pdGVTY3JvbGwgYWdhaW4gd2l0aCB1cGRhdGVkIGNvdW50XHJcblx0XHRcdFx0dGhpcy5vbkxvYWRNb3JlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFN0YXJ0IHRocm90dGxlIGNvb2xkb3duXHJcblx0XHRcdHRoaXMuc2Nyb2xsVGhyb3R0bGVUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuc2Nyb2xsVGhyb3R0bGVUaW1lb3V0ID0gbnVsbDtcclxuXHRcdFx0fSwgMTAwKTtcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gQXR0YWNoIGxpc3RlbmVyXHJcblx0XHR0aGlzLmNvbnRhaW5lckVsLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsTGlzdGVuZXIpO1xyXG5cclxuXHRcdC8vIFJlZ2lzdGVyIGNsZWFudXBcclxuXHRcdHRoaXMucmVnaXN0ZXJDbGVhbnVwKCgpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMuc2Nyb2xsTGlzdGVuZXIpIHtcclxuXHRcdFx0XHR0aGlzLmNvbnRhaW5lckVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsTGlzdGVuZXIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0aGlzLnNjcm9sbFRocm90dGxlVGltZW91dCAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5zY3JvbGxUaHJvdHRsZVRpbWVvdXQpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHNldHVwUmVzaXplT2JzZXJ2ZXIoKTogdm9pZCB7XHJcblx0XHQvLyBPbmx5IHNldCB1cCBvbmNlIC0gYnV0IG5vdyB3ZSBqdXN0IG5lZWQgdG8gc2V0IHRoZSBjYXJkIG1pbiB3aWR0aFxyXG5cdFx0Ly8gQ1NTIEdyaWQncyBhdXRvLWZpbGwgd2lsbCBoYW5kbGUgY29sdW1uIHNuYXBwaW5nIGF1dG9tYXRpY2FsbHlcclxuXHRcdGlmICh0aGlzLnJlc2l6ZU9ic2VydmVyKSB7XHJcblx0XHRcdHJldHVybjsgLy8gQWxyZWFkeSBzZXQgdXBcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDcmVhdGUgdGhlIHVwZGF0ZSBmdW5jdGlvbiAtIGp1c3Qgc2V0IGNhcmQgbWluIHdpZHRoLCBDU1MgR3JpZCBoYW5kbGVzIHRoZSByZXN0XHJcblx0XHRjb25zdCB1cGRhdGVHcmlkID0gKCkgPT4ge1xyXG5cdFx0XHQvLyBHdWFyZDogZW5zdXJlIGNvbmZpZyBleGlzdHMgYW5kIGhhcyBnZXQgbWV0aG9kIGJlZm9yZSB1c2luZyBpdFxyXG5cdFx0XHRpZiAoIXRoaXMuY29uZmlnIHx8IHR5cGVvZiB0aGlzLmNvbmZpZy5nZXQgIT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRyZXR1cm47IC8vIENvbmZpZyBub3QgcmVhZHkgeWV0LCBza2lwIHVwZGF0ZVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25zdCBjdXJyZW50U2V0dGluZ3MgPSByZWFkQ01TU2V0dGluZ3MoXHJcblx0XHRcdFx0dGhpcy5jb25maWcsXHJcblx0XHRcdFx0dGhpcy5wbHVnaW5TZXR0aW5nc1xyXG5cdFx0XHQpO1xyXG5cdFx0XHRjb25zdCBjYXJkTWluV2lkdGggPSBjdXJyZW50U2V0dGluZ3MuY2FyZFNpemU7XHJcblx0XHRcdGNvbnN0IGltYWdlQXNwZWN0UmF0aW8gPSBjdXJyZW50U2V0dGluZ3MuaW1hZ2VBc3BlY3RSYXRpbztcclxuXHJcblx0XHRcdC8vIFNldCBDU1MgdmFyaWFibGVzIG9uIGNvbnRhaW5lciAtIENTUyBHcmlkIGF1dG8tZmlsbCBoYW5kbGVzIGNvbHVtbiBzbmFwcGluZ1xyXG5cdFx0XHR0aGlzLmNvbnRhaW5lckVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhcmQtbWluLXdpZHRoJywgYCR7Y2FyZE1pbldpZHRofXB4YCk7XHJcblx0XHRcdHRoaXMuY29udGFpbmVyRWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tYmFzZXMtY21zLWltYWdlLWFzcGVjdC1yYXRpbycsIFN0cmluZyhpbWFnZUFzcGVjdFJhdGlvKSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBUcmFjayBsYXN0IHZhbHVlcyBmb3IgcG9sbGluZ1xyXG5cdFx0XHR0aGlzLmxhc3RDYXJkU2l6ZSA9IGNhcmRNaW5XaWR0aDtcclxuXHRcdFx0dGhpcy5sYXN0SW1hZ2VBc3BlY3RSYXRpbyA9IGltYWdlQXNwZWN0UmF0aW87XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIFNldCB1cCBSZXNpemVPYnNlcnZlciB0byBjYWxsIHVwZGF0ZUdyaWQgd2hlbiBjb250YWluZXIgcmVzaXplc1xyXG5cdFx0dGhpcy5yZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcih1cGRhdGVHcmlkKTtcclxuXHRcdHRoaXMucmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmNvbnRhaW5lckVsKTtcclxuXHRcdFxyXG5cdFx0Ly8gQ2FsbCB1cGRhdGVHcmlkIGltbWVkaWF0ZWx5IHRvIHNldCBpbml0aWFsIHZhbHVlc1xyXG5cdFx0dXBkYXRlR3JpZCgpO1xyXG5cdFx0XHJcblx0XHQvLyBTZXQgdXAgcG9sbGluZyB0byBkZXRlY3QgY29uZmlnIGNoYW5nZXMgKGZvciByZWFsLXRpbWUgdXBkYXRlcyB3aGVuIGNhcmQgc2l6ZSBjaGFuZ2VzKVxyXG5cdFx0Ly8gUG9sbCBldmVyeSAxMDBtcyB0byBjaGVjayBpZiBjYXJkU2l6ZSBvciBpbWFnZUFzcGVjdFJhdGlvIGhhcyBjaGFuZ2VkXHJcblx0XHR0aGlzLmNvbmZpZ1BvbGxJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XHJcblx0XHRcdGlmICghdGhpcy5jb25maWcgfHwgdHlwZW9mIHRoaXMuY29uZmlnLmdldCAhPT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdHJldHVybjsgLy8gQ29uZmlnIG5vdCByZWFkeSB5ZXQsIHNraXAgY2hlY2tcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgY3VycmVudFNldHRpbmdzID0gcmVhZENNU1NldHRpbmdzKFxyXG5cdFx0XHRcdHRoaXMuY29uZmlnLFxyXG5cdFx0XHRcdHRoaXMucGx1Z2luU2V0dGluZ3NcclxuXHRcdFx0KTtcclxuXHRcdFx0Y29uc3QgY3VycmVudENhcmRTaXplID0gY3VycmVudFNldHRpbmdzLmNhcmRTaXplO1xyXG5cdFx0XHRjb25zdCBjdXJyZW50SW1hZ2VBc3BlY3RSYXRpbyA9IGN1cnJlbnRTZXR0aW5ncy5pbWFnZUFzcGVjdFJhdGlvO1xyXG5cclxuXHRcdFx0Ly8gQ2hlY2sgaWYgY2FyZFNpemUgb3IgaW1hZ2VBc3BlY3RSYXRpbyBoYXMgY2hhbmdlZFxyXG5cdFx0XHRpZiAodGhpcy5sYXN0Q2FyZFNpemUgIT09IGN1cnJlbnRDYXJkU2l6ZSB8fCB0aGlzLmxhc3RJbWFnZUFzcGVjdFJhdGlvICE9PSBjdXJyZW50SW1hZ2VBc3BlY3RSYXRpbykge1xyXG5cdFx0XHRcdC8vIFVwZGF0ZSBncmlkIGxheW91dCBpbW1lZGlhdGVseSB3aGVuIHNldHRpbmdzIGNoYW5nZVxyXG5cdFx0XHRcdHRoaXMuY29udGFpbmVyRWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FyZC1taW4td2lkdGgnLCBgJHtjdXJyZW50Q2FyZFNpemV9cHhgKTtcclxuXHRcdFx0XHR0aGlzLmNvbnRhaW5lckVsLnN0eWxlLnNldFByb3BlcnR5KCctLWJhc2VzLWNtcy1pbWFnZS1hc3BlY3QtcmF0aW8nLCBTdHJpbmcoY3VycmVudEltYWdlQXNwZWN0UmF0aW8pKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBVcGRhdGUgdHJhY2tlZCB2YWx1ZXNcclxuXHRcdFx0XHR0aGlzLmxhc3RDYXJkU2l6ZSA9IGN1cnJlbnRDYXJkU2l6ZTtcclxuXHRcdFx0XHR0aGlzLmxhc3RJbWFnZUFzcGVjdFJhdGlvID0gY3VycmVudEltYWdlQXNwZWN0UmF0aW87XHJcblx0XHRcdH1cclxuXHRcdH0sIDEwMCk7XHJcblx0XHRcclxuXHRcdC8vIFJlZ2lzdGVyIGNsZWFudXAgZm9yIHBvbGxpbmcgaW50ZXJ2YWxcclxuXHRcdHRoaXMucmVnaXN0ZXJDbGVhbnVwKCgpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMuY29uZmlnUG9sbEludGVydmFsICE9PSBudWxsKSB7XHJcblx0XHRcdFx0d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5jb25maWdQb2xsSW50ZXJ2YWwpO1xyXG5cdFx0XHRcdHRoaXMuY29uZmlnUG9sbEludGVydmFsID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGVHcmlkTGF5b3V0KHNldHRpbmdzOiBDTVNTZXR0aW5ncyk6IHZvaWQge1xyXG5cdFx0Ly8gSnVzdCBzZXQgdGhlIGNhcmQgbWluIHdpZHRoIC0gQ1NTIEdyaWQgYXV0by1maWxsIGhhbmRsZXMgY29sdW1uIHNuYXBwaW5nIGF1dG9tYXRpY2FsbHlcclxuXHRcdHRoaXMuY29udGFpbmVyRWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FyZC1taW4td2lkdGgnLCBgJHtzZXR0aW5ncy5jYXJkU2l6ZX1weGApO1xyXG5cdFx0dGhpcy5jb250YWluZXJFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1iYXNlcy1jbXMtaW1hZ2UtYXNwZWN0LXJhdGlvJywgU3RyaW5nKHNldHRpbmdzLmltYWdlQXNwZWN0UmF0aW8pKTtcclxuXHRcdFxyXG5cdFx0Ly8gVXBkYXRlIHRyYWNrZWQgdmFsdWVzIHRvIHByZXZlbnQgdW5uZWNlc3NhcnkgcG9sbGluZyB0cmlnZ2Vyc1xyXG5cdFx0dGhpcy5sYXN0Q2FyZFNpemUgPSBzZXR0aW5ncy5jYXJkU2l6ZTtcclxuXHRcdHRoaXMubGFzdEltYWdlQXNwZWN0UmF0aW8gPSBzZXR0aW5ncy5pbWFnZUFzcGVjdFJhdGlvO1xyXG5cdH1cclxuXHJcblx0Y2xlYW51cCgpOiB2b2lkIHtcclxuXHRcdGlmICh0aGlzLnJlc2l6ZU9ic2VydmVyKSB7XHJcblx0XHRcdHRoaXMucmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG5cdFx0XHR0aGlzLnJlc2l6ZU9ic2VydmVyID0gbnVsbDtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLndpbmRvd1Jlc2l6ZUhhbmRsZXIpIHtcclxuXHRcdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMud2luZG93UmVzaXplSGFuZGxlcik7XHJcblx0XHRcdHRoaXMud2luZG93UmVzaXplSGFuZGxlciA9IG51bGw7XHJcblx0XHR9XHJcblx0XHRpZiAodGhpcy5zY3JvbGxMaXN0ZW5lcikge1xyXG5cdFx0XHR0aGlzLmNvbnRhaW5lckVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsTGlzdGVuZXIpO1xyXG5cdFx0XHR0aGlzLnNjcm9sbExpc3RlbmVyID0gbnVsbDtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLnNjcm9sbFRocm90dGxlVGltZW91dCAhPT0gbnVsbCkge1xyXG5cdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuc2Nyb2xsVGhyb3R0bGVUaW1lb3V0KTtcclxuXHRcdFx0dGhpcy5zY3JvbGxUaHJvdHRsZVRpbWVvdXQgPSBudWxsO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHRoaXMuY29uZmlnUG9sbEludGVydmFsICE9PSBudWxsKSB7XHJcblx0XHRcdHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuY29uZmlnUG9sbEludGVydmFsKTtcclxuXHRcdFx0dGhpcy5jb25maWdQb2xsSW50ZXJ2YWwgPSBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuXHJcbiIsICIvKipcbiAqIFZpZXcgU3dpdGNoIExpc3RlbmVyXG4gKiBEZXRlY3RzIHdoZW4gdGhlIHZpZXcgaXMgc3dpdGNoZWQgYXdheSBhbmQgY2xlYXJzIHNlbGVjdGlvblxuICovXG5cbmltcG9ydCB0eXBlIEJhc2VzQ01TUGx1Z2luIGZyb20gJy4uL21haW4nO1xuXG5leHBvcnQgY2xhc3MgVmlld1N3aXRjaExpc3RlbmVyIHtcblx0cHJpdmF0ZSBtdXRhdGlvbk9ic2VydmVyOiBNdXRhdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgYmFja3VwSW50ZXJ2YWw6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIGN1cnJlbnRCYXNlSWRlbnRpZmllcjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cHJpdmF0ZSBjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXG5cdFx0cHJpdmF0ZSBwbHVnaW46IEJhc2VzQ01TUGx1Z2luLFxuXHRcdHByaXZhdGUgY29uZmlnOiB7IGdldE5hbWU/OiAoKSA9PiBzdHJpbmc7IG5hbWU/OiBzdHJpbmcgfSxcblx0XHRwcml2YXRlIGNvbnRyb2xsZXI6IHsgZ2V0QmFzZU5hbWU/OiAoKSA9PiBzdHJpbmc7IGJhc2VOYW1lPzogc3RyaW5nIH0gfCB1bmRlZmluZWQsXG5cdFx0cHJpdmF0ZSBkYXRhOiB7IGJhc2VOYW1lPzogc3RyaW5nIH0gfCB1bmRlZmluZWQsXG5cdFx0cHJpdmF0ZSBzZWxlY3RlZEZpbGVzOiBTZXQ8c3RyaW5nPixcblx0XHRwcml2YXRlIG9uU2VsZWN0aW9uQ2xlYXJlZDogKCkgPT4gdm9pZCxcblx0XHRwcml2YXRlIHJlZ2lzdGVyQ2xlYW51cDogKGNsZWFudXA6ICgpID0+IHZvaWQpID0+IHZvaWRcblx0KSB7fVxuXG5cdHNldHVwKGhhbmRsZVNlbGVjdGlvbkNoYW5nZTogKHBhdGg6IHN0cmluZywgc2VsZWN0ZWQ6IGJvb2xlYW4pID0+IHZvaWQpOiAocGF0aDogc3RyaW5nLCBzZWxlY3RlZDogYm9vbGVhbikgPT4gdm9pZCB7XG5cdFx0Y29uc3Qgc3RhcnRPYnNlcnZpbmcgPSAoKSA9PiB7XG5cdFx0XHRpZiAodGhpcy5tdXRhdGlvbk9ic2VydmVyKSByZXR1cm47IC8vIEFscmVhZHkgb2JzZXJ2aW5nXG5cdFx0XHRcblx0XHRcdHRoaXMubXV0YXRpb25PYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHtcblx0XHRcdFx0Ly8gT25seSBjaGVjayBpZiB3ZSBoYXZlIHNlbGVjdGlvblxuXHRcdFx0XHRpZiAodGhpcy5zZWxlY3RlZEZpbGVzLnNpemUgPT09IDApIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdC8vIENoZWNrIGlmIGFueSBjYXJkcyB3ZXJlIHJlbW92ZWRcblx0XHRcdFx0Zm9yIChjb25zdCBtdXRhdGlvbiBvZiBtdXRhdGlvbnMpIHtcblx0XHRcdFx0XHRpZiAobXV0YXRpb24udHlwZSA9PT0gJ2NoaWxkTGlzdCcgJiYgbXV0YXRpb24ucmVtb3ZlZE5vZGVzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdC8vIENhcmRzIHdlcmUgcmVtb3ZlZCAtIGNoZWNrIGlmIG91ciBzZWxlY3RlZCBjYXJkcyBhcmUgZ29uZVxuXHRcdFx0XHRcdFx0bGV0IGZvdW5kU2VsZWN0ZWRDYXJkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IHBhdGggb2YgdGhpcy5zZWxlY3RlZEZpbGVzKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNhcmQgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXBhdGg9XCIke3BhdGh9XCJdYCk7XG5cdFx0XHRcdFx0XHRcdGlmIChjYXJkKSB7XG5cdFx0XHRcdFx0XHRcdFx0Zm91bmRTZWxlY3RlZENhcmQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vIEFsc28gY2hlY2sgaWYgY29udGFpbmVyIGhhcyBhbnkgY2FyZHMgYXQgYWxsXG5cdFx0XHRcdFx0XHRjb25zdCBhbGxDYXJkcyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLmNhcmRbZGF0YS1wYXRoXScpO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRpZiAoIWZvdW5kU2VsZWN0ZWRDYXJkIHx8IGFsbENhcmRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkRmlsZXMuY2xlYXIoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5vblNlbGVjdGlvbkNsZWFyZWQoKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0Ly8gT2JzZXJ2ZSB0aGUgY29udGFpbmVyIGZvciBjaGlsZCByZW1vdmFsc1xuXHRcdFx0aWYgKHRoaXMuY29udGFpbmVyRWwpIHtcblx0XHRcdFx0dGhpcy5tdXRhdGlvbk9ic2VydmVyLm9ic2VydmUodGhpcy5jb250YWluZXJFbCwge1xuXHRcdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcblx0XHRcdFx0XHRzdWJ0cmVlOiB0cnVlXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0XG5cdFx0Y29uc3Qgc3RvcE9ic2VydmluZyA9ICgpID0+IHtcblx0XHRcdGlmICh0aGlzLm11dGF0aW9uT2JzZXJ2ZXIpIHtcblx0XHRcdFx0dGhpcy5tdXRhdGlvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcblx0XHRcdFx0dGhpcy5tdXRhdGlvbk9ic2VydmVyID0gbnVsbDtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIFdoZW4gb2JzZXJ2ZXIgc3RvcHMsIGl0IG1lYW5zIHNlbGVjdGlvbiBpcyBlbXB0eSBvciB2aWV3IHN3aXRjaGVkXG5cdFx0XHRcdC8vIEZvcmNlIGNsZWFyIHNlbGVjdGlvbiBhbmQgaGlkZSB0b29sYmFyXG5cdFx0XHRcdGlmICh0aGlzLnNlbGVjdGVkRmlsZXMuc2l6ZSA+IDApIHtcblx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkRmlsZXMuY2xlYXIoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLm9uU2VsZWN0aW9uQ2xlYXJlZCgpO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0XG5cdFx0Ly8gR2V0IGJhc2UgaWRlbnRpZmllciAtIHRyeSBtdWx0aXBsZSBtZXRob2RzXG5cdFx0Y29uc3QgZ2V0QmFzZUlkZW50aWZpZXIgPSAoKTogc3RyaW5nIHwgbnVsbCA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHQvLyBUcnkgdG8gZ2V0IGJhc2UgbmFtZSBmcm9tIGNvbmZpZ1xuXHRcdFx0XHRpZiAodGhpcy5jb25maWc/LmdldE5hbWUpIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5jb25maWcuZ2V0TmFtZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh0aGlzLmNvbmZpZz8ubmFtZSkge1xuXHRcdFx0XHRcdHJldHVybiBTdHJpbmcodGhpcy5jb25maWcubmFtZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gVHJ5IHRvIGFjY2VzcyBjb250cm9sbGVyXG5cdFx0XHRcdGlmICh0aGlzLmNvbnRyb2xsZXIpIHtcblx0XHRcdFx0XHRpZiAodGhpcy5jb250cm9sbGVyPy5nZXRCYXNlTmFtZSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRoaXMuY29udHJvbGxlci5nZXRCYXNlTmFtZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAodGhpcy5jb250cm9sbGVyPy5iYXNlTmFtZSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIFN0cmluZyh0aGlzLmNvbnRyb2xsZXIuYmFzZU5hbWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBUcnkgdG8gZ2V0IGZyb20gZGF0YVxuXHRcdFx0XHRpZiAodGhpcy5kYXRhKSB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuZGF0YS5iYXNlTmFtZSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIFN0cmluZyh0aGlzLmRhdGEuYmFzZU5hbWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdC8vIElnbm9yZSBlcnJvcnNcblx0XHRcdH1cblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH07XG5cdFx0XG5cdFx0Ly8gQWxzbyBjaGVjayBwZXJpb2RpY2FsbHkgYXMgYmFja3VwIChzbG93ZXIsIDUwMG1zKVxuXHRcdGNvbnN0IGJhY2t1cENoZWNrID0gKCkgPT4ge1xuXHRcdFx0aWYgKHRoaXMuc2VsZWN0ZWRGaWxlcy5zaXplID09PSAwKSB7XG5cdFx0XHRcdGlmICh0aGlzLmJhY2t1cEludGVydmFsICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5iYWNrdXBJbnRlcnZhbCk7XG5cdFx0XHRcdFx0dGhpcy5iYWNrdXBJbnRlcnZhbCA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBDaGVjayBpZiBiYXNlIGlkZW50aWZpZXIgY2hhbmdlZFxuXHRcdFx0Y29uc3QgY3VycmVudEJhc2VJZCA9IGdldEJhc2VJZGVudGlmaWVyKCk7XG5cdFx0XHRpZiAodGhpcy5jdXJyZW50QmFzZUlkZW50aWZpZXIgIT09IG51bGwgJiYgY3VycmVudEJhc2VJZCAhPT0gbnVsbCAmJiBcblx0XHRcdFx0dGhpcy5jdXJyZW50QmFzZUlkZW50aWZpZXIgIT09IGN1cnJlbnRCYXNlSWQpIHtcblx0XHRcdFx0dGhpcy5zZWxlY3RlZEZpbGVzLmNsZWFyKCk7XG5cdFx0XHRcdHRoaXMub25TZWxlY3Rpb25DbGVhcmVkKCk7XG5cdFx0XHRcdHN0b3BPYnNlcnZpbmcoKTtcblx0XHRcdFx0aWYgKHRoaXMuYmFja3VwSW50ZXJ2YWwgIT09IG51bGwpIHtcblx0XHRcdFx0XHR3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLmJhY2t1cEludGVydmFsKTtcblx0XHRcdFx0XHR0aGlzLmJhY2t1cEludGVydmFsID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIENoZWNrIGlmIGNvbnRhaW5lciBoYXMgY2FyZHNcblx0XHRcdGNvbnN0IGFsbENhcmRzID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FyZFtkYXRhLXBhdGhdJyk7XG5cdFx0XHRpZiAoYWxsQ2FyZHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdHRoaXMuc2VsZWN0ZWRGaWxlcy5jbGVhcigpO1xuXHRcdFx0XHR0aGlzLm9uU2VsZWN0aW9uQ2xlYXJlZCgpO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0XG5cdFx0Ly8gU3RhcnQgb2JzZXJ2aW5nIHdoZW4gc2VsZWN0aW9uIGlzIG1hZGVcblx0XHRjb25zdCBvcmlnaW5hbEhhbmRsZVNlbGVjdGlvbkNoYW5nZSA9IGhhbmRsZVNlbGVjdGlvbkNoYW5nZS5iaW5kKHRoaXMpO1xuXHRcdGNvbnN0IHdyYXBwZWRIYW5kbGVTZWxlY3Rpb25DaGFuZ2UgPSAocGF0aDogc3RyaW5nLCBzZWxlY3RlZDogYm9vbGVhbikgPT4ge1xuXHRcdFx0b3JpZ2luYWxIYW5kbGVTZWxlY3Rpb25DaGFuZ2UocGF0aCwgc2VsZWN0ZWQpO1xuXHRcdFx0XG5cdFx0XHQvLyBTdGFydCBvYnNlcnZpbmcgaWYgd2UgaGF2ZSBzZWxlY3Rpb24sIHN0b3AgaWYgd2UgZG9uJ3Rcblx0XHRcdGlmICh0aGlzLnNlbGVjdGVkRmlsZXMuc2l6ZSA+IDApIHtcblx0XHRcdFx0Ly8gU3RvcmUgY3VycmVudCBiYXNlIGlkZW50aWZpZXIgd2hlbiBzZWxlY3Rpb24gc3RhcnRzXG5cdFx0XHRcdGlmICh0aGlzLmN1cnJlbnRCYXNlSWRlbnRpZmllciA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdHRoaXMuY3VycmVudEJhc2VJZGVudGlmaWVyID0gZ2V0QmFzZUlkZW50aWZpZXIoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzdGFydE9ic2VydmluZygpO1xuXHRcdFx0XHQvLyBBbHNvIHN0YXJ0IGJhY2t1cCBpbnRlcnZhbCAtIHVzZSBwbHVnaW4ncyByZWdpc3RlckludGVydmFsIGZvciBwcm9wZXIgY2xlYW51cFxuXHRcdFx0XHRpZiAodGhpcy5iYWNrdXBJbnRlcnZhbCA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdHRoaXMuYmFja3VwSW50ZXJ2YWwgPSB0aGlzLnBsdWdpbi5yZWdpc3RlckludGVydmFsKHdpbmRvdy5zZXRJbnRlcnZhbChiYWNrdXBDaGVjaywgNTAwKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIENsZWFyIGJhc2UgaWRlbnRpZmllciB3aGVuIHNlbGVjdGlvbiBpcyBlbXB0eVxuXHRcdFx0XHR0aGlzLmN1cnJlbnRCYXNlSWRlbnRpZmllciA9IG51bGw7XG5cdFx0XHRcdC8vIFNlbGVjdGlvbiBiZWNhbWUgZW1wdHkgLSBzdG9wIG9ic2VydmluZ1xuXHRcdFx0XHRzdG9wT2JzZXJ2aW5nKCk7XG5cdFx0XHRcdGlmICh0aGlzLmJhY2t1cEludGVydmFsICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5iYWNrdXBJbnRlcnZhbCk7XG5cdFx0XHRcdFx0dGhpcy5iYWNrdXBJbnRlcnZhbCA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHRcdFxuXHRcdC8vIFJlZ2lzdGVyIGNsZWFudXBcblx0XHR0aGlzLnJlZ2lzdGVyQ2xlYW51cCgoKSA9PiB7XG5cdFx0XHRzdG9wT2JzZXJ2aW5nKCk7XG5cdFx0XHRpZiAodGhpcy5iYWNrdXBJbnRlcnZhbCAhPT0gbnVsbCkge1xuXHRcdFx0XHR3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLmJhY2t1cEludGVydmFsKTtcblx0XHRcdFx0dGhpcy5iYWNrdXBJbnRlcnZhbCA9IG51bGw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gd3JhcHBlZEhhbmRsZVNlbGVjdGlvbkNoYW5nZTtcblx0fVxuXG5cdGNsZWFudXAoKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMubXV0YXRpb25PYnNlcnZlcikge1xuXHRcdFx0dGhpcy5tdXRhdGlvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcblx0XHRcdHRoaXMubXV0YXRpb25PYnNlcnZlciA9IG51bGw7XG5cdFx0fVxuXHRcdGlmICh0aGlzLmJhY2t1cEludGVydmFsICE9PSBudWxsKSB7XG5cdFx0XHR3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLmJhY2t1cEludGVydmFsKTtcblx0XHRcdHRoaXMuYmFja3VwSW50ZXJ2YWwgPSBudWxsO1xuXHRcdH1cblx0fVxufVxuXG4iLCAiLyoqXHJcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIHRvIGRldGVjdCBpZiBhIENNUyB2aWV3IGlzIGVtYmVkZGVkIGluIGEgbWFya2Rvd24gbm90ZVxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGNvbnRhaW5lciBlbGVtZW50IGlzIGluc2lkZSBhIG1hcmtkb3duIGVtYmVkXHJcbiAqIEBwYXJhbSBjb250YWluZXJFbCAtIFRoZSBjb250YWluZXIgZWxlbWVudCB0byBjaGVja1xyXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBjb250YWluZXIgaXMgaW5zaWRlIGFuIGVtYmVkLCBmYWxzZSBvdGhlcndpc2VcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0VtYmVkZGVkVmlldyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiBib29sZWFuIHtcclxuXHRpZiAoIWNvbnRhaW5lckVsKSB7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHQvLyBDaGVjayBpZiBjb250YWluZXIgaXMgaW5zaWRlIGEgbWFya2Rvd24gZW1iZWRcclxuXHQvLyBPYnNpZGlhbiB1c2VzIHZhcmlvdXMgY2xhc3NlcyBmb3IgZW1iZWRzOlxyXG5cdC8vIC0gLm1hcmtkb3duLWVtYmVkIGZvciBtYXJrZG93biBlbWJlZHNcclxuXHQvLyAtIC5pbnRlcm5hbC1lbWJlZCBmb3IgaW50ZXJuYWwgZmlsZSBlbWJlZHNcclxuXHQvLyAtIC5tYXJrZG93bi1lbWJlZC1jb250ZW50IGZvciB0aGUgY29udGVudCB3cmFwcGVyXHJcblx0Y29uc3QgZW1iZWRQYXJlbnQgPSBjb250YWluZXJFbC5jbG9zZXN0KCcubWFya2Rvd24tZW1iZWQsIC5pbnRlcm5hbC1lbWJlZCwgLm1hcmtkb3duLWVtYmVkLWNvbnRlbnQnKTtcclxuXHRcclxuXHRyZXR1cm4gZW1iZWRQYXJlbnQgIT09IG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIGZpbGUgcGF0aCBvZiB0aGUgbm90ZSBjb250YWluaW5nIHRoZSBlbWJlZCAoaWYgZW1iZWRkZWQpXHJcbiAqIEBwYXJhbSBjb250YWluZXJFbCAtIFRoZSBjb250YWluZXIgZWxlbWVudCB0byBjaGVja1xyXG4gKiBAcGFyYW0gYXBwIC0gT2JzaWRpYW4gYXBwIGluc3RhbmNlXHJcbiAqIEByZXR1cm5zIFRoZSBmaWxlIHBhdGggb2YgdGhlIGNvbnRhaW5pbmcgbm90ZSwgb3IgbnVsbCBpZiBub3QgZW1iZWRkZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbWJlZGRpbmdGaWxlKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgYXBwOiB7IHdvcmtzcGFjZT86IHsgZ2V0QWN0aXZlRmlsZT86ICgpID0+IHsgcGF0aDogc3RyaW5nIH0gfCBudWxsIH0gfSk6IHN0cmluZyB8IG51bGwge1xyXG5cdGlmICghaXNFbWJlZGRlZFZpZXcoY29udGFpbmVyRWwpKSB7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcblxyXG5cdC8vIFRyeSB0byBmaW5kIHRoZSBtYXJrZG93biB2aWV3IHRoYXQgY29udGFpbnMgdGhpcyBlbWJlZFxyXG5cdGNvbnN0IGVtYmVkUGFyZW50ID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLm1hcmtkb3duLWVtYmVkLCAuaW50ZXJuYWwtZW1iZWQnKTtcclxuXHRpZiAoIWVtYmVkUGFyZW50KSB7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcblxyXG5cdC8vIExvb2sgZm9yIHRoZSBtYXJrZG93biB2aWV3IGluIHRoZSBwYXJlbnQgY2hhaW5cclxuXHRsZXQgY3VycmVudDogSFRNTEVsZW1lbnQgfCBudWxsID0gZW1iZWRQYXJlbnQucGFyZW50RWxlbWVudDtcclxuXHR3aGlsZSAoY3VycmVudCkge1xyXG5cdFx0Ly8gQ2hlY2sgaWYgdGhpcyBpcyBhIG1hcmtkb3duIHZpZXdcclxuXHRcdGNvbnN0IHZpZXdFbCA9IGN1cnJlbnQuY2xvc2VzdCgnLm1hcmtkb3duLXNvdXJjZS12aWV3LCAubWFya2Rvd24tcmVhZGluZy12aWV3Jyk7XHJcblx0XHRpZiAodmlld0VsKSB7XHJcblx0XHRcdC8vIFRyeSB0byBnZXQgdGhlIGZpbGUgZnJvbSB0aGUgdmlld1xyXG5cdFx0XHRjb25zdCB2aWV3ID0gKHZpZXdFbCBhcyB1bmtub3duIGFzIHsgZmlsZT86IHsgcGF0aDogc3RyaW5nIH0gfSkuZmlsZTtcclxuXHRcdFx0aWYgKHZpZXc/LnBhdGgpIHtcclxuXHRcdFx0XHRyZXR1cm4gdmlldy5wYXRoO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRjdXJyZW50ID0gY3VycmVudC5wYXJlbnRFbGVtZW50O1xyXG5cdH1cclxuXHJcblx0Ly8gRmFsbGJhY2s6IHRyeSB0byBnZXQgYWN0aXZlIGZpbGUgKGxlc3MgcmVsaWFibGUgZm9yIGVtYmVkZGVkIHZpZXdzKVxyXG5cdGlmIChhcHAud29ya3NwYWNlPy5nZXRBY3RpdmVGaWxlKSB7XHJcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRpZiAoYWN0aXZlRmlsZSkge1xyXG5cdFx0XHRyZXR1cm4gYWN0aXZlRmlsZS5wYXRoO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbiIsICJpbXBvcnQgeyBRdWVyeUNvbnRyb2xsZXIgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBCYXNlc0NNU1BsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IEJhc2VzQ01TVmlldywgQ01TX1ZJRVdfVFlQRSB9IGZyb20gJy4uL3ZpZXdzL2Ntcy12aWV3JztcblxuLyoqXG4gKiBSZWdpc3RlciB0aGUgQ01TIHZpZXcgd2l0aCB0aGUgQmFzZXMgcGx1Z2luXG4gKiBIYW5kbGVzIGdyYWNlZnVsIGRlZ3JhZGF0aW9uIGlmIEJhc2VzIHBsdWdpbiBpcyBub3QgaW5zdGFsbGVkXG4gKiBJbmNsdWRlcyByZXRyeSBsb2dpYyBmb3IgbW9iaWxlIHdoZXJlIEJhc2VzIHBsdWdpbiBtYXkgbG9hZCBsYXRlclxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJCYXNlc0NNU1ZpZXcocGx1Z2luOiBCYXNlc0NNU1BsdWdpbiwgcmV0cmllcyA9IDUpOiB2b2lkIHtcblx0dHJ5IHtcblx0XHRjb25zdCBiYXNlc1BsdWdpbiA9IHBsdWdpbiBhcyB7IHJlZ2lzdGVyQmFzZXNWaWV3PzogKHR5cGU6IHN0cmluZywgY29uZmlnOiB7IG5hbWU6IHN0cmluZzsgaWNvbjogc3RyaW5nOyBmYWN0b3J5OiAoY29udHJvbGxlcjogUXVlcnlDb250cm9sbGVyLCBjb250YWluZXJFbDogSFRNTEVsZW1lbnQpID0+IEJhc2VzQ01TVmlldzsgb3B0aW9uczogKCkgPT4gdW5rbm93bltdIH0pID0+IHZvaWQgfTtcblx0XHRpZiAodHlwZW9mIGJhc2VzUGx1Z2luLnJlZ2lzdGVyQmFzZXNWaWV3ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRiYXNlc1BsdWdpbi5yZWdpc3RlckJhc2VzVmlldyhDTVNfVklFV19UWVBFLCB7XG5cdFx0XHRcdG5hbWU6ICdDTVMnLFxuXHRcdFx0XHRpY29uOiBwbHVnaW4uc2V0dGluZ3MudXNlSG9tZUljb24gPyAnbHVjaWRlLWhvbWUnIDogJ2x1Y2lkZS1ibG9ja3MnLFxuXHRcdFx0XHRmYWN0b3J5OiAoY29udHJvbGxlcjogUXVlcnlDb250cm9sbGVyLCBjb250YWluZXJFbDogSFRNTEVsZW1lbnQpID0+IHtcblx0XHRcdFx0XHRjb25zdCB2aWV3ID0gbmV3IEJhc2VzQ01TVmlldyhjb250cm9sbGVyLCBjb250YWluZXJFbCwgcGx1Z2luKTtcblx0XHRcdFx0XHQvLyBBZGQgdmlldyB0byBwbHVnaW4ncyBhY3RpdmUgdmlld3MgdHJhY2tpbmdcblx0XHRcdFx0XHRjb25zdCBwbHVnaW5XaXRoVmlld3MgPSBwbHVnaW4gYXMgeyBhY3RpdmVWaWV3cz86IFNldDxCYXNlc0NNU1ZpZXc+IH07XG5cdFx0XHRcdFx0aWYgKHBsdWdpbldpdGhWaWV3cy5hY3RpdmVWaWV3cykge1xuXHRcdFx0XHRcdFx0cGx1Z2luV2l0aFZpZXdzLmFjdGl2ZVZpZXdzLmFkZCh2aWV3KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gSWYgdGhpcyBpcyBhbiBlbWJlZGRlZCB2aWV3LCBzY2hlZHVsZSBhbiBpbml0aWFsIHJlZnJlc2ggd2l0aCByZXRyeSBsb2dpY1xuXHRcdFx0XHRcdC8vIFRoaXMgZW5zdXJlcyBlbWJlZGRlZCB2aWV3cyBwb3B1bGF0ZSBpbW1lZGlhdGVseSB3aGVuIGZpcnN0IGFkZGVkIHRvIGEgbm90ZVxuXHRcdFx0XHRcdGlmICh2aWV3LmlzRW1iZWRkZWQpIHtcblx0XHRcdFx0XHRcdC8vIFJldHJ5IGxvZ2ljOiB0cnkgbXVsdGlwbGUgdGltZXMgd2l0aCBpbmNyZWFzaW5nIGRlbGF5cyB1bnRpbCBkYXRhIGlzIHJlYWR5XG5cdFx0XHRcdFx0XHRsZXQgcmV0cnlDb3VudCA9IDA7XG5cdFx0XHRcdFx0XHRjb25zdCBtYXhSZXRyaWVzID0gODsgLy8gVHJ5IHVwIHRvIDggdGltZXMgb3ZlciB+MS41IHNlY29uZHNcblx0XHRcdFx0XHRcdGNvbnN0IGJhc2VEZWxheSA9IDI1MDsgLy8gU3RhcnQgd2l0aCAyNTBtcywgaW5jcmVhc2UgYnkgMTAwbXMgZWFjaCByZXRyeVxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRjb25zdCB0cnlSZWZyZXNoID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbnRhaW5lckVsID0gKHZpZXcgYXMgdW5rbm93biBhcyB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfSkuY29udGFpbmVyRWw7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFjb250YWluZXJFbCB8fCAhY29udGFpbmVyRWwuaXNDb25uZWN0ZWQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybjsgLy8gVmlldyBubyBsb25nZXIgZXhpc3RzLCBzdG9wIHJldHJ5aW5nXG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgZGF0YSBpcyByZWFkeVxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHZpZXdEYXRhID0gKHZpZXcgYXMgdW5rbm93biBhcyB7IGRhdGE/OiB7IGRhdGE/OiB1bmtub3duW107IGdyb3VwZWREYXRhPzogdW5rbm93bltdIH0gfSkuZGF0YTtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBoYXNEYXRhID0gdmlld0RhdGEgJiYgdmlld0RhdGEuZGF0YSAmJiB2aWV3RGF0YS5ncm91cGVkRGF0YTtcblx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHQvLyBBbHdheXMgdHJpZ2dlciBvbkRhdGFVcGRhdGVkKCkgLSBpdCBoYXMgaXRzIG93biByZXRyeSBsb2dpYyBpZiBkYXRhIGlzbid0IHJlYWR5XG5cdFx0XHRcdFx0XHRcdFx0Ly8gVGhpcyBlbnN1cmVzIHRoZSBCYXNlcyBwbHVnaW4gcmUtZXZhbHVhdGVzIGZpbHRlcnMgd2l0aCBjdXJyZW50IGFjdGl2ZSBmaWxlIGNvbnRleHRcblx0XHRcdFx0XHRcdFx0XHRpZiAodHlwZW9mICh2aWV3IGFzIHsgb25EYXRhVXBkYXRlZD86ICgpID0+IHZvaWQgfSkub25EYXRhVXBkYXRlZCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdFx0XHRcdFx0KHZpZXcgYXMgeyBvbkRhdGFVcGRhdGVkOiAoKSA9PiB2b2lkIH0pLm9uRGF0YVVwZGF0ZWQoKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gSWYgZGF0YSB3YXNuJ3QgcmVhZHkgYW5kIHdlIGhhdmVuJ3QgaGl0IG1heCByZXRyaWVzLCBzY2hlZHVsZSBhbm90aGVyIGF0dGVtcHRcblx0XHRcdFx0XHRcdFx0XHRpZiAoIWhhc0RhdGEgJiYgcmV0cnlDb3VudCA8IG1heFJldHJpZXMpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHJ5Q291bnQrKztcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGRlbGF5ID0gYmFzZURlbGF5ICsgKHJldHJ5Q291bnQgKiAxMDApOyAvLyAyNTBtcywgMzUwbXMsIDQ1MG1zLCBldGMuXG5cdFx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuc2V0VGltZW91dCh0cnlSZWZyZXNoLCBkZWxheSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdFx0XHRcdC8vIFNpbGVudGx5IGlnbm9yZSBlcnJvcnMgZHVyaW5nIGluaXRpYWwgcmVmcmVzaFxuXHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUud2FybignQmFzZXMgQ01TOiBFcnJvciByZWZyZXNoaW5nIG5ld2x5IGNyZWF0ZWQgZW1iZWRkZWQgdmlldzonLCBlcnJvcik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vIFN0YXJ0IHRoZSByZXRyeSBzZXF1ZW5jZSBhZnRlciBpbml0aWFsIGRlbGF5XG5cdFx0XHRcdFx0XHR3aW5kb3cuc2V0VGltZW91dCh0cnlSZWZyZXNoLCBiYXNlRGVsYXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHRyZXR1cm4gdmlldztcblx0XHRcdFx0fSxcblx0XHRcdFx0b3B0aW9uczogZ2V0Q01TVmlld09wdGlvbnMoKVxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIGlmIChyZXRyaWVzID4gMCkge1xuXHRcdFx0Ly8gTWV0aG9kIG5vdCBhdmFpbGFibGUgeWV0LCByZXRyeSBhZnRlciBhIHNob3J0IGRlbGF5IChjb21tb24gb24gbW9iaWxlKVxuXHRcdFx0Ly8gQ2xlYXIgYW55IGV4aXN0aW5nIHRpbWVvdXQgYmVmb3JlIHNldHRpbmcgYSBuZXcgb25lXG5cdFx0XHRjb25zdCBwbHVnaW5XaXRoVGltZW91dCA9IHBsdWdpbiBhcyB7IHJlZ2lzdHJhdGlvblRpbWVvdXQ/OiBudW1iZXIgfCBudWxsIH07XG5cdFx0XHRjb25zdCByZWdpc3RyYXRpb25UaW1lb3V0ID0gcGx1Z2luV2l0aFRpbWVvdXQucmVnaXN0cmF0aW9uVGltZW91dDtcblx0XHRcdGlmIChyZWdpc3RyYXRpb25UaW1lb3V0ICE9PSBudWxsICYmIHJlZ2lzdHJhdGlvblRpbWVvdXQgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KHJlZ2lzdHJhdGlvblRpbWVvdXQpO1xuXHRcdFx0fVxuXHRcdFx0cGx1Z2luV2l0aFRpbWVvdXQucmVnaXN0cmF0aW9uVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0cGx1Z2luV2l0aFRpbWVvdXQucmVnaXN0cmF0aW9uVGltZW91dCA9IG51bGw7XG5cdFx0XHRcdHJlZ2lzdGVyQmFzZXNDTVNWaWV3KHBsdWdpbiwgcmV0cmllcyAtIDEpO1xuXHRcdFx0fSwgMjAwKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS53YXJuKCdCYXNlcyBDTVM6IHJlZ2lzdGVyQmFzZXNWaWV3IG5vdCBhdmFpbGFibGUuIElzIEJhc2VzIHBsdWdpbiBpbnN0YWxsZWQ/Jyk7XG5cdFx0fVxuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGNvbnNvbGUuZXJyb3IoJ0Jhc2VzIENNUzogRXJyb3IgcmVnaXN0ZXJpbmcgdmlldzonLCBlcnJvcik7XG5cdH1cbn1cblxuLyoqXG4gKiBHZXQgQ01TIHZpZXcgb3B0aW9ucyBmb3IgQmFzZSBwbHVnaW4gY29uZmlndXJhdGlvblxuICovXG5mdW5jdGlvbiBnZXRDTVNWaWV3T3B0aW9ucygpOiAoKSA9PiB1bmtub3duW10ge1xuXHQvLyBEeW5hbWljIGltcG9ydCB0byBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmN5XG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tcmVxdWlyZS1pbXBvcnRzLCBuby11bmRlZiAtLSBOZWVkIGR5bmFtaWMgaW1wb3J0IGZvciBjaXJjdWxhciBkZXBlbmRlbmN5XG5cdGNvbnN0IHsgZ2V0Q01TVmlld09wdGlvbnMgfSA9IHJlcXVpcmUoJy4uL3NoYXJlZC9zZXR0aW5ncy1zY2hlbWEnKSBhcyB7IGdldENNU1ZpZXdPcHRpb25zOiAoKSA9PiB1bmtub3duW10gfTtcblx0cmV0dXJuIGdldENNU1ZpZXdPcHRpb25zO1xufVxuXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBV08sU0FBUyxVQUFVLE1BQXNCO0FBQy9DLFNBQU8sS0FBSyxjQUFjO0FBQzNCO0FBTU8sU0FBUyxvQkFDZixTQUNnRTtBQUNoRSxRQUFNLG1CQUFtQjtBQUN6QixRQUFNLFFBQVEsUUFBUSxNQUFNLGdCQUFnQjtBQUU1QyxNQUFJLENBQUMsT0FBTztBQUVYLFdBQU87QUFBQSxNQUNOLGFBQWEsQ0FBQztBQUFBLE1BQ2QsTUFBTTtBQUFBLElBQ1A7QUFBQSxFQUNEO0FBRUEsUUFBTSxrQkFBa0IsTUFBTSxDQUFDO0FBQy9CLFFBQU0sY0FBYyxRQUFRLE1BQU0sTUFBTSxDQUFDLEVBQUUsTUFBTTtBQUVqRCxNQUFJO0FBQ0gsVUFBTSxhQUFTLDRCQUFVLGVBQWU7QUFDeEMsVUFBTSxjQUFjLFVBQVUsT0FBTyxXQUFXLFdBQVcsU0FBUyxDQUFDO0FBQ3JFLFdBQU87QUFBQSxNQUNOO0FBQUEsTUFDQSxNQUFNO0FBQUEsSUFDUDtBQUFBLEVBQ0QsU0FBUyxHQUFHO0FBQ1gsWUFBUSxNQUFNLGlDQUFpQyxDQUFDO0FBRWhELFdBQU87QUFBQSxNQUNOLGFBQWEsQ0FBQztBQUFBLE1BQ2QsTUFBTTtBQUFBLElBQ1A7QUFBQSxFQUNEO0FBQ0Q7QUFLQSxlQUFzQixtQkFDckIsS0FDQSxNQUMwQztBQUMxQyxNQUFJLENBQUMsVUFBVSxJQUFJLEdBQUc7QUFDckIsV0FBTztBQUFBLEVBQ1I7QUFFQSxNQUFJO0FBQ0gsVUFBTSxVQUFVLE1BQU0sSUFBSSxNQUFNLEtBQUssSUFBSTtBQUN6QyxVQUFNLFNBQVMsb0JBQW9CLE9BQU87QUFDMUMsV0FBTyxT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QkFBa0IsS0FBZ0I7QUFBQSxJQUMvRCxrQkFBbUIsVUFBVSxrQkFBa0IsS0FBZ0I7QUFBQSxJQUMvRCxrQkFBbUIsVUFBVSxrQkFBa0IsS0FBZ0I7QUFBQSxJQUMvRCxrQkFBbUIsVUFBVSxrQkFBa0IsS0FBZ0I7QUFBQSxJQUMvRCxrQkFBbUIsVUFBVSxrQkFBa0IsS0FBZ0I7QUFBQSxJQUMvRCxrQkFBbUIsVUFBVSxrQkFBa0IsS0FBZ0I7QUFBQSxJQUMvRCxrQkFBbUIsVUFBVSxrQkFBa0IsS0FBZ0I7QUFBQSxJQUMvRCxrQkFBbUIsVUFBVSxrQkFBa0IsS0FBZ0I7QUFBQSxJQUMvRCxtQkFBb0IsVUFBVSxtQkFBbUIsS0FBZ0I7QUFBQSxJQUNqRSxtQkFBb0IsVUFBVSxtQkFBbUIsS0FBZ0I7QUFBQSxJQUNqRSxtQkFBb0IsVUFBVSxtQkFBbUIsS0FBZ0I7QUFBQSxJQUNqRSxtQkFBb0IsVUFBVSxtQkFBbUIsS0FBZ0I7QUFBQSxJQUNqRSxtQkFBb0IsVUFBVSxtQkFBbUIsS0FBZ0I7QUFBQSxJQUNqRSw2QkFBNkIsZUFBVSw0QkFBNEIsTUFBdEMsWUFBdUQ7QUFBQSxJQUNwRiw2QkFBNkIsZUFBVSw0QkFBNEIsTUFBdEMsWUFBdUQ7QUFBQSxJQUNwRiw2QkFBNkIsZUFBVSw0QkFBNEIsTUFBdEMsWUFBdUQ7QUFBQSxJQUNwRiw2QkFBNkIsZUFBVSw0QkFBNEIsTUFBdEMsWUFBdUQ7QUFBQSxJQUNwRiw4QkFBOEIsZUFBVSw2QkFBNkIsTUFBdkMsWUFBd0Q7QUFBQSxJQUN0RiwrQkFBK0IsZUFBVSw4QkFBOEIsTUFBeEMsWUFBeUQ7QUFBQSxJQUN4RiwrQkFBK0IsZUFBVSw4QkFBOEIsTUFBeEMsWUFBeUQ7QUFBQSxJQUN4Rix3QkFBeUIsVUFBVSx3QkFBd0IsS0FBMEI7QUFBQSxJQUNyRix3QkFBeUIsVUFBVSx3QkFBd0IsS0FBMEI7QUFBQSxJQUNyRix3QkFBeUIsVUFBVSx3QkFBd0IsS0FBMEI7QUFBQSxJQUNyRix3QkFBeUIsVUFBVSx3QkFBd0IsS0FBMEI7QUFBQSxJQUNyRix3QkFBeUIsVUFBVSx3QkFBd0IsS0FBMEI7QUFBQSxJQUNyRix3QkFBeUIsVUFBVSx3QkFBd0IsS0FBMEI7QUFBQSxJQUNyRix3QkFBeUIsVUFBVSx3QkFBd0IsS0FBMEI7QUFBQSxJQUNyRixhQUFjLFVBQVUsYUFBYSxLQUF3QztBQUFBLElBQzdFLGVBQWdCLFVBQVUsZUFBZSxLQUE2QztBQUFBLElBQ3RGLGdCQUFpQixVQUFVLGdCQUFnQixLQUFxQztBQUFBLElBQ2hGLGtCQUFrQixlQUFVLGlCQUFpQixNQUEzQixZQUE0QztBQUFBLElBQzlELHFCQUFzQixVQUFVLHFCQUFxQixLQUFnQjtBQUFBLElBQ3JFLHFCQUFxQixlQUFVLG9CQUFvQixNQUE5QixZQUErQztBQUFBLElBQ3BFLCtCQUErQixlQUFVLDhCQUE4QixNQUF4QyxZQUF5RDtBQUFBLElBQ3hGLFdBQVcsZUFBVSxVQUFVLE1BQXBCLFlBQXFDO0FBQUEsSUFDaEQsY0FBZSxVQUFVLGNBQWMsS0FBZ0I7QUFBQSxJQUN2RCxnQkFBZ0IsZUFBVSxlQUFlLE1BQXpCLFlBQXlDO0FBQUEsSUFDekQscUJBQXFCLGVBQVUsb0JBQW9CLE1BQTlCLFlBQStDO0FBQUEsSUFDcEUsaUJBQWtCLFVBQVUsaUJBQWlCLEtBQWdCO0FBQUEsSUFDN0Qsb0JBQW9CLGVBQVUsbUJBQW1CLE1BQTdCLFlBQThDO0FBQUEsSUFDbEUsV0FBVyxlQUFVLFVBQVUsTUFBcEIsWUFBb0M7QUFBQSxJQUMvQyxtQkFBbUIsZUFBVSxrQkFBa0IsTUFBNUIsWUFBNEM7QUFBQSxFQUNoRTtBQUNEO0FBS08sU0FBUyxvQkFBK0I7QUFDOUMsU0FBTztBQUFBO0FBQUEsSUFFTjtBQUFBLE1BQ0MsTUFBTTtBQUFBLE1BQ04sYUFBYTtBQUFBLE1BQ2IsS0FBSztBQUFBLE1BQ0wsS0FBSztBQUFBLE1BQ0wsS0FBSztBQUFBLE1BQ0wsTUFBTTtBQUFBLE1BQ04sU0FBUztBQUFBLElBQ1Y7QUFBQTtBQUFBLElBRUE7QUFBQSxNQUNDLE1BQU07QUFBQSxNQUNOLGFBQWE7QUFBQSxNQUNiLE9BQU87QUFBQSxRQUNOO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxhQUFhO0FBQUEsVUFDYixTQUFTO0FBQUEsUUFDVjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUE7QUFBQSxJQUVBO0FBQUEsTUFDQyxNQUFNO0FBQUEsTUFDTixhQUFhO0FBQUEsTUFDYixPQUFPO0FBQUEsUUFDTjtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxhQUFhO0FBQUEsVUFDYixTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFFBQ1Y7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUFBO0FBQUEsSUFFQTtBQUFBLE1BQ0MsTUFBTTtBQUFBLE1BQ04sYUFBYTtBQUFBLE1BQ2IsT0FBTztBQUFBLFFBQ047QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLFNBQVM7QUFBQSxZQUNSLFFBQVE7QUFBQSxZQUNSLGFBQWE7QUFBQSxZQUNiLFNBQVM7QUFBQSxVQUNWO0FBQUEsVUFDQSxTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLGFBQWE7QUFBQSxVQUNiLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFlBQ1IsVUFBVTtBQUFBLFlBQ1YsWUFBWTtBQUFBLFlBQ1osU0FBUztBQUFBLFVBQ1Y7QUFBQSxVQUNBLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsTUFBTTtBQUFBLFVBQ04sU0FBUztBQUFBLFVBQ1QsVUFBVTtBQUFBLFlBQ1QsS0FBSztBQUFBLFlBQ0wsT0FBTztBQUFBLFVBQ1I7QUFBQSxRQUNEO0FBQUEsTUFDRDtBQUFBLElBQ0Q7QUFBQTtBQUFBLElBRUE7QUFBQSxNQUNDLE1BQU07QUFBQSxNQUNOLGFBQWE7QUFBQSxNQUNiLE9BQU87QUFBQSxRQUNOO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLGFBQWE7QUFBQSxVQUNiLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFFBQ1Y7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUFBO0FBQUEsSUFFQTtBQUFBLE1BQ0MsTUFBTTtBQUFBLE1BQ04sYUFBYTtBQUFBLE1BQ2IsT0FBTztBQUFBLFFBQ047QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsYUFBYTtBQUFBLFVBQ2IsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLFNBQVM7QUFBQSxRQUNWO0FBQUEsTUFDRDtBQUFBLElBQ0Q7QUFBQTtBQUFBLElBRUE7QUFBQSxNQUNDLE1BQU07QUFBQSxNQUNOLGFBQWE7QUFBQSxNQUNiLE9BQU87QUFBQSxRQUNOO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLGFBQWE7QUFBQSxVQUNiLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsTUFBTTtBQUFBLFVBQ04sU0FBUztBQUFBLFVBQ1QsVUFBVTtBQUFBLFlBQ1QsS0FBSztBQUFBLFlBQ0wsT0FBTztBQUFBLFVBQ1I7QUFBQSxRQUNEO0FBQUEsTUFDRDtBQUFBLElBQ0Q7QUFBQTtBQUFBLElBRUE7QUFBQSxNQUNDLE1BQU07QUFBQSxNQUNOLGFBQWE7QUFBQSxNQUNiLE9BQU87QUFBQSxRQUNOO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsWUFDUixRQUFRO0FBQUEsWUFDUixVQUFVO0FBQUEsWUFDVixTQUFTO0FBQUEsVUFDVjtBQUFBLFVBQ0EsU0FBUztBQUFBLFFBQ1Y7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUFBO0FBQUEsSUFFQTtBQUFBLE1BQ0MsTUFBTTtBQUFBLE1BQ04sYUFBYTtBQUFBLE1BQ2IsT0FBTztBQUFBLFFBQ047QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLGFBQWE7QUFBQSxVQUNiLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsYUFBYTtBQUFBLFVBQ2IsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLFNBQVM7QUFBQSxZQUNSLE9BQU87QUFBQSxZQUNQLFVBQVU7QUFBQSxVQUNYO0FBQUEsVUFDQSxTQUFTO0FBQUEsUUFDVjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUE7QUFBQSxJQUVBO0FBQUEsTUFDQyxNQUFNO0FBQUEsTUFDTixhQUFhO0FBQUEsTUFDYixPQUFPO0FBQUEsUUFDTjtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsYUFBYTtBQUFBLFVBQ2IsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxhQUFhO0FBQUEsVUFDYixTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFlBQ1IsT0FBTztBQUFBLFlBQ1AsVUFBVTtBQUFBLFVBQ1g7QUFBQSxVQUNBLFNBQVM7QUFBQSxRQUNWO0FBQUEsTUFDRDtBQUFBLElBQ0Q7QUFBQTtBQUFBLElBRUE7QUFBQSxNQUNDLE1BQU07QUFBQSxNQUNOLGFBQWE7QUFBQSxNQUNiLE9BQU87QUFBQSxRQUNOO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxhQUFhO0FBQUEsVUFDYixTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLGFBQWE7QUFBQSxVQUNiLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsWUFDUixPQUFPO0FBQUEsWUFDUCxVQUFVO0FBQUEsVUFDWDtBQUFBLFVBQ0EsU0FBUztBQUFBLFFBQ1Y7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUFBO0FBQUEsSUFFQTtBQUFBLE1BQ0MsTUFBTTtBQUFBLE1BQ04sYUFBYTtBQUFBLE1BQ2IsT0FBTztBQUFBLFFBQ047QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLGFBQWE7QUFBQSxVQUNiLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsYUFBYTtBQUFBLFVBQ2IsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLFNBQVM7QUFBQSxZQUNSLE9BQU87QUFBQSxZQUNQLFVBQVU7QUFBQSxVQUNYO0FBQUEsVUFDQSxTQUFTO0FBQUEsUUFDVjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUE7QUFBQSxJQUVBO0FBQUEsTUFDQyxNQUFNO0FBQUEsTUFDTixhQUFhO0FBQUEsTUFDYixPQUFPO0FBQUEsUUFDTjtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsYUFBYTtBQUFBLFVBQ2IsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxhQUFhO0FBQUEsVUFDYixTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFlBQ1IsT0FBTztBQUFBLFlBQ1AsVUFBVTtBQUFBLFVBQ1g7QUFBQSxVQUNBLFNBQVM7QUFBQSxRQUNWO0FBQUEsTUFDRDtBQUFBLElBQ0Q7QUFBQTtBQUFBLElBRUE7QUFBQSxNQUNDLE1BQU07QUFBQSxNQUNOLGFBQWE7QUFBQSxNQUNiLE9BQU87QUFBQSxRQUNOO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxhQUFhO0FBQUEsVUFDYixTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLGFBQWE7QUFBQSxVQUNiLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsWUFDUixPQUFPO0FBQUEsWUFDUCxVQUFVO0FBQUEsVUFDWDtBQUFBLFVBQ0EsU0FBUztBQUFBLFFBQ1Y7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUFBO0FBQUEsSUFFQTtBQUFBLE1BQ0MsTUFBTTtBQUFBLE1BQ04sYUFBYTtBQUFBLE1BQ2IsT0FBTztBQUFBLFFBQ047QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLGFBQWE7QUFBQSxVQUNiLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsYUFBYTtBQUFBLFVBQ2IsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLFNBQVM7QUFBQSxZQUNSLE9BQU87QUFBQSxZQUNQLFVBQVU7QUFBQSxVQUNYO0FBQUEsVUFDQSxTQUFTO0FBQUEsUUFDVjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUE7QUFBQSxJQUVBO0FBQUEsTUFDQyxNQUFNO0FBQUEsTUFDTixhQUFhO0FBQUEsTUFDYixPQUFPO0FBQUEsUUFDTjtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxhQUFhO0FBQUEsVUFDYixTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFB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LDBCQUEwQixlQUFlLENBQUMsR0FBRyxPQUFPLFVBQVUsVUFBVSxLQUFLLG1CQUFtQixJQUFJO0FBQ25KLFdBQVMsWUFBWSxlQUFlLENBQUMsSUFBSSxNQUFNLDBCQUEwQixlQUFlLENBQUMsR0FBRyxPQUFPLFVBQVUsVUFBVSxLQUFLLG1CQUFtQixJQUFJO0FBQ25KLFdBQVMsWUFBWSxlQUFlLENBQUMsSUFBSSxNQUFNLDBCQUEwQixlQUFlLENBQUMsR0FBRyxPQUFPLFVBQVUsVUFBVSxLQUFLLG1CQUFtQixJQUFJO0FBQ25KLFdBQVMsWUFBWSxlQUFlLENBQUMsSUFBSSxNQUFNLDBCQUEwQixlQUFlLENBQUMsR0FBRyxPQUFPLFVBQVUsVUFBVSxLQUFLLG1CQUFtQixJQUFJO0FBQ25KLFdBQVMsWUFBWSxlQUFlLENBQUMsSUFBSSxNQUFNLDBCQUEwQixlQUFlLENBQUMsR0FBRyxPQUFPLFVBQVUsVUFBVSxLQUFLLG1CQUFtQixJQUFJO0FBQ25KLFdBQVMsWUFBWSxlQUFlLENBQUMsSUFBSSxNQUFNLDBCQUEwQixlQUFlLENBQUMsR0FBRyxPQUFPLFVBQVUsVUFBVSxLQUFLLG1CQUFtQixJQUFJO0FBQ25KLFdBQVMsYUFBYSxlQUFlLENBQUMsSUFBSSxNQUFNLDBCQUEwQixlQUFlLENBQUMsR0FBRyxPQUFPLFVBQVUsVUFBVSxLQUFLLG1CQUFtQixJQUFJO0FBQ3BKLFdBQVMsYUFBYSxlQUFlLEVBQUUsSUFBSSxNQUFNLDBCQUEwQixlQUFlLEVBQUUsR0FBRyxPQUFPLFVBQVUsVUFBVSxLQUFLLG1CQUFtQixJQUFJO0FBQ3RKLFdBQVMsYUFBYSxlQUFlLEVBQUUsSUFBSSxNQUFNLDBCQUEwQixlQUFlLEVBQUUsR0FBRyxPQUFPLFVBQVUsVUFBVSxLQUFLLG1CQUFtQixJQUFJO0FBQ3RKLFdBQVMsYUFBYSxlQUFlLEVBQUUsSUFBSSxNQUFNLDBCQUEwQixlQUFlLEVBQUUsR0FBRyxPQUFPLFVBQVUsVUFBVSxLQUFLLG1CQUFtQixJQUFJO0FBQ3RKLFdBQVMsYUFBYSxlQUFlLEVBQUUsSUFBSSxNQUFN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QUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9BLHVCQUE2QjtBQUU1QixRQUFJLEtBQUssZ0NBQWdDLE1BQU07QUFDOUMsYUFBTyxhQUFhLEtBQUssMkJBQTJCO0FBQUEsSUFDckQ7QUFFQSxTQUFLLDhCQUE4QixPQUFPLFdBQVcsTUFBTTtBQUMxRCxXQUFLLDhCQUE4QjtBQUduQyxZQUFNLGdCQUFnQyxDQUFDO0FBQ3ZDLFdBQUssWUFBWSxRQUFRLFVBQVE7QUFFaEMsY0FBTSxjQUFlLEtBQWtEO0FBQ3ZFLFlBQUksQ0FBQyxlQUFlLENBQUMsWUFBWSxlQUFlO0FBQy9DLHdCQUFjLEtBQUssSUFBSTtBQUFBLFFBQ3hCO0FBQUEsTUFDRCxDQUFDO0FBR0Qsb0JBQWMsUUFBUSxVQUFRLEtBQUssWUFBWSxPQUFPLElBQUksQ0FBQztBQUczRCxVQUFJLGlCQUFpQjtBQUNyQixXQUFLLFlBQVksUUFBUSxVQUFRO0FBRWhDLFlBQUksS0FBSyxZQUFZO0FBQ3BCLGNBQUk7QUFFSCxrQkFBTSxjQUFlLEtBQWtEO0FBQ3ZFLGdCQUFJLGVBQWUsWUFBWSxhQUFhO0FBRzNDLGtCQUFJLE9BQVEsS0FBd0Msa0JBQWtCLFlBQVk7QUFDakYsZ0JBQUMsS0FBdUMsY0FBYztBQUN0RDtBQUFBLGNBQ0Q7QUFBQSxZQUNEO0FBQUEsVUFDRCxTQUFTLE9BQU87QUFFZixvQkFBUSxLQUFLLDhDQUE4QyxLQUFLO0FBQUEsVUFDakU7QUFBQSxRQUNEO0FBQUEsTUFDRCxDQUFDO0FBR0QsVUFBSSxpQkFBaUIsR0FBRztBQUN2QixnQkFBUSxNQUFNLHdCQUF3QixjQUFjLDRDQUE0QztBQUFBLE1BQ2pHO0FBQUEsSUFDRCxHQUFHLEdBQUc7QUFBQSxFQUNQO0FBRUQ7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJpbXBvcnRfb2JzaWRpYW4iLCAidW5pcXVlQXR0YWNobWVudHMiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImNvbW1hbmRSZWdpc3RyeSIsICJjb21tYW5kIiwgImUiLCAiX2EiLCAiX2IiLCAiaW1wb3J0X29ic2lkaWFuIiwgImUiLCAidGl0bGVFbCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJidXR0b25zIiwgImltcG9ydF9vYnNpZGlhbiIsICJjb21wYXJpc29uIiwgImFsbEVudHJpZXMiLCAicHJlcGFyZURlbGV0aW9uUHJldmlldyIsICJleGVjdXRlU21hcnREZWxldGlvbiIsICJEZWxldGlvblByZXZpZXdNb2RhbCIsICJjb250YWluZXJFbCIsICJnZXRDTVNWaWV3T3B0aW9ucyJdCn0K
