/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  ExplorerFocusPlugin: () => ExplorerFocusPlugin,
  default: () => main_default
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// lang/en.ts
var lang = {
  focus: "Focus",
  enterFocus: "Enter focus",
  exitFocus: "Exit focus",
  toggleFocus: "Toggle focus",
  settings: "Explorer focus settings",
  showRightClickMenu: "Show right-click menu option",
  showFileExplorerIcon: "Show file explorer icon",
  focusLevel: "Command focus level",
  focusLevelFile: "Current file only",
  focusLevelParent: "Parent folder",
  focusLevelGrandparent: "Grandparent folder",
  focusLevelGreatGrandparent: "Great grandparent folder",
  focusLevelCustom: "Specific folder",
  focusLevelDesc: "Determines what to focus when using the toggle command or file explorer icon. Right-click menu always focuses the clicked file/folder.",
  customFolderPath: "Custom folder path",
  customFolderPathDesc: "Enter a folder path (folder/subfolder). This folder will be focused regardless of which file is open.",
  hideAncestorFolders: "Hide ancestral indents",
  hideAncestorFoldersDesc: "When enabled, hides parent folder indentation when focusing, making the focused folder appear at root level."
};
var en_default = lang;

// lang/zh.ts
var lang2 = {
  focus: "\u4E13\u6CE8",
  enterFocus: "\u4E13\u6CE8",
  exitFocus: "\u9000\u51FA\u4E13\u6CE8",
  toggleFocus: "\u5207\u6362\u4E13\u6CE8",
  settings: "\u8D44\u6E90\u7BA1\u7406\u5668\u4E13\u6CE8\u8BBE\u7F6E",
  showRightClickMenu: "\u663E\u793A\u53F3\u952E\u83DC\u5355\u9009\u9879",
  showFileExplorerIcon: "\u663E\u793A\u6587\u4EF6\u6D4F\u89C8\u5668\u56FE\u6807",
  focusLevel: "\u547D\u4EE4\u4E13\u6CE8\u7EA7\u522B",
  focusLevelFile: "\u4EC5\u5F53\u524D\u6587\u4EF6",
  focusLevelParent: "\u7236\u6587\u4EF6\u5939",
  focusLevelGrandparent: "\u7956\u7236\u6587\u4EF6\u5939",
  focusLevelGreatGrandparent: "\u66FE\u7956\u7236\u6587\u4EF6\u5939",
  focusLevelCustom: "\u7279\u5B9A\u6587\u4EF6\u5939",
  focusLevelDesc: "\u786E\u5B9A\u4F7F\u7528\u5207\u6362\u547D\u4EE4\u6216\u6587\u4EF6\u6D4F\u89C8\u5668\u56FE\u6807\u65F6\u8981\u805A\u7126\u7684\u5185\u5BB9\u3002\u53F3\u952E\u83DC\u5355\u59CB\u7EC8\u805A\u7126\u5355\u51FB\u7684\u6587\u4EF6/\u6587\u4EF6\u5939\u3002",
  customFolderPath: "\u81EA\u5B9A\u4E49\u6587\u4EF6\u5939\u8DEF\u5F84",
  customFolderPathDesc: "\u8F93\u5165\u6587\u4EF6\u5939\u8DEF\u5F84\uFF08\u6587\u4EF6\u5939/\u5B50\u6587\u4EF6\u5939\uFF09\u3002\u65E0\u8BBA\u6253\u5F00\u54EA\u4E2A\u6587\u4EF6\uFF0C\u90FD\u4F1A\u805A\u7126\u6B64\u6587\u4EF6\u5939\u3002",
  hideAncestorFolders: "\u9690\u85CF\u7956\u5148\u7F29\u8FDB",
  hideAncestorFoldersDesc: "\u542F\u7528\u540E\uFF0C\u805A\u7126\u65F6\u9690\u85CF\u7236\u6587\u4EF6\u5939\u7F29\u8FDB\uFF0C\u4F7F\u805A\u7126\u7684\u6587\u4EF6\u5939\u663E\u793A\u5728\u6839\u7EA7\u522B\u3002"
};
var zh_default = lang2;

// lang/index.ts
var langs = {
  en: en_default,
  zh: zh_default
};
var lang_default = langs;

// src/types.ts
var DEFAULT_SETTINGS = {
  showRightClickMenu: true,
  showFileExplorerIcon: true,
  focusLevel: "parent",
  customFolderPath: "",
  hideAncestorFolders: false
};

// src/ui/settings-tab.ts
var import_obsidian2 = require("obsidian");

// node_modules/.pnpm/monkey-around@3.0.0/node_modules/monkey-around/dist/index.mjs
function around(obj, factories) {
  const removers = Object.keys(factories).map((key) => around1(obj, key, factories[key]));
  return removers.length === 1 ? removers[0] : function() {
    removers.forEach((r) => r());
  };
}
function around1(obj, method, createWrapper) {
  const inherited = obj[method], hadOwn = obj.hasOwnProperty(method), original = hadOwn ? inherited : function() {
    return Object.getPrototypeOf(obj)[method].apply(this, arguments);
  };
  let current = createWrapper(original);
  if (inherited)
    Object.setPrototypeOf(current, inherited);
  Object.setPrototypeOf(wrapper, current);
  obj[method] = wrapper;
  return remove;
  function wrapper(...args) {
    if (current === original && obj[method] === wrapper)
      remove();
    return current.apply(this, args);
  }
  function remove() {
    if (obj[method] === wrapper) {
      if (hadOwn)
        obj[method] = original;
      else
        delete obj[method];
    }
    if (current === original)
      return;
    current = original;
    Object.setPrototypeOf(wrapper, inherited || Function);
  }
}

// src/utils/file-explorer-patch.ts
var prototypePatched = false;
function patchFileExplorer(plugin) {
  const fileExplorer = getFileExplorer(plugin);
  if (!fileExplorer) {
    return;
  }
  if (!prototypePatched) {
    plugin.register(
      around(Object.getPrototypeOf(fileExplorer), {
        getSortedFolderItems(old) {
          return function(folder) {
            let sortedChildren = old.call(this, folder);
            if (plugin.isFocus && plugin.focusedPath) {
              const focusedPath = plugin.focusedPath;
              sortedChildren = sortedChildren.filter((vEl) => {
                const filePath = vEl.file.path;
                if (filePath === focusedPath) {
                  vEl.info.hidden = false;
                  return true;
                }
                if (filePath.startsWith(focusedPath + "/")) {
                  vEl.info.hidden = false;
                  return true;
                }
                if (focusedPath.startsWith(filePath + "/")) {
                  vEl.info.hidden = false;
                  return true;
                }
                vEl.info.hidden = true;
                return false;
              });
            } else {
              sortedChildren.forEach((vEl) => {
                vEl.info.hidden = false;
              });
            }
            return sortedChildren;
          };
        }
      })
    );
    prototypePatched = true;
  }
  fileExplorer.fileExplorerPlusPatched = true;
}
function getFileExplorer(plugin) {
  var _a;
  const fileExplorerContainer = (_a = plugin.app.workspace.getLeavesOfType("file-explorer")) == null ? void 0 : _a.first();
  return fileExplorerContainer == null ? void 0 : fileExplorerContainer.view;
}
function getAllFileExplorers(plugin) {
  const fileExplorerLeaves = plugin.app.workspace.getLeavesOfType("file-explorer");
  return fileExplorerLeaves.map((leaf) => leaf.view);
}

// src/utils/settings-compat.ts
var import_obsidian = require("obsidian");
var ObsidianModule = __toESM(require("obsidian"), 1);
function createSettingsGroup(containerEl, heading, manifestId) {
  if ((0, import_obsidian.requireApiVersion)("1.11.0")) {
    const SettingGroupClass = ObsidianModule.SettingGroup;
    if (SettingGroupClass) {
      const group = heading ? new SettingGroupClass(containerEl).setHeading(heading) : new SettingGroupClass(containerEl);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  if (manifestId) {
    containerEl.addClass(`${manifestId}-settings-compat`);
  }
  {
    if (heading) {
      const headingEl = containerEl.createDiv("setting-group-heading");
      headingEl.createEl("h3", { text: heading });
    }
    return {
      addSetting(cb) {
        const setting = new import_obsidian.Setting(containerEl);
        cb(setting);
      }
    };
  }
}

// src/ui/settings-tab.ts
var ExplorerFocusSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    const generalGroup = createSettingsGroup(containerEl, void 0, "explorer-focus");
    generalGroup.addSetting((setting) => {
      setting.setName(this.plugin.lang.showRightClickMenu).addToggle((toggle) => toggle.setValue(this.plugin.settings.showRightClickMenu).onChange(async (value) => {
        this.plugin.settings.showRightClickMenu = value;
        await this.plugin.saveSettings();
      }));
    });
    generalGroup.addSetting((setting) => {
      setting.setName(this.plugin.lang.showFileExplorerIcon).addToggle((toggle) => toggle.setValue(this.plugin.settings.showFileExplorerIcon).onChange(async (value) => {
        this.plugin.settings.showFileExplorerIcon = value;
        await this.plugin.saveSettings();
        this.plugin.updateFileExplorerIcon();
      }));
    });
    generalGroup.addSetting((setting) => {
      setting.setName(this.plugin.lang.focusLevel).setDesc(this.plugin.lang.focusLevelDesc).addDropdown((dropdown) => dropdown.addOption("file", this.plugin.lang.focusLevelFile).addOption("parent", this.plugin.lang.focusLevelParent).addOption("grandparent", this.plugin.lang.focusLevelGrandparent).addOption("greatgrandparent", this.plugin.lang.focusLevelGreatGrandparent).addOption("custom", this.plugin.lang.focusLevelCustom).setValue(this.plugin.settings.focusLevel).onChange(async (value) => {
        this.plugin.settings.focusLevel = value;
        await this.plugin.saveSettings();
        if (this.plugin.isFocus) {
          const fileExplorers = getAllFileExplorers(this.plugin);
          fileExplorers.forEach((fileExplorer) => {
            if (fileExplorer == null ? void 0 : fileExplorer.requestSort) {
              fileExplorer.requestSort();
            }
          });
        }
        this.display();
      }));
    });
    if (this.plugin.settings.focusLevel === "custom") {
      generalGroup.addSetting((setting) => {
        setting.setName(this.plugin.lang.customFolderPath).setDesc(this.plugin.lang.customFolderPathDesc).addText((text) => text.setPlaceholder("Folder/subfolder").setValue(this.plugin.settings.customFolderPath).onChange(async (value) => {
          this.plugin.settings.customFolderPath = value;
          await this.plugin.saveSettings();
        }));
      });
    }
  }
};

// src/utils/focus.ts
function getFocusPath(path, level, settings) {
  if (level === "custom") {
    return settings.customFolderPath || path;
  }
  if (level === "file") {
    return path;
  }
  const parts = path.split("/");
  if (level === "parent") {
    if (parts.length === 1) {
      return path;
    }
    return parts.slice(0, -1).join("/");
  }
  if (level === "grandparent") {
    if (parts.length <= 2) {
      return parts[0] || path;
    }
    return parts.slice(0, -2).join("/");
  }
  if (parts.length <= 3) {
    return parts[0] || path;
  }
  return parts.slice(0, -3).join("/");
}

// src/commands/index.ts
function registerCommands(plugin) {
  plugin.addCommand({
    id: "toggle",
    name: plugin.lang.toggleFocus,
    callback: () => {
      if (plugin.isFocus) {
        plugin.exitFocus();
      } else {
        if (plugin.settings.focusLevel === "custom") {
          if (plugin.settings.customFolderPath) {
            plugin.enterFocus(plugin.settings.customFolderPath);
          }
        } else {
          const file = plugin.app.workspace.getActiveFile();
          if (file == null ? void 0 : file.path) {
            const focusPath = getFocusPath(file.path, plugin.settings.focusLevel, plugin.settings);
            plugin.enterFocus(focusPath);
          }
        }
      }
    }
  });
  if (plugin.settings.showRightClickMenu) {
    plugin.registerEvent(
      plugin.app.workspace.on("file-menu", (menu, file) => {
        if (!plugin.settings.showRightClickMenu) {
          return;
        }
        menu.addItem((item) => {
          item.setTitle(plugin.isFocus ? plugin.lang.exitFocus : plugin.lang.focus).setIcon(plugin.isFocus ? "log-out" : "focus").onClick(() => {
            plugin.toggleFocus(file == null ? void 0 : file.path);
          });
        });
      })
    );
  }
}

// src/utils/file-explorer.ts
function findNavButtonsContainer(fileExplorerView) {
  var _a;
  let container = fileExplorerView.querySelector(".nav-buttons-container");
  if (container) {
    return container;
  }
  container = fileExplorerView.querySelector(".nav-header-button-container");
  if (container) {
    return container;
  }
  const existingButtons = fileExplorerView.querySelectorAll(".nav-action-button");
  if (existingButtons.length > 0) {
    const firstButton = existingButtons[0];
    const parent = firstButton.parentElement;
    if (parent && (parent.classList.contains("nav-buttons-container") || parent.classList.contains("nav-header-button-container") || Array.from(parent.children).some((el) => el.classList.contains("nav-action-button")))) {
      return parent;
    }
  }
  const viewHeader = fileExplorerView.querySelector(".view-header");
  if (viewHeader) {
    const headerContainer = viewHeader.querySelector(".nav-buttons-container") || viewHeader.querySelector(".nav-header-button-container") || viewHeader.querySelector(".view-header-title-container");
    if (headerContainer) {
      return headerContainer;
    }
    return viewHeader;
  }
  const navFilesContainer = fileExplorerView.querySelector(".nav-files-container");
  if (navFilesContainer) {
    let mobileButtonContainer = fileExplorerView.querySelector(".explorer-focus-mobile-buttons");
    if (!mobileButtonContainer) {
      mobileButtonContainer = document.createElement("div");
      mobileButtonContainer.className = "nav-buttons-container explorer-focus-mobile-buttons";
      mobileButtonContainer.setCssProps({
        display: "flex",
        alignItems: "center",
        gap: "4px",
        padding: "8px",
        borderBottom: "1px solid var(--background-modifier-border)"
      });
      (_a = navFilesContainer.parentElement) == null ? void 0 : _a.insertBefore(mobileButtonContainer, navFilesContainer);
    }
    return mobileButtonContainer;
  }
  let topContainer = fileExplorerView.querySelector(".explorer-focus-mobile-buttons");
  if (!topContainer) {
    topContainer = document.createElement("div");
    topContainer.className = "nav-buttons-container explorer-focus-mobile-buttons";
    topContainer.setCssProps({
      display: "flex",
      alignItems: "center",
      gap: "4px",
      padding: "8px",
      borderBottom: "1px solid var(--background-modifier-border)"
    });
    fileExplorerView.insertBefore(topContainer, fileExplorerView.firstChild);
  }
  return topContainer;
}
function createFileExplorerIcon(plugin) {
  const icon = document.createElement("div");
  icon.className = "clickable-icon nav-action-button";
  icon.setAttribute("aria-label", plugin.lang.toggleFocus);
  const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  svg.setAttribute("xmlns", "http://www.w3.org/2000/svg");
  svg.setAttribute("width", "24");
  svg.setAttribute("height", "24");
  svg.setAttribute("viewBox", "0 0 24 24");
  svg.setAttribute("fill", "none");
  svg.setAttribute("stroke", "currentColor");
  svg.setAttribute("stroke-width", "2");
  svg.setAttribute("stroke-linecap", "round");
  svg.setAttribute("stroke-linejoin", "round");
  svg.setAttribute("class", "svg-icon lucide-focus");
  const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
  circle.setAttribute("cx", "12");
  circle.setAttribute("cy", "12");
  circle.setAttribute("r", "3");
  svg.appendChild(circle);
  const path1 = document.createElementNS("http://www.w3.org/2000/svg", "path");
  path1.setAttribute("d", "M3 7V5a2 2 0 0 1 2-2h2");
  svg.appendChild(path1);
  const path2 = document.createElementNS("http://www.w3.org/2000/svg", "path");
  path2.setAttribute("d", "M17 3h2a2 2 0 0 1 2 2v2");
  svg.appendChild(path2);
  const path3 = document.createElementNS("http://www.w3.org/2000/svg", "path");
  path3.setAttribute("d", "M21 17v2a2 2 0 0 1-2 2h-2");
  svg.appendChild(path3);
  const path4 = document.createElementNS("http://www.w3.org/2000/svg", "path");
  path4.setAttribute("d", "M7 21H5a2 2 0 0 1-2-2v-2");
  svg.appendChild(path4);
  icon.appendChild(svg);
  return icon;
}
function insertFileExplorerIcon(icon, navButtonsContainer) {
  if (navButtonsContainer.contains(icon)) {
    return;
  }
  const allIcons = Array.from(navButtonsContainer.querySelectorAll(".clickable-icon.nav-action-button"));
  const defaultIcons = allIcons.filter((el) => !el.classList.contains("cmdr") && el !== icon);
  const cmdrIcons = Array.from(navButtonsContainer.querySelectorAll(".cmdr"));
  if (cmdrIcons.length > 0) {
    navButtonsContainer.insertBefore(icon, cmdrIcons[0]);
  } else if (defaultIcons.length > 0) {
    const lastIcon = defaultIcons[defaultIcons.length - 1];
    if (lastIcon.nextSibling) {
      navButtonsContainer.insertBefore(icon, lastIcon.nextSibling);
    } else {
      navButtonsContainer.appendChild(icon);
    }
  } else {
    navButtonsContainer.appendChild(icon);
  }
}

// src/main.ts
var ExplorerFocusPlugin = class extends import_obsidian3.Plugin {
  constructor(app, manifest) {
    super(app, manifest);
    const obsidianLangName = window.localStorage.getItem("language");
    const langName = obsidianLangName === "zh" ? "zh" : "en";
    this.lang = lang_default[langName];
    this.isFocus = false;
    this.focusedPath = null;
    this.fileExplorerIcon = null;
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new ExplorerFocusSettingTab(this.app, this));
    registerCommands(this);
    if (this.settings.showFileExplorerIcon) {
      this.addFileExplorerIcon();
    }
    this.app.workspace.onLayoutReady(() => {
      this.patchAllFileExplorers();
      this.updateFocusModeClasses();
    });
    this.app.workspace.on("layout-change", () => {
      this.patchAllFileExplorers();
      this.updateFocusModeClasses();
    });
  }
  async loadSettings() {
    const loadedData = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, loadedData);
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  toggleFocus(path) {
    if (this.isFocus) {
      this.exitFocus();
    } else if (path) {
      this.enterFocus(path);
    }
  }
  enterFocus(path) {
    this.isFocus = true;
    this.focusedPath = path;
    this.updateFileExplorerIcon();
    this.updateFocusModeClasses();
    const fileExplorers = getAllFileExplorers(this);
    fileExplorers.forEach((fileExplorer) => {
      if (fileExplorer == null ? void 0 : fileExplorer.requestSort) {
        fileExplorer.requestSort();
      }
    });
    setTimeout(() => {
      fileExplorers.forEach((fileExplorer) => {
        this.refreshFileExplorerVisibility(fileExplorer);
      });
    }, 0);
  }
  patchAllFileExplorers() {
    patchFileExplorer(this);
    const fileExplorers = getAllFileExplorers(this);
    fileExplorers.forEach((fileExplorer) => {
      fileExplorer.fileExplorerPlusPatched = true;
    });
  }
  exitFocus() {
    this.isFocus = false;
    this.focusedPath = null;
    this.updateFileExplorerIcon();
    this.updateFocusModeClasses();
    const fileExplorers = getAllFileExplorers(this);
    fileExplorers.forEach((fileExplorer) => {
      if (fileExplorer == null ? void 0 : fileExplorer.requestSort) {
        fileExplorer.requestSort();
      }
    });
    setTimeout(() => {
      fileExplorers.forEach((fileExplorer) => {
        this.refreshFileExplorerVisibility(fileExplorer);
      });
    }, 0);
  }
  refreshFileExplorerVisibility(fileExplorer) {
    if (!(fileExplorer == null ? void 0 : fileExplorer.fileItems)) {
      return;
    }
    Object.values(fileExplorer.fileItems).forEach((vEl) => {
      if (!vEl || !vEl.el) {
        return;
      }
      const filePath = vEl.file.path;
      let shouldShow = true;
      if (this.isFocus && this.focusedPath) {
        const focusedPath = this.focusedPath;
        if (filePath === focusedPath) {
          shouldShow = true;
        } else if (filePath.startsWith(focusedPath + "/")) {
          shouldShow = true;
        } else if (focusedPath.startsWith(filePath + "/")) {
          shouldShow = true;
        } else {
          shouldShow = false;
        }
      }
      if (vEl.info) {
        vEl.info.hidden = !shouldShow;
      }
      if (shouldShow) {
        vEl.el.setCssProps({ display: "" });
        vEl.el.removeAttribute("data-explorer-focus-hidden");
      } else {
        vEl.el.setCssProps({ display: "none" });
        vEl.el.setAttribute("data-explorer-focus-hidden", "true");
      }
    });
  }
  updateFocusModeClasses() {
    const fileExplorers = getAllFileExplorers(this);
    fileExplorers.forEach((fileExplorer) => {
      const containerEl = fileExplorer.containerEl;
      if (this.isFocus) {
        containerEl.addClass("explorer-focus-mode");
      } else {
        containerEl.removeClass("explorer-focus-mode");
      }
    });
  }
  addFileExplorerIcon() {
    const handleIconClick = () => {
      if (this.isFocus) {
        this.exitFocus();
      } else {
        if (this.settings.focusLevel === "custom") {
          if (this.settings.customFolderPath) {
            this.enterFocus(this.settings.customFolderPath);
          }
        } else {
          const file = this.app.workspace.getActiveFile();
          if (file == null ? void 0 : file.path) {
            const focusPath = getFocusPath(file.path, this.settings.focusLevel, this.settings);
            this.enterFocus(focusPath);
          }
        }
      }
    };
    const addIconToFileExplorer = () => {
      const fileExplorerLeaves = this.app.workspace.getLeavesOfType("file-explorer");
      if (fileExplorerLeaves.length === 0) {
        return;
      }
      const fileExplorerView = fileExplorerLeaves[0].view.containerEl;
      const navButtonsContainer = findNavButtonsContainer(fileExplorerView);
      if (!navButtonsContainer) {
        return;
      }
      if (this.fileExplorerIcon && navButtonsContainer.contains(this.fileExplorerIcon)) {
        return;
      }
      if (this.fileExplorerIcon && this.fileExplorerIcon.parentElement) {
        this.fileExplorerIcon.remove();
      }
      if (!this.fileExplorerIcon) {
        this.fileExplorerIcon = createFileExplorerIcon(this);
        this.fileExplorerIcon.setCssProps({ touchAction: "manipulation" });
        let touchHandled = false;
        this.registerDomEvent(this.fileExplorerIcon, "touchstart", (evt) => {
          touchHandled = true;
          evt.preventDefault();
          evt.stopPropagation();
          handleIconClick();
          setTimeout(() => {
            touchHandled = false;
          }, 300);
        });
        this.registerDomEvent(this.fileExplorerIcon, "click", (evt) => {
          if (touchHandled) {
            evt.preventDefault();
            evt.stopPropagation();
            return;
          }
          evt.preventDefault();
          evt.stopPropagation();
          handleIconClick();
        });
      }
      this.updateFileExplorerIcon();
      insertFileExplorerIcon(this.fileExplorerIcon, navButtonsContainer);
    };
    addIconToFileExplorer();
    this.registerEvent(
      this.app.workspace.on("layout-change", () => {
        if (this.settings.showFileExplorerIcon) {
          addIconToFileExplorer();
        }
      })
    );
  }
  updateFileExplorerIcon() {
    if (!this.fileExplorerIcon) {
      return;
    }
    if (!this.settings.showFileExplorerIcon) {
      if (this.fileExplorerIcon.parentElement) {
        this.fileExplorerIcon.remove();
      }
      return;
    }
    if (!this.fileExplorerIcon.parentElement) {
      const fileExplorerLeaves = this.app.workspace.getLeavesOfType("file-explorer");
      if (fileExplorerLeaves.length > 0) {
        const fileExplorerView = fileExplorerLeaves[0].view.containerEl;
        const navButtonsContainer = findNavButtonsContainer(fileExplorerView);
        if (navButtonsContainer) {
          insertFileExplorerIcon(this.fileExplorerIcon, navButtonsContainer);
        }
      }
    }
    if (this.fileExplorerIcon.style.cursor) {
      this.fileExplorerIcon.style.removeProperty("cursor");
    }
    if (this.isFocus) {
      this.fileExplorerIcon.addClass("is-active");
    } else {
      this.fileExplorerIcon.removeClass("is-active");
    }
  }
  onunload() {
    if (this.fileExplorerIcon) {
      this.fileExplorerIcon.remove();
      this.fileExplorerIcon = null;
    }
  }
};
var main_default = ExplorerFocusPlugin;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAibGFuZy9lbi50cyIsICJsYW5nL3poLnRzIiwgImxhbmcvaW5kZXgudHMiLCAic3JjL3R5cGVzLnRzIiwgInNyYy91aS9zZXR0aW5ncy10YWIudHMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL21vbmtleS1hcm91bmRAMy4wLjAvbm9kZV9tb2R1bGVzL21vbmtleS1hcm91bmQvZGlzdC9pbmRleC5tanMiLCAic3JjL3V0aWxzL2ZpbGUtZXhwbG9yZXItcGF0Y2gudHMiLCAic3JjL3V0aWxzL3NldHRpbmdzLWNvbXBhdC50cyIsICJzcmMvdXRpbHMvZm9jdXMudHMiLCAic3JjL2NvbW1hbmRzL2luZGV4LnRzIiwgInNyYy91dGlscy9maWxlLWV4cGxvcmVyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBBcHAsIFBsdWdpbiwgUGx1Z2luTWFuaWZlc3QgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IGxhbmdzLCB7IExhbmcgfSBmcm9tICcuLi9sYW5nJztcclxuaW1wb3J0IHsgRXhwbG9yZXJGb2N1c1NldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCB7IEV4cGxvcmVyRm9jdXNTZXR0aW5nVGFiIH0gZnJvbSAnLi91aS9zZXR0aW5ncy10YWInO1xyXG5pbXBvcnQgeyByZWdpc3RlckNvbW1hbmRzIH0gZnJvbSAnLi9jb21tYW5kcyc7XHJcbmltcG9ydCB7IGNyZWF0ZUZpbGVFeHBsb3Jlckljb24sIGluc2VydEZpbGVFeHBsb3Jlckljb24sIGZpbmROYXZCdXR0b25zQ29udGFpbmVyIH0gZnJvbSAnLi91dGlscy9maWxlLWV4cGxvcmVyJztcclxuaW1wb3J0IHsgcGF0Y2hGaWxlRXhwbG9yZXIgYXMgcGF0Y2hGaWxlRXhwbG9yZXJVdGlsLCBnZXRBbGxGaWxlRXhwbG9yZXJzLCBGaWxlRXhwbG9yZXJWaWV3IH0gZnJvbSAnLi91dGlscy9maWxlLWV4cGxvcmVyLXBhdGNoJztcclxuaW1wb3J0IHsgZ2V0Rm9jdXNQYXRoIH0gZnJvbSAnLi91dGlscy9mb2N1cyc7XHJcblxyXG5leHBvcnQgY2xhc3MgRXhwbG9yZXJGb2N1c1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcblx0aXNGb2N1czogYm9vbGVhbjtcclxuXHRmb2N1c2VkUGF0aDogc3RyaW5nIHwgbnVsbDtcclxuXHRsYW5nOiBMYW5nO1xyXG5cdHNldHRpbmdzITogRXhwbG9yZXJGb2N1c1NldHRpbmdzO1xyXG5cdGZpbGVFeHBsb3Jlckljb246IEhUTUxFbGVtZW50IHwgbnVsbDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIG1hbmlmZXN0OiBQbHVnaW5NYW5pZmVzdCkge1xyXG5cdFx0c3VwZXIoYXBwLCBtYW5pZmVzdCk7XHJcblx0XHRjb25zdCBvYnNpZGlhbkxhbmdOYW1lID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsYW5ndWFnZScpO1xyXG5cdFx0Y29uc3QgbGFuZ05hbWUgPSBvYnNpZGlhbkxhbmdOYW1lID09PSAnemgnID8gJ3poJyA6ICdlbic7XHJcblx0XHR0aGlzLmxhbmcgPSBsYW5nc1tsYW5nTmFtZV07XHJcblx0XHR0aGlzLmlzRm9jdXMgPSBmYWxzZTtcclxuXHRcdHRoaXMuZm9jdXNlZFBhdGggPSBudWxsO1xyXG5cdFx0dGhpcy5maWxlRXhwbG9yZXJJY29uID0gbnVsbDtcclxuXHR9XHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBFeHBsb3JlckZvY3VzU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cclxuXHRcdHJlZ2lzdGVyQ29tbWFuZHModGhpcyk7XHJcblxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2hvd0ZpbGVFeHBsb3Jlckljb24pIHtcclxuXHRcdFx0dGhpcy5hZGRGaWxlRXhwbG9yZXJJY29uKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnBhdGNoQWxsRmlsZUV4cGxvcmVycygpO1xyXG5cdFx0XHR0aGlzLnVwZGF0ZUZvY3VzTW9kZUNsYXNzZXMoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImxheW91dC1jaGFuZ2VcIiwgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnBhdGNoQWxsRmlsZUV4cGxvcmVycygpO1xyXG5cdFx0XHR0aGlzLnVwZGF0ZUZvY3VzTW9kZUNsYXNzZXMoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0Y29uc3QgbG9hZGVkRGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKSBhcyBQYXJ0aWFsPEV4cGxvcmVyRm9jdXNTZXR0aW5ncz4gfCBudWxsO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGxvYWRlZERhdGEpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHR9XHJcblxyXG5cdHRvZ2dsZUZvY3VzKHBhdGg6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xyXG5cdFx0aWYgKHRoaXMuaXNGb2N1cykge1xyXG5cdFx0XHR0aGlzLmV4aXRGb2N1cygpO1xyXG5cdFx0fSBlbHNlIGlmIChwYXRoKSB7XHJcblx0XHRcdHRoaXMuZW50ZXJGb2N1cyhwYXRoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGVudGVyRm9jdXMocGF0aDogc3RyaW5nKSB7XHJcblx0XHR0aGlzLmlzRm9jdXMgPSB0cnVlO1xyXG5cdFx0dGhpcy5mb2N1c2VkUGF0aCA9IHBhdGg7XHJcblx0XHRcclxuXHRcdC8vIFVwZGF0ZSBpY29uIGlmIGl0IGV4aXN0c1xyXG5cdFx0dGhpcy51cGRhdGVGaWxlRXhwbG9yZXJJY29uKCk7XHJcblx0XHRcclxuXHRcdC8vIFVwZGF0ZSBDU1MgY2xhc3Nlc1xyXG5cdFx0dGhpcy51cGRhdGVGb2N1c01vZGVDbGFzc2VzKCk7XHJcblx0XHRcclxuXHRcdC8vIFRyaWdnZXIgZmlsZSBleHBsb3JlciByZWZyZXNoIG9uIGFsbCBmaWxlIGV4cGxvcmVyIGluc3RhbmNlc1xyXG5cdFx0Y29uc3QgZmlsZUV4cGxvcmVycyA9IGdldEFsbEZpbGVFeHBsb3JlcnModGhpcyk7XHJcblx0XHRmaWxlRXhwbG9yZXJzLmZvckVhY2goZmlsZUV4cGxvcmVyID0+IHtcclxuXHRcdFx0aWYgKGZpbGVFeHBsb3Jlcj8ucmVxdWVzdFNvcnQpIHtcclxuXHRcdFx0XHRmaWxlRXhwbG9yZXIucmVxdWVzdFNvcnQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdC8vIEZvcmNlIHJlZnJlc2ggYnkgbWFudWFsbHkgdXBkYXRpbmcgdmlzaWJpbGl0eSAoZXNwZWNpYWxseSBpbXBvcnRhbnQgb24gbW9iaWxlKVxyXG5cdFx0Ly8gVXNlIHNldFRpbWVvdXQgdG8gZW5zdXJlIERPTSBpcyByZWFkeSBhZnRlciByZXF1ZXN0U29ydFxyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdGZpbGVFeHBsb3JlcnMuZm9yRWFjaChmaWxlRXhwbG9yZXIgPT4ge1xyXG5cdFx0XHRcdHRoaXMucmVmcmVzaEZpbGVFeHBsb3JlclZpc2liaWxpdHkoZmlsZUV4cGxvcmVyKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9LCAwKTtcclxuXHR9XHJcblxyXG5cdHBhdGNoQWxsRmlsZUV4cGxvcmVycygpOiB2b2lkIHtcclxuXHRcdC8vIFBhdGNoIHRoZSBwcm90b3R5cGUgKG9uY2UpIGFuZCBtYXJrIGFsbCBpbnN0YW5jZXNcclxuXHRcdHBhdGNoRmlsZUV4cGxvcmVyVXRpbCh0aGlzKTtcclxuXHRcdGNvbnN0IGZpbGVFeHBsb3JlcnMgPSBnZXRBbGxGaWxlRXhwbG9yZXJzKHRoaXMpO1xyXG5cdFx0ZmlsZUV4cGxvcmVycy5mb3JFYWNoKGZpbGVFeHBsb3JlciA9PiB7XHJcblx0XHRcdGZpbGVFeHBsb3Jlci5maWxlRXhwbG9yZXJQbHVzUGF0Y2hlZCA9IHRydWU7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGV4aXRGb2N1cygpIHtcclxuXHRcdHRoaXMuaXNGb2N1cyA9IGZhbHNlO1xyXG5cdFx0dGhpcy5mb2N1c2VkUGF0aCA9IG51bGw7XHJcblxyXG5cdFx0Ly8gVXBkYXRlIGljb24gaWYgaXQgZXhpc3RzXHJcblx0XHR0aGlzLnVwZGF0ZUZpbGVFeHBsb3Jlckljb24oKTtcclxuXHRcdFxyXG5cdFx0Ly8gVXBkYXRlIENTUyBjbGFzc2VzXHJcblx0XHR0aGlzLnVwZGF0ZUZvY3VzTW9kZUNsYXNzZXMoKTtcclxuXHRcdFxyXG5cdFx0Ly8gVHJpZ2dlciBmaWxlIGV4cGxvcmVyIHJlZnJlc2ggb24gYWxsIGZpbGUgZXhwbG9yZXIgaW5zdGFuY2VzXHJcblx0XHRjb25zdCBmaWxlRXhwbG9yZXJzID0gZ2V0QWxsRmlsZUV4cGxvcmVycyh0aGlzKTtcclxuXHRcdGZpbGVFeHBsb3JlcnMuZm9yRWFjaChmaWxlRXhwbG9yZXIgPT4ge1xyXG5cdFx0XHRpZiAoZmlsZUV4cGxvcmVyPy5yZXF1ZXN0U29ydCkge1xyXG5cdFx0XHRcdGZpbGVFeHBsb3Jlci5yZXF1ZXN0U29ydCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0Ly8gRm9yY2UgcmVmcmVzaCBieSBtYW51YWxseSB1cGRhdGluZyB2aXNpYmlsaXR5IChlc3BlY2lhbGx5IGltcG9ydGFudCBvbiBtb2JpbGUpXHJcblx0XHQvLyBVc2Ugc2V0VGltZW91dCB0byBlbnN1cmUgRE9NIGlzIHJlYWR5IGFmdGVyIHJlcXVlc3RTb3J0XHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0ZmlsZUV4cGxvcmVycy5mb3JFYWNoKGZpbGVFeHBsb3JlciA9PiB7XHJcblx0XHRcdFx0dGhpcy5yZWZyZXNoRmlsZUV4cGxvcmVyVmlzaWJpbGl0eShmaWxlRXhwbG9yZXIpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sIDApO1xyXG5cdH1cclxuXHJcblx0cmVmcmVzaEZpbGVFeHBsb3JlclZpc2liaWxpdHkoZmlsZUV4cGxvcmVyOiBGaWxlRXhwbG9yZXJWaWV3KTogdm9pZCB7XHJcblx0XHRpZiAoIWZpbGVFeHBsb3Jlcj8uZmlsZUl0ZW1zKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBNYW51YWxseSB1cGRhdGUgdmlzaWJpbGl0eSBvZiBhbGwgZmlsZSBpdGVtcyBpbiB0aGUgRE9NXHJcblx0XHRPYmplY3QudmFsdWVzKGZpbGVFeHBsb3Jlci5maWxlSXRlbXMpLmZvckVhY2goKHZFbCkgPT4ge1xyXG5cdFx0XHRpZiAoIXZFbCB8fCAhdkVsLmVsKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25zdCBmaWxlUGF0aCA9IHZFbC5maWxlLnBhdGg7XHJcblx0XHRcdGxldCBzaG91bGRTaG93ID0gdHJ1ZTtcclxuXHJcblx0XHRcdGlmICh0aGlzLmlzRm9jdXMgJiYgdGhpcy5mb2N1c2VkUGF0aCkge1xyXG5cdFx0XHRcdGNvbnN0IGZvY3VzZWRQYXRoID0gdGhpcy5mb2N1c2VkUGF0aDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBTaG93IGl0ZW1zIHRoYXQgbWF0Y2ggdGhlIGZvY3VzZWQgcGF0aCBleGFjdGx5XHJcblx0XHRcdFx0aWYgKGZpbGVQYXRoID09PSBmb2N1c2VkUGF0aCkge1xyXG5cdFx0XHRcdFx0c2hvdWxkU2hvdyA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFNob3cgaXRlbXMgdGhhdCBhcmUgY2hpbGRyZW4gb2YgdGhlIGZvY3VzZWQgcGF0aFxyXG5cdFx0XHRcdGVsc2UgaWYgKGZpbGVQYXRoLnN0YXJ0c1dpdGgoZm9jdXNlZFBhdGggKyBcIi9cIikpIHtcclxuXHRcdFx0XHRcdHNob3VsZFNob3cgPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBTaG93IGl0ZW1zIHRoYXQgYXJlIGFuY2VzdG9ycyBvZiB0aGUgZm9jdXNlZCBwYXRoIChwYXJlbnQgY2hhaW4pXHJcblx0XHRcdFx0ZWxzZSBpZiAoZm9jdXNlZFBhdGguc3RhcnRzV2l0aChmaWxlUGF0aCArIFwiL1wiKSkge1xyXG5cdFx0XHRcdFx0c2hvdWxkU2hvdyA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIEhpZGUgZXZlcnl0aGluZyBlbHNlXHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRzaG91bGRTaG93ID0gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBVcGRhdGUgdGhlIGhpZGRlbiBzdGF0ZSBpbiB0aGUgdmlydHVhbCBlbGVtZW50XHJcblx0XHRcdGlmICh2RWwuaW5mbykge1xyXG5cdFx0XHRcdHZFbC5pbmZvLmhpZGRlbiA9ICFzaG91bGRTaG93O1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBBbHNvIGRpcmVjdGx5IHVwZGF0ZSB0aGUgRE9NIGVsZW1lbnQgdmlzaWJpbGl0eVxyXG5cdFx0XHRpZiAoc2hvdWxkU2hvdykge1xyXG5cdFx0XHRcdHZFbC5lbC5zZXRDc3NQcm9wcyh7IGRpc3BsYXk6ICcnIH0pO1xyXG5cdFx0XHRcdHZFbC5lbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtZXhwbG9yZXItZm9jdXMtaGlkZGVuJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dkVsLmVsLnNldENzc1Byb3BzKHsgZGlzcGxheTogJ25vbmUnIH0pO1xyXG5cdFx0XHRcdHZFbC5lbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZXhwbG9yZXItZm9jdXMtaGlkZGVuJywgJ3RydWUnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGVGb2N1c01vZGVDbGFzc2VzKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgZmlsZUV4cGxvcmVycyA9IGdldEFsbEZpbGVFeHBsb3JlcnModGhpcyk7XHJcblx0XHRmaWxlRXhwbG9yZXJzLmZvckVhY2goZmlsZUV4cGxvcmVyID0+IHtcclxuXHRcdFx0Y29uc3QgY29udGFpbmVyRWwgPSBmaWxlRXhwbG9yZXIuY29udGFpbmVyRWw7XHJcblx0XHRcdGlmICh0aGlzLmlzRm9jdXMpIHtcclxuXHRcdFx0XHRjb250YWluZXJFbC5hZGRDbGFzcyhcImV4cGxvcmVyLWZvY3VzLW1vZGVcIik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y29udGFpbmVyRWwucmVtb3ZlQ2xhc3MoXCJleHBsb3Jlci1mb2N1cy1tb2RlXCIpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cclxuXHRhZGRGaWxlRXhwbG9yZXJJY29uKCkge1xyXG5cdFx0Y29uc3QgaGFuZGxlSWNvbkNsaWNrID0gKCkgPT4ge1xyXG5cdFx0XHRpZiAodGhpcy5pc0ZvY3VzKSB7XHJcblx0XHRcdFx0dGhpcy5leGl0Rm9jdXMoKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5mb2N1c0xldmVsID09PSAnY3VzdG9tJykge1xyXG5cdFx0XHRcdFx0Ly8gRm9yIGN1c3RvbSBmb2xkZXIsIHVzZSB0aGUgY3VzdG9tIHBhdGggZGlyZWN0bHlcclxuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmN1c3RvbUZvbGRlclBhdGgpIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5lbnRlckZvY3VzKHRoaXMuc2V0dGluZ3MuY3VzdG9tRm9sZGVyUGF0aCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIEZvciBvdGhlciBsZXZlbHMsIG5lZWQgdGhlIGN1cnJlbnQgZmlsZVxyXG5cdFx0XHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRcdFx0XHRpZiAoZmlsZT8ucGF0aCkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBmb2N1c1BhdGggPSBnZXRGb2N1c1BhdGgoZmlsZS5wYXRoLCB0aGlzLnNldHRpbmdzLmZvY3VzTGV2ZWwsIHRoaXMuc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLmVudGVyRm9jdXMoZm9jdXNQYXRoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0Y29uc3QgYWRkSWNvblRvRmlsZUV4cGxvcmVyID0gKCkgPT4ge1xyXG5cdFx0XHRjb25zdCBmaWxlRXhwbG9yZXJMZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdmaWxlLWV4cGxvcmVyJyk7XHJcblx0XHRcdGlmIChmaWxlRXhwbG9yZXJMZWF2ZXMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25zdCBmaWxlRXhwbG9yZXJWaWV3ID0gZmlsZUV4cGxvcmVyTGVhdmVzWzBdLnZpZXcuY29udGFpbmVyRWw7XHJcblx0XHRcdGNvbnN0IG5hdkJ1dHRvbnNDb250YWluZXIgPSBmaW5kTmF2QnV0dG9uc0NvbnRhaW5lcihmaWxlRXhwbG9yZXJWaWV3KTtcclxuXHRcdFx0XHJcblx0XHRcdGlmICghbmF2QnV0dG9uc0NvbnRhaW5lcikge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQ2hlY2sgaWYgaWNvbiBhbHJlYWR5IGV4aXN0cyBpbiB0aGlzIGNvbnRhaW5lclxyXG5cdFx0XHRpZiAodGhpcy5maWxlRXhwbG9yZXJJY29uICYmIG5hdkJ1dHRvbnNDb250YWluZXIuY29udGFpbnModGhpcy5maWxlRXhwbG9yZXJJY29uKSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUmVtb3ZlIG9sZCBpY29uIGlmIGl0IGV4aXN0cyBlbHNld2hlcmVcclxuXHRcdFx0aWYgKHRoaXMuZmlsZUV4cGxvcmVySWNvbiAmJiB0aGlzLmZpbGVFeHBsb3Jlckljb24ucGFyZW50RWxlbWVudCkge1xyXG5cdFx0XHRcdHRoaXMuZmlsZUV4cGxvcmVySWNvbi5yZW1vdmUoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQ3JlYXRlIHRoZSBpY29uIGJ1dHRvbiBpZiBpdCBkb2Vzbid0IGV4aXN0XHJcblx0XHRcdGlmICghdGhpcy5maWxlRXhwbG9yZXJJY29uKSB7XHJcblx0XHRcdFx0dGhpcy5maWxlRXhwbG9yZXJJY29uID0gY3JlYXRlRmlsZUV4cGxvcmVySWNvbih0aGlzKTtcclxuXHJcblx0XHRcdFx0Ly8gRG9uJ3Qgc2V0IGN1cnNvciAtIGxldCBpdCBpbmhlcml0IGZyb20gLmNsaWNrYWJsZS1pY29uIGNsYXNzIChjdXJzb3I6IHZhcigtLWN1cnNvcikpXHJcblx0XHRcdFx0Ly8gVGhpcyBtYXRjaGVzIG90aGVyIGZpbGUgZXhwbG9yZXIgaWNvbnMgd2hpY2ggdXNlIHRoZSBDU1MgdmFyaWFibGVcclxuXHRcdFx0XHR0aGlzLmZpbGVFeHBsb3Jlckljb24uc2V0Q3NzUHJvcHMoeyB0b3VjaEFjdGlvbjogJ21hbmlwdWxhdGlvbicgfSk7XHJcblxyXG5cdFx0XHRcdC8vIFVzZSBhIHVuaWZpZWQgaGFuZGxlciB0aGF0IHdvcmtzIGZvciBib3RoIGNsaWNrIGFuZCB0b3VjaFxyXG5cdFx0XHRcdC8vIE9uIG1vYmlsZSwgdG91Y2ggZXZlbnRzIHR5cGljYWxseSB0cmlnZ2VyIGNsaWNrLCBidXQgd2UgaGFuZGxlIGJvdGggdG8gYmUgc2FmZVxyXG5cdFx0XHRcdGxldCB0b3VjaEhhbmRsZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQodGhpcy5maWxlRXhwbG9yZXJJY29uLCAndG91Y2hzdGFydCcsIChldnQpID0+IHtcclxuXHRcdFx0XHRcdHRvdWNoSGFuZGxlZCA9IHRydWU7XHJcblx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdGhhbmRsZUljb25DbGljaygpO1xyXG5cdFx0XHRcdFx0Ly8gUmVzZXQgZmxhZyBhZnRlciBhIHNob3J0IGRlbGF5XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHsgdG91Y2hIYW5kbGVkID0gZmFsc2U7IH0sIDMwMCk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudCh0aGlzLmZpbGVFeHBsb3Jlckljb24sICdjbGljaycsIChldnQpID0+IHtcclxuXHRcdFx0XHRcdC8vIElmIHRvdWNoc3RhcnQgYWxyZWFkeSBoYW5kbGVkIGl0LCBza2lwIGNsaWNrIHRvIGF2b2lkIGRvdWJsZS1maXJpbmdcclxuXHRcdFx0XHRcdGlmICh0b3VjaEhhbmRsZWQpIHtcclxuXHRcdFx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRoYW5kbGVJY29uQ2xpY2soKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gU2V0L3VwZGF0ZSBpY29uXHJcblx0XHRcdHRoaXMudXBkYXRlRmlsZUV4cGxvcmVySWNvbigpO1xyXG5cclxuXHRcdFx0Ly8gSW5zZXJ0IGljb24gaW4gY29ycmVjdCBwb3NpdGlvblxyXG5cdFx0XHRpbnNlcnRGaWxlRXhwbG9yZXJJY29uKHRoaXMuZmlsZUV4cGxvcmVySWNvbiwgbmF2QnV0dG9uc0NvbnRhaW5lcik7XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIFRyeSB0byBhZGQgaW1tZWRpYXRlbHlcclxuXHRcdGFkZEljb25Ub0ZpbGVFeHBsb3JlcigpO1xyXG5cclxuXHRcdC8vIEFsc28gbGlzdGVuIGZvciB3b3Jrc3BhY2UgY2hhbmdlcyBpbiBjYXNlIGZpbGUgZXhwbG9yZXIgaXMgY3JlYXRlZCBsYXRlclxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2xheW91dC1jaGFuZ2UnLCAoKSA9PiB7XHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2hvd0ZpbGVFeHBsb3Jlckljb24pIHtcclxuXHRcdFx0XHRcdGFkZEljb25Ub0ZpbGVFeHBsb3JlcigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGVGaWxlRXhwbG9yZXJJY29uKCkge1xyXG5cdFx0aWYgKCF0aGlzLmZpbGVFeHBsb3Jlckljb24pIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5zaG93RmlsZUV4cGxvcmVySWNvbikge1xyXG5cdFx0XHRpZiAodGhpcy5maWxlRXhwbG9yZXJJY29uLnBhcmVudEVsZW1lbnQpIHtcclxuXHRcdFx0XHR0aGlzLmZpbGVFeHBsb3Jlckljb24ucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEVuc3VyZSBpY29uIGlzIGluIERPTSBpZiBzZXR0aW5nIGlzIGVuYWJsZWRcclxuXHRcdGlmICghdGhpcy5maWxlRXhwbG9yZXJJY29uLnBhcmVudEVsZW1lbnQpIHtcclxuXHRcdFx0Ly8gUmUtaW5zZXJ0IHRoZSBpY29uIGludG8gdGhlIGZpbGUgZXhwbG9yZXJcclxuXHRcdFx0Y29uc3QgZmlsZUV4cGxvcmVyTGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZmlsZS1leHBsb3JlcicpO1xyXG5cdFx0XHRpZiAoZmlsZUV4cGxvcmVyTGVhdmVzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRjb25zdCBmaWxlRXhwbG9yZXJWaWV3ID0gZmlsZUV4cGxvcmVyTGVhdmVzWzBdLnZpZXcuY29udGFpbmVyRWw7XHJcblx0XHRcdFx0Y29uc3QgbmF2QnV0dG9uc0NvbnRhaW5lciA9IGZpbmROYXZCdXR0b25zQ29udGFpbmVyKGZpbGVFeHBsb3JlclZpZXcpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChuYXZCdXR0b25zQ29udGFpbmVyKSB7XHJcblx0XHRcdFx0XHRpbnNlcnRGaWxlRXhwbG9yZXJJY29uKHRoaXMuZmlsZUV4cGxvcmVySWNvbiwgbmF2QnV0dG9uc0NvbnRhaW5lcik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRG9uJ3Qgc2V0IGN1cnNvciAtIGxldCBpdCBpbmhlcml0IGZyb20gLmNsaWNrYWJsZS1pY29uIGNsYXNzIChjdXJzb3I6IHZhcigtLWN1cnNvcikpXHJcblx0XHQvLyBUaGlzIG1hdGNoZXMgb3RoZXIgZmlsZSBleHBsb3JlciBpY29ucyB3aGljaCB1c2UgdGhlIENTUyB2YXJpYWJsZVxyXG5cdFx0aWYgKHRoaXMuZmlsZUV4cGxvcmVySWNvbi5zdHlsZS5jdXJzb3IpIHtcclxuXHRcdFx0dGhpcy5maWxlRXhwbG9yZXJJY29uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjdXJzb3InKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBUb2dnbGUgaXMtYWN0aXZlIGNsYXNzIGJhc2VkIG9uIGZvY3VzIHN0YXRlXHJcblx0XHRpZiAodGhpcy5pc0ZvY3VzKSB7XHJcblx0XHRcdHRoaXMuZmlsZUV4cGxvcmVySWNvbi5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmZpbGVFeHBsb3Jlckljb24ucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHRpZiAodGhpcy5maWxlRXhwbG9yZXJJY29uKSB7XHJcblx0XHRcdHRoaXMuZmlsZUV4cGxvcmVySWNvbi5yZW1vdmUoKTtcclxuXHRcdFx0dGhpcy5maWxlRXhwbG9yZXJJY29uID0gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEV4cGxvcmVyRm9jdXNQbHVnaW47XHJcblxyXG4iLCAiY29uc3QgbGFuZyA9IHtcclxuICBmb2N1czogXCJGb2N1c1wiLFxyXG4gIGVudGVyRm9jdXMgOiBcIkVudGVyIGZvY3VzXCIsXHJcbiAgZXhpdEZvY3VzOiBcIkV4aXQgZm9jdXNcIixcclxuICB0b2dnbGVGb2N1czogXCJUb2dnbGUgZm9jdXNcIixcclxuICBzZXR0aW5nczogXCJFeHBsb3JlciBmb2N1cyBzZXR0aW5nc1wiLFxyXG4gIHNob3dSaWdodENsaWNrTWVudTogXCJTaG93IHJpZ2h0LWNsaWNrIG1lbnUgb3B0aW9uXCIsXHJcbiAgc2hvd0ZpbGVFeHBsb3Jlckljb246IFwiU2hvdyBmaWxlIGV4cGxvcmVyIGljb25cIixcclxuICBmb2N1c0xldmVsOiBcIkNvbW1hbmQgZm9jdXMgbGV2ZWxcIixcclxuICBmb2N1c0xldmVsRmlsZTogXCJDdXJyZW50IGZpbGUgb25seVwiLFxyXG4gIGZvY3VzTGV2ZWxQYXJlbnQ6IFwiUGFyZW50IGZvbGRlclwiLFxyXG4gIGZvY3VzTGV2ZWxHcmFuZHBhcmVudDogXCJHcmFuZHBhcmVudCBmb2xkZXJcIixcclxuICBmb2N1c0xldmVsR3JlYXRHcmFuZHBhcmVudDogXCJHcmVhdCBncmFuZHBhcmVudCBmb2xkZXJcIixcclxuICBmb2N1c0xldmVsQ3VzdG9tOiBcIlNwZWNpZmljIGZvbGRlclwiLFxyXG4gIGZvY3VzTGV2ZWxEZXNjOiBcIkRldGVybWluZXMgd2hhdCB0byBmb2N1cyB3aGVuIHVzaW5nIHRoZSB0b2dnbGUgY29tbWFuZCBvciBmaWxlIGV4cGxvcmVyIGljb24uIFJpZ2h0LWNsaWNrIG1lbnUgYWx3YXlzIGZvY3VzZXMgdGhlIGNsaWNrZWQgZmlsZS9mb2xkZXIuXCIsXHJcbiAgY3VzdG9tRm9sZGVyUGF0aDogXCJDdXN0b20gZm9sZGVyIHBhdGhcIixcclxuICBjdXN0b21Gb2xkZXJQYXRoRGVzYzogXCJFbnRlciBhIGZvbGRlciBwYXRoIChmb2xkZXIvc3ViZm9sZGVyKS4gVGhpcyBmb2xkZXIgd2lsbCBiZSBmb2N1c2VkIHJlZ2FyZGxlc3Mgb2Ygd2hpY2ggZmlsZSBpcyBvcGVuLlwiLFxyXG4gIGhpZGVBbmNlc3RvckZvbGRlcnM6IFwiSGlkZSBhbmNlc3RyYWwgaW5kZW50c1wiLFxyXG4gIGhpZGVBbmNlc3RvckZvbGRlcnNEZXNjOiBcIldoZW4gZW5hYmxlZCwgaGlkZXMgcGFyZW50IGZvbGRlciBpbmRlbnRhdGlvbiB3aGVuIGZvY3VzaW5nLCBtYWtpbmcgdGhlIGZvY3VzZWQgZm9sZGVyIGFwcGVhciBhdCByb290IGxldmVsLlwiLFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBsYW5nXHJcbiIsICJjb25zdCBsYW5nID0ge1xyXG4gIGZvY3VzOiBcIlx1NEUxM1x1NkNFOFwiLFxyXG4gIGVudGVyRm9jdXMgOiBcIlx1NEUxM1x1NkNFOFwiLFxyXG4gIGV4aXRGb2N1czogXCJcdTkwMDBcdTUxRkFcdTRFMTNcdTZDRThcIixcclxuICB0b2dnbGVGb2N1czogXCJcdTUyMDdcdTYzNjJcdTRFMTNcdTZDRThcIixcclxuICBzZXR0aW5nczogXCJcdThENDRcdTZFOTBcdTdCQTFcdTc0MDZcdTU2NjhcdTRFMTNcdTZDRThcdThCQkVcdTdGNkVcIixcclxuICBzaG93UmlnaHRDbGlja01lbnU6IFwiXHU2NjNFXHU3OTNBXHU1M0YzXHU5NTJFXHU4M0RDXHU1MzU1XHU5MDA5XHU5ODc5XCIsXHJcbiAgc2hvd0ZpbGVFeHBsb3Jlckljb246IFwiXHU2NjNFXHU3OTNBXHU2NTg3XHU0RUY2XHU2RDRGXHU4OUM4XHU1NjY4XHU1NkZFXHU2ODA3XCIsXHJcbiAgZm9jdXNMZXZlbDogXCJcdTU0N0RcdTRFRTRcdTRFMTNcdTZDRThcdTdFQTdcdTUyMkJcIixcclxuICBmb2N1c0xldmVsRmlsZTogXCJcdTRFQzVcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjZcIixcclxuICBmb2N1c0xldmVsUGFyZW50OiBcIlx1NzIzNlx1NjU4N1x1NEVGNlx1NTkzOVwiLFxyXG4gIGZvY3VzTGV2ZWxHcmFuZHBhcmVudDogXCJcdTc5NTZcdTcyMzZcdTY1ODdcdTRFRjZcdTU5MzlcIixcclxuICBmb2N1c0xldmVsR3JlYXRHcmFuZHBhcmVudDogXCJcdTY2RkVcdTc5NTZcdTcyMzZcdTY1ODdcdTRFRjZcdTU5MzlcIixcclxuICBmb2N1c0xldmVsQ3VzdG9tOiBcIlx1NzI3OVx1NUI5QVx1NjU4N1x1NEVGNlx1NTkzOVwiLFxyXG4gIGZvY3VzTGV2ZWxEZXNjOiBcIlx1Nzg2RVx1NUI5QVx1NEY3Rlx1NzUyOFx1NTIwN1x1NjM2Mlx1NTQ3RFx1NEVFNFx1NjIxNlx1NjU4N1x1NEVGNlx1NkQ0Rlx1ODlDOFx1NTY2OFx1NTZGRVx1NjgwN1x1NjVGNlx1ODk4MVx1ODA1QVx1NzEyNlx1NzY4NFx1NTE4NVx1NUJCOVx1MzAwMlx1NTNGM1x1OTUyRVx1ODNEQ1x1NTM1NVx1NTlDQlx1N0VDOFx1ODA1QVx1NzEyNlx1NTM1NVx1NTFGQlx1NzY4NFx1NjU4N1x1NEVGNi9cdTY1ODdcdTRFRjZcdTU5MzlcdTMwMDJcIixcclxuICBjdXN0b21Gb2xkZXJQYXRoOiBcIlx1ODFFQVx1NUI5QVx1NEU0OVx1NjU4N1x1NEVGNlx1NTkzOVx1OERFRlx1NUY4NFwiLFxyXG4gIGN1c3RvbUZvbGRlclBhdGhEZXNjOiBcIlx1OEY5M1x1NTE2NVx1NjU4N1x1NEVGNlx1NTkzOVx1OERFRlx1NUY4NFx1RkYwOFx1NjU4N1x1NEVGNlx1NTkzOS9cdTVCNTBcdTY1ODdcdTRFRjZcdTU5MzlcdUZGMDlcdTMwMDJcdTY1RTBcdThCQkFcdTYyNTNcdTVGMDBcdTU0RUFcdTRFMkFcdTY1ODdcdTRFRjZcdUZGMENcdTkwRkRcdTRGMUFcdTgwNUFcdTcxMjZcdTZCNjRcdTY1ODdcdTRFRjZcdTU5MzlcdTMwMDJcIixcclxuICBoaWRlQW5jZXN0b3JGb2xkZXJzOiBcIlx1OTY5MFx1ODVDRlx1Nzk1Nlx1NTE0OFx1N0YyOVx1OEZEQlwiLFxyXG4gIGhpZGVBbmNlc3RvckZvbGRlcnNEZXNjOiBcIlx1NTQyRlx1NzUyOFx1NTQwRVx1RkYwQ1x1ODA1QVx1NzEyNlx1NjVGNlx1OTY5MFx1ODVDRlx1NzIzNlx1NjU4N1x1NEVGNlx1NTkzOVx1N0YyOVx1OEZEQlx1RkYwQ1x1NEY3Rlx1ODA1QVx1NzEyNlx1NzY4NFx1NjU4N1x1NEVGNlx1NTkzOVx1NjYzRVx1NzkzQVx1NTcyOFx1NjgzOVx1N0VBN1x1NTIyQlx1MzAwMlwiLFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBsYW5nIiwgImltcG9ydCBlbiBmcm9tICcuL2VuJztcclxuaW1wb3J0IHpoIGZyb20gJy4vemgnO1xyXG5cclxuY29uc3QgbGFuZ3MgPSB7XHJcbiAgZW4sXHJcbiAgemgsXHJcbn1cclxuZXhwb3J0IHR5cGUgTGFuZyA9IHR5cGVvZiBsYW5ncy5lbjtcclxuZXhwb3J0IGRlZmF1bHQgbGFuZ3MiLCAiZXhwb3J0IGludGVyZmFjZSBFeHBsb3JlckZvY3VzU2V0dGluZ3Mge1xuXHRzaG93UmlnaHRDbGlja01lbnU6IGJvb2xlYW47XG5cdHNob3dGaWxlRXhwbG9yZXJJY29uOiBib29sZWFuO1xuXHRmb2N1c0xldmVsOiAnZmlsZScgfCAncGFyZW50JyB8ICdncmFuZHBhcmVudCcgfCAnZ3JlYXRncmFuZHBhcmVudCcgfCAnY3VzdG9tJztcblx0Y3VzdG9tRm9sZGVyUGF0aDogc3RyaW5nO1xuXHRoaWRlQW5jZXN0b3JGb2xkZXJzOiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRXhwbG9yZXJGb2N1c1NldHRpbmdzID0ge1xuXHRzaG93UmlnaHRDbGlja01lbnU6IHRydWUsXG5cdHNob3dGaWxlRXhwbG9yZXJJY29uOiB0cnVlLFxuXHRmb2N1c0xldmVsOiAncGFyZW50Jyxcblx0Y3VzdG9tRm9sZGVyUGF0aDogJycsXG5cdGhpZGVBbmNlc3RvckZvbGRlcnM6IGZhbHNlXG59O1xuXG4iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IEV4cGxvcmVyRm9jdXNQbHVnaW4gfSBmcm9tIFwiLi4vbWFpblwiO1xyXG5pbXBvcnQgeyBnZXRBbGxGaWxlRXhwbG9yZXJzIH0gZnJvbSBcIi4uL3V0aWxzL2ZpbGUtZXhwbG9yZXItcGF0Y2hcIjtcclxuaW1wb3J0IHsgY3JlYXRlU2V0dGluZ3NHcm91cCB9IGZyb20gXCIuLi91dGlscy9zZXR0aW5ncy1jb21wYXRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBFeHBsb3JlckZvY3VzU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogRXhwbG9yZXJGb2N1c1BsdWdpbjtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRXhwbG9yZXJGb2N1c1BsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuXHRcdC8vIEZpcnN0IGdyb3VwIChubyBoZWFkaW5nKVxyXG5cdFx0Y29uc3QgZ2VuZXJhbEdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgdW5kZWZpbmVkLCAnZXhwbG9yZXItZm9jdXMnKTtcclxuXHJcblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUodGhpcy5wbHVnaW4ubGFuZy5zaG93UmlnaHRDbGlja01lbnUpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1JpZ2h0Q2xpY2tNZW51KVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93UmlnaHRDbGlja01lbnUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUodGhpcy5wbHVnaW4ubGFuZy5zaG93RmlsZUV4cGxvcmVySWNvbilcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RmlsZUV4cGxvcmVySWNvbilcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0ZpbGVFeHBsb3Jlckljb24gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnVwZGF0ZUZpbGVFeHBsb3Jlckljb24oKTtcclxuXHRcdFx0XHRcdH0pKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSh0aGlzLnBsdWdpbi5sYW5nLmZvY3VzTGV2ZWwpXHJcblx0XHRcdFx0LnNldERlc2ModGhpcy5wbHVnaW4ubGFuZy5mb2N1c0xldmVsRGVzYylcclxuXHRcdFx0XHQuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cclxuXHRcdFx0XHRcdC5hZGRPcHRpb24oJ2ZpbGUnLCB0aGlzLnBsdWdpbi5sYW5nLmZvY3VzTGV2ZWxGaWxlKVxyXG5cdFx0XHRcdFx0LmFkZE9wdGlvbigncGFyZW50JywgdGhpcy5wbHVnaW4ubGFuZy5mb2N1c0xldmVsUGFyZW50KVxyXG5cdFx0XHRcdFx0LmFkZE9wdGlvbignZ3JhbmRwYXJlbnQnLCB0aGlzLnBsdWdpbi5sYW5nLmZvY3VzTGV2ZWxHcmFuZHBhcmVudClcclxuXHRcdFx0XHRcdC5hZGRPcHRpb24oJ2dyZWF0Z3JhbmRwYXJlbnQnLCB0aGlzLnBsdWdpbi5sYW5nLmZvY3VzTGV2ZWxHcmVhdEdyYW5kcGFyZW50KVxyXG5cdFx0XHRcdFx0LmFkZE9wdGlvbignY3VzdG9tJywgdGhpcy5wbHVnaW4ubGFuZy5mb2N1c0xldmVsQ3VzdG9tKVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvY3VzTGV2ZWwpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9jdXNMZXZlbCA9IHZhbHVlIGFzICdmaWxlJyB8ICdwYXJlbnQnIHwgJ2dyYW5kcGFyZW50JyB8ICdncmVhdGdyYW5kcGFyZW50JyB8ICdjdXN0b20nO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0Ly8gUmVmcmVzaCBmaWxlIGV4cGxvcmVyIGlmIGluIGZvY3VzIG1vZGVcclxuXHRcdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLmlzRm9jdXMpIHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBmaWxlRXhwbG9yZXJzID0gZ2V0QWxsRmlsZUV4cGxvcmVycyh0aGlzLnBsdWdpbik7XHJcblx0XHRcdFx0XHRcdFx0ZmlsZUV4cGxvcmVycy5mb3JFYWNoKChmaWxlRXhwbG9yZXIpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChmaWxlRXhwbG9yZXI/LnJlcXVlc3RTb3J0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGZpbGVFeHBsb3Jlci5yZXF1ZXN0U29ydCgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpOyAvLyBSZWZyZXNoIHRvIHNob3cvaGlkZSBjdXN0b20gZm9sZGVyIGlucHV0XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBZGQgY3VzdG9tIGZvbGRlciBwYXRoIGlucHV0IHRoYXQgb25seSBzaG93cyB3aGVuIGN1c3RvbSBpcyBzZWxlY3RlZFxyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvY3VzTGV2ZWwgPT09ICdjdXN0b20nKSB7XHJcblx0XHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldE5hbWUodGhpcy5wbHVnaW4ubGFuZy5jdXN0b21Gb2xkZXJQYXRoKVxyXG5cdFx0XHRcdFx0LnNldERlc2ModGhpcy5wbHVnaW4ubGFuZy5jdXN0b21Gb2xkZXJQYXRoRGVzYylcclxuXHRcdFx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0ZvbGRlci9zdWJmb2xkZXInKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tRm9sZGVyUGF0aClcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUZvbGRlclBhdGggPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSkpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0fVxyXG59XHJcblxyXG4iLCAiZnVuY3Rpb24gYXJvdW5kKG9iaiwgZmFjdG9yaWVzKSB7XG4gIGNvbnN0IHJlbW92ZXJzID0gT2JqZWN0LmtleXMoZmFjdG9yaWVzKS5tYXAoKGtleSkgPT4gYXJvdW5kMShvYmosIGtleSwgZmFjdG9yaWVzW2tleV0pKTtcbiAgcmV0dXJuIHJlbW92ZXJzLmxlbmd0aCA9PT0gMSA/IHJlbW92ZXJzWzBdIDogZnVuY3Rpb24oKSB7XG4gICAgcmVtb3ZlcnMuZm9yRWFjaCgocikgPT4gcigpKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGFyb3VuZDEob2JqLCBtZXRob2QsIGNyZWF0ZVdyYXBwZXIpIHtcbiAgY29uc3QgaW5oZXJpdGVkID0gb2JqW21ldGhvZF0sIGhhZE93biA9IG9iai5oYXNPd25Qcm9wZXJ0eShtZXRob2QpLCBvcmlnaW5hbCA9IGhhZE93biA/IGluaGVyaXRlZCA6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKVttZXRob2RdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG4gIGxldCBjdXJyZW50ID0gY3JlYXRlV3JhcHBlcihvcmlnaW5hbCk7XG4gIGlmIChpbmhlcml0ZWQpXG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGN1cnJlbnQsIGluaGVyaXRlZCk7XG4gIE9iamVjdC5zZXRQcm90b3R5cGVPZih3cmFwcGVyLCBjdXJyZW50KTtcbiAgb2JqW21ldGhvZF0gPSB3cmFwcGVyO1xuICByZXR1cm4gcmVtb3ZlO1xuICBmdW5jdGlvbiB3cmFwcGVyKC4uLmFyZ3MpIHtcbiAgICBpZiAoY3VycmVudCA9PT0gb3JpZ2luYWwgJiYgb2JqW21ldGhvZF0gPT09IHdyYXBwZXIpXG4gICAgICByZW1vdmUoKTtcbiAgICByZXR1cm4gY3VycmVudC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfVxuICBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgaWYgKG9ialttZXRob2RdID09PSB3cmFwcGVyKSB7XG4gICAgICBpZiAoaGFkT3duKVxuICAgICAgICBvYmpbbWV0aG9kXSA9IG9yaWdpbmFsO1xuICAgICAgZWxzZVxuICAgICAgICBkZWxldGUgb2JqW21ldGhvZF07XG4gICAgfVxuICAgIGlmIChjdXJyZW50ID09PSBvcmlnaW5hbClcbiAgICAgIHJldHVybjtcbiAgICBjdXJyZW50ID0gb3JpZ2luYWw7XG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHdyYXBwZXIsIGluaGVyaXRlZCB8fCBGdW5jdGlvbik7XG4gIH1cbn1cbmZ1bmN0aW9uIGRlZHVwZShrZXksIG9sZEZuLCBuZXdGbikge1xuICBjaGVja1trZXldID0ga2V5O1xuICByZXR1cm4gY2hlY2s7XG4gIGZ1bmN0aW9uIGNoZWNrKC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gKG9sZEZuW2tleV0gPT09IGtleSA/IG9sZEZuIDogbmV3Rm4pLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG59XG5mdW5jdGlvbiBhZnRlcihwcm9taXNlLCBjYikge1xuICByZXR1cm4gcHJvbWlzZS50aGVuKGNiLCBjYik7XG59XG5mdW5jdGlvbiBzZXJpYWxpemUoYXN5bmNGdW5jdGlvbikge1xuICBsZXQgbGFzdFJ1biA9IFByb21pc2UucmVzb2x2ZSgpO1xuICBmdW5jdGlvbiB3cmFwcGVyKC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gbGFzdFJ1biA9IG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgICAgYWZ0ZXIobGFzdFJ1biwgKCkgPT4ge1xuICAgICAgICBhc3luY0Z1bmN0aW9uLmFwcGx5KHRoaXMsIGFyZ3MpLnRoZW4ocmVzLCByZWopO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgd3JhcHBlci5hZnRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBsYXN0UnVuID0gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XG4gICAgICBhZnRlcihsYXN0UnVuLCByZXMpO1xuICAgIH0pO1xuICB9O1xuICByZXR1cm4gd3JhcHBlcjtcbn1cblxuZXhwb3J0IHsgYWZ0ZXIsIGFyb3VuZCwgZGVkdXBlLCBzZXJpYWxpemUgfTtcbiIsICJpbXBvcnQgeyBWaWV3LCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IGFyb3VuZCB9IGZyb20gXCJtb25rZXktYXJvdW5kXCI7XHJcbmltcG9ydCB7IEV4cGxvcmVyRm9jdXNQbHVnaW4gfSBmcm9tIFwiLi4vbWFpblwiO1xyXG5pbXBvcnQgXCIuLi90eXBlcy5kXCI7XHJcblxyXG4vLyBUeXBlIGRlZmluaXRpb25zIGZyb20gbW9kdWxlIGF1Z21lbnRhdGlvblxyXG50eXBlIFBhdGhWaXJ0dWFsRWxlbWVudCA9IHtcclxuXHRjaGlsZHJlbkVsOiBIVE1MRWxlbWVudDtcclxuXHRjb2xsYXBzZUVsOiBIVE1MRWxlbWVudDtcclxuXHRjb2xsYXBzZWQ6IGJvb2xlYW47XHJcblx0Y29sbGFwc2libGU6IGJvb2xlYW47XHJcblx0Y292ZXJFbDogSFRNTEVsZW1lbnQ7XHJcblx0ZWw6IEhUTUxFbGVtZW50O1xyXG5cdGZpbGU6IFRBYnN0cmFjdEZpbGU7XHJcblx0aW5mbzoge1xyXG5cdFx0Y2hpbGRMZWZ0OiBudW1iZXI7XHJcblx0XHRjaGlsZExlZnRQYWRkaW5nOiBudW1iZXI7XHJcblx0XHRjaGlsZFRvcDogbnVtYmVyO1xyXG5cdFx0Y29tcHV0ZWQ6IGJvb2xlYW47XHJcblx0XHRoZWlnaHQ6IG51bWJlcjtcclxuXHRcdGhpZGRlbjogYm9vbGVhbjtcclxuXHRcdHBpbm5lZD86IGJvb2xlYW47XHJcblx0XHRuZXh0OiBib29sZWFuO1xyXG5cdFx0cXVldWVkOiBib29sZWFuO1xyXG5cdFx0d2lkdGg6IG51bWJlcjtcclxuXHR9O1xyXG5cdGlubmVyRWw6IEhUTUxFbGVtZW50O1xyXG5cdHBhcmVudD86IFBhdGhWaXJ0dWFsRWxlbWVudDtcclxuXHRwdXNoZXJFbDogSFRNTEVsZW1lbnQ7XHJcblx0c2VsZkVsOiBIVE1MRWxlbWVudDtcclxuXHR2Q2hpbGRyZW46IHtcclxuXHRcdGNoaWxkcmVuOiBQYXRoVmlydHVhbEVsZW1lbnQ7XHJcblx0fTtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIEZpbGVFeHBsb3JlclZpZXcgPSBWaWV3ICYge1xyXG5cdHJlcXVlc3RTb3J0KCk6IHZvaWQ7XHJcblx0ZmlsZUV4cGxvcmVyUGx1c1BhdGNoZWQ/OiBib29sZWFuO1xyXG5cdGZpbGVJdGVtczoge1xyXG5cdFx0W2tleTogc3RyaW5nXTogUGF0aFZpcnR1YWxFbGVtZW50O1xyXG5cdH07XHJcblx0Y29udGFpbmVyRWw6IEhUTUxFbGVtZW50O1xyXG59O1xyXG5cclxudHlwZSBHZXRTb3J0ZWRGb2xkZXJJdGVtc0Z1bmN0aW9uID0gKGZvbGRlcjogVEFic3RyYWN0RmlsZSkgPT4gUGF0aFZpcnR1YWxFbGVtZW50W107XHJcblxyXG4vLyBHbG9iYWwgZmxhZyB0byB0cmFjayBpZiBwcm90b3R5cGUgaGFzIGJlZW4gcGF0Y2hlZFxyXG5sZXQgcHJvdG90eXBlUGF0Y2hlZCA9IGZhbHNlO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhdGNoRmlsZUV4cGxvcmVyKHBsdWdpbjogRXhwbG9yZXJGb2N1c1BsdWdpbik6IHZvaWQge1xyXG5cdGNvbnN0IGZpbGVFeHBsb3JlciA9IGdldEZpbGVFeHBsb3JlcihwbHVnaW4pO1xyXG5cclxuXHRpZiAoIWZpbGVFeHBsb3Jlcikge1xyXG5cdFx0cmV0dXJuOyAvLyBGaWxlIGV4cGxvcmVyIG5vdCBhdmFpbGFibGUgeWV0LCB3aWxsIGJlIHBhdGNoZWQgb24gbGF5b3V0LWNoYW5nZVxyXG5cdH1cclxuXHJcblx0Ly8gUGF0Y2ggdGhlIHByb3RvdHlwZSBvbmx5IG9uY2UgKGFmZmVjdHMgYWxsIGluc3RhbmNlcylcclxuXHRpZiAoIXByb3RvdHlwZVBhdGNoZWQpIHtcclxuXHRcdHBsdWdpbi5yZWdpc3RlcihcclxuXHRcdFx0YXJvdW5kKE9iamVjdC5nZXRQcm90b3R5cGVPZihmaWxlRXhwbG9yZXIpLCB7XHJcblx0XHRcdFx0Z2V0U29ydGVkRm9sZGVySXRlbXMob2xkOiBHZXRTb3J0ZWRGb2xkZXJJdGVtc0Z1bmN0aW9uKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24gKHRoaXM6IEZpbGVFeHBsb3JlclZpZXcsIGZvbGRlcjogVEFic3RyYWN0RmlsZSk6IFBhdGhWaXJ0dWFsRWxlbWVudFtdIHtcclxuXHRcdFx0XHRcdFx0bGV0IHNvcnRlZENoaWxkcmVuOiBQYXRoVmlydHVhbEVsZW1lbnRbXSA9IG9sZC5jYWxsKHRoaXMsIGZvbGRlcik7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBBcHBseSBmb2N1cyBoaWRpbmcgaWYgZm9jdXMgbW9kZSBpcyBhY3RpdmVcclxuXHRcdFx0XHRcdFx0aWYgKHBsdWdpbi5pc0ZvY3VzICYmIHBsdWdpbi5mb2N1c2VkUGF0aCkge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGZvY3VzZWRQYXRoID0gcGx1Z2luLmZvY3VzZWRQYXRoO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdHNvcnRlZENoaWxkcmVuID0gc29ydGVkQ2hpbGRyZW4uZmlsdGVyKCh2RWwpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gdkVsLmZpbGUucGF0aDtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gU2hvdyBpdGVtcyB0aGF0IG1hdGNoIHRoZSBmb2N1c2VkIHBhdGggZXhhY3RseVxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGZpbGVQYXRoID09PSBmb2N1c2VkUGF0aCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2RWwuaW5mby5oaWRkZW4gPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFNob3cgaXRlbXMgdGhhdCBhcmUgY2hpbGRyZW4gb2YgdGhlIGZvY3VzZWQgcGF0aFxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGZpbGVQYXRoLnN0YXJ0c1dpdGgoZm9jdXNlZFBhdGggKyBcIi9cIikpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dkVsLmluZm8uaGlkZGVuID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBTaG93IGl0ZW1zIHRoYXQgYXJlIGFuY2VzdG9ycyBvZiB0aGUgZm9jdXNlZCBwYXRoIChwYXJlbnQgY2hhaW4pXHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoZm9jdXNlZFBhdGguc3RhcnRzV2l0aChmaWxlUGF0aCArIFwiL1wiKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2RWwuaW5mby5oaWRkZW4gPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIEhpZGUgZXZlcnl0aGluZyBlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHR2RWwuaW5mby5oaWRkZW4gPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdC8vIEVuc3VyZSBhbGwgaXRlbXMgYXJlIHZpc2libGUgd2hlbiBub3QgaW4gZm9jdXMgbW9kZVxyXG5cdFx0XHRcdFx0XHRcdHNvcnRlZENoaWxkcmVuLmZvckVhY2goKHZFbCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dkVsLmluZm8uaGlkZGVuID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdHJldHVybiBzb3J0ZWRDaGlsZHJlbjtcclxuXHRcdFx0XHRcdH07XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0fSksXHJcblx0XHQpO1xyXG5cclxuXHRcdHByb3RvdHlwZVBhdGNoZWQgPSB0cnVlO1xyXG5cdH1cclxuXHJcblx0Ly8gTWFyayB0aGlzIGluc3RhbmNlIGFzIHBhdGNoZWRcclxuXHRmaWxlRXhwbG9yZXIuZmlsZUV4cGxvcmVyUGx1c1BhdGNoZWQgPSB0cnVlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZUV4cGxvcmVyKHBsdWdpbjogRXhwbG9yZXJGb2N1c1BsdWdpbik6IEZpbGVFeHBsb3JlclZpZXcgfCB1bmRlZmluZWQge1xyXG5cdGNvbnN0IGZpbGVFeHBsb3JlckNvbnRhaW5lciA9IHBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShcImZpbGUtZXhwbG9yZXJcIik/LmZpcnN0KCk7XHJcblx0cmV0dXJuIGZpbGVFeHBsb3JlckNvbnRhaW5lcj8udmlldyBhcyBGaWxlRXhwbG9yZXJWaWV3O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWxsRmlsZUV4cGxvcmVycyhwbHVnaW46IEV4cGxvcmVyRm9jdXNQbHVnaW4pOiBGaWxlRXhwbG9yZXJWaWV3W10ge1xyXG5cdGNvbnN0IGZpbGVFeHBsb3JlckxlYXZlcyA9IHBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShcImZpbGUtZXhwbG9yZXJcIik7XHJcblx0cmV0dXJuIGZpbGVFeHBsb3JlckxlYXZlcy5tYXAobGVhZiA9PiBsZWFmLnZpZXcgYXMgRmlsZUV4cGxvcmVyVmlldyk7XHJcbn1cclxuXHJcbiIsICIvKipcclxuICogQ29tcGF0aWJpbGl0eSB1dGlsaXRpZXMgZm9yIHNldHRpbmdzXHJcbiAqIFByb3ZpZGVzIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgZm9yIFNldHRpbmdHcm91cCAocmVxdWlyZXMgQVBJIDEuMTEuMCspXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgU2V0dGluZywgcmVxdWlyZUFwaVZlcnNpb24gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCAqIGFzIE9ic2lkaWFuTW9kdWxlIGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgdGhhdCB3b3JrcyB3aXRoIGJvdGggU2V0dGluZ0dyb3VwIGFuZCBmYWxsYmFjayBjb250YWluZXJcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2V0dGluZ3NDb250YWluZXIge1xyXG5cdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKTogdm9pZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBzZXR0aW5ncyBjb250YWluZXIgdGhhdCB1c2VzIFNldHRpbmdHcm91cCBpZiBhdmFpbGFibGUgKEFQSSAxLjExLjArKSxcclxuICogb3RoZXJ3aXNlIGZhbGxzIGJhY2sgdG8gY3JlYXRpbmcgYSBoZWFkaW5nIGFuZCB1c2luZyB0aGUgY29udGFpbmVyIGRpcmVjdGx5LlxyXG4gKiBcclxuICogVXNlcyByZXF1aXJlQXBpVmVyc2lvbignMS4xMS4wJykgdG8gY2hlY2sgaWYgU2V0dGluZ0dyb3VwIGlzIGF2YWlsYWJsZS5cclxuICogVGhpcyBpcyB0aGUgb2ZmaWNpYWwgT2JzaWRpYW4gQVBJIG1ldGhvZCBmb3IgdmVyc2lvbiBjaGVja2luZy5cclxuICogXHJcbiAqIEBwYXJhbSBjb250YWluZXJFbCAtIFRoZSBjb250YWluZXIgZWxlbWVudCBmb3Igc2V0dGluZ3NcclxuICogQHBhcmFtIGhlYWRpbmcgLSBUaGUgaGVhZGluZyB0ZXh0IGZvciB0aGUgc2V0dGluZ3MgZ3JvdXAgKG9wdGlvbmFsKVxyXG4gKiBAcGFyYW0gbWFuaWZlc3RJZCAtIFRoZSBwbHVnaW4ncyBtYW5pZmVzdCBJRCBmb3IgQ1NTIHNjb3BpbmcgKHJlcXVpcmVkIGZvciBmYWxsYmFjayBtb2RlKVxyXG4gKiBAcmV0dXJucyBBIGNvbnRhaW5lciB0aGF0IGNhbiBiZSB1c2VkIHRvIGFkZCBzZXR0aW5nc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNldHRpbmdzR3JvdXAoXHJcblx0Y29udGFpbmVyRWw6IEhUTUxFbGVtZW50LFxyXG5cdGhlYWRpbmc/OiBzdHJpbmcsXHJcblx0bWFuaWZlc3RJZD86IHN0cmluZ1xyXG4pOiBTZXR0aW5nc0NvbnRhaW5lciB7XHJcblx0Ly8gQ2hlY2sgaWYgU2V0dGluZ0dyb3VwIGlzIGF2YWlsYWJsZSAoQVBJIDEuMTEuMCspXHJcblx0Ly8gcmVxdWlyZUFwaVZlcnNpb24gaXMgdGhlIG9mZmljaWFsIE9ic2lkaWFuIEFQSSBtZXRob2QgZm9yIHZlcnNpb24gY2hlY2tpbmdcclxuXHRpZiAocmVxdWlyZUFwaVZlcnNpb24oJzEuMTEuMCcpKSB7XHJcblx0XHQvLyBVc2UgU2V0dGluZ0dyb3VwIC0gaXQncyBndWFyYW50ZWVkIHRvIGV4aXN0IGlmIHJlcXVpcmVBcGlWZXJzaW9uIHJldHVybnMgdHJ1ZVxyXG5cdFx0Ly8gQWNjZXNzIFNldHRpbmdHcm91cCB2aWEgdHlwZSBhc3NlcnRpb24gc2luY2UgaXQgbWF5IG5vdCBiZSBpbiB0eXBlIGRlZmluaXRpb25zXHJcblx0XHQvLyBmb3Igb2xkZXIgVHlwZVNjcmlwdCB2ZXJzaW9ucywgYnV0IGV4aXN0cyBhdCBydW50aW1lIGluIE9ic2lkaWFuIDEuMTEuMCtcclxuXHRcdC8vIFVzaW5nIHVua25vd24gaW5zdGVhZCBvZiBhbnkgdG8gc2F0aXNmeSBlc2xpbnQgd2hpbGUgbWFpbnRhaW5pbmcgdHlwZSBzYWZldHlcclxuXHRcdGNvbnN0IFNldHRpbmdHcm91cENsYXNzID0gKE9ic2lkaWFuTW9kdWxlIGFzIHVua25vd24gYXMgeyBTZXR0aW5nR3JvdXA/OiBuZXcgKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkgPT4ge1xyXG5cdFx0XHRzZXRIZWFkaW5nKGhlYWRpbmc6IHN0cmluZyk6IHtcclxuXHRcdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcblx0XHRcdH07XHJcblx0XHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKTogdm9pZDtcclxuXHRcdH0gfSkuU2V0dGluZ0dyb3VwO1xyXG5cdFx0XHJcblx0XHRpZiAoU2V0dGluZ0dyb3VwQ2xhc3MpIHtcclxuXHRcdFx0Y29uc3QgZ3JvdXAgPSBoZWFkaW5nIFxyXG5cdFx0XHRcdD8gbmV3IFNldHRpbmdHcm91cENsYXNzKGNvbnRhaW5lckVsKS5zZXRIZWFkaW5nKGhlYWRpbmcpXHJcblx0XHRcdFx0OiBuZXcgU2V0dGluZ0dyb3VwQ2xhc3MoY29udGFpbmVyRWwpO1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKSB7XHJcblx0XHRcdFx0XHRncm91cC5hZGRTZXR0aW5nKGNiKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdC8vIEZhbGxiYWNrIHBhdGggKGVpdGhlciBBUEkgPCAxLjExLjAgb3IgU2V0dGluZ0dyb3VwIG5vdCBmb3VuZClcclxuXHQvLyBBZGQgc2NvcGluZyBjbGFzcyB0byBjb250YWluZXJFbCB0byBzY29wZSBDU1MgdG8gb25seSB0aGlzIHBsdWdpbidzIHNldHRpbmdzXHJcblx0aWYgKG1hbmlmZXN0SWQpIHtcclxuXHRcdGNvbnRhaW5lckVsLmFkZENsYXNzKGAke21hbmlmZXN0SWR9LXNldHRpbmdzLWNvbXBhdGApO1xyXG5cdH1cclxuXHRcclxuXHR7XHJcblx0XHQvLyBGYWxsYmFjazogQ3JlYXRlIGEgaGVhZGluZyBtYW51YWxseSBmb3Igb2xkZXIgQVBJIHZlcnNpb25zXHJcblx0XHQvLyBOb3RlOiBXaGlsZSBiZXN0IHByYWN0aWNlIHByZWZlcnMgU2V0dGluZy5zZXRIZWFkaW5nKCksIHRoZSBmYWxsYmFjayBwYXRoXHJcblx0XHQvLyBpcyBmb3IgdmVyc2lvbnMgdGhhdCBtYXkgbm90IHN1cHBvcnQgaXQsIHNvIG1hbnVhbCBoZWFkaW5nIGlzIGFwcHJvcHJpYXRlIGhlcmVcclxuXHRcdGlmIChoZWFkaW5nKSB7XHJcblx0XHRcdGNvbnN0IGhlYWRpbmdFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdignc2V0dGluZy1ncm91cC1oZWFkaW5nJyk7XHJcblx0XHRcdGhlYWRpbmdFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6IGhlYWRpbmcgfSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKSB7XHJcblx0XHRcdFx0Y29uc3Qgc2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKTtcclxuXHRcdFx0XHRjYihzZXR0aW5nKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9XHJcbn1cclxuXHJcbiIsICJpbXBvcnQgeyBFeHBsb3JlckZvY3VzU2V0dGluZ3MgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb2N1c1BhdGgoXG5cdHBhdGg6IHN0cmluZyxcblx0bGV2ZWw6ICdmaWxlJyB8ICdwYXJlbnQnIHwgJ2dyYW5kcGFyZW50JyB8ICdncmVhdGdyYW5kcGFyZW50JyB8ICdjdXN0b20nLFxuXHRzZXR0aW5nczogRXhwbG9yZXJGb2N1c1NldHRpbmdzXG4pOiBzdHJpbmcge1xuXHRpZiAobGV2ZWwgPT09ICdjdXN0b20nKSB7XG5cdFx0Ly8gVXNlIHRoZSBjdXN0b20gZm9sZGVyIHBhdGggZnJvbSBzZXR0aW5ncywgcmVnYXJkbGVzcyBvZiBjdXJyZW50IGZpbGVcblx0XHRyZXR1cm4gc2V0dGluZ3MuY3VzdG9tRm9sZGVyUGF0aCB8fCBwYXRoO1xuXHR9XG5cblx0aWYgKGxldmVsID09PSAnZmlsZScpIHtcblx0XHRyZXR1cm4gcGF0aDtcblx0fVxuXG5cdGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLycpO1xuXHRcblx0aWYgKGxldmVsID09PSAncGFyZW50Jykge1xuXHRcdGlmIChwYXJ0cy5sZW5ndGggPT09IDEpIHtcblx0XHRcdHJldHVybiBwYXRoOyAvLyBBbHJlYWR5IGF0IHJvb3Rcblx0XHR9XG5cdFx0cmV0dXJuIHBhcnRzLnNsaWNlKDAsIC0xKS5qb2luKCcvJyk7XG5cdH1cblxuXHRpZiAobGV2ZWwgPT09ICdncmFuZHBhcmVudCcpIHtcblx0XHRpZiAocGFydHMubGVuZ3RoIDw9IDIpIHtcblx0XHRcdHJldHVybiBwYXJ0c1swXSB8fCBwYXRoOyAvLyBSZXR1cm4gcm9vdCBvciBmaXJzdCBwYXJ0XG5cdFx0fVxuXHRcdHJldHVybiBwYXJ0cy5zbGljZSgwLCAtMikuam9pbignLycpO1xuXHR9XG5cblx0Ly8gZ3JlYXRncmFuZHBhcmVudFxuXHRpZiAocGFydHMubGVuZ3RoIDw9IDMpIHtcblx0XHRyZXR1cm4gcGFydHNbMF0gfHwgcGF0aDsgLy8gUmV0dXJuIHJvb3Qgb3IgZmlyc3QgcGFydFxuXHR9XG5cdHJldHVybiBwYXJ0cy5zbGljZSgwLCAtMykuam9pbignLycpO1xufVxuXG4iLCAiaW1wb3J0IHsgRXhwbG9yZXJGb2N1c1BsdWdpbiB9IGZyb20gXCIuLi9tYWluXCI7XG5pbXBvcnQgeyBnZXRGb2N1c1BhdGggfSBmcm9tIFwiLi4vdXRpbHMvZm9jdXNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyQ29tbWFuZHMocGx1Z2luOiBFeHBsb3JlckZvY3VzUGx1Z2luKTogdm9pZCB7XG5cdC8vIFRvZ2dsZSBmb2N1cyBjb21tYW5kXG5cdHBsdWdpbi5hZGRDb21tYW5kKHtcblx0XHRpZDogXCJ0b2dnbGVcIixcblx0XHRuYW1lOiBwbHVnaW4ubGFuZy50b2dnbGVGb2N1cyxcblx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0aWYgKHBsdWdpbi5pc0ZvY3VzKSB7XG5cdFx0XHRcdHBsdWdpbi5leGl0Rm9jdXMoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmIChwbHVnaW4uc2V0dGluZ3MuZm9jdXNMZXZlbCA9PT0gJ2N1c3RvbScpIHtcblx0XHRcdFx0XHQvLyBGb3IgY3VzdG9tIGZvbGRlciwgdXNlIHRoZSBjdXN0b20gcGF0aCBkaXJlY3RseVxuXHRcdFx0XHRcdGlmIChwbHVnaW4uc2V0dGluZ3MuY3VzdG9tRm9sZGVyUGF0aCkge1xuXHRcdFx0XHRcdFx0cGx1Z2luLmVudGVyRm9jdXMocGx1Z2luLnNldHRpbmdzLmN1c3RvbUZvbGRlclBhdGgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBGb3Igb3RoZXIgbGV2ZWxzLCBuZWVkIHRoZSBjdXJyZW50IGZpbGVcblx0XHRcdFx0XHRjb25zdCBmaWxlID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdFx0XHRcdGlmIChmaWxlPy5wYXRoKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBmb2N1c1BhdGggPSBnZXRGb2N1c1BhdGgoZmlsZS5wYXRoLCBwbHVnaW4uc2V0dGluZ3MuZm9jdXNMZXZlbCwgcGx1Z2luLnNldHRpbmdzKTtcblx0XHRcdFx0XHRcdHBsdWdpbi5lbnRlckZvY3VzKGZvY3VzUGF0aCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblx0fSk7XG5cblx0Ly8gRmlsZSBtZW51IGl0ZW1cblx0aWYgKHBsdWdpbi5zZXR0aW5ncy5zaG93UmlnaHRDbGlja01lbnUpIHtcblx0XHRwbHVnaW4ucmVnaXN0ZXJFdmVudChcblx0XHRcdHBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFwiZmlsZS1tZW51XCIsIChtZW51LCBmaWxlKSA9PiB7XG5cdFx0XHRcdGlmICghcGx1Z2luLnNldHRpbmdzLnNob3dSaWdodENsaWNrTWVudSkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuXHRcdFx0XHRcdGl0ZW1cblx0XHRcdFx0XHRcdC5zZXRUaXRsZShwbHVnaW4uaXNGb2N1cyA/IHBsdWdpbi5sYW5nLmV4aXRGb2N1cyA6IHBsdWdpbi5sYW5nLmZvY3VzKVxuXHRcdFx0XHRcdFx0LnNldEljb24ocGx1Z2luLmlzRm9jdXMgPyBcImxvZy1vdXRcIiA6IFwiZm9jdXNcIilcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRwbHVnaW4udG9nZ2xlRm9jdXMoZmlsZT8ucGF0aCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSlcblx0XHQpO1xuXHR9XG59XG5cbiIsICJpbXBvcnQgeyBFeHBsb3JlckZvY3VzUGx1Z2luIH0gZnJvbSBcIi4uL21haW5cIjtcblxuLyoqXG4gKiBGaW5kIG9yIGNyZWF0ZSB0aGUgbmF2aWdhdGlvbiBidXR0b25zIGNvbnRhaW5lciBpbiB0aGUgZmlsZSBleHBsb3JlciB2aWV3LlxuICogVHJpZXMgbXVsdGlwbGUgc2VsZWN0b3JzIHRvIHN1cHBvcnQgYm90aCBkZXNrdG9wIGFuZCBtb2JpbGUuXG4gKiBPbiBtb2JpbGUsIGNyZWF0ZXMgYSBjb250YWluZXIgaWYgbm9uZSBleGlzdHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kTmF2QnV0dG9uc0NvbnRhaW5lcihmaWxlRXhwbG9yZXJWaWV3OiBIVE1MRWxlbWVudCk6IEhUTUxFbGVtZW50IHwgbnVsbCB7XG5cdC8vIFRyeSBkZXNrdG9wIHNlbGVjdG9yIGZpcnN0XG5cdGxldCBjb250YWluZXIgPSBmaWxlRXhwbG9yZXJWaWV3LnF1ZXJ5U2VsZWN0b3IoJy5uYXYtYnV0dG9ucy1jb250YWluZXInKTtcblx0aWYgKGNvbnRhaW5lcikge1xuXHRcdHJldHVybiBjb250YWluZXIgYXMgSFRNTEVsZW1lbnQ7XG5cdH1cblxuXHQvLyBUcnkgYWx0ZXJuYXRpdmUgc2VsZWN0b3JzIGZvciBtb2JpbGVcblx0Ly8gTW9iaWxlIG1pZ2h0IGhhdmUgdGhlIGJ1dHRvbnMgaW4gYSBkaWZmZXJlbnQgc3RydWN0dXJlXG5cdGNvbnRhaW5lciA9IGZpbGVFeHBsb3JlclZpZXcucXVlcnlTZWxlY3RvcignLm5hdi1oZWFkZXItYnV0dG9uLWNvbnRhaW5lcicpO1xuXHRpZiAoY29udGFpbmVyKSB7XG5cdFx0cmV0dXJuIGNvbnRhaW5lciBhcyBIVE1MRWxlbWVudDtcblx0fVxuXG5cdC8vIFRyeSBmaW5kaW5nIGJ5IGxvb2tpbmcgZm9yIGV4aXN0aW5nIG5hdi1hY3Rpb24tYnV0dG9uIGVsZW1lbnRzXG5cdGNvbnN0IGV4aXN0aW5nQnV0dG9ucyA9IGZpbGVFeHBsb3JlclZpZXcucXVlcnlTZWxlY3RvckFsbCgnLm5hdi1hY3Rpb24tYnV0dG9uJyk7XG5cdGlmIChleGlzdGluZ0J1dHRvbnMubGVuZ3RoID4gMCkge1xuXHRcdGNvbnN0IGZpcnN0QnV0dG9uID0gZXhpc3RpbmdCdXR0b25zWzBdO1xuXHRcdGNvbnN0IHBhcmVudCA9IGZpcnN0QnV0dG9uLnBhcmVudEVsZW1lbnQ7XG5cdFx0aWYgKHBhcmVudCAmJiAocGFyZW50LmNsYXNzTGlzdC5jb250YWlucygnbmF2LWJ1dHRvbnMtY29udGFpbmVyJykgfHwgXG5cdFx0ICAgICAgICAgICAgICAgcGFyZW50LmNsYXNzTGlzdC5jb250YWlucygnbmF2LWhlYWRlci1idXR0b24tY29udGFpbmVyJykgfHxcblx0XHQgICAgICAgICAgICAgICBBcnJheS5mcm9tKHBhcmVudC5jaGlsZHJlbikuc29tZShlbCA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25hdi1hY3Rpb24tYnV0dG9uJykpKSkge1xuXHRcdFx0cmV0dXJuIHBhcmVudDtcblx0XHR9XG5cdH1cblxuXHQvLyBUcnkgZmluZGluZyB0aGUgdmlldyBoZWFkZXIgYW5kIGFwcGVuZGluZyB0byBpdFxuXHRjb25zdCB2aWV3SGVhZGVyID0gZmlsZUV4cGxvcmVyVmlldy5xdWVyeVNlbGVjdG9yKCcudmlldy1oZWFkZXInKSBhcyBIVE1MRWxlbWVudDtcblx0aWYgKHZpZXdIZWFkZXIpIHtcblx0XHQvLyBMb29rIGZvciBhbnkgY29udGFpbmVyIHdpdGggbmF2IGJ1dHRvbnMgaW5zaWRlIHRoZSBoZWFkZXJcblx0XHRjb25zdCBoZWFkZXJDb250YWluZXIgPSB2aWV3SGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5uYXYtYnV0dG9ucy1jb250YWluZXInKSBhcyBIVE1MRWxlbWVudCB8fFxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgdmlld0hlYWRlci5xdWVyeVNlbGVjdG9yKCcubmF2LWhlYWRlci1idXR0b24tY29udGFpbmVyJykgYXMgSFRNTEVsZW1lbnQgfHxcblx0XHQgICAgICAgICAgICAgICAgICAgICAgIHZpZXdIZWFkZXIucXVlcnlTZWxlY3RvcignLnZpZXctaGVhZGVyLXRpdGxlLWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xuXHRcdGlmIChoZWFkZXJDb250YWluZXIpIHtcblx0XHRcdHJldHVybiBoZWFkZXJDb250YWluZXI7XG5cdFx0fVxuXHRcdC8vIElmIG5vIGNvbnRhaW5lciBmb3VuZCwgcmV0dXJuIHRoZSBoZWFkZXIgaXRzZWxmIGFzIGZhbGxiYWNrXG5cdFx0cmV0dXJuIHZpZXdIZWFkZXI7XG5cdH1cblxuXHQvLyBNb2JpbGUgZmFsbGJhY2s6IExvb2sgZm9yIG5hdi1maWxlcy1jb250YWluZXIgYW5kIGNyZWF0ZSBhIGJ1dHRvbiBiYXIgYWJvdmUgaXRcblx0Y29uc3QgbmF2RmlsZXNDb250YWluZXIgPSBmaWxlRXhwbG9yZXJWaWV3LnF1ZXJ5U2VsZWN0b3IoJy5uYXYtZmlsZXMtY29udGFpbmVyJykgYXMgSFRNTEVsZW1lbnQ7XG5cdGlmIChuYXZGaWxlc0NvbnRhaW5lcikge1xuXHRcdC8vIENoZWNrIGlmIHdlIGFscmVhZHkgY3JlYXRlZCBhIG1vYmlsZSBidXR0b24gY29udGFpbmVyXG5cdFx0bGV0IG1vYmlsZUJ1dHRvbkNvbnRhaW5lciA9IGZpbGVFeHBsb3JlclZpZXcucXVlcnlTZWxlY3RvcignLmV4cGxvcmVyLWZvY3VzLW1vYmlsZS1idXR0b25zJykgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0aWYgKCFtb2JpbGVCdXR0b25Db250YWluZXIpIHtcblx0XHRcdC8vIENyZWF0ZSBhIG1vYmlsZSBidXR0b24gY29udGFpbmVyXG5cdFx0XHRtb2JpbGVCdXR0b25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdG1vYmlsZUJ1dHRvbkNvbnRhaW5lci5jbGFzc05hbWUgPSAnbmF2LWJ1dHRvbnMtY29udGFpbmVyIGV4cGxvcmVyLWZvY3VzLW1vYmlsZS1idXR0b25zJztcblx0XHRcdG1vYmlsZUJ1dHRvbkNvbnRhaW5lci5zZXRDc3NQcm9wcyh7XG5cdFx0XHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdFx0YWxpZ25JdGVtczogJ2NlbnRlcicsXG5cdFx0XHRcdGdhcDogJzRweCcsXG5cdFx0XHRcdHBhZGRpbmc6ICc4cHgnLFxuXHRcdFx0XHRib3JkZXJCb3R0b206ICcxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpJ1xuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdC8vIEluc2VydCBpdCBiZWZvcmUgdGhlIG5hdi1maWxlcy1jb250YWluZXJcblx0XHRcdG5hdkZpbGVzQ29udGFpbmVyLnBhcmVudEVsZW1lbnQ/Lmluc2VydEJlZm9yZShtb2JpbGVCdXR0b25Db250YWluZXIsIG5hdkZpbGVzQ29udGFpbmVyKTtcblx0XHR9XG5cdFx0cmV0dXJuIG1vYmlsZUJ1dHRvbkNvbnRhaW5lcjtcblx0fVxuXG5cdC8vIExhc3QgcmVzb3J0OiBjcmVhdGUgYSBjb250YWluZXIgYXQgdGhlIHRvcCBvZiB0aGUgdmlld1xuXHRsZXQgdG9wQ29udGFpbmVyID0gZmlsZUV4cGxvcmVyVmlldy5xdWVyeVNlbGVjdG9yKCcuZXhwbG9yZXItZm9jdXMtbW9iaWxlLWJ1dHRvbnMnKSBhcyBIVE1MRWxlbWVudDtcblx0aWYgKCF0b3BDb250YWluZXIpIHtcblx0XHR0b3BDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHR0b3BDb250YWluZXIuY2xhc3NOYW1lID0gJ25hdi1idXR0b25zLWNvbnRhaW5lciBleHBsb3Jlci1mb2N1cy1tb2JpbGUtYnV0dG9ucyc7XG5cdFx0dG9wQ29udGFpbmVyLnNldENzc1Byb3BzKHtcblx0XHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdGFsaWduSXRlbXM6ICdjZW50ZXInLFxuXHRcdFx0Z2FwOiAnNHB4Jyxcblx0XHRcdHBhZGRpbmc6ICc4cHgnLFxuXHRcdFx0Ym9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSdcblx0XHR9KTtcblx0XHRcblx0XHQvLyBJbnNlcnQgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgdmlld1xuXHRcdGZpbGVFeHBsb3JlclZpZXcuaW5zZXJ0QmVmb3JlKHRvcENvbnRhaW5lciwgZmlsZUV4cGxvcmVyVmlldy5maXJzdENoaWxkKTtcblx0fVxuXHRyZXR1cm4gdG9wQ29udGFpbmVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRmlsZUV4cGxvcmVySWNvbihwbHVnaW46IEV4cGxvcmVyRm9jdXNQbHVnaW4pOiBIVE1MRWxlbWVudCB7XG5cdGNvbnN0IGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0aWNvbi5jbGFzc05hbWUgPSAnY2xpY2thYmxlLWljb24gbmF2LWFjdGlvbi1idXR0b24nO1xuXHRpY29uLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHBsdWdpbi5sYW5nLnRvZ2dsZUZvY3VzKTtcblxuXHQvLyBDcmVhdGUgdGhlIGZvY3VzIGljb24gU1ZHXG5cdGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJyk7XG5cdHN2Zy5zZXRBdHRyaWJ1dGUoJ3htbG5zJywgJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyk7XG5cdHN2Zy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgJzI0Jyk7XG5cdHN2Zy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsICcyNCcpO1xuXHRzdmcuc2V0QXR0cmlidXRlKCd2aWV3Qm94JywgJzAgMCAyNCAyNCcpO1xuXHRzdmcuc2V0QXR0cmlidXRlKCdmaWxsJywgJ25vbmUnKTtcblx0c3ZnLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJ2N1cnJlbnRDb2xvcicpO1xuXHRzdmcuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMicpO1xuXHRzdmcuc2V0QXR0cmlidXRlKCdzdHJva2UtbGluZWNhcCcsICdyb3VuZCcpO1xuXHRzdmcuc2V0QXR0cmlidXRlKCdzdHJva2UtbGluZWpvaW4nLCAncm91bmQnKTtcblx0c3ZnLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnc3ZnLWljb24gbHVjaWRlLWZvY3VzJyk7XG5cdFxuXHQvLyBMdWNpZGUgZm9jdXMgaWNvbiAtIGNpcmNsZSB3aXRoIGNvcm5lciBicmFja2V0c1xuXHRjb25zdCBjaXJjbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2NpcmNsZScpO1xuXHRjaXJjbGUuc2V0QXR0cmlidXRlKCdjeCcsICcxMicpO1xuXHRjaXJjbGUuc2V0QXR0cmlidXRlKCdjeScsICcxMicpO1xuXHRjaXJjbGUuc2V0QXR0cmlidXRlKCdyJywgJzMnKTtcblx0c3ZnLmFwcGVuZENoaWxkKGNpcmNsZSk7XG5cdFxuXHRjb25zdCBwYXRoMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncGF0aCcpO1xuXHRwYXRoMS5zZXRBdHRyaWJ1dGUoJ2QnLCAnTTMgN1Y1YTIgMiAwIDAgMSAyLTJoMicpO1xuXHRzdmcuYXBwZW5kQ2hpbGQocGF0aDEpO1xuXHRcblx0Y29uc3QgcGF0aDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3BhdGgnKTtcblx0cGF0aDIuc2V0QXR0cmlidXRlKCdkJywgJ00xNyAzaDJhMiAyIDAgMCAxIDIgMnYyJyk7XG5cdHN2Zy5hcHBlbmRDaGlsZChwYXRoMik7XG5cdFxuXHRjb25zdCBwYXRoMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncGF0aCcpO1xuXHRwYXRoMy5zZXRBdHRyaWJ1dGUoJ2QnLCAnTTIxIDE3djJhMiAyIDAgMCAxLTIgMmgtMicpO1xuXHRzdmcuYXBwZW5kQ2hpbGQocGF0aDMpO1xuXHRcblx0Y29uc3QgcGF0aDQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3BhdGgnKTtcblx0cGF0aDQuc2V0QXR0cmlidXRlKCdkJywgJ003IDIxSDVhMiAyIDAgMCAxLTItMnYtMicpO1xuXHRzdmcuYXBwZW5kQ2hpbGQocGF0aDQpO1xuXHRcblx0aWNvbi5hcHBlbmRDaGlsZChzdmcpO1xuXHRyZXR1cm4gaWNvbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluc2VydEZpbGVFeHBsb3Jlckljb24oaWNvbjogSFRNTEVsZW1lbnQsIG5hdkJ1dHRvbnNDb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XG5cdC8vIERvbid0IGluc2VydCBpZiBhbHJlYWR5IGluIHRoZSBjb250YWluZXJcblx0aWYgKG5hdkJ1dHRvbnNDb250YWluZXIuY29udGFpbnMoaWNvbikpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyBGaW5kIHRoZSBwb3NpdGlvbiB0byBpbnNlcnQ6IGFmdGVyIGFsbCBkZWZhdWx0IE9ic2lkaWFuIGljb25zLCBiZWZvcmUgYW55IC5jbWRyIGVsZW1lbnRzXG5cdGNvbnN0IGFsbEljb25zID0gQXJyYXkuZnJvbShuYXZCdXR0b25zQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jbGlja2FibGUtaWNvbi5uYXYtYWN0aW9uLWJ1dHRvbicpKTtcblx0Y29uc3QgZGVmYXVsdEljb25zID0gYWxsSWNvbnMuZmlsdGVyKGVsID0+ICFlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2NtZHInKSAmJiBlbCAhPT0gaWNvbik7XG5cdGNvbnN0IGNtZHJJY29ucyA9IEFycmF5LmZyb20obmF2QnV0dG9uc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuY21kcicpKTtcblx0XG5cdGlmIChjbWRySWNvbnMubGVuZ3RoID4gMCkge1xuXHRcdC8vIEluc2VydCBiZWZvcmUgZmlyc3QgY21kciBpY29uXG5cdFx0bmF2QnV0dG9uc0NvbnRhaW5lci5pbnNlcnRCZWZvcmUoaWNvbiwgY21kckljb25zWzBdKTtcblx0fSBlbHNlIGlmIChkZWZhdWx0SWNvbnMubGVuZ3RoID4gMCkge1xuXHRcdC8vIEluc2VydCBhZnRlciBsYXN0IGRlZmF1bHQgaWNvblxuXHRcdGNvbnN0IGxhc3RJY29uID0gZGVmYXVsdEljb25zW2RlZmF1bHRJY29ucy5sZW5ndGggLSAxXTtcblx0XHRpZiAobGFzdEljb24ubmV4dFNpYmxpbmcpIHtcblx0XHRcdG5hdkJ1dHRvbnNDb250YWluZXIuaW5zZXJ0QmVmb3JlKGljb24sIGxhc3RJY29uLm5leHRTaWJsaW5nKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bmF2QnV0dG9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChpY29uKTtcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0Ly8gSnVzdCBhcHBlbmQgaWYgbm8gb3RoZXIgaWNvbnNcblx0XHRuYXZCdXR0b25zQ29udGFpbmVyLmFwcGVuZENoaWxkKGljb24pO1xuXHR9XG59XG5cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQTRDOzs7QUNBNUMsSUFBTSxPQUFPO0FBQUEsRUFDWCxPQUFPO0FBQUEsRUFDUCxZQUFhO0FBQUEsRUFD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QixTQUFTLENBQUMsUUFBUTtBQUU5RCxjQUFJLGNBQWM7QUFDakIsZ0JBQUksZUFBZTtBQUNuQixnQkFBSSxnQkFBZ0I7QUFDcEI7QUFBQSxVQUNEO0FBQ0EsY0FBSSxlQUFlO0FBQ25CLGNBQUksZ0JBQWdCO0FBQ3BCLDBCQUFnQjtBQUFBLFFBQ2pCLENBQUM7QUFBQSxNQUNGO0FBR0EsV0FBSyx1QkFBdUI7QUFHNUIsNkJBQXVCLEtBQUssa0JBQWtCLG1CQUFtQjtBQUFBLElBQ2xFO0FBR0EsMEJBQXNCO0FBR3RCLFNBQUs7QUFBQSxNQUNKLEtBQUssSUFBSSxVQUFVLEdBQUcsaUJBQWlCLE1BQU07QUFDNUMsWUFBSSxLQUFLLFNBQVMsc0JBQXNCO0FBQ3ZDLGdDQUFzQjtBQUFBLFFBQ3ZCO0FBQUEsTUFDRCxDQUFDO0FBQUEsSUFDRjtBQUFBLEVBQ0Q7QUFBQSxFQUVBLHlCQUF5QjtBQUN4QixRQUFJLENBQUMsS0FBSyxrQkFBa0I7QUFDM0I7QUFBQSxJQUNEO0FBRUEsUUFBSSxDQUFDLEtBQUssU0FBUyxzQkFBc0I7QUFDeEMsVUFBSSxLQUFLLGlCQUFpQixlQUFlO0FBQ3hDLGFBQUssaUJBQWlCLE9BQU87QUFBQSxNQUM5QjtBQUNBO0FBQUEsSUFDRDtBQUdBLFFBQUksQ0FBQyxLQUFLLGlCQUFpQixlQUFlO0FBRXpDLFlBQU0scUJBQXFCLEtBQUssSUFBSSxVQUFVLGdCQUFnQixlQUFlO0FBQzdFLFVBQUksbUJBQW1CLFNBQVMsR0FBRztBQUNsQyxjQUFNLG1CQUFtQixtQkFBbUIsQ0FBQyxFQUFFLEtBQUs7QUFDcEQsY0FBTSxzQkFBc0Isd0JBQXdCLGdCQUFnQjtBQUVwRSxZQUFJLHFCQUFxQjtBQUN4QixpQ0FBdUIsS0FBSyxrQkFBa0IsbUJBQW1CO0FBQUEsUUFDbEU7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUlBLFFBQUksS0FBSyxpQkFBaUIsTUFBTSxRQUFRO0FBQ3ZDLFdBQUssaUJBQWlCLE1BQU0sZUFBZSxRQUFRO0FBQUEsSUFDcEQ7QUFHQSxRQUFJLEtBQUssU0FBUztBQUNqQixXQUFLLGlCQUFpQixTQUFTLFdBQVc7QUFBQSxJQUMzQyxPQUFPO0FBQ04sV0FBSyxpQkFBaUIsWUFBWSxXQUFXO0FBQUEsSUFDOUM7QUFBQSxFQUNEO0FBQUEsRUFFQSxXQUFXO0FBQ1YsUUFBSSxLQUFLLGtCQUFrQjtBQUMxQixXQUFLLGlCQUFpQixPQUFPO0FBQzdCLFdBQUssbUJBQW1CO0FBQUEsSUFDekI7QUFBQSxFQUNEO0FBQ0Q7QUFFQSxJQUFPLGVBQVE7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJsYW5nIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
